import{r as e,j as s}from"./vendor-react-BqCNLigP.js";import{P as t,f as r}from"./Poster-B5VboZT4.js";import{A as a}from"./config-BJKyA3im.js";import{R as o}from"./Row-BzDF0V_w.js";import{A as i}from"./AdsterraSmartlink-D86JIFMo.js";import{f as l}from"./vendor-router-C4M7CORf.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-react-ui-CyuwbvWU.js";import"./index-Y1OpAnun.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-firebase-D_MHdhg9.js";const n=({onOpenModal:n,isWatched:d})=>{const[c,m]=l(),[p,x]=e.useState(c.get("q")||""),[g,h]=e.useState([]),[u,f]=e.useState(!1),j=function(s,t){const[r,a]=e.useState(s);return e.useEffect(()=>{const e=setTimeout(()=>{a(s)},t);return()=>clearTimeout(e)},[s,t]),r}(p,500);e.useEffect(()=>{if(j.trim()){f(!0),m({q:j.trim()},{replace:!0});(async()=>{const e=((await r(a.searchTv(j.trim()))).results||[]).map(e=>({id:e.id,title:e.name,name:e.name,poster_path:e.poster_path,media_type:"tv",genre_ids:e.genre_ids||[]})).filter(e=>e.poster_path);h(e),f(!1)})()}else m({},{replace:!0}),h([]),u&&f(!1)},[j,m,u]);const v=j.trim().length>0;return s.jsxs("div",{className:"px-4 sm:px-8 md:px-16 pt-28 pb-20",children:[s.jsxs("div",{className:"mb-8 text-center",children:[s.jsx("h1",{className:"text-4xl font-extrabold mb-2",children:"Drama Hub"}),s.jsx("p",{className:"text-lg text-(--text-secondary)",children:"Discover Popular Chinese Dramas"})]}),s.jsx("div",{className:"flex justify-center mb-12",children:s.jsx("input",{type:"text",value:p,onChange:e=>{x(e.target.value)},placeholder:"Search for Chinese dramas...",className:"w-full max-w-lg p-3 bg-(--bg-tertiary) rounded-md focus:outline-none focus:ring-2 focus:ring-(--brand-color) transition-all"})}),v?s.jsxs(s.Fragment,{children:[s.jsxs("h2",{className:"text-2xl font-bold mb-6",children:['Search Results for "',j,'"']}),u?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:Array.from({length:12}).map((e,t)=>s.jsx("div",{className:"aspect-2/3 skeleton rounded-md"},`skeleton-search-${t}`))}):g.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:g.map(e=>s.jsx(t,{item:e,onOpenModal:n,isWatched:d(e.id)},e.id))}):s.jsx("div",{className:"text-center py-16",children:s.jsxs("p",{className:"text-xl text-(--text-secondary)",children:['No results found for "',j,'".']})})]}):s.jsxs(s.Fragment,{children:[s.jsx(o,{title:"Popular Chinese Dramas",endpoint:"dramaPopular",onOpenModal:n,isWatched:d,isLarge:!0}),s.jsx(i,{}),s.jsx(o,{title:"Highly Rated Dramas",endpoint:"dramaTopRated",onOpenModal:n,isWatched:d})]})]})};export{n as DramaPage};
