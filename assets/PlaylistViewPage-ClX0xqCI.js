import{r as e,j as s}from"./vendor-react-BqCNLigP.js";import{aO as t,y as l,af as a,aP as r,x as i,ab as o}from"./vendor-react-ui-CyuwbvWU.js";import{u as n,O as d}from"./index-ClyQhDYH.js";import{P as c}from"./PlaylistManager-1CMdZzY0.js";import{g as m,u as p}from"./vendor-router-C4M7CORf.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-firebase-D_MHdhg9.js";const x=({onOpenModal:x,isWatched:g})=>{const{playlistId:h}=m(),u=p(),{playlists:b,deletePlaylist:f,removeFromPlaylist:j,exportPlaylist:y,reorderPlaylist:v}=n(),[N,k]=e.useState(!1),[w,P]=e.useState(null),C=b.find(e=>e.id===h);if(!C)return s.jsxs("div",{className:"px-4 sm:px-8 md:px-16 pt-28 pb-20 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Playlist not found"}),s.jsx("button",{onClick:()=>u("/playlists"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium",children:"Back to Playlists"})]});const D=()=>{P(null)};return s.jsxs("div",{className:"px-4 sm:px-8 md:px-16 pt-28 pb-20",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>u(-1),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-4 transition-colors",children:[s.jsx(t,{})," Back"]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"w-full md:w-80 aspect-video bg-linear-to-br from-purple-900 to-gray-900 rounded-xl overflow-hidden shrink-0",children:C.thumbnail?s.jsx(d,{item:{poster_path:C.thumbnail,title:C.name},isLarge:!0,onClick:()=>{}}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-6xl text-gray-600",children:"ðŸ“‹"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-4xl font-bold mb-3",children:C.name}),s.jsx("p",{className:"text-gray-400 mb-4",children:C.description||"No description"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-6",children:[s.jsxs("span",{children:[C.items.length," items"]}),s.jsx("span",{children:"â€¢"}),s.jsxs("span",{children:["Updated ",new Date(C.updatedAt).toLocaleDateString()]})]}),C.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:C.tags.map((e,t)=>s.jsxs("span",{className:"px-3 py-1 bg-purple-600/20 text-purple-300 rounded-full text-sm",children:["#",e]},t))}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:()=>{C.items.length>0&&x(C.items[0])},disabled:0===C.items.length,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(l,{})," Play All"]}),s.jsxs("button",{onClick:()=>{const e=C.items[Math.floor(Math.random()*C.items.length)];x(e)},disabled:0===C.items.length,className:"flex items-center gap-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(a,{})," Shuffle"]}),s.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-colors",children:[s.jsx(r,{})," Edit"]}),s.jsxs("button",{onClick:()=>{const e=y(h),s=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.download=`${C.name.replace(/\s+/g,"_")}.json`,l.click(),URL.revokeObjectURL(t)},className:"flex items-center gap-2 px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-colors",children:[s.jsx(i,{})," Export"]}),s.jsxs("button",{onClick:()=>{confirm(`Delete "${C.name}"?`)&&(f(h),u("/playlists"))},className:"flex items-center gap-2 px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-medium transition-colors",children:[s.jsx(o,{})," Delete"]})]})]})]})]}),0===C.items.length?s.jsxs("div",{className:"text-center py-20",children:[s.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“‹"}),s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Empty playlist"}),s.jsx("p",{className:"text-gray-400",children:"Add items from movies, anime, or dramas"})]}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:C.items.map((e,t)=>s.jsxs("div",{draggable:!0,onDragStart:()=>(e=>{P(e)})(t),onDragOver:e=>((e,s)=>{e.preventDefault(),null!==w&&w!==s&&(v(h,w,s),P(s))})(e,t),onDragEnd:D,className:"relative group cursor-move",children:[s.jsx(d,{item:e,onClick:x,isWatched:e=>g(e),showTitle:!0}),s.jsx("button",{onClick:s=>{s.stopPropagation(),confirm("Remove from playlist?")&&j(h,e.id)},className:"absolute top-2 right-2 p-2 bg-red-600 hover:bg-red-700 rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10",title:"Remove from playlist",children:s.jsx(o,{className:"text-sm"})}),s.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black/70 rounded text-xs font-bold",children:t+1})]},`${e.id}-${t}`))}),N&&s.jsx(c,{onClose:()=>k(!1),onSelectPlaylist:()=>k(!1)})]})};export{x as PlaylistViewPage,x as default};
