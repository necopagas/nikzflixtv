import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{aH as s,ap as a,ak as r,av as l,aI as i,aJ as n,aK as c,au as o,aL as d,aM as x}from"./vendor-react-ui-CyuwbvWU.js";import{f as m,e as h,d as g}from"./index-DUhc3w7m.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-firebase-D_MHdhg9.js";import"./vendor-router-C4M7CORf.js";const p=()=>{const{watchedHistory:p}=m(),{continueWatchingList:u}=h(),{myList:b}=g(),[j,f]=e.useState("all"),v=e.useMemo(()=>{const e=new Date,t=new Date(e.getTime()-6048e5),s=new Date(e.getTime()-2592e6);let a=p;"week"===j?a=p.filter(e=>{const s=localStorage.getItem(`watched_${e}_timestamp`);return s&&new Date(parseInt(s))>=t}):"month"===j&&(a=p.filter(e=>{const t=localStorage.getItem(`watched_${e}_timestamp`);return t&&new Date(parseInt(t))>=s}));const r={};a.forEach(e=>{JSON.parse(localStorage.getItem(`watched_${e}_genres`)||"[]").forEach(e=>{r[e]=(r[e]||0)+1})});const l=Object.entries(r).sort((e,t)=>t[1]-e[1]).slice(0,5),i=60*a.length,n=Math.floor(i/60),c=i%60,o=a.map(e=>{const t=localStorage.getItem(`watched_${e}_timestamp`);return t?new Date(parseInt(t)):null}).filter(Boolean).sort((e,t)=>t-e);let d=0,x=0,m=1;for(let h=0;h<o.length-1;h++){Math.floor((o[h]-o[h+1])/864e5)<=1?m++:(x=Math.max(x,m),m=1)}if(x=Math.max(x,m),o.length>0){if((new Date).setHours(0,0,0,0)===o[0].setHours(0,0,0,0)){d=1;for(let e=1;e<o.length;e++){if(1!==(new Date(o[e-1]).setHours(0,0,0,0)-new Date(o[e]).setHours(0,0,0,0))/864e5)break;d++}}}return{totalWatched:a.length,totalHours:n,totalMinutes:c,totalInMyList:b.length,totalContinueWatching:u.length,topGenres:l,currentStreak:d,longestStreak:x,averagePerDay:"week"===j?(a.length/7).toFixed(1):"month"===j?(a.length/30).toFixed(1):(a.length/365).toFixed(1)}},[p,b,u,j]),N=e.useMemo(()=>{const e=[];return v.totalWatched>=1&&e.push({icon:"ğŸ¬",title:"First Watch",desc:"Watched your first content"}),v.totalWatched>=10&&e.push({icon:"ğŸ“º",title:"Getting Started",desc:"Watched 10 titles"}),v.totalWatched>=50&&e.push({icon:"ğŸ¿",title:"Movie Buff",desc:"Watched 50 titles"}),v.totalWatched>=100&&e.push({icon:"ğŸ­",title:"Cinephile",desc:"Watched 100 titles"}),v.totalWatched>=250&&e.push({icon:"ğŸ‘‘",title:"Streaming King",desc:"Watched 250 titles"}),v.totalWatched>=500&&e.push({icon:"ğŸ†",title:"Legend",desc:"Watched 500 titles"}),v.currentStreak>=3&&e.push({icon:"ğŸ”¥",title:"On Fire",desc:"3-day watch streak"}),v.currentStreak>=7&&e.push({icon:"âš¡",title:"Week Warrior",desc:"7-day watch streak"}),v.currentStreak>=30&&e.push({icon:"ğŸ’",title:"Diamond Streak",desc:"30-day watch streak"}),v.totalHours>=24&&e.push({icon:"â°",title:"Day Watcher",desc:"Watched for 24 hours"}),v.totalHours>=100&&e.push({icon:"ğŸŒŸ",title:"Century Club",desc:"Watched for 100 hours"}),b.length>=10&&e.push({icon:"â¤ï¸",title:"Collector",desc:"10 items in My List"}),b.length>=50&&e.push({icon:"ğŸ’",title:"Super Collector",desc:"50 items in My List"}),e},[v,b]);return t.jsxs("div",{className:"min-h-screen bg-linear-to-br from-gray-900 via-purple-900 to-gray-900 text-white px-4 sm:px-8 md:px-16 pt-28 pb-20",children:[t.jsxs("div",{className:"mb-8 text-center",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-linear-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Your Stats Dashboard"}),t.jsx("p",{className:"text-gray-400 text-lg",children:"Track your viewing habits and achievements"})]}),t.jsx("div",{className:"mb-8 flex justify-center gap-2",children:["all","month","week"].map(e=>t.jsx("button",{onClick:()=>f(e),className:"px-6 py-2 rounded-lg font-semibold transition-all duration-300 "+(j===e?"bg-linear-to-r from-purple-600 to-pink-600":"bg-gray-800 hover:bg-gray-700"),children:"all"===e?"All Time":"month"===e?"This Month":"This Week"},e))}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[t.jsx("div",{className:"bg-linear-to-br from-purple-600 to-purple-800 rounded-xl p-6 shadow-xl",children:t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(s,{className:"text-4xl text-white/80"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold",children:v.totalWatched}),t.jsx("div",{className:"text-sm text-white/80",children:"Content Watched"})]})]})}),t.jsx("div",{className:"bg-linear-to-br from-blue-600 to-blue-800 rounded-xl p-6 shadow-xl",children:t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(a,{className:"text-4xl text-white/80"}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-3xl font-bold",children:[v.totalHours,"h"]}),t.jsx("div",{className:"text-sm text-white/80",children:"Watch Time"})]})]})}),t.jsx("div",{className:"bg-linear-to-br from-orange-600 to-red-600 rounded-xl p-6 shadow-xl",children:t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(r,{className:"text-4xl text-white/80"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold",children:v.currentStreak}),t.jsx("div",{className:"text-sm text-white/80",children:"Day Streak"})]})]})}),t.jsx("div",{className:"bg-linear-to-br from-pink-600 to-pink-800 rounded-xl p-6 shadow-xl",children:t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(l,{className:"text-4xl text-white/80"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-bold",children:v.totalInMyList}),t.jsx("div",{className:"text-sm text-white/80",children:"In My List"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx(i,{className:"text-3xl text-yellow-400"}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-2xl font-bold",children:[v.longestStreak," Days"]}),t.jsx("div",{className:"text-sm text-gray-400",children:"Longest Streak"})]})]})}),t.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx(n,{className:"text-3xl text-green-400"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:v.averagePerDay}),t.jsx("div",{className:"text-sm text-gray-400",children:"Average Per Day"})]})]})}),t.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx(c,{className:"text-3xl text-blue-400"}),t.jsxs("div",{children:[t.jsx("div",{className:"text-2xl font-bold",children:v.totalContinueWatching}),t.jsx("div",{className:"text-sm text-gray-400",children:"Continue Watching"})]})]})})]}),v.topGenres.length>0&&t.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6 mb-8",children:[t.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(o,{className:"text-purple-400"}),"Top Genres"]}),t.jsx("div",{className:"space-y-4",children:v.topGenres.map(([e,s],a)=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between mb-2",children:[t.jsx("span",{className:"font-medium",children:e}),t.jsxs("span",{className:"text-gray-400",children:[s," titles"]})]}),t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:t.jsx("div",{className:"h-3 rounded-full "+(0===a?"bg-linear-to-r from-purple-500 to-pink-500":1===a?"bg-linear-to-r from-blue-500 to-cyan-500":2===a?"bg-linear-to-r from-green-500 to-emerald-500":3===a?"bg-linear-to-r from-yellow-500 to-orange-500":"bg-linear-to-r from-red-500 to-pink-500"),style:{width:s/v.topGenres[0][1]*100+"%"}})})]},e))})]}),t.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-xl p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[t.jsx(d,{className:"text-yellow-400"}),"Achievements"]}),t.jsxs("span",{className:"text-lg font-semibold text-purple-400",children:[N.length," Unlocked"]})]}),N.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map((e,s)=>t.jsx("div",{className:"bg-linear-to-br from-gray-700 to-gray-800 rounded-lg p-4 border border-yellow-500/30 hover:border-yellow-500 transition-all duration-300 transform hover:scale-105",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"text-4xl",children:e.icon}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-yellow-400",children:e.title}),t.jsx("div",{className:"text-sm text-gray-400",children:e.desc})]})]})},s))}):t.jsxs("div",{className:"text-center py-8 text-gray-400",children:[t.jsx(i,{className:"text-6xl mx-auto mb-4 opacity-50"}),t.jsx("p",{children:"Start watching to unlock achievements!"})]})]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsxs("div",{className:"bg-linear-to-r from-purple-600/20 to-pink-600/20 border border-purple-500/50 rounded-xl p-6",children:[t.jsx(x,{className:"text-5xl text-yellow-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Keep Going!"}),t.jsx("p",{className:"text-gray-300",children:v.currentStreak>0?`You're on a ${v.currentStreak}-day streak! Keep watching to maintain it! ğŸ”¥`:"Watch something today to start a new streak! ğŸ¬"})]})})]})};export{p as default};
