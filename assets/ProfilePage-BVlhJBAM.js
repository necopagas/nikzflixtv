import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{d as s}from"./index-av1fv5Wb.js";import{u as r,t as a}from"./vendor-firebase-D_MHdhg9.js";import{u as n}from"./vendor-router-C4M7CORf.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-react-ui-Bu4CYNdA.js";const l=()=>{const{currentUser:l}=s(),o=n(),[d,c]=e.useState(""),[i,m]=e.useState(""),[u,x]=e.useState(""),[p,h]=e.useState(""),[b,f]=e.useState(l?.displayName||""),[g,v]=e.useState(""),[y,j]=e.useState("");return l?t.jsx("div",{className:"flex justify-center min-h-screen pt-28 pb-20 px-4",children:t.jsxs("div",{className:"w-full max-w-md space-y-8",children:[t.jsxs("div",{className:"p-8 space-y-6 bg-[var(--bg-secondary)] rounded-lg shadow-lg",children:[t.jsx("h1",{className:"text-2xl font-bold text-center text-[var(--text-primary)]",children:"My Profile"}),t.jsxs("div",{className:"text-center border-b border-[var(--border-color)] pb-4",children:[t.jsx("p",{className:"text-lg text-[var(--text-secondary)]",children:"Email Address"}),t.jsx("p",{className:"text-xl font-semibold text-[var(--text-primary)] break-words",children:l.email})]}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v(""),j(""),b.trim().length<3)return v("Username must be at least 3 characters long.");try{await r(l,{displayName:b.trim()}),j("Username updated successfully! You may need to refresh the page to see changes across the site.")}catch(t){v("Failed to update username.")}},className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-bold text-center text-[var(--text-primary)]",children:"Display Name"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)]",children:"Username"}),t.jsx("input",{type:"text",value:b,onChange:e=>f(e.target.value),required:!0,className:"w-full p-3 mt-1 bg-[var(--bg-tertiary)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--brand-color)]"})]}),g&&t.jsx("p",{className:"text-red-500 text-sm text-center",children:g}),y&&t.jsx("p",{className:"text-green-500 text-sm text-center",children:y}),t.jsx("button",{type:"submit",className:"w-full py-3 font-bold bg-[var(--brand-color)] rounded-md hover:bg-red-700 transition-colors",children:"Update Username"})]})]}),t.jsx("div",{className:"p-8 space-y-6 bg-[var(--bg-secondary)] rounded-lg shadow-lg",children:t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),x(""),h(""),d!==i)return x("Passwords do not match.");if(d.length<6)return x("Password should be at least 6 characters long.");try{await a(l,d),h("Password updated successfully!"),c(""),m("")}catch(t){x("Failed to update password. Please log out and log in again before trying.")}},className:"space-y-6",children:[t.jsx("h2",{className:"text-xl font-bold text-center text-[var(--text-primary)]",children:"Change Password"}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)]",children:"New Password"}),t.jsx("input",{type:"password",value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full p-3 mt-1 bg-[var(--bg-tertiary)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--brand-color)]"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-bold text-[var(--text-secondary)]",children:"Confirm New Password"}),t.jsx("input",{type:"password",value:i,onChange:e=>m(e.target.value),required:!0,className:"w-full p-3 mt-1 bg-[var(--bg-tertiary)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--brand-color)]"})]}),u&&t.jsx("p",{className:"text-red-500 text-sm text-center",children:u}),p&&t.jsx("p",{className:"text-green-500 text-sm text-center",children:p}),t.jsx("button",{type:"submit",className:"w-full py-3 font-bold bg-[var(--brand-color)] rounded-md hover:bg-red-700 transition-colors",children:"Update Password"})]})})]})}):(o("/auth"),null)};export{l as ProfilePage};
