import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{p as s,n as l,aR as a,V as r,aS as n,aQ as i,ae as o,q as c,ac as d,S as x,aT as p}from"./vendor-react-ui-Bu4CYNdA.js";import{h as m}from"./index-KckJq3FG.js";const u=({onClose:n,onSelectPlaylist:i})=>{const{playlists:o,createPlaylist:c,deletePlaylist:d,updatePlaylist:x,exportPlaylist:p,importPlaylist:u,duplicatePlaylist:b}=m(),[y,j]=e.useState(!1),[f,v]=e.useState(null),[N,w]=e.useState(null),C=e.useRef(null);return t.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",children:[t.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Playlists"}),t.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[o.length," ",1===o.length?"playlist":"playlists"]})]}),t.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-800 rounded-lg transition-colors",children:t.jsx(s,{className:"text-2xl text-gray-400"})})]}),t.jsxs("div",{className:"p-6 border-b border-gray-800 flex gap-3",children:[t.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition-colors",children:[t.jsx(l,{})," Create Playlist"]}),t.jsxs("button",{onClick:()=>C.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-colors",children:[t.jsx(a,{})," Import"]}),t.jsx("input",{ref:C,type:"file",accept:".json",className:"hidden",onChange:e=>{const t=e.target.files?.[0];if(t){const e=new FileReader;e.onload=e=>{u(e.target.result)},e.readAsText(t)}}})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:0===o.length?t.jsxs("div",{className:"text-center py-20",children:[t.jsx(r,{className:"text-6xl text-gray-600 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"No playlists yet"}),t.jsx("p",{className:"text-gray-400 mb-6",children:"Create your first playlist to organize your content"}),t.jsx("button",{onClick:()=>j(!0),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition-colors",children:"Create Playlist"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>t.jsx(g,{playlist:e,onSelect:()=>i?.(e),onEdit:()=>v(e),onDelete:()=>{confirm(`Delete "${e.name}"?`)&&d(e.id)},onExport:()=>{const t=p(e.id),s=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(s),a=document.createElement("a");a.href=l,a.download=`${e.name.replace(/\s+/g,"_")}.json`,a.click(),URL.revokeObjectURL(l)},onDuplicate:()=>b(e.id),activeMenu:N,setActiveMenu:w},e.id))})})]}),(y||f)&&t.jsx(h,{playlist:f,onSave:e=>{f?(x(f.id,e),v(null)):(c(e.name,e.description,e.tags),j(!1))},onClose:()=>{j(!1),v(null)}})]})},g=({playlist:e,onSelect:s,onEdit:l,onDelete:a,onExport:p,onDuplicate:m,activeMenu:u,setActiveMenu:g})=>{const h=e.items.length,b=u===e.id;return t.jsxs("div",{className:"bg-gray-800 rounded-xl overflow-hidden hover:bg-gray-750 transition-all group",children:[t.jsxs("div",{className:"aspect-video bg-gradient-to-br from-purple-900 to-gray-900 relative cursor-pointer",onClick:s,children:[e.thumbnail?t.jsx("img",{src:`https://image.tmdb.org/t/p/w500${e.thumbnail}`,alt:e.name,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.jsx(r,{className:"text-6xl text-gray-600"})}),t.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:t.jsx("button",{className:"px-6 py-3 bg-white/20 backdrop-blur-sm rounded-lg font-medium",children:"View Playlist"})})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[t.jsx("h3",{className:"font-bold text-white text-lg line-clamp-1",children:e.name}),t.jsxs("div",{className:"relative",children:[t.jsx("button",{onClick:t=>{t.stopPropagation(),g(b?null:e.id)},className:"p-1 hover:bg-gray-700 rounded transition-colors",children:t.jsx(n,{className:"text-gray-400"})}),b&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>g(null)}),t.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-gray-900 rounded-lg shadow-xl border border-gray-700 py-1 z-50 w-48",children:[t.jsxs("button",{onClick:()=>{l(),g(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center gap-2 text-white",children:[t.jsx(i,{})," Edit"]}),t.jsxs("button",{onClick:()=>{m(),g(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center gap-2 text-white",children:[t.jsx(o,{})," Duplicate"]}),t.jsxs("button",{onClick:()=>{p(),g(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center gap-2 text-white",children:[t.jsx(c,{})," Export"]}),t.jsx("hr",{className:"border-gray-700 my-1"}),t.jsxs("button",{onClick:()=>{a(),g(null)},className:"w-full px-4 py-2 text-left hover:bg-gray-800 flex items-center gap-2 text-red-400",children:[t.jsx(d,{})," Delete"]})]})]})]})]}),t.jsx("p",{className:"text-gray-400 text-sm line-clamp-2 mb-3",children:e.description||"No description"}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{children:[h," ",1===h?"item":"items"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(x,{}),new Date(e.updatedAt).toLocaleDateString()]})]}),e.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 mt-3",children:e.tags.slice(0,3).map((e,s)=>t.jsxs("span",{className:"px-2 py-1 bg-purple-600/20 text-purple-300 rounded text-xs",children:["#",e]},s))})]})]})},h=({playlist:l,onSave:a,onClose:r})=>{const[n,i]=e.useState(l?.name||""),[o,c]=e.useState(l?.description||""),[d,x]=e.useState(""),[m,u]=e.useState(l?.tags||[]),g=()=>{d.trim()&&!m.includes(d.trim())&&(u([...m,d.trim()]),x(""))};return t.jsx("div",{className:"fixed inset-0 bg-black/90 z-[60] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-lg w-full p-6",children:[t.jsx("h3",{className:"text-2xl font-bold mb-6",children:l?"Edit Playlist":"Create New Playlist"}),t.jsxs("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&a({name:n,description:o,tags:m})},className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Playlist Name *"}),t.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"e.g., Action Movies",className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg border border-gray-700 focus:border-purple-500 focus:outline-none",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Description"}),t.jsx("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:"Add a description...",rows:3,className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg border border-gray-700 focus:border-purple-500 focus:outline-none resize-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags"}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",value:d,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),g()),placeholder:"Add tags...",className:"flex-1 px-4 py-2 bg-gray-800 text-white rounded-lg border border-gray-700 focus:border-purple-500 focus:outline-none"}),t.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-lg border border-gray-700",children:t.jsx(p,{})})]}),m.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:m.map((e,l)=>t.jsxs("span",{className:"px-3 py-1 bg-purple-600/20 text-purple-300 rounded-full text-sm flex items-center gap-2",children:["#",e,t.jsx("button",{type:"button",onClick:()=>u(m.filter((e,t)=>t!==l)),className:"hover:text-white",children:t.jsx(s,{})})]},l))})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-colors",children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition-colors",children:l?"Save Changes":"Create Playlist"})]})]})]})})};export{u as P};
