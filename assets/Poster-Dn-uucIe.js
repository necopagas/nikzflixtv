const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-react-ui-CyuwbvWU.js","assets/vendor-react-BqCNLigP.js","assets/vendor-players-DUwgxdJ7.js"])))=>i.map(i=>d[i]);
import{B as e,a as t,r as s,_ as a}from"./vendor-react-ui-CyuwbvWU.js";import{r,j as o,R as n}from"./vendor-react-BqCNLigP.js";import{M as i,a as l,b as c,B as u,A as d}from"./config-zXXe5B0b.js";import{a as p,i as h}from"./index-BGD4uCZd.js";const m=async e=>{try{const t=await fetch(e);return t.ok?await t.json():(401===t.status&&alert("Error: Invalid API Key. Please get a new one from themoviedb.org."),{results:[]})}catch(t){return{results:[]}}},f=new Map;i.forEach(e=>{f.has(e.id)||f.set(e.id,e.name)}),l.forEach(e=>{f.set(e.id,e.name)});const g=n.lazy(()=>a(()=>import("./vendor-react-ui-CyuwbvWU.js").then(e=>e.b2),__vite__mapDeps([0,1,2]))),x=new Map,b=({item:a,onOpenModal:n,isWatched:i,isLarge:l,season:b,episode:v,query:w=""})=>{const[y,j]=r.useState(!1),[N,_]=r.useState(null),[k,T]=r.useState(!1),[E,$]=r.useState(!1),[P,M]=r.useState(!1),S=r.useRef(null),z=r.useRef(null);(()=>{const{previewsEnabled:e,togglePreviews:t,setPreviewsEnabled:s}=p()})();const I=p(),L="undefined"!=typeof window&&(I?.previewsEnabled&&window.matchMedia&&window.matchMedia("(hover: hover)").matches&&window.innerWidth>=640),A=!!a.poster_path,C=!!a.backdrop_path,R=A?a.poster_path?.startsWith("http")?a.poster_path:`${c}${a.poster_path}`:C?`${u}${a.backdrop_path}`:"/no-image.svg",W=c.replace("/w500","/w92"),D=A?a.poster_path?.startsWith("http")?a.poster_path:`${W}${a.poster_path}`:C?`${u}${a.backdrop_path}`:"/no-image.svg";r.useEffect(()=>(M(!0),()=>{clearTimeout(S.current)}),[]);const Y=(F=a.genre_ids)&&Array.isArray(F)&&0!==F.length?F.map(e=>f.get(e)).filter(e=>!!e).slice(0,3):[];var F;const O=a.title||a.name||"Untitled",B=l?"w-64":"w-40",K=e=>{const t=(w||"").trim();if(!t)return e;try{const s=function(e=""){return String(e).replace(/[.*+?^${}()|[\\]\\]/g,"\\$&")}(t);return String(e).split(new RegExp(`(${s})`,"ig")).map((e,s)=>e.toLowerCase()===t.toLowerCase()?o.jsx("span",{className:"text-yellow-300",children:e},s):o.jsx("span",{children:e},s))}catch{return e}};return o.jsxs("div",{className:"poster-container relative group focus:outline-none focus-visible:ring-4 focus-visible:ring-offset-2 focus-visible:ring-offset-(--bg-primary) focus-visible:ring-(--brand-color) rounded-lg",onClick:()=>n(a),tabIndex:"0",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n(a))},onMouseEnter:()=>{j(!0),clearTimeout(z.current),z.current=setTimeout(()=>{L&&(async()=>{if(!L)return;const e=a.id;if(x.has(e)){const t=x.get(e);return _(t),T(!!t),void(t&&(clearTimeout(S.current),S.current=setTimeout(()=>T(!1),8e3)))}try{const t=a.media_type||(a.title?"movie":"tv"),s=await m(d.details(t,e)),r=s.videos?.results||[];let o=r.find(e=>"Trailer"===e.type&&"YouTube"===e.site);o||(o=r.find(e=>"Teaser"===e.type&&"YouTube"===e.site)),o||(o=r.find(e=>"YouTube"===e.site));const n=o?o.key:null;x.set(e,n),_(n),n&&(T(!0),clearTimeout(S.current),S.current=setTimeout(()=>T(!1),8e3))}catch(t){x.set(a.id,null)}})()},300)},onMouseLeave:()=>{j(!1),T(!1),clearTimeout(S.current),clearTimeout(z.current)},children:[o.jsxs("div",{className:`relative ${B} flex flex-col rounded-lg overflow-hidden bg-(--bg-secondary) shadow-md transition-all duration-300 ease-in-out group-hover:shadow-xl group-hover:scale-110 group-hover:z-10`,children:[o.jsxs("div",{className:`poster-image-wrapper relative w-full aspect-2/3 overflow-hidden bg-gray-800 ${P?"opacity-100 translate-y-0":"opacity-0 -translate-y-1"} transition-transform transition-opacity duration-500`,children:[o.jsx(h,{src:R,placeholderSrc:D,alt:O,className:"w-full h-full",imgProps:{className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ease-out "+(E?"opacity-100":"opacity-0"),fetchPriority:l?"high":"low",onLoad:()=>$(!0),onError:e=>{e.target.onerror=null,e.target.src="/no-image.svg",$(!0)}}}),o.jsxs("div",{className:"absolute left-0 right-0 bottom-0 p-3 bg-linear-to-t from-black/90 via-black/70 to-transparent",children:[o.jsx("h4",{className:"text-sm font-bold text-white truncate mb-1",title:O,children:K(O)}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[a.release_date&&o.jsx("span",{children:new Date(a.release_date).getFullYear()}),a.vote_average>0&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-yellow-400",children:"★"}),a.vote_average.toFixed(1)]})]})]}),b&&v&&o.jsxs("div",{className:"absolute top-2 left-2 bg-black/75 text-white text-xs font-bold px-2 py-1 rounded-md z-30",children:["S",b,": E",v]}),i&&o.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-red-600 rounded-full flex items-center justify-center text-white z-30 shadow-lg",title:"Watched",children:o.jsx(e,{className:"text-sm"})}),o.jsxs("div",{className:"absolute inset-0 bg-linear-to-t from-black via-black/90 to-transparent p-3 transition-all duration-300 ease-in-out z-30 opacity-0 pointer-events-none group-hover:opacity-100 group-hover:pointer-events-auto "+(y?"opacity-100 pointer-events-auto":""),children:[k&&N&&o.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:o.jsx(r.Suspense,{fallback:null,children:o.jsx(g,{url:`https://www.youtube.com/watch?v=${N}`,playing:!0,muted:!0,loop:!0,width:"100%",height:"100%",style:{objectFit:"cover",filter:"brightness(0.6)",transform:"scale(1.05)",position:"absolute",inset:0},config:{youtube:{playerVars:{controls:0,disablekb:1,modestbranding:1,rel:0}}}})})}),o.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex gap-3",children:[o.jsx("button",{onClick:e=>{e.stopPropagation(),n(a,!0)},className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-white/90 text-black flex items-center justify-center text-xl md:text-2xl transition-all duration-200 hover:bg-white hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white ring-offset-2 ring-offset-transparent",title:"Play","aria-label":"Play",children:o.jsx(t,{})}),o.jsx("button",{onClick:e=>{e.stopPropagation(),n(a)},className:"w-10 h-10 md:w-12 md:h-12 rounded-full bg-gray-600/80 backdrop-blur-sm text-white flex items-center justify-center text-xl md:text-2xl transition-all duration-200 hover:bg-gray-500/90 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white ring-offset-2 ring-offset-transparent",title:"More Info","aria-label":"More Info",children:o.jsx(s,{})})]}),Y.length>0&&o.jsx("div",{className:"absolute bottom-3 left-3 w-[calc(100%-24px)] transition-all duration-300",children:o.jsx("p",{className:"text-white/90 text-xs font-medium leading-relaxed",children:Y.slice(0,3).join(" • ")})})]})," "]})," ",o.jsx("div",{className:"pt-2 pb-2 px-2 bg-transparent",children:o.jsx("h3",{className:"text-sm font-semibold text-(--text-primary) transition-colors duration-200 truncate group-hover:text-white",title:O,children:K(O)})})]})," "]})};export{b as P,m as f};
