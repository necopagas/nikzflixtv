import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{aF as s,aG as r}from"./vendor-react-ui-CyuwbvWU.js";import{f as n,P as a}from"./Poster-DEYSin_y.js";import{A as o}from"./config-BJKyA3im.js";const i=({id:i,title:l,endpoint:c,param:d,items:u,onOpenModal:m,isWatched:h,isLarge:x=!1,isLoading:f=!1,query:p=""})=>{const v=e.useRef(null),[b,g]=(t=>{const[s,r]=e.useState(null),[n,a]=e.useState(!1),o=e.useRef(null);return e.useEffect(()=>{const e=new IntersectionObserver(([t])=>{r(t),t.isIntersecting&&(a(!0),e.disconnect())},t),s=o.current;return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[o,t]),[o,n,s]})({threshold:.1,triggerOnce:!0}),{items:j,loading:y,error:w}=((t,s)=>{const[r,a]=e.useState([]),[i,l]=e.useState(!0),[c,d]=e.useState(null);return e.useEffect(()=>{let e;const r=o[t];if("function"==typeof r)e=r(s);else if("string"==typeof r)e=r;else{if("string"!=typeof t||!t.startsWith("/")&&!t.startsWith("http"))return a([]),void l(!1);e=t}l(!0),d(null),n(e).then(e=>{a(e.results||[])}).catch(e=>{d(e.message||"Failed to load data")}).finally(()=>l(!1))},[t,s]),{items:r,loading:i,error:c}})(c,d),N=c?j:u,k=c?y:f,L=e.useMemo(()=>{if(!p)return N||[];const e=p.trim().toLowerCase();return(N||[]).filter(t=>(t.title||t.name||"").toString().toLowerCase().includes(e)||(t.overview||"").toLowerCase().includes(e))},[N,p]),W=e=>{if(v.current){window.innerWidth<768?v.current.scrollBy({left:e,behavior:"auto"}):v.current.scrollBy({left:e,behavior:"smooth"})}},[S,C]=e.useState(!1),[E,M]=e.useState(!1);return e.useEffect(()=>{const e=v.current;if(!e)return;const t=()=>{C(e.scrollLeft>10),M(e.scrollLeft+e.clientWidth<e.scrollWidth-10)};return t(),e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[N]),k||N&&0!==N.length?w&&!k?t.jsxs("div",{id:i,ref:b,className:"row-container py-4",children:[t.jsx("div",{className:"px-6",children:t.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:l})}),t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-red-400",children:[t.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),t.jsx("p",{className:"text-lg font-medium",children:"Failed to load content"}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:w})]})]}):t.jsxs("div",{id:i,ref:b,className:"row-container py-4 "+(g?"is-visible":""),children:[t.jsx("div",{className:"px-6",children:t.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:l})}),t.jsxs("div",{className:"relative group",children:[t.jsx("button",{onClick:()=>{const e=v.current;if(!e)return;const t=Math.round(.8*e.clientWidth);W(-t)},"aria-label":`Scroll ${l} left`,className:"absolute left-0 top-1/2 -translate-y-1/2 z-20 w-12 h-24 flex items-center justify-center bg-black/50 hover:bg-black/75 transition-colors duration-200 opacity-0 group-hover:opacity-100 disabled:opacity-30 disabled:pointer-events-none",disabled:!S,children:t.jsx(s,{className:"text-white text-2xl"})}),t.jsx("div",{ref:v,className:"row-posters flex snap-x snap-mandatory touch-pan-x overflow-x-scroll overflow-y-visible space-x-4 pl-6 pr-6 py-4 -mx-6 "+(x?"h-[400px]":"h-[300px]"),tabIndex:0,"aria-label":`${l} carousel`,role:"region",onKeyDown:e=>{v.current&&("ArrowLeft"===e.key?(e.preventDefault(),W(-300)):"ArrowRight"===e.key&&(e.preventDefault(),W(300)))},children:k?Array.from({length:10}).map((e,s)=>t.jsx("div",{className:`shrink-0 ${x?"w-64":"w-40"} snap-start`,children:t.jsx("div",{className:"skeleton rounded-lg overflow-hidden relative",children:t.jsxs("div",{className:(x?"h-96":"h-60")+" bg-linear-to-br from-gray-800 to-gray-900 relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-linear-to-t from-black/60 to-transparent"}),t.jsx("div",{className:"absolute inset-0 bg-linear-to-r from-transparent via-gray-700/30 to-transparent animate-shimmer",style:{animationDuration:"2s"}})]})})},`skeleton-${l}-${s}`)):0===L.length?t.jsxs("div",{className:"flex flex-col items-center justify-center w-full py-12 text-gray-400",children:[t.jsx("svg",{className:"w-16 h-16 mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),t.jsx("p",{className:"text-lg font-medium",children:"No results found"})]}):L.map(e=>t.jsx("div",{className:`shrink-0 ${x?"w-64":"w-40"} snap-start`,children:t.jsx(a,{item:e,onOpenModal:m,isWatched:h&&h(e.id),isLarge:x,season:e.season,episode:e.episode,query:p})},e.id))}),t.jsx("button",{onClick:()=>{const e=v.current;if(!e)return;const t=Math.round(.8*e.clientWidth);W(t)},"aria-label":`Scroll ${l} right`,className:"absolute right-0 top-1/2 -translate-y-1/2 z-20 w-12 h-24 flex items-center justify-center bg-black/50 hover:bg-black/75 transition-colors duration-200 opacity-0 group-hover:opacity-100 disabled:opacity-30 disabled:pointer-events-none",disabled:!E,children:t.jsx(r,{className:"text-white text-2xl"})})]})]}):null};export{i as R};
