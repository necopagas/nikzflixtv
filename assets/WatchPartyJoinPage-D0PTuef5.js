import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{b0 as a,aP as s,b2 as r}from"./vendor-react-ui-Bu4CYNdA.js";import{g as l,u as i}from"./vendor-router-C4M7CORf.js";import"./vendor-players-DUwgxdJ7.js";const o=()=>{const{partyId:o}=l(),n=i(),[c,d]=e.useState(null),[m,x]=e.useState(""),[h,p]=e.useState(!0),[b,u]=e.useState("");e.useEffect(()=>{(()=>{try{const e=localStorage.getItem(`nikzflix_watch_party_${o}`);if(e){const t=JSON.parse(e);d(t)}else u("Watch party not found")}catch{u("Failed to load party information")}finally{p(!1)}})();const e=localStorage.getItem("nikzflix_username");e&&x(e)},[o]);return h?t.jsx("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-800 to-black flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-purple-500 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-400",children:"Loading party..."})]})}):b||!c?t.jsx("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-800 to-black pt-20 px-4",children:t.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20",children:[t.jsx(a,{className:"text-6xl text-red-500 mx-auto mb-4"}),t.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Party Not Found"}),t.jsx("p",{className:"text-gray-400 mb-6",children:b||"This watch party may have ended or the link is invalid."}),t.jsx("button",{onClick:()=>n("/"),className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:"Go to Home"})]})}):t.jsx("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-800 to-black pt-20 px-4",children:t.jsxs("div",{className:"max-w-3xl mx-auto",children:[t.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 text-gray-400 hover:text-white mb-8 transition-colors",children:[t.jsx(s,{}),t.jsx("span",{children:"Back to Home"})]}),t.jsxs("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-2xl",children:[t.jsx("div",{className:"relative h-64 bg-linear-to-br from-purple-600 via-pink-600 to-purple-800 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(r,{className:"text-8xl text-white/90 mx-auto mb-4"}),t.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Join Watch Party"}),t.jsx("p",{className:"text-white/80",children:"Watch together with friends"})]})}),t.jsxs("div",{className:"p-8",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Party Details"}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 space-y-3",children:t.jsxs("div",{className:"flex items-start gap-4",children:[c.video?.metadata?.poster&&t.jsx("img",{src:`https://image.tmdb.org/t/p/w185${c.video.metadata.poster}`,alt:"",className:"w-24 h-36 object-cover rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:c.video?.metadata?.title||"Watch Party"}),t.jsxs("div",{className:"space-y-1 text-sm",children:[t.jsxs("p",{className:"text-gray-400",children:[t.jsx("span",{className:"text-gray-500",children:"Host:"})," ",c.host?.username||"Unknown"]}),t.jsxs("p",{className:"text-gray-400",children:[t.jsx("span",{className:"text-gray-500",children:"Participants:"})," ",c.participants?.length||0]}),t.jsxs("p",{className:"text-gray-400",children:[t.jsx("span",{className:"text-gray-500",children:"Created:"})," ",new Date(c.createdAt).toLocaleString()]})]})]})]})})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("label",{className:"block text-white font-semibold mb-2",children:"Your Name"}),t.jsx("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 bg-gray-800 text-white rounded-lg border border-gray-700 focus:border-purple-500 focus:outline-none",maxLength:20,autoFocus:!0}),t.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"This name will be visible to other participants"})]}),t.jsx("button",{onClick:()=>{if(m.trim())if(localStorage.setItem("nikzflix_username",m.trim()),c?.video?.metadata){const{mediaType:e,itemId:t}=c.video.metadata;n(`/watch/${"tv"===e?"series":"movie"}/${t}?party=${o}`)}else u("Invalid party data");else u("Please enter your name")},disabled:!m.trim(),className:"w-full px-6 py-4 bg-linear-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-700 disabled:to-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-bold text-lg transition-all duration-300 hover:scale-105 disabled:hover:scale-100",children:"Join Watch Party"}),t.jsxs("div",{className:"mt-8 bg-blue-900/20 border border-blue-700/30 rounded-lg p-4",children:[t.jsx("h4",{className:"text-blue-400 font-semibold mb-2",children:"What is Watch Party?"}),t.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[t.jsx("li",{children:"• Watch videos together in sync with friends"}),t.jsx("li",{children:"• Chat with other participants in real-time"}),t.jsx("li",{children:"• Playback automatically syncs with the host"}),t.jsx("li",{children:"• Works without any additional software"})]})]})]})]})]})})};export{o as default};
