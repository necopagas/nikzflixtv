import{r as e,j as s}from"./vendor-react-BqCNLigP.js";import{a$ as t,x as a,b0 as l,z as r,y as o,w as n,ab as d}from"./vendor-react-ui-CyuwbvWU.js";import{u as i,D as c}from"./useDownloadManager-D6Z9Tom-.js";import{O as x}from"./index-BGNPvCqR.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-firebase-D_MHdhg9.js";import"./vendor-router-C4M7CORf.js";const m=({onOpenModal:m})=>{const{isSupported:g,downloads:h,storageInfo:b,pauseDownload:u,resumeDownload:p,cancelDownload:j,deleteDownload:N,clearCompleted:y,clearAll:w,getDownloadsByStatus:f}=i(),[v,D]=e.useState("all"),C="all"===v?h:f(v),O=f(c.DOWNLOADING).length,A=f(c.COMPLETED).length,E=f(c.QUEUED).length,k=e=>{if(e.status===c.COMPLETED&&m){const s={id:e.itemId,title:e.title,name:e.title,poster_path:e.poster,backdrop_path:e.backdrop,overview:e.overview,media_type:e.mediaType};m(s,!0)}};return g?s.jsx("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-800 to-black pt-20 px-4 pb-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",children:[s.jsx(a,{className:"text-blue-500"}),"Downloads"]}),s.jsx("p",{className:"text-gray-400",children:"Manage your offline content and downloads"})]}),s.jsxs("div",{className:"bg-linear-to-r from-gray-800 to-gray-900 rounded-xl p-6 mb-8 border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(l,{className:"text-3xl text-blue-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Storage Usage"}),s.jsxs("p",{className:"text-gray-400 text-sm",children:[b.used," MB used of ",b.available," MB"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-2xl font-bold text-white",children:[b.percentage,"%"]}),s.jsx("p",{className:"text-gray-400 text-sm",children:"Used"})]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:s.jsx("div",{className:"bg-linear-to-r from-blue-600 to-purple-600 h-full transition-all duration-500",style:{width:`${b.percentage}%`}})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Total Downloads"}),s.jsx("p",{className:"text-3xl font-bold text-white",children:h.length})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Active"}),s.jsx("p",{className:"text-3xl font-bold text-green-500",children:O})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Queued"}),s.jsx("p",{className:"text-3xl font-bold text-yellow-500",children:E})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Completed"}),s.jsx("p",{className:"text-3xl font-bold text-blue-500",children:A})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>D("all"),className:"px-4 py-2 rounded-lg font-medium transition-colors "+("all"===v?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["All (",h.length,")"]}),s.jsxs("button",{onClick:()=>D(c.DOWNLOADING),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(v===c.DOWNLOADING?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Active (",O,")"]}),s.jsxs("button",{onClick:()=>D(c.COMPLETED),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(v===c.COMPLETED?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"),children:["Completed (",A,")"]})]}),s.jsxs("div",{className:"flex gap-2",children:[A>0&&s.jsx("button",{onClick:async()=>{confirm("Clear all completed downloads?")&&await y()},className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-white rounded-lg font-medium transition-colors",children:"Clear Completed"}),h.length>0&&s.jsx("button",{onClick:async()=>{confirm("Delete ALL downloads? This cannot be undone.")&&await w()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Clear All"})]})]}),0===C.length?s.jsxs("div",{className:"text-center py-20",children:[s.jsx(a,{className:"text-6xl text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"No Downloads"}),s.jsx("p",{className:"text-gray-400",children:"all"===v?"Start downloading content to watch offline":`No ${v} downloads`})]}):s.jsx("div",{className:"space-y-4",children:C.map(e=>s.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden border border-gray-700 hover:border-gray-600 transition-all duration-300",children:s.jsxs("div",{className:"flex gap-4 p-4",children:[s.jsx("div",{className:"shrink-0 cursor-pointer",onClick:()=>k(e),children:s.jsx(x,{item:{poster_path:e.poster},isLarge:!1,onClick:()=>k(e),className:"w-24 h-36 rounded-lg"})}),s.jsxs("div",{className:"grow",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-1 cursor-pointer hover:text-blue-400",onClick:()=>k(e),children:e.title}),s.jsx("p",{className:"text-gray-400 text-sm mb-2 line-clamp-2",children:e.overview}),s.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[s.jsx("span",{className:"px-2 py-1 rounded "+(e.status===c.COMPLETED?"bg-green-600/20 text-green-400":e.status===c.DOWNLOADING?"bg-blue-600/20 text-blue-400":e.status===c.PAUSED?"bg-orange-600/20 text-orange-400":e.status===c.FAILED?"bg-red-600/20 text-red-400":"bg-gray-600/20 text-gray-400"),children:e.status}),s.jsx("span",{className:"text-gray-400",children:e.quality}),s.jsx("span",{className:"text-gray-400",children:e.mediaType})]}),(e.status===c.DOWNLOADING||e.status===c.PAUSED)&&s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"flex items-center justify-between mb-1",children:s.jsxs("span",{className:"text-sm text-gray-400",children:[Math.round(e.progress),"%"]})}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-linear-to-r from-blue-600 to-purple-600 h-full transition-all duration-300",style:{width:`${e.progress}%`}})})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[e.status===c.DOWNLOADING&&s.jsx("button",{onClick:()=>(async e=>{await u(e)})(e.id),className:"p-2 bg-orange-600 hover:bg-orange-700 text-white rounded-lg transition-colors",title:"Pause",children:s.jsx(r,{})}),e.status===c.PAUSED&&s.jsx("button",{onClick:()=>(async e=>{await p(e)})(e.id),className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",title:"Resume",children:s.jsx(o,{})}),(e.status===c.DOWNLOADING||e.status===c.PAUSED||e.status===c.QUEUED)&&s.jsx("button",{onClick:()=>(async e=>{confirm("Are you sure you want to cancel this download?")&&await j(e)})(e.id),className:"p-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",title:"Cancel",children:s.jsx(n,{})}),s.jsx("button",{onClick:()=>(async e=>{confirm("Are you sure you want to delete this download?")&&await N(e)})(e.id),className:"p-2 bg-gray-700 hover:bg-gray-600 text-white rounded-lg transition-colors",title:"Delete",children:s.jsx(d,{})})]})]})},e.id))})]})}):s.jsx("div",{className:"min-h-screen bg-linear-to-b from-gray-900 via-gray-800 to-black pt-20 px-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto text-center py-20",children:[s.jsx(t,{className:"text-6xl text-red-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Downloads Not Supported"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Your browser doesn't support offline downloads. Please try using a modern browser like Chrome, Edge, or Firefox."})]})})};export{m as default};
