import{r as e,j as t}from"./vendor-react-BqCNLigP.js";import{aZ as s,a_ as a,o as r,p as i,a$ as n}from"./vendor-react-ui-Bu4CYNdA.js";import"./vendor-players-DUwgxdJ7.js";const l=()=>{const{isCastAvailable:l,isAirPlayAvailable:o,isCasting:c,castDevice:d,stopCasting:m}=(()=>{const[t,s]=e.useState(!1),[a,r]=e.useState(!1),[i,n]=e.useState(!1),[l,o]=e.useState(null),[c,d]=e.useState("NOT_CONNECTED");e.useEffect(()=>{window.chrome&&window.chrome.cast&&window.chrome.cast.isAvailable?s(!0):window.__onGCastApiAvailable=e=>{s(e)};const e=()=>{const e=window.cast?.framework?.CastContext?.getInstance()?.getCurrentSession();e?(n(!0),d("CONNECTED"),o({name:e.getCastDevice().friendlyName,type:"chromecast"})):(n(!1),d("NOT_CONNECTED"),o(null))};return window.addEventListener("cast-state-changed",e),()=>{window.removeEventListener("cast-state-changed",e)}},[]),e.useEffect(()=>{"remote"in HTMLVideoElement.prototype&&r(!0)},[]);const m=e.useCallback(()=>{if(!window.chrome||!window.chrome.cast||!window.chrome.cast.isAvailable)return;const e=window.cast.framework.CastContext.getInstance();e.setOptions({receiverApplicationId:window.chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),e.addEventListener(window.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,e=>{switch(e.sessionState){case window.cast.framework.SessionState.SESSION_STARTED:case window.cast.framework.SessionState.SESSION_RESUMED:d("CONNECTED"),n(!0);break;case window.cast.framework.SessionState.SESSION_ENDED:d("NOT_CONNECTED"),n(!1),o(null)}})},[]),x=e.useCallback(async(e,s)=>{if(!t)throw new Error("Chromecast not available");try{const t=window.cast.framework.CastContext.getInstance(),a=t.getCurrentSession();if(!a){await t.requestSession();const a=t.getCurrentSession();if(!a)throw new Error("Failed to start cast session");return u(a,e,s)}return u(a,e,s)}catch(a){throw a}},[t]),u=(e,t,s)=>{const a=new window.chrome.cast.media.MediaInfo(t,"video/mp4");a.metadata=new window.chrome.cast.media.GenericMediaMetadata,a.metadata.title=s.title||"NikzFlix Video",a.metadata.subtitle=s.subtitle||"",s.poster&&(a.metadata.images=[new window.chrome.cast.Image(s.poster)]);const r=new window.chrome.cast.media.LoadRequest(a);return r.autoplay=!0,e.loadMedia(r)},h=e.useCallback(()=>{if(i)try{const e=window.cast.framework.CastContext.getInstance().getCurrentSession();e&&e.endSession(!0)}catch(e){}},[i]),g=e.useCallback(e=>{if(!a||!e)return!1;try{return e.setAttribute("x-webkit-airplay","allow"),e.setAttribute("airplay","allow"),!!e.webkitShowPlaybackTargetPicker}catch(t){return!1}},[a]),b=e.useCallback(e=>{if(a&&e)try{e.webkitShowPlaybackTargetPicker&&e.webkitShowPlaybackTargetPicker()}catch(t){}},[a]),w=e.useCallback(()=>{if(!i)return null;try{const e=window.cast.framework.CastContext.getInstance().getCurrentSession();if(!e)return null;const t=e.getMediaSession();return t?{currentTime:t.getEstimatedTime(),duration:t.media.duration,playerState:t.playerState,isPaused:t.playerState===window.chrome.cast.media.PlayerState.PAUSED,isPlaying:t.playerState===window.chrome.cast.media.PlayerState.PLAYING}:null}catch(e){return null}},[i]),y=e.useCallback((e,t)=>{if(i)try{const s=window.cast.framework.CastContext.getInstance().getCurrentSession();if(!s)return;const a=s.getMediaSession();if(!a)return;switch(e){case"play":a.play(new window.chrome.cast.media.PlayRequest);break;case"pause":a.pause(new window.chrome.cast.media.PauseRequest);break;case"seek":{const e=new window.chrome.cast.media.SeekRequest;e.currentTime=t,a.seek(e);break}case"volume":{const e=new window.chrome.cast.media.VolumeRequest(new window.chrome.cast.Volume(t,!1));a.setVolume(e);break}}}catch(s){}},[i]);return{isCastAvailable:t,isAirPlayAvailable:a,isCasting:i,castDevice:l,castState:c,initializeCast:m,castToChromecast:x,stopCasting:h,getPlaybackState:w,controlPlayback:y,enableAirPlay:g,showAirPlayPicker:b}})(),[x,u]=e.useState(()=>{const e=localStorage.getItem("nikzflix_cast_settings");return e?JSON.parse(e):{autoConnect:!1,preferredDevice:null,showNotifications:!0,quality:"auto"}});e.useEffect(()=>{localStorage.setItem("nikzflix_cast_settings",JSON.stringify(x))},[x]);const h=(e,t)=>{u(s=>({...s,[e]:t}))};return t.jsxs("div",{className:"min-h-screen bg-[#0b0b0b] text-white pt-20 px-4 sm:px-8 md:px-16 pb-20",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:"ðŸ“º Cast Settings"}),t.jsx("p",{className:"text-gray-400 text-sm sm:text-base",children:"Configure casting to Chromecast and AirPlay devices"})]}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-900/80 to-gray-900/40 rounded-xl p-6 mb-8 border border-gray-800",children:[t.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(s,{className:"text-blue-400"}),"Device Status"]}),t.jsxs("div",{className:"grid sm:grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"p-4 rounded-lg border "+(l?"bg-green-900/20 border-green-500/30":"bg-gray-800/50 border-gray-700"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(a,{className:l?"text-green-400":"text-gray-500"}),t.jsx("span",{className:"font-semibold",children:"Chromecast"})]}),l?t.jsx(r,{className:"text-green-400"}):t.jsx(i,{className:"text-gray-500"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:l?"Available and ready to cast":"Not available on this device"})]}),t.jsxs("div",{className:"p-4 rounded-lg border "+(o?"bg-green-900/20 border-green-500/30":"bg-gray-800/50 border-gray-700"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(s,{className:o?"text-green-400":"text-gray-500"}),t.jsx("span",{className:"font-semibold",children:"AirPlay"})]}),o?t.jsx(r,{className:"text-green-400"}):t.jsx(i,{className:"text-gray-500"})]}),t.jsx("p",{className:"text-sm text-gray-400",children:o?"Available on this device":"Only available on Safari/iOS"})]})]}),c&&d&&t.jsx("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center",children:t.jsx(a,{className:"text-white animate-pulse"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:"Currently Casting"}),t.jsx("p",{className:"text-sm text-gray-400",children:d.name})]})]}),t.jsx("button",{onClick:m,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm font-medium transition-colors",children:"Stop Casting"})]})})]}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-900/80 to-gray-900/40 rounded-xl p-6 mb-8 border border-gray-800",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cast Preferences"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold mb-1",children:"Auto-Connect"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Automatically connect to previously used device"})]}),t.jsx("button",{onClick:()=>h("autoConnect",!x.autoConnect),className:"relative w-14 h-7 rounded-full transition-colors "+(x.autoConnect?"bg-blue-600":"bg-gray-600"),children:t.jsx("div",{className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform "+(x.autoConnect?"translate-x-7":"")})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800/50 rounded-lg",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold mb-1",children:"Cast Notifications"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Show notifications when casting starts or stops"})]}),t.jsx("button",{onClick:()=>h("showNotifications",!x.showNotifications),className:"relative w-14 h-7 rounded-full transition-colors "+(x.showNotifications?"bg-blue-600":"bg-gray-600"),children:t.jsx("div",{className:"absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform "+(x.showNotifications?"translate-x-7":"")})})]}),t.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[t.jsx("h3",{className:"font-semibold mb-3",children:"Cast Quality"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:["auto","720p","1080p","4K"].map(e=>t.jsx("button",{onClick:()=>h("quality",e),className:"px-4 py-2 rounded-lg font-medium transition-colors "+(x.quality===e?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"),children:"auto"===e?"Auto":e},e))}),t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Higher quality requires better network connection"})]})]})]}),t.jsxs("div",{className:"bg-gradient-to-r from-gray-900/80 to-gray-900/40 rounded-xl p-6 border border-gray-800",children:[t.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[t.jsx(n,{className:"text-blue-400"}),"How to Cast"]}),t.jsxs("div",{className:"space-y-4",children:[l&&t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[t.jsx(a,{className:"text-blue-400"}),"Chromecast"]}),t.jsxs("ol",{className:"text-sm text-gray-400 space-y-2 ml-6 list-decimal",children:[t.jsx("li",{children:"Make sure your Chromecast and device are on the same WiFi network"}),t.jsx("li",{children:"Start playing a video on NikzFlix"}),t.jsx("li",{children:"Click the Cast button in the video player"}),t.jsx("li",{children:"Select your Chromecast device from the list"}),t.jsx("li",{children:"Enjoy watching on your TV!"})]})]}),o&&t.jsxs("div",{children:[t.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[t.jsx(s,{className:"text-purple-400"}),"AirPlay"]}),t.jsxs("ol",{className:"text-sm text-gray-400 space-y-2 ml-6 list-decimal",children:[t.jsx("li",{children:"Ensure your Apple TV or AirPlay-enabled device is on the same network"}),t.jsx("li",{children:"Start playing a video on NikzFlix"}),t.jsx("li",{children:"Click the Cast button and select AirPlay"}),t.jsx("li",{children:"Choose your AirPlay device"}),t.jsx("li",{children:"Video will start playing on your TV"})]})]}),t.jsx("div",{className:"mt-6 p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-300",children:[t.jsx("strong",{children:"Tip:"})," For the best casting experience, use a 5GHz WiFi network and ensure your devices are close to the router."]})})]})]})]})};export{l as CastSettingsPage};
