const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vendor-react-ui-CyuwbvWU.js","assets/vendor-react-BqCNLigP.js","assets/vendor-players-DUwgxdJ7.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,R as s}from"./vendor-react-BqCNLigP.js";import{c as n,d as i,e as a,f as r}from"./index-BGD4uCZd.js";import{u as l}from"./useRecommendations-C5w4OxAQ.js";import{a as o,r as d,N as c,O as u,_ as m}from"./vendor-react-ui-CyuwbvWU.js";import{f as h}from"./Poster-Dn-uucIe.js";import{A as p,B as x,M as f,C as g}from"./config-zXXe5B0b.js";import{G as b}from"./GenreFilter-CrIpEbdF.js";import{R as v}from"./Row-CtfX2kYv.js";import"./vendor-players-DUwgxdJ7.js";import"./vendor-state-9eBMMYdn.js";import"./vendor-firebase-D_MHdhg9.js";import"./vendor-router-C4M7CORf.js";const w=s.lazy(()=>m(()=>import("./vendor-react-ui-CyuwbvWU.js").then(e=>e.b2),__vite__mapDeps([0,1,2]))),j=({onOpenModal:s})=>{const[n,i]=e.useState([]),[a,r]=e.useState(0),[l,m]=e.useState(null),[f,g]=e.useState(!1),[b,v]=e.useState(!0),j=n[a];e.useEffect(()=>{h(p.trending).then(e=>{const t=(e.results||[]).filter(e=>e.backdrop_path);i(t),r(Math.floor(Math.random()*t.length))})},[]),e.useEffect(()=>{if(n.length>1){const e=setInterval(()=>{r(e=>(e+1)%n.length)},15e3);return()=>clearInterval(e)}},[n]);const y=e.useRef();if(e.useEffect(()=>{if(j){m(null),g(!1);const e=j.media_type||(j.title?"movie":"tv");h(p.details(e,j.id)).then(e=>{const t=e.videos?.results||[];let s=t.find(e=>"Trailer"===e.type&&"YouTube"===e.site);s||(s=t.find(e=>"Teaser"===e.type&&"YouTube"===e.site)),s||(s=t.find(e=>"YouTube"===e.site)),s?(m(s.key),y.current=setTimeout(()=>g(!0),500)):m(null)}).catch(e=>{m(null)})}return()=>clearTimeout(y.current)},[j]),!j)return t.jsx("div",{className:"w-full h-[90vh] skeleton"});const M=j.overview.length>200?`${j.overview.substring(0,200)}...`:j.overview;return t.jsxs("div",{className:"banner relative w-full h-[90vh] bg-cover bg-center text-white transition-all duration-1000",style:{backgroundImage:`url(${x}${j.backdrop_path})`},children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-full z-0 overflow-hidden pointer-events-none",children:l&&t.jsx(e.Suspense,{fallback:null,children:t.jsx(w,{url:`https://www.youtube.com/watch?v=${l}`,playing:!0,muted:b,loop:!0,width:"100%",height:"100%",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) scale(1.5)",opacity:f?1:0,transition:"opacity 1s ease-in-out"},config:{youtube:{playerVars:{autoplay:1,controls:0,disablekb:1,showinfo:0,modestbranding:1,fs:0,cc_load_policy:0,iv_load_policy:3,autohide:1,playsinline:1,rel:0}}}})})}),t.jsx("div",{className:"absolute inset-0 z-10 p-4 sm:p-8 md:p-16 flex flex-col justify-center",children:t.jsxs("div",{className:"flex justify-between items-end",children:[t.jsxs("div",{className:"max-w-3xl",children:[t.jsx("h1",{className:"banner-title text-4xl md:text-7xl font-extrabold mb-4",children:j.title||j.name}),t.jsx("p",{className:"banner-desc text-md md:text-xl mb-8 max-w-md md:max-w-2xl",children:M}),t.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[t.jsxs("button",{onClick:()=>s(j,!0),className:"banner-button bg-linear-to-r from-(--brand-color) to-red-600 text-white px-8 py-3 rounded-md font-bold shadow-lg hover:shadow-red-500/40 hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 text-lg",children:[t.jsx(o,{})," Play"]}),t.jsxs("button",{onClick:()=>s(j),className:"banner-button bg-gray-700/70 backdrop-blur-sm text-white px-8 py-3 rounded-md font-bold hover:bg-gray-600/80 hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 text-lg",children:[t.jsx(d,{})," More Info"]})]})]}),f&&t.jsx("button",{onClick:()=>v(!b),className:"hidden md:flex items-center justify-center w-12 h-12 rounded-full border border-white/30 bg-black/30 backdrop-blur-sm text-white hover:bg-white/10 transition-all duration-200 mb-8 mr-4","aria-label":b?"Unmute":"Mute",children:b?t.jsx(c,{className:"text-xl"}):t.jsx(u,{className:"text-xl"})})]})})]})};function y(){const s=e.useRef(null),i=e.useRef(null),[a,r]=e.useState(!1),[l,o]=e.useState(!1),[d,c]=e.useState("loading"),[u,m]=e.useState(!1),[h,p]=n("nikz_ads_hidden",!1),x="1"===sessionStorage.getItem("nikz_ads_shown");e.useEffect(()=>{h||x?m(!1):(m(!0),sessionStorage.setItem("nikz_ads_shown","1"))},[h,x]);const f="undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;e.useEffect(()=>{if(h||!u||l||!s.current)return;const e="0b8e16ce5c5d7303bb2755058f2e65b4";let t=null;const n=()=>{if(!s.current)return void c("error");c("loading");if(s.current.querySelector(`script[src*="${e}"]`))return o(!0),void c("loaded");const t=document.createElement("div");t.id=`container-${e}`,s.current.appendChild(t);const n=document.createElement("script");n.async=!0,n.setAttribute("data-cfasync","false"),n.src=`//gainedspotsspun.com/${e}/invoke.js`,n.onload=()=>{o(!0),c("loaded")},n.onerror=()=>{c("error")},s.current.appendChild(n),"undefined"!=typeof window&&(window.__nikz_ads_loaded=[n.src],window.__nikz_ads_timestamp=(new Date).toISOString()),setTimeout(()=>{l||c("error")},2e3)};t=window.setTimeout(n,f?250:500);const i=()=>{window.clearTimeout(t),n(),window.removeEventListener("scroll",i),window.removeEventListener("click",i)};return window.addEventListener("scroll",i,{passive:!0}),window.addEventListener("click",i,{once:!0}),()=>{window.clearTimeout(t),window.removeEventListener("scroll",i),window.removeEventListener("click",i)}},[h,u,l,f]),e.useEffect(()=>{i.current&&(i.current.dataset.ready=u&&!h?"1":"0")},[u,h]);return h||!u||"loading"===d?null:t.jsx("div",{ref:i,className:"fixed inset-x-4 sm:inset-x-auto sm:left-1/2 sm:-translate-x-1/2 bottom-[env(safe-area-inset-bottom,1.5rem)] pointer-events-none",style:{zIndex:9999},"aria-live":"polite","data-banner-ready":"true",children:t.jsxs("div",{className:`\n          pointer-events-auto backdrop-blur-md rounded-xl shadow-2xl\n          border border-gray-700/50\n          transition-all duration-500 ease-out\n          ${a?"opacity-50 scale-95":"opacity-100 scale-100"}\n        `,style:{minWidth:320,maxWidth:"90vw",margin:"0 auto",background:"linear-gradient(225deg, rgba(15,23,42,0.95), rgba(15,23,42,0.6))",transform:a?"translateY(20%) scale(0.95)":"translateY(0) scale(1)"},children:[t.jsxs("div",{className:"flex items-start gap-3 p-3",children:[t.jsxs("div",{ref:s,className:"flex-1 flex items-center justify-center min-h-[90px] relative",id:"nikz-ad-container",children:["error"===d&&t.jsxs("div",{className:"flex flex-col items-center gap-2 py-4 text-center",children:[t.jsx("span",{className:"text-xs text-orange-400",children:"âš ï¸ Ad could not be loaded"}),t.jsxs("span",{className:"text-[10px] text-gray-500",children:["Ads are currently unavailable. Please try again later.",t.jsx("br",{}),"If you are the site owner, check your Adsterra dashboard."]})]}),"loaded"===d&&!s.current?.querySelector("script")&&t.jsx("div",{className:"text-xs text-gray-400 py-4",children:"ğŸ“º Ad space ready - waiting for impressions"})]}),t.jsxs("div",{className:"flex flex-col gap-1.5 pt-1",children:[t.jsx("button",{onClick:()=>r(!a),className:"\n                w-8 h-8 flex items-center justify-center\n                bg-gray-700/50 hover:bg-gray-600/70\n                text-gray-300 hover:text-white\n                rounded-lg transition-all duration-200\n                hover:scale-110 active:scale-95\n              ",title:a?"Expand":"Collapse","aria-label":a?"Expand ads":"Collapse ads",children:t.jsx("span",{className:"text-sm font-bold",children:a?"â–¸":"â–¾"})}),t.jsx("button",{onClick:()=>{p(!0),m(!1)},className:"\n                w-8 h-8 flex items-center justify-center\n                bg-red-600/80 hover:bg-red-600\n                text-white\n                rounded-lg transition-all duration-200\n                hover:scale-110 active:scale-95\n              ",title:"Hide ads permanently","aria-label":"Dismiss ads",children:t.jsx("span",{className:"text-sm font-bold",children:"âœ•"})})]})]}),!1]})})}const M=({onOpenModal:s,isWatched:n})=>{const{myList:o,loading:d}=i(),{continueWatchingList:c,loading:u}=a(),{watchedHistory:m,loading:x}=r(),{recommendations:w,loading:M,sourceItem:S,hasWatchHistory:k,hasMyList:N}=l(),[W,O]=e.useState([]),[_,L]=e.useState([]),[E,T]=e.useState([]),[Y,$]=e.useState([]),[P,R]=e.useState([]),[A,C]=e.useState([]),[I,z]=e.useState(null),[F,G]=e.useState([]),[H,B]=e.useState(!1),[D,V]=e.useState([]),[q,Q]=e.useState(null),[U,J]=e.useState(!1),K=e.useRef(null),X=e.useRef(!1),[Z,ee]=e.useState([]),[te,se]=e.useState(!0);e.useEffect(()=>{let e=!0;return(async()=>{const[t,s,n,i,a,r]=await Promise.all([h(p.trending),h(p.popular),h(p.toprated),h(p.tvshows),h(p.anime),h(p.asianDramas)]);e&&(O(t.results||[]),L(s.results||[]),T(n.results||[]),$(i.results||[]),R(a.results||[]),C(r.results||[]))})(),()=>{e=!1}},[]),e.useEffect(()=>{let e=!0;return(async()=>{if(x)return;if(0===m.length)return e&&(J(!1),V([]),Q(null)),K.current=null,void(X.current=!1);const t=m[m.length-1],s=t?.toString();if(K.current!==s||X.current){K.current=s,X.current=!0,e&&(J(!0),V([]),Q(null));try{const[t,n]=await Promise.all([h(p.details("movie",s)).catch(()=>null),h(p.details("tv",s)).catch(()=>null)]),i=t?.id?t:n?.id?n:null,a=t?.id?"movie":"tv";if(!i)return K.current=null,void(e&&(V([]),J(!1)));e&&Q(i);const r=await h(p.recommendations(a,s));e&&V(r.results||[])}catch(n){K.current=null}finally{X.current=!1,e&&J(!1)}}})(),()=>{e=!1}},[m,x]),e.useEffect(()=>{let e=!0;return(async()=>{e&&se(!0);const t=g.map(async e=>{if(e.endpoint)try{const t=await h(e.endpoint),s=(t?.results||[]).filter(e=>e&&e.poster_path),n=e.limit?s.slice(0,e.limit):s;return{title:e.title,items:n}}catch(t){return{title:e.title,items:[]}}if(Array.isArray(e.ids)&&e.ids.length){const t=e.ids.map(e=>h(p.details(e.type,e.id)).catch(e=>null)),s=(await Promise.all(t)).filter(e=>e&&(e.poster_path||e.backdrop_path));return{title:e.title,items:s}}return{title:e.title,items:[]}}),s=await Promise.all(t);e&&(ee(s.filter(e=>e.items.length>0)),se(!1))})(),()=>{e=!1}},[]);const ne=e=>Z.find(t=>t.title===e);return t.jsxs(t.Fragment,{children:[t.jsx(j,{onOpenModal:s}),t.jsx("div",{className:"bg-[#0b0b0b] text-white min-h-screen",children:t.jsx("div",{className:"px-4 sm:px-8 md:px-16 pb-20",children:t.jsx("div",{children:t.jsxs("main",{children:[t.jsx(b,{genres:f,selectedGenre:I,onGenreSelect:e=>{I===e?(z(null),G([])):(z(e),B(!0),h(p.byGenre(e)).then(e=>G(e.results||[])).finally(()=>B(!1)))}}),I&&t.jsx(v,{id:`genre-${I}`,title:f.find(e=>e.id===I)?.name||"Genre Results",items:F,onOpenModal:s,isWatched:n,isLoading:H},`genre-${I}`),!te&&t.jsxs(t.Fragment,{children:[(()=>{const e=ne("Halloween Horrors");return e?t.jsx(v,{id:"halloween-horrors",title:"ğŸƒ Halloween Horrors",items:e.items,onOpenModal:s,isWatched:n}):null})(),(()=>{const e=ne("Mind-Bending Sci-Fi");return e?t.jsx(v,{id:"mind-bending-sci-fi",title:"ğŸ§ ğŸš€ Mind-Bending Sciâ€‘Fi",items:e.items,onOpenModal:s,isWatched:n}):null})(),(()=>{const e=ne("Editor Picks");return e?t.jsx(v,{id:"editor-picks",title:"âœï¸â­ Editor Picks",items:e.items,onOpenModal:s,isWatched:n}):null})()]}),te&&t.jsxs(t.Fragment,{children:[t.jsx(v,{id:"halloween-horrors",title:"ğŸƒ Halloween Horrors",items:[],onOpenModal:s,isWatched:n,isLoading:!0}),t.jsx(v,{id:"mind-bending-sci-fi",title:"ğŸ§ ğŸš€ Mind-Bending Sciâ€‘Fi",items:[],onOpenModal:s,isWatched:n,isLoading:!0}),t.jsx(v,{id:"editor-picks",title:"âœï¸â­ Editor Picks",items:[],onOpenModal:s,isWatched:n,isLoading:!0})]}),(D.length>0||U)&&q&&t.jsx(v,{id:"because-you-watched",title:`ğŸ‘€ ${(()=>{if(!q)return"";const e=q.title||q.name;return`Because You Watched ${e.length>30?`${e.substring(0,30)}...`:e}`})()}`,items:D,onOpenModal:s,isWatched:n,isLoading:U}),k&&w.becauseYouWatched.length>0&&t.jsx(v,{id:"ai-because-you-watched",title:`ğŸ¯ ${(()=>{if(!S)return"Because You Watched";const e=S.title||S.name;return`Because You Watched ${e.length>30?`${e.substring(0,30)}...`:e}`})()}`,items:w.becauseYouWatched,onOpenModal:s,isWatched:n,isLoading:M}),k&&w.basedOnGenres.length>0&&t.jsx(v,{id:"ai-based-on-genres",title:"ğŸ¨ Based On Your Favorite Genres",items:w.basedOnGenres,onOpenModal:s,isWatched:n,isLoading:M}),w.forYou.length>0&&t.jsx(v,{id:"ai-for-you",title:"âœ¨ Picked For You",items:w.forYou,onOpenModal:s,isWatched:n,isLoading:M}),N&&w.similar.length>0&&t.jsx(v,{id:"ai-similar-to-list",title:"ğŸ’« More Like Your List",items:w.similar,onOpenModal:s,isWatched:n,isLoading:M}),w.trending.length>0&&t.jsx(v,{id:"ai-trending-for-you",title:"ğŸ“ˆ Trending For You",items:w.trending,onOpenModal:s,isWatched:n,isLoading:M})," ",t.jsx(v,{id:"trending-now",title:"ğŸ”¥ Trending Now",items:W,onOpenModal:s,isWatched:n}),t.jsx(v,{id:"popular-movies",title:"ğŸ¿ Popular Movies",items:_,onOpenModal:s,isWatched:n}),(c.length>0||u)&&t.jsx(v,{id:"continue-watching",title:"â–¶ï¸ Continue Watching",items:c,onOpenModal:s,isWatched:n,isLoading:u}),t.jsx(v,{id:"top-rated",title:"ğŸ† Top Rated Movies",items:E,onOpenModal:s,isWatched:n}),t.jsx(v,{id:"popular-tv",title:"ğŸ“º Popular TV Shows",items:Y,onOpenModal:s,isWatched:n}),(o.length>0||d)&&t.jsx(v,{id:"my-list",title:"â­ My List",items:o,onOpenModal:s,isWatched:n,isLoading:d}),t.jsx(v,{id:"anime",title:"ğŸ‰ Anime",items:P,onOpenModal:s,isWatched:n,isLarge:!0}),t.jsx(v,{id:"asian-dramas",title:"ğŸ­ Asian Dramas",items:A,onOpenModal:s,isWatched:n}),t.jsx(y,{})]})})})})]})};export{M as HomePage};
