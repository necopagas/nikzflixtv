var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},r=Number.isSafeInteger||function(e){return"number"==typeof e&&Math.abs(e)<=i},i=Number.MAX_SAFE_INTEGER||9007199254740991;let o=function(e){return e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError",e}({}),l=function(e){return e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",e.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",e.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_PARSING_ERROR="levelParsingError",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.FRAG_GAP="fragGap",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.ASSET_LIST_LOAD_ERROR="assetListLoadError",e.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",e.ASSET_LIST_PARSING_ERROR="assetListParsingError",e.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.ATTACH_MEDIA_ERROR="attachMediaError",e.UNKNOWN="unknown",e}({}),u=function(e){return e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.MEDIA_ENDED="hlsMediaEnded",e.STALL_RESOLVED="hlsStallResolved",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFERED_TO_END="hlsBufferedToEnd",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached",e.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",e.ASSET_LIST_LOADING="hlsAssetListLoading",e.ASSET_LIST_LOADED="hlsAssetListLoaded",e.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",e.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",e.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",e.INTERSTITIAL_STARTED="hlsInterstitialStarted",e.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",e.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",e.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",e.INTERSTITIAL_ENDED="hlsInterstitialEnded",e.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",e.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",e.EVENT_CUE_ENTER="hlsEventCueEnter",e}({});var d="manifest",c="level",h="audioTrack",f="subtitleTrack",g="main",p="audio",m="subtitle";class y{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class v{constructor(e,t,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new y(e),this.fast_=new y(t),this.defaultTTFB_=r,this.ttfb_=new y(e)}update(e,t){const{slow_:n,fast_:r,ttfb_:i}=this;n.halfLife!==e&&(this.slow_=new y(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==t&&(this.fast_=new y(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new y(e,i.getEstimate(),i.getTotalWeight()))}sample(e,t){const n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){b(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class w{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=A,this.debug=t.debug.bind(null,n),this.log=t.log.bind(null,n),this.warn=t.warn.bind(null,n),this.info=t.info.bind(null,n),this.error=t.error.bind(null,n)}}const A=function(){},I={trace:A,debug:A,log:A,warn:A,info:A,error:A};function k(){return E({},I)}function _(e,t,n){return t[e]?t[e].bind(t):function(e,t){const n=self.console[e];return n?n.bind(self.console,`${t?"["+t+"] ":""}[${e}] >`):A}(e,n)}const R=k();const x=R;function C(e=!0){if("undefined"==typeof self)return;return(e||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function D(e,t){const n=Object.keys(e),r=Object.keys(t),i=n.length,a=r.length;return!i||!a||i===a&&!n.some(e=>-1===r.indexOf(e))}function L(e,t=!1){if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,a,s="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],s+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],a=e[o++],s+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return s}function M(e){let t="";for(let n=0;n<e.length;n++){let r=e[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}function N(e){return Uint8Array.from(e.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function P(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O,F={exports:{}};var U,z,B,j,q,G=O?F.exports:(O=1,U=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,z=/^(?=([^\/?#]*))\1([^]*)$/,B=/(?:\/|^)\.(?=\/)/g,j=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,F.exports=q={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=q.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=q.normalizePath(r.path),q.buildURLFromParts(r)}var i=q.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=q.normalizePath(i.path),q.buildURLFromParts(i)):t;var a=q.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=z.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(o.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var l=a.path,u=l.substring(0,l.lastIndexOf("/")+1)+i.path;o.path=q.normalizePath(u)}else o.path=a.path,i.params||(o.params=a.params,i.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?q.normalizePath(i.path):i.path),q.buildURLFromParts(o)},parseURL:function(e){var t=U.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(B,"");e.length!==(e=e.replace(j,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}});class H{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var V="audio",K="video",$="audiovideo";class Y{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,"string"==typeof e&&(e={url:e}),this.base=e,function(e,t){const n=J(e,t);n&&(n.enumerable=!0,Object.defineProperty(e,t,n))}(this,"stats")}setByteRange(e,t){const n=e.split("@",2);let r;r=1===n.length?(null==t?void 0:t.byteRangeEndOffset)||0:parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return null===this._byteRange?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return null===this._streams&&(this._streams={[V]:null,[K]:null,[$]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return null!==this._stats}get hasStreams(){return null!==this._streams}get stats(){return null===this._stats&&(this._stats=new H),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=G.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[V]=null,e[K]=null,e[$]=null}}function W(e){return"initSegment"!==e.sn}class X extends Y{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(n(e)&&n(t))return t-e}return null}get bitrate(){return this.byteLength?8*this.byteLength/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(null==(e=this._decryptdata)||!e.keyId){const e=Object.keys(t);if(1===e.length){const n=this._decryptdata=t[e[0]]||null;n&&(this._decryptdata=n.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime)return null;const e=n(this.duration)?this.duration:0;return this.programDateTime+1e3*e}get encrypted(){var e;if(null!=(e=this._decryptdata)&&e.encrypted)return!0;if(this.levelkeys){var t;const e=Object.keys(this.levelkeys),n=e.length;if(n>1||1===n&&null!=(t=this.levelkeys[e[0]])&&t.encrypted)return!0}return!1}get programDateTime(){return null===this._programDateTime&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){n(e)?this._programDateTime=e:this._programDateTime=this.rawProgramDateTime=null}get ref(){return W(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var n;const r=t[e];!r||null!=(n=this._decryptdata)&&n.keyId||(this._decryptdata=r.getDecryptData(this.sn,t))}}abortRequests(){var e,t;null==(e=this.loader)||e.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(e,t,n,r,i,a=!1){const{elementaryStreams:s}=this,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):s[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a}}}class Q extends Y{constructor(e,t,n,r,i){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function J(e,t){const n=Object.getPrototypeOf(e);if(n){const e=Object.getOwnPropertyDescriptor(n,t);return e||J(n,t)}}const Z=Math.pow(2,32)-1,ee=[].push,te={video:1,audio:2,id3:3,text:4};function ne(e){return String.fromCharCode.apply(null,e)}function re(e,t){const n=e[t]<<8|e[t+1];return n<0?65536+n:n}function ie(e,t){const n=se(e,t);return n<0?4294967296+n:n}function ae(e,t){let n=ie(e,t);return n*=Math.pow(2,32),n+=ie(e,t+4),n}function se(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function oe(e,t){const n=[];if(!t.length)return n;const r=e.byteLength;for(let i=0;i<r;){const a=ie(e,i),s=a>1?i+a:r;if(ne(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,s));else{const r=oe(e.subarray(i+8,s),t.slice(1));r.length&&ee.apply(n,r)}i=s}return n}function le(e){const t=[],n=e[0];let r=8;const i=ie(e,r);r+=4;let a=0,s=0;0===n?(a=ie(e,r),s=ie(e,r+4),r+=8):(a=ae(e,r),s=ae(e,r+8),r+=16),r+=2;let o=e.length+s;const l=re(e,r);r+=2;for(let u=0;u<l;u++){let n=r;const a=ie(e,n);n+=4;const s=2147483647&a;if(1===(2147483648&a)>>>31)return x.warn("SIDX has hierarchical references (not supported)"),null;const l=ie(e,n);n+=4,t.push({referenceSize:s,subsegmentDuration:l,info:{duration:l/i,start:o,end:o+s-1}}),o+=s,n+=4,r=n}return{earliestPresentationTime:a,timescale:i,version:n,referencesCount:l,references:t}}function ue(e){const t=[],n=oe(e,["moov","trak"]);for(let r=0;r<n.length;r++){const e=n[r],i=oe(e,["tkhd"])[0];if(i){let n=i[0];const r=ie(i,0===n?12:20),a=oe(e,["mdia","mdhd"])[0];if(a){n=a[0];const i=ie(a,0===n?12:20),s=oe(e,["mdia","hdlr"])[0];if(s){const n=ne(s.subarray(8,12)),a={soun:V,vide:K}[n],o=de(oe(e,["mdia","minf","stbl","stsd"])[0]);a?(t[r]={timescale:i,type:a,stsd:o},t[a]=S({timescale:i,id:r},o)):t[r]={timescale:i,type:n,stsd:o}}}}}return oe(e,["moov","mvex","trex"]).forEach(e=>{const n=ie(e,4),r=t[n];r&&(r.default={duration:ie(e,12),flags:ie(e,20)})}),t}function de(e){const t=e.subarray(8),n=t.subarray(86),r=ne(t.subarray(4,8));let i,a=r;const s="enca"===r||"encv"===r;if(s){const e=oe(t,[r])[0];oe(e.subarray("enca"===r?28:78),["sinf"]).forEach(e=>{const t=oe(e,["schm"])[0];if(t){const n=ne(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=oe(e,["frma"])[0];t&&(a=ne(t))}}})}const o=a;switch(a){case"avc1":case"avc2":case"avc3":case"avc4":{const e=oe(n,["avcC"])[0];e&&e.length>3&&(a+="."+fe(e[1])+fe(e[2])+fe(e[3]),i=ce("avc1"===o?"dva1":"dvav",n));break}case"mp4a":{const e=oe(t,[r])[0],n=oe(e.subarray(28),["esds"])[0];if(n&&n.length>7){let e=4;if(3!==n[e++])break;e=he(n,e),e+=2;const t=n[e++];if(128&t&&(e+=2),64&t&&(e+=n[e++]),4!==n[e++])break;e=he(n,e);const r=n[e++];if(64!==r)break;if(a+="."+fe(r),e+=12,5!==n[e++])break;e=he(n,e);const i=n[e++];let s=(248&i)>>3;31===s&&(s+=1+((7&i)<<3)+((224&n[e])>>5)),a+="."+s}break}case"hvc1":case"hev1":{const e=oe(n,["hvcC"])[0];if(e&&e.length>12){const t=e[1],n=["","A","B","C"][t>>6],r=31&t,i=ie(e,2),s=(32&t)>>5?"H":"L",o=e[12],l=e.subarray(6,12);a+="."+n+r,a+="."+function(e){let t=0;for(let n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(i).toString(16).toUpperCase(),a+="."+s+o;let u="";for(let e=l.length;e--;){const t=l[e];if(t||u){u="."+t.toString(16).toUpperCase()+u}}a+=u}i=ce("hev1"==o?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":a=ce(a,n)||a;break;case"vp09":{const e=oe(n,["vpcC"])[0];if(e&&e.length>6){const t=e[4],n=e[5],r=e[6]>>4&15;a+="."+ge(t)+"."+ge(n)+"."+ge(r)}break}case"av01":{const e=oe(n,["av1C"])[0];if(e&&e.length>2){const t=e[1]>>>5,r=31&e[1],s=e[2]>>>7?"H":"M",o=(64&e[2])>>6,l=(32&e[2])>>5,u=2===t&&o?l?12:10:o?10:8,d=(16&e[2])>>4,c=(8&e[2])>>3,h=(4&e[2])>>2,f=3&e[2],g=1,p=1,m=1,y=0;a+="."+t+"."+ge(r)+s+"."+ge(u)+"."+d+"."+c+h+f+"."+ge(g)+"."+ge(p)+"."+ge(m)+"."+y,i=ce("dav1",n)}break}}return{codec:a,encrypted:s,supplemental:i}}function ce(e,t){const n=oe(t,["dvvC"]),r=n.length?n[0]:oe(t,["dvcC"])[0];if(r){const t=r[2]>>1&127,n=r[2]<<5&32|r[3]>>3&31;return e+"."+ge(t)+"."+ge(n)}}function he(e,t){const n=t+5;for(;128&e[t++]&&t<n;);return t}function fe(e){return("0"+e.toString(16).toUpperCase()).slice(-2)}function ge(e){return(e<10?"0":"")+e}function pe(e,t){oe(e,["moov","trak"]).forEach(e=>{const n=oe(e,["mdia","minf","stbl","stsd"])[0];if(!n)return;const r=n.subarray(8);let i=oe(r,["enca"]);const a=i.length>0;a||(i=oe(r,["encv"])),i.forEach(e=>{oe(a?e.subarray(28):e.subarray(78),["sinf"]).forEach(e=>{const n=me(e);n&&t(n,a)})})})}function me(e){const t=oe(e,["schm"])[0];if(t){const n=ne(t.subarray(4,8));if("cbcs"===n||"cenc"===n){const t=oe(e,["schi","tenc"])[0];if(t)return t}}}function ye(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function ve(e,t){const n=[],r=t.samples,i=t.timescale,a=t.id;let s=!1;return oe(r,["moof"]).map(o=>{const l=o.byteOffset-8;oe(o,["traf"]).map(o=>{const u=oe(o,["tfdt"]).map(e=>{const t=e[0];let n=ie(e,4);return 1===t&&(n*=Math.pow(2,32),n+=ie(e,8)),n/i})[0];return void 0!==u&&(e=u),oe(o,["tfhd"]).map(u=>{const d=ie(u,4),c=16777215&ie(u,0);let h=0;const f=!!(16&c);let g=0;const p=!!(32&c);let m=8;d===a&&(!!(1&c)&&(m+=8),!!(2&c)&&(m+=4),!!(8&c)&&(h=ie(u,m),m+=4),f&&(g=ie(u,m),m+=4),p&&(m+=4),"video"===t.type&&(s=be(t.codec)),oe(o,["trun"]).map(a=>{const o=a[0],u=16777215&ie(a,0),d=!!(1&u);let c=0;const f=!!(4&u),p=!!(256&u);let m=0;const y=!!(512&u);let v=0;const b=!!(1024&u),E=!!(2048&u);let T=0;const S=ie(a,4);let w=8;d&&(c=ie(a,w),w+=4),f&&(w+=4);let A=c+l;for(let l=0;l<S;l++){if(p?(m=ie(a,w),w+=4):m=h,y?(v=ie(a,w),w+=4):v=g,b&&(w+=4),E&&(T=0===o?ie(a,w):se(a,w),w+=4),t.type===K){let t=0;for(;t<v;){const a=ie(r,A);if(A+=4,Ee(s,r[A])){Te(r.subarray(A,A+a),s?2:1,e+T/i,n)}A+=a,t+=a+4}}e+=m/i}}))})})}),n}function be(e){if(!e)return!1;const t=e.substring(0,4);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}function Ee(e,t){if(e){const e=t>>1&63;return 39===e||40===e}return 6===(31&t)}function Te(e,t,n,r){const i=Se(e);let a=0;a+=t;let s=0,o=0,l=0;for(;a<i.length;){s=0;do{if(a>=i.length)break;l=i[a++],s+=l}while(255===l);o=0;do{if(a>=i.length)break;l=i[a++],o+=l}while(255===l);const e=i.length-a;let t=a;if(o<e)a+=o;else if(o>e){x.error(`Malformed SEI payload. ${o} is too small, only ${e} bytes left to parse.`);break}if(4===s){if(181===i[t++]){const e=re(i,t);if(t+=2,49===e){const e=ie(i,t);if(t+=4,1195456820===e){const e=i[t++];if(3===e){const a=i[t++],o=64&a,l=o?2+3*(31&a):0,u=new Uint8Array(l);if(o){u[0]=a;for(let e=1;e<l;e++)u[e]=i[t++]}r.push({type:e,payloadType:s,pts:n,bytes:u})}}}}}else if(5===s&&o>16){const e=[];for(let n=0;n<16;n++){const r=i[t++].toString(16);e.push(1==r.length?"0"+r:r),3!==n&&5!==n&&7!==n&&9!==n||e.push("-")}const a=o-16,l=new Uint8Array(a);for(let n=0;n<a;n++)l[n]=i[t++];r.push({payloadType:s,pts:n,uuid:e.join(""),userData:L(l),userDataBytes:l})}}}function Se(e){const t=e.byteLength,n=[];let r=1;for(;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;const i=t-n.length,a=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=e[s];return a}function we(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");let r,i,a;r=0,i=new Uint8Array,a=new Uint8Array;const s=new Uint8Array(4);return n.byteLength>0&&new DataView(s.buffer).setUint32(0,n.byteLength,!1),function(e,...t){const n=t.length;let r=8,i=n;for(;i--;)r+=t[i].byteLength;const a=new Uint8Array(r);for(a[0]=r>>24&255,a[1]=r>>16&255,a[2]=r>>8&255,a[3]=255&r,a.set(e,4),i=0,r=8;i<n;i++)a.set(t[i],r),r+=t[i].byteLength;return a}([112,115,115,104],new Uint8Array([0,0,0,0]),e,a,i,s,n)}function Ae(e){const t=e.getUint32(0),n=e.byteOffset,r=e.byteLength;if(r<t)return{offset:n,size:r};if(1886614376!==e.getUint32(4))return{offset:n,size:t};const i=e.getUint32(8)>>>24;if(0!==i&&1!==i)return{offset:n,size:t};const a=e.buffer,s=M(new Uint8Array(a,n+12,16));let o=null,l=null,u=0;if(0===i)u=28;else{const i=e.getUint32(28);if(!i||r<32+16*i)return{offset:n,size:t};o=[];for(let e=0;e<i;e++)o.push(new Uint8Array(a,n+32+16*e,16));u=32+16*i}if(!u)return{offset:n,size:t};const d=e.getUint32(u);return t-32<d?{offset:n,size:t}:(l=new Uint8Array(a,n+u+4,d),{version:i,systemId:s,kids:o,data:l,offset:n,size:t})}const Ie=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),ke={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function _e(e,t){const n=ke[t];return!!n&&!!n[e.slice(0,4)]}function Re(e,t,n=!0){return!e.split(",").some(e=>!xe(e,t,n))}function xe(e,t,n=!0){var r;const i=C(n);return null!=(r=null==i?void 0:i.isTypeSupported(Ce(e,t)))&&r}function Ce(e,t){return`${t}/mp4;codecs=${e}`}function De(e){if(e){const t=e.substring(0,4);return ke.video[t]}return 2}function Le(e){const t=Ie();return e.split(",").reduce((e,n)=>{const r=t&&be(n)?9:ke.video[n];return r?(2*r+e)/(e?3:2):(ke.audio[n]+e)/(e?2:1)},0)}const Me={};const Ne=/flac|opus|mp4a\.40\.34/i;function Pe(e,t=!0){return e.replace(Ne,e=>function(e,t=!0){if(Me[e])return Me[e];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[e];for(let i=0;i<n.length;i++){var r;if(xe(n[i],"audio",t))return Me[e]=n[i],n[i];if("mp3"===n[i]&&null!=(r=C(t))&&r.isTypeSupported("audio/mpeg"))return""}return e}(e.toLowerCase(),t))}function Oe(e,t){if(e&&(e.length>4||-1!==["ac-3","ec-3","alac","fLaC","Opus"].indexOf(e))&&(Fe(e,"audio")||Fe(e,"video")))return e;if(t){const n=t.split(",");if(n.length>1){if(e)for(let t=n.length;t--;)if(n[t].substring(0,4)===e.substring(0,4))return n[t];return n[0]}}return t||e}function Fe(e,t){return _e(e,t)&&xe(e,t)}function Ue(e){if(e.startsWith("av01.")){const t=e.split("."),n=["0","111","01","01","01","0"];for(let e=t.length;e>4&&e<10;e++)t[e]=n[e-4];return t.join(".")}return e}function ze(e){const t=C(e)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Be(e){return e.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const je={supported:!1,smooth:!1,powerEfficient:!1},qe={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function Ge(e,t){return{supported:!1,configurations:t,decodingInfoResults:[je],error:e}}function He(e,t,r,i,a,s){const o=e.videoCodec,l=e.audioCodec?e.audioGroups:null,u=null==s?void 0:s.audioCodec,d=null==s?void 0:s.channels,c=d?parseInt(d):u?1/0:2;let h=null;if(null!=l&&l.length)try{h=1===l.length&&l[0]?t.groups[l[0]].channels:l.reduce((e,n)=>{if(n){const r=t.groups[n];if(!r)throw new Error(`Audio track group ${n} not found`);Object.keys(r.channels).forEach(t=>{e[t]=(e[t]||0)+r.channels[t]})}return e},{2:0})}catch(f){return!0}return void 0!==o&&(o.split(",").some(e=>be(e))||e.width>1920&&e.height>1088||e.height>1920&&e.width>1088||e.frameRate>Math.max(i,30)||"SDR"!==e.videoRange&&e.videoRange!==r||e.bitrate>Math.max(a,8e6))||!!h&&n(c)&&Object.keys(h).some(e=>parseInt(e)>c)}function Ve(e,t,n,r={}){const i=e.videoCodec;if(!i&&!e.audioCodec||!n)return Promise.resolve(qe);const a=[],s=function(e){var t;const n=null==(t=e.videoCodec)?void 0:t.split(","),r=$e(e),i=e.width||640,a=e.height||480,s=e.frameRate||30,o=e.videoRange.toLowerCase();return n?n.map(e=>{const t={contentType:Ce(Ue(e),"video"),width:i,height:a,bitrate:r,framerate:s};return"sdr"!==o&&(t.transferFunction=o),t}):[]}(e),o=s.length,l=function(e,t,n){var r;const i=null==(r=e.audioCodec)?void 0:r.split(","),a=$e(e);if(i&&e.audioGroups)return e.audioGroups.reduce((e,r)=>{var s;const o=r?null==(s=t.groups[r])?void 0:s.tracks:null;return o?o.reduce((e,t)=>{if(t.groupId===r){const r=parseFloat(t.channels||"");i.forEach(t=>{const i={contentType:Ce(t,"audio"),bitrate:n?Ke(t,a):a};r&&(i.channels=""+r),e.push(i)})}return e},e):e},[]);return[]}(e,t,o>0),u=l.length;for(let d=o||1*u||1;d--;){const e={type:"media-source"};if(o&&(e.video=s[d%o]),u){e.audio=l[d%u];const t=e.audio.bitrate;e.video&&t&&(e.video.bitrate-=t)}a.push(e)}if(i){const e=navigator.userAgent;if(i.split(",").some(e=>be(e))&&Ie())return Promise.resolve(Ge(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${e})`),a))}return Promise.all(a.map(e=>{const t=function(e){let t="";const{audio:n,video:r}=e;if(r){t+=`${Be(r.contentType)}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(n){t+=`${r?"_":""}${Be(n.contentType)}_c${n.channels}`}return t}(e);return r[t]||(r[t]=n.decodingInfo(e))})).then(e=>({supported:!e.some(e=>!e.supported),configurations:a,decodingInfoResults:e})).catch(e=>({supported:!1,configurations:a,decodingInfoResults:[],error:e}))}function Ke(e,t){if(t<=1)return 1;let n=128e3;return"ec-3"===e?n=768e3:"ac-3"===e&&(n=64e4),Math.min(t/2,n)}function $e(e){return 1e3*Math.ceil(Math.max(.9*e.bitrate,e.averageBitrate)/1e3)||1}const Ye=["NONE","TYPE-0","TYPE-1",null];const We=["SDR","PQ","HLG"];var Xe="",Qe="YES",Je="v2";function Ze(e){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=e;return t&&r<t/2?n?Je:Qe:Xe}class et{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class tt{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(e=>!!e).map(e=>e.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const n=null==(t=e.supplemental)?void 0:t.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return nt(this._audioGroups,e)}hasSubtitleGroup(e){return nt(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t)if("audio"===e){let e=this._audioGroups;e||(e=this._audioGroups=[]),-1===e.indexOf(t)&&e.push(t)}else if("text"===e){let e=this._subtitleGroups;e||(e=this._subtitleGroups=[]),-1===e.indexOf(t)&&e.push(t)}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return null==(e=this.audioGroups)?void 0:e[0]}get textGroupId(){var e;return null==(e=this.subtitleGroups)?void 0:e[0]}addFallback(){}}function nt(e,t){return!(!t||!e)&&-1!==e.indexOf(t)}function rt(e,t){let n=!1,r=[];if(e&&(n="SDR"!==e,r=[e]),t){r=t.allowedVideoRanges||We.slice(0);const e="SDR"!==r.join("")&&!t.videoCodec;n=void 0!==t.preferHDR?t.preferHDR:e&&function(){if("function"==typeof matchMedia){const e=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(e.media!==t.media)return!0===e.matches}return!1}(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const it=(e,t)=>JSON.stringify(e,(e=>{const t=new WeakSet;return(n,r)=>{if(e&&(r=e(n,r)),"object"==typeof r&&null!==r){if(t.has(r))return;t.add(r)}return r}})(t));function at(e,t){x.log(`[abr] start candidates with "${e}" ignored because ${t}`)}function st(e){return e.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const r=t.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function ot(e){if(!e)return e;const{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:a}=e;return{lang:t,assocLang:n,characteristics:r,channels:i,audioCodec:a}}function lt(e,t,n){if("attrs"in e){const n=t.indexOf(e);if(-1!==n)return n}for(let r=0;r<t.length;r++){if(ut(e,t[r],n))return r}return-1}function ut(e,t,n){const{groupId:r,name:i,lang:a,assocLang:s,default:o}=e,l=e.forced;return(void 0===r||t.groupId===r)&&(void 0===i||t.name===i)&&(void 0===a||function(e,t="--"){if(e.length===t.length)return e===t;return e.startsWith(t)||t.startsWith(e)}(a,t.lang))&&(void 0===a||t.assocLang===s)&&(void 0===o||t.default===o)&&(void 0===l||t.forced===l)&&(!("characteristics"in e)||function(e,t=""){const n=e.split(","),r=t.split(",");return n.length===r.length&&!n.some(e=>-1===r.indexOf(e))}(e.characteristics||"",t.characteristics))&&(void 0===n||n(e,t))}function dt(e,t){const{audioCodec:n,channels:r}=e;return!(void 0!==n&&(t.audioCodec||"").substring(0,4)!==n.substring(0,4)||void 0!==r&&r!==(t.channels||"2"))}function ct(e,t,n){for(let r=t;r>-1;r--)if(n(e[r]))return r;for(let r=t+1;r<e.length;r++)if(n(e[r]))return r;return-1}function ht(e,t){var n;return!!e&&e!==(null==(n=t.loadLevelObj)?void 0:n.uri)}const ft=function(e,t){let n=0,r=e.length-1,i=null,a=null;for(;n<=r;){i=(n+r)/2|0,a=e[i];const s=t(a);if(s>0)n=i+1;else{if(!(s<0))return a;r=i-1}}return null};function gt(e,t,n=0,r=0,i=.005){let a=null;if(e){a=t[1+e.sn-t[0].sn]||null;const r=e.endDTS-n;r>0&&r<15e-7&&(n+=15e-7),a&&e.level!==a.level&&a.end<=e.end&&(a=t[2+e.sn-t[0].sn]||null)}else 0===n&&0===t[0].start&&(a=t[0]);if(a&&((!e||e.level===a.level)&&0===pt(n,r,a)||function(e,t,n){if(t&&0===t.start&&t.level<e.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((e,t)=>("INF"===t[0]&&(e+=parseFloat(t[1])),e),n);return e.start<=r}return!1}(a,e,Math.min(i,r))))return a;const s=ft(t,pt.bind(null,n,r));return!s||s===e&&a?a:s}function pt(e=0,t=0,n){if(n.start<=e&&n.start+n.duration>e)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function mt(e,t,n){const r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function yt(e,t,n){if(e&&e.startCC<=t&&e.endCC>=t){let r=e.fragments;const{fragmentHint:i}=e;let a;return i&&(r=r.concat(i)),ft(r,e=>e.cc<t?1:e.cc>t?-1:(a=e,e.end<=n?1:e.start>n?-1:0)),a||null}return null}function vt(e){switch(e.details){case l.FRAG_LOAD_TIMEOUT:case l.KEY_LOAD_TIMEOUT:case l.LEVEL_LOAD_TIMEOUT:case l.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function bt(e){return e.details.startsWith("key")}function Et(e){return bt(e)&&!!e.frag&&!e.frag.decryptdata}function Tt(e,t){const n=vt(t);return e.default[(n?"timeout":"error")+"Retry"]}function St(e,t){const n="linear"===e.backoff?1:Math.pow(2,t);return Math.min(n*e.retryDelayMs,e.maxRetryDelayMs)}function wt(e){return S(S({},e),{errorRetry:null,timeoutRetry:null})}function At(e,t,n,r){if(!e)return!1;const i=null==r?void 0:r.code,a=t<e.maxNumRetry&&(function(e){return It(e)||!!e&&(e<400||e>499)}(i)||!!n);return e.shouldRetry?e.shouldRetry(e,t,n,r,a):a}function It(e){return 0===e&&!1===navigator.onLine}var kt=0,_t=2,Rt=3,xt=5,Ct=0,Dt=1,Lt=2,Mt=4;function Nt(e){const t={action:kt,flags:Ct};return e&&(t.resolved=!0),t}var Pt="NOT_LOADED",Ot="APPENDING",Ft="PARTIAL",Ut="OK";class zt{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.BUFFER_APPENDED,this.onBufferAppended,this),e.on(u.FRAG_BUFFERED,this.onFragBuffered,this),e.on(u.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.BUFFER_APPENDED,this.onBufferAppended,this),e.off(u.FRAG_BUFFERED,this.onFragBuffered,this),e.off(u.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let r=n.length;r--;){const t=n[r];if(!t)break;if(t.start<=e&&e<=t.end&&t.loaded)return t}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,n){const{fragments:r}=this,i=Object.keys(r);for(let a=i.length;a--;){const s=r[i[a]];if((null==s?void 0:s.body.type)===t&&(!n||s.buffered)){const t=s.body;if(t.start<=e&&e<=t.end)return t}}return null}detectEvictedFragments(e,t,n,r,i){this.timeRanges&&(this.timeRanges[e]=t);const a=(null==r?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(r=>{const s=this.fragments[r];if(!s)return;if(a>=s.body.sn)return;if(!s.buffered&&(!s.loaded||i))return void(s.body.type===n&&this.removeFragment(s.body));const o=s.range[e];o&&(0!==o.time.length?o.time.some(e=>{const n=!this.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&this.removeFragment(s.body),n}):this.removeFragment(s.body))})}detectPartialFragments(e){const t=this.timeRanges;if(!t||"initSegment"===e.frag.sn)return;const n=e.frag,r=jt(n),i=this.fragments[r];if(!i||i.buffered&&n.gap)return;const a=!n.relurl;if(Object.keys(t).forEach(r=>{const s=n.elementaryStreams[r];if(!s)return;const o=t[r],l=a||!0===s.partial;i.range[r]=this.getBufferedTimes(n,e.part,l,o)}),i.loaded=null,Object.keys(i.range).length){i.buffered=!0;(i.body.endList=n.endList||i.body.endList)&&(this.endListFragments[i.body.type]=i),Bt(i)||this.removeParts(n.sn-1,n.type)}else this.removeFragment(i.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=qt(n,t=>t.fragment.sn>=e))}fragBuffered(e,t){const n=jt(e);let r=this.fragments[n];!r&&t&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,r.buffered=!0)}getBufferedTimes(e,t,n,r){const i={time:[],partial:n},a=e.start,s=e.end,o=e.minEndPTS||s,l=e.maxStartPTS||a;for(let u=0;u<r.length;u++){const e=r.start(u)-this.bufferPadding,t=r.end(u)+this.bufferPadding;if(l>=e&&o<=t){i.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(s,r.end(u))});break}if(a<t&&s>e){const e=Math.max(a,r.start(u)),t=Math.min(s,r.end(u));t>e&&(i.partial=!0,i.time.push({startPTS:e,endPTS:t}))}else if(s<=e)break}return i}getPartialFragment(e){let t,n,r,i=null,a=0;const{bufferPadding:s,fragments:o}=this;return Object.keys(o).forEach(l=>{const u=o[l];u&&Bt(u)&&(n=u.body.start-s,r=u.body.end+s,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(i=u.body,a=t)))}),i}isEndListAppended(e){const t=this.endListFragments[e];return void 0!==t&&(t.buffered||Bt(t))}getState(e){const t=jt(e),n=this.fragments[t];return n?n.buffered?Bt(n)?Ft:Ut:Ot:Pt}isTimeBuffered(e,t,n){let r,i;for(let a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if("initSegment"===t.frag.sn||t.frag.bitrateTest)return;const n=t.frag,r=t.part?null:t,i=jt(n);this.fragments[i]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:r,timeRanges:i,type:a}=t;if("initSegment"===n.sn)return;const s=n.type;if(r){let e=this.activePartLists[s];e||(this.activePartLists[s]=e=[]),e.push(r)}this.timeRanges=i;const o=i[a];this.detectEvictedFragments(a,o,s,r)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=jt(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,n=Object.keys(t);if(!e)return n.length>0;for(let r=n.length;r--;){const i=t[n[r]];if((null==i?void 0:i.body.type)===e)return!0}return!1}hasParts(e){var t;return!(null==(t=this.activePartLists[e])||!t.length)}removeFragmentsInRange(e,t,n,r,i){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const s=this.fragments[a];if(!s)return;const o=s.body;o.type!==n||r&&!o.gap||o.start<t&&o.end>e&&(s.buffered||i)&&this.removeFragment(o)})}removeFragment(e){const t=jt(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const t=e.sn;this.activePartLists[e.type]=qt(n,e=>e.fragment.sn!==t)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=null==(e=this.hls)||null==(e=e.latestLevelDetails)?void 0:e.partList;t&&t.forEach(e=>e.clearElementaryStreamInfo())}}function Bt(e){var t,n,r;return e.buffered&&!!(e.body.gap||null!=(t=e.range.video)&&t.partial||null!=(n=e.range.audio)&&n.partial||null!=(r=e.range.audiovideo)&&r.partial)}function jt(e){return`${e.type}_${e.level}_${e.sn}`}function qt(e,t){return e.filter(e=>{const n=t(e);return n||e.clearElementaryStreamInfo(),n})}var Gt=0,Ht=1;class Vt{constructor(e,t,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=n}decrypt(e,t){switch(this.aesMode){case Gt:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Ht:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}class Kt{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=t.getUint32(4*r);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],s=n[3],o=this.invSubMix,l=o[0],u=o[1],d=o[2],c=o[3],h=new Uint32Array(256);let f=0,g=0,p=0;for(p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;for(p=0;p<256;p++){let n=g^g<<1^g<<2^g<<3^g<<4;n=n>>>8^255&n^99,e[f]=n,t[n]=f;const o=h[f],p=h[o],m=h[p];let y=257*h[n]^16843008*n;r[f]=y<<24|y>>>8,i[f]=y<<16|y>>>16,a[f]=y<<8|y>>>24,s[f]=y,y=16843009*m^65537*p^257*o^16843008*f,l[n]=y<<24|y>>>8,u[n]=y<<16|y>>>16,d[n]=y<<8|y>>>24,c[n]=y,f?(f=o^h[h[h[m^o]]],g^=h[h[g]]):f=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<t.length&&n;)n=t[r]===this.key[r],r++;if(n)return;this.key=t;const i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);const a=this.ksRows=4*(i+6+1);let s,o;const l=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,c=this.rcon,h=this.invSubMix,f=h[0],g=h[1],p=h[2],m=h[3];let y,v;for(s=0;s<a;s++)s<i?y=l[s]=t[s]:(v=y,s%i===0?(v=v<<8|v>>>24,v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v],v^=c[s/i|0]<<24):i>6&&s%i===4&&(v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v]),l[s]=y=(l[s-i]^v)>>>0);for(o=0;o<a;o++)s=a-o,v=3&o?l[s]:l[s-4],u[o]=o<4||s<=4?v:f[d[v>>>24]]^g[d[v>>>16&255]]^p[d[v>>>8&255]]^m[d[255&v]],u[o]=u[o]>>>0}networkToHostOrderSwap(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}decrypt(e,t,n){const r=this.keySize+6,i=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,o=s[0],l=s[1],u=s[2],d=s[3],c=this.uint8ArrayToUint32Array_(n);let h=c[0],f=c[1],g=c[2],p=c[3];const m=new Int32Array(e),y=new Int32Array(m.length);let v,b,E,T,S,w,A,I,k,_,R,x,C,D;const L=this.networkToHostOrderSwap;for(;t<m.length;){for(k=L(m[t]),_=L(m[t+1]),R=L(m[t+2]),x=L(m[t+3]),S=k^i[0],w=x^i[1],A=R^i[2],I=_^i[3],C=4,D=1;D<r;D++)v=o[S>>>24]^l[w>>16&255]^u[A>>8&255]^d[255&I]^i[C],b=o[w>>>24]^l[A>>16&255]^u[I>>8&255]^d[255&S]^i[C+1],E=o[A>>>24]^l[I>>16&255]^u[S>>8&255]^d[255&w]^i[C+2],T=o[I>>>24]^l[S>>16&255]^u[w>>8&255]^d[255&A]^i[C+3],S=v,w=b,A=E,I=T,C+=4;v=a[S>>>24]<<24^a[w>>16&255]<<16^a[A>>8&255]<<8^a[255&I]^i[C],b=a[w>>>24]<<24^a[A>>16&255]<<16^a[I>>8&255]<<8^a[255&S]^i[C+1],E=a[A>>>24]<<24^a[I>>16&255]<<16^a[S>>8&255]<<8^a[255&w]^i[C+2],T=a[I>>>24]<<24^a[S>>16&255]<<16^a[w>>8&255]<<8^a[255&A]^i[C+3],y[t]=L(v^h),y[t+1]=L(T^f),y[t+2]=L(E^g),y[t+3]=L(b^p),h=k,f=_,g=R,p=x,t+=4}return y.buffer}}class $t{constructor(e,t,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=n}expandKey(){const e=function(e){switch(e){case Gt:return"AES-CBC";case Ht:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${e}`)}}(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}class Yt{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const e=self.crypto;e&&(this.subtle=e.subtle||e.webkitSubtle)}catch(n){}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?function(e){const t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?e.slice(0,t-n):e}(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n,r){return this.useSoftware?new Promise((i,a)=>{const s=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(s,t,n,r);const o=this.flush();o?i(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n,r)}softwareDecrypt(e,t,n,r){const{currentIV:i,currentResult:a,remainderData:s}=this;if(r!==Gt||16!==t.byteLength)return x.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),s&&(e=ye(s,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new Kt),l.expandKey(t);const u=a;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=o.slice(-16).buffer,u||null}webCryptoDecrypt(e,t,n,r){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n,r));this.key=t,this.fastAesKey=new $t(this.subtle,t,r)}return this.fastAesKey.expandKey().then(t=>{if(!this.subtle)return Promise.reject(new Error("web crypto not initialized"));this.logOnce("WebCrypto AES decrypt");return new Vt(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,t)}).catch(i=>(x.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n,r)))}onWebCryptoError(e,t,n,r){const i=this.enableSoftwareAES;if(i){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n,r);const i=this.flush();if(i)return i.buffer}throw new Error("WebCrypto"+(i?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%16;return n!==e.length&&(t=e.slice(0,n),this.remainderData=e.slice(n)),t}logOnce(e){this.logEnabled&&(x.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Wt=Math.pow(2,17);class Xt{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new Zt({type:o.NETWORK_ERROR,details:l.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise((s,u)=>{if(this.loader&&this.loader.destroy(),e.gap){if(e.tagList.some(e=>"GAP"===e[0]))return void u(Jt(e));e.gap=!1}const d=this.loader=i?new i(r):new a(r),c=Qt(e);e.loader=d;const h=wt(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===e.sn?1/0:Wt};e.stats=d.stats;const g={onSuccess:(t,n,r,i)=>{this.resetLoader(e,d);let a=t.data;r.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(a.slice(0,16)),a=a.slice(16)),s({frag:e,part:null,payload:a,networkDetails:i})},onError:(t,r,i,a)=>{this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:S({url:n,data:void 0},t),error:new Error(`HTTP Error ${t.code} ${t.text}`),networkDetails:i,stats:a}))},onAbort:(t,n,r)=>{this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:r,stats:t}))},onTimeout:(t,n,r)=>{this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:r,stats:t}))}};t&&(g.onProgress=(n,r,i,a)=>t({frag:e,part:null,payload:i,networkDetails:a})),d.load(c,f,g)})}loadPart(e,t,n){this.abort();const r=this.config,i=r.fLoader,a=r.loader;return new Promise((s,u)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap)return void u(Jt(e,t));const d=this.loader=i?new i(r):new a(r),c=Qt(e,t);e.loader=d;const h=wt(r.fragLoadPolicy.default),f={loadPolicy:h,timeout:h.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Wt};t.stats=d.stats,d.load(c,f,{onSuccess:(r,i,a,o)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const l={frag:e,part:t,payload:r.data,networkDetails:o};n(l),s(l)},onError:(n,r,i,a)=>{this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:S({url:c.url,data:void 0},n),error:new Error(`HTTP Error ${n.code} ${n.text}`),networkDetails:i,stats:a}))},onAbort:(n,r,i)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:i,stats:n}))},onTimeout:(n,r,i)=>{this.resetLoader(e,d),u(new Zt({type:o.NETWORK_ERROR,details:l.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:i,stats:n}))}})})}updateStatsFromPart(e,t){const n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){const r=Math.round(e.duration/t.duration),a=Math.min(Math.round(n.loaded/i),r),s=(r-a)*Math.round(n.loaded/a);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);const a=n.loading,s=r.loading;a.start?a.first+=s.first-s.start:(a.start=s.start,a.first=s.first),a.end=s.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Qt(e,t=null){const r=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},a=r.byteRangeStartOffset,s=r.byteRangeEndOffset;if(n(a)&&n(s)){var o;let t=a,n=s;if("initSegment"===e.sn&&("AES-128"===(l=null==(o=e.decryptdata)?void 0:o.method)||"AES-256"===l)){const e=s-a;e%16&&(n=s+(16-e%16)),0!==a&&(i.resetIV=!0,t=a-16)}i.rangeStart=t,i.rangeEnd=n}var l;return i}function Jt(e,t){const n=new Error(`GAP ${e.gap?"tag":"attribute"} found`),r={type:o.MEDIA_ERROR,details:l.FRAG_GAP,fatal:!1,frag:e,error:n,networkDetails:null};return t&&(r.part=t),(t||e).stats.aborted=!0,new Zt(r)}class Zt extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class en extends w{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class tn{constructor(e,t,n,r=0,i=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=a}}const nn={length:0,start:()=>0,end:()=>0};class rn{static isBuffered(e,t){if(e){const n=rn.getBuffered(e);for(let e=n.length;e--;)if(t>=n.start(e)&&t<=n.end(e))return!0}return!1}static bufferedRanges(e){if(e){const t=rn.getBuffered(e);return rn.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}static bufferInfo(e,t,n){if(e){const r=rn.bufferedRanges(e);if(r.length)return rn.bufferedInfo(r,t,n)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.length>1&&e.sort((e,t)=>e.start-t.start||t.end-e.end);let r=-1,i=[];if(n)for(let u=0;u<e.length;u++){t>=e[u].start&&t<=e[u].end&&(r=u);const a=i.length;if(a){const t=i[a-1].end;e[u].start-t<n?e[u].end>t&&(i[a-1].end=e[u].end):i.push(e[u])}else i.push(e[u])}else i=e;let a,s=0,o=t,l=t;for(let u=0;u<i.length;u++){const e=i[u].start,d=i[u].end;if(-1===r&&t>=e&&t<=d&&(r=u),t+n>=e&&t<d)o=e,l=d,s=l-t;else if(t+n<e){a=e;break}}return{len:s,start:o||0,end:l||0,nextStart:a,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||nn}catch(t){return x.log("failed to get media.buffered",t),nn}}}const an=/\{\$([a-zA-Z0-9-_]+)\}/g;function sn(e){return an.test(e)}function on(e,t){if(null!==e.variableList||e.hasVariableRefs){const n=e.variableList;return t.replace(an,t=>{const r=t.substring(2,t.length-1),i=null==n?void 0:n[r];return void 0===i?(e.playlistParsingError||(e.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),t):i})}return t}function ln(e,t,n){let r,i,a=e.variableList;if(a||(e.variableList=a={}),"QUERYPARAM"in t){r=t.QUERYPARAM;try{const e=new self.URL(n).searchParams;if(!e.has(r))throw new Error(`"${r}" does not match any query parameter in URI: "${n}"`);i=e.get(r)}catch(s){e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else r=t.NAME,i=t.VALUE;r in a?e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):a[r]=i||""}function un(e,t,n){const r=t.IMPORT;if(n&&r in n){let t=e.variableList;t||(e.variableList=t={}),t[r]=n[r]}else e.playlistParsingError||(e.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const dn=/^(\d+)x(\d+)$/,cn=/(.+?)=(".*?"|.*?)(?:,|$)/g;class hn{constructor(e,t){"string"==typeof e&&(e=hn.parseAttrList(e,t)),E(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>"X-"===e.substring(0,2))}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;const n=new Uint8Array(t.length/2);for(let e=0;e<t.length/2;e++)n[e]=parseInt(t.slice(2*e,2*e+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((e,t)=>(e[t.toLowerCase()]=!0,e),t)}bool(e){return"YES"===this[e]}decimalResolution(e){const t=dn.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let n;const r={};for(cn.lastIndex=0;null!==(n=cn.exec(e));){const i=n[1].trim();let a=n[2];const s=0===a.indexOf('"')&&a.lastIndexOf('"')===a.length-1;let o=!1;if(s)a=a.slice(1,-1);else switch(i){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":o=!0}if(t&&(s||o))a=on(t,a);else if(!o&&!s)switch(i){case"CLOSED-CAPTIONS":if("NONE"===a)break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":x.warn(`${e}: attribute ${i} is missing quotes`)}r[i]=a}return r}}function fn(e){return"ID"!==e&&"CLASS"!==e&&"CUE"!==e&&"START-DATE"!==e&&"DURATION"!==e&&"END-DATE"!==e&&"END-ON-NEXT"!==e}function gn(e){return"SCTE35-OUT"===e||"SCTE35-IN"===e||"SCTE35-CMD"===e}class pn{constructor(e,t,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(null==t?void 0:t.tagAnchor)||null,this.tagOrder=null!=(i=null==t?void 0:t.tagOrder)?i:r,t){const n=t.attr;for(const t in n)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==n[t]){x.warn(`DATERANGE tag attribute: "${t}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=t;break}e=E(new hn({}),n,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const e=(null==t?void 0:t.endDate)||new Date(this.attr["END-DATE"]);n(e.getTime())&&(this._endDate=e)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return void 0===e?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return null===e||null===e.programDateTime?(x.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return null!==t?this._dateAtEnd=new Date(this._startDate.getTime()+1e3*t):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(n(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return"com.apple.hls.interstitial"===this.class}get isValid(){return!!this.id&&!this._badValueForSameId&&n(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}class mn{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let n=t.decryptdata;return n||(t.setKeyFormat(e.keyFormat),n=t.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return!!this.fragments.length&&n(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const e=this.driftEndTime-this.driftStartTime;if(e>0){return 1e3*(this.driftEnd-this.driftStart)/e}return 1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(-1!==t){for(let n=e.length;n--;)if(e[n].index>t)return e[n].index;return t}}return 0}get lastPartSn(){var e;return null!=(e=this.partList)&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function yn(e,t){return e.length===t.length&&!e.some((e,n)=>e!==t[n])}function vn(e,t){return!e&&!t||!(!e||!t)&&yn(e,t)}function bn(e){return"AES-128"===e||"AES-256"===e||"AES-256-CTR"===e}function En(e){switch(e){case"AES-128":case"AES-256":return Gt;case"AES-256-CTR":return Ht;default:throw new Error(`invalid full segment method ${e}`)}}function Tn(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}function Sn(e){return Uint8Array.from(unescape(encodeURIComponent(e)),e=>e.charCodeAt(0))}function wn(e){const t=function(e,t,n){const r=e[t];e[t]=e[n],e[n]=r};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function An(e){const t=e.split(":");let n=null;if("data"===t[0]&&2===t.length){const e=t[1].split(";"),r=e[e.length-1].split(",");if(2===r.length){const t="base64"===r[0],i=r[1];t?(e.splice(-1,1),n=Tn(i)):n=function(e){const t=Sn(e).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}(i)}}return n}const In="undefined"!=typeof self?self:void 0;var kn={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},_n="org.w3.clearkey",Rn="com.apple.streamingkeydelivery",xn="com.microsoft.playready",Cn="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function Dn(e){switch(e){case Rn:return kn.FAIRPLAY;case xn:return kn.PLAYREADY;case Cn:return kn.WIDEVINE;case _n:return kn.CLEARKEY}}function Ln(e){switch(e){case kn.FAIRPLAY:return Rn;case kn.PLAYREADY:return xn;case kn.WIDEVINE:return Cn;case kn.CLEARKEY:return _n}}function Mn(e){const{drmSystems:t,widevineLicenseUrl:n}=e,r=t?[kn.FAIRPLAY,kn.WIDEVINE,kn.PLAYREADY,kn.CLEARKEY].filter(e=>!!t[e]):[];return!r[kn.WIDEVINE]&&n&&r.push(kn.WIDEVINE),r}const Nn=null!=In&&null!=(Pn=In.navigator)&&Pn.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;var Pn;function On(e){const t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),i=(new DOMParser).parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(i){const e=i.childNodes[0]?i.childNodes[0].nodeValue:i.getAttribute("VALUE");if(e){const t=Tn(e).subarray(0,16);return wn(t),t}}return null}let Fn={};class Un{static clearKeyUriToKeyIdMap(){Fn={}}static setKeyIdForUri(e,t){Fn[e]=t}constructor(e,t,n,r=[1],i=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=r,this.iv=i,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&!bn(e),null!=a&&a.startsWith("0x")&&(this.keyId=new Uint8Array(N(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&yn(e.keyFormatVersions,this.keyFormatVersions)&&vn(e.iv,this.iv)&&vn(e.keyId,this.keyId)}isSupported(){if(this.method){if(bn(this.method)||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case Rn:case Cn:case xn:case _n:return-1!==["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(bn(this.method)){let t=this.iv;t||("number"!=typeof e&&(x.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),t=function(e){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(e));return new Un(this.method,this.uri,"identity",this.keyFormatVersions,t)}if(this.keyId){const e=Fn[this.uri];if(e&&!yn(this.keyId,e)&&Un.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=An(this.uri);if(n)switch(this.keyFormat){case Cn:if(this.pssh=n,!this.keyId){const e=function(e){const t=[];if(e instanceof ArrayBuffer){const n=e.byteLength;let r=0;for(;r+32<n;){const n=Ae(new DataView(e,r));t.push(n),r+=n.size}}return t}(n.buffer);if(e.length){var r;const t=e[0];this.keyId=null!=(r=t.kids)&&r.length?t.kids[0]:null}}this.keyId||(this.keyId=zn(t));break;case xn:{const e=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=we(e,0,n),this.keyId=On(n);break}default:{let e=n.subarray(0,16);if(16!==e.length){const t=new Uint8Array(16);t.set(e,16-e.length),e=t}this.keyId=e;break}}if(!this.keyId||16!==this.keyId.byteLength){let e;e=function(e){const t=null==e?void 0:e[Cn];if(t)return t.keyId;return null}(t),e||(e=zn(t),e||(e=Fn[this.uri])),e&&(this.keyId=e,Un.setKeyIdForUri(this.uri,e))}return this}}function zn(e){const t=null==e?void 0:e[xn];if(t){const e=An(t.uri);if(e)return On(e)}return null}const Bn=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,jn=/#EXT-X-MEDIA:(.*)/g,qn=/^#EXT(?:INF|-X-TARGETDURATION):/m,Gn=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),Hn=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Vn{static findGroup(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===t)return r}}static resolve(e,t){return G.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return qn.test(e)}static parseMasterPlaylist(e,t){const n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:sn(e)},r=[];if(Bn.lastIndex=0,!e.startsWith("#EXTM3U"))return n.playlistParsingError=new Error("no EXTM3U delimiter"),n;let i;for(;null!=(i=Bn.exec(e));)if(i[1]){var a;const e=new hn(i[1],n),s=on(n,i[2]),o={attrs:e,bitrate:e.decimalInteger("BANDWIDTH")||e.decimalInteger("AVERAGE-BANDWIDTH"),name:e.NAME,url:Vn.resolve(s,t)},l=e.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),Xn(e.CODECS,o);const u=e["SUPPLEMENTAL-CODECS"];u&&(o.supplemental={},Xn(u,o.supplemental)),null!=(a=o.unknownCodecs)&&a.length||r.push(o),n.levels.push(o)}else if(i[3]){const e=i[3],r=i[4];switch(e){case"SESSION-DATA":{const e=new hn(r,n),t=e["DATA-ID"];t&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[t]=e);break}case"SESSION-KEY":{const e=Yn(r,t,n);e.encrypted&&e.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(e)):x.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${r}"`);break}case"DEFINE":ln(n,new hn(r,n),t);break;case"CONTENT-STEERING":{const e=new hn(r,n);n.contentSteering={uri:Vn.resolve(e["SERVER-URI"],t),pathwayId:e["PATHWAY-ID"]||"."};break}case"START":n.startTimeOffset=Wn(r)}}const s=r.length>0&&r.length<n.levels.length;return n.levels=s?r:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n}static parseMasterPlaylistMedia(e,t,n){let r;const i={},a=n.levels,s={AUDIO:a.map(e=>({id:e.attrs.AUDIO,audioCodec:e.audioCodec})),SUBTITLES:a.map(e=>({id:e.attrs.SUBTITLES,textCodec:e.textCodec})),"CLOSED-CAPTIONS":[]};let o=0;for(jn.lastIndex=0;null!==(r=jn.exec(e));){const e=new hn(r[1],n),a=e.TYPE;if(a){const n=s[a],r=i[a]||[];i[a]=r;const l=e.LANGUAGE,u=e["ASSOC-LANGUAGE"],d=e.CHANNELS,c=e.CHARACTERISTICS,h=e["INSTREAM-ID"],f={attrs:e,bitrate:0,id:o++,groupId:e["GROUP-ID"]||"",name:e.NAME||l||"",type:a,default:e.bool("DEFAULT"),autoselect:e.bool("AUTOSELECT"),forced:e.bool("FORCED"),lang:l,url:e.URI?Vn.resolve(e.URI,t):""};if(u&&(f.assocLang=u),d&&(f.channels=d),c&&(f.characteristics=c),h&&(f.instreamId=h),null!=n&&n.length){const e=Vn.findGroup(n,f.groupId)||n[0];Qn(f,e,"audioCodec"),Qn(f,e,"textCodec")}r.push(f)}}return i}static parseLevelPlaylist(e,t,r,i,a,s){var o;const l={url:t},u=new mn(t),d=u.fragments,c=[];let h,f,g,p,m=null,y=0,v=0,b=0,T=0,S=0,w=null,A=new X(i,l),I=-1,k=!1,_=null;if(Gn.lastIndex=0,u.m3u8=e,u.hasVariableRefs=sn(e),"#EXTM3U"!==(null==(o=Gn.exec(e))?void 0:o[0]))return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;null!==(h=Gn.exec(e));){k&&(k=!1,A=new X(i,l),A.playlistOffset=b,A.setStart(b),A.sn=y,A.cc=T,S&&(A.bitrate=S),A.level=r,m&&(A.initSegment=m,m.rawProgramDateTime&&(A.rawProgramDateTime=m.rawProgramDateTime,m.rawProgramDateTime=null),_&&(A.setByteRange(_),_=null)));const e=h[1];if(e){A.duration=parseFloat(e);const t=(" "+h[2]).slice(1);A.title=t||null,A.tagList.push(t?["INF",e,t]:["INF",e])}else if(h[3]){if(n(A.duration)){A.playlistOffset=b,A.setStart(b),g&&er(A,g,u),A.sn=y,A.level=r,A.cc=T,d.push(A);const e=(" "+h[3]).slice(1);A.relurl=on(u,e),Jn(A,w,c),w=A,b+=A.duration,y++,v=0,k=!0}}else{if(h=h[0].match(Hn),!h){x.warn("No matches on slow regex match for level playlist!");continue}for(f=1;f<h.length&&void 0===h[f];f++);const e=(" "+h[f]).slice(1),a=(" "+h[f+1]).slice(1),o=h[f+2]?(" "+h[f+2]).slice(1):null;switch(e){case"BYTERANGE":w?A.setByteRange(a,w):A.setByteRange(a);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=a,A.tagList.push(["PROGRAM-DATE-TIME",a]),-1===I&&(I=d.length);break;case"PLAYLIST-TYPE":u.type&&tr(u,e,h),u.type=a.toUpperCase();break;case"MEDIA-SEQUENCE":0!==u.startSN?tr(u,e,h):d.length>0&&nr(u,e,h),y=u.startSN=parseInt(a);break;case"SKIP":{u.skippedSegments&&tr(u,e,h);const t=new hn(a,u),r=t.decimalInteger("SKIPPED-SEGMENTS");if(n(r)){u.skippedSegments+=r;for(let e=r;e--;)d.push(null);y+=r}const i=t.enumeratedString("RECENTLY-REMOVED-DATERANGES");i&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(i.split("\t")));break}case"TARGETDURATION":0!==u.targetduration&&tr(u,e,h),u.targetduration=Math.max(parseInt(a),1);break;case"VERSION":null!==u.version&&tr(u,e,h),u.version=parseInt(a);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||tr(u,e,h),u.live=!1;break;case"#":(a||o)&&A.tagList.push(o?[a,o]:[a]);break;case"DISCONTINUITY":T++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([e]);break;case"BITRATE":A.tagList.push([e,a]),S=1e3*parseInt(a),n(S)?A.bitrate=S:S=0;break;case"DATERANGE":{const e=new hn(a,u),t=new pn(e,u.dateRanges[e.ID],u.dateRangeTagCount);u.dateRangeTagCount++,t.isValid||u.skippedSegments?u.dateRanges[t.id]=t:x.warn(`Ignoring invalid DATERANGE tag: "${a}"`),A.tagList.push(["EXT-X-DATERANGE",a]);break}case"DEFINE":{const e=new hn(a,u);"IMPORT"in e?un(u,e,s):ln(u,e,t)}break;case"DISCONTINUITY-SEQUENCE":0!==u.startCC?tr(u,e,h):d.length>0&&nr(u,e,h),u.startCC=T=parseInt(a);break;case"KEY":{const e=Yn(a,t,u);if(e.isSupported()){if("NONE"===e.method){g=void 0;break}g||(g={});const t=g[e.keyFormat];null!=t&&t.matches(e)||(t&&(g=E({},g)),g[e.keyFormat]=e)}else x.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${a}"`);break}case"START":u.startTimeOffset=Wn(a);break;case"MAP":{const e=new hn(a,u);if(A.duration){const t=new X(i,l);Zn(t,e,r,g),m=t,A.initSegment=m,m.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=m.rawProgramDateTime)}else{const t=A.byteRangeEndOffset;if(t){const e=A.byteRangeStartOffset;_=`${t-e}@${e}`}else _=null;Zn(A,e,r,g),m=A,k=!0}m.cc=T;break}case"SERVER-CONTROL":p&&tr(u,e,h),p=new hn(a),u.canBlockReload=p.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=p.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&p.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=p.optionalFloat("PART-HOLD-BACK",0),u.holdBack=p.optionalFloat("HOLD-BACK",0);break;case"PART-INF":{u.partTarget&&tr(u,e,h);const t=new hn(a);u.partTarget=t.decimalFloatingPoint("PART-TARGET");break}case"PART":{let e=u.partList;e||(e=u.partList=[]);const t=v>0?e[e.length-1]:void 0,n=v++,r=new hn(a,u),i=new Q(r,A,l,n,t);e.push(i),A.duration+=i.duration;break}case"PRELOAD-HINT":{const e=new hn(a,u);u.preloadHint=e;break}case"RENDITION-REPORT":{const e=new hn(a,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(e);break}default:x.warn(`line parsed but not handled: ${h}`)}}}w&&!w.relurl?(d.pop(),b-=w.duration,u.partList&&(u.fragmentHint=w)):u.partList&&(Jn(A,w,c),A.cc=T,u.fragmentHint=A,g&&er(A,g,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));const R=d.length,C=d[0],D=d[R-1];if(b+=u.skippedSegments*u.targetduration,b>0&&R&&D){u.averagetargetduration=b/R;const e=D.sn;u.endSN="initSegment"!==e?e:0,u.live||(D.endList=!0),I>0&&(!function(e,t){let n=e[t];for(let r=t;r--;){const t=e[r];if(!t)return;t.programDateTime=n.programDateTime-1e3*t.duration,n=t}}(d,I),C&&c.unshift(C))}return u.fragmentHint&&(b+=u.fragmentHint.duration),u.totalduration=b,c.length&&u.dateRangeTagCount&&C&&Kn(c,u),u.endCC=T,u}}function Kn(e,t){let n=e.length;if(!n){if(!t.hasProgramDateTime)return;{const r=t.fragments[t.fragments.length-1];e.push(r),n++}}const r=e[n-1],i=t.live?1/0:t.totalduration,a=Object.keys(t.dateRanges);for(let o=a.length;o--;){const l=t.dateRanges[a[o]],u=l.startDate.getTime();l.tagAnchor=r.ref;for(let r=n;r--;){var s;if((null==(s=e[r])?void 0:s.sn)<t.startSN)break;const n=$n(t,u,e,r,i);if(-1!==n){l.tagAnchor=t.fragments[n].ref;break}}}}function $n(e,t,n,r,i){const a=n[r];if(a){const o=a.programDateTime;if(t>=o||0===r){var s;if(t<=o+1e3*(((null==(s=n[r+1])?void 0:s.start)||i)-a.start)){const i=n[r].sn-e.startSN;if(i<0)return-1;const a=e.fragments;if(a.length>n.length){for(let s=(n[r+1]||a[a.length-1]).sn-e.startSN;s>i;s--){const e=a[s].programDateTime;if(t>=e&&t<e+1e3*a[s].duration)return s}}return i}}}return-1}function Yn(e,t,n){var r,i;const a=new hn(e,n),s=null!=(r=a.METHOD)?r:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,d=null!=(i=a.KEYFORMAT)?i:"identity";o&&a.IV&&!l&&x.error(`Invalid IV: ${a.IV}`);const c=o?Vn.resolve(o,t):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Un(s,c,d,h,l,a.KEYID)}function Wn(e){const t=new hn(e).decimalFloatingPoint("TIME-OFFSET");return n(t)?t:null}function Xn(e,t){let n=(e||"").split(/[ ,]+/).filter(e=>e);["video","audio","text"].forEach(e=>{const r=n.filter(t=>_e(t,e));r.length&&(t[`${e}Codec`]=r.map(e=>e.split("/")[0]).join(","),n=n.filter(e=>-1===r.indexOf(e)))}),t.unknownCodecs=n}function Qn(e,t,n){const r=t[n];r&&(e[n]=r)}function Jn(e,t,n){e.rawProgramDateTime?n.push(e):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime)}function Zn(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkeys=r),e.initSegment=null}function er(e,t,n){e.levelkeys=t;const{encryptedFragments:r}=n;r.length&&r[r.length-1].levelkeys===t||!Object.keys(t).some(e=>t[e].isCommonEncryption)||r.push(e)}function tr(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${n[0]})`)}function nr(e,t,n){e.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${n[0]})`)}function rr(e,t){const r=t.startPTS;if(n(r)){let n,i=0;t.sn>e.sn?(i=r-e.start,n=e):(i=e.start-r,n=t),n.duration!==i&&n.setDuration(i)}else if(t.sn>e.sn){e.cc===t.cc&&e.minEndPTS?t.setStart(e.start+(e.minEndPTS-e.start)):t.setStart(e.start+e.duration)}else t.setStart(Math.max(e.start-t.duration,0))}function ir(e,t,r,i,a,s,o){i-r<=0&&(o.warn("Fragment should have a positive duration",t),i=r+t.duration,s=a+t.duration);let l=r,u=i;const d=t.startPTS,c=t.endPTS;if(n(d)){const h=Math.abs(d-r);e&&h>e.totalduration?o.warn(`media timestamps and playlist times differ by ${h}s for level ${t.level} ${e.url}`):n(t.deltaPTS)?t.deltaPTS=Math.max(h,t.deltaPTS):t.deltaPTS=h,l=Math.max(r,d),r=Math.min(r,d),a=void 0!==t.startDTS?Math.min(a,t.startDTS):a,u=Math.min(i,c),i=Math.max(i,c),s=void 0!==t.endDTS?Math.max(s,t.endDTS):s}const h=r-t.start;0!==t.start&&t.setStart(r),t.setDuration(i-t.start),t.startPTS=r,t.maxStartPTS=l,t.startDTS=a,t.endPTS=i,t.minEndPTS=u,t.endDTS=s;const f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;let g;const p=f-e.startSN,m=e.fragments;for(m[p]=t,g=p;g>0;g--)rr(m[g],m[g-1]);for(g=p;g<m.length-1;g++)rr(m[g],m[g+1]);return e.fragmentHint&&rr(m[m.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,h}function ar(e,t,r){if(e===t)return;let i=null;const a=e.fragments;for(let n=a.length-1;n>=0;n--){const e=a[n].initSegment;if(e){i=e;break}}let s;e.fragmentHint&&delete e.fragmentHint.endPTS,function(e,t,n){const r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments;for(let u=i;u<=a;u++){const i=l[s+u];let a=o[u];if(r&&!a&&i&&(a=t.fragments[u]=i),i&&a){n(i,a,u,o);const r=i.relurl,s=a.relurl;if(r&&gr(r,s))return void(t.playlistParsingError=sr(`media sequence mismatch ${a.sn}:`,e,t,i,a));if(i.cc!==a.cc)return void(t.playlistParsingError=sr(`discontinuity sequence mismatch (${i.cc}!=${a.cc})`,e,t,i,a))}}}(e,t,(e,r,a,o)=>{if((!t.startCC||t.skippedSegments)&&r.cc!==e.cc){const n=e.cc-r.cc;for(let e=a;e<o.length;e++)o[e].cc+=n;t.endCC=o[o.length-1].cc}n(e.startPTS)&&n(e.endPTS)&&(r.setStart(r.startPTS=e.startPTS),r.startDTS=e.startDTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.setDuration(e.endPTS-e.startPTS),r.duration&&(s=r),t.PTSKnown=t.alignedSliding=!0),e.hasStreams&&(r.elementaryStreams=e.elementaryStreams),r.loader=e.loader,e.hasStats&&(r.stats=e.stats),e.initSegment&&(r.initSegment=e.initSegment,i=e.initSegment)});const o=t.fragments,l=t.fragmentHint?o.concat(t.fragmentHint):o;if(i&&l.forEach(e=>{var t;!e||e.initSegment&&e.initSegment.relurl!==(null==(t=i)?void 0:t.relurl)||(e.initSegment=i)}),t.skippedSegments){if(t.deltaUpdateFailed=o.some(e=>!e),t.deltaUpdateFailed){r.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let e=t.skippedSegments;e--;)o.shift();t.startSN=o[0].sn}else{t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){const{dateRanges:r,recentlyRemovedDateranges:i}=t,a=E({},e);i&&i.forEach(e=>{delete a[e]});const s=Object.keys(a).length;if(!s)return r;return Object.keys(r).forEach(e=>{const t=a[e],i=new pn(r[e].attr,t);i.isValid?(a[e]=i,t||(i.tagOrder+=s)):n.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${it(r[e].attr)}"`)}),a}(e.dateRanges,t,r));const n=e.fragments.filter(e=>e.rawProgramDateTime);if(e.hasProgramDateTime&&!t.hasProgramDateTime)for(let e=1;e<l.length;e++)null===l[e].programDateTime&&Jn(l[e],l[e-1],n);Kn(n,t)}t.endCC=o[o.length-1].cc}if(!t.startCC){var u;const n=dr(e,t.startSN-1);t.startCC=null!=(u=null==n?void 0:n.cc)?u:o[0].cc}!function(e,t,n){if(e&&t){let r=0;for(let i=0,a=e.length;i<=a;i++){const a=e[i],s=t[i+r];a&&s&&a.index===s.index&&a.fragment.sn===s.fragment.sn?n(a,s):r--}}}(e.partList,t.partList,(e,t)=>{t.elementaryStreams=e.elementaryStreams,t.stats=e.stats}),s?ir(t,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,r):or(e,t),o.length&&(t.totalduration=t.edge-o[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;const d=t.advancedDateTime;if(t.advanced&&d){const e=t.edge;t.driftStart||(t.driftStartTime=d,t.driftStart=e),t.driftEndTime=d,t.driftEnd=e}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime;-1===t.requestScheduled&&(t.requestScheduled=e.requestScheduled)}function sr(e,t,n,r,i){return new Error(`${e} ${i.url}\nPlaylist starting @${t.startSN}\n${t.m3u8}\n\nPlaylist starting @${n.startSN}\n${n.m3u8}`)}function or(e,t,n=!0){const r=t.startSN+t.skippedSegments-e.startSN,i=e.fragments,a=r>=0;let s=0;if(a&&r<i.length)s=i[r].start;else if(a&&t.startSN===e.endSN+1)s=e.fragmentEnd;else if(a&&n)s=e.fragmentStart+r*t.levelTargetDuration;else{if(t.skippedSegments||0!==t.fragmentStart)return;s=e.fragmentStart}lr(t,s)}function lr(e,t){if(t){const n=e.fragments;for(let r=e.skippedSegments;r<n.length;r++)n[r].addStart(t);e.fragmentHint&&e.fragmentHint.addStart(t)}}function ur(e,t=1/0){let n=1e3*e.targetduration;if(e.updated){const r=e.fragments,i=4;if(r.length&&n*i>t){const e=1e3*r[r.length-1].duration;e<n&&(n=e)}}else n/=2;return Math.round(n)}function dr(e,t,n){if(!e)return null;let r=e.fragments[t-e.startSN];return r||(r=e.fragmentHint,r&&r.sn===t?r:t<e.startSN&&n&&n.sn===t?n:null)}function cr(e,t,n){return e?hr(e.partList,t,n):null}function hr(e,t,n){if(e)for(let r=e.length;r--;){const i=e[r];if(i.index===n&&i.fragment.sn===t)return i}return null}function fr(e){e.forEach((e,t)=>{var n;null==(n=e.details)||n.fragments.forEach(e=>{e.level=t,e.initSegment&&(e.initSegment.level=t)})})}function gr(e,t){return!(e===t||!t)&&pr(e)!==pr(t)}function pr(e){return e.replace(/\?[^?]*$/,"")}function mr(e,t){for(let r=0,i=e.length;r<i;r++){var n;if((null==(n=e[r])?void 0:n.cc)===t)return e[r]}return null}function yr(e,t){const n=e.start+t;e.startPTS=n,e.setStart(n),e.endPTS=n+e.duration}function vr(e,t){const n=t.fragments;for(let r=0,i=n.length;r<i;r++)yr(n[r],e);t.fragmentHint&&yr(t.fragmentHint,e),t.alignedSliding=!0}function br(e,t){if(!function(e,t){return!!(e&&t.startCC<e.endCC&&t.endCC>e.startCC)}(t,e))return;const n=Math.min(t.endCC,e.endCC),r=mr(t.fragments,n),i=mr(e.fragments,n);if(!r||!i)return;x.log(`Aligning playlist at start of dicontinuity sequence ${n}`);vr(r.start-i.start,e)}function Er(e,t){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;const n=e.fragments,r=t.fragments;if(!n.length||!r.length)return;let i,a;const s=Math.min(t.endCC,e.endCC);t.startCC<s&&e.startCC<s&&(i=mr(r,s),a=mr(n,s)),i&&a||(i=r[Math.floor(r.length/2)],a=mr(n,i.cc)||n[Math.floor(n.length/2)]);const o=i.programDateTime,l=a.programDateTime;if(!o||!l)return;vr((l-o)/1e3-(a.start-i.start),e)}function Tr(e,t,n){Sr(e,t,n),e.addEventListener(t,n)}function Sr(e,t,n){e.removeEventListener(t,n)}const wr=function(e){let t="";const n=e.length;for(let r=0;r<n;r++)t+=`[${e.start(r).toFixed(3)}-${e.end(r).toFixed(3)}]`;return t},Ar="STOPPED",Ir="IDLE",kr="KEY_LOADING",_r="FRAG_LOADING",Rr="FRAG_LOADING_WAITING_RETRY",xr="WAITING_TRACK",Cr="PARSING",Dr="PARSED",Lr="ENDED",Mr="ERROR",Nr="WAITING_INIT_PTS",Pr="WAITING_LEVEL";class Or extends en{constructor(e,t,r,i,a){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Ar,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:e,fragCurrent:t,media:r,mediaBuffer:i,state:a}=this,s=r?r.currentTime:0,o=rn.bufferInfo(i||r,s,e.maxBufferHole),l=!o.len;if(this.log(`Media seeking to ${n(s)?s.toFixed(3):s}, state: ${a}, ${l?"out of":"in"} buffer`),this.state===Lr)this.resetLoadingState();else if(t){const n=e.maxFragLookUpTolerance,r=t.start-n,i=t.start+t.duration+n;if(l||i<o.start||r>o.end){const e=s>i;(s<r||e)&&(e&&t.loader&&(this.log(`Cancelling fragment load for seek (sn: ${t.sn})`),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(r){this.fragmentTracker.removeFragmentsInRange(s,1/0,this.playlistType,!0);if(s>this.lastCurrentTime&&(this.lastCurrentTime=s),!this.loadingParts){const e=Math.max(o.end,s),t=this.shouldLoadParts(this.getLevelDetails(),e);t&&(this.log(`LL-Part loading ON after seeking to ${s.toFixed(2)} with buffer @${e.toFixed(2)}`),this.loadingParts=t)}}this.hls.hasEnoughToStart||(this.log(`Setting ${l?"startPosition":"nextLoadPosition"} to ${s} for seek without enough to start`),this.nextLoadPosition=s,l&&(this.startPosition=s)),l&&this.state===Ir&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Xt(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Yt(e.config)}registerListeners(){const{hls:e}=this;e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(u.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===Ar)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;null!=e&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Ar}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return-1===t&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const i=e.buffered;this.config.maxBufferHole&&i&&i.length>1&&(e=rn.bufferedInfo(i,e.start,0));const a=e.nextStart;if(a&&a>r&&a<t.edge)return!1;if(this.media.currentTime<e.start)return!1;const s=t.partList;if(null!=s&&s.length){const e=s[s.length-1];return rn.isBuffered(this.media,e.start+e.duration/2)}const o=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(o)}getLevelDetails(){if(this.levels&&null!==this.levelLastLoaded)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;var t;return e?(null==(t=this.getLevelDetails())?void 0:t.appliedTimelineOffset)||e:0}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;Tr(n,"seeking",this.onMediaSeeking),Tr(n,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===Ar&&this.startLoad(r.startPosition)}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(null!==r){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Sr(r,"seeking",this.onMediaSeeking),Sr(r,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n)return this.resetLoadingState(),void this.resetTransmuxer();this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Ar,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this.startFragRequested=!0,this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){this._doFragLoad(e,t,n,e=>{const t=e.frag;if(this.fragContextChanged(t))return this.warn(`${t.type} sn: ${t.sn}${e.part?" part: "+e.part.index:""} of ${this.fragInfo(t,!1,e.part)}) was dropped during download.`),void this.fragmentTracker.removeFragment(t);t.stats.chunkCount++,this._handleFragmentLoadProgress(e)}).then(e=>{if(!e)return;const t=this.state,n=e.frag;this.fragContextChanged(n)?(t===_r||!this.fragCurrent&&t===Cr)&&(this.fragmentTracker.removeFragment(n),this.state=Ir):("payload"in e&&(this.log(`Loaded ${n.type} sn: ${n.sn} of ${this.playlistLabel()} ${n.level}`),this.hls.trigger(u.FRAG_LOADED,e)),this._handleFragmentLoadComplete(e))}).catch(t=>{this.state!==Ar&&this.state!==Mr&&(this.warn(`Frag error: ${(null==t?void 0:t.message)||t}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===Ot){const t=e.type,r=this.getFwdBufferInfo(this.mediaBuffer,t),i=Math.max(e.duration,r?r.len:this.config.maxBufferLength),a=this.backtrackFragment;(1===(a?e.sn-a.sn:0)||this.reduceMaxBufferLength(i,e.duration))&&n.removeFragment(e)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Ft&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(null==t?void 0:t.live)&&"EVENT"!==t.type&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const r={startOffset:e,endOffset:t,type:n};this.hls.trigger(u.BUFFER_FLUSHING,r)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(e=>{const t=null==e?void 0:e.frag;if(!t||this.fragContextChanged(t)||!this.levels)throw new Error("init load aborted");return e}).then(e=>{const{hls:t}=this,{frag:n,payload:r}=e,i=n.decryptdata;if(r&&r.byteLength>0&&null!=i&&i.key&&i.iv&&bn(i.method)){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,En(i.method)).catch(e=>{throw t.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:n}),e}).then(r=>{const i=self.performance.now();return t.trigger(u.FRAG_DECRYPTED,{frag:n,payload:r,stats:{tstart:a,tdecrypt:i}}),e.payload=r,this.completeInitSegmentLoad(e)})}return this.completeInitSegmentLoad(e)}).catch(t=>{this.state!==Ar&&this.state!==Mr&&(this.warn(t),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==Ar&&(this.state=Ir),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var n,r;const i=e.tracks;if(i&&!t.encrypted&&(null!=(n=i.audio)&&n.encrypted||null!=(r=i.video)&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const e=this.media,n=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${e?"attached mediaKeys: "+e.mediaKeys:"detached"})`);return this.warn(n.message),!e||e.mediaKeys?!1:(this.hls.trigger(u.ERROR,{type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_NO_KEYS,fatal:!1,error:n,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${n?wr(rn.getBuffered(n)):"(detached)"})`),W(e)){var r;if(e.type!==m){const t=e.elementaryStreams;if(!Object.keys(t).some(e=>!!t[e]))return void(this.state=Ir)}const t=null==(r=this.levels)?void 0:r[e.level];null!=t&&t.fragmentError&&(this.log(`Resetting level fragment error count of ${t.fragmentError} on frag buffered`),t.fragmentError=0)}this.state=Ir}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:r,partsLoaded:i}=e,a=!i||0===i.length||i.some(e=>!e),s=new tn(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(s)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var a;this.fragCurrent=e;const s=t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let o=null;if(!e.encrypted||null!=(a=e.decryptdata)&&a.key)e.encrypted||(o=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));else if(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=kr,this.fragCurrent=e,o=this.keyLoader.load(e).then(e=>{if(!this.fragContextChanged(e.frag))return this.hls.trigger(u.KEY_LOADED,e),this.state===kr&&(this.state=Ir),e}),this.hls.trigger(u.KEY_LOADING,{frag:e}),null===this.fragCurrent)return this.log("context changed in KEY_LOADING"),Promise.resolve(null);const l=this.fragPrevious;if(W(e)&&(!l||e.sn!==l.sn)){const n=this.shouldLoadParts(t.details,e.end);n!==this.loadingParts&&(this.log(`LL-Part loading ${n?"ON":"OFF"} loading sn ${null==l?void 0:l.sn}->${e.sn}`),this.loadingParts=n)}if(r=Math.max(e.start,r||0),this.loadingParts&&W(e)){const n=s.partList;if(n&&i){r>s.fragmentEnd&&s.fragmentHint&&(e=s.fragmentHint);const a=this.getNextPart(n,e,r);if(a>-1){const l=n[a];let d;return e=this.fragCurrent=l.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${l.index} (${a}/${n.length-1}) of ${this.fragInfo(e,!1,l)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=l.start+l.duration,this.state=_r,d=o?o.then(n=>!n||this.fragContextChanged(n.frag)?null:this.doFragPartsLoad(e,l,t,i)).catch(e=>this.handleFragLoadError(e)):this.doFragPartsLoad(e,l,t,i).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(u.FRAG_LOADING,{frag:e,part:l,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):d}if(!e.url||this.loadedEndOfParts(n,r))return Promise.resolve(null)}}var d;if(W(e)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${null==(d=s.partList)?void 0:d.filter(e=>e.loaded).map(e=>`[${e.start}-${e.end}]`)}`),this.loadingParts=!1;else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+s.startSN+"-"+s.endSN+"]"}, target: ${parseFloat(r.toFixed(3))}`),n(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=_r;const c=this.config.progressive;let h;return h=c&&o?o.then(t=>!t||this.fragContextChanged(t.frag)?null:this.fragmentLoader.load(e,i)).catch(e=>this.handleFragLoadError(e)):Promise.all([this.fragmentLoader.load(e,c?i:void 0),o]).then(([e])=>(!c&&i&&i(e),e)).catch(e=>this.handleFragLoadError(e)),this.hls.trigger(u.FRAG_LOADING,{frag:e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):h}doFragPartsLoad(e,t,n,r){return new Promise((i,a)=>{var s;const o=[],l=null==(s=n.details)?void 0:s.partList,d=t=>{this.fragmentLoader.loadPart(e,t,r).then(r=>{o[t.index]=r;const a=r.part;this.hls.trigger(u.FRAG_LOADED,r);const s=cr(n.details,e.sn,t.index+1)||hr(l,e.sn,t.index+1);if(!s)return i({frag:e,part:a,partsLoaded:o});d(s)}).catch(a)};d(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===l.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===o.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(u.ERROR,t)}else this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==Cr)return void(this.fragCurrent||this.state===Ar||this.state===Mr||(this.state=Ir));const{frag:n,part:r,level:i}=t,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const s=this.getLevelDetails(),o=s&&n.sn>s.endSN||this.shouldLoadParts(s,n.end);o!==this.loadingParts&&(this.log(`LL-Part loading ${o?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=o),this.updateLevelTiming(n,r,i,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const i=e.partList[0];if(i.fragment.type===m)return!1;if(t>=i.end+((null==(n=e.fragmentHint)?void 0:n.duration)||0)){var r;if((this.hls.hasEnoughToStart?(null==(r=this.media)?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>i.start-i.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:r,sn:i,part:a}=e;if(null==t||!t[r])return this.warn(`Levels object was unset while buffering fragment ${i} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const s=t[r],o=s.details,l=a>-1?cr(o,i,a):null,u=l?l.fragment:dr(o,i,n);return u?(n&&n!==u&&(u.stats=n.stats),{frag:u,part:l,level:s}):null}bufferFragmentData(e,t,n,r,i){if(this.state!==Cr)return;const{data1:a,data2:s}=e;let o=a;if(s&&(o=ye(a,s)),!o.length)return;const l=this.initPTS[t.cc],d=l?-l.baseTime/l.timescale:void 0,c={type:e.type,frag:t,part:n,chunkMeta:r,offset:d,parent:t.type,data:o};if(this.hls.trigger(u.BUFFER_APPENDING,c),e.dropped&&e.independent&&!n){if(i)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!rn.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,e.start);const n=t.currentTime,r=rn.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),s=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}getFwdBufferInfo(e,t){var r;const i=this.getLoadPosition();if(!n(i))return null;const a=this.lastCurrentTime>i||null!=(r=this.media)&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,a)}getFwdBufferInfoAtPos(e,t,n,r){const i=rn.bufferInfo(e,t,r);if(0===i.len&&void 0!==i.nextStart){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&(i.nextStart<=a.end||a.gap)){const n=Math.max(Math.min(i.nextStart,a.end)-t,r);return rn.bufferInfo(e,t,n)}}return i}getMaxBufferLength(e){const{config:t}=this;let n;return n=e?Math.max(8*t.maxBufferSize/e,t.maxBufferLength):t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,r=Math.max(Math.min(e-t,n.maxBufferLength),t),i=Math.max(e-3*t,n.maxMaxBufferLength/2,r);return i>=r&&(n.maxMaxBufferLength=i,this.warn(`Reduce max buffer length to ${i}s`),!0)}getAppendedFrag(e,t=g){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,r=n.length;if(!r)return null;const{config:i}=this,a=n[0].start,s=i.lowLatencyMode&&!!t.partList;let o=null;if(t.live){const n=i.initialLiveManifestSize;if(r<n)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${n})`),null;if(!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition||e<a){var l;s&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),o=this.getInitialLiveFragment(t);const n=this.hls.startPosition,r=this.hls.liveSyncPosition,i=o?(-1!==n&&n>=a?n:r)||o.start:e;this.log(`Setting startPosition to ${i} to match start frag at live edge. mainStart: ${n} liveSyncPosition: ${r} frag.start: ${null==(l=o)?void 0:l.start}`),this.startPosition=this.nextLoadPosition=i}}else e<=a&&(o=n[0]);if(!o){const n=this.loadingParts?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,n,t)}let u=this.filterReplacedPrimary(o,t);if(!u&&o){const e=o.sn-t.startSN;u=this.filterReplacedPrimary(n[e+1]||null,t)}return this.mapToInitFragWhenRequired(u)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===Ut||n===Ft&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,r,i){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,t),a&&!a.gap&&n.nextStart)){const e=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(null!==e&&n.len+e.len>=i){const e=a.sn;return this.loopSn!==e&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${e}`),this.loopSn=e),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(Fr(this.config)){var e;if(null==(e=this.hls.interstitialsManager)||null==(e=e.playingItem)?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(Fr(this.config)&&e.type!==m){const n=this.hls.interstitialsManager,r=null==n?void 0:n.bufferingItem;if(r){const n=r.event;if(n){if(n.appendInPlace||Math.abs(e.start-r.start)>1||0===r.start)return null}else{if(e.end<=r.start&&!1===(null==t?void 0:t.live))return null;if(e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}}const i=null==n?void 0:n.playerQueue;if(i)for(let t=i.length;t--;){const n=i[t].interstitial;if(n.appendInPlace&&e.start>=n.startTime&&e.end<=n.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return null==e||!e.initSegment||e.initSegment.data||this.bitrateTest?e:e.initSegment}getNextPart(e,t,n){let r=-1,i=!1,a=!0;for(let s=0,o=e.length;s<o;s++){const o=e[s];if(a=a&&!o.independent,r>-1&&n<o.start)break;const l=o.loaded;l?r=-1:(i||(o.independent||a)&&o.fragment===t)&&(o.fragment!==t&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${o.start}`),r=s),i=l}return r}loadedEndOfParts(e,t){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(t>n.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=function(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!n(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;for(let n=0;n<e.length;++n){const i=e[n];if(mt(t,r,i))return i}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const n=r.sn+1;if(n>=e.startSN&&n<=e.endSN){const a=t[n-e.startSN];r.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=yt(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const t=this.hls.liveSyncPosition;null!==t&&(i=this.getFragmentAtPosition(t,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:r}=this;let{fragPrevious:i}=this,{fragments:a,endSN:s}=n;const{fragmentHint:o}=n,{maxFragLookUpTolerance:l}=r,u=n.partList,d=!!(this.loadingParts&&null!=u&&u.length&&o);let c;if(d&&!this.bitrateTest&&u[u.length-1].fragment.sn===o.sn&&(a=a.concat(o),s=o.sn),e<t){var h;c=gt(i,a,e,e<this.lastCurrentTime||e>t-l||null!=(h=this.media)&&h.paused||!this.startFragRequested?0:l)}else c=a[a.length-1];if(c){const e=c.sn-n.startSN,t=this.fragmentTracker.getState(c);if((t===Ut||t===Ft&&c.gap)&&(i=c),i&&c.sn===i.sn&&(!d||u[0].fragment.sn>c.sn||!n.live)){if(c.level===i.level){const t=a[e+1];c=c.sn<s&&this.fragmentTracker.getState(t)!==Ut?t:null}}}return c}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,s=!t,o=e.alignedSliding&&n(a);if(s||!o&&!a){!function(e,t){e&&(br(t,e),t.alignedSliding||Er(t,e),t.alignedSliding||t.skippedSegments||or(e,t,!1))}(r,e);const n=e.fragmentStart;return this.log(`Live playlist sliding: ${n.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),n}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const i=this.timelineOffset;if(-1===r){const a=null!==this.startTimeOffset,s=a?this.startTimeOffset:e.startTimeOffset;null!==s&&n(s)?(r=t+s,s<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${a?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:t}=this;let n=0;return null!=(e=this.hls)&&e.hasEnoughToStart&&t?n=t.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&W(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===Rr)||(this.state=Ir)}onFragmentOrKeyLoadError(e,t){var n;if(t.chunkMeta&&!t.frag){const e=this.getCurrentContext(t.chunkMeta);e&&(t.frag=e.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;var i;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(i=this.fragCurrent)?void 0:i.url}`);const a=t.details===l.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const s=t.errorAction;if(!s)return void(this.state=Mr);const{action:o,flags:u,retryCount:d=0,retryConfig:c}=s,h=!!c,f=h&&o===xt,g=h&&!s.resolved&&u===Dt,p=null==(n=this.hls.latestLevelDetails)?void 0:n.live;if(!f&&g&&W(r)&&!r.endList&&p&&!Et(t))this.resetFragmentErrors(e),this.treatAsGap(r),s.resolved=!0;else if((f||g)&&d<c.maxNumRetry){var m;const n=It(null==(m=t.response)?void 0:m.code),i=St(c,d);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+i,this.state=Rr,s.resolved=!0,n)return this.log("Waiting for connection (offline)"),this.retryDate=1/0,void(t.reason="offline");this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${d+1}/${c.maxNumRetry} in ${i}ms`)}else if(c){if(this.resetFragmentErrors(e),!(d<c.maxNumRetry))return void this.warn(`${t.details} reached or exceeded max retry (${d})`);a||o===Rt||(s.resolved=!0)}else this.state=o===_t?Pr:Mr;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,n=t===1/0;(!t||e>=t||n&&!It(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=Ir)}reduceLengthAndFlushBuffer(e){if(this.state===Cr||this.state===Dr){const t=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len,(null==t?void 0:t.duration)||10);const a=!i;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===p&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Ar&&(this.state=Ir)}afterBufferFlushed(e,t,n){if(!e)return;const r=rn.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===Lr&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Ar&&(this.state=Ir)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;null!=t&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${-1===e.level?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,r){const i=n.details;if(!i)return void this.warn("level.details undefined");var a;if(!Object.keys(e.elementaryStreams).reduce((t,a)=>{const s=e.elementaryStreams[a];if(s){const o=s.endPTS-s.startPTS;if(o<=0)return this.warn(`Could not parse fragment ${e.sn} ${a} duration reliably (${o})`),t||!1;const l=r?0:ir(i,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS,this);return this.hls.trigger(u.LEVEL_PTS_UPDATED,{details:i,level:n,drift:l,type:a,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t},!1)&&(0===n.fragmentError&&this.treatAsGap(e,n),null===(null==(a=this.transmuxer)?void 0:a.error))){const t=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(t.message),this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_PARSING_ERROR,fatal:!1,error:t,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=Dr,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(u.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===g?"level":"track"}fragInfo(e,t=!0,n){var r,i;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${(null!=(r=t&&!n?e.startPTS:(n||e).start)?r:NaN).toFixed(3)}-${(null!=(i=t&&!n?e.endPTS:(n||e).end)?i:NaN).toFixed(3)}]${n&&"main"===e.type?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;null==(e=this.transmuxer)||e.reset()}recoverWorkerError(e){"demuxerWorker"===e.event&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function Fr(e){return!!e.interstitialsController&&!1!==e.enableInterstitialPlayback}class Ur{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;return e.length?(n=1===e.length?e[0]:function(e,t){const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.length}return n}(e,t),this.reset(),n):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}var zr,Br={exports:{}};var jr=P((zr||(zr=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var l,u,d=this._events[o],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,a),!0;case 6:return d.fn.call(d.context,t,r,i,a,s),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];d.fn.apply(d.context,l)}else{var h,f=d.length;for(u=0;u<f;u++)switch(d[u].once&&this.removeListener(e,d[u].fn,void 0,!0),c){case 1:d[u].fn.call(d[u].context);break;case 2:d[u].fn.call(d[u].context,t);break;case 3:d[u].fn.call(d[u].context,t,r);break;case 4:d[u].fn.call(d[u].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];d[u].fn.apply(d[u].context,l)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var l=0,u=[],d=o.length;l<d;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(Br)),Br.exports));const qr="1.6.13",Gr={};function Hr(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Vr(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Kr(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function $r(e,t){const n=t;let r=0;for(;Vr(e,t);){r+=10;r+=Kr(e,t+6),Hr(e,t+10)&&(r+=10),t+=r}if(r>0)return e.subarray(n,n+r)}function Yr(e,t){return 255===e[t]&&240==(246&e[t+1])}function Wr(e,t){return 1&e[t+1]?7:9}function Xr(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function Qr(e,t){return t+1<e.length&&Yr(e,t)}function Jr(e,t){if(Qr(e,t)){const n=Wr(e,t);if(t+n>=e.length)return!1;const r=Xr(e,t);if(r<=n)return!1;const i=t+r;return i===e.length||Qr(e,i)}return!1}function Zr(e,t,n,r,i){if(!e.samplerate){const a=function(e,t,n,r){const i=t[n+2],a=i>>2&15;if(a>12){const t=new Error(`invalid ADTS sampling index:${a}`);return void e.emit(u.ERROR,u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_PARSING_ERROR,fatal:!0,error:t,reason:t.message})}const s=1+(i>>6&3),d=t[n+3]>>6&3|(1&i)<<2,c="mp4a.40."+s,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][a];let f=a;5!==s&&29!==s||(f-=3);const g=[s<<3|(14&f)>>1,(1&f)<<7|d<<3];return x.log(`manifest codec:${r}, parsed codec:${c}, channels:${d}, rate:${h} (ADTS object type:${s} sampling index:${a})`),{config:g,samplerate:h,channelCount:d,codec:c,parsedCodec:c,manifestCodec:r}}(t,n,r,i);if(!a)return;E(e,a)}}function ei(e){return 9216e4/e}function ti(e,t,n,r,i){const a=r+i*ei(e.samplerate),s=function(e,t){const n=Wr(e,t);if(t+n<=e.length){const r=Xr(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}(t,n);let o;if(s){const{frameLength:r,headerLength:i}=s,l=i+r,u=Math.max(0,n+l-t.length);u?(o=new Uint8Array(l-i),o.set(t.subarray(n+i,t.length),0)):o=t.subarray(n+i,n+l);const d={unit:o,pts:a};return u||e.samples.push(d),{sample:d,length:l,missing:u}}const l=t.length-n;o=new Uint8Array(l),o.set(t.subarray(n,t.length),0);return{sample:{unit:o,pts:a},length:l,missing:-1}}function ni(e,t){return Vr(e,t)&&Kr(e,t+6)+10<=e.length-t}function ri(e,t=0,n=1/0){return function(e,t,n,r){const i=(a=e,a instanceof ArrayBuffer?a:a.buffer);var a;let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const o=(h=e,h&&h.buffer instanceof ArrayBuffer&&void 0!==h.byteLength&&void 0!==h.byteOffset?e.byteOffset:0),l=(o+e.byteLength)/s,u=(o+t)/s,d=Math.floor(Math.max(0,Math.min(u,l))),c=Math.floor(Math.min(d+Math.max(n,0),l));var h;return new r(i,d,c-d)}(e,t,n,Uint8Array)}function ii(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return;const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=L(ri(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return;const s=L(ri(e.data,3+n,a));let o;var l;return o="--\x3e"===r?L(ri(e.data,4+n+a)):(l=e.data.subarray(4+n+a))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=r,t.pictureType=i,t.description=s,t.data=o,t}function ai(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=L(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=L(e.data.subarray(t),!0);t+=n.length+1;const r=L(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=L(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?ii(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=L(e.data.subarray(t),!0);t+=n.length+1;const r=L(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=L(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function si(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=Kr(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}function oi(e){let t=0;const n=[];for(;Vr(e,t);){const r=Kr(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+r;for(;t+10<i;){const r=si(e.subarray(t)),i=ai(r);i&&n.push(i),t+=r.size+10}Hr(e,t)&&(t+=10)}return n}function li(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info}function ui(e){if(8===e.data.byteLength){const t=new Uint8Array(e.data),n=1&t[3];let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}}function di(e){const t=oi(e);for(let n=0;n<t.length;n++){const e=t[n];if(li(e))return ui(e)}}let ci=function(e){return e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3",e.misbklv="urn:misb:KLV:bin:1910.1",e}({});function hi(e="",t=9e4){return{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class fi{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=ye(this.cachedData,e),this.cachedData=null);let r,i=$r(e,0),a=i?i.length:0;const s=this._audioTrack,o=this._id3Track,l=i?di(i):void 0,u=e.length;for((null===this.basePTS||0===this.frameIndex&&n(l))&&(this.basePTS=gi(l,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ci.audioId3,duration:Number.POSITIVE_INFINITY});a<u;){if(this.canParse(e,a)){const t=this.appendFrame(s,e,a);t?(this.frameIndex++,this.lastPTS=t.sample.pts,a+=t.length,r=a):a=u}else ni(e,a)?(i=$r(e,a),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:ci.audioId3,duration:Number.POSITIVE_INFINITY}),a+=i.length,r=a):a++;if(a===u&&r!==u){const t=e.slice(r);this.cachedData?this.cachedData=ye(this.cachedData,t):this.cachedData=t}}return{audioTrack:s,videoTrack:hi(),id3Track:o,textTrack:hi()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:hi(),id3Track:this._id3Track,textTrack:hi()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const gi=(e,t,r)=>{if(n(e))return 90*e;return 9e4*t+(r?9e4*r.baseTime/r.timescale:0)};let pi=null;const mi=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],yi=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],vi=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],bi=[0,1,1,4];function Ei(e,t,n,r,i){if(n+24>t.length)return;const a=Ti(t,n);if(a&&n+a.frameLength<=t.length){const s=r+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}function Ti(e,t){const n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){const s=e[t+2]>>1&1,o=e[t+3]>>6,l=1e3*mi[14*(3===n?3-r:3===r?3:4)+i-1],u=yi[3*(3===n?0:2===n?1:2)+a],d=3===o?1:2,c=vi[n][r],h=bi[r],f=8*c*h,g=Math.floor(c*l/u+s)*h;if(null===pi){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);pi=e?parseInt(e[1]):0}return!!pi&&pi<=87&&2===r&&l>=224e3&&0===o&&(e[t+3]=128|e[t+3]),{sampleRate:u,channelCount:d,frameLength:g,samplesPerFrame:f}}}function Si(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function wi(e,t){return t+1<e.length&&Si(e,t)}function Ai(e,t){if(t+1<e.length&&Si(e,t)){const n=4,r=Ti(e,t);let i=n;null!=r&&r.frameLength&&(i=r.frameLength);const a=t+i;return a===e.length||wi(e,a)}return!1}const Ii=(e,t)=>{let n=0,r=5;t+=r;const i=new Uint32Array(1),a=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=e[t];const o=Math.min(r,8),l=8-o;a[0]=4278190080>>>24+l<<l,i[0]=(s[0]&a[0])>>l,n=n?n<<o|i[0]:i[0],t+=1,r-=o}return n};class ki extends fi{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const r=_i(e,t,n,this.basePTS,this.frameIndex);if(-1!==r){return{sample:e.samples[e.samples.length-1],length:r,missing:0}}}static probe(e){if(!e)return!1;const t=$r(e,0);if(!t)return!1;const n=t.length;return 11===e[n]&&119===e[n+1]&&void 0!==di(t)&&Ii(e,n)<16}}function _i(e,t,n,r,i){if(n+8>t.length)return-1;if(11!==t[n]||119!==t[n+1])return-1;const a=t[n+4]>>6;if(a>=3)return-1;const s=[48e3,44100,32e3][a],o=63&t[n+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+a];if(n+l>t.length)return-1;const u=t[n+6]>>5;let d=0;2===u?d+=2:(1&u&&1!==u&&(d+=2),4&u&&(d+=2));const c=(t[n+6]<<8|t[n+7])>>12-d&1,h=[2,1,2,3,3,4,4,5][u]+c,f=t[n+5]>>3,g=7&t[n+5],p=new Uint8Array([a<<6|f<<1|g>>2,(3&g)<<6|u<<3|c<<2|o>>4,o<<4&224]),m=r+i*(1536/s*9e4),y=t.subarray(n,n+l);return e.config=p,e.channelCount=h,e.samplerate=s,e.samples.push({unit:y,pts:m}),l}const Ri=/\/emsg[-/]ID3/i;function xi(e,t){return n(e.presentationTime)?e.presentationTime/e.timeScale:t+e.presentationTimeDelta/e.timeScale}class Ci{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new Yt(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Gt)}decryptAacSample(e,t,n){const r=e[t].unit;if(r.length<=16)return;const i=r.subarray(16,r.length-r.length%16),a=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(a).then(i=>{const a=new Uint8Array(i);r.set(a,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)}).catch(n)}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let r=0;for(let i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e}decryptAvcSample(e,t,n,r,i){const a=Se(i.data),s=this.getAvcEncryptedData(a);this.decryptBuffer(s.buffer).then(s=>{i.data=this.getAvcDecryptedUnit(a,s),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,r)}).catch(r)}decryptAvcSamples(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();const i=e[t].units;for(;!(n>=i.length);n++){const a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,r,a),this.decrypter.isSync())))return}}}}class Di{constructor(){this.VideoSample=null}createVideoSample(e,t,n){return{key:e,frame:!1,pts:t,dts:n,units:[],length:0}}getLastNalUnit(e){var t;let n,r=this.VideoSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!=(t=r)&&t.units){const e=r.units;n=e[e.length-1]}return n}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){const n=t.samples,r=n.length;if(!r)return void t.dropped++;{const t=n[r-1];e.pts=t.pts,e.dts=t.dts}}t.samples.push(e)}}parseNALu(e,t,n){const r=t.byteLength;let i=e.naluState||0;const a=i,s=[];let o,l,u,d=0,c=-1,h=0;for(-1===i&&(c=0,h=this.getNALuType(t,0),i=0,d=1);d<r;)if(o=t[d++],i)if(1!==i)if(o)if(1===o){if(l=d-i-1,c>=0){const e={data:t.subarray(c,l),type:h};s.push(e)}else{const n=this.getLastNalUnit(e.samples);n&&(a&&d<=4-a&&n.state&&(n.data=n.data.subarray(0,n.data.byteLength-a)),l>0&&(n.data=ye(n.data,t.subarray(0,l)),n.state=0))}d<r?(u=this.getNALuType(t,d),c=d,h=u,i=0):i=-1}else i=0;else i=3;else i=o?0:2;else i=o?0:1;if(c>=0&&i>=0){const e={data:t.subarray(c,r),type:h,state:i};s.push(e)}if(0===s.length){const n=this.getLastNalUnit(e.samples);n&&(n.data=ye(n.data,t))}return e.naluState=i,s}}class Li{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i}skipBits(e){let t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(t=(e-=this.bitsAvailable)>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&x.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class Mi extends Di{parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let a,s=this.VideoSample,o=!1;n.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 1:{let t=!1;a=!0;const i=r.data;if(o&&i.length>4){const e=this.readSliceType(i);2!==e&&4!==e&&7!==e&&9!==e||(t=!0)}var u;if(t)null!=(u=s)&&u.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null);s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.frame=!0,s.key=t;break}case 5:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 6:a=!0,Te(r.data,1,n.pts,t.samples);break;case 7:{var d,c;a=!0,o=!0;const t=r.data,n=this.readSPS(t);if(!e.sps||e.width!==n.width||e.height!==n.height||(null==(d=e.pixelRatio)?void 0:d[0])!==n.pixelRatio[0]||(null==(c=e.pixelRatio)?void 0:c[1])!==n.pixelRatio[1]){e.width=n.width,e.height=n.height,e.pixelRatio=n.pixelRatio,e.sps=[t];const r=t.subarray(1,4);let i="avc1.";for(let e=0;e<3;e++){let t=r[e].toString(16);t.length<2&&(t="0"+t),i+=t}e.codec=i}break}case 8:a=!0,e.pps=[r.data];break;case 9:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:a=!0;break;default:a=!1}if(s&&a){s.units.push(r)}}),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return 31&e[t]}readSliceType(e){const t=new Li(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let n,r=8,i=8;for(let a=0;a<e;a++)0!==i&&(n=t.readEG(),i=(r+n+256)%256),r=0===i?r:i}readSPS(e){const t=new Li(e);let n,r,i,a=0,s=0,o=0,l=0;const u=t.readUByte.bind(t),d=t.readBits.bind(t),c=t.readUEG.bind(t),h=t.readBoolean.bind(t),f=t.skipBits.bind(t),g=t.skipEG.bind(t),p=t.skipUEG.bind(t),m=this.skipScalingList.bind(this);u();const y=u();if(d(5),f(3),u(),p(),100===y||110===y||122===y||244===y||44===y||83===y||86===y||118===y||128===y){const e=c();if(3===e&&f(1),p(),p(),f(1),h())for(r=3!==e?8:12,i=0;i<r;i++)h()&&m(i<6?16:64,t)}p();const v=c();if(0===v)c();else if(1===v)for(f(1),g(),g(),n=c(),i=0;i<n;i++)g();p(),f(1);const b=c(),E=c(),T=d(1);0===T&&f(1),f(1),h()&&(a=c(),s=c(),o=c(),l=c());let S=[1,1];if(h()&&h()){switch(u()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[u()<<8|u(),u()<<8|u()]}}return{width:Math.ceil(16*(b+1)-2*a-2*s),height:(2-T)*(E+1)*16-(T?2:4)*(o+l),pixelRatio:S}}}class Ni extends Di{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,n,r){const i=this.parseNALu(e,n.data,r);let a,s=this.VideoSample,o=!1;n.data=null,s&&i.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),i.forEach(r=>{var i,l;switch(r.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:var u;if(a=!0,o)null!=(u=s)&&u.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null);s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:a=!0,null!=(i=s)&&i.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0,s.frame=!0;break;case 39:a=!0,Te(r.data,2,n.pts,t.samples);break;case 32:a=!0,e.vps||("object"!=typeof e.params&&(e.params={}),e.params=E(e.params,this.readVPS(r.data)),this.initVPS=r.data),e.vps=[r.data];break;case 33:if(a=!0,o=!0,void 0===e.vps||e.vps[0]===this.initVPS||void 0===e.sps||this.matchSPS(e.sps[0],r.data)||(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const t=this.readSPS(r.data);e.width=t.width,e.height=t.height,e.pixelRatio=t.pixelRatio,e.codec=t.codecString,e.sps=[],"object"!=typeof e.params&&(e.params={});for(const n in t.params)e.params[n]=t.params[n]}this.pushParameterSet(e.sps,r.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),s.key=!0;break;case 34:if(a=!0,"object"==typeof e.params){if(!e.pps){e.pps=[];const t=this.readPPS(r.data);for(const n in t)e.params[n]=t[n]}this.pushParameterSet(e.pps,r.data,e.vps)}break;case 35:a=!0,e.audFound=!0,null!=(l=s)&&l.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:a=!1}if(s&&a){s.units.push(r)}}),r&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(t)}getNALuType(e,t){return(126&e[t])>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&3===e[r]&&0===e[r-1]&&0===e[r-2]||(t[n]=e[r],n++);return new Uint8Array(t.buffer,0,n)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new Li(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);return{numTemporalLayers:t.readBits(3)+1,temporalIdNested:t.readBoolean()}}readSPS(e){const t=new Li(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const n=t.readBits(3);t.readBoolean();const r=t.readBits(2),i=t.readBoolean(),a=t.readBits(5),s=t.readUByte(),o=t.readUByte(),l=t.readUByte(),u=t.readUByte(),d=t.readUByte(),c=t.readUByte(),h=t.readUByte(),f=t.readUByte(),g=t.readUByte(),p=t.readUByte(),m=t.readUByte(),y=[],v=[];for(let V=0;V<n;V++)y.push(t.readBoolean()),v.push(t.readBoolean());if(n>0)for(let V=n;V<8;V++)t.readBits(2);for(let V=0;V<n;V++)y[V]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),v[V]&&t.readUByte();t.readUEG();const b=t.readUEG();3==b&&t.skipBits(1);const E=t.readUEG(),T=t.readUEG(),S=t.readBoolean();let w=0,A=0,I=0,k=0;S&&(w+=t.readUEG(),A+=t.readUEG(),I+=t.readUEG(),k+=t.readUEG());const _=t.readUEG(),R=t.readUEG(),x=t.readUEG();for(let V=t.readBoolean()?0:n;V<=n;V++)t.skipUEG(),t.skipUEG(),t.skipUEG();t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.readBoolean()){if(t.readBoolean())for(let e=0;e<4;e++)for(let n=0;n<(3===e?2:6);n++){if(t.readBoolean()){const n=Math.min(64,1<<4+(e<<1));e>1&&t.readEG();for(let e=0;e<n;e++)t.readEG()}else t.readUEG()}}t.readBoolean(),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const C=t.readUEG();let D=0;for(let V=0;V<C;V++){let e=!1;if(0!==V&&(e=t.readBoolean()),e){V===C&&t.readUEG(),t.readBoolean(),t.readUEG();let e=0;for(let n=0;n<=D;n++){const n=t.readBoolean();let r=!1;n||(r=t.readBoolean()),(n||r)&&e++}D=e}else{const e=t.readUEG(),n=t.readUEG();D=e+n;for(let r=0;r<e;r++)t.readUEG(),t.readBoolean();for(let r=0;r<n;r++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const e=t.readUEG();for(let n=0;n<e;n++){for(let e=0;e<x+4;e++)t.readBits(1);t.readBits(1)}}let L=0,M=1,N=1,P=!0,O=1,F=0;t.readBoolean(),t.readBoolean();let U=!1;if(t.readBoolean()){if(t.readBoolean()){const e=t.readUByte();e>0&&e<16?(M=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][e-1],N=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][e-1]):255===e&&(M=t.readBits(16),N=t.readBits(16))}t.readBoolean()&&t.readBoolean();if(t.readBoolean()){t.readBits(3),t.readBoolean();t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())}t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),U=t.readBoolean(),U&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG());if(t.readBoolean()){O=t.readBits(32),F=t.readBits(32);t.readBoolean()&&t.readUEG();if(t.readBoolean()){const e=t.readBoolean(),r=t.readBoolean();let i=!1;(e||r)&&(i=t.readBoolean(),i&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),i&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let a=0;a<=n;a++){P=t.readBoolean();let n=!1;P||t.readBoolean()?t.readEG():n=t.readBoolean();const a=n?1:t.readUEG()+1;if(e)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(r)for(let e=0;e<a;e++)t.readUEG(),t.readUEG(),i&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),L=t.readUEG())}let z=E,B=T;if(S){let e=1,t=1;1===b?e=t=2:2==b&&(e=2),z=E-e*A-e*w,B=T-t*k-t*I}const j=r?["A","B","C"][r]:"",q=s<<24|o<<16|l<<8|u;let G=0;for(let V=0;V<32;V++)G=(G|(q>>V&1)<<31-V)>>>0;let H=G.toString(16);1===a&&"2"===H&&(H="6");return{codecString:`hvc1.${j}${a}.${H}.${i?"H":"L"}${m}.B0`,params:{general_tier_flag:i,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[s,o,l,u],general_constraint_indicator_flags:[d,c,h,f,g,p],general_level_idc:m,bit_depth:_+8,bit_depth_luma_minus8:_,bit_depth_chroma_minus8:R,min_spatial_segmentation_idc:L,chroma_format_idc:b,frame_rate:{fixed:P,fps:F/O}},width:z,height:B,pixelRatio:[M,N]}}readPPS(e){const t=new Li(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2);t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const n=t.readBoolean(),r=t.readBoolean();let i=1;return r&&n?i=0:r?i=3:n&&(i=2),{parallelismType:i}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Pi=188;class Oi{constructor(e,t,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,t){const n=Oi.syncOffset(e);return n>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),-1!==n}static syncOffset(e){const t=e.length;let n=Math.min(940,t-Pi)+1,r=0;for(;r<n;){let i=!1,a=-1,s=0;for(let o=r;o<t;o+=Pi){if(71!==e[o]||t-o!==Pi&&71!==e[o+Pi]){if(s)return-1;break}if(s++,-1===a&&(a=o,0!==a&&(n=Math.min(a+18612,e.length-Pi)+1)),i||(i=0===Fi(e,o)),i&&s>1&&(0===a&&s>2||o+Pi>n))return a}r++}return-1}static createTrack(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:te[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}}resetInitSegment(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Oi.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=Oi.createTrack("audio",r),this._id3Track=Oi.createTrack("id3"),this._txtTrack=Oi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,r=!1){let i;n||(this.sampleAes=null);const a=this._videoTrack,s=this._audioTrack,o=this._id3Track,l=this._txtTrack;let u=a.pid,d=a.pesData,c=s.pid,h=o.pid,f=s.pesData,g=o.pesData,p=null,m=this.pmtParsed,y=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=ye(this.remainderData,e)).length,this.remainderData=null),v<Pi&&!r)return this.remainderData=e,{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};const b=Math.max(0,Oi.syncOffset(e));v-=(v-b)%Pi,v<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));let E=0;for(let S=b;S<v;S+=Pi)if(71===e[S]){const t=!!(64&e[S+1]),r=Fi(e,S);let v;if((48&e[S+3])>>4>1){if(v=S+5+e[S+4],v===S+Pi)continue}else v=S+4;switch(r){case u:t&&(d&&(i=qi(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),null!==this.videoParser&&this.videoParser.parsePES(a,l,i,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(v,S+Pi)),d.size+=S+Pi-v);break;case c:if(t){if(f&&(i=qi(f,this.logger)))switch(s.segmentCodec){case"aac":this.parseAACPES(s,i);break;case"mp3":this.parseMPEGPES(s,i);break;case"ac3":this.parseAC3PES(s,i)}f={data:[],size:0}}f&&(f.data.push(e.subarray(v,S+Pi)),f.size+=S+Pi-v);break;case h:t&&(g&&(i=qi(g,this.logger))&&this.parseID3PES(o,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(v,S+Pi)),g.size+=S+Pi-v);break;case 0:t&&(v+=e[v]+1),y=this._pmtId=Ui(e,v);break;case y:{t&&(v+=e[v]+1);const r=zi(e,v,this.typeSupported,n,this.observer,this.logger);u=r.videoPid,u>0&&(a.pid=u,a.segmentCodec=r.segmentVideoCodec),c=r.audioPid,c>0&&(s.pid=c,s.segmentCodec=r.segmentAudioCodec),h=r.id3Pid,h>0&&(o.pid=h),null===p||m||(this.logger.warn(`MPEG-TS PMT found at ${S} after unknown PID '${p}'. Backtracking to sync byte @${b} to parse all TS packets.`),p=null,S=b-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:p=r}}else E++;E>0&&Bi(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,s.pesData=f,o.pesData=g;const T={audioTrack:s,videoTrack:a,id3Track:o,textTrack:l};return r&&this.extractRemainingSamples(T),T}flush(){const{remainderData:e}=this;let t;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:r,textTrack:i}=e,a=n.pesData,s=t.pesData,o=r.pesData;let l;if(a&&(l=qi(a,this.logger))?(this.readyVideoParser(n.segmentCodec),null!==this.videoParser&&(this.videoParser.parsePES(n,i,l,!0),n.pesData=null)):n.pesData=a,s&&(l=qi(s,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,l);break;case"mp3":this.parseMPEGPES(t,l);break;case"ac3":this.parseAC3PES(t,l)}t.pesData=null}else null!=s&&s.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=s;o&&(l=qi(o,this.logger))?(this.parseID3PES(r,l),r.pesData=null):r.pesData=o}demuxSampleAes(e,t,n){const r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new Ci(this.observer,this.config,t);return this.decrypt(r,i)}readyVideoParser(e){null===this.videoParser&&("avc"===e?this.videoParser=new Mi:"hevc"===e&&(this.videoParser=new Ni))}decrypt(e,t){return new Promise(n=>{const{audioTrack:r,videoTrack:i}=e;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,()=>{i.samples?t.decryptAvcSamples(i.samples,0,0,()=>{n(e)}):n(e)}):i.samples&&t.decryptAvcSamples(i.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let n=0;const r=this.aacOverFlow;let i,a,s,o=t.data;if(r){this.aacOverFlow=null;const t=r.missing,i=r.sample.unit.byteLength;if(-1===t)o=ye(r.sample.unit,o);else{const a=i-t;r.sample.unit.set(o.subarray(0,t),a),e.samples.push(r.sample),n=r.missing}}for(i=n,a=o.length;i<a-1&&!Qr(o,i);i++);if(i!==n){let e;const t=i<a-1;if(e=t?`AAC PES did not start with ADTS header,offset:${i}`:"No ADTS header found in AAC PES",Bi(this.observer,new Error(e),t,this.logger),!t)return}if(Zr(e,this.observer,o,i,this.audioCodec),void 0!==t.pts)s=t.pts;else{if(!r)return void this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");{const t=ei(e.samplerate);s=r.sample.pts+t}}let l,u=0;for(;i<a;){if(l=ti(e,o,i,s,u),i+=l.length,l.missing){this.aacOverFlow=l;break}for(u++;i<a-1&&!Qr(o,i);i++);}}parseMPEGPES(e,t){const n=t.data,r=n.length;let i=0,a=0;const s=t.pts;if(void 0!==s)for(;a<r;)if(wi(n,a)){const t=Ei(e,n,a,s,i);if(!t)break;a+=t.length,i++}else a++;else this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseAC3PES(e,t){{const n=t.data,r=t.pts;if(void 0===r)return void this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");const i=n.length;let a,s=0,o=0;for(;o<i&&(a=_i(e,n,o,r,s++))>0;)o+=a}}parseID3PES(e,t){if(void 0===t.pts)return void this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");const n=E({},t,{type:this._videoTrack?ci.emsg:ci.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function Fi(e,t){return((31&e[t+1])<<8)+e[t+2]}function Ui(e,t){return(31&e[t+10])<<8|e[t+11]}function zi(e,t,n,r,i,a){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<o;){const o=Fi(e,t),l=(15&e[t+3])<<8|e[t+4];switch(e[t]){case 207:if(!r){ji("ADTS AAC",a);break}case 15:-1===s.audioPid&&(s.audioPid=o);break;case 21:-1===s.id3Pid&&(s.id3Pid=o);break;case 219:if(!r){ji("H.264",a);break}case 27:-1===s.videoPid&&(s.videoPid=o);break;case 3:case 4:n.mpeg||n.mp3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="mp3"):a.log("MPEG audio found, not supported in this browser");break;case 193:if(!r){ji("AC-3",a);break}case 129:n.ac3?-1===s.audioPid&&(s.audioPid=o,s.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(-1===s.audioPid&&l>0){let r=t+5,i=l;for(;i>2;){if(106===e[r])!0!==n.ac3?a.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=o,s.segmentAudioCodec="ac3");const t=e[r+1]+2;r+=t,i-=t}}break;case 194:case 135:return Bi(i,new Error("Unsupported EC-3 in M2TS found"),void 0,a),s;case 36:-1===s.videoPid&&(s.videoPid=o,s.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"))}t+=l+5}return s}function Bi(e,t,n,r){r.warn(`parsing error: ${t.message}`),e.emit(u.ERROR,u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function ji(e,t){t.log(`${e} with AES-128-CBC encryption found in unencrypted stream`)}function qi(e,t){let n,r,i,a,s,o=0;const l=e.data;if(!e||0===e.size)return null;for(;l[0].length<19&&l.length>1;)l[0]=ye(l[0],l[1]),l.splice(1,1);n=l[0];if(1===(n[0]<<16)+(n[1]<<8)+n[2]){if(r=(n[4]<<8)+n[5],r&&r>e.size-6)return null;const u=n[7];192&u&&(a=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2,64&u?(s=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2,a-s>54e5&&(t.warn(`${Math.round((a-s)/9e4)}s delta between PTS and DTS, align them`),a=s)):s=a),i=n[8];let d=i+9;if(e.size<=d)return null;e.size-=d;const c=new Uint8Array(e.size);for(let e=0,t=l.length;e<t;e++){n=l[e];let t=n.byteLength;if(d){if(d>t){d-=t;continue}n=n.subarray(d),t-=d,d=0}c.set(n,o),o+=t}return r&&(r-=i+3),{data:c,pts:a,dts:s,len:r}}return null}class Gi{static getSilentFrame(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Hi=Math.pow(2,32)-1;class Vi{static init(){let e;for(e in Vi.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},Vi.types)Vi.types.hasOwnProperty(e)&&(Vi.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);Vi.HDLR_TYPES={video:t,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);Vi.STTS=Vi.STSC=Vi.STCO=i,Vi.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Vi.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),Vi.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),Vi.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),o=new Uint8Array([0,0,0,1]);Vi.FTYP=Vi.box(Vi.types.ftyp,a,o,a,s),Vi.DINF=Vi.box(Vi.types.dinf,Vi.box(Vi.types.dref,r))}static box(e,...t){let n=8,r=t.length;const i=r;for(;r--;)n+=t[r].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),r=0,n=8;r<i;r++)a.set(t[r],n),n+=t[r].byteLength;return a}static hdlr(e){return Vi.box(Vi.types.hdlr,Vi.HDLR_TYPES[e])}static mdat(e){return Vi.box(Vi.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Hi+1)),r=Math.floor(t%(Hi+1));return Vi.box(Vi.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))}static mdia(e){return Vi.box(Vi.types.mdia,Vi.mdhd(e.timescale||0,e.duration||0),Vi.hdlr(e.type),Vi.minf(e))}static mfhd(e){return Vi.box(Vi.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}static minf(e){return"audio"===e.type?Vi.box(Vi.types.minf,Vi.box(Vi.types.smhd,Vi.SMHD),Vi.DINF,Vi.stbl(e)):Vi.box(Vi.types.minf,Vi.box(Vi.types.vmhd,Vi.VMHD),Vi.DINF,Vi.stbl(e))}static moof(e,t,n){return Vi.box(Vi.types.moof,Vi.mfhd(e),Vi.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=Vi.trak(e[t]);return Vi.box.apply(null,[Vi.types.moov,Vi.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(Vi.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=Vi.trex(e[t]);return Vi.box.apply(null,[Vi.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Hi+1)),r=Math.floor(t%(Hi+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Vi.box(Vi.types.mvhd,i)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let r,i;for(r=0;r<t.length;r++)i=t[r].flags,n[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return Vi.box(Vi.types.sdtp,n)}static stbl(e){return Vi.box(Vi.types.stbl,Vi.stsd(e),Vi.box(Vi.types.stts,Vi.STTS),Vi.box(Vi.types.stsc,Vi.STSC),Vi.box(Vi.types.stsz,Vi.STSZ),Vi.box(Vi.types.stco,Vi.STCO))}static avc1(e){let t,n,r,i=[],a=[];for(t=0;t<e.sps.length;t++)n=e.sps[t],r=n.byteLength,i.push(r>>>8&255),i.push(255&r),i=i.concat(Array.prototype.slice.call(n));for(t=0;t<e.pps.length;t++)n=e.pps[t],r=n.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(n));const s=Vi.box(Vi.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(a))),o=e.width,l=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return Vi.box(Vi.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,o>>8&255,255&o,l>>8&255,255&l,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,Vi.box(Vi.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Vi.box(Vi.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,d>>24,d>>16&255,d>>8&255,255&d])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,255&t,0,0])}static mp4a(e){return Vi.box(Vi.types.mp4a,Vi.audioStsd(e),Vi.box(Vi.types.esds,Vi.esds(e)))}static mp3(e){return Vi.box(Vi.types[".mp3"],Vi.audioStsd(e))}static ac3(e){return Vi.box(Vi.types["ac-3"],Vi.audioStsd(e),Vi.box(Vi.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if("audio"===e.type){if("aac"===t)return Vi.box(Vi.types.stsd,Vi.STSD,Vi.mp4a(e));if("ac3"===t&&e.config)return Vi.box(Vi.types.stsd,Vi.STSD,Vi.ac3(e));if("mp3"===t&&"mp3"===e.codec)return Vi.box(Vi.types.stsd,Vi.STSD,Vi.mp3(e))}else{if(!e.pps||!e.sps)throw new Error("video track missing pps or sps");if("avc"===t)return Vi.box(Vi.types.stsd,Vi.STSD,Vi.avc1(e));if("hevc"===t&&e.vps)return Vi.box(Vi.types.stsd,Vi.STSD,Vi.hvc1(e))}throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,i=e.height||0,a=Math.floor(n/(Hi+1)),s=Math.floor(n%(Hi+1));return Vi.box(Vi.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}static traf(e,t){const n=Vi.sdtp(e),r=e.id,i=Math.floor(t/(Hi+1)),a=Math.floor(t%(Hi+1));return Vi.box(Vi.types.traf,Vi.box(Vi.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),Vi.box(Vi.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),Vi.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,Vi.box(Vi.types.trak,Vi.tkhd(e),Vi.mdia(e))}static trex(e){const t=e.id;return Vi.box(Vi.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],r=n.length,i=12+16*r,a=new Uint8Array(i);let s,o,l,u,d,c;for(t+=8+i,a.set(["video"===e.type?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),s=0;s<r;s++)o=n[s],l=o.duration,u=o.size,d=o.flags,c=o.cts,a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*s);return Vi.box(Vi.types.trun,a)}static initSegment(e){Vi.types||Vi.init();const t=Vi.moov(e);return ye(Vi.FTYP,t)}static hvc1(e){const t=e.params,n=[e.vps,e.sps,e.pps],r=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),3|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),n.length]);let i=r.length;for(let h=0;h<n.length;h+=1){i+=3;for(let e=0;e<n[h].length;e+=1)i+=2+n[h][e].length}const a=new Uint8Array(i);a.set(r,0),i=r.length;const s=n.length-1;for(let h=0;h<n.length;h+=1){a.set(new Uint8Array([32+h|(h===s?128:0),0,n[h].length]),i),i+=3;for(let e=0;e<n[h].length;e+=1)a.set(new Uint8Array([n[h][e].length>>8,255&n[h][e].length]),i),i+=2,a.set(n[h][e],i),i+=n[h][e].length}const o=Vi.box(Vi.types.hvcC,a),l=e.width,u=e.height,d=e.pixelRatio[0],c=e.pixelRatio[1];return Vi.box(Vi.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,Vi.box(Vi.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),Vi.box(Vi.types.pasp,new Uint8Array([d>>24,d>>16&255,d>>8&255,255&d,c>>24,c>>16&255,c>>8&255,255&c])))}}Vi.types=void 0,Vi.HDLR_TYPES=void 0,Vi.STTS=void 0,Vi.STSC=void 0,Vi.STCO=void 0,Vi.STSZ=void 0,Vi.VMHD=void 0,Vi.SMHD=void 0,Vi.STSD=void 0,Vi.FTYP=void 0,Vi.DINF=void 0;function Ki(e,t,n=1,r=!1){const i=e*t*n;return r?Math.round(i):i}function $i(e,t=!1){return Ki(e,1e3,1/9e4,t)}function Yi(e){const{baseTime:t,timescale:n,trackId:r}=e;return`${t/n} (${t}/${n}) trackId: ${r}`}let Wi,Xi=null,Qi=null;function Ji(e,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class Zi extends w{constructor(e,t,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===Xi){const e=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Xi=e?parseInt(e[1]):0}if(null===Qi){const e=navigator.userAgent.match(/Safari\/(\d+)/i);Qi=e?parseInt(e[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;t&&e&&e.trackId===t.trackId&&e.baseTime===t.baseTime&&e.timescale===t.timescale||this.log(`Reset initPTS: ${t?Yi(t):t} > ${e?Yi(e):e}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,r=e.reduce((e,r)=>{let i=r.pts,a=i-e;return a<-4294967296&&(t=!0,i=ea(i,n),a=i-e),a>0?e:i},n);return t&&this.debug("PTS rollover detected"),r}remux(e,t,n,r,i,a,s,o){let l,u,d,c,h,f,g=i,m=i;const y=e.pid>-1,v=t.pid>-1,b=t.samples.length,E=e.samples.length>0,T=s&&b>0||b>1;if((!y||E)&&(!v||T)||this.ISGenerated||s){if(this.ISGenerated){var S,w,A,I;const e=this.videoTrackConfig;(e&&(t.width!==e.width||t.height!==e.height||(null==(S=t.pixelRatio)?void 0:S[0])!==(null==(w=e.pixelRatio)?void 0:w[0])||(null==(A=t.pixelRatio)?void 0:A[1])!==(null==(I=e.pixelRatio)?void 0:I[1]))||!e&&T||null===this.nextAudioTs&&E)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,t,i,a));const n=this.isVideoContiguous;let r,s=-1;if(T&&(s=function(e){for(let t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!n&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,s>0){this.warn(`Dropped ${s} out of ${b} video samples due to a missing keyframe`);const e=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(s),t.dropped+=s,m+=(t.samples[0].pts-e)/t.inputTimeScale,r=m}else-1===s&&(this.warn(`No keyframe found out of ${b} video samples`),f=!1);if(this.ISGenerated){if(E&&T){const n=this.getVideoStartPts(t.samples),r=(ea(e.samples[0].pts,n)-n)/t.inputTimeScale;g+=Math.max(0,r),m+=Math.max(0,-r)}if(E){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,t,i,a)),u=this.remuxAudio(e,g,this.isAudioContiguous,a,v||T||o===p?m:void 0),T){const r=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,t,i,a)),l=this.remuxVideo(t,m,n,r)}}else T&&(l=this.remuxVideo(t,m,n,0));l&&(l.firstKeyFrame=s,l.independent=-1!==s,l.firstKeyFramePTS=r)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(h=ta(n,i,this._initPTS,this._initDTS)),r.samples.length&&(c=na(r,i,this._initPTS))),{audio:u,video:l,initSegment:d,independent:f,text:c,id3:h}}computeInitPts(e,t,n,r){const i=Math.round(n*t);let a=ea(e,i);if(a<i+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(i-a)/t} ${r}`);a<i+t;)a+=8589934592;return a-i}generateIS(e,t,n,r){const i=e.samples,a=t.samples,s=this.typeSupported,o={},l=this._initPTS;let u,d,c,h=!l||r,f="audio/mp4",g=-1;if(h&&(u=d=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":s.mpeg?(f="audio/mpeg",e.codec=""):s.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3"}o.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&s.mpeg?new Uint8Array(0):Vi.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(g=e.id,c=e.inputTimeScale,l&&c===l.timescale?h=!1:u=d=this.computeInitPts(i[0].pts,c,n,"audio"))}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,o.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Vi.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(g=t.id,c=t.inputTimeScale,l&&c===l.timescale)h=!1;else{const e=this.getVideoStartPts(a),t=ea(a[0].dts,e),r=this.computeInitPts(t,c,n,"video"),i=this.computeInitPts(e,c,n,"video");d=Math.min(d,r),u=Math.min(u,i)}this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(o).length)return this.ISGenerated=!0,h?(l&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${u/c} != initPTS: ${l.baseTime/l.timescale} (${l.baseTime}/${l.timescale}) trackId: ${l.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${u/c} (${u}/${c}) trackId: ${g}`),this._initPTS={baseTime:u,timescale:c,trackId:g},this._initDTS={baseTime:d,timescale:c,trackId:g}):u=c=void 0,{tracks:o,initPTS:u,timescale:c,trackId:g}}remuxVideo(e,t,n,r){const i=e.inputTimeScale,a=e.samples,s=[],d=a.length,c=this._initPTS,h=c.baseTime*i/c.timescale;let f,g,p=this.nextVideoTs,m=8,y=this.videoSampleDuration,v=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,T=!1;if(!n||null===p){const e=h+t*i,r=a[0].pts-ea(a[0].dts,a[0].pts);Xi&&null!==p&&Math.abs(e-r-(p+h))<15e3?n=!0:p=e-r-h}const S=p+h;for(let o=0;o<d;o++){const e=a[o];e.pts=ea(e.pts,S),e.dts=ea(e.dts,S),e.dts<a[o>0?o-1:o].dts&&(T=!0)}T&&a.sort(function(e,t){const n=e.dts-t.dts,r=e.pts-t.pts;return n||r}),f=a[0].dts,g=a[a.length-1].dts;const w=g-f,A=w?Math.round(w/(d-1)):y||e.inputTimeScale/30;if(n){const n=f-S,r=n>A,i=n<-1;if((r||i)&&(r?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${$i(n,!0)} ms (${n}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${$i(-n,!0)} ms (${n}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!i||S>=a[0].pts||Xi)){f=S;const e=a[0].pts-n;if(r)a[0].dts=f,a[0].pts=e;else{let t=!0;for(let r=0;r<a.length&&!(a[r].dts>e&&t);r++){const e=a[r].pts;if(a[r].dts-=n,a[r].pts-=n,r<a.length-1){const n=a[r+1].pts;t=n<=a[r].pts==n<=e}}}this.log(`Video: Initial PTS/DTS adjusted: ${$i(e,!0)}/${$i(f,!0)}, delta: ${$i(n,!0)} ms`)}}f=Math.max(0,f);let I=0,k=0,_=f;for(let o=0;o<d;o++){const e=a[o],t=e.units,n=t.length;let r=0;for(let i=0;i<n;i++)r+=t[i].data.length;k+=r,I+=n,e.length=r,e.dts<_?(e.dts=_,_+=A/4|0||1):_=e.dts,v=Math.min(e.pts,v),b=Math.max(e.pts,b)}g=a[d-1].dts;const R=k+4*I+8;let x;try{x=new Uint8Array(R)}catch(U){return void this.observer.emit(u.ERROR,u.ERROR,{type:o.MUX_ERROR,details:l.REMUX_ALLOC_ERROR,fatal:!1,error:U,bytes:R,reason:`fail allocating video mdat ${R}`})}const C=new DataView(x.buffer);C.setUint32(0,R),x.set(Vi.types.mdat,4);let D=!1,L=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY,P=Number.NEGATIVE_INFINITY;for(let o=0;o<d;o++){const e=a[o],t=e.units;let n,l=0;for(let r=0,i=t.length;r<i;r++){const e=t[r],n=e.data,i=e.data.byteLength;C.setUint32(m,i),m+=4,x.set(n,m),m+=i,l+=4+i}if(o<d-1)y=a[o+1].dts-e.dts,n=a[o+1].pts-e.pts;else{const t=this.config,s=o>0?e.dts-a[o-1].dts:A;if(n=o>0?e.pts-a[o-1].pts:A,t.stretchShortVideoTrack&&null!==this.nextAudioTs){const n=Math.floor(t.maxBufferHole*i),a=(r?v+r*i:this.nextAudioTs+h)-e.pts;a>n?(y=a-s,y<0?y=s:D=!0,this.log(`It is approximately ${a/90} ms to the next segment; using duration ${y/90} ms for the last video frame.`)):y=s}else y=s}const u=Math.round(e.pts-e.dts);L=Math.min(L,y),N=Math.max(N,y),M=Math.min(M,n),P=Math.max(P,n),s.push(Ji(e.key,y,l,u))}if(s.length)if(Xi){if(Xi<70){const e=s[0].flags;e.dependsOn=2,e.isNonSync=0}}else if(Qi&&P-M<N-L&&A/N<.025&&0===s[0].cts){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let e=f;for(let t=0,n=s.length;t<n;t++){const r=e+s[t].duration,i=e+s[t].cts;if(t<n-1){const e=r+s[t+1].cts;s[t].duration=e-i}else s[t].duration=t?s[t-1].duration:A;s[t].cts=0,e=r}}y=D||!y?A:y;const O=g+y;this.nextVideoTs=p=O-h,this.videoSampleDuration=y,this.isVideoContiguous=!0;const F={data1:Vi.moof(e.sequenceNumber++,f,E(e,{samples:s})),data2:x,startPTS:(v-h)/i,endPTS:(b+y-h)/i,startDTS:(f-h)/i,endDTS:p/i,type:"video",hasAudio:!1,hasVideo:!0,nb:s.length,dropped:e.dropped};return e.samples=[],e.dropped=0,F}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return 1152;case"ac3":return 1536;default:return 1024}}remuxAudio(e,t,n,r,i){const a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),d=this.getSamplesPerFrame(e),c=d*s,h=this._initPTS,f="mp3"===e.segmentCodec&&this.typeSupported.mpeg,g=[],p=void 0!==i;let m=e.samples,y=f?0:8,v=this.nextAudioTs||-1;const b=h.baseTime*a/h.timescale,T=b+t*a;if(this.isAudioContiguous=n=n||m.length&&v>0&&(r&&Math.abs(T-(v+b))<9e3||Math.abs(ea(m[0].pts,T)-(v+b))<20*c),m.forEach(function(e){e.pts=ea(e.pts,T)}),!n||v<0){const e=m.length;if(m=m.filter(e=>e.pts>=0),e!==m.length&&this.warn(`Removed ${m.length-e} of ${e} samples (initPTS ${b} / ${a})`),!m.length)return;v=0===i?0:r&&!p?Math.max(0,T-b):m[0].pts-b}if("aac"===e.segmentCodec){const t=this.config.maxAudioFramesDrift;for(let n=0,r=v+b;n<m.length;n++){const i=m[n],s=i.pts,o=s-r,l=Math.abs(1e3*o/a);if(o<=-t*c&&p)0===n&&(this.warn(`Audio frame @ ${(s/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*o/a)} ms.`),this.nextAudioTs=v=s-b,r=s);else if(o>=t*c&&l<1e4&&p){let t=Math.round(o/c);for(r=s-t*c;r<0&&t&&c;)t--,r+=c;0===n&&(this.nextAudioTs=v=r-b),this.warn(`Injecting ${t} audio frames @ ${((r-b)/a).toFixed(3)}s due to ${Math.round(1e3*o/a)} ms gap.`);for(let a=0;a<t;a++){let t=Gi.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);t||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),t=i.unit.subarray()),m.splice(n,0,{unit:t,pts:r}),r+=c,n++}}i.pts=r,r+=c}}let S,w=null,A=null,I=0,k=m.length;for(;k--;)I+=m[k].unit.byteLength;for(let E=0,N=m.length;E<N;E++){const t=m[E],r=t.unit;let i=t.pts;if(null!==A){g[E-1].duration=Math.round((i-A)/s)}else{if(n&&"aac"===e.segmentCodec&&(i=v+b),w=i,!(I>0))return;I+=y;try{S=new Uint8Array(I)}catch(M){return void this.observer.emit(u.ERROR,u.ERROR,{type:o.MUX_ERROR,details:l.REMUX_ALLOC_ERROR,fatal:!1,error:M,bytes:I,reason:`fail allocating audio mdat ${I}`})}if(!f){new DataView(S.buffer).setUint32(0,I),S.set(Vi.types.mdat,4)}}S.set(r,y);const a=r.byteLength;y+=a,g.push(Ji(!0,d,a,0)),A=i}const _=g.length;if(!_)return;const R=g[g.length-1];v=A-b,this.nextAudioTs=v+s*R.duration;const x=f?new Uint8Array(0):Vi.moof(e.sequenceNumber++,w/s,E({},e,{samples:g}));e.samples=[];const C=(w-b)/a,D=v/a,L={data1:x,data2:S,startPTS:C,endPTS:D,startDTS:C,endDTS:D,type:"audio",hasAudio:!0,hasVideo:!1,nb:_};return this.isAudioContiguous=!0,L}}function ea(e,t){let n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function ta(e,t,n,r){const i=e.samples.length;if(!i)return;const a=e.inputTimeScale;for(let o=0;o<i;o++){const i=e.samples[o];i.pts=ea(i.pts-n.baseTime*a/n.timescale,t*a)/a,i.dts=ea(i.dts-r.baseTime*a/r.timescale,t*a)/a}const s=e.samples;return e.samples=[],{samples:s}}function na(e,t,n){const r=e.samples.length;if(!r)return;const i=e.inputTimeScale;for(let s=0;s<r;s++){const r=e.samples[s];r.pts=ea(r.pts-n.baseTime*i/n.timescale,t*i)/i}e.samples.sort((e,t)=>e.pts-t.pts);const a=e.samples;return e.samples=[],{samples:a}}function ra(e,t,n=!1){return void 0!==(null==e?void 0:e.start)?(e.start+(n?e.duration:0))/e.timescale:t}function ia(e,t,n){const r=e.codec;if(r&&r.length>4)return r;if(t===V){if("ec-3"===r||"ac-3"===r||"alac"===r)return r;if("fLaC"===r||"Opus"===r){return Pe(r,!1)}return n.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"}return n.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1"}try{Wi=self.performance.now.bind(self.performance)}catch(Vl){Wi=Date.now}const aa=[{demux:class{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,r){const i=this.videoTrack=hi("video",1),a=this.audioTrack=hi("audio",1),s=this.txtTrack=hi("text",1);if(this.id3Track=hi("id3",1),this.timeOffset=0,null==e||!e.byteLength)return;const o=ue(e);if(o.video){const{id:e,timescale:t,codec:n,supplemental:r}=o.video;i.id=e,i.timescale=s.timescale=t,i.codec=n,i.supplemental=r}if(o.audio){const{id:e,timescale:t,codec:n}=o.audio;a.id=e,a.timescale=t,a.codec=n}s.id=te.text,i.sampleDuration=0,i.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return function(e){const t=e.byteLength;for(let n=0;n<t;){const r=ie(e,n);if(r>8&&109===e[n+4]&&111===e[n+5]&&111===e[n+6]&&102===e[n+7])return!0;n=r>1?n+r:t}return!1}(e)}demux(e,t){this.timeOffset=t;let n=e;const r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=ye(this.remainderData,e));const t=function(e){const t={valid:null,remainder:null},n=oe(e,["moof"]);if(n.length<2)return t.remainder=e,t;const r=n[n.length-1];return t.valid=e.slice(0,r.byteOffset-8),t.remainder=e.slice(r.byteOffset-8),t}(n);this.remainderData=t.remainder,r.samples=t.valid||new Uint8Array}else r.samples=n;const a=this.extractID3Track(r,t);return i.samples=ve(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(t,this.timeOffset);return n.samples=ve(e,t),{videoTrack:t,audioTrack:hi(),id3Track:r,textTrack:hi()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=oe(e.samples,["emsg"]);i&&i.forEach(e=>{const i=function(e){const t=e[0];let n="",i="",a=0,s=0,o=0,l=0,u=0,d=0;if(0===t){for(;"\0"!==ne(e.subarray(d,d+1));)n+=ne(e.subarray(d,d+1)),d+=1;for(n+=ne(e.subarray(d,d+1)),d+=1;"\0"!==ne(e.subarray(d,d+1));)i+=ne(e.subarray(d,d+1)),d+=1;i+=ne(e.subarray(d,d+1)),d+=1,a=ie(e,12),s=ie(e,16),l=ie(e,20),u=ie(e,24),d=28}else if(1===t){d+=4,a=ie(e,d),d+=4;const t=ie(e,d);d+=4;const s=ie(e,d);for(d+=4,o=2**32*t+s,r(o)||(o=Number.MAX_SAFE_INTEGER,x.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),l=ie(e,d),d+=4,u=ie(e,d),d+=4;"\0"!==ne(e.subarray(d,d+1));)n+=ne(e.subarray(d,d+1)),d+=1;for(n+=ne(e.subarray(d,d+1)),d+=1;"\0"!==ne(e.subarray(d,d+1));)i+=ne(e.subarray(d,d+1)),d+=1;i+=ne(e.subarray(d,d+1)),d+=1}return{schemeIdUri:n,value:i,timeScale:a,presentationTime:o,presentationTimeDelta:s,eventDuration:l,id:u,payload:e.subarray(d,e.byteLength)}}(e);if(Ri.test(i.schemeIdUri)){const e=xi(i,t);let r=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;r<=.001&&(r=Number.POSITIVE_INFINITY);const a=i.payload;n.samples.push({data:a,len:a.byteLength,dts:e,pts:e,type:ci.emsg,duration:r})}else if(this.config.enableEmsgKLVMetadata&&i.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const e=xi(i,t);n.samples.push({data:i.payload,len:i.payload.byteLength,dts:e,pts:e,type:ci.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}},remux:class extends w{constructor(e,t,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,n,r){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:n,videoCodec:r}=this;if(null==e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const{audio:i,video:a}=this.initData=ue(e);if(t)!function(e,t){if(!e||!t)return;const n=t.keyId;n&&t.isCommonEncryption&&pe(e,(e,t)=>{const r=e.subarray(8,24);r.some(e=>0!==e)||(x.log(`[eme] Patching keyId in 'enc${t?"a":"v"}>sinf>>tenc' box: ${M(r)} -> ${M(n)}`),e.set(n,8))})}(e,t);else{const e=i||a;null!=e&&e.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${e.codec}")!`)}i&&(n=ia(i,V,this)),a&&(r=ia(a,K,this));const s={};i&&a?s.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:i?s.audio={container:"audio/mp4",codec:n,encrypted:i.encrypted,initSegment:e,id:"audio"}:a?s.video={container:"video/mp4",codec:r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,r,i,a,s){var o,l;let{initPTS:u,lastEndTime:d}=this;const c={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};n(d)||(d=this.lastEndTime=a||0);const h=t.samples;if(!h.length)return c;const f={initPTS:void 0,timescale:void 0,trackId:void 0};let g=this.initData;if(null!=(o=g)&&o.length||(this.generateInitSegment(h),g=this.initData),null==(l=g)||!l.length)return this.warn("Failed to generate initSegment."),c;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const p=function(e,t,r){const i={},a=oe(e,["moof","traf"]);for(let s=0;s<a.length;s++){const e=a[s],o=oe(e,["tfhd"])[0],l=ie(o,4),u=t[l];if(!u)continue;i[l]||(i[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});const d=i[l],c=oe(e,["tfdt"])[0];if(c){const e=c[0];let t=ie(c,4);1===e&&(t===Z?r.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(t*=Z+1,t+=ie(c,8))),n(t)&&(!n(d.start)||t<d.start)&&(d.start=t)}const h=u.default,f=ie(o,0)|(null==h?void 0:h.flags);let g=(null==h?void 0:h.duration)||0;8&f&&(g=ie(o,2&f?12:8));const p=oe(e,["trun"]);let m=d.start||0,y=0,v=g;for(let t=0;t<p.length;t++){const e=p[t],n=ie(e,4),r=d.sampleCount;d.sampleCount+=n;const i=1&e[3],a=4&e[3],s=1&e[2],o=2&e[2],l=4&e[2],u=8&e[2];let c=8,h=n;for(i&&(c+=4),a&&n&&(1&e[c+1]||void 0!==d.keyFrameIndex||(d.keyFrameIndex=r),c+=4,s?(v=ie(e,c),c+=4):v=g,o&&(c+=4),u&&(c+=4),m+=v,y+=v,h--);h--;)s?(v=ie(e,c),c+=4):v=g,o&&(c+=4),l&&(1&e[c+1]||void 0===d.keyFrameIndex&&(d.keyFrameIndex=d.sampleCount-(h+1),d.keyFrameStart=m),c+=4),u&&(c+=4),m+=v,y+=v;!y&&g&&(y+=g*n)}d.duration+=y}if(!Object.keys(i).some(e=>i[e].duration)){let t=1/0,r=0;const a=oe(e,["sidx"]);for(let e=0;e<a.length;e++){const n=le(a[e]);if(null!=n&&n.references){t=Math.min(t,n.earliestPresentationTime/n.timescale);const e=n.references.reduce((e,t)=>e+t.info.duration||0,0);r=Math.max(r,e+n.earliestPresentationTime/n.timescale)}}r&&n(r)&&Object.keys(i).forEach(e=>{i[e].duration||(i[e].duration=r*i[e].timescale-i[e].start)})}return i}(h,g,this),m=g.audio?p[g.audio.id]:null,y=g.video?p[g.video.id]:null,v=ra(y,1/0),b=ra(m,1/0),E=ra(y,0,!0),T=ra(m,0,!0);let S=a,w=0;const A=m&&(!y||!u&&b<v||u&&u.trackId===g.audio.id),I=A?m:y;if(I){const e=I.timescale,t=I.start-a*e,n=A?g.audio.id:g.video.id;S=I.start/e,w=A?T-b:E-v,!s&&u||!function(e,t,n,r){if(null===e)return!0;const i=Math.max(r,1),a=t-e.baseTime/e.timescale;return Math.abs(a-n)>i}(u,S,a,w)&&e===u.timescale||(u&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${a} ${t/e} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${S-a} (${t}/${e}) trackId: ${n}`),u=null,f.initPTS=t,f.timescale=e,f.trackId=n)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);u?(f.initPTS=u.baseTime,f.timescale=u.timescale,f.trackId=u.trackId):(f.timescale&&void 0!==f.trackId&&void 0!==f.initPTS||(this.warn("Could not set initPTS"),f.initPTS=S,f.timescale=1,f.trackId=-1),this.initPTS=u={baseTime:f.initPTS,timescale:f.timescale,trackId:f.trackId});const k=S-u.baseTime/u.timescale,_=k+w;w>0?this.lastEndTime=_:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const R=!!g.audio,x=!!g.video;let C="";R&&(C+="audio"),x&&(C+="video");const D={data1:h,startPTS:k,startDTS:k,endPTS:_,endDTS:_,type:C,hasAudio:R,hasVideo:x,nb:1,dropped:0,encrypted:!!g.audio&&g.audio.encrypted||!!g.video&&g.video.encrypted};c.audio=R&&!x?D:void 0,c.video=x?D:void 0;const L=null==y?void 0:y.sampleCount;if(L){const e=y.keyFrameIndex,t=-1!==e;D.nb=L,D.dropped=0===e||this.isVideoContiguous?0:t?e:L,D.independent=t,D.firstKeyFrame=e,t&&y.keyFrameStart&&(D.firstKeyFramePTS=(y.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(c.independent=t),this.isVideoContiguous||(this.isVideoContiguous=t),D.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${e}/${L} dropped: ${D.dropped} start: ${D.firstKeyFramePTS||"NA"}`)}return c.initSegment=f,c.id3=ta(r,a,u,u),i.samples.length&&(c.text=na(i,a,u)),c}}},{demux:Oi,remux:Zi},{demux:class extends fi{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const n=$r(e,0);let r=(null==n?void 0:n.length)||0;if(Ai(e,r))return!1;for(let i=e.length;r<i;r++)if(Jr(e,r))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return function(e,t){return t+5<e.length}(e,t)&&Yr(e,t)&&Xr(e,t)<=e.length-t}(e,t)}appendFrame(e,t,n){Zr(e,this.observer,t,n,e.manifestCodec);const r=ti(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r}},remux:Zi},{demux:class extends fi{resetInitSegment(e,t,n,r){super.resetInitSegment(e,t,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=$r(e,0);let n=(null==t?void 0:t.length)||0;if(t&&11===e[n]&&119===e[n+1]&&void 0!==di(t)&&Ii(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if(Ai(e,n))return x.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return function(e,t){return Si(e,t)&&4<=e.length-t}(e,t)}appendFrame(e,t,n){if(null!==this.basePTS)return Ei(e,t,n,this.basePTS,this.frameIndex)}},remux:Zi}];aa.splice(2,0,{demux:ki,remux:Zi});class sa{constructor(e,t,n,r,i,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.id=i,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,r){const i=n.transmuxing;i.executeStart=Wi();let a=new Uint8Array(e);const{currentTransmuxState:s,transmuxConfig:d}=this;r&&(this.currentTransmuxState=r);const{contiguous:c,discontinuity:h,trackSwitch:f,accurateTimeOffset:g,timeOffset:p,initSegmentChange:m}=r||s,{audioCodec:y,videoCodec:v,defaultInitPts:b,duration:E,initSegmentData:T}=d,S=function(e,t){let n=null;e.byteLength>0&&null!=(null==t?void 0:t.key)&&null!==t.iv&&null!=t.method&&(n=t);return n}(a,t);if(S&&bn(S.method)){const e=this.getDecrypter(),t=En(S.method);if(!e.isSync())return this.asyncResult=!0,this.decryptionPromise=e.webCryptoDecrypt(a,S.key.buffer,S.iv.buffer,t).then(e=>{const t=this.push(e,null,n);return this.decryptionPromise=null,t}),this.decryptionPromise;{let r=e.softwareDecrypt(a,S.key.buffer,S.iv.buffer,t);if(n.part>-1){const t=e.flush();r=t?t.buffer:t}if(!r)return i.executeEnd=Wi(),oa(n);a=new Uint8Array(r)}}const w=this.needsProbing(h,f);if(w){const e=this.configureTransmuxer(a);if(e)return this.logger.warn(`[transmuxer] ${e.message}`),this.observer.emit(u.ERROR,u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_PARSING_ERROR,fatal:!1,error:e,reason:e.message}),i.executeEnd=Wi(),oa(n)}(h||f||m||w)&&this.resetInitSegment(T,y,v,E,t),(h||m||w)&&this.resetInitialTimestamp(b),c||this.resetContiguity();const A=this.transmux(a,S,p,g,n);this.asyncResult=la(A);const I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,i.executeEnd=Wi(),A}flush(e){const t=e.transmuxing;t.executeStart=Wi();const{decrypter:n,currentTransmuxState:r,decryptionPromise:i}=this;if(i)return this.asyncResult=!0,i.then(()=>this.flush(e));const a=[],{timeOffset:s}=r;if(n){const t=n.flush();t&&a.push(this.push(t.buffer,null,e))}const{demuxer:o,remuxer:l}=this;if(!o||!l){t.executeEnd=Wi();const n=[oa(e)];return this.asyncResult?Promise.resolve(n):n}const u=o.flush(s);return la(u)?(this.asyncResult=!0,u.then(t=>(this.flushRemux(a,t,e),a))):(this.flushRemux(a,u,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,t,n){const{audioTrack:r,videoTrack:i,id3Track:a,textTrack:s}=t,{accurateTimeOffset:o,timeOffset:l}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===g?"level":"track"} ${n.level}`);const u=this.remuxer.remux(r,i,a,s,l,o,!0,this.id);e.push({remuxResult:u,chunkMeta:n}),n.transmuxing.executeEnd=Wi()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,r,i){const{demuxer:a,remuxer:s}=this;a&&s&&(a.resetInitSegment(e,t,n,r),s.resetInitSegment(e,t,n,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,r,i){let a;return a=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i),a}transmuxUnencrypted(e,t,n,r){const{audioTrack:i,videoTrack:a,id3Track:s,textTrack:o}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,a,s,o,t,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,t,n,r,i){return this.demuxer.demuxSampleAes(e,t,n).then(e=>({remuxResult:this.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:r}=this;let i;for(let d=0,c=aa.length;d<c;d++){var a;if(null!=(a=aa[d].demux)&&a.probe(e,this.logger)){i=aa[d];break}}if(!i)return new Error("Failed to find demuxer by probing fragment data");const s=this.demuxer,o=this.remuxer,l=i.remux,u=i.demux;o&&o instanceof l||(this.remuxer=new l(n,t,r,this.logger)),s&&s instanceof u||(this.demuxer=new u(n,t,r,this.logger),this.probe=u.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Yt(this.config)),e}}const oa=e=>({remuxResult:{},chunkMeta:e});function la(e){return"then"in e&&e.then instanceof Function}class ua{constructor(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i||null}}class da{constructor(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}}let ca=0;class ha{constructor(e,t,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=ca++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=e=>{const t=e.data,n=this.hls;if(n&&null!=t&&t.event&&t.instanceNo===this.instanceNo)switch(t.event){case"init":{var r;const e=null==(r=this.workerContext)?void 0:r.objectURL;e&&self.URL.revokeObjectURL(e);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":n.logger[t.data.logType]&&n.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.part=this.part,t.data.id=this.id,n.trigger(t.event,t.data)}},this.onWorkerError=e=>{if(!this.hls)return;const t=new Error(`${e.message}  (${e.filename}:${e.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:t})};const i=e.config;this.hls=e,this.id=t,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const a=(e,t)=>{(t=t||{}).frag=this.frag||void 0,e===u.ERROR&&(t.parent=this.id,t.part=this.part,this.error=t.error),this.hls.trigger(e,t)};this.observer=new jr,this.observer.on(u.FRAG_DECRYPTED,a),this.observer.on(u.ERROR,a);const s=ze(i.preferManagedMediaSource);if(this.useWorker&&"undefined"!=typeof Worker){const n=this.hls.logger;if(i.workerPath||"function"==typeof __HLS_WORKER_BUNDLE__){try{i.workerPath?(n.log(`loading Web Worker ${i.workerPath} for "${t}"`),this.workerContext=function(e){const t=Gr[e];if(t)return t.clientCount++,t;const n=new self.URL(e,self.location.href).href,r={worker:new self.Worker(n),scriptURL:n,clientCount:1};return Gr[e]=r,r}(i.workerPath)):(n.log(`injecting Web Worker for "${t}"`),this.workerContext=function(){const e=Gr[qr];if(e)return e.clientCount++,e;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(t),r={worker:new self.Worker(n),objectURL:n,clientCount:1};return Gr[qr]=r,r}());const{worker:e}=this.workerContext;e.addEventListener("message",this.onWorkerMessage),e.addEventListener("error",this.onWorkerError),e.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:s,id:t,config:it(i)})}catch(Vl){n.warn(`Error setting up "${t}" Web Worker, fallback to inline`,Vl),this.terminateWorker(),this.error=null,this.transmuxer=new sa(this.observer,s,i,"",t,e.logger)}return}}this.transmuxer=new sa(this.observer,s,i,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=ca++;const t=this.hls.config,n=ze(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:it(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),function(e){const t=Gr[e||qr];if(t&&1===t.clientCount--){const{worker:n,objectURL:r}=t;delete Gr[e||qr],r&&self.URL.revokeObjectURL(r),n.terminate()}}(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const e=this.transmuxer;e&&(e.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,n,r,i,a,s,o,l,u){var d,c;l.transmuxing.start=self.performance.now();const{instanceNo:h,transmuxer:f}=this,p=a?a.start:i.start,m=i.decryptdata,y=this.frag,v=!(y&&i.cc===y.cc),b=!(y&&l.level===y.level),E=y?l.sn-y.sn:-1,T=this.part?l.part-this.part.index:-1,S=0===E&&l.id>1&&l.id===(null==y?void 0:y.stats.chunkCount),w=!b&&(1===E||0===E&&(1===T||S&&T<=0)),A=self.performance.now();(b||E||0===i.stats.parsing.start)&&(i.stats.parsing.start=A),!a||!T&&w||(a.stats.parsing.start=A);const I=!(y&&(null==(d=i.initSegment)?void 0:d.url)===(null==(c=y.initSegment)?void 0:c.url)),k=new da(v,w,o,b,p,I);if(!w||v||I){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${i.type} sn: ${l.sn}${l.part>-1?" part: "+l.part:""} ${this.id===g?"level":"track"}: ${l.level} id: ${l.id}\n        discontinuity: ${v}\n        trackSwitch: ${b}\n        contiguous: ${w}\n        accurateTimeOffset: ${o}\n        timeOffset: ${p}\n        initSegmentChange: ${I}`);const e=new ua(n,r,t,s,u);this.configureTransmuxer(e)}if(this.frag=i,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:h,cmd:"demux",data:e,decryptdata:m,chunkMeta:l,state:k},e instanceof ArrayBuffer?[e]:[]);else if(f){const t=f.push(e,m,l,k);la(t)?t.then(e=>{this.handleTransmuxComplete(e)}).catch(e=>{this.transmuxerError(e,l,"transmuxer-interface push error")}):this.handleTransmuxComplete(t)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(n){const t=n.flush(e);la(t)?t.then(t=>{this.handleFlushResult(t,e)}).catch(t=>{this.transmuxerError(t,e,"transmuxer-interface flush error")}):this.handleFlushResult(t,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(e=>{this.handleTransmuxComplete(e)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}class fa extends w{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){-1!==this.timer&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const r=null==t?void 0:t.renditionReports;if(r){let a=-1;for(let n=0;n<r.length;n++){const s=r[n];let o;try{o=new self.URL(s.URI,t.url).href}catch(i){this.warn(`Could not construct new URL for Rendition Report: ${i}`),o=s.URI||""}if(o===e){a=n;break}o===e.substring(0,o.length)&&(a=n)}if(-1!==a){const e=r[a],i=parseInt(e["LAST-MSN"])||t.lastPartSn;let s=parseInt(e["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const e=Math.min(t.age-t.partTarget,t.targetduration);s>=0&&e>t.partTarget&&(s+=1)}const o=n&&Ze(n);return new et(i,s>=0?s:void 0,o)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,t,n){const{details:r,stats:i}=t,a=self.performance.now(),s=i.loading.first?Math.max(0,a-i.loading.first):0;r.advancedDateTime=Date.now()-s;const d=this.hls.config.timelineOffset;if(d!==r.appliedTimelineOffset){const e=Math.max(d||0,0);r.appliedTimelineOffset=e,r.fragments.forEach(t=>{t.setStart(t.playlistOffset+e)})}if(r.live||null!=n&&n.live){const d="levelInfo"in t?t.levelInfo:t.track;if(r.reloaded(n),n&&r.fragments.length>0){ar(n,r,this);const e=r.playlistParsingError;if(e){this.warn(e);const n=this.hls;if(!n.config.ignorePlaylistParsingErrors){var c;const{networkDetails:a}=t;return void n.trigger(u.ERROR,{type:o.NETWORK_ERROR,details:l.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:e,reason:e.message,level:t.level||void 0,parent:null==(c=r.fragments[0])?void 0:c.type,networkDetails:a,stats:i})}r.playlistParsingError=null}}-1===r.requestScheduled&&(r.requestScheduled=i.loading.start);const h=this.hls.mainForwardBufferInfo,f=h?h.end-h.len:0,g=ur(r,1e3*(r.edge-f));if(r.requestScheduled+g<a?r.requestScheduled=a:r.requestScheduled+=g,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let p,m,y;if(r.canBlockReload&&r.endSN&&r.advanced){const e=this.hls.config.lowLatencyMode,i=r.lastPartSn,s=r.endSN,o=r.lastPartIndex,l=i===s;-1!==o?l?(m=s+1,y=e?0:o):(m=i,y=e?o+1:r.maxPartIndex):m=s+1;const u=r.age,c=u+r.ageHeader;let h=Math.min(c-r.partTarget,1.5*r.targetduration);if(h>0){if(c>3*r.targetduration)this.log(`Playlist last advanced ${u.toFixed(2)}s ago. Omitting segment and part directives.`),m=void 0,y=void 0;else if(null!=n&&n.tuneInGoal&&c-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${h} with playlist age: ${r.age}`),h=0;else{const e=Math.floor(h/r.targetduration);if(m+=e,void 0!==y){y+=Math.round(h%r.targetduration/r.partTarget)}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${u.toFixed(2)}s goal: ${h} skip sn ${e} to part ${y}`)}r.tuneInGoal=h}if(p=this.getDeliveryDirectives(r,t.deliveryDirectives,m,y),e||!l)return r.requestScheduled=a,void this.loadingPlaylist(d,p)}else(r.canBlockReload||r.canSkipUntil)&&(p=this.getDeliveryDirectives(r,t.deliveryDirectives,m,y));p&&void 0!==m&&r.canBlockReload&&(r.requestScheduled=i.loading.first+Math.max(g-2*s,g/2)),this.scheduleLoading(d,p,r)}else this.clearTimer()}scheduleLoading(e,t,n){const r=n||e.details;if(!r)return void this.loadingPlaylist(e,t);const i=self.performance.now(),a=r.requestScheduled;if(i>=a)return void this.loadingPlaylist(e,t);const s=a-i;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(s)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),s)}getDeliveryDirectives(e,t,n,r){let i=Ze(e);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,i=Xe),new et(n,r,i)}checkRetry(e){const t=e.details,n=vt(e),r=e.errorAction,{action:i,retryCount:a=0,retryConfig:s}=r||{},o=!!r&&!!s&&(i===xt||!r.resolved&&i===_t);if(o){var l;if(a>=s.maxNumRetry)return!1;if(n&&null!=(l=e.context)&&l.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const e=St(s,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),e),this.warn(`Retrying playlist loading ${a+1}/${s.maxNumRetry} after "${t}" in ${e}ms`)}e.levelRetry=!0,r.resolved=!0}return o}}function ga(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!pa(e[n].attrs,t[n].attrs))return!1;return!0}function pa(e,t,n){const r=e["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(n=>e[n]!==t[n])}function ma(e,t){return t.label.toLowerCase()===e.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(e.lang||"").toLowerCase())}class ya{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,n){if(null===this.queues||null===this.tracks)return;const r=this.queues[t];r.push(e),1!==r.length||n||this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const n={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const n={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){null!==this.queues&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const n=null==(t=e[0])?void 0:t.label;"async-blocker"!==n&&"async-blocker-prepend"!==n||(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(null===this.queues)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(null===this.queues||null===this.tracks)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(r){var n;if(i.onError(r),null===this.queues||null===this.tracks)return;const t=null==(n=this.tracks[e])?void 0:n.buffer;null!=t&&t.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){null!==this.queues&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return(null==(t=this.queues)?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return null===e||null===t?"<destroyed>":`\n${this.list("video")}\n${this.list("audio")}\n${this.list("audiovideo")}}`}list(e){var t,n;return null!=(t=this.queues)&&t[e]||null!=(n=this.tracks)&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const n=null==(t=this.tracks)?void 0:t[e],r=null==n?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var t;return(null==(t=this.queues)?void 0:t[e].map(e=>e.label).join(", "))||""}}const va=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,ba="HlsJsTrackRemovedError";class Ea extends Error{constructor(e){super(e),this.name=ba}}function Ta(e){const t=e.querySelectorAll("source");[].slice.call(t).forEach(t=>{e.removeChild(t)})}function Sa(e){return"audio"===e?1:0}class wa{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(u.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(u.BUFFER_CODECS,this.onBufferCodecs,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(u.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(u.BUFFER_CODECS,this.onBufferCodecs,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&n(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0)return void(this.clientRect=null);const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((t,n)=>this.isLevelAllowed(t)&&n<=e);return this.clientRect=null,wa.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(t){}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(t=>e.bitrate===t.bitrate&&e.width===t.width&&e.height===t.height)}static getMaxLevelByMediaSize(e,t,n){if(null==e||!e.length)return-1;const r=(e,t)=>!t||(e.width!==t.width||e.height!==t.height);let i=e.length-1;const a=Math.max(t,n);for(let s=0;s<e.length;s+=1){const t=e[s];if((t.width>=a||t.height>=a)&&r(t,e[s+1])){i=s;break}}return i}}const Aa={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ia={HLS:"h"};class ka{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof ka?e:new ka(e))),this.value=e,this.params=t}}function _a(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}function Ra(e,t,n){return _a("serialize",e,t,n)}class xa{constructor(e){this.description=e}}const Ca="Bare Item";function Da(e){if(!1===ArrayBuffer.isView(e))throw Ra(e,"Byte Sequence");return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}function La(e){if(function(e){return e<-999999999999999||999999999999999<e}(e))throw Ra(e,"Integer");return e.toString()}function Ma(e,t){if(e<0)return-Ma(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}function Na(e){const t=Ma(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Ra(e,"Decimal");const n=t.toString();return n.includes(".")?n:`${n}.0`}const Pa=/[\x00-\x1f\x7f]+/;function Oa(e){const t=(n=e).description||n.toString().slice(7,-1);var n;if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw Ra(t,"Token");return t}function Fa(e){switch(typeof e){case"number":if(!n(e))throw Ra(e,Ca);return Number.isInteger(e)?La(e):Na(e);case"string":return function(e){if(Pa.test(e))throw Ra(e,"String");return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return Oa(e);case"boolean":return function(e){if("boolean"!=typeof e)throw Ra(e,"Boolean");return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return function(e){return`@${La(e.getTime()/1e3)}`}(e);if(e instanceof Uint8Array)return Da(e);if(e instanceof xa)return Oa(e);default:throw Ra(e,Ca)}}function Ua(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Ra(e,"Key");return e}function za(e){return null==e?"":Object.entries(e).map(([e,t])=>!0===t?`;${Ua(e)}`:`;${Ua(e)}=${Fa(t)}`).join("")}function Ba(e){return e instanceof ka?`${Fa(e.value)}${za(e.params)}`:Fa(e)}function ja(e,t={whitespace:!0}){if("object"!=typeof e||null==e)throw Ra(e,"Dict");const n=e instanceof Map?e.entries():Object.entries(e),r=(null==t?void 0:t.whitespace)?" ":"";return Array.from(n).map(([e,t])=>{t instanceof ka==!1&&(t=new ka(t));let n=Ua(e);var r;return!0===t.value?n+=za(t.params):(n+="=",Array.isArray(t.value)?n+=`(${(r=t).value.map(Ba).join(" ")})${za(r.params)}`:n+=Ba(t)),n}).join(`,${r}`)}function qa(e,t){return ja(e,t)}const Ga="CMCD-Object",Ha="CMCD-Request",Va="CMCD-Session",Ka="CMCD-Status",$a={br:Ga,ab:Ga,d:Ga,ot:Ga,tb:Ga,tpb:Ga,lb:Ga,tab:Ga,lab:Ga,url:Ga,pb:Ha,bl:Ha,tbl:Ha,dl:Ha,ltc:Ha,mtp:Ha,nor:Ha,nrr:Ha,rc:Ha,sn:Ha,sta:Ha,su:Ha,ttfb:Ha,ttfbb:Ha,ttlb:Ha,cmsdd:Ha,cmsds:Ha,smrt:Ha,df:Ha,cs:Ha,ts:Ha,cid:Va,pr:Va,sf:Va,sid:Va,st:Va,v:Va,msd:Va,bs:Ka,bsd:Ka,cdn:Ka,rtp:Ka,bg:Ka,pt:Ka,ec:Ka,e:Ka},Ya=Ha;function Wa(e,t){const n={};if(!e)return n;const r=Object.keys(e),i=t?(a=t,Object.keys(a).reduce((e,t)=>{var n;return null===(n=a[t])||void 0===n||n.forEach(n=>e[n]=t),e},{})):{};var a;return r.reduce((t,n)=>{var r;const a=$a[n]||i[n]||Ya;return(null!==(r=t[a])&&void 0!==r?r:t[a]={})[n]=e[n],t},n)}const Xa="event";const Qa=e=>Math.round(e),Ja=(e,t)=>Array.isArray(e)?e.map(e=>Ja(e,t)):e instanceof ka&&"string"==typeof e.value?new ka(Ja(e.value,t),e.params):(t.baseUrl&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")+n.search+n.hash}(e,t.baseUrl)),1===t.version?encodeURIComponent(e):e),Za=e=>100*Qa(e/100),es={br:Qa,d:Qa,bl:Za,dl:Za,mtp:Za,nor:(e,t)=>{let n=e;return t.version>=2&&(e instanceof ka&&"string"==typeof e.value?n=new ka([e]):"string"==typeof e&&(n=[e])),Ja(n,t)},rtp:Za,tb:Qa},ts="request",ns="response",rs=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],is=["e"],as=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function ss(e){return as.test(e)}const os=["d","dl","nor","ot","rtp","su"];const ls=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];const us=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function ds(e){return us.includes(e)||ss(e)}const cs={[ns]:function(e){return rs.includes(e)||os.includes(e)||ls.includes(e)||ss(e)},[Xa]:function(e){return rs.includes(e)||is.includes(e)||ss(e)},[ts]:function(e){return rs.includes(e)||os.includes(e)||ss(e)}};function hs(e,t={}){const r={};if(null==e||"object"!=typeof e)return r;const i=t.version||e.v||1,a=t.reportingMode||ts,s=1===i?ds:cs[a];let o=Object.keys(e).filter(s);const l=t.filter;"function"==typeof l&&(o=o.filter(l));const u=a===ns||a===Xa;u&&!o.includes("ts")&&o.push("ts"),i>1&&!o.includes("v")&&o.push("v");const d=E({},es,t.formatters),c={version:i,reportingMode:a,baseUrl:t.baseUrl};return o.sort().forEach(t=>{let a=e[t];const s=d[t];if("function"==typeof s&&(a=s(a,c)),"v"===t){if(1===i)return;a=i}"pr"==t&&1===a||(u&&"ts"===t&&!n(a)&&(a=Date.now()),function(e){return"number"==typeof e?n(e):null!=e&&""!==e&&!1!==e}(a)&&(function(e){return["ot","sf","st","e","sta"].includes(e)}(t)&&"string"==typeof a&&(a=new xa(a)),r[t]=a))}),r}function fs(e,t,n){return E(e,function(e,t={}){const n={};if(!e)return n;const r=Wa(hs(e,t),null==t?void 0:t.customHeaderMap);return Object.entries(r).reduce((e,[t,n])=>{const r=qa(n,{whitespace:!1});return r&&(e[t]=r),e},n)}(t,n))}function gs(e,t={}){if(!e)return"";const n=function(e,t={}){return e?qa(hs(e,t),{whitespace:!1}):""}(e,t);return encodeURIComponent(n)}const ps=/CMCD=[^&#]+/;function ms(e,t,n){const r=function(e,t={}){return e?`CMCD=${gs(e,t)}`:""}(t,n);if(!r)return e;if(ps.test(e))return e.replace(ps,r);const i=e.includes("?")?"&":"?";return`${e}${i}${r}`}function ys(e,t,n,r){e&&Object.keys(t).forEach(i=>{const a=e.filter(e=>e.groupId===i).map(e=>{const a=E({},e);return a.details=void 0,a.attrs=new hn(a.attrs),a.url=a.attrs.URI=vs(e.url,e.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=t[i],a.attrs["PATHWAY-ID"]=r,a});e.push(...a)})}function vs(e,t,n,r){const{HOST:i,PARAMS:a,[n]:s}=r;let o;t&&(o=null==s?void 0:s[t],o&&(e=o));const l=new self.URL(e);return i&&!o&&(l.host=i),a&&Object.keys(a).sort().forEach(e=>{e&&l.searchParams.set(e,a[e])}),l.href}class bs extends w{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=bs.CDMCleanupPromise?[bs.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=e=>{const{initDataType:t,initData:n}=e,r=`"${e.type}" event: init data type: "${t}"`;if(this.debug(r),null!==n){if(!this.keyFormatPromise){let e=Object.keys(this.keySystemAccessPromises);e.length||(e=Mn(this.config));const t=e.map(Ln).filter(e=>!!e);this.keyFormatPromise=this.getKeyFormatPromise(t)}this.keyFormatPromise.then(i=>{const a=Dn(i);if("sinf"!==t||a!==kn.FAIRPLAY)return void this.log(`Ignoring "${e.type}" event with init data type: "${t}" for selected key-system ${a}`);let s;try{const e=ne(new Uint8Array(n)),t=me(Tn(JSON.parse(e).sinf));if(!t)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");s=new Uint8Array(t.subarray(8,24))}catch(c){return void this.warn(`${r} Failed to parse sinf: ${c}`)}const o=M(s),{keyIdToKeySessionPromise:l,mediaKeySessions:u}=this;let d=l[o];for(let e=0;e<u.length;e++){const r=u[e],i=r.decryptdata;if(!i.keyId)continue;const a=M(i.keyId);if(yn(s,i.keyId)||-1!==i.uri.replace(/-/g,"").indexOf(o)){if(d=l[a],!d)continue;if(i.pssh)break;delete l[a],i.pssh=new Uint8Array(n),i.keyId=s,d=l[o]=d.then(()=>this.generateRequestWithPreferredKeySession(r,t,n,"encrypted-event-key-match")),d.catch(e=>this.handleError(e));break}}d||this.handleError(new Error(`Key ID ${o} not encountered in playlist. Key-system sessions ${u.length}.`))}).catch(e=>this.handleError(e))}},this.onWaitingForKey=e=>{this.log(`"${e.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(u.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(u.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(u.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(u.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(u.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(u.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(u.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(u.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,r=null==t?void 0:t[e];return r?r.licenseUrl:e===kn.WIDEVINE&&n?n:void 0}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(void 0===t)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=null==t?void 0:t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(e,t,n)=>!!e&&n.indexOf(e)===t,r=t.map(e=>e.audioCodec).filter(n),i=t.map(e=>e.videoCodec).filter(n);return r.length+i.length===0&&i.push("avc1.42e01e"),new Promise((t,n)=>{const a=e=>{const s=e.shift();this.getMediaKeysPromise(s,r,i).then(e=>t({keySystem:s,mediaKeys:e})).catch(t=>{e.length?a(e):n(t instanceof Ss?t:new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))})};a(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if("function"!=typeof n){let e=`Configured requestMediaKeySystemAccess is not a function ${n}`;return null===Nn&&"http:"===self.location.protocol&&(e=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(e))}return n(e,t)}getMediaKeysPromise(e,t,n){var r;const i=function(e,t,n,r){let i;switch(e){case kn.FAIRPLAY:i=["cenc","sinf"];break;case kn.WIDEVINE:case kn.PLAYREADY:i=["cenc"];break;case kn.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${e}`)}return function(e,t,n,r){return[{initDataTypes:e,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(e=>({contentType:`audio/mp4; codecs=${e}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(e=>({contentType:`video/mp4; codecs=${e}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}(i,t,n,r)}(e,t,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],s=null==(r=a)?void 0:r.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${it(i)}`),s=this.requestMediaKeySystemAccess(e,i);const t=a=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(t=>{this.log(`Failed to obtain access to key-system "${e}": ${t}`)}),s.then(n=>{this.log(`Access for key-system "${n.keySystem}" obtained`);const r=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const i=t.mediaKeys=n.createMediaKeys().then(n=>(this.log(`Media-keys created for "${e}"`),t.hasMediaKeys=!0,r.then(t=>t?this.setMediaKeysServerCertificate(n,e,t):n)));return i.catch(t=>{this.error(`Failed to create media-keys for "${e}"}: ${t}`)}),i})}return s.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${M(e.keyId||[])} keyUri: ${e.uri}`);const r=n.createSession(),i={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),r=Es(t),i="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,i,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${M(e.decryptdata.keyId||[])}\n      } (data length: ${t.byteLength})`),n.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Ln(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:e,mediaKeys:t})=>this.attemptSetMediaKeys(e,t))}selectKeySystem(e){return new Promise((t,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:e})=>{const r=Ln(e);r?t(r):n(new Error(`Unable to find format for key-system "${e}"`))}).catch(n)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Mn(this.config),n=e.map(Dn).filter(e=>!!e&&-1!==t.indexOf(e));return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let n=0;n<t.length;n++){const r=Ts(e,t[n]);if(r)return r}}loadKey(e){const t=e.keyInfo.decryptdata,n=Es(t),r=this.bannedKeyIds[n];if(r||"internal-error"===this.getKeyStatus(t)){const n=ws(r||"internal-error",t);return this.handleError(n,e.frag),Promise.reject(n)}const i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const r=this.getKeySystemForKeyPromise(t).then(({keySystem:n,mediaKeys:r})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(n,r).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:n,mediaKeys:r,decryptdata:t}))))).then(e=>{const n=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(e,"cenc",n,"playlist-key")});return r.catch(t=>this.handleError(t,e.frag)),this.keyIdToKeySessionPromise[n]=r,r}return a.catch(n=>{if(n instanceof Ss){const r=S({},n.data);"internal-error"===this.getKeyStatus(t)&&(r.decryptdata=t);const i=new Ss(r,n.message);this.handleError(i,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof Ss){t&&(e.data.frag=t);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${M(n.keyId||[])})`:""}`),this.hls.trigger(u.ERROR,e.data)}else this.error(e.message),this.hls.trigger(u.ERROR,{type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=Es(e),n=this.keyIdToKeySessionPromise[t];if(!n){const t=Dn(e.keyFormat),n=t?[t]:Mn(this.config);return this.attemptKeySystemAccess(n)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Mn(this.config)),0===e.length)throw new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${it({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(e=>-1===n.indexOf(e))})}generateRequestWithPreferredKeySession(e,t,n,r){var i;const a=null==(i=this.config.drmSystems)||null==(i=i[e.keySystem])?void 0:i.generateRequest;if(a)try{const r=a.call(this.hls,t,n,e);if(!r)throw new Error("Invalid response from configured generateRequest filter");t=r.initDataType,n=r.initData?r.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(p){if(this.warn(p.message),this.hls&&this.hls.config.debug)throw p}if(null===n)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const s=Es(e.decryptdata),u=e.decryptdata.uri;this.log(`Generating key-session request for "${r}" keyId: ${s} URI: ${u} (init data type: ${t} length: ${n.byteLength})`);const d=new jr,c=e._onmessage=t=>{const n=e.mediaKeysSession;if(!n)return void d.emit("error",new Error("invalid state"));const{messageType:r,message:i}=t;this.log(`"${r}" message event for session "${n.sessionId}" message size: ${i.byteLength}`),"license-request"===r||"license-renewal"===r?this.renewLicense(e,i).catch(e=>{d.eventNames().length?d.emit("error",e):this.handleError(e)}):"license-release"===r?e.keySystem===kn.FAIRPLAY&&this.updateKeySession(e,Sn("acknowledged")).then(()=>this.removeSession(e)).catch(e=>this.handleError(e)):this.warn(`unhandled media key message type "${r}"`)},h=(e,t)=>{let n;t.keyStatus=e,e.startsWith("usable")?d.emit("resolved"):"internal-error"===e||"output-restricted"===e||"output-downscaled"===e?n=ws(e,t.decryptdata):"expired"===e?n=new Error(`key expired (keyId: ${s})`):"released"===e?n=new Error("key released"):"status-pending"===e||this.warn(`unhandled key status change "${e}" (keyId: ${s})`),n&&(d.eventNames().length?d.emit("error",n):this.handleError(n))},f=e._onkeystatuseschange=t=>{if(!e.mediaKeysSession)return void d.emit("error",new Error("invalid state"));const n=this.getKeyStatuses(e);if(!Object.keys(n).some(e=>"status-pending"!==n[e]))return;if("expired"===n[s])return this.log(`Expired key ${it(n)} in key-session "${e.mediaKeysSession.sessionId}"`),void this.renewKeySession(e);let r=n[s];if(r)h(r,e);else{var i;const t=1e3;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(i=e.keyStatusTimeouts)[s]||(i[s]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const n=this.getKeyStatus(e.decryptdata);if(n&&"status-pending"!==n)return this.log(`No status for keyId ${s} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${n} from other session.`),h(n,e);this.log(`key status for ${s} in key-session "${e.mediaKeysSession.sessionId}" timed out after ${t}ms`),r="internal-error",h(r,e)},t)),this.log(`No status for keyId ${s} (${it(n)}).`)}};Tr(e.mediaKeysSession,"message",c),Tr(e.mediaKeysSession,"keystatuseschange",f);const g=new Promise((e,t)=>{d.on("error",t),d.on("resolved",e)});return e.mediaKeysSession.generateRequest(t,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${s} URI: ${u}`)}).catch(t=>{throw new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_NO_SESSION,error:t,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${t}`)}).then(()=>g).catch(t=>(d.removeAllListeners(),this.removeSession(e).then(()=>{throw t}))).then(()=>(d.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if("string"==typeof r&&"object"==typeof n){const e=r;r=n,n=e}const i="buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);e.keySystem===kn.PLAYREADY&&16===i.length&&wn(i);const a=M(i);"internal-error"===n&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),t[a]=n}),t}fetchServerCertificate(e){const t=this.config,n=new(0,t.loader)(t),r=this.getServerCertificateUrl(e);return r?(this.log(`Fetching server certificate for "${e}"`),new Promise((i,a)=>{const s={responseType:"arraybuffer",url:r},u=t.certLoadPolicy.default,d={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(e,t,n,r)=>{i(e.data)},onError:(t,n,i,u)=>{a(new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:S({url:s.url,data:void 0},t)},`"${e}" certificate request failed (${r}). Status: ${t.code} (${t.text})`))},onTimeout:(t,n,i)=>{a(new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:s.url,data:void 0}},`"${e}" certificate request timed out (${r})`))},onAbort:(e,t,n)=>{a(new Error("aborted"))}};n.load(s,d,c)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((r,i)=>{e.setServerCertificate(n).then(i=>{this.log(`setServerCertificate ${i?"success":"not supported by CDM"} (${n.byteLength}) on "${t}"`),r(e)}).catch(e=>{i(new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(t=>this.updateKeySession(e,new Uint8Array(t)).catch(t=>{throw new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:t,fatal:!1},t.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const r=(new DOMParser).parseFromString(n,"application/xml"),i=r.querySelectorAll("HttpHeader");if(i.length>0){let t;for(let n=0,r=i.length;n<r;n++){var a,s;t=i[n];const r=null==(a=t.querySelector("name"))?void 0:a.textContent,o=null==(s=t.querySelector("value"))?void 0:s.textContent;r&&o&&e.setRequestHeader(r,o)}}const o=r.querySelector("Challenge"),l=null==o?void 0:o.textContent;if(!l)throw new Error("Cannot find <Challenge> in key message");return Sn(atob(l))}setupLicenseXHR(e,t,n,r){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,t,n,r)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),i.call(this.hls,e,t,n,r)}).then(n=>{e.readyState||e.open("POST",t,!0);return{xhr:e,licenseChallenge:n||r}}):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((r,i)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(4===s.readyState)if(200===s.status){this._requestLicenseFailureCount=0;let t=s.response;this.log(`License received ${t instanceof ArrayBuffer?t.byteLength:t}`);const n=this.config.licenseResponseCallback;if(n)try{t=n.call(this.hls,s,a,e)}catch(u){this.error(u)}r(t)}else{const u=n.errorRetry,d=u?u.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||s.status>=400&&s.status<500)i(new Ss({type:o.KEY_SYSTEM_ERROR,details:l.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:s,response:{url:a,data:void 0,code:s.status,text:s.statusText}},`License Request XHR failed (${a}). Status: ${s.status} (${s.statusText})`));else{const n=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${n} attempts left`),this.requestLicense(e,t).then(r,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,this.setupLicenseXHR(s,a,e,t).then(({xhr:t,licenseChallenge:n})=>{e.keySystem==kn.PLAYREADY&&(n=this.unpackPlayReadyKeyMessage(t,n)),t.send(n)}).catch(i)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,Tr(n,"encrypted",this.onMediaEncrypted),Tr(n,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(Sr(e,"encrypted",this.onMediaEncrypted),Sr(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,n=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Un.clearKeyUriToKeyIdMap();const r=n.length;bs.CDMCleanupPromise=Promise.all(n.map(e=>this.removeSession(e)).concat((null==t||null==(e=t.setMediaKeys(null))?void 0:e.catch(e=>{this.log(`Could not clear media keys: ${e}`),this.hls&&this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${e}`)})}))||Promise.resolve())).catch(e=>{this.log(`Could not close sessions and clear media keys: ${e}`),this.hls&&this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${e}`)})}).then(()=>{r&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null,this.bannedKeyIds={}}onManifestLoaded(e,{sessionKeys:t}){if(t&&this.config.emeEnabled&&!this.keyFormatPromise){const e=t.reduce((e,t)=>(-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e),[]);this.log(`Selecting key-system from session-keys ${e.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(e)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n,decryptdata:r}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${M((null==r?void 0:r.keyId)||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(e=>self.clearTimeout(a[e]));const{drmSystemOptions:s}=this.config,d=function(e){var t;return!(!e||"persistent-license"!==e.sessionType&&(null==(t=e.sessionTypes)||!t.some(e=>"persistent-license"===e)))}(s)?new Promise((e,n)=>{self.setTimeout(()=>n(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(e).catch(n)}):Promise.resolve();return d.catch(e=>{this.log(`Could not remove session: ${e}`),this.hls&&this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${e}`)})}).then(()=>t.close()).catch(e=>{this.log(`Could not close session: ${e}`),this.hls&&this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${e}`)})})}return Promise.resolve()}}function Es(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return M(e.keyId)}function Ts(e,t){return e.keyId&&t.mediaKeysSession.keyStatuses.has(e.keyId)?t.mediaKeysSession.keyStatuses.get(e.keyId):e.matches(t.decryptdata)?t.keyStatus:void 0}bs.CDMCleanupPromise=void 0;class Ss extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function ws(e,t){const n="output-restricted"===e,r=n?l.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:l.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new Ss({type:o.KEY_SYSTEM_ERROR,details:r,fatal:!1,decryptdata:t},n?"HDCP level output restricted":`key status changed to "${e}"`)}function As(e,t){let n;try{n=new Event("addtrack")}catch(Vl){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function Is(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(Vl){x.debug(`[texttrack-utils]: ${Vl}`);try{const n=new self.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,e.addCue(n)}catch(r){x.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}"disabled"===n&&(e.mode=n)}function ks(e,t){const n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues)for(let r=e.cues.length;r--;)t&&e.cues[r].removeEventListener("enter",t),e.removeCue(e.cues[r]);"disabled"===n&&(e.mode=n)}function _s(e,t,n,r){const i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0){const i=function(e,t,n){const r=[],i=function(e,t){if(t<=e[0].startTime)return 0;const n=e.length-1;if(t>e[n].endTime)return-1;let r,i=0,a=n;for(;i<=a;)if(r=Math.floor((a+i)/2),t<e[r].startTime)a=r-1;else{if(!(t>e[r].startTime&&i<n))return r;i=r+1}return e[i].startTime-t<t-e[a].startTime?i:a}(e,t);if(i>-1)for(let a=i,s=e.length;a<s;a++){const i=e[a];if(i.startTime>=t&&i.endTime<=n)r.push(i);else if(i.startTime>n)return r}return r}(e.cues,t,n);for(let t=0;t<i.length;t++)r&&!r(i[t])||e.removeCue(i[t])}"disabled"===i&&(e.mode=i)}function Rs(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];"subtitles"!==r.kind&&"captions"!==r.kind||!r.label||t.push(e[n])}return t}function xs(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}const Cs=.025;let Ds=function(e){return e[e.Point=0]="Point",e[e.Range=1]="Range",e}({});function Ls(e,t,n){return`${e.identifier}-${n+1}-${xs(t)}`}class Ms{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,null==(e=this.assetListLoader)||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;if(e<=0||isNaN(n))return!1;if(0===n)return!0;return((null==(t=this.assetList[e])?void 0:t.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Ns(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(0===this.startTime||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime;return t-Ns(t,e)<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=n(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Ns(e,t)}return e}get appendInPlace(){return!!this.appendInPlaceStarted||!this.appendInPlaceDisabled&&!(this.cue.once||this.cue.pre||!this.startIsAligned||!(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Cs))}set appendInPlace(e){this.appendInPlaceStarted?this.resetOnResume=!e:this.appendInPlaceDisabled=!e}get timelineStart(){return null!==this._timelineStart?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return t=null!==this._duration?this._duration:this.dateRange.duration?this.dateRange.duration:this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return"RANGE"===this.dateRange.attr["X-TIMELINE-OCCUPIES"]?Ds.Range:Ds.Point}get supplementsPrimary(){return"PRIMARY"===this.dateRange.attr["X-TIMELINE-STYLE"]}get contentMayVary(){return"NO"!==this.dateRange.attr["X-CONTENT-MAY-VARY"]}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||null!==this.assetListResponse}toString(){return`["${(e=this).identifier}" ${e.cue.pre?"<pre>":e.cue.post?"<post>":""}${e.timelineStart.toFixed(2)}-${e.resumeTime.toFixed(2)}]`;var e}}function Ns(e,t){return e-t.start<t.duration/2&&!(Math.abs(e-(t.start+t.duration))<Cs)?t.start:t.start+t.duration}function Ps(e,t,n){const r=new self.URL(e,n);return"data:"!==r.protocol&&r.searchParams.set("_HLS_primary_id",t),r}function Os(e,t){for(;null!=(n=e.assetList[++t])&&n.error;)var n;return t}function Fs(e){const t=e.timelineStart,n=e.duration||0;return`["${e.identifier}" ${t.toFixed(2)}-${(t+n).toFixed(2)}]`}class Us{constructor(e,t,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(u.PLAYOUT_LIMIT_REACHED,{})};const i=this.hls=new e(t);this.interstitial=n,this.assetItem=r;const a=()=>{this.hasDetails=!0};i.once(u.LEVEL_LOADED,a),i.once(u.AUDIO_TRACK_LOADED,a),i.once(u.SUBTITLE_TRACK_LOADED,a),i.on(u.MEDIA_ATTACHING,(e,{media:t})=>{this.removeMediaListeners(),this.mediaAttached=t;this.interstitial.playoutLimit&&(t.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&i.on(u.BUFFER_APPENDED,()=>{const e=this.bufferedEnd;this.reachedPlayout(e)&&(this._bufferedEosTime=e,i.trigger(u.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let n=this.assetItem.uri;try{n=Ps(n,e.config.primarySessionId||"").href}catch(t){}e.loadSource(n)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if(null!=(t=this.hls)&&t.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,i=rn.bufferInfo(e,r,0);return this.getAssetTime(i.end)>=n-.02}reachedPlayout(e){const t=this.interstitial.playoutLimit;return this.startOffset+e>=t}get destroyed(){var e;return!(null!=(e=this.hls)&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return(null==(e=this.hls)?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=rn.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const n=t-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return(null==(e=this.hls)?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const n=e-t;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-t),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){var e;this.mediaAttached&&(null!=(e=this.hls)&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd))}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),null==(t=this.hls)||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,null==(e=this.hls)||e.detachMedia()}resumeBuffering(){var e;null==(e=this.hls)||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.hls)||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),(null==(e=this.hls)?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=e=>delete e.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,n){var r;null==(r=this.hls)||r.on(e,t)}once(e,t,n){var r;null==(r=this.hls)||r.once(e,t)}off(e,t,n){var r;null==(r=this.hls)||r.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${Fs(this.assetItem)} ${null==(e=this.hls)?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}class zs extends w{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&t>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(void 0===t&&(t=e.start),n=this.findItemIndexAtTime(t));n>=0&&null!=(i=r[n])&&i.event;){var i;n--}return n}findItemIndexAtTime(e,t){const n=this.items;if(n)for(let r=0;r<n.length;r++){let i=n[r];if(t&&"primary"!==t&&(i=i[t]),e===i.start||e>i.start&&e<i.end)return r}return-1}findJumpRestrictedIndex(e,t){const n=this.items;if(n)for(let r=e;r<=t&&n[r];r++){const e=n[r].event;if(null!=e&&e.restrictions.jump&&!e.appendInPlace)return r}return-1}findEventIndex(e){const t=this.items;if(t)for(let r=t.length;r--;){var n;if((null==(n=t[r].event)?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,t){const n=e.assetList,r=n.length;if(r>1)for(let i=0;i<r;i++){const e=n[i];if(!e.error){const n=e.timelineStart;if(t===n||t>n&&(t<n+(e.duration||0)||i===r-1))return i}}return 0}get assetIdAtEnd(){var e;const t=null==(e=this.items)||null==(e=e[this.length-1])?void 0:e.event;if(t){const e=t.assetList,n=e[e.length-1];if(n)return n.identifier}return null}parseInterstitialDateRanges(e,t){const n=e.main.details,{dateRanges:r}=n,i=this.events,a=this.parseDateRanges(r,{url:n.url},t),s=Object.keys(r),o=i?i.filter(e=>!s.includes(e.identifier)):[];a.length&&a.sort((e,t)=>{const n=e.cue.pre,r=e.cue.post,i=t.cue.pre,a=t.cue.post;if(n&&!i)return-1;if(i&&!n)return 1;if(r&&!a)return 1;if(a&&!r)return-1;if(!(n||i||r||a)){const n=e.startTime,r=t.startTime;if(n!==r)return n-r}return e.dateRange.tagOrder-t.dateRange.tagOrder}),this.events=a,o.forEach(e=>{this.removeEvent(e)}),this.updateSchedule(e,o)}updateSchedule(e,t=[],n=!1){const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,a=this.parseSchedule(r,e);(n||t.length||(null==i?void 0:i.length)!==a.length||a.some((e,t)=>Math.abs(e.playout.start-i[t].playout.start)>.005||Math.abs(e.playout.end-i[t].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,n){const r=[],i=Object.keys(e);for(let a=0;a<i.length;a++){const s=i[a],o=e[s];if(o.isInterstitial){let e=this.eventMap[s];e?e.setDateRange(o):(e=new Ms(o,t),this.eventMap[s]=e,!1===n&&(e.appendInPlace=n)),r.push(e)}}return r}parseSchedule(e,t){const n=[],r=t.main.details,i=r.live?1/0:r.edge;let a=0;if((e=e.filter(e=>!(e.error||e.cue.once&&e.hasPlayed))).length){this.resolveOffsets(e,t);let r=0,o=0;if(e.forEach((t,s)=>{const l=t.cue.pre,u=t.cue.post,d=e[s-1]||null,c=t.appendInPlace,h=u?i:t.startOffset,f=t.duration,g=t.timelineOccupancy===Ds.Range?f:0,p=t.resumptionOffset,m=(null==d?void 0:d.startTime)===h,y=h+t.cumulativeDuration;let v=c?y+f:h+p;if(l||!u&&h<=0){const e=o;o+=g,t.timelineStart=y;const r=a;a+=f,n.push({event:t,start:y,end:v,playout:{start:r,end:a},integrated:{start:e,end:o}})}else{if(!(h<=i))return;{if(!m){const i=h-r;if(i>.033){const l=r,u=o;o+=i;const d=a;a+=i;const c={previousEvent:e[s-1]||null,nextEvent:t,start:l,end:l+i,playout:{start:d,end:a},integrated:{start:u,end:o}};n.push(c)}else i>0&&d&&(d.cumulativeDuration+=i,n[n.length-1].end=h)}u&&(v=y),t.timelineStart=y;const i=o;o+=g;const l=a;a+=f,n.push({event:t,start:y,end:v,playout:{start:l,end:a},integrated:{start:i,end:o}})}}const b=t.resumeTime;r=u||b>i?i:b}),r<i){var s;const e=r,t=o,l=i-r;o+=l;const u=a;a+=l,n.push({previousEvent:(null==(s=n[n.length-1])?void 0:s.event)||null,nextEvent:null,start:r,end:e+l,playout:{start:u,end:a},integrated:{start:t,end:o}})}this.setDurations(i,a,o)}else{const e=0;n.push({previousEvent:null,nextEvent:null,start:e,end:i,playout:{start:e,end:i},integrated:{start:e,end:i}}),this.setDurations(i,i,i)}return n}setDurations(e,t,n){this.durations={primary:e,playout:t,integrated:n}}resolveOffsets(e,t){const r=t.main.details,i=r.live?1/0:r.edge;let a=0,s=-1;e.forEach((o,l)=>{const u=o.cue.pre,d=o.cue.post,c=u?0:d?i:o.startTime;this.updateAssetDurations(o);if(s===c?o.cumulativeDuration=a:(a=0,s=c),!d&&o.snapOptions.in&&(o.resumeAnchor=gt(null,r.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted){this.primaryCanResumeInPlaceAt(o,t)||(o.appendInPlace=!1)}if(!o.appendInPlace&&l+1<e.length){e[l+1].startTime-e[l].resumeTime<.033&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`))}const h=n(o.resumeOffset)?o.resumeOffset:o.duration;a+=h})}primaryCanResumeInPlaceAt(e,t){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;if(Math.abs(n-r)>Cs)return this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1;return!Object.keys(t).some(r=>{const i=t[r].details,a=i.edge;if(n>=a)return this.log(`"${e.identifier}" resumption ${n} past ${r} playlist end ${a}`),!1;const s=gt(null,i.fragments,n);if(!s)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${r} playlist (${i.fragStart}-${i.fragmentEnd})`),!0;const o="audio"===r?.175:0;return!(Math.abs(s.start-n)<Cs+o||Math.abs(s.end-n)<Cs+o)&&(this.log(`"${e.identifier}" resumption ${n} not aligned with ${r} fragment bounds (${s.start}-${s.end} sn: ${s.sn} cc: ${s.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let n=0,r=!1,i=!1;for(let a=0;a<e.assetList.length;a++){const s=e.assetList[a],o=t+n;s.startOffset=n,s.timelineStart=o,r||(r=null===s.duration),i||(i=!!s.error);n+=s.error?0:s.duration||0}e.duration=r&&!i?Math.max(n,e.duration):n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Bs(e){return`[${e.event?'"'+e.event.identifier+'"':"primary"}: ${e.start.toFixed(2)}-${e.end.toFixed(2)}]`}class js{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const n=e.assetListUrl;let r;try{r=Ps(n,this.hls.sessionId,e.baseUrl)}catch(h){const t=this.assignAssetListError(e,l.ASSET_LIST_LOAD_ERROR,h,n);return void this.hls.trigger(u.ERROR,t)}t&&"data:"!==r.protocol&&r.searchParams.set("_HLS_start_offset",""+t);const i=this.hls.config,a=new(0,i.loader)(i),s={responseType:"json",url:r.href},o=i.interstitialAssetListLoadPolicy.default,d={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},c={onSuccess:(t,n,r,i)=>{const a=t.data,s=null==a?void 0:a.ASSETS;if(!Array.isArray(s)){const t=this.assignAssetListError(e,l.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),r.url,n,i);return void this.hls.trigger(u.ERROR,t)}e.assetListResponse=a,this.hls.trigger(u.ASSET_LIST_LOADED,{event:e,assetListResponse:a,networkDetails:i})},onError:(t,n,r,i)=>{const a=this.assignAssetListError(e,l.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${t.code} ${t.text} (${n.url})`),n.url,i,r);this.hls.trigger(u.ERROR,a)},onTimeout:(t,n,r)=>{const i=this.assignAssetListError(e,l.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${n.url})`),n.url,t,r);this.hls.trigger(u.ERROR,i)}};return a.load(s,d,c),this.hls.trigger(u.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,t,n,r,i,a){return e.error=n,{type:o.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:r,error:n,networkDetails:a,stats:i}}}function qs(e){null==e||e.play().catch(()=>{})}function Gs(e,t){return`[${e}] Advancing timeline position to ${t}`}class Hs{constructor(e){this.buffered=void 0;const t=(t,n,r)=>{if((n>>>=0)>r-1)throw new DOMException(`Failed to execute '${t}' on 'TimeRanges': The index provided (${n}) is greater than the maximum bound (${r})`);return e[n][t]};this.buffered={get length(){return e.length},end:n=>t("end",n,e.length),start:n=>t("start",n,e.length)}}}const Vs={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ks=e=>String.fromCharCode(Vs[e]||e),$s=15,Ys=100,Ws={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Xs={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Qs={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Js={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Zs=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class eo{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n="function"==typeof t?t():t;x.log(`${this.time} [${e}] ${n}`)}}}const to=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class no{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class ro{constructor(){this.uchar=" ",this.penState=new no}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class io{constructor(e){this.chars=[],this.pos=0,this.currPenState=new no,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Ys;t++)this.chars.push(new ro);this.logger=e}equals(e){for(let t=0;t<Ys;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Ys;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Ys;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Ys&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Ys)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Ks(e);this.pos>=Ys?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<Ys;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Ys;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e);this.chars[this.pos].setPenState(this.currPenState)}}class ao{constructor(e){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<$s;t++)this.rows.push(new io(e));this.logger=e}reset(){for(let e=0;e<$s;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<$s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<$s;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<$s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e);this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+it(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<$s;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(n.rows[e+a])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+it(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<$s;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class so{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new ao(n),this.nonDisplayedMemory=new ao(n),this.lastOutputScreen=new ao(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+it(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class oo{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory={a:null,b:null},this.logger=void 0;const r=this.logger=new eo;this.channels=[null,new so(e,t,r),new so(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const e=127&t[n],r=127&t[n+1];let i=!1,a=null;if(0===e&&0===r)continue;this.logger.log(3,()=>"["+to([t[n],t[n+1]])+"] -> ("+to([e,r])+")");const s=this.cmdHistory;if(e>=16&&e<=31){if(uo(e,r,s)){lo(null,null,s),this.logger.log(3,()=>"Repeated command ("+to([e,r])+") is dropped");continue}lo(e,r,this.cmdHistory),i=this.parseCmd(e,r),i||(i=this.parseMidrow(e,r)),i||(i=this.parsePAC(e,r)),i||(i=this.parseBackgroundAttributes(e,r))}else lo(null,null,s);if(!i&&(a=this.parseChars(e,r),a)){const e=this.currentChannel;if(e&&e>0){this.channels[e].insertChars(a)}else this.logger.log(2,"No channel found yet. TEXT-MODE?")}i||a||this.logger.log(2,()=>"Couldn't parse cleaned data "+to([e,r])+" orig: "+to([t[n],t[n+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+to([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?Ws[e]:Qs[e]:1===r?Xs[e]:Js[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=null,i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+Ks(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+to(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=Zs[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}lo(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function lo(e,t,n){n.a=e,n.b=t}function uo(e,t,n){return n.a===e&&n.b===t}var co=function(){if(null!=In&&In.VTTCue)return self.VTTCue;const e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;const n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e,...t){let n=1;for(;n<arguments.length;n++){const t=arguments[n];for(const n in t)e[n]=t[n]}return e}function a(t,a,s){const o=this,l={enumerable:!0};o.hasBeenReset=!1;let u="",d=!1,c=t,h=a,f=s,g=null,p="",m=!0,y="auto",v="start",b=50,E="middle",T=50,S="middle";Object.defineProperty(o,"id",i({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},l,{get:function(){return d},set:function(e){d=!!e}})),Object.defineProperty(o,"startTime",i({},l,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},l,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},l,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},l,{get:function(){return p},set:function(t){const r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},l,{get:function(){return y},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},l,{get:function(){return v},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},l,{get:function(){return E},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},l,{get:function(){return S},set:function(e){const t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");S=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class ho{decode(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function fo(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}const n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class go{constructor(){this.values=Object.create(null)}set(e,t){this.get(e)||""===t||(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function po(e,t,n,r){const i=r?e.split(r):[e];for(const a in i){if("string"!=typeof i[a])continue;const e=i[a].split(n);if(2!==e.length)continue;t(e[0],e[1])}}const mo=new co(0,0,""),yo="middle"===mo.align?"middle":"center";function vo(e,t,n){const r=e;function i(){const t=fo(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=i(),a(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),a(),t.endTime=i(),a(),function(e,t){const r=new go;po(e,function(e,t){let i;switch(e){case"region":for(let i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",yo,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",yo,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",yo,"end","left","right"])}},/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");let i=r.get("line","auto");"auto"===i&&-1===mo.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",yo);let a=r.get("position","auto");"auto"===a&&50===mo.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function bo(e){return e.replace(/<br(?: \/)?>/gi,"\n")}class Eo{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new ho,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;function n(){let e=t.buffer,n=0;for(e=bo(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;const r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}function r(e){po(e,function(e,t){},/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{let e="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;e=n();const r=e.match(/^()?WEBVTT([ \t].*)?$/);if(null==r||!r[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:e=n(),t.state){case"HEADER":/:/.test(e)?r(e):e||(t.state="ID");continue;case"NOTE":e||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(e)){t.state="NOTE";break}if(!e)continue;if(t.cue=new co(0,0,""),t.state="CUE",-1===e.indexOf("--\x3e")){t.cue.id=e;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{vo(e,t.cue,t.regionList)}catch(i){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const n=-1!==e.indexOf("--\x3e");if(!e||n&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=e}continue;case"BADCUE":e||(t.state="ID")}}}catch(i){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const To=/\r\n|\n\r|\n|\r/g,So=function(e,t,n=0){return e.slice(n,n+t.length)===t};function wo(e,t,n){return xs(e.toString())+xs(t.toString())+xs(n)}function Ao(e,t,r,i,a,s,o){const l=new Eo,u=L(new Uint8Array(e)).trim().replace(To,"\n").split("\n"),d=[],c=t?function(e,t=1){return Ki(e,9e4,1/t)}(t.baseTime,t.timescale):0;let h,f="00:00.000",g=0,p=0,m=!0;l.oncue=function(e){const n=r[i];let s=r.ccOffset;const o=(g-c)/9e4;if(null!=n&&n.new&&(void 0!==p?s=r.ccOffset=n.start:function(e,t,n){let r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!=(a=i)&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,r=i,i=e[r.prevCC]}e.presentationOffset=n}(r,i,o)),o){if(!t)return void(h=new Error("Missing initPTS for VTT MPEGTS"));s=o-r.presentationOffset}const l=e.endTime-e.startTime,u=ea(9e4*(e.startTime+s-p),9e4*a)/9e4;e.startTime=Math.max(u,0),e.endTime=Math.max(u+l,0);const f=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(f)),e.id||(e.id=wo(e.startTime,e.endTime,f)),e.endTime>0&&d.push(e)},l.onparsingerror=function(e){h=e},l.onflush=function(){h?o(h):s(d)},u.forEach(e=>{if(m){if(So(e,"X-TIMESTAMP-MAP=")){m=!1,e.slice(16).split(",").forEach(e=>{So(e,"LOCAL:")?f=e.slice(6):So(e,"MPEGTS:")&&(g=parseInt(e.slice(7)))});try{p=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(n(t)&&n(r)&&n(i)&&n(a)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=6e4*i,t+=36e5*a,t}(f)/1e3}catch(t){h=t}return}""===e&&(m=!1)}l.parse(e+"\n")}),l.flush()}const Io="stpp.ttml.im1t",ko=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,_o=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Ro={left:"start",center:"center",right:"end",start:"start",end:"end"};function xo(e,t,n,r){const i=oe(new Uint8Array(e),["mdat"]);if(0===i.length)return void r(new Error("Could not parse IMSC1 mdat"));const a=i.map(e=>L(e)),s=function(e,t,n=1,r=!1){return Ki(e,t,1/n,r)}(t.baseTime,1,t.timescale);try{a.forEach(e=>n(function(e,t){const n=(new DOMParser).parseFromString(e,"text/xml"),r=n.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(i).reduce((e,t)=>(e[t]=r.getAttribute(`ttp:${t}`)||i[t],e),{}),s="preserve"!==r.getAttribute("xml:space"),o=Do(Co(r,"styling","style")),l=Do(Co(r,"layout","region")),u=Co(r,"body","[begin]");return[].map.call(u,e=>{const n=Lo(e,s);if(!n||!e.hasAttribute("begin"))return null;const r=Po(e.getAttribute("begin"),a),i=Po(e.getAttribute("dur"),a);let u=Po(e.getAttribute("end"),a);if(null===r)throw No(e);if(null===u){if(null===i)throw No(e);u=r+i}const d=new co(r-t,u-t,n);d.id=wo(d.startTime,d.endTime,d.text);const c=function(e,t,n){const r="http://www.w3.org/ns/ttml#styling";let i=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;s&&n.hasOwnProperty(s)&&(i=n[s]);return a.reduce((n,a)=>{const s=Mo(t,r,a)||Mo(e,r,a)||Mo(i,r,a);return s&&(n[a]=s),n},{})}(l[e.getAttribute("region")],o[e.getAttribute("style")],o),{textAlign:h}=c;if(h){const e=Ro[h];e&&(d.lineAlign=e),d.align=h}return E(d,c),d}).filter(e=>null!==e)}(e,s)))}catch(o){r(o)}}function Co(e,t,n){const r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Do(e){return e.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function Lo(e,t){return[].slice.call(e.childNodes).reduce((e,n,r)=>{var i;return"br"===n.nodeName&&r?e+"\n":null!=(i=n.childNodes)&&i.length?Lo(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent},"")}function Mo(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function No(e){return new Error(`Could not parse ttml timestamp ${e}`)}function Po(e,t){if(!e)return null;let n=fo(e);return null===n&&(ko.test(e)?n=function(e,t){const n=ko.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):_o.test(e)&&(n=function(e,t){const n=_o.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}class Oo{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}function Fo(e){return e.characteristics&&/transcribes-spoken-dialog/gi.test(e.characteristics)&&/describes-music-and-sound/gi.test(e.characteristics)?"captions":"subtitles"}function Uo(e,t){return!!e&&e.kind===Fo(t)&&ma(t,e)}function zo(e,t,n,r){return Math.min(t,r)-Math.max(e,n)}const Bo=/\s/,jo={newCue(e,t,n,r){const i=[];let a,s,o,l,u;const d=self.VTTCue||self.TextTrackCue;for(let h=0;h<r.rows.length;h++)if(a=r.rows[h],o=!0,l=0,u="",!a.isEmpty()){var c;for(let e=0;e<a.chars.length;e++)Bo.test(a.chars[e].uchar)&&o?l++:(u+=a.chars[e].uchar,o=!1);a.cueStartTime=t,t===n&&(n+=1e-4),l>=16?l--:l++;const r=bo(u.trim()),f=wo(t,n,r);null!=e&&null!=(c=e.cues)&&c.getCueById(f)||(s=new d(t,n,r),s.id=f,s.line=h+1,s.align="left",s.position=10+Math.min(80,10*Math.floor(8*l/32)),i.push(s))}return e&&i.length&&(i.sort((e,t)=>"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line),i.forEach(t=>Is(e,t))),i}};const qo=/(\d+)-(\d+)\/(\d+)/;class Go{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Ho,this.controller=new self.AbortController,this.stats=new H}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const a=function(e,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(E({},e.headers))};e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1));return n}(e,this.controller.signal),s="arraybuffer"===e.responseType,o=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=l&&n(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout);(la(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(r=>{var a;this.response=this.loader=r;const o=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},u-(o-i.loading.start)),!r.ok){const{status:e,statusText:t}=r;throw new Vo(t||"fetch, bad network response",e,r)}i.loading.first=o,i.total=function(e){const t=e.get("Content-Range");if(t){const e=function(e){const t=qo.exec(e);if(t)return parseInt(t[2])-parseInt(t[1])+1}(t);if(n(e))return e}const r=e.get("Content-Length");if(r)return parseInt(r)}(r.headers)||i.total;const l=null==(a=this.callbacks)?void 0:a.onProgress;return l&&n(t.highWaterMark)?this.loadProgressively(r,i,e,t.highWaterMark,l):s?r.arrayBuffer():"json"===e.responseType?r.json():r.text()}).then(r=>{var a,s;const l=this.response;if(!l)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const u=r[o];u&&(i.loaded=i.total=u);const d={url:l.url,data:r,code:l.status},c=null==(a=this.callbacks)?void 0:a.onProgress;c&&!n(t.highWaterMark)&&c(i,e,r,l),null==(s=this.callbacks)||s.onSuccess(d,i,e,l)}).catch(t=>{var n;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const r=t&&t.code||0,a=t?t.message:null;null==(n=this.callbacks)||n.onError({code:r,text:a},e,t?t.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,r=0,i){const a=new Ur,s=e.body.getReader(),o=()=>s.read().then(s=>{if(s.done)return a.dataLength&&i(t,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const l=s.value,u=l.length;return t.loaded+=u,u<r||a.dataLength?(a.push(l),a.dataLength>=r&&i(t,n,a.flush().buffer,e)):i(t,n,l.buffer,e),o()}).catch(()=>Promise.reject());return o()}}function Ho(e,t){return new self.Request(e.url,t)}class Vo extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Ko=/^age:\s*[\d.]+\s*$/im;class $o{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new H,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),null!=(e=this.callbacks)&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(this.loader===n&&!this.stats.aborted)return i(n,t.url)}).catch(e=>{if(this.loader===n&&!this.stats.aborted)return n.open("GET",t.url,!0),i(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(e=>{var i;null==(i=this.callbacks)||i.onError({code:n.status,text:e.message},t,n,r)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const n in i)e.setRequestHeader(n,i[n]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&n(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const r=t.readyState,i=this.config;if(!n.aborted&&r>=2&&(0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),4===r)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const r=t.status,l="text"===t.responseType?t.responseText:null;if(r>=200&&r<300){const i=null!=l?l:t.response;if(null!=i){var a,s;n.loading.end=Math.max(self.performance.now(),n.loading.first);const o="arraybuffer"===t.responseType?i.byteLength:i.length;n.loaded=n.total=o,n.bwEstimate=8e3*n.total/(n.loading.end-n.loading.first);const l=null==(a=this.callbacks)?void 0:a.onProgress;l&&l(n,e,i,t);const u={url:t.responseURL,data:i,code:r};return void(null==(s=this.callbacks)||s.onSuccess(u,n,e,t))}}const u=i.loadPolicy.errorRetry;var o;if(At(u,n.retry,!1,{url:e.url,data:void 0,code:r}))this.retry(u);else x.error(`${r} while loading ${e.url}`),null==(o=this.callbacks)||o.onError({code:r,text:t.statusText},e,t,n)}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry;if(At(e,this.stats.retry,!0))this.retry(e);else{var t;x.warn(`timeout while loading ${null==(t=this.context)?void 0:t.url}`);const e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=St(e,n.retry),n.retry++,x.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${null==t?void 0:t.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Ko.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const Yo=S(S({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:6e7,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:$o,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class extends w{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=e=>{var t;const{fragCurrent:r,partCurrent:i,hls:a}=this,{autoLevelEnabled:s,media:o}=a;if(!r||!o)return;const l=performance.now(),d=i?i.stats:r.stats,c=i?i.duration:r.duration,h=l-d.loading.start,f=a.minAutoLevel,g=r.level,p=this._nextAutoLevel;if(d.aborted||d.loaded&&d.loaded===d.total||g<=f)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!s)return;const m=p>-1&&p!==g,y=!!e||m;if(!y&&(o.paused||!o.playbackRate||!o.readyState))return;const v=a.mainForwardBufferInfo;if(!y&&null===v)return;const b=this.bwEstimator.getEstimateTTFB(),E=Math.abs(o.playbackRate);if(h<=Math.max(b,c/(2*E)*1e3))return;const T=v?v.len/E:0,S=d.loading.first?d.loading.first-d.loading.start:-1,w=d.loaded&&S>-1,A=this.getBwEstimate(),I=a.levels,k=I[g],_=Math.max(d.loaded,Math.round(c*(r.bitrate||k.averageBitrate)/8));let R=w?h-S:h;R<1&&w&&(R=Math.min(h,8*d.loaded/A));const x=w?1e3*d.loaded/R:0,C=b/1e3,D=x?(_-d.loaded)/x:8*_/A+C;if(D<=T)return;const L=x?8*x:A,M=!0===(null==(t=(null==e?void 0:e.details)||this.hls.latestLevelDetails)?void 0:t.live),N=this.hls.config.abrBandWidthUpFactor;let P,O=Number.POSITIVE_INFINITY;for(P=g-1;P>f;P--){const e=I[P].maxBitrate,t=!I[P].details||M;if(O=this.getTimeToLoadFrag(C,L,c*e,t),O<Math.min(T,c+C))break}if(O>=D)return;if(O>10*c)return;w?this.bwEstimator.sample(h-Math.min(b,S),d.loaded):this.bwEstimator.sampleTTFB(h);const F=I[P].maxBitrate;this.getBwEstimate()*N>F&&this.resetEstimator(F);const U=this.findBestLevel(F,f,P,0,T,1,1);U>-1&&(P=U),this.warn(`Fragment ${r.sn}${i?" part "+i.index:""} of level ${g} is loading too slowly;\n      Fragment duration: ${r.duration.toFixed(3)}\n      Time to underbuffer: ${T.toFixed(3)} s\n      Estimated load time for current fragment: ${D.toFixed(3)} s\n      Estimated load time for down switch fragment: ${O.toFixed(3)} s\n      TTFB estimate: ${0|S} ms\n      Current BW estimate: ${n(A)?0|A:"Unknown"} bps\n      New BW estimate: ${0|this.getBwEstimate()} bps\n      Switching to level ${P} @ ${0|F} bps`),a.nextLoadLevel=a.nextAutoLevel=P,this.clearTimer();const z=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===P&&P>0){const e=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${P>0?"and switching down":""}\n      Fragment duration: ${r.duration.toFixed(3)} s\n      Time to underbuffer: ${e.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,P>f){let t=this.findBestLevel(this.hls.levels[f].bitrate,f,P,0,e,1,1);-1===t&&(t=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=t,this.resetEstimator(this.hls.levels[t].bitrate)}}};m||D>2*O?z():this.timer=self.setInterval(z,1e3*O),a.trigger(u.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:i,stats:d})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new v(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.FRAG_LOADING,this.onFragLoading,this),e.on(u.FRAG_LOADED,this.onFragLoaded,this),e.on(u.FRAG_BUFFERED,this.onFragBuffered,this),e.on(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(u.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(u.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.FRAG_LOADING,this.onFragLoading,this),e.off(u.FRAG_LOADED,this.onFragLoaded,this),e.off(u.FRAG_BUFFERED,this.onFragBuffered,this),e.off(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(u.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(u.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(u.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){var r;if(!n.bitrateTest)this.fragCurrent=n,this.partCurrent=null!=(r=t.part)?r:null;this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case l.BUFFER_ADD_CODEC_ERROR:case l.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case l.FRAG_LOAD_TIMEOUT:{const e=t.frag,{fragCurrent:n,partCurrent:r}=this;if(e&&n&&e.sn===n.sn&&e.level===n.level){const t=performance.now(),n=r?r.stats:e.stats,i=t-n.loading.start,a=n.loading.first?n.loading.first-n.loading.start:-1;if(n.loaded&&a>-1){const e=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(i-Math.min(e,a),n.loaded)}else this.bwEstimator.sampleTTFB(i)}break}}}getTimeToLoadFrag(e,t,n,r){return e+n/t+(r?e+this.lastLevelLoadSec:0)}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,a=i.end-i.first;n(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:n}){const r=n?n.stats:t.stats;if(t.type===g&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const e=n?n.duration:t.duration,i=this.hls.levels[t.level],a=(i.loaded?i.loaded.bytes:0)+r.loaded,s=(i.loaded?i.loaded.duration:0)+e;i.loaded={bytes:a,duration:s},i.realBitrate=Math.round(8*a/s)}if(t.bitrateTest){const e={stats:r,frag:t,part:n,id:t.type};this.onFragBuffered(u.FRAG_BUFFERED,e),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:r}=t,i=null!=r&&r.stats.loaded?r.stats:n.stats;if(i.aborted)return;if(this.ignoreFragment(n))return;const a=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==g||"initSegment"===e.sn}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,i=this.findBestLevel(n,t,e,0,r,1,1);if(i>-1)return i;const a=this.hls.firstLevel,s=Math.min(Math.max(a,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${s}`),s}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,t=this.bwEstimator.canEstimate(),n=this.lastLoadedFragLevel>-1;if(!(-1===e||t&&n&&this.nextAutoLevelKey!==this.getAutoLevelKey()))return e;const r=t&&n?this.getNextABRAutoLevel():this.firstAutoLevel;if(-1!==e){const t=this.hls.levels;if(t.length>Math.max(e,r)&&t[e].loadError<=t[r].loadError)return e}return this._nextAutoLevel=r,this.nextAutoLevelKey=this.getAutoLevelKey(),r}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:i,minAutoLevel:a}=n,s=t?t.duration:e?e.duration:0,o=this.getBwEstimate(),l=this.getStarvationDelay();let u=i.abrBandWidthFactor,d=i.abrBandWidthUpFactor;if(l){const e=this.findBestLevel(o,a,r,l,0,u,d);if(e>=0)return this.rebufferNotice=-1,e}let c=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay;if(!l){const e=this.bitrateTestDelay;if(e){c=(s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay)-e,this.info(`bitrate test took ${Math.round(1e3*e)}ms, set first fragment max fetchDuration to ${Math.round(1e3*c)} ms`),u=d=1}}const h=this.findBestLevel(o,a,r,l,c,u,d);if(this.rebufferNotice!==h&&(this.rebufferNotice=h,this.info(`${l?"rebuffering expected":"buffer is empty"}, optimal quality level ${h}`)),h>-1)return h;const f=n.levels[a],g=n.loadLevelObj;return g&&(null==f?void 0:f.bitrate)<g.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&0!==t.playbackRate?Math.abs(t.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,a,s,o){var l;const u=i+a,d=this.lastLoadedFragLevel,c=-1===d?this.hls.firstLevel:d,{fragCurrent:h,partCurrent:f}=this,{levels:g,allAudioTracks:p,loadLevel:m,config:y}=this.hls;if(1===g.length)return 0;const v=g[c],b=!(null==(l=this.hls.latestLevelDetails)||!l.live),E=-1===m||-1===d;let T,S="SDR",w=(null==v?void 0:v.frameRate)||0;const{audioPreference:A,videoPreference:I}=y,k=this.audioTracksByGroup||(this.audioTracksByGroup=st(p));let _=-1;if(E){if(-1!==this.firstSelection)return this.firstSelection;const i=this.codecTiers||(this.codecTiers=function(e,t,n,r){return e.slice(n,r+1).reduce((e,n,r)=>{if(!n.codecSet)return e;const i=n.audioGroups;let a=e[n.codecSet];a||(e[n.codecSet]=a={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:r,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!i,fragmentError:0}),a.minBitrate=Math.min(a.minBitrate,n.bitrate);const s=Math.min(n.height,n.width);return a.minHeight=Math.min(a.minHeight,s),a.minFramerate=Math.min(a.minFramerate,n.frameRate),a.minIndex=Math.min(a.minIndex,r),a.maxScore=Math.max(a.maxScore,n.score),a.fragmentError+=n.fragmentError,a.videoRanges[n.videoRange]=(a.videoRanges[n.videoRange]||0)+1,i&&i.forEach(e=>{if(!e)return;const n=t.groups[e];n&&(a.hasDefaultAudio=a.hasDefaultAudio||t.hasDefaultAudio?n.hasDefault:n.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(n.channels).forEach(e=>{a.channels[e]=(a.channels[e]||0)+n.channels[e]}))}),e},{})}(g,k,t,r)),a=function(e,t,r,i,a){const s=Object.keys(e),o=null==i?void 0:i.channels,l=null==i?void 0:i.audioCodec,u=null==a?void 0:a.videoCodec,d=o&&2===parseInt(o);let c=!1,h=!1,f=1/0,g=1/0,p=1/0,m=1/0,y=0,v=[];const{preferHDR:b,allowedVideoRanges:E}=rt(t,a);for(let n=s.length;n--;){const t=e[s[n]];c||(c=t.channels[2]>0),f=Math.min(f,t.minHeight),g=Math.min(g,t.minFramerate),p=Math.min(p,t.minBitrate),E.filter(e=>t.videoRanges[e]>0).length>0&&(h=!0)}f=n(f)?f:0,g=n(g)?g:0;const T=Math.max(1080,f),S=Math.max(30,g);p=n(p)?p:r,r=Math.max(p,r),h||(t=void 0);const w=s.length>1;return{codecSet:s.reduce((t,n)=>{const i=e[n];if(n===t)return t;if(v=h?E.filter(e=>i.videoRanges[e]>0):[],w){if(i.minBitrate>r)return at(n,`min bitrate of ${i.minBitrate} > current estimate of ${r}`),t;if(!i.hasDefaultAudio)return at(n,"no renditions with default or auto-select sound found"),t;if(l&&n.indexOf(l.substring(0,4))%5!=0)return at(n,`audio codec preference "${l}" not found`),t;if(o&&!d){if(!i.channels[o])return at(n,`no renditions with ${o} channel sound found (channels options: ${Object.keys(i.channels)})`),t}else if((!l||d)&&c&&0===i.channels[2])return at(n,"no renditions with stereo sound found"),t;if(i.minHeight>T)return at(n,`min resolution of ${i.minHeight} > maximum of ${T}`),t;if(i.minFramerate>S)return at(n,`min framerate of ${i.minFramerate} > maximum of ${S}`),t;if(!v.some(e=>i.videoRanges[e]>0))return at(n,`no variants with VIDEO-RANGE of ${it(v)} found`),t;if(u&&n.indexOf(u.substring(0,4))%5!=0)return at(n,`video codec preference "${u}" not found`),t;if(i.maxScore<y)return at(n,`max score of ${i.maxScore} < selected max of ${y}`),t}return t&&(Le(n)>=Le(t)||i.fragmentError>e[t].fragmentError)?t:(m=i.minIndex,y=i.maxScore,n)},void 0),videoRanges:v,preferHDR:b,minFramerate:g,minBitrate:p,minIndex:m}}(i,S,e,A,I),{codecSet:s,videoRanges:o,minFramerate:l,minBitrate:u,minIndex:d,preferHDR:c}=a;_=d,T=s,S=c?o[o.length-1]:o[0],w=l,e=Math.max(e,u),this.log(`picked start tier ${it(a)}`)}else T=null==v?void 0:v.codecSet,S=null==v?void 0:v.videoRange;const R=f?f.duration:h?h.duration:0,x=this.bwEstimator.getEstimateTTFB()/1e3,C=[];for(let L=r;L>=t;L--){var D;const t=g[L],l=L>c;if(!t)continue;if(y.useMediaCapabilities&&!t.supportedResult&&!t.supportedPromise){const n=navigator.mediaCapabilities;"function"==typeof(null==n?void 0:n.decodingInfo)&&He(t,k,S,w,e,A)?(t.supportedPromise=Ve(t,k,n,this.supportedCache),t.supportedPromise.then(e=>{if(!this.hls)return;t.supportedResult=e;const n=this.hls.levels,r=n.indexOf(t);e.error?this.warn(`MediaCapabilities decodingInfo error: "${e.error}" for level ${r} ${it(e)}`):e.supported?e.decodingInfoResults.some(e=>!1===e.smooth||!1===e.powerEfficient)&&this.log(`MediaCapabilities decodingInfo for level ${r} not smooth or powerEfficient: ${it(e)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${r} ${it(e)}`),r>-1&&n.length>1&&(this.log(`Removing unsupported level ${r}`),this.hls.removeLevel(r),-1===this.hls.loadLevel&&(this.hls.nextLoadLevel=0)))}).catch(e=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${e}`)})):t.supportedResult=qe}if((T&&t.codecSet!==T||S&&t.videoRange!==S||l&&w>t.frameRate||!l&&w>0&&w<t.frameRate||null!=(D=t.supportedResult)&&null!=(D=D.decodingInfoResults)&&D.some(e=>!1===e.smooth))&&(!E||L!==_)){C.push(L);continue}const h=t.details,p=(f?null==h?void 0:h.partTarget:null==h?void 0:h.averagetargetduration)||R;let v;v=l?o*e:s*e;const I=R&&i>=2*R&&0===a?t.averageBitrate:t.maxBitrate,M=this.getTimeToLoadFrag(x,v,I*p,void 0===h);if(v>=I&&(L===d||0===t.loadError&&0===t.fragmentError)&&(M<=x||!n(M)||b&&!this.bitrateTestDelay||M<u)){const e=this.forcedAutoLevel;return L===m||-1!==e&&e===m||(C.length&&this.trace(`Skipped level(s) ${C.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${g[C[0]].codecs}" ${g[C[0]].videoRange}; not compatible with "${T}" ${S}`),this.info(`switch candidate:${c}->${L} adjustedbw(${Math.round(v)})-bitrate=${Math.round(v-I)} ttfb:${x.toFixed(1)} avgDuration:${p.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${M.toFixed(1)} firstSelection:${E} codecSet:${t.codecSet} videoRange:${t.videoRange} hls.loadLevel:${m}`)),E&&(this.firstSelection=L),L}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),t)}},bufferController:class extends w{constructor(e,t){var n;super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=e=>{var t;this.hls&&"open"===(null==(t=this.mediaSource)?void 0:t.readyState)&&this.hls.pauseBuffering()},this._onStartStreaming=e=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=e=>{const{media:t,mediaSource:n}=this;e&&this.log("Media source opened"),t&&n&&(n.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(u.MEDIA_ATTACHED,{media:t,mediaSource:n}),null!==this.mediaSource&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:e,_objectUrl:t}=this;e!==t&&this.error(`Media element src was set while attaching MediaSource (${t} > ${e})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=(n=C(e.config.preferManagedMediaSource),"undefined"!=typeof self&&n===self.ManagedMediaSource),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.BUFFER_RESET,this.onBufferReset,this),e.on(u.BUFFER_APPENDING,this.onBufferAppending,this),e.on(u.BUFFER_CODECS,this.onBufferCodecs,this),e.on(u.BUFFER_EOS,this.onBufferEos,this),e.on(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(u.FRAG_PARSED,this.onFragParsed,this),e.on(u.FRAG_CHANGED,this.onFragChanged,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.BUFFER_RESET,this.onBufferReset,this),e.off(u.BUFFER_APPENDING,this.onBufferAppending,this),e.off(u.BUFFER_CODECS,this.onBufferCodecs,this),e.off(u.BUFFER_EOS,this.onBufferEos,this),e.off(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(u.FRAG_PARSED,this.onFragParsed,this),e.off(u.FRAG_CHANGED,this.onFragChanged,this),e.off(u.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const n={};if(this.operationQueue){const e=this.isUpdating();e||this.operationQueue.removeBlockers();const t=this.isQueued();(e||t)&&this.warn(`Transfering MediaSource with${t?" operations in queue":""}${e?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===t?E(n,r.tracks):this.sourceBuffers.forEach(e=>{const[t]=e;t&&(n[t]=E({},this.tracks[t]),this.removeBuffer(t)),e[0]=e[1]=null}),{media:e,mediaSource:t,tracks:n}}initTracks(){this.sourceBuffers=[[null,null],[null,null]],this.tracks={},this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var n;let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),null!=(n=this.transferData)&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,t){const n=this.media=t.media;this.transferData=this.overrides=void 0;const r=C(this.appendSource);if(r){const e=!!t.mediaSource;(e||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const a=this.mediaSource=t.mediaSource||new r;if(this.assignMediaSource(a),e)this._objectUrl=n.src,this.attachTransferred();else{const e=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const t=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||t&&a instanceof t,Ta(n),function(e,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,e.appendChild(n)}(n,e),n.load()}catch(i){n.src=e}else n.src=e}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,n;this.log(`${(null==(t=this.transferData)?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${null==(n=e.constructor)?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const n=this.tracks,r=t.tracks,i=r?Object.keys(r):null,a=i?i.length:0,s=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&i&&a){if(!this.tracksReady)return this.hls.config.startFragPrefetch=!0,void this.log("attachTransferred: waiting for SourceBuffer track info");if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${it(n,(e,t)=>"initSegment"===e?void 0:t)};\ntransfer tracks: ${it(r,(e,t)=>"initSegment"===e?void 0:t)}}`),!D(r,n)){t.mediaSource=null,t.tracks=void 0;const i=e.currentTime,a=this.details,s=Math.max(i,(null==a?void 0:a.fragments[0].start)||0);return s-i>1?void this.log(`attachTransferred: waiting for playback to reach new tracks start time ${i} -> ${s}`):(this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${s} currentTime: ${i}`),this.onMediaDetaching(u.MEDIA_DETACHING,{}),this.onMediaAttaching(u.MEDIA_ATTACHING,t),void(e.currentTime=s))}this.transferData=void 0,i.forEach(e=>{const t=e,n=r[t];if(n){const e=n.buffer;if(e){const r=this.fragmentTracker,i=n.id;if(r.hasFragments(i)||r.hasParts(i)){const n=rn.getBuffered(e);r.detectEvictedFragments(t,n,i,null,!0)}const a=Sa(t),s=[t,e];this.sourceBuffers[a]=s,e.updating&&this.operationQueue&&this.operationQueue.prependBlocker(t),this.trackSourceBuffer(t,n)}}}),s(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),s()}get mediaSourceOpenOrEnded(){var e;const t=null==(e=this.mediaSource)?void 0:e.readyState;return"open"===t||"ended"===t}onMediaDetaching(e,t){const n=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:i,_objectUrl:a}=this;if(i){if(this.log("media source "+(n?"transferring":"detaching")),n)this.sourceBuffers.forEach(([e])=>{e&&this.removeBuffer(e)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const e="open"===i.readyState;try{const t=i.sourceBuffers;for(let n=t.length;n--;)e&&t[n].abort(),i.removeSourceBuffer(t[n]);e&&i.endOfStream()}catch(Vl){this.warn(`onMediaDetaching: ${Vl.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}i.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("sourceended",this._onMediaSourceEnded),i.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(i.removeEventListener("startstreaming",this._onStartStreaming),i.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&Ta(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(u.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;if(this.removeBuffer(e),n)try{var r;null!=(r=this.mediaSource)&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(Vl){this.warn(`onBufferReset ${e}`,Vl)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Sa(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new ya(this.tracks)}onBufferCodecs(e,t){var n;const r=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),s=!a&&this.sourceBufferCount&&this.media&&i.some(e=>!r[e]);a||s?this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`):(i.forEach(e=>{var n,i;const a=t[e],{id:s,codec:o,levelCodec:l,container:u,metadata:d,supplemental:c}=a;let h=r[e];const f=null==(n=this.transferData)||null==(n=n.tracks)?void 0:n[e],g=null!=f&&f.buffer?f:h,p=(null==g?void 0:g.pendingCodec)||(null==g?void 0:g.codec),m=null==g?void 0:g.levelCodec;h||(h=r[e]={buffer:void 0,listeners:[],codec:o,supplemental:c,container:u,levelCodec:l,metadata:d,id:s});const y=Oe(p,m),v=null==y?void 0:y.replace(va,"$1");let b=Oe(o,l);const E=null==(i=b)?void 0:i.replace(va,"$1");b&&y&&v!==E&&("audio"===e.slice(0,5)&&(b=Pe(b,this.appendSource)),this.log(`switching codec ${p} to ${b}`),b!==(h.pendingCodec||h.codec)&&(h.pendingCodec=b),h.container=u,this.appendChangeType(e,u,b))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),this.sourceBufferCount||(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&"main"===(null==(n=t.audio)?void 0:n.id)&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks()))}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const n=this.tracks[t];return e[t]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,t,n){const r=`${t};codecs=${n}`,i={label:`change-type=${r}`,execute:()=>{const i=this.tracks[e];if(i){const a=i.buffer;null!=a&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),a.changeType(r),i.codec=n,i.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:t=>{this.warn(`Failed to change ${e} SourceBuffer type`,t)}};this.append(i,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const n=e.start,r=n+.05*e.duration;if(!0===(null==(t=this.fragmentTracker.getAppendedFrag(n,g))?void 0:t.gap))return;const i={label:"block-audio",execute:()=>{var e;const t=this.tracks.video;(this.lastVideoAppendEnd>r||null!=t&&t.buffer&&rn.isBuffered(t.buffer,r)||!0===(null==(e=this.fragmentTracker.getAppendedFrag(r,g))?void 0:e.gap))&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:e=>{this.warn("Error executing block-audio operation",e)}};this.blockedAudioAppend={op:i,frag:e},this.append(i,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:i,type:a,parent:s,frag:d,part:c,chunkMeta:h,offset:f}=t,p=h.buffering[a],{sn:m,cc:y}=d,v=self.performance.now();p.start=v;const b=d.stats.buffering,E=c?c.stats.buffering:null;0===b.start&&(b.start=v),E&&0===E.start&&(E.start=v);const T=r.audio;let S=!1;"audio"===a&&"audio/mpeg"===(null==T?void 0:T.container)&&(S=!this.lastMpegAudioChunk||1===h.id||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);const w=r.video,A=null==w?void 0:w.buffer;if(A&&"initSegment"!==m){const e=c||d,t=this.blockedAudioAppend;if("audio"!==a||"main"===s||this.blockedAudioAppend||w.ending||w.ended){if("video"===a){const n=e.end;if(t){const e=t.frag.start;(n>e||n<this.lastVideoAppendEnd||rn.isBuffered(A,e))&&this.unblockAudio()}this.lastVideoAppendEnd=n}}else{const t=e.start+.05*e.duration,n=A.buffered,r=this.currentOp("video");n.length||r?!r&&!rn.isBuffered(A,t)&&this.lastVideoAppendEnd<t&&this.blockAudio(e):this.blockAudio(e)}}const I=(c||d).start,k={label:`append-${a}`,execute:()=>{var e;p.executeStart=self.performance.now();const t=null==(e=this.tracks[a])?void 0:e.buffer;t&&(S?this.updateTimestampOffset(t,I,.1,a,m,y):void 0!==f&&n(f)&&this.updateTimestampOffset(t,f,1e-6,a,m,y)),this.appendExecutor(i,a)},onStart:()=>{},onComplete:()=>{const e=self.performance.now();p.executeEnd=p.end=e,0===b.first&&(b.first=e),E&&0===E.first&&(E.first=e);const t={};this.sourceBuffers.forEach(([e,n])=>{e&&(t[e]=rn.getBuffered(n))}),this.appendErrors[a]=0,"audio"===a||"video"===a?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(u.BUFFER_APPENDED,{type:a,frag:d,part:c,chunkMeta:h,parent:d.type,timeRanges:t})},onError:e=>{var t;const n={type:o.MEDIA_ERROR,parent:d.type,details:l.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:d,part:c,chunkMeta:h,error:e,err:e,fatal:!1},r=null==(t=this.media)?void 0:t.error;if(e.code===DOMException.QUOTA_EXCEEDED_ERR||"QuotaExceededError"==e.name||"quota"in e)n.details=l.BUFFER_FULL_ERROR;else if(e.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!r)n.errorAction=Nt(!0);else if(e.name===ba&&0===this.sourceBufferCount)n.errorAction=Nt(!0);else{const e=++this.appendErrors[a];this.warn(`Failed ${e}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${r||"no media error"})`),(e>=this.hls.config.appendErrorMaxRetry||r)&&(n.fatal=!0)}this.hls.trigger(u.ERROR,n)}};this.log(`queuing "${a}" append sn: ${m}${c?" p: "+c.index:""} of ${d.type===g?"level":"track"} ${d.level} cc: ${y}`),this.append(k,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,n){return this.log(`queuing "${e}" remove ${t}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(u.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${t}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,t){const{type:n,startOffset:r,endOffset:i}=t;n?this.append(this.getFlushOp(n,r,i),n):this.sourceBuffers.forEach(([e])=>{e&&this.append(this.getFlushOp(e,r,i),e)})}onFragParsed(e,t){const{frag:n,part:r}=t,i=[],a=r?r.elementaryStreams:n.elementaryStreams;a[$]?i.push("audiovideo"):(a[V]&&i.push("audio"),a[K]&&i.push("video"));0===i.length&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(()=>{const e=self.performance.now();n.stats.buffering.end=e,r&&(r.stats.buffering.end=e);const t=r?r.stats:n.stats;this.hls.trigger(u.FRAG_BUFFERED,{frag:n,part:r,stats:t,id:n.type})},i).catch(e=>{this.warn(`Fragment buffered callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var n;this.sourceBuffers.forEach(([e])=>{if(e){const n=this.tracks[e];t.type&&t.type!==e||(n.ending=!0,n.ended||(n.ended=!0,this.log(`${e} buffer reached EOS`)))}});const r=!1!==(null==(n=this.overrides)?void 0:n.endOfStream);this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{var t;return e&&!(null!=(t=this.tracks[e])&&t.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:e}=this;e&&"open"===e.readyState?(this.log("Calling mediaSource.endOfStream()"),e.endOfStream(),this.hls.trigger(u.BUFFERED_TO_END,void 0)):e&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${e.readyState}`)})):(this.tracksEnded(),this.hls.trigger(u.BUFFERED_TO_END,void 0)):"video"===t.type&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(null!==e){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===l.BUFFER_APPEND_ERROR&&t.frag){var r;const e=null==(r=t.errorAction)?void 0:r.nextAutoLevel;n(e)&&e!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||null===t)return;if(!this.sourceBufferCount)return;const i=e.config,a=r.currentTime,s=t.levelTargetDuration,o=t.live&&null!==i.liveBackBufferLength?i.liveBackBufferLength:i.backBufferLength;if(n(o)&&o>=0){const e=Math.max(o,s),t=Math.floor(a/s)*s-e;this.flushBackBuffer(a,s,t)}const l=i.frontBufferFlushThreshold;if(n(l)&&l>0){const e=Math.max(i.maxBufferLength,l),t=Math.max(e,s),n=Math.floor(a/s)*s+t;this.flushFrontBuffer(a,s,n)}}flushBackBuffer(e,t,n){this.sourceBuffers.forEach(([e,t])=>{if(t){const i=rn.getBuffered(t);if(i.length>0&&n>i.start(0)){var r;this.hls.trigger(u.BACK_BUFFER_REACHED,{bufferEnd:n});const t=this.tracks[e];if(null!=(r=this.details)&&r.live)this.hls.trigger(u.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(null!=t&&t.ended)return void this.log(`Cannot flush ${e} back buffer while SourceBuffer is in ended state`);this.hls.trigger(u.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:e})}}})}flushFrontBuffer(e,t,n){this.sourceBuffers.forEach(([t,r])=>{if(r){const i=rn.getBuffered(r),a=i.length;if(a<2)return;const s=i.start(a-1),o=i.end(a-1);if(n>s||e>=s&&e<=o)return;this.hls.trigger(u.BUFFER_FLUSHING,{startOffset:s,endOffset:1/0,type:t})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||"open"!==(null==r?void 0:r.readyState))return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const e=Math.max(0,t.fragmentStart);return{duration:1/0,start:e,end:Math.max(e,i)}}return{duration:1/0}}const a=null==(e=this.overrides)?void 0:e.duration;if(a)return n(a)?{duration:a}:null;const s=this.media.duration;return i>(n(r.duration)?r.duration:0)&&i>s||!n(s)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:r}){const i=this.mediaSource;this.media&&i&&"open"===i.readyState&&(i.duration!==e&&(n(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),void 0!==t&&void 0!==r&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${r}.`),i.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${it(n)}`),this.tracksReady){var r;const e=null==(r=this.transferData)?void 0:r.tracks;e&&Object.keys(e).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,n])=>{if(t){const r=this.tracks[t];e[t]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(u.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([e])=>{this.executeNext(e)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const s=a,d=e[s];if(this.isPending(d)){const e=this.getTrackCodec(d,s),a=`${d.container};codecs=${e}`;d.codec=e,this.log(`creating sourceBuffer(${a})${this.currentOp(s)?" Queued":""} ${it(d)}`);try{const e=n.addSourceBuffer(a),r=Sa(s),i=[s,e];t[r]=i,d.buffer=e}catch(i){var r;return this.error(`error while trying to add sourceBuffer: ${i.message}`),this.shiftAndExecuteNext(s),null==(r=this.operationQueue)||r.removeBlockers(),delete this.tracks[s],void this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:i,sourceBufferName:s,mimeType:a,parent:d.id})}this.trackSourceBuffer(s,d)}}this.bufferCreated()}getTrackCodec(e,t){const n=e.supplemental;let r=e.codec;n&&("video"===t||"audiovideo"===t)&&Re(n,"video")&&(r=function(e,t){const n=[];if(e){const t=e.split(",");for(let e=0;e<t.length;e++)_e(t[e],"video")||n.push(t[e])}return t&&n.push(t),n.join(",")}(r,n));const i=Oe(r,e.levelCodec);return i?"audio"===t.slice(0,5)?Pe(i,this.appendSource):i:""}trackSourceBuffer(e,t){const n=t.buffer;if(!n)return;const r=this.getTrackCodec(t,e);this.tracks[e]={buffer:n,codec:r,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(e,t)=>{const n=t.removedRanges;null!=n&&n.length&&this.hls.trigger(u.BUFFER_FLUSHED,{type:e})})}get mediaSrc(){var e,t;const n=(null==(e=this.media)||null==(t=e.querySelector)?void 0:t.call(e,"source"))||this.media;return null==n?void 0:n.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if("closed"===(null==(t=this.mediaSource)?void 0:t.readyState))return void this.resetBuffer(e);const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${null==(n=this.mediaSource)?void 0:n.readyState}`);this.error(`${r}`,t),this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const i=this.currentOp(e);i&&i.onError(r)}updateTimestampOffset(e,t,n,r,i,a){const s=t-e.timestampOffset;Math.abs(s)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${t} (sn: ${i} cc: ${a})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:i,mediaSource:a}=this,s=this.tracks[e],o=null==s?void 0:s.buffer;if(!i||!a||!o)return this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),void this.shiftAndExecuteNext(e);const l=n(i.duration)?i.duration:1/0,u=n(a.duration)?a.duration:1/0,d=Math.max(0,t),c=Math.min(r,l,u);c>d&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${d},${c}] from the ${e} SourceBuffer`),o.remove(d,c)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.tracks[t],r=null==n?void 0:n.buffer;if(!r)throw new Ea(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(e=>{this.warn(`SourceBuffer blocked callback ${e}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=t.map(e=>this.appendBlocker(e));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(t=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(e=>{var t;const n=null==(t=this.tracks[e])?void 0:t.buffer;n&&!n.updating&&this.shiftAndExecuteNext(e)})}append(e,t,n){this.operationQueue&&this.operationQueue.append(e,t,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,n){const r=this.tracks[e];if(!r)return;const i=r.buffer;if(!i)return;const a=n.bind(this,e);r.listeners.push({event:t,listener:a}),i.addEventListener(t,a)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const n=t.buffer;n&&(t.listeners.forEach(e=>{n.removeEventListener(e.event,e.listener)}),t.listeners.length=0)}},capLevelController:wa,errorController:class extends w{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(u.ERROR,this.onError,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(u.ERROR,this.onError,this),e.off(u.ERROR,this.onErrorOut,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(null==e?void 0:e.type)===g?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,n=t.currentLevel;return null!=(e=t.loadLevelObj)&&e.details||-1===n?t.loadLevel:n}variantHasKey(e,t){if(e){var n;if(null!=(n=e.details)&&n.hasKey(t))return!0;const r=e.audioGroups;if(r){return this.hls.allAudioTracks.filter(e=>r.indexOf(e.groupId)>=0).some(e=>{var n;return null==(n=e.details)?void 0:n.hasKey(t)})}}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var n;if(t.fatal)return;const r=this.hls,i=t.context;switch(t.details){case l.FRAG_LOAD_ERROR:case l.FRAG_LOAD_TIMEOUT:case l.KEY_LOAD_ERROR:case l.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case l.FRAG_PARSING_ERROR:if(null!=(n=t.frag)&&n.gap)return void(t.errorAction=Nt());case l.FRAG_GAP:case l.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=_t);case l.LEVEL_EMPTY_ERROR:case l.LEVEL_PARSING_ERROR:{var a;const e=t.parent===g?t.level:r.loadLevel;t.details===l.LEVEL_EMPTY_ERROR&&null!=(a=t.context)&&null!=(a=a.levelDetails)&&a.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,e):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,e))}return;case l.LEVEL_LOAD_ERROR:case l.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==i?void 0:i.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.level)));case l.AUDIO_TRACK_LOAD_ERROR:case l.AUDIO_TRACK_LOAD_TIMEOUT:case l.SUBTITLE_LOAD_ERROR:case l.SUBTITLE_TRACK_LOAD_TIMEOUT:if(i){const e=r.loadLevelObj;if(e&&(i.type===h&&e.hasAudioGroup(i.groupId)||i.type===f&&e.hasSubtitleGroup(i.groupId)))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,r.loadLevel),t.errorAction.action=_t,void(t.errorAction.flags=Dt)}return;case l.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:return void(t.errorAction={action:_t,flags:Lt});case l.KEY_SYSTEM_SESSION_UPDATE_FAILED:case l.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case l.KEY_SYSTEM_NO_SESSION:return void(t.errorAction={action:_t,flags:Mt});case l.BUFFER_ADD_CODEC_ERROR:case l.REMUX_ALLOC_ERROR:case l.BUFFER_APPEND_ERROR:var s;if(!t.errorAction)t.errorAction=this.getLevelSwitchAction(t,null!=(s=t.level)?s:r.loadLevel);return;case l.INTERNAL_EXCEPTION:case l.BUFFER_APPENDING_ERROR:case l.BUFFER_FULL_ERROR:case l.LEVEL_SWITCH_ERROR:case l.BUFFER_STALLED_ERROR:case l.BUFFER_SEEK_OVER_HOLE:case l.BUFFER_NUDGE_ON_STALL:return void(t.errorAction=Nt())}t.type===o.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=Nt())}getPlaylistRetryOrSwitchAction(e,t){const n=Tt(this.hls.config.playlistLoadPolicy,e),r=this.playlistError++;if(At(n,r,vt(e),e.response))return{action:xt,flags:Ct,retryConfig:n,retryCount:r};const i=this.getLevelSwitchAction(e,t);return n&&(i.retryConfig=n,i.retryCount=r),i}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),r=t.levels[n],{fragLoadPolicy:i,keyLoadPolicy:a}=t.config,s=Tt(bt(e)?a:i,e),o=t.levels.reduce((e,t)=>e+t.fragmentError,0);if(r&&(e.details!==l.FRAG_GAP&&r.fragmentError++,!Et(e))){if(At(s,o,vt(e),e.response))return{action:xt,flags:Ct,retryConfig:s,retryCount:o}}const u=this.getLevelSwitchAction(e,n);return s&&(u.retryConfig=s,u.retryCount=o),u}getLevelSwitchAction(e,t){const n=this.hls;null==t&&(t=n.loadLevel);const r=this.hls.levels[t];if(r){var i,a;const t=e.details;r.loadError++,t===l.BUFFER_APPEND_ERROR&&r.fragmentError++;let u=-1;const{levels:d,loadLevel:c,minAutoLevel:y,maxAutoLevel:v}=n;n.autoLevelEnabled||n.config.preserveManualLevelOnError||(n.loadLevel=-1);const b=null==(i=e.frag)?void 0:i.type,E=(b===p&&t===l.FRAG_PARSING_ERROR||"audio"===e.sourceBufferName&&(t===l.BUFFER_ADD_CODEC_ERROR||t===l.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:e})=>r.audioCodec!==e),T="video"===e.sourceBufferName&&(t===l.BUFFER_ADD_CODEC_ERROR||t===l.BUFFER_APPEND_ERROR)&&d.some(({codecSet:e,audioCodec:t})=>r.codecSet!==e&&r.audioCodec===t),{type:S,groupId:w}=null!=(a=e.context)?a:{};for(let n=d.length;n--;){const i=(n+c)%d.length;if(i!==c&&i>=y&&i<=v&&0===d[i].loadError){var s,o;const n=d[i];if(t===l.FRAG_GAP&&b===g&&e.frag){const t=d[i].details;if(t){const n=gt(e.frag,t.fragments,e.frag.start);if(null!=n&&n.gap)continue}}else{if(S===h&&n.hasAudioGroup(w)||S===f&&n.hasSubtitleGroup(w))continue;if(b===p&&null!=(s=r.audioGroups)&&s.some(e=>n.hasAudioGroup(e))||b===m&&null!=(o=r.subtitleGroups)&&o.some(e=>n.hasSubtitleGroup(e))||E&&r.audioCodec===n.audioCodec||T&&r.codecSet===n.codecSet||!E&&r.codecSet!==n.codecSet)continue}u=i;break}}if(u>-1&&n.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:_t,flags:Ct,nextAutoLevel:u}}return{action:_t,flags:Dt}}onErrorOut(e,t){var n;switch(null==(n=t.errorAction)?void 0:n.action){case kt:break;case _t:this.sendAlternateToPenaltyBox(t),t.errorAction.resolved||t.details===l.FRAG_GAP?/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError()):t.fatal=!0}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:r}=n,i=n.nextAutoLevel;switch(r){case Ct:this.switchLevel(e,i);break;case Lt:{const r=this.getVariantLevelIndex(e.frag),i=t.levels[r],a=null==i?void 0:i.attrs["HDCP-LEVEL"];if(n.hdcpLevel=a,"NONE"===a)this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(a){t.maxHdcpLevel=Ye[Ye.indexOf(a)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Mt:{const t=e.decryptdata;if(t){const r=this.hls.levels,i=r.length;for(let n=i;n--;){var a,s;if(this.variantHasKey(r[n],t))this.log(`Banned key found in level ${n} (${r[n].bitrate}bps) or audio group "${null==(a=r[n].audioGroups)?void 0:a.join(",")}" (${null==(s=e.frag)?void 0:s.type} fragment) ${M(t.keyId||[])}`),r[n].fragmentError++,r[n].loadError++,this.log(`Removing level ${n} with key error (${e.error})`),this.hls.removeLevel(n)}const o=e.frag;if(this.hls.levels.length<i)n.resolved=!0;else if(o&&o.type!==g){const e=o.decryptdata;e&&!t.matches(e)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,i)}switchLevel(e,t){if(void 0!==t&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===l.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&"audiovideo"!==e.sourceBufferName)){const t=Be(e.mimeType),n=this.hls.levels;for(let r=n.length;r--;)n[r][`${e.sourceBufferName}Codec`]===t&&(this.log(`Removing level ${r} for ${e.details} ("${t}" not supported)`),this.hls.removeLevel(r))}}},fpsController:class{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(u.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(u.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const e=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=e,e&&"function"==typeof e.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,n){const r=performance.now();if(t){if(this.lastTime){const e=r-this.lastTime,i=n-this.lastDroppedFrames,a=t-this.lastDecodedFrames,s=1e3*i/e,o=this.hls;if(o.trigger(u.FPS_DROP,{currentDropped:i,currentDecoded:a,totalDroppedFrames:n}),s>0&&i>o.config.fpsDroppedMonitoringThreshold*a){let e=o.currentLevel;o.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+e),e>0&&(-1===o.autoLevelCapping||o.autoLevelCapping>=e)&&(e-=1,o.trigger(u.FPS_DROP_LEVEL_CAPPING,{level:e,droppedLevel:o.currentLevel}),o.autoLevelCapping=e,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Nn,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:jo,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:class extends Or{constructor(e,t,n){super(e,t,n,"subtitle-stream-controller",m),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(u.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(u.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(u.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(u.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(u.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(u.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(u.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(u.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(u.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(u.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=Ir,this.setInterval(500),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:r}=t;if(this.fragContextChanged(n)||(W(n)&&(this.fragPrevious=n),this.state=Ir),!r)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let a;const s=n.start;for(let l=0;l<i.length;l++)if(s>=i[l].start&&s<=i[l].end){a=i[l];break}const o=n.start+n.duration;a?a.end=o:(a={start:s,end:o},i.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:n,endOffset:r}=t;if(0===n&&r!==Number.POSITIVE_INFINITY){const e=r-1;if(e<=0)return;t.endOffsetSubtitles=Math.max(0,e),this.tracksBuffered.forEach(t=>{for(let n=0;n<t.length;)if(t[n].end<=e)t.shift();else{if(!(t[n].start<e))break;t[n].start=e,n++}}),this.fragmentTracker.removeFragmentsInRange(n,e,m)}}onError(e,t){const n=t.frag;(null==n?void 0:n.type)===m&&(t.details===l.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Ar&&(this.state=Ir))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){this.levels&&ga(this.levels,t)?this.levels=t.map(e=>new tt(e)):(this.tracksBuffered=[],this.levels=t.map(e=>{const t=new tt(e);return this.tracksBuffered[t.id]=[],t}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,m),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,null==(n=this.levels)||!n.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==Ar&&this.setInterval(500)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:r,levels:i}=this,{details:a,id:s}=t;if(!i)return void this.warn(`Subtitle tracks were reset while loading level ${s}`);const o=i[s];if(s>=i.length||!o)return;this.log(`Subtitle track ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let l=0;if(a.live||null!=(n=o.details)&&n.live){if(a.deltaUpdateFailed)return;const e=this.mainDetails;if(!e)return void(this.startFragRequested=!1);const t=e.fragments[0];var d;if(o.details)l=this.alignPlaylists(a,o.details,null==(d=this.levelLastLoaded)?void 0:d.details),0===l&&t&&(l=t.start,lr(a,l));else a.hasProgramDateTime&&e.hasProgramDateTime?(Er(a,e),l=a.fragmentStart):t&&(l=t.start,lr(a,l));e&&!this.startFragRequested&&this.setStartPosition(e,l)}if(o.details=a,this.levelLastLoaded=o,s===r&&(this.hls.trigger(u.SUBTITLE_TRACK_UPDATED,{details:a,id:s,groupId:t.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===Ir)){gt(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0)}}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,r=t.decryptdata,i=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&null!=r&&r.key&&r.iv&&bn(r.method)){const e=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,En(r.method)).catch(e=>{throw i.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e}).then(n=>{const r=performance.now();i.trigger(u.FRAG_DECRYPTED,{frag:t,payload:n,stats:{tstart:e,tdecrypt:r}})}).catch(e=>{this.warn(`${e.name}: ${e.message}`),this.state=Ir})}}doTick(){if(this.media){if(this.state===Ir){const{currentTrackId:e,levels:t}=this,n=null==t?void 0:t[e];if(!n||!t.length||!n.details)return;if(this.waitForLive(n))return;const{config:r}=this,i=this.getLoadPosition(),a=rn.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,r.maxBufferHole),{end:s,len:o}=a,l=n.details;if(o>this.hls.maxBufferLength+l.levelTargetDuration)return;const u=l.fragments,d=u.length,c=l.edge;let h=null;const f=this.fragPrevious;if(s<c){const e=r.maxFragLookUpTolerance,t=s>c-e?0:e;h=gt(f,u,Math.max(u[0].start,s),t),!h&&f&&f.start<u[0].start&&(h=u[0])}else h=u[d-1];if(h=this.filterReplacedPrimary(h,n.details),!h)return;const g=u[h.sn-l.startSN-1];if(g&&g.cc===h.cc&&this.fragmentTracker.getState(g)===Pt&&(h=g),this.fragmentTracker.getState(h)===Pt){const e=this.mapToInitFragWhenRequired(h);e&&this.loadFragment(e,n,s)}}}else this.state=Ir}loadFragment(e,t,n){W(e)?super.loadFragment(e,t,n):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new Hs(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class extends fa{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=null;const t=Rs(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)e=t[r];else if("showing"===t[r].mode){e=t[r];break}const n=this.findTrackForTextTrack(e);this.subtitleTrack!==n&&this.setSubtitleTrack(n)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.LEVEL_LOADING,this.onLevelLoading,this),e.on(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(u.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.LEVEL_LOADING,this.onLevelLoading,this),e.off(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(u.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(u.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const n=this.media;if(!n)return;const r=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;Rs(n.textTracks).forEach(e=>{ks(e)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.subtitlePreference;if(!i&&t){this.selectDefaultTrack=!1;const n=lt(t,e);if(n>-1)i=e[n];else{const e=lt(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const a={subtitleTracks:e};this.log(`Updating subtitle tracks, ${e.length} track(s) found in "${null==n?void 0:n.join(",")}" group-id`),this.hls.trigger(u.SUBTITLE_TRACKS_UPDATED,a),-1!==r&&-1===this.trackId&&this.setSubtitleTrack(r)}}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<t.length;r++){const i=t[r];if((!n||i.default)&&(n||e)&&(!e||ut(i,e)))return r}if(e){for(let n=0;n<t.length;n++){const r=t[n];if(pa(e.attrs,r.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return n}for(let n=0;n<t.length;n++){const r=t[n];if(pa(e.attrs,r.attrs,["LANGUAGE"]))return n}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){if(ma(t[n],e))return n}}return-1}onError(e,t){!t.fatal&&t.context&&(t.context.type!==f||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(-1===e.id)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&ut(e,n))return n;const r=lt(e,this.tracksInGroup);if(r>-1){const e=this.tracksInGroup[r];return this.setSubtitleTrack(r),e}if(n)return null;{const n=lt(e,t);if(n>-1)return t[n]}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(u.SUBTITLE_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=Rs(e.textTracks),n=this.currentTrack;let r;if(n&&(r=t.filter(e=>ma(n,e))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(e=>{"disabled"!==e.mode&&e!==r&&(e.mode="disabled")}),r){const e=this.subtitleDisplay?"showing":"hidden";r.mode!==e&&(r.mode=e)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=e);if(e<-1||e>=t.length||!n(e))return void this.warn(`Invalid subtitle track id: ${e}`);this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i)return void this.hls.trigger(u.SUBTITLE_TRACK_SWITCH,{id:e});const a=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&a)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:o="",name:l,type:d,url:c}=i;this.hls.trigger(u.SUBTITLE_TRACK_SWITCH,{id:s,groupId:o,name:l,type:d,url:c});const h=this.switchParams(i.url,null==r?void 0:r.details,i.details);this.loadPlaylist(h)}},timelineController:class{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(u.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(u.FRAG_LOADING,this.onFragLoading,this),e.on(u.FRAG_LOADED,this.onFragLoaded,this),e.on(u.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(u.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(u.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(u.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(u.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(u.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(u.FRAG_LOADING,this.onFragLoading,this),e.off(u.FRAG_LOADED,this.onFragLoaded,this),e.off(u.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(u.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(u.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(u.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(u.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Oo(this,"textTrack1"),t=new Oo(this,"textTrack2"),n=new Oo(this,"textTrack3"),r=new Oo(this,"textTrack4");this.cea608Parser1=new oo(1,e,t),this.cea608Parser2=new oo(3,n,r)}addCues(e,t,n,r,i){let a=!1;for(let s=i.length;s--;){const e=i[s],r=zo(e[0],e[1],t,n);if(r>=0&&(e[0]=Math.min(e[0],t),e[1]=Math.max(e[1],n),a=!0,r/(n-t)>.5))return}if(a||i.push([t,n]),this.config.renderTextTracksNatively){const i=this.captionsTracks[e];this.Cues.newCue(i,t,n,r)}else{const i=this.Cues.newCue(null,t,n,r);this.hls.trigger(u.CUES_PARSED,{type:"captions",cues:i,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:a}){const{unparsedVttFrags:s}=this;n===g&&(this.initPTS[t.cc]={baseTime:r,timescale:i,trackId:a}),s.length&&(this.unparsedVttFrags=[],s.forEach(e=>{this.initPTS[e.frag.cc]?this.onFragLoaded(u.FRAG_LOADED,e):this.hls.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const i=n.textTracks[r];if(Uo(i,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return i}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:r}=this,{label:i,languageCode:a}=t[e],s=this.getExistingTrack(i,a);if(s)n[e]=s,ks(n[e]),As(n[e],r);else{const t=this.createTextTrack("captions",i,a);t&&(t[e]=!0,n[e]=t)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(u.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}createTextTrack(e,t,n){const r=this.media;if(r)return r.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const n=!!t.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(e=>{ks(r[e]),delete r[e]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)ks(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],r=n.some(e=>e.textCodec===Io);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(ga(this.tracks,n))return void(this.tracks=n);if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const e=this.media,t=e?Rs(e.textTracks):null;if(this.tracks.forEach((e,n)=>{let r;if(t){let n=null;for(let r=0;r<t.length;r++)if(t[r]&&Uo(t[r],e)){n=t[r],t[r]=null;break}n&&(r=n)}if(r)ks(r);else{const t=Fo(e);r=this.createTextTrack(t,e.name,e.lang),r&&(r.mode="disabled")}r&&this.textTracks.push(r)}),null!=t&&t.length){const e=t.filter(e=>null!==e).map(e=>e.label);e.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${e.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const e=this.tracks.map(e=>({label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}));this.hls.trigger(u.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:e})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(e=>{const t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(!t)return;const n=`textTrack${t[1]}`,r=this.captionsProperties[n];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===g){var n,r;const{cea608Parser1:e,cea608Parser2:i,lastSn:a}=this,{cc:s,sn:o}=t.frag,l=null!=(n=null==(r=t.part)?void 0:r.index)?n:-1;e&&i&&(o!==a+1||o===a&&l!==this.lastPartIndex+1||s!==this.lastCc)&&(e.reset(),i.reset()),this.lastCc=s,this.lastSn=o,this.lastPartIndex=l}}onFragLoaded(e,t){const{frag:n,payload:r}=t;if(n.type===m)if(r.byteLength){const e=n.decryptdata,i="stats"in t;if(null==e||!e.encrypted||i){const e=this.tracks[n.level],i=this.vttCCs;i[n.cc]||(i[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),e&&e.textCodec===Io?this._parseIMSC1(n,r):this._parseVTTs(t)}}else this.hls.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;xo(t,this.initPTS[e.cc],t=>{this._appendCues(t,e.level),n.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},t=>{n.logger.log(`Failed to parse IMSC1: ${t}`),n.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})})}_parseVTTs(e){var t;const{frag:n,payload:r}=e,{initPTS:i,unparsedVttFrags:a}=this,s=i.length-1;if(!i[n.cc]&&-1===s)return void a.push(e);const o=this.hls;Ao(null!=(t=n.initSegment)&&t.data?ye(n.initSegment.data,new Uint8Array(r)).buffer:r,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,e=>{this._appendCues(e,n.level),o.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},t=>{const i="Missing initPTS for VTT MPEGTS"===t.message;i?a.push(e):this._fallbackToIMSC1(n,r),o.logger.log(`Failed to parse VTT cue: ${t}`),i&&s>n.cc||o.trigger(u.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:t})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||xo(t,this.initPTS[e.cc],()=>{n.textCodec=Io,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const n=this.textTracks[t];if(!n||"disabled"===n.mode)return;e.forEach(e=>Is(n,e))}else{const r=this.tracks[t];if(!r)return;const i=r.default?"default":"subtitles"+t;n.trigger(u.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===m&&this.onFragLoaded(u.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=t;if(n.type!==g||"NONE"!==this.closedCaptionsForLevel(n))for(let i=0;i<r.length;i++){const e=r[i].bytes;if(e){this.cea608Parser1||this.initCea608Parsers();const t=this.extractCea608Data(e);this.cea608Parser1.addData(r[i].pts,t[0]),this.cea608Parser2.addData(r[i].pts,t[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:r,type:i}){const{media:a}=this;if(a&&!(a.currentTime<n)){if(!i||"video"===i){const{captionsTracks:e}=this;Object.keys(e).forEach(r=>_s(e[r],t,n))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==r){const{textTracks:e}=this;Object.keys(e).forEach(n=>_s(e[n],t,r))}}}extractCea608Data(e){const t=[[],[]],n=31&e[0];let r=2;for(let i=0;i<n;i++){const n=e[r++],i=127&e[r++],a=127&e[r++];if(0===i&&0===a)continue;if(!!(4&n)){const e=3&n;0!==e&&1!==e||(t[e].push(i),t[e].push(a))}}return t}},audioStreamController:class extends Or{constructor(e,t,n){super(e,t,n,"audio-stream-controller",p),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(u.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(u.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(u.BUFFER_RESET,this.onBufferReset,this),e.on(u.BUFFER_CREATED,this.onBufferCreated,this),e.on(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(u.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(u.FRAG_LOADING,this.onFragLoading,this),e.on(u.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(u.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(u.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(u.BUFFER_RESET,this.onBufferReset,this),e.off(u.BUFFER_CREATED,this.onBufferCreated,this),e.off(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(u.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(u.FRAG_LOADING,this.onFragLoading,this),e.off(u.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:n,initPTS:r,timescale:i,trackId:a}){if(n===g){const e=t.cc,n=this.fragCurrent;if(this.initPTS[e]={baseTime:r,timescale:i,trackId:a},this.log(`InitPTS for cc: ${e} found from main: ${r/i} (${r}/${i}) trackId: ${a}`),this.mainAnchor=t,this.state===Nr){const n=this.waitingData;(!n&&!this.loadingParts||n&&n.frag.cc!==e)&&this.syncWithAnchor(t,null==n?void 0:n.frag)}else!this.hls.hasEnoughToStart&&n&&n.cc!==e?(n.abortRequests(),this.syncWithAnchor(t,n)):this.state===Ir&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var n;const r=(null==(n=this.mainFragLoading)?void 0:n.frag)||null;if(t&&(null==r?void 0:r.cc)===t.cc)return;const i=(r||e).cc,a=yt(this.getLevelDetails(),i,this.getLoadPosition());a&&(this.log(`Syncing with main frag at ${a.start} cc ${a.cc}`),this.startFragRequested=!1,this.nextLoadPosition=a.start,this.resetLoadingState(),this.state===Ir&&this.doTickIdle())}startLoad(e,t){if(!this.levels)return this.startPosition=e,void(this.state=Ar);const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),n>0&&-1===e?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=Ir):this.state=xr,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case Ir:this.doTickIdle();break;case xr:{const{levels:e,trackId:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=Nr}break}case Rr:this.checkRetryDate();break;case Nr:{const e=this.waitingData;if(e){const{frag:t,part:n,cache:r,complete:i}=e,a=this.mainAnchor;if(void 0!==this.initPTS[t.cc]){this.waitingData=null,this.state=_r;const e={frag:t,part:n,payload:r.flush().buffer,networkDetails:null};this._handleFragmentLoadProgress(e),i&&super._handleFragmentLoadComplete(e)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=Ir}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;null!=e&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:n,media:r,trackId:i}=this,a=t.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||null==n||!n[i])return;const s=n[i],o=s.details;if(!o||this.waitForLive(s)||this.waitForCdnTuneIn(o))return this.state=xr,void(this.startFragRequested=!1);const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,V,p));const d=this.getFwdBufferInfo(l,p);if(null===d)return;if(!this.switchingTrack&&this._streamEnded(d,o))return t.trigger(u.BUFFER_EOS,{type:"audio"}),void(this.state=Lr);const c=d.len,h=t.maxBufferLength,f=o.fragments,m=f[0].start,y=this.getLoadPosition(),v=this.flushing?y:d.end;if(this.switchingTrack&&r){const e=y;o.PTSKnown&&e<m&&(d.end>m||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(c>=h&&!this.switchingTrack&&v<f[f.length-1].start)return;let b=this.getNextFragment(v,o);if(b&&this.isLoopLoading(b,v)&&(b=this.getNextFragmentLoopLoading(b,o,d,g,h)),!b)return void(this.bufferFlushed=!0);let E=(null==(e=this.mainFragLoading)?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&E&&W(b)&&!b.endList&&(!o.live||!this.loadingParts&&v<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(E)===Ut&&(this.mainFragLoading=E=null),E&&W(E))){if(b.start>E.end){const e=this.fragmentTracker.getFragAtPos(v,g);e&&e.end>E.end&&(E=e,this.mainFragLoading={frag:e,targetBufferTime:null})}if(b.start>E.end)return}this.loadFragment(b,s,v)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(e=>new tt(e))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==Ar&&(this.setInterval(100),this.state=Ir,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(u.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,t){var n;const{levels:r}=this,{details:i,id:a,groupId:s,track:o}=t;if(!r)return void this.warn(`Audio tracks reset while loading track ${a} "${o.name}" of "${s}"`);const l=this.mainDetails;if(!l||i.endCC>l.endCC||l.expired)return this.cachedTrackLoadedData=t,void(this.state!==Ar&&(this.state=xr));this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${o.name}" of "${s}" loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const d=r[a];let c=0;if(i.live||null!=(n=d.details)&&n.live){if(this.checkLiveUpdate(i),i.deltaUpdateFailed)return;var h;if(d.details)c=this.alignPlaylists(i,d.details,null==(h=this.levelLastLoaded)?void 0:h.details);i.alignedSliding||(br(i,l),i.alignedSliding||Er(i,l),c=i.fragmentStart)}d.details=i,this.levelLastLoaded=d,this.startFragRequested||this.setStartPosition(l,c),this.hls.trigger(u.AUDIO_TRACK_UPDATED,{details:i,id:a,groupId:t.groupId}),this.state!==xr||this.waitForCdnTuneIn(i)||(this.state=Ir),this.tick()}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{config:a,trackId:s,levels:o}=this;if(!o)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const l=o[s];if(!l)return void this.warn("Audio track is undefined on fragment load progress");const u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(n.start);const d=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2";let c=this.transmuxer;c||(c=this.transmuxer=new ha(this.hls,p,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[n.cc],f=null==(t=n.initSegment)?void 0:t.data;if(void 0!==h){const e=!1,t=r?r.index:-1,a=-1!==t,s=new tn(n.level,n.sn,n.stats.chunkCount,i.byteLength,t,a);c.push(i,f,d,"",n,r,u.totalduration,e,s,h)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${u.startSN} ,${u.endSN}],track ${s}`);const{cache:e}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new Ur,complete:!1};e.push(new Uint8Array(i)),this.state!==Ar&&(this.state=Nr)}}_handleFragmentLoadComplete(e){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===g&&W(t.frag)&&(this.mainFragLoading=t,this.state===Ir&&this.tick())}onFragBuffered(e,t){const{frag:n,part:r}=t;if(n.type===p)if(this.fragContextChanged(n))this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if(W(n)){this.fragPrevious=n;const e=this.switchingTrack;e&&(this.bufferedTrack=e,this.switchingTrack=null,this.hls.trigger(u.AUDIO_TRACK_SWITCHED,S({},e)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}else this.audioOnly||n.type!==g||n.elementaryStreams.video||n.elementaryStreams.audiovideo||(this.audioOnly=!0,this.mainFragLoading=null)}onError(e,t){var n;if(t.fatal)this.state=Mr;else switch(t.details){case l.FRAG_GAP:case l.FRAG_PARSING_ERROR:case l.FRAG_DECRYPT_ERROR:case l.FRAG_LOAD_ERROR:case l.FRAG_LOAD_TIMEOUT:case l.KEY_LOAD_ERROR:case l.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(p,t);break;case l.AUDIO_TRACK_LOAD_ERROR:case l.AUDIO_TRACK_LOAD_TIMEOUT:case l.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==xr||(null==(n=t.context)?void 0:n.type)!==h||(this.state=Ir);break;case l.BUFFER_ADD_CODEC_ERROR:case l.BUFFER_APPEND_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case l.BUFFER_FULL_ERROR:if("audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case l.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushing(e,{type:t}){t!==K&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==K){this.flushing=!1,this.bufferFlushed=!0,this.state===Lr&&(this.state=Ir);const e=this.mediaBuffer||this.media;e&&(this.afterBufferFlushed(e,t,p),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s)return void this.resetWhenMissingContext(a);const{frag:o,part:l,level:d}=s,{details:c}=d,{audio:h,text:f,id3:g,initSegment:p}=i;if(!this.fragContextChanged(o)&&c){if(this.state=Cr,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),null!=p&&p.tracks){const e=o.initSegment||o;if(this.unhandledEncryptionError(p,o))return;this._bufferInitSegment(d,p.tracks,e,a),r.trigger(u.FRAG_PARSING_INIT_SEGMENT,{frag:e,id:n,tracks:p.tracks})}if(h){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=h;l&&(l.elementaryStreams[V]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(V,e,t,n,r),this.bufferFragmentData(h,o,l,a)}if(null!=g&&null!=(t=g.samples)&&t.length){const e=E({id:n,frag:o,details:c},g);r.trigger(u.FRAG_PARSING_METADATA,e)}if(f){const e=E({id:n,frag:o,details:c},f);r.trigger(u.FRAG_PARSING_USERDATA,e)}}else this.fragmentTracker.removeFragment(o)}_bufferInitSegment(e,t,n,r){if(this.state!==Cr)return;if(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio)return;const i=t.audio;i.id=p;const a=e.audioCodec;this.log(`Init audio buffer, container:${i.container}, codecs[level/parsed]=[${a}/${i.codec}]`),a&&1===a.split(",").length&&(i.levelCodec=a),this.hls.trigger(u.BUFFER_CODECS,t);const s=i.initSegment;if(null!=s&&s.byteLength){const e={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:s};this.hls.trigger(u.BUFFER_APPENDING,e)}this.tickImmediate()}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);var i;if(this.switchingTrack||r===Pt||r===Ft)if(W(e))if(null!=(i=t.details)&&i.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=Nr;const n=this.mainDetails;n&&n.fragmentStart!==t.details.fragmentStart&&Er(t.details,n)}else super.loadFragment(e,t,n);else this._loadInitSegment(e,t);else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:s}=this.bufferedTrack;ut({name:t,lang:n,assocLang:r,characteristics:i,audioCodec:a,channels:s},e,dt)||(ht(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(u.AUDIO_TRACK_SWITCHED,S({},e))}},audioTrackController:class extends fa{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.LEVEL_LOADING,this.onLevelLoading,this),e.on(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(u.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.LEVEL_LOADING,this.onLevelLoading,this),e.off(u.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(u.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(u.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:r,details:i}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==r)return void this.warn(`Audio track with id:${n} and group:${r} not found in active group ${null==a?void 0:a.groupId}`);const s=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${i.startSN}-${i.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,s)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,r=this.groupIds;let i=this.currentTrack;if(!n||(null==r?void 0:r.length)!==(null==n?void 0:n.length)||null!=n&&n.some(e=>-1===(null==r?void 0:r.indexOf(e)))){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const e=this.tracks.filter(e=>!n||-1!==n.indexOf(e.groupId));if(e.length)this.selectDefaultTrack&&!e.some(e=>e.default)&&(this.selectDefaultTrack=!1),e.forEach((e,t)=>{e.id=t});else if(!i&&!this.tracksInGroup.length)return;this.tracksInGroup=e;const t=this.hls.config.audioPreference;if(!i&&t){const n=lt(t,e,dt);if(n>-1)i=e[n];else{const e=lt(t,this.tracks);i=this.tracks[e]}}let r=this.findTrackId(i);-1===r&&i&&(r=this.findTrackId(null));const s={audioTracks:e};this.log(`Updating audio tracks, ${e.length} track(s) found in group(s): ${null==n?void 0:n.join(",")}`),this.hls.trigger(u.AUDIO_TRACKS_UPDATED,s);const d=this.trackId;if(-1!==r&&-1===d)this.setAudioTrack(r);else if(e.length&&-1===d){var a;const t=new Error(`No audio track selected for current audio group-ID(s): ${null==(a=this.groupIds)?void 0:a.join(",")} track count: ${e.length}`);this.warn(t.message),this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:t})}}}onError(e,t){!t.fatal&&t.context&&(t.context.type!==h||t.context.id!==this.trackId||this.groupIds&&-1===this.groupIds.indexOf(t.context.groupId)||this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&ut(e,r,dt))return r;const i=lt(e,this.tracksInGroup,dt);if(i>-1){const e=this.tracksInGroup[i];return this.setAudioTrack(i),e}if(r){let r=t.loadLevel;-1===r&&(r=t.firstAutoLevel);const i=function(e,t,n,r,i){const a=t[r],s=t.reduce((e,t,n)=>{const r=t.uri;return(e[r]||(e[r]=[])).push(n),e},{})[a.uri];s.length>1&&(r=Math.max.apply(Math,s));const o=a.videoRange,l=a.frameRate,u=a.codecSet.substring(0,4),d=ct(t,r,t=>{if(t.videoRange!==o||t.frameRate!==l||t.codecSet.substring(0,4)!==u)return!1;const r=t.audioGroups,a=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return lt(e,a,i)>-1});return d>-1?d:ct(t,r,t=>{const r=t.audioGroups,a=n.filter(e=>!r||-1!==r.indexOf(e.groupId));return lt(e,a,i)>-1})}(e,t.levels,n,r,dt);if(-1===i)return null;t.nextLoadLevel=i}if(e.channels||e.audioCodec){const t=lt(e,n);if(t>-1)return n[t]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length)return void this.warn(`Invalid audio track id: ${e}`);this.selectDefaultTrack=!1;const n=this.currentTrack,r=t[e],i=r.details&&!r.details.live;if(e===this.trackId&&r===n&&i)return;if(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(u.AUDIO_TRACK_SWITCHING,S({},r)),i)return;const a=this.switchParams(r.url,null==n?void 0:n.details,r.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||ut(e,r,dt)))return n}if(e){const{name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o}=e;for(let e=0;e<t.length;e++){if(ut({name:n,lang:r,assocLang:i,characteristics:a,audioCodec:s,channels:o},t[e],dt))return e}for(let l=0;l<t.length;l++){const n=t[l];if(pa(e.attrs,n.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<t.length;l++){const n=t[l];if(pa(e.attrs,n.attrs,["LANGUAGE"]))return l}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&ht(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=e.id,r=e.groupId,i=this.getUrlWithDirectives(e.url,t),a=e.details,s=null==a?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${s&&a.live?" age "+s.toFixed(1)+(a.type&&" "+a.type||""):""} ${i}`),this.hls.trigger(u.AUDIO_TRACK_LOADING,{url:i,id:n,groupId:r,deliveryDirectives:t||null,track:e})}},emeController:bs,cmcdController:class{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=e=>{try{this.apply(e,{ot:Aa.MANIFEST,su:!this.initialized})}catch(t){this.hls.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=e=>{try{const{frag:t,part:n}=e,r=this.hls.levels[t.level],i=this.getObjectType(t),a={d:1e3*(n||t).duration,ot:i};i!==Aa.VIDEO&&i!==Aa.AUDIO&&i!=Aa.MUXED||(a.br=r.bitrate/1e3,a.tb=this.getTopBandwidth(i)/1e3,a.bl=this.getBufferLength(i));const s=n?this.getNextPart(n):this.getNextFrag(t);null!=s&&s.url&&s.url!==t.url&&(a.nor=s.url),this.apply(e,a)}catch(t){this.hls.logger.warn("Could not generate segment CMCD data.",t)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;null!=n&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHED,this.onMediaDetached,this),e.on(u.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHED,this.onMediaDetached,this),e.off(u.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,r;this.audioBuffer=null==(n=t.tracks.audio)?void 0:n.buffer,this.videoBuffer=null==(r=t.tracks.video)?void 0:r.buffer}createData(){var e;return{v:1,sf:Ia.HLS,sid:this.sid,cid:this.cid,pr:null==(e=this.media)?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){E(t,this.createData());const n=t.ot===Aa.INIT||t.ot===Aa.VIDEO||t.ot===Aa.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering);const{includeKeys:r}=this;r&&(t=Object.keys(t).reduce((e,n)=>(r.includes(n)&&(e[n]=t[n]),e),{}));const i={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),fs(e.headers,t,i)):e.url=ms(e.url,t,i)}getNextFrag(e){var t;const n=null==(t=this.hls.levels[e.level])?void 0:t.details;if(n){const t=e.sn-n.startSN;return n.fragments[t+1]}}getNextPart(e){var t;const{index:n,fragment:r}=e,i=null==(t=this.hls.levels[r.level])||null==(t=t.details)?void 0:t.partList;if(i){const{sn:e}=r;for(let t=i.length-1;t>=0;t--){const r=i[t];if(r.index===n&&r.fragment.sn===e)return i[t+1]}}}getObjectType(e){const{type:t}=e;return"subtitle"===t?Aa.TIMED_TEXT:"initSegment"===e.sn?Aa.INIT:"audio"===t?Aa.AUDIO:"main"===t?this.hls.audioTracks.length?Aa.VIDEO:Aa.MUXED:void 0}getTopBandwidth(e){let t,n=0;const r=this.hls;if(e===Aa.AUDIO)t=r.audioTracks;else{const e=r.maxAutoLevel,n=e>-1?e+1:r.levels.length;t=r.levels.slice(0,n)}return t.forEach(e=>{e.bitrate>n&&(n=e.bitrate)}),n>0?n:NaN}getBufferLength(e){const t=this.media,n=e===Aa.AUDIO?this.audioBuffer:this.videoBuffer;if(!n||!t)return NaN;return 1e3*rn.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(e){this.loader=void 0,this.loader=new n(e)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(e,n,r){t(e),this.loader.load(e,n,r)}}}},contentSteeringController:class extends w{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(-1===e.indexOf(t.pathwayId)&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=1e3*this.timeToLoad-(performance.now()-this.updated);if(e>0)return void this.scheduleRefresh(this.uri,e)}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){-1!==this.reloadTimer&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(t=>t!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;null!==n&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if((null==n?void 0:n.action)===_t&&n.flags===Dt){const e=this.levels;let r=this._pathwayPriority,i=this.pathwayId;if(t.context){const{groupId:n,pathwayId:r,type:a}=t.context;n&&e?i=this.getPathwayForGroupId(n,a,i):r&&(i=r)}i in this.penalizedPathways||(this.penalizedPathways[i]=performance.now()),!r&&e&&(r=this.pathways()),r&&r.length>1&&(this.updatePathwayPriority(r),n.resolved=this.pathwayId!==i),t.details!==l.BUFFER_APPEND_ERROR||t.fatal?n.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${i} levels: ${e?e.length:e} priorities: ${it(r)} penalized: ${it(this.penalizedPathways)}`):n.resolved=!0}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return null===this.levels?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){let t;this._pathwayPriority=e;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(e=>{r-n[e]>3e5&&delete n[e]});for(let i=0;i<e.length;i++){const r=e[i];if(r in n)continue;if(r===this.pathwayId)return;const a=this.hls.nextLoadLevel,s=this.hls.levels[a];if(t=this.getLevelsForPathway(r),t.length>0){this.log(`Setting Pathway to "${r}"`),this.pathwayId=r,fr(t),this.hls.trigger(u.LEVELS_UPDATED,{levels:t});const e=this.hls.levels[a];s&&e&&this.levels&&(e.attrs["STABLE-VARIANT-ID"]!==s.attrs["STABLE-VARIANT-ID"]&&e.bitrate!==s.bitrate&&this.log(`Unstable Pathways change from bitrate ${s.bitrate} to ${e.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let i=0;i<r.length;i++)if(t===h&&r[i].hasAudioGroup(e)||t===f&&r[i].hasSubtitleGroup(e))return r[i].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},r={};e.forEach(e=>{const{ID:i,"BASE-ID":a,"URI-REPLACEMENT":s}=e;if(t.some(e=>e.pathwayId===i))return;const o=this.getLevelsForPathway(a).map(e=>{const t=new hn(e.attrs);t["PATHWAY-ID"]=i;const a=t.AUDIO&&`${t.AUDIO}_clone_${i}`,o=t.SUBTITLES&&`${t.SUBTITLES}_clone_${i}`;a&&(n[t.AUDIO]=a,t.AUDIO=a),o&&(r[t.SUBTITLES]=o,t.SUBTITLES=o);const l=vs(e.uri,t["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",s),u=new tt({attrs:t,audioCodec:e.audioCodec,bitrate:e.bitrate,height:e.height,name:e.name,url:l,videoCodec:e.videoCodec,width:e.width});if(e.audioGroups)for(let n=1;n<e.audioGroups.length;n++)u.addGroupId("audio",`${e.audioGroups[n]}_clone_${i}`);if(e.subtitleGroups)for(let n=1;n<e.subtitleGroups.length;n++)u.addGroupId("text",`${e.subtitleGroups[n]}_clone_${i}`);return u});t.push(...o),ys(this.audioTracks,n,s,i),ys(this.subtitleTracks,r,s,i)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;let r;this.loader&&this.loader.destroy(),this.loader=new n(t);try{r=new self.URL(e)}catch(d){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${e}`)}if("data:"!==r.protocol){const e=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+e)}const i={responseType:"json",url:r.href},a=t.steeringManifestLoadPolicy.default,s=a.errorRetry||a.timeoutRetry||{},o={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(e,t,n,i)=>{this.log(`Loaded steering manifest: "${r}"`);const a=e.data;if(1!==(null==a?void 0:a.VERSION))return void this.log(`Steering VERSION ${a.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=a.TTL;const{"RELOAD-URI":s,"PATHWAY-CLONES":o,"PATHWAY-PRIORITY":l}=a;if(s)try{this.uri=new self.URL(s,r).href}catch(d){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${s}`)}this.scheduleRefresh(this.uri||n.url),o&&this.clonePathways(o);const c={steeringManifest:a,url:r.toString()};this.hls.trigger(u.STEERING_MANIFEST_LOADED,c),l&&this.updatePathwayPriority(l)},onError:(e,t,n,r)=>{if(this.log(`Error loading steering manifest: ${e.code} ${e.text} (${t.url})`),this.stopLoad(),410===e.code)return this.enabled=!1,void this.log(`Steering manifest ${t.url} no longer available`);let i=1e3*this.timeToLoad;if(429===e.code){const e=this.loader;if("function"==typeof(null==e?void 0:e.getResponseHeader)){const t=e.getResponseHeader("Retry-After");t&&(i=1e3*parseFloat(t))}return void this.log(`Steering manifest ${t.url} rate limited`)}this.scheduleRefresh(this.uri||t.url,i)},onTimeout:(e,t,n)=>{this.log(`Timeout loading steering manifest (${t.url})`),this.scheduleRefresh(this.uri||t.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(i,o,l)}scheduleRefresh(e,t=1e3*this.timeToLoad){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var t;const n=null==(t=this.hls)?void 0:t.media;!n||n.ended?this.scheduleRefresh(e,1e3*this.timeToLoad):this.loadSteeringManifest(e)},t)}},interstitialsController:class extends w{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled||!this.schedule)return;const t=e-this.timelinePos;if(Math.abs(t)<1/7056e5)return;const n=t<=-.01;this.timelinePos=e,this.bufferedPos=e;const r=this.playingItem;if(!r)return void this.checkBuffer();if(n){this.schedule.resetErrorsInRange(e,e-t)&&this.updateSchedule(!0)}if(this.checkBuffer(),n&&e<r.start||e>=r.end){var i;const t=this.findItemIndex(r);let a=this.schedule.findItemIndexAtTime(e);if(-1===a&&(a=t+(n?-1:1),this.log(`seeked ${n?"back ":""}to position not covered by schedule ${e} (resolving from ${t} to ${a})`)),!this.isInterstitial(r)&&null!=(i=this.media)&&i.paused&&(this.shouldPlay=!1),!n&&a>t){const e=this.schedule.findJumpRestrictedIndex(t+1,a);if(e>t)return void this.setSchedulePosition(e)}return void this.setSchedulePosition(a)}const a=this.playingAsset;if(!a){if(this.playingLastItem&&this.isInterstitial(r)){const t=r.event.assetList[0];t&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(e,t))}return}const s=a.timelineStart,o=a.duration||0;var l;(n&&e<s||e>=s+o)&&(null!=(l=r.event)&&l.appendInPlace&&(this.clearInterstitial(r.event,r),this.flushFrontBuffer(e)),this.setScheduleToAssetAtTime(e,a))},this.onTimeupdate=()=>{const e=this.currentTime;if(void 0===e||this.playbackDisabled)return;if(!(e>this.timelinePos))return;this.timelinePos=e,e>this.bufferedPos&&this.checkBuffer();const t=this.playingItem;if(!t||this.playingLastItem)return;if(e>=t.end){this.timelinePos=t.end;const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}const n=this.playingAsset;if(!n)return;e>=n.timelineStart+(n.duration||0)&&this.setScheduleToAssetAtTime(e,n)},this.onScheduleUpdate=(e,t)=>{const n=this.schedule;if(!n)return;const r=this.playingItem,i=n.events||[],a=n.items||[],s=n.durations,o=e.map(e=>e.identifier),l=!(!i.length&&!o.length);(l||t)&&this.log(`INTERSTITIALS_UPDATED (${i.length}): ${i}\nSchedule: ${a.map(e=>Bs(e))} pos: ${this.timelinePos}`),o.length&&this.log(`Removed events ${o}`);let d=null,c=null;r&&(d=this.updateItem(r,this.timelinePos),this.itemsMatch(r,d)?this.playingItem=d:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h&&(c=this.updateItem(h,this.bufferedPos),this.itemsMatch(h,c)?this.bufferingItem=c:h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))),e.forEach(e=>{e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,null)})}),this.playerQueue.forEach(e=>{if(e.interstitial.appendInPlace){const n=e.assetItem.timelineStart,r=e.timelineOffset-n;if(r)try{e.timelineOffset=n}catch(t){Math.abs(r)>Cs&&this.warn(`${t} ("${e.assetId}" ${e.timelineOffset}->${n})`)}}}),l||t){if(this.hls.trigger(u.INTERSTITIALS_UPDATED,{events:i.slice(0),schedule:a.slice(0),durations:s,removedIds:o}),this.isInterstitial(r)&&o.includes(r.event.identifier))return this.warn(`Interstitial "${r.event.identifier}" removed while playing`),void this.primaryFallback(r.event);r&&this.trimInPlace(d,r),h&&c!==d&&this.trimInPlace(c,h),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new js(e),this.schedule=new zs(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(u.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(u.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(u.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(u.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(u.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(u.BUFFER_APPENDED,this.onBufferAppended,this),e.on(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(u.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(u.MEDIA_ENDED,this.onMediaEnded,this),e.on(u.ERROR,this.onError,this),e.on(u.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(u.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(u.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(u.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(u.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(u.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(u.BUFFER_CODECS,this.onBufferCodecs,this),e.off(u.BUFFER_APPENDED,this.onBufferAppended,this),e.off(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(u.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(u.MEDIA_ENDED,this.onMediaEnded,this),e.off(u.ERROR,this.onError,this),e.off(u.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;null==(e=this.getBufferingPlayer())||e.resumeBuffering()}pauseBuffering(){var e;null==(e=this.getBufferingPlayer())||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Sr(e,"play",this.onPlay),Sr(e,"pause",this.onPause),Sr(e,"seeking",this.onSeeking),Sr(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const n=this.media=t.media;Tr(n,"seeking",this.onSeeking),Tr(n,"timeupdate",this.onTimeupdate),Tr(n,"play",this.onPlay),Tr(n,"pause",this.onPause)}onMediaAttached(e,t){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,null===n)this.checkStart();else if(!r){this.clearScheduleState();const e=this.findItemIndex(n);this.setSchedulePosition(e)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const n=!!t.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const e=this.getBufferingPlayer();e&&(this.log(`Removing schedule state for detachedData and ${e}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,e.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,n=t=>t?e.getAssetPlayer(t.identifier):t,r=(t,r,a,s,o)=>{if(t){let l=t[r].start;const u=t.event;if(u){if("playout"===r||u.timelineOccupancy!==Ds.Point){const e=n(a);(null==e?void 0:e.interstitial)===u&&(l+=e.assetItem.startOffset+e[o])}}else{l+=("bufferedPos"===s?i():e[s])-t.start}return l}return 0},i=()=>{const t=e.bufferedPos;return t===Number.MAX_VALUE?a("primary"):Math.max(t,0)},a=t=>{var n,r;return null!=(n=e.primaryDetails)&&n.live?e.primaryDetails.edge:(null==(r=e.schedule)?void 0:r.durations[t])||0},s=(t,i)=>{var a,s;const o=e.effectivePlayingItem;if(null!=o&&null!=(a=o.event)&&a.restrictions.skip||!e.schedule)return;e.log(`seek to ${t} "${i}"`);const l=e.effectivePlayingItem,u=e.schedule.findItemIndexAtTime(t,i),d=null==(s=e.schedule.items)?void 0:s[u],c=e.getBufferingPlayer(),h=null==c?void 0:c.interstitial,f=null==h?void 0:h.appendInPlace,g=l&&e.itemsMatch(l,d);if(l&&(f||g)){const a=n(e.playingAsset),s=(null==a?void 0:a.media)||e.primaryMedia;if(s){const n="primary"===i?s.currentTime:r(l,i,e.playingAsset,"timelinePos","currentTime"),o=t-n,u=(f?n:s.currentTime)+o;if(u>=0&&(!a||f||u<=a.duration))return void(s.currentTime=u)}}if(d){let n=t;if("primary"!==i){const e=t-d[i].start;n=d.start+e}const r=!e.isInterstitial(d);if(e.isInterstitial(l)&&!l.event.appendInPlace||!r&&!d.event.appendInPlace){if(l){const a=e.findItemIndex(l);if(u>a){const t=e.schedule.findJumpRestrictedIndex(a+1,u);if(t>a)return void e.setSchedulePosition(t)}let s=0;if(r)e.timelinePos=n,e.checkBuffer();else{const e=d.event.assetList,n=t-(d[i]||d).start;for(let t=e.length;t--;){const r=e[t];if(r.duration&&n>=r.startOffset&&n<r.startOffset+r.duration){s=t;break}}}e.setSchedulePosition(u,s)}}else{const t=e.media||(f?null==c?void 0:c.media:null);t&&(t.currentTime=n)}}},o=()=>{const n=e.effectivePlayingItem;if(e.isInterstitial(n))return n;const r=t();return e.isInterstitial(r)?r:null},l={get bufferedEnd(){const n=t(),i=e.bufferingItem;var a;return i&&i===n&&(r(i,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-i.playout.start||(null==(a=e.bufferingAsset)?void 0:a.startOffset))||0},get currentTime(){const t=o(),n=e.effectivePlayingItem;return n&&n===t?r(n,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-n.playout.start:0},set currentTime(t){const n=o(),r=e.effectivePlayingItem;r&&r===n&&s(t+r.playout.start,"playout")},get duration(){const e=o();return e?e.playout.end-e.playout.start:0},get assetPlayers(){var t;const n=null==(t=o())?void 0:t.event.assetList;return n?n.map(t=>e.getAssetPlayer(t.identifier)):[]},get playingIndex(){var t;const n=null==(t=o())?void 0:t.event;return n&&e.effectivePlayingAsset?n.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return o()}};return this.manager={get events(){var t;return(null==(t=e.schedule)||null==(t=t.events)?void 0:t.slice(0))||[]},get schedule(){var t;return(null==(t=e.schedule)||null==(t=t.items)?void 0:t.slice(0))||[]},get interstitialPlayer(){return o()?l:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const n=t();return e.findItemIndex(n)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const t=e.effectivePlayingItem;return e.findItemIndex(t)},primary:{get bufferedEnd(){return i()},get currentTime(){const t=e.timelinePos;return t>0?t:0},set currentTime(e){s(e,"primary")},get duration(){return a("primary")},get seekableStart(){var t;return(null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(e){s(e,"integrated")},get duration(){return a("integrated")},get seekableStart(){var t;return((t,n)=>{var r;if(0!==t&&"primary"!==n&&null!=(r=e.schedule)&&r.length){var i;const r=e.schedule.findItemIndexAtTime(t),a=null==(i=e.schedule.items)?void 0:i[r];if(a)return t+(a[n].start-a.start)}return t})((null==(t=e.primaryDetails)?void 0:t.fragmentStart)||0,"integrated")}},skip:()=>{const t=e.effectivePlayingItem,n=null==t?void 0:t.event;if(n&&!n.restrictions.skip){const r=e.findItemIndex(t);if(n.appendInPlace){const e=t.playout.start+t.event.duration;s(e+.001,"playout")}else e.advanceAfterAssetEnded(n,r,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,n=null==(e=this.schedule)?void 0:e.items;return!!(this.playbackStarted&&t&&n)&&this.findItemIndex(t)===n.length-1}get playbackStarted(){return null!==this.effectivePlayingItem}get currentTime(){var e,t;if(null===this.mediaSelection)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&null!=(e=this.bufferingItem)&&null!=(e=e.event)&&e.appendInPlace&&(i=this.primaryMedia);const a=null==(t=i)?void 0:t.currentTime;return void 0!==a&&n(a)?a:void 0}get primaryMedia(){var e;return this.media||(null==(e=this.detachedData)?void 0:e.media)||null}isInterstitial(e){return!(null==e||!e.event)}retreiveMediaSource(e,t){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,t)}transferMediaFromPlayer(e,t){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&r)return void(this.detachedData={media:r});const n=e.transferMedia();this.log(`transfer MediaSource from ${e} ${it(n)}`),this.detachedData=n}else t&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,t){var n,r;if(e.media===t)return;let i=null;const a=this.hls,s=e!==a,o=s&&e.interstitial.appendInPlace,l=null==(n=this.detachedData)?void 0:n.mediaSource;let u;if(a.media)o&&(i=a.transferMedia(),this.detachedData=i),u="Primary";else if(l){const e=this.getBufferingPlayer();e?(i=e.transferMedia(),u=`${e}`):u="detached MediaSource"}else u="detached media";if(!i)if(l)i=this.detachedData,this.log(`using detachedData: MediaSource ${it(i)}`);else if(!this.detachedData||a.media===t){const e=this.playerQueue;e.length>1&&e.forEach(e=>{if(s&&e.interstitial.appendInPlace!==o){const t=e.interstitial;this.clearInterstitial(e.interstitial,null),t.appendInPlace=!1,t.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${t}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}const d=i&&"mediaSource"in i&&"closed"!==(null==(r=i.mediaSource)?void 0:r.readyState),c=d&&i?i:t;this.log(`${d?"transfering MediaSource":"attaching media"} to ${s?e:"Primary"} from ${u} (media.currentTime: ${t.currentTime})`);const h=this.schedule;if(c===i&&h){const t=s&&e.assetId===h.assetIdAtEnd;c.overrides={duration:h.duration,endOfStream:!s||t,cueRemoval:!s}}e.attachMedia(c)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=null==e?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;-1===this.bufferedPos&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(-1===n){const n=this.hls.startPosition;if(this.log(Gs("checkStart",n)),this.timelinePos=n,t.length&&t[0].cue.pre){const n=e.findEventIndex(t[0].identifier);this.setSchedulePosition(n)}else if(n>=0||!this.primaryLive){const t=this.timelinePos=n>0?n:0,r=e.findItemIndexAtTime(t);this.setSchedulePosition(r)}}else if(r&&!this.playingItem){const t=e.findItemIndex(r);this.setSchedulePosition(t)}}advanceAssetBuffering(e,t){const n=e.event,r=n.findAssetIndex(t),i=Os(n,r);if(n.isAssetPastPlayoutLimit(i)){if(this.schedule){var a;const t=null==(a=this.schedule.items)?void 0:a[this.findItemIndex(e)+1];t&&this.bufferedToItem(t)}}else this.bufferedToEvent(e,i)}advanceAfterAssetEnded(e,t,n){const r=Os(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const n=this.schedule.items;if(n){const r=t+1;if(r>=n.length)return void this.setSchedulePosition(-1);const i=e.resumeTime;this.timelinePos<i&&(this.log(Gs("advanceAfterAssetEnded",i)),this.timelinePos=i,e.appendInPlace&&this.advanceInPlace(i),this.checkBuffer(this.bufferedPos<i)),this.setSchedulePosition(r)}}}else{if(e.appendInPlace){const t=e.assetList[r];t&&this.advanceInPlace(t.timelineStart)}this.setSchedulePosition(t,r)}}setScheduleToAssetAtTime(e,t){const n=this.schedule;if(!n)return;const r=t.parentIdentifier,i=n.getEvent(r);if(i){const t=n.findEventIndex(r),a=n.findAssetIndex(i,e);this.advanceAfterAssetEnded(i,t,a-1)}}setSchedulePosition(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(!r||this.playbackDisabled)return;const i=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${i?Bs(i):i}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,s=this.playingLastItem;if(this.isInterstitial(a)){const n=a.event,d=this.playingAsset,c=null==d?void 0:d.identifier,h=c?this.getAssetPlayer(c):null;if(h&&c&&(!this.eventItemsMatch(a,i)||void 0!==t&&c!==n.assetList[t].identifier)){var o;const t=n.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${t+1}/${n.assetList.length} ${Fs(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(u.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:t,event:n,schedule:r.slice(0),scheduleIndex:e,player:h}),a!==this.playingItem)return void(this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(n,this.findItemIndex(this.playingItem),t));this.retreiveMediaSource(c,i),!h.media||null!=(o=this.detachedData)&&o.mediaSource||h.detachMedia()}if(!this.eventItemsMatch(a,i)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${n} ${Bs(a)}`),n.hasPlayed=!0,this.hls.trigger(u.INTERSTITIAL_ENDED,{event:n,schedule:r.slice(0),scheduleIndex:e}),n.cue.once)){var l;this.updateSchedule();const e=null==(l=this.schedule)?void 0:l.items;if(i&&e){const n=this.findItemIndex(i);this.advanceSchedule(n,e,t,a,s)}return}}this.advanceSchedule(e,r,t,a,s)}advanceSchedule(e,t,n,r,i){const a=this.schedule;if(!a)return;const s=t[e]||null,o=this.primaryMedia,l=this.playerQueue;if(l.length&&l.forEach(t=>{const n=t.interstitial,r=a.findEventIndex(n.identifier);(r<e||r>e+1)&&this.clearInterstitial(n,s)}),this.isInterstitial(s)){this.timelinePos=Math.min(Math.max(this.timelinePos,s.start),s.end);const i=s.event;if(void 0===n){const t=Os(i,(n=a.findAssetIndex(i,this.timelinePos))-1);if(i.isAssetPastPlayoutLimit(t)||i.appendInPlace&&this.timelinePos===s.end)return void this.advanceAfterAssetEnded(i,e,n);n=t}const l=this.waitingItem;this.assetsBuffered(s,o)||this.setBufferingItem(s);let d=this.preloadAssets(i,n);if(this.eventItemsMatch(s,l||r)||(this.waitingItem=s,this.log(`INTERSTITIAL_STARTED ${Bs(s)} ${i.appendInPlace?"append in place":""}`),this.hls.trigger(u.INTERSTITIAL_STARTED,{event:i,schedule:t.slice(0),scheduleIndex:e})),!i.assetListLoaded)return void this.log(`Waiting for ASSET-LIST to complete loading ${i}`);if(i.assetListLoader&&(i.assetListLoader.destroy(),i.assetListLoader=void 0),!o)return void this.log(`Waiting for attachMedia to start Interstitial ${i}`);this.waitingItem=this.endedItem=null,this.playingItem=s;const c=i.assetList[n];if(!c)return void this.advanceAfterAssetEnded(i,e,n||0);if(d||(d=this.getAssetPlayer(c.identifier)),null===d||d.destroyed){const e=i.assetList.length;this.warn(`asset ${n+1}/${e} player destroyed ${i}`),d=this.createAssetPlayer(i,c,n),d.loadSource()}if(!this.eventItemsMatch(s,this.bufferingItem)&&i.appendInPlace&&this.isAssetBuffered(c))return;this.startAssetPlayer(d,n,t,e,o),this.shouldPlay&&qs(d.media)}else s?(this.resumePrimary(s,e,r),this.shouldPlay&&qs(this.hls.media)):i&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return!1===this.hls.config.enableInterstitialPlayback}get primaryDetails(){var e;return null==(e=this.mediaSelection)?void 0:e.main.details}get primaryLive(){var e;return!(null==(e=this.primaryDetails)||!e.live)}resumePrimary(e,t,n){var r,i;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Bs(e)}`),null==(r=this.detachedData)||!r.mediaSource){let n=this.timelinePos;(n<e.start||n>=e.end)&&(n=this.getPrimaryResumption(e,t),this.log(Gs("resumePrimary",n)),this.timelinePos=n),this.attachPrimary(n,e)}if(!n)return;const a=null==(i=this.schedule)?void 0:i.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Bs(e)}`),this.hls.trigger(u.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const n=e.start;if(this.primaryLive){const e=this.primaryDetails;if(0===t)return this.hls.startPosition;if(e&&(n<e.fragmentStart||n>e.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);if(null!=t&&t.hls)return t.hls.bufferedToEnd;return rn.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,n){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const i=this.hls;i.media?this.checkBuffer():(this.transferMediaTo(i,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(Gs("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,t){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs(((null==(n=r.mainForwardBufferInfo)?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,t):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),null==(e=this.schedule)||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(u.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(u.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(-1===t.level||!this.schedule)return;const n=this.hls.levels[t.level];if(!n.details)return;const r=S(S({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const n=this.hls.audioTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=S(S({},this.altSelection),{},{audio:n}));const i=S(S({},r),{},{audio:n});this.mediaSelection=i}onSubtitleTrackUpdated(e,t){const n=this.hls.subtitleTracks[t.id],r=this.mediaSelection;if(!r)return void(this.altSelection=S(S({},this.altSelection),{},{subtitles:n}));const i=S(S({},r),{},{subtitles:n});this.mediaSelection=i}onAudioTrackSwitching(e,t){const n=ot(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setAudioOption(t)||e.setAudioOption(n)))}onSubtitleTrackSwitch(e,t){const n=ot(t);this.playerQueue.forEach(({hls:e})=>e&&(e.setSubtitleOption(t)||-1!==t.id&&e.setSubtitleOption(n)))}onBufferCodecs(e,t){const n=t.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const e=this.timelinePos;this.bufferedPos=e,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let e=0;e<t.length;e++){const r=t[e];if(r.cue.post){var n;const e=this.schedule.findEventIndex(r.identifier),t=null==(n=this.schedule.items)?void 0:n[e];this.isInterstitial(t)&&this.eventItemsMatch(t,this.bufferingItem)&&this.bufferedToItem(t,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const e=this.findItemIndex(t);this.setSchedulePosition(e+1)}else this.shouldPlay=!1}updateItem(e,t){var n;const r=null==(n=this.schedule)?void 0:n.items;if(e&&r){return r[this.findItemIndex(e,t)]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((t,n)=>{e.event.isAssetPastPlayoutLimit(n)&&this.clearAssetPlayer(t.identifier,null)});const n=e.end+.25,r=rn.bufferInfo(this.primaryMedia,n,0);if(r.end>n||(r.nextStart||0)>n){this.log(`trim buffered interstitial ${Bs(e)} (was ${Bs(t)})`);const r=!0;this.attachPrimary(n,null,r),this.flushFrontBuffer(n)}}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var n;return!!t&&(e===t||e.event.identifier===(null==(n=t.event)?void 0:n.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const n=this.mediaSelection;n&&(null==(t=this.schedule)||t.updateSchedule(n,[],e))}checkBuffer(e){var t;const n=null==(t=this.schedule)?void 0:t.items;if(!n)return;const r=rn.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,t,n){const r=this.schedule,i=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(1===t.length&&this.itemsMatch(t[0],i))return void(this.bufferedPos=e);const a=this.playingItem,s=this.findItemIndex(a);let o=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var l;const n=this.findItemIndex(i),r=Math.min(n+1,t.length-1),a=t[r];if((-1===o&&i&&e>=i.end||null!=(l=a.event)&&l.appendInPlace&&e+.01>=a.start)&&(o=r),this.isInterstitial(i)){const e=i.event;if(r-s>1&&!1===e.appendInPlace)return;if(0===e.assetList.length&&e.assetListLoader)return}if(this.bufferedPos=e,o>n&&o>s)this.bufferedToItem(a);else{const t=this.primaryDetails;this.primaryLive&&t&&e>t.edge-t.targetduration&&a.start<t.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(a)&&this.preloadAssets(a.event,0)}}else n&&a&&!this.itemsMatch(a,i)&&(o===s?this.bufferedToItem(a):o===s+1&&this.bufferedToItem(t[o]))}assetsBuffered(e,t){return 0!==e.event.assetList.length&&!e.event.assetList.some(e=>{const n=this.getAssetPlayer(e.identifier);return!(null!=n&&n.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,t)&&n){const{items:r,events:i}=n;if(!r||!i)return t;const a=this.isInterstitial(e),s=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const o=s?s.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Bs(e)}`+(t?` (${o.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const t=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((e,n)=>{const r=this.getAssetPlayer(e.identifier);r&&(n===t&&r.loadSource(),r.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(e=>e.pauseBuffering());this.hls.trigger(u.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:i.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled)if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(null!==n){this.bufferingAsset=null;const t=this.detachedData;if(t)if(t.mediaSource){const t=!0;this.attachPrimary(e.start,e,t)}else this.preloadPrimary(e);else this.preloadPrimary(e)}}preloadPrimary(e){const t=this.findItemIndex(e),n=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,t){const n=e.event,r=0===n.assetList.length&&!n.assetListLoader,i=n.cue.once;if(r||!i){const e=this.preloadAssets(n,t);if(null!=e&&e.interstitial.appendInPlace){const t=this.primaryMedia;t&&this.bufferAssetPlayer(e,t)}}}preloadAssets(e,t){const n=e.assetUrl,r=e.assetList.length,i=0===r&&!e.assetListLoader,a=e.cue.once;if(i){const i=e.timelineStart;if(e.appendInPlace){var s;const t=this.playingItem;this.isInterstitial(t)||(null==t||null==(s=t.nextEvent)?void 0:s.identifier)!==e.identifier||this.flushFrontBuffer(i+.25)}let a,o=0;if(!this.playingItem&&this.primaryLive&&(o=this.hls.startPosition,-1===o&&(o=this.hls.liveSyncPosition||0)),o&&!e.cue.pre&&!e.cue.post){const e=o-i;e>0&&(a=Math.round(1e3*e)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${n?1:r} ${e}${a?` live-start: ${o} start-offset: ${a}`:""}`),n)return this.createAsset(e,0,0,i,e.duration,n);const l=this.assetListLoader.loadAssetList(e,a);l&&(e.assetListLoader=l)}else if(!a&&r){for(let i=t;i<r;i++){const t=e.assetList[i],n=this.getAssetPlayerQueueIndex(t.identifier);-1!==n&&!this.playerQueue[n].destroyed||t.error||this.createAssetPlayer(e,t,i)}const n=e.assetList[t];if(n){const e=this.getAssetPlayer(n.identifier);return e&&e.loadSource(),e}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`);Object.keys(t).forEach(t=>{this.hls.trigger(u.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:t})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let n=0;n<t.length;n++)if(e===t[n].assetId)return n;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t)for(let n=0;n<e.length;n++)if(e[n].media===t)return e[n];return null}createAsset(e,t,n,r,i,a){const s={parentIdentifier:e.identifier,identifier:Ls(e,a,t),duration:i,startOffset:n,timelineStart:r,uri:a};return this.createAssetPlayer(e,s,t)}createAssetPlayer(e,t,n){const r=this.hls,i=r.userConfig;let a=i.videoPreference;const s=r.loadLevelObj||r.levels[r.currentLevel];(a||s)&&(a=E({},a),s.videoCodec&&(a.videoCodec=s.videoCodec),s.videoRange&&(a.allowedVideoRanges=[s.videoRange]));const d=r.audioTracks[r.audioTrack],c=r.subtitleTracks[r.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const e=this.timelinePos-t.timelineStart;if(e>1){const n=t.duration;n&&e<n&&(h=e)}}const f=t.identifier,g=S(S({},i),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:f,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:d||i.audioPreference,subtitlePreference:c||i.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));const p=g.cmcd;null!=p&&p.sessionId&&p.contentId&&(g.cmcd=E({},p,{contentId:xs(t.uri)})),this.getAssetPlayer(f)&&this.warn(`Duplicate date range identifier ${e} and asset ${f}`);const m=new Us(this.HlsPlayerClass,g,e,t);this.playerQueue.push(m),e.assetList[n]=t;let y=!0;const v=r=>{if(r.live){var i;const t=new Error(`Interstitials MUST be VOD assets ${e}`),r={fatal:!0,type:o.OTHER_ERROR,details:l.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},a=(null==(i=this.schedule)?void 0:i.findEventIndex(e.identifier))||-1;return void this.handleAssetItemError(r,e,a,n,t.message)}const a=r.edge-r.fragmentStart,s=t.duration;(y||null===s||a>s)&&(y=!1,this.log(`Interstitial asset "${f}" duration change ${s} > ${a}`),t.duration=a,this.updateSchedule())};m.on(u.LEVEL_UPDATED,(e,{details:t})=>v(t)),m.on(u.LEVEL_PTS_UPDATED,(e,{details:t})=>v(t)),m.on(u.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const b=(e,t)=>{const n=this.getAssetPlayer(f);if(n&&t.tracks){n.off(u.BUFFER_CODECS,b),n.tracks=t.tracks;const e=this.primaryMedia;this.bufferingAsset===n.assetItem&&e&&!n.media&&this.bufferAssetPlayer(n,e)}};m.on(u.BUFFER_CODECS,b);m.on(u.BUFFERED_TO_END,()=>{var n;const r=this.getAssetPlayer(f);if(this.log(`buffered to end of asset ${r}`),!r||!this.schedule)return;const i=this.schedule.findEventIndex(e.identifier),a=null==(n=this.schedule.items)?void 0:n[i];this.isInterstitial(a)&&this.advanceAssetBuffering(a,t)});const T=t=>()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;this.shouldPlay=!0;const n=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,t)};return m.once(u.MEDIA_ENDED,T(n)),m.once(u.PLAYOUT_LIMIT_REACHED,T(1/0)),m.on(u.ERROR,(t,r)=>{if(!this.schedule)return;const i=this.getAssetPlayer(f);if(r.details===l.BUFFER_STALLED_ERROR)return null!=i&&i.appendInPlace?void this.handleInPlaceStall(e):(this.onTimeupdate(),void this.checkBuffer(!0));this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${r.error} ${e}`)}),m.on(u.DESTROYING,()=>{if(!this.getAssetPlayer(f)||!this.schedule)return;const t=new Error(`Asset player destroyed unexpectedly ${f}`),r={fatal:!0,type:o.OTHER_ERROR,details:l.INTERSTITIAL_ASSET_ITEM_ERROR,error:t};this.handleAssetItemError(r,e,this.schedule.findEventIndex(e.identifier),n,t.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Fs(t)}`),this.hls.trigger(u.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:n,event:e,player:m}),m}clearInterstitial(e,t){e.assetList.forEach(e=>{this.clearAssetPlayer(e.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(-1!==t){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[t];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,t){const n=this.getAssetPlayerQueueIndex(e);if(-1!==n){const e=this.playerQueue[n];this.log(`clear ${e} toSegment: ${t?Bs(t):t}`),this.transferMediaFromPlayer(e,t),this.playerQueue.splice(n,1),e.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,n,r,i){const{interstitial:a,assetItem:s,assetId:o}=e,l=a.assetList.length,d=this.playingAsset;this.endedAsset=null,this.playingAsset=s,d&&d.identifier===o||(d&&(this.clearAssetPlayer(d.identifier,n[r]),delete d.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${l} ${Fs(s)}`),this.hls.trigger(u.INTERSTITIAL_ASSET_STARTED,{asset:s,assetListIndex:t,event:a,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,i)}bufferAssetPlayer(e,t){var n,r;if(!this.schedule)return;const{interstitial:i,assetItem:a}=e,s=this.schedule.findEventIndex(i.identifier),u=null==(n=this.schedule.items)?void 0:n[s];if(!u)return;e.loadSource(),this.setBufferingItem(u),this.bufferingAsset=a;const d=this.getBufferingPlayer();if(d===e)return;const c=i.appendInPlace;if(c&&!1===(null==d?void 0:d.interstitial.appendInPlace))return;const h=(null==d?void 0:d.tracks)||(null==(r=this.detachedData)?void 0:r.tracks)||this.requiredTracks;if(c&&a!==this.playingAsset){if(!e.tracks)return void this.log(`Waiting for track info before buffering ${e}`);if(h&&!D(h,e.tracks)){const t=new Error(`Asset ${Fs(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(h)}')`),n={fatal:!0,type:o.OTHER_ERROR,details:l.INTERSTITIAL_ASSET_ITEM_ERROR,error:t},r=i.findAssetIndex(a);return void this.handleAssetItemError(n,i,s,r,t.message)}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,n=this.primaryMedia;if(!t||!n)return;const r=n.currentTime,i=t.findAssetIndex(e,r),a=e.assetList[i];if(a){const s=this.getAssetPlayer(a.identifier);if(s){const o=s.currentTime||r-a.timelineStart,l=s.duration-o;if(this.warn(`Stalled at ${o} of ${o+l} in ${s} ${e} (media.currentTime: ${r})`),o&&(l/n.playbackRate<.5||s.bufferedInPlaceToEnd(n))&&s.hls){const n=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,n,i)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,n,r,i){if(e.details===l.BUFFER_STALLED_ERROR)return;const a=t.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a?Fs(a):a} ${e.error}`),!this.schedule)return;const s=(null==a?void 0:a.identifier)||"",o=this.getAssetPlayerQueueIndex(s),d=this.playerQueue[o]||null,c=this.schedule.items,h=E({},e,{fatal:!1,errorAction:Nt(!0),asset:a,assetListIndex:r,event:t,schedule:c,scheduleIndex:n,player:d});if(this.hls.trigger(u.INTERSTITIAL_ASSET_ERROR,h),!e.fatal)return;const f=this.playingAsset,g=this.bufferingAsset,p=new Error(i);if(a&&(this.clearAssetPlayer(s,null),a.error=p),t.assetList.some(e=>!e.error))for(let l=r;l<t.assetList.length;l++)this.resetAssetPlayer(t.assetList[l].identifier);else t.error=p;this.updateSchedule(!0),t.error?this.primaryFallback(t):f&&f.identifier===s?this.advanceAfterAssetEnded(t,n,r):g&&g.identifier===s&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,g)}primaryFallback(e){const t=e.timelineStart,n=this.effectivePlayingItem;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${Bs(n)} error: ${e.error}`);let r=this.timelinePos;-1===r&&(r=this.hls.startPosition);const i=this.updateItem(n,r);if(this.itemsMatch(n,i)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const a=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(a)}else this.checkStart()}onAssetListLoaded(e,t){var n,r;const i=t.event,a=i.identifier,s=t.assetListResponse.ASSETS;if(null==(n=this.schedule)||!n.hasEvent(a))return;const o=i.timelineStart,l=i.duration;let u=0;s.forEach((e,t)=>{const n=parseFloat(e.DURATION);this.createAsset(i,t,u,o+u,n,e.URI),u+=n}),i.duration=u,this.log(`Loaded asset-list with duration: ${u} (was: ${l}) ${i}`);const d=this.waitingItem,c=(null==d?void 0:d.event.identifier)===a;this.updateSchedule();const h=null==(r=this.bufferingItem)?void 0:r.event;if(c){var f;const e=this.schedule.findEventIndex(a),t=null==(f=this.schedule.items)?void 0:f[e];if(t){if(!this.playingItem&&this.timelinePos>t.end){if(this.schedule.findItemIndexAtTime(this.timelinePos)!==e)return i.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${i}`),this.updateSchedule(!0),void this.primaryFallback(i)}this.setBufferingItem(t)}this.setSchedulePosition(e)}else if((null==h?void 0:h.identifier)===a){const e=i.assetList[0];if(e){const t=this.getAssetPlayer(e.identifier);if(h.appendInPlace){const e=this.primaryMedia;t&&e&&this.bufferAssetPlayer(t,e)}else t&&t.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case l.ASSET_LIST_PARSING_ERROR:case l.ASSET_LIST_LOAD_ERROR:case l.ASSET_LIST_LOAD_TIMEOUT:{const e=t.interstitial;e&&(this.updateSchedule(!0),this.primaryFallback(e));break}case l.BUFFER_STALLED_ERROR:{const e=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(e)&&e.event.appendInPlace)return void this.handleInPlaceStall(e.event);this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}});function Wo(e){return e&&"object"==typeof e?Array.isArray(e)?e.map(Wo):Object.keys(e).reduce((t,n)=>(t[n]=Wo(e[n]),t),{}):e}function Xo(e,t){const n=e.loader;if(n!==Go&&n!==$o)t.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1;else{(function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1})()&&(e.loader=Go,e.progressive=!0,e.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}}class Qo extends en{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var e;null!=(e=this.media)&&e.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{var e;this.hls&&(this.ended=(null==(e=this.media)?void 0:e.currentTime)||1,this.hls.trigger(u.MEDIA_ENDED,{stalled:!1}))},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(100),this.mediaSource=t.mediaSource;const n=this.media=t.media;Tr(n,"playing",this.onMediaPlaying),Tr(n,"waiting",this.onMediaWaiting),Tr(n,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:n}=this;n&&(Sr(n,"playing",this.onMediaPlaying),Sr(n,"waiting",this.onMediaWaiting),Sr(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(null==(e=this.media)||!e.readyState||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var n,r;const i=null==(n=this.hls)?void 0:n.config;if(!i)return;const a=this.media;if(!a)return;const{seeking:s}=a,o=this.seeking&&!s,l=!this.seeking&&s,d=a.paused&&!s||a.ended||0===a.playbackRate;if(this.seeking=s,e!==t)return t&&(this.ended=0),this.moved=!0,s||(this.nudgeRetry=0,i.nudgeOnVideoHole&&!d&&e>t&&this.nudgeOnVideoHole(e,t)),void(0===this.waiting&&this.stallResolved(e));if(l||o)return void(o&&this.stallResolved(e));if(d)return this.nudgeRetry=0,this.stallResolved(e),void(!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(u.MEDIA_ENDED,{stalled:!1})));if(!rn.getBuffered(a).length)return void(this.nudgeRetry=0);const c=rn.bufferInfo(a,e,0),h=c.nextStart||0,f=this.fragmentTracker;if(s&&f&&this.hls){const t=Jo(this.hls.inFlightFragments,e),n=c.len>2,r=!h||t||h-e>2&&!f.getPartialFragment(e);if(n||r)return;this.moved=!1}const g=null==(r=this.hls)?void 0:r.latestLevelDetails;if(!this.moved&&null!==this.stalled&&f){if(!(c.len>0)&&!h)return;const t=Math.max(h,c.start||0)-e,n=!(null==g||!g.live)?2*g.targetduration:2,r=el(e,f);if(t>0&&(t<=n||r))return void(a.paused||this._trySkipBufferHole(r))}const p=i.detectStallWithCurrentTimeMs,m=self.performance.now(),y=this.waiting;let v=this.stalled;if(null===v){if(!(y>0&&m-y<p))return void(this.stalled=m);v=this.stalled=y}const b=m-v;if(!s&&(b>=p||y)&&this.hls){var E;if("ended"===(null==(E=this.mediaSource)?void 0:E.readyState)&&(null==g||!g.live)&&Math.abs(e-((null==g?void 0:g.edge)||0))<1){if(this.ended)return;return this.ended=e||1,void this.hls.trigger(u.MEDIA_ENDED,{stalled:!0})}if(this._reportStall(c),!this.media||!this.hls)return}const T=rn.bufferInfo(a,e,i.maxBufferHole);this._tryFixBufferStall(T,b,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(u.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&null!=(n=this.buffered.audio)&&n.length&&r&&r.length>1&&e>r.end(0)){const n=rn.bufferedInfo(rn.timeRangesToArray(this.buffered.audio),e,0);if(n.len>1&&t>=n.start){const n=rn.timeRangesToArray(r),i=rn.bufferedInfo(n,t,0).bufferedIndex;if(i>-1&&i<n.length-1){const t=rn.bufferedInfo(n,e,0).bufferedIndex,r=n[i].end,a=n[i+1].start;if((-1===t||t>i)&&a-r<1&&e-r<2){const n=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${r} -> ${a} buffered index: ${t}`);this.warn(n.message),this.media.currentTime+=1e-6;let i=el(e,this.fragmentTracker);i&&"fragment"in i?i=i.fragment:i||(i=void 0);const s=rn.bufferInfo(this.media,e,0);this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,frag:i,buffer:s.len,bufferInfo:s})}}}}}_tryFixBufferStall(e,t,n){var r,i;const{fragmentTracker:a,media:s}=this,o=null==(r=this.hls)?void 0:r.config;if(!s||!a||!o)return;const l=null==(i=this.hls)?void 0:i.latestLevelDetails,u=el(n,a);if(u||null!=l&&l.live&&n<l.fragmentStart){if(this._trySkipBufferHole(u)||!this.media)return}const d=e.buffered,c=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>o.maxBufferHole||e.nextStart&&(e.nextStart-n<o.maxBufferHole||c))&&(t>1e3*o.highBufferWatchdogPeriod||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const e=n.getFragAtPos(t,g),i=n.getFragAtPos(r,g);if(e&&i)return i.sn-e.sn<2}return!1}_reportStall(e){const{hls:t,media:n,stallReported:r,stalled:i}=this;if(!r&&null!==i&&n&&t){this.stallReported=!0;const r=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${it(e)})`);this.warn(r.message),t.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_STALLED_ERROR,fatal:!1,error:r,buffer:e.len,bufferInfo:e,stalled:{start:i}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:n,media:r}=this,i=null==(t=this.hls)?void 0:t.config;if(!r||!n||!i)return 0;const a=r.currentTime,s=rn.bufferInfo(r,a,0),d=a<s.start?s.start:s.nextStart;if(d&&this.hls){const t=s.len<=i.maxBufferHole,h=s.len>0&&s.len<1&&r.readyState<3,f=d-a;if(f>0&&(t||h)){if(f>i.maxBufferHole){let t=!1;if(0===a){const e=n.getAppendedFrag(0,g);e&&d<e.end&&(t=!0)}if(!t&&e){var c;if(null==(c=this.hls.loadLevelObj)||!c.details)return 0;if(Jo(this.hls.inFlightFragments,d))return 0;let t=!1,r=e.end;for(;r<d;){const e=el(r,n);if(!e){t=!0;break}r+=e.duration}if(t)return 0}}const t=Math.max(d+.05,a+.1);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${t}`),this.moved=!0,r.currentTime=t,null==e||!e.gap){const n=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${t}`),r={type:o.MEDIA_ERROR,details:l.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:n,reason:n.message,buffer:s.len,bufferInfo:s};e&&("fragment"in e?r.part=e:r.frag=e),this.hls.trigger(u.ERROR,r)}return t}}return 0}_tryNudgeBuffer(e){const{hls:t,media:n,nudgeRetry:r}=this,i=null==t?void 0:t.config;if(!n||!i)return 0;const a=n.currentTime;if(this.nudgeRetry++,r<i.nudgeMaxRetry){const s=a+(r+1)*i.nudgeOffset,d=new Error(`Nudging 'currentTime' from ${a} to ${s}`);this.warn(d.message),n.currentTime=s,t.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_NUDGE_ON_STALL,error:d,fatal:!1,buffer:e.len,bufferInfo:e})}else{const n=new Error(`Playhead still not moving while enough data buffered @${a} after ${i.nudgeMaxRetry} nudges`);this.error(n.message),t.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.BUFFER_STALLED_ERROR,error:n,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Jo(e,t){const n=Zo(e.main);if(n&&n.start<=t)return n;const r=Zo(e.audio);return r&&r.start<=t?r:null}function Zo(e){if(!e)return null;switch(e.state){case Ir:case Ar:case Lr:case Mr:return null}return e.frag}function el(e,t){return t.getAppendedFrag(e,g)||t.getPartialFragment(e)}function tl(){if("undefined"!=typeof self)return self.VTTCue||self.TextTrackCue}function nl(e,t,n,r,i){let a=new e(t,n,"");try{a.value=r,i&&(a.type=i)}catch(s){a=new e(t,n,it(i?S({type:i},r):r))}return a}const rl=(()=>{const e=tl();try{e&&new e(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class il{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(u.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(u.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(u.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(u.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(u.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var n;this.media=t.media,!1===(null==(n=t.overrides)?void 0:n.cueRemoval)&&(this.removeCues=!1)}onMediaAttached(){var e;const t=null==(e=this.hls)?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null;!!t.transferMedia||(this.id3Track&&(this.removeCues&&ks(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if("metadata"===n.kind&&"id3"===n.label)return As(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:i}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=tl();if(a)for(let s=0;s<i.length;s++){const e=i[s].type;if(e===ci.emsg&&!n||!r)continue;const t=oi(i[s].data),o=i[s].pts;let l=o+i[s].duration;l>rl&&(l=rl);l-o<=0&&(l=o+.25);for(let n=0;n<t.length;n++){const r=t[n];if(!li(r)){this.updateId3CueEnds(o,e);const t=nl(a,o,l,r,e);t&&this.id3Track.addCue(t)}}}}updateId3CueEnds(e,t){var n;const r=null==(n=this.id3Track)?void 0:n.cues;if(r)for(let i=r.length;i--;){const n=r[i];n.type===t&&n.startTime<e&&n.endTime===rl&&(n.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:r}){const{id3Track:i,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:s,enableID3MetadataCues:o}}=a;if(i&&(s||o)){let e;e="audio"===r?e=>e.type===ci.audioId3&&o:"video"===r?e=>e.type===ci.emsg&&s:e=>e.type===ci.audioId3&&o||e.type===ci.emsg&&s,_s(i,t,n,e)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:i,enableDateRangeMetadataCues:a,interstitialsController:s}=this.hls.config;if(!a)return;const o=tl();if(r&&i&&!s){const{fragmentStart:t,fragmentEnd:n}=e;let i=this.assetCue;i?(i.startTime=t,i.endTime=n):o&&(i=this.assetCue=nl(o,t,n,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),i&&(i.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(i),i.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:u}=e,d=Object.keys(u);let c=this.dateRangeCuesAppended;var h;if(l&&t)if(null!=(h=l.cues)&&h.length){const e=Object.keys(c).filter(e=>!d.includes(e));for(let t=e.length;t--;){var f;const n=e[t],r=null==(f=c[n])?void 0:f.cues;delete c[n],r&&Object.keys(r).forEach(e=>{const t=r[e];if(t){t.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(t)}catch(n){}}})}}else c=this.dateRangeCuesAppended={};const g=e.fragments[e.fragments.length-1];if(0!==d.length&&n(null==g?void 0:g.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let e=0;e<d.length;e++){const t=d[e],n=u[t],r=n.startTime,i=c[t],a=(null==i?void 0:i.cues)||{};let l=(null==i?void 0:i.durationKnown)||!1,h=rl;const{duration:f,endDate:g}=n;if(g&&null!==f)h=r+f,l=!0;else if(n.endOnNext&&!l){const e=d.reduce((e,t)=>{if(t!==n.id){const r=u[t];if(r.class===n.class&&r.startDate>n.startDate&&(!e||n.startDate<e.startDate))return r}return e},null);e&&(h=e.startTime,l=!0)}const p=Object.keys(n.attr);for(let e=0;e<p.length;e++){const u=p[e];if(!fn(u))continue;const d=a[u];if(d)!l||null!=i&&i.durationKnown?Math.abs(d.startTime-r)>.01&&(d.startTime=r,d.endTime=h):d.endTime=h;else if(o){let e=n.attr[u];gn(u)&&(e=N(e));const i=nl(o,r,h,{key:u,data:e},ci.dateRange);i&&(i.id=t,this.id3Track.addCue(i),a[u]=i,s&&("X-ASSET-LIST"!==u&&"X-ASSET-URL"!==u||i.addEventListener("enter",this.onEventCueEnter)))}}c[t]={cues:a,dateRange:n,durationKnown:l}}}}}class al{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:e}=this,t=this.levelDetails;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(null===n)return;this._latency=n;const{lowLatencyMode:r,maxLiveSyncPlaybackRate:i}=this.config;if(!r||1===i||!t.live)return;const a=this.targetLatency;if(null===a)return;const s=n-a;if(s<Math.min(this.maxLatency,a+t.targetduration)&&s>.05&&this.forwardBufferLength>1){const t=Math.min(2,Math.max(1,i)),n=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20,r=Math.min(t,Math.max(1,n));this.changeMediaPlaybackRate(e,r)}else 1!==e.playbackRate&&0!==e.playbackRate&&this.changeMediaPlaybackRate(e,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return(null==(e=this.hls)?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(void 0!==e.liveMaxLatencyDuration)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(null===e||null===this.hls)return null;const{holdBack:t,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:i,liveSyncDurationCount:a,lowLatencyMode:s}=this.config,o=this.hls.userConfig;let l=s&&n||t;(this._targetLatencyUpdated||o.liveSyncDuration||o.liveSyncDurationCount||0===l)&&(l=void 0!==i?i:a*r);const u=r;return l+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,u)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(null===e||null===t)return null;const n=this.levelDetails;if(null===n)return null;const r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,s=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),s)}get drift(){const e=this.levelDetails;return null===e?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(null===e)return 0;const t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(u.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(u.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(u.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(u.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var n;t.details===l.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&null!=(n=this.levelDetails)&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var n,r;e.playbackRate!==t&&(null==(n=this.hls)||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${null==(r=this.targetLatency)?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return null===e?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return null===e?null:e-this.currentTime}}class sl extends fa{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(u.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(u.FRAG_BUFFERED,this.onFragBuffered,this),e.on(u.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(u.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(u.FRAG_BUFFERED,this.onFragBuffered,this),e.off(u.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,r=[],i={},a={};let s=!1,o=!1,l=!1;t.levels.forEach(e=>{const t=e.attrs;let{audioCodec:u,videoCodec:d}=e;u&&(e.audioCodec=u=Pe(u,n)||void 0),d&&(d=e.videoCodec=function(e){const t=e.split(",");for(let n=0;n<t.length;n++){const e=t[n].split(".");e.length>2&&"avc1"===e[0]&&(t[n]=`avc1.${parseInt(e[1]).toString(16)}${("000"+parseInt(e[2]).toString(16)).slice(-4)}`)}return t.join(",")}(d));const{width:c,height:h,unknownCodecs:f}=e,g=(null==f?void 0:f.length)||0;if(s||(s=!(!c||!h)),o||(o=!!d),l||(l=!!u),g||u&&!this.isAudioSupported(u)||d&&!this.isVideoSupported(d))return void this.log(`Some or all CODECS not supported "${t.CODECS}"`);const{CODECS:p,"FRAME-RATE":m,"HDCP-LEVEL":y,"PATHWAY-ID":v,RESOLUTION:b,"VIDEO-RANGE":E}=t,T=`${`${v||"."}-`}${e.bitrate}-${b}-${m}-${p}-${E}-${y}`;if(i[T])if(i[T].uri===e.url||e.attrs["PATHWAY-ID"])i[T].addGroupId("audio",t.AUDIO),i[T].addGroupId("text",t.SUBTITLES);else{const t=a[T]+=1;e.attrs["PATHWAY-ID"]=new Array(t+1).join(".");const n=this.createLevel(e);i[T]=n,r.push(n)}else{const t=this.createLevel(e);i[T]=t,a[T]=1,r.push(t)}}),this.filterAndSortMediaOptions(r,t,s,o,l)}createLevel(e){const t=new tt(e),n=e.supplemental;if(null!=n&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const e=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(e.message),t.supportedResult=Ge(e,[])}return t}isAudioSupported(e){return Re(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Re(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,n,r,i){var a;let s=[],d=[],c=e;const h=(null==(a=t.stats)?void 0:a.parsing)||{};if((n||r)&&i&&(c=c.filter(({videoCodec:e,videoRange:t,width:n,height:r})=>{return(!!e||!(!n||!r))&&(!!(i=t)&&We.indexOf(i)>-1);var i})),0===c.length)return Promise.resolve().then(()=>{if(this.hls){let e="no level with compatible codecs found in manifest",n=e;t.levels.length&&(n=`one or more CODECS in variant not supported: ${it(t.levels.map(e=>e.attrs.CODECS).filter((e,t,n)=>n.indexOf(e)===t))}`,this.warn(n),e+=` (${n})`);const r=new Error(e);this.hls.trigger(u.ERROR,{type:o.MEDIA_ERROR,details:l.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:r,reason:n})}}),void(h.end=performance.now());t.audioTracks&&(s=t.audioTracks.filter(e=>!e.audioCodec||this.isAudioSupported(e.audioCodec)),ol(s)),t.subtitles&&(d=t.subtitles,ol(d));const f=c.slice(0);c.sort((e,t)=>{if(e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"])return(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&e.height!==t.height)return e.height-t.height;if(e.frameRate!==t.frameRate)return e.frameRate-t.frameRate;if(e.videoRange!==t.videoRange)return We.indexOf(e.videoRange)-We.indexOf(t.videoRange);if(e.videoCodec!==t.videoCodec){const n=De(e.videoCodec),r=De(t.videoCodec);if(n!==r)return r-n}if(e.uri===t.uri&&e.codecSet!==t.codecSet){const n=Le(e.codecSet),r=Le(t.codecSet);if(n!==r)return r-n}return e.averageBitrate!==t.averageBitrate?e.averageBitrate-t.averageBitrate:0});let g=f[0];if(this.steering&&(c=this.steering.filterParsedLevels(c),c.length!==f.length))for(let o=0;o<f.length;o++)if(f[o].pathwayId===c[0].pathwayId){g=f[o];break}this._levels=c;for(let o=0;o<c.length;o++)if(c[o]===g){var p;this._firstLevel=o;const e=g.bitrate,t=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${c.length} level(s) found, first bitrate: ${e}`),void 0===(null==(p=this.hls.userConfig)?void 0:p.abrEwmaDefaultEstimate)){const n=Math.min(e,this.hls.config.abrEwmaDefaultEstimateMax);n>t&&t===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=n)}break}const m=i&&!r,y=this.hls.config,v=!(!y.audioStreamController||!y.audioTrackController),b={levels:c,audioTracks:s,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:i,video:r,altAudio:v&&!m&&s.some(e=>!!e.url)};h.end=performance.now(),this.hls.trigger(u.MANIFEST_PARSED,b)}get levels(){return 0===this._levels.length?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(0===t.length)return;if(e<0||e>=t.length){const n=new Error("invalid level idx"),r=e<0;if(this.hls.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.LEVEL_SWITCH_ERROR,level:e,fatal:r,error:n,reason:n.message}),r)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,i=r?r.attrs["PATHWAY-ID"]:void 0,a=t[e],s=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&r&&i===s)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${s?" with Pathway "+s:""} from level ${n}${i?" with Pathway "+i:""}`);const d={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(u.LEVEL_SWITCHING,d);const c=a.details;if(!c||c.live){const e=this.switchParams(a.uri,null==r?void 0:r.details,c);this.loadPlaylist(e)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(void 0===this._startLevel){const e=this.hls.config.startLevel;return void 0!==e?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),n=e.filter(e=>-1!==t.indexOf(e));if(e.length<1)return void this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);this.steering.pathwayPriority=n}}onError(e,t){!t.fatal&&t.context&&t.context.type===c&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(void 0!==t&&t.type===g){const e=t.elementaryStreams;if(!Object.keys(e).some(t=>!!e[t]))return;const n=this._levels[t.level];null!=n&&n.loadError&&(this.log(`Resetting level error count of ${n.loadError} on frag buffered`),n.loadError=0)}}onLevelLoaded(e,t){var n;const{level:r,details:i}=t,a=t.levelInfo;var s;if(!a)return this.warn(`Invalid level index ${r}`),void(null!=(s=t.deliveryDirectives)&&s.skip&&(i.deltaUpdateFailed=!0));if(a===this.currentLevel||t.withoutMultiVariant){0===a.fragmentError&&(a.loadError=0);let e=a.details;e===t.details&&e.advanced&&(e=void 0),this.playlistLoaded(r,t,e)}else null!=(n=t.deliveryDirectives)&&n.skip&&(i.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const n=this.getUrlWithDirectives(e.uri,t),r=this.currentLevelIndex,i=e.attrs["PATHWAY-ID"],a=e.details,s=null==a?void 0:a.age;this.log(`Loading level index ${r}${void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:""}${i?" Pathway "+i:""}${s&&a.live?" age "+s.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(u.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(1===this._levels.length)return;const n=this._levels.filter((t,n)=>n!==e||(this.steering&&this.steering.removeLevel(t),t===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,t.details&&t.details.fragments.forEach(e=>e.level=-1)),!1));fr(n),this._levels=n,this.currentLevelIndex>-1&&null!=(t=this.currentLevel)&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(u.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(u.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function ol(e){const t={};e.forEach(e=>{const n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++})}function ll(){return self.SourceBuffer||self.WebKitSourceBuffer}function ul(){if(!C())return!1;const e=ll();return!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove}class dl extends Or{constructor(e,t,r){super(e,t,r,"stream-controller",g),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const e=this.media,t=e?e.currentTime:null;if(null===t||!n(t))return;if(this.log(`Media seeked to ${t.toFixed(3)}`),!this.getBufferedFrag(t))return;const r=this.getFwdBufferInfoAtPos(e,t,g,0);null!==r&&0!==r.len?this.tick():this.warn(`Main forward buffer length at ${t} on "seeked" event ${r?r.len:"empty"})`)},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(u.MANIFEST_PARSED,this.onManifestParsed,this),e.on(u.LEVEL_LOADING,this.onLevelLoading,this),e.on(u.LEVEL_LOADED,this.onLevelLoaded,this),e.on(u.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(u.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(u.BUFFER_CREATED,this.onBufferCreated,this),e.on(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(u.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(u.MANIFEST_PARSED,this.onManifestParsed,this),e.off(u.LEVEL_LOADED,this.onLevelLoaded,this),e.off(u.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(u.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(u.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(u.BUFFER_CREATED,this.onBufferCreated,this),e.off(u.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(u.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(u.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let e=r.startLevel;-1===e&&(r.config.testBandwidth&&this.levels.length>1?(e=0,this.bitrateTest=!0):e=r.firstAutoLevel),r.nextLoadLevel=e,this.level=r.loadLevel,this._hasEnoughToStart=!!t}n>0&&-1===e&&!t&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=Ir,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=Ar}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Pr:{const{levels:e,level:t}=this,n=null==e?void 0:e[t],r=null==n?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=Ir;break}if(this.hls.nextLoadLevel!==this.level){this.state=Ir;break}break}case Rr:this.checkRetryDate()}this.state===Ir&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),null!=(e=this.media)&&e.readyState&&!1===this.media.seeking&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:r}=this;if(null===t||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch))return;if(this.altAudio&&this.audioOnly)return;const i=this.buffering?e.nextLoadLevel:e.loadLevel;if(null==n||!n[i])return;const a=n[i],s=this.getMainFwdBufferInfo();if(null===s)return;const o=this.getLevelDetails();if(o&&this._streamEnded(s,o)){const e={};return 2===this.altAudio&&(e.type="video"),this.hls.trigger(u.BUFFER_EOS,e),void(this.state=Lr)}if(!this.buffering)return;e.loadLevel!==i&&-1===e.manualLevel&&this.log(`Adapting to level ${i} from level ${this.level}`),this.level=e.nextLoadLevel=i;const l=a.details;if(!l||this.state===Pr||this.waitForLive(a))return this.level=i,this.state=Pr,void(this.startFragRequested=!1);const d=s.len,c=this.getMaxBufferLength(a.maxBitrate);if(d>=c)return;this.backtrackFragment&&this.backtrackFragment.start>s.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:s.end;let f=this.getNextFragment(h,l);if(this.couldBacktrack&&!this.fragPrevious&&f&&W(f)&&this.fragmentTracker.getState(f)!==Ut){var p;const e=(null!=(p=this.backtrackFragment)?p:f).sn-l.startSN,t=l.fragments[e-1];t&&f.cc===t.cc&&(f=t,this.fragmentTracker.removeFragment(t))}else this.backtrackFragment&&s.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const e=this.audioOnly&&!this.altAudio?V:K,t=(e===K?this.videoBuffer:this.mediaBuffer)||this.media;t&&this.afterBufferFlushed(t,e,g)}f=this.getNextFragmentLoopLoading(f,l,s,g,c)}f&&(!f.initSegment||f.initSegment.data||this.bitrateTest||(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,n){const r=this.fragmentTracker.getState(e);r===Pt||r===Ft?W(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,n):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,g)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(null!=t&&t.readyState){let n;const r=this.getAppendedFrag(t.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const i=this.getLevelDetails();if(null!=i&&i.live){const e=this.getMainFwdBufferInfo();if(!e||e.len<2*i.targetduration)return}if(!t.paused&&e){const t=e[this.hls.nextLoadLevel],r=this.fragLastKbps;n=r&&this.fragCurrent?this.fragCurrent.duration*t.maxBitrate/(1e3*r)+1:0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const e=this.followingBufferedFrag(a);if(e){this.abortCurrentFrag();const t=e.maxStartPTS?e.maxStartPTS:e.start,n=e.duration,r=Math.max(a.end,t+Math.min(Math.max(n-this.config.maxFragLookUpTolerance,n*(this.couldBacktrack?.5:.125)),n*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(r,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case kr:case _r:case Rr:case Cr:case Dr:this.state=Ir}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,2===this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;Tr(n,"playing",this.onMediaPlaying),Tr(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:n}=this;n&&(Sr(n,"playing",this.onMediaPlaying),Sr(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t);!!t.transferMedia||(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(u.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let n=!1,r=!1;for(let i=0;i<t.levels.length;i++){const e=t.levels[i].audioCodec;e&&(n=n||-1!==e.indexOf("mp4a.40.2"),r=r||-1!==e.indexOf("mp4a.40.5"))}this.audioCodecSwitch=n&&r&&!function(){var e;const t=ll();return"function"==typeof(null==t||null==(e=t.prototype)?void 0:e.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==Ir)return;const r=t.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=Pr)}onLevelLoaded(e,t){var n;const{levels:r,startFragRequested:i}=this,a=t.level,s=t.details,o=s.totalduration;if(!r)return void this.warn(`Levels were reset while loading level ${a}`);this.log(`Level ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""}, cc [${s.startCC}, ${s.endCC}] duration:${o}`);const l=t.levelInfo,d=this.fragCurrent;!d||this.state!==_r&&this.state!==Rr||d.level!==t.level&&d.loader&&this.abortCurrentFrag();let c=0;if(s.live||null!=(n=l.details)&&n.live){var h;if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;c=this.alignPlaylists(s,l.details,null==(h=this.levelLastLoaded)?void 0:h.details)}if(l.details=s,this.levelLastLoaded=l,i||this.setStartPosition(s,c),this.hls.trigger(u.LEVEL_UPDATED,{details:s,level:a}),this.state===Pr){if(this.waitForCdnTuneIn(s))return;this.state=Ir}i&&s.live&&this.synchronizeToLiveEdge(s),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,i=this.getLoadPosition(),a=e.fragmentStart,s=e.edge,o=i>=a-t.maxFragLookUpTolerance&&i<=s;if(null!==r&&n.duration>r&&(i<r||!o)){const a=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!o&&n.readyState<4||i<s-a)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${s}, reset currentTime to : ${r.toFixed(3)}`),"buffered"===this.config.liveSyncMode){var l;const e=rn.bufferInfo(n,r,0);if(null==(l=e.buffered)||!l.length)return void(n.currentTime=r);if(e.start<=i)return void(n.currentTime=r);const{nextStart:t}=rn.bufferedInfo(e.buffered,i,0);t&&(n.currentTime=t)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var t;const n=e.frag,{part:r,payload:i}=e,{levels:a}=this;if(!a)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);const s=a[n.level];if(!s)return void this.warn(`Level ${n.level} not found on progress`);const o=s.details;if(!o)return this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),void this.fragmentTracker.removeFragment(n);const l=s.videoCodec,u=o.PTSKnown||!o.live,d=null==(t=n.initSegment)?void 0:t.data,c=this._getAudioCodec(s),h=this.transmuxer=this.transmuxer||new ha(this.hls,g,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=r?r.index:-1,p=-1!==f,m=new tn(n.level,n.sn,n.stats.chunkCount,i.byteLength,f,p),y=this.initPTS[n.cc];h.push(i,d,c,l,n,r,o.totalduration,u,m,y)}onAudioTrackSwitching(e,t){const n=this.hls,r=2===this.altAudio;if(ht(t.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const e=this.fragCurrent;e&&(this.log("Switching to main audio track, cancel main fragment load"),e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r)return this.fragmentTracker.removeAllFragments(),n.once(u.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(u.AUDIO_TRACK_SWITCHED,t)}),void n.trigger(u.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});n.trigger(u.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=ht(t.url,this.hls);if(n){const e=this.videoBuffer;e&&this.mediaBuffer!==e&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=e)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,t){const n=t.tracks;let r,i,a=!1;for(const s in n){const e=n[s];if("main"===e.id){if(i=s,r=e,"video"===s){const e=n[s];e&&(this.videoBuffer=e.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:r}=t,i=n.type===g;if(i){if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),void(this.state===Dr&&(this.state=Ir));const e=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*e.total/(e.buffering.end-e.loading.first)),W(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const a=this.media;a&&(!this._hasEnoughToStart&&rn.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),i&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var n;if(t.fatal)this.state=Mr;else switch(t.details){case l.FRAG_GAP:case l.FRAG_PARSING_ERROR:case l.FRAG_DECRYPT_ERROR:case l.FRAG_LOAD_ERROR:case l.FRAG_LOAD_TIMEOUT:case l.KEY_LOAD_ERROR:case l.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(g,t);break;case l.LEVEL_LOAD_ERROR:case l.LEVEL_LOAD_TIMEOUT:case l.LEVEL_PARSING_ERROR:t.levelRetry||this.state!==Pr||(null==(n=t.context)?void 0:n.type)!==c||(this.state=Ir);break;case l.BUFFER_ADD_CODEC_ERROR:case l.BUFFER_APPEND_ERROR:if("main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case l.BUFFER_FULL_ERROR:if("main"!==t.parent)return;if(this.reduceLengthAndFlushBuffer(t)){!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}break;case l.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onFragLoadEmergencyAborted(){this.state=Ir,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==V||!this.altAudio){const e=(t===K?this.videoBuffer:this.mediaBuffer)||this.media;e&&(this.afterBufferFlushed(e,t,g),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,-1===this.level&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log(`could not seek to ${n}, already seeking at ${t}`);const r=this.timelineOffset;r&&n&&(n+=r);const i=this.getLevelDetails(),a=rn.getBuffered(e),s=a.length?a.start(0):0,o=s-n,l=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||o>0&&(o<l||this.loadingParts&&o<2*((null==i?void 0:i.partTarget)||0)))&&(this.log(`adjusting start position by ${o} to match buffer start`),n+=o,this.startPosition=n),t<n&&(this.log(`seek to target start position ${n} from current time ${t} buffer start ${s}`),e.currentTime=n)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(e=>{const{hls:n}=this,r=null==e?void 0:e.frag;if(!r||this.fragContextChanged(r))return;t.fragmentError=0,this.state=Ir,this.startFragRequested=!1,this.bitrateTest=!1;const i=r.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),n.trigger(u.FRAG_LOADED,e),r.bitrateTest=!1}).catch(t=>{this.state!==Ar&&this.state!==Mr&&(this.warn(t),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:r}=this,{remuxResult:i,chunkMeta:a}=e,s=this.getCurrentContext(a);if(!s)return void this.resetWhenMissingContext(a);const{frag:o,part:l,level:d}=s,{video:c,text:h,id3:f,initSegment:g}=i,{details:p}=d,m=this.altAudio?void 0:i.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Cr,g){const e=g.tracks;if(e){const n=o.initSegment||o;if(this.unhandledEncryptionError(g,o))return;this._bufferInitSegment(d,e,n,a),r.trigger(u.FRAG_PARSING_INIT_SEGMENT,{frag:n,id:t,tracks:e})}const i=g.initPTS,s=g.timescale,l=this.initPTS[o.cc];if(n(i)&&(!l||l.baseTime!==i||l.timescale!==s)){const e=g.trackId;this.initPTS[o.cc]={baseTime:i,timescale:s,trackId:e},r.trigger(u.INIT_PTS_FOUND,{frag:o,id:t,initPTS:i,timescale:s,trackId:e})}}if(c&&p){m&&"audiovideo"===c.type&&this.logMuxedErr(o);const e=p.fragments[o.sn-1-p.startSN],t=o.sn===p.startSN,n=!e||o.cc>e.cc;if(!1!==i.independent){const{startPTS:e,endPTS:r,startDTS:i,endDTS:s}=c;if(l)l.elementaryStreams[c.type]={startPTS:e,endPTS:r,startDTS:i,endDTS:s};else if(c.firstKeyFrame&&c.independent&&1===a.id&&!n&&(this.couldBacktrack=!0),c.dropped&&c.independent){const i=this.getMainFwdBufferInfo(),a=(i?i.end:this.getLoadPosition())+this.config.maxBufferHole,l=c.firstKeyFramePTS?c.firstKeyFramePTS:e;if(!t&&a<l-this.config.maxBufferHole&&!n)return void this.backtrack(o);n&&(o.gap=!0),o.setElementaryStreamInfo(c.type,o.start,r,o.start,s,!0)}else t&&e-(p.appliedTimelineOffset||0)>2&&(o.gap=!0);o.setElementaryStreamInfo(c.type,e,r,i,s),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,a,t||n)}else{if(!t&&!n)return void this.backtrack(o);o.gap=!0}}if(m){const{startPTS:e,endPTS:t,startDTS:n,endDTS:r}=m;l&&(l.elementaryStreams[V]={startPTS:e,endPTS:t,startDTS:n,endDTS:r}),o.setElementaryStreamInfo(V,e,t,n,r),this.bufferFragmentData(m,o,l,a)}if(p&&null!=f&&f.samples.length){const e={id:t,frag:o,details:p,samples:f.samples};r.trigger(u.FRAG_PARSING_METADATA,e)}if(p&&h){const e={id:t,frag:o,details:p,samples:h.samples};r.trigger(u.FRAG_PARSING_USERDATA,e)}}}logMuxedErr(e){this.warn(`${W(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,n,r){if(this.state!==Cr)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(n));const{audio:i,video:a,audiovideo:s}=t;if(i){const n=e.audioCodec;let r=Oe(i.codec,n);"mp4a"===r&&(r="mp4a.40.5");const a=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){r&&(r=-1!==r.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5");const e=i.metadata;e&&"channelCount"in e&&1!==(e.channelCount||1)&&-1===a.indexOf("firefox")&&(r="mp4a.40.5")}r&&-1!==r.indexOf("mp4a.40.5")&&-1!==a.indexOf("android")&&"audio/mpeg"!==i.container&&(r="mp4a.40.2",this.log(`Android: force audio codec to ${r}`)),n&&n!==r&&this.log(`Swapping manifest audio codec "${n}" for "${r}"`),i.levelCodec=r,i.id=g,this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${r||""}/${n||""}/${i.codec}]`),delete t.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=g;const n=a.codec;if(4===(null==n?void 0:n.length))switch(n){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e"}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${n}]${a.codec!==n?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete t.audiovideo}s&&(this.log(`Init audiovideo buffer, container:${s.container}, codecs[level/parsed]=[${e.codecs}/${s.codec}]`),delete t.video,delete t.audio);const o=Object.keys(t);if(o.length){if(this.hls.trigger(u.BUFFER_CODECS,t),!this.hls)return;o.forEach(e=>{const i=t[e].initSegment;null!=i&&i.byteLength&&this.hls.trigger(u.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&2===this.altAudio?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,g)}get maxBufferLength(){const{levels:e,level:t}=this,n=null==e?void 0:e[t];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=Ir}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&!1===e.seeking){const n=e.currentTime;if(rn.isBuffered(e,n)?t=this.getAppendedFrag(n):rn.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const e=this.fragPlaying,n=t.level;e&&t.sn===e.sn&&e.level===n||(this.fragPlaying=t,this.hls.trigger(u.FRAG_CHANGED,{frag:t}),e&&e.level===n||this.hls.trigger(u.LEVEL_SWITCHED,{level:n}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;return n(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=(null==(e=this.media)?void 0:e.currentTime)||this.lastCurrentTime;if(n(t)){const e=this.getLevelDetails(),n=this.currentFrag||(e?gt(null,e.fragments,t):null);if(n){const e=n.programDateTime;if(null!==e){const r=e+1e3*(t-n.start);return new Date(r)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class cl extends w{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[n].loader;if(r){var t;if(e&&e!==(null==(t=r.context)?void 0:t.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=l.KEY_LOAD_ERROR,n,r,i){return new Zt({type:o.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:i,error:n,networkDetails:r})}loadClear(e,t,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let r=0,i=t.length;r<i;r++){const a=t[r];if(e.cc<=a.cc&&(!W(e)||!W(a)||e.sn<a.sn)||!n&&r==i-1)return this.emeController.selectKeySystemFormat(a).then(e=>{if(!this.emeController)return;a.setKeyFormat(e);const t=Dn(e);return t?this.emeController.getKeySystemAccess([t]):void 0})}if(this.config.requireKeySystemAccessOnStart){const e=Mn(this.config);if(e.length)return this.emeController.getKeySystemAccess(e)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,r;t&&e.setKeyFormat(t);const i=e.decryptdata;if(!i){const n=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,l.KEY_LOAD_ERROR,n))}const a=i.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,l.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const s=hl(i);let o=this.keyIdToKeyInfo[s];if(null!=(n=o)&&n.decryptdata.key)return i.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if(this.emeController&&null!=(r=o)&&r.keyLoadPromise){switch(this.emeController.getKeyStatus(o.decryptdata)){case"usable":case"usable-in-future":return o.keyLoadPromise.then(t=>{const{keyInfo:n}=t;return i.key=n.decryptdata.key,{frag:e,keyInfo:n}})}}switch(this.log(`${this.keyIdToKeyInfo[s]?"Rel":"L"}oading${i.keyId?" keyId: "+M(i.keyId):""} URI: ${i.uri} from ${e.type} ${e.level}`),o=this.keyIdToKeyInfo[s]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===i.keyFormat?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,l.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var r;if(!e.decryptdata.keyId&&null!=(r=t.initSegment)&&r.data){const n=function(e){const t=[];return pe(e,e=>t.push(e.subarray(8,24))),t}(t.initSegment.data);if(n.length){const t=n[0];t.some(e=>0!==e)&&(this.log(`Using keyId found in init segment ${M(t)}`),e.decryptdata.keyId=t,Un.setKeyIdForUri(e.decryptdata.uri,t))}}const i=this.emeController.loadKey(n);return(e.keyLoadPromise=i.then(t=>(e.mediaKeySessionContext=t,n))).catch(n=>{throw e.keyLoadPromise=null,"data"in n&&(n.data.frag=t),n})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,r=new(0,n.loader)(n);return t.keyLoader=e.loader=r,e.keyLoadPromise=new Promise((i,a)=>{const s={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},o=n.keyLoadPolicy.default,u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(e,t,n,r)=>{const{frag:s,keyInfo:o}=n,u=hl(o.decryptdata);if(!s.decryptdata||o!==this.keyIdToKeyInfo[u])return a(this.createKeyLoadError(s,l.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),r));o.decryptdata.key=s.decryptdata.key=new Uint8Array(e.data),s.keyLoader=null,o.loader=null,i({frag:s,keyInfo:o})},onError:(e,n,r,i)=>{this.resetLoader(n),a(this.createKeyLoadError(t,l.KEY_LOAD_ERROR,new Error(`HTTP Error ${e.code} loading key ${e.text}`),r,S({url:s.url,data:void 0},e)))},onTimeout:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,l.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),r))},onAbort:(e,n,r)=>{this.resetLoader(n),a(this.createKeyLoadError(t,l.INTERNAL_ABORTED,new Error("key loading aborted"),r))}};r.load(s,u,d)})}resetLoader(e){const{frag:t,keyInfo:n,url:r}=e,i=n.loader;t.keyLoader===i&&(t.keyLoader=null,n.loader=null);const a=hl(n.decryptdata)||r;delete this.keyIdToKeyInfo[a],i&&i.destroy()}}function hl(e){if(e.keyFormat!==Rn){const t=e.keyId;if(t)return M(t)}return e.uri}function fl(e){const{type:t}=e;switch(t){case h:return p;case f:return m;default:return g}}function gl(e,t){let n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}class pl{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(u.MANIFEST_LOADING,this.onManifestLoading,this),e.on(u.LEVEL_LOADING,this.onLevelLoading,this),e.on(u.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(u.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(u.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(u.MANIFEST_LOADING,this.onManifestLoading,this),e.off(u.LEVEL_LOADING,this.onLevelLoading,this),e.off(u.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(u.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(u.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return this.loaders[e.type]=i,i}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:d,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:n,level:r,pathwayId:i,url:a,deliveryDirectives:s,levelInfo:o}=t;this.load({id:n,level:r,pathwayId:i,responseType:"text",type:c,url:a,deliveryDirectives:s,levelOrTrack:o})}onAudioTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a,track:s}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:h,url:i,deliveryDirectives:a,levelOrTrack:s})}onSubtitleTrackLoading(e,t){const{id:n,groupId:r,url:i,deliveryDirectives:a,track:s}=t;this.load({id:n,groupId:r,level:null,responseType:"text",type:f,url:i,deliveryDirectives:a,levelOrTrack:s})}onLevelsUpdated(e,t){const n=this.loaders[c];if(n){const e=n.context;e&&!t.levels.some(t=>t===e.levelOrTrack)&&(n.abort(),delete this.loaders[c])}}load(e){var t;const r=this.hls.config;let i,a=this.getInternalLoader(e);if(a){const t=this.hls.logger,n=a.context;if(n&&n.levelOrTrack===e.levelOrTrack&&(n.url===e.url||n.deliveryDirectives&&!e.deliveryDirectives))return void(n.url===e.url?t.log(`[playlist-loader]: ignore ${e.url} ongoing request`):t.log(`[playlist-loader]: ignore ${e.url} in favor of ${n.url}`));t.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),a.abort()}if(i=e.type===d?r.manifestLoadPolicy.default:E({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),a=this.createInternalLoader(e),n(null==(t=e.deliveryDirectives)?void 0:t.part)){let t;if(e.type===c&&null!==e.level?t=this.hls.levels[e.level].details:e.type===h&&null!==e.id?t=this.hls.audioTracks[e.id].details:e.type===f&&null!==e.id&&(t=this.hls.subtitleTracks[e.id].details),t){const e=t.partTarget,n=t.targetduration;if(e&&n){const t=1e3*Math.max(3*e,.8*n);i=E({},i,{maxTimeToFirstByteMs:Math.min(t,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(t,i.maxTimeToFirstByteMs)})}}}const s=i.errorRetry||i.timeoutRetry||{},o={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(e,t,n,r)=>{const i=this.getInternalLoader(n);this.resetInternalLoader(n.type);const a=e.data;t.parsing.start=performance.now(),Vn.isMediaPlaylist(a)||n.type!==d?this.handleTrackOrLevelPlaylist(e,t,n,r||null,i):this.handleMasterPlaylist(e,t,n,r)},onError:(e,t,n,r)=>{this.handleNetworkError(t,n,!1,e,r)},onTimeout:(e,t,n)=>{this.handleNetworkError(t,n,!0,void 0,e)}};a.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,n,r){const i=this.hls,a=e.data,s=gl(e,n),o=Vn.parseMasterPlaylist(a,s);if(o.playlistParsingError)return t.parsing.end=performance.now(),void this.handleManifestParsingError(e,n,o.playlistParsingError,r,t);const{contentSteering:l,levels:d,sessionData:c,sessionKeys:h,startTimeOffset:f,variableList:g}=o;this.variableList=g,d.forEach(e=>{const{unknownCodecs:t}=e;if(t){const{preferManagedMediaSource:n}=this.hls.config;let{audioCodec:r,videoCodec:i}=e;for(let a=t.length;a--;){const s=t[a];Re(s,"audio",n)?(e.audioCodec=r=r?`${r},${s}`:s,ke.audio[r.substring(0,4)]=2,t.splice(a,1)):Re(s,"video",n)&&(e.videoCodec=i=i?`${i},${s}`:s,ke.video[i.substring(0,4)]=2,t.splice(a,1))}}});const{AUDIO:p=[],SUBTITLES:m,"CLOSED-CAPTIONS":y}=Vn.parseMasterPlaylistMedia(a,s,o);if(p.length){p.some(e=>!e.url)||!d[0].audioCodec||d[0].attrs.AUDIO||(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new hn({}),bitrate:0,url:""}))}i.trigger(u.MANIFEST_LOADED,{levels:d,audioTracks:p,subtitles:m,captions:y,contentSteering:l,url:s,stats:t,networkDetails:r,sessionData:c,sessionKeys:h,startTimeOffset:f,variableList:g})}handleTrackOrLevelPlaylist(e,t,r,i,a){const s=this.hls,{id:o,level:l,type:c}=r,h=gl(e,r),f=n(l)?l:n(o)?o:0,g=fl(r),p=Vn.parseLevelPlaylist(e.data,h,f,g,0,this.variableList);if(c===d){const e={attrs:new hn({}),bitrate:0,details:p,name:"",url:h};p.requestScheduled=t.loading.start+ur(p,0),s.trigger(u.MANIFEST_LOADED,{levels:[e],audioTracks:[],url:h,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=p,this.handlePlaylistLoaded(p,e,t,r,i,a)}handleManifestParsingError(e,t,n,r,i){this.hls.trigger(u.ERROR,{type:o.NETWORK_ERROR,details:l.MANIFEST_PARSING_ERROR,fatal:t.type===d,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:r,stats:i})}handleNetworkError(e,t,n=!1,r,i){let a=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===c?a+=`: ${e.level} id: ${e.id}`:e.type!==h&&e.type!==f||(a+=` id: ${e.id} group-id: "${e.groupId}"`);const s=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let g=l.UNKNOWN,p=!1;const m=this.getInternalLoader(e);switch(e.type){case d:g=n?l.MANIFEST_LOAD_TIMEOUT:l.MANIFEST_LOAD_ERROR,p=!0;break;case c:g=n?l.LEVEL_LOAD_TIMEOUT:l.LEVEL_LOAD_ERROR,p=!1;break;case h:g=n?l.AUDIO_TRACK_LOAD_TIMEOUT:l.AUDIO_TRACK_LOAD_ERROR,p=!1;break;case f:g=n?l.SUBTITLE_TRACK_LOAD_TIMEOUT:l.SUBTITLE_LOAD_ERROR,p=!1}m&&this.resetInternalLoader(e.type);const y={type:o.NETWORK_ERROR,details:g,fatal:p,url:e.url,loader:m,context:e,error:s,networkDetails:t,stats:i};if(r){const n=(null==t?void 0:t.url)||e.url;y.response=S({url:n,data:void 0},r)}this.hls.trigger(u.ERROR,y)}handlePlaylistLoaded(e,t,n,r,i,a){const s=this.hls,{type:p,level:m,levelOrTrack:y,id:v,groupId:b,deliveryDirectives:E}=r,T=gl(t,r),S=fl(r);let w="number"==typeof r.level&&S===g?m:void 0;const A=e.playlistParsingError;if(A){if(this.hls.logger.warn(`${A} ${e.url}`),!s.config.ignorePlaylistParsingErrors)return void s.trigger(u.ERROR,{type:o.NETWORK_ERROR,details:l.LEVEL_PARSING_ERROR,fatal:!1,url:T,error:A,reason:A.message,response:t,context:r,level:w,parent:S,networkDetails:i,stats:n});e.playlistParsingError=null}if(!e.fragments.length){const a=e.playlistParsingError=new Error("No Segments found in Playlist");return void s.trigger(u.ERROR,{type:o.NETWORK_ERROR,details:l.LEVEL_EMPTY_ERROR,fatal:!1,url:T,error:a,reason:a.message,response:t,context:r,level:w,parent:S,networkDetails:i,stats:n})}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(e.ageHeader)||(e.ageHeader=0)),p){case d:case c:if(w)if(y){if(y!==s.levels[w]){const e=s.levels.indexOf(y);e>-1&&(w=e)}}else w=0;s.trigger(u.LEVEL_LOADED,{details:e,levelInfo:y||s.levels[0],level:w||0,id:v||0,stats:n,networkDetails:i,deliveryDirectives:E,withoutMultiVariant:p===d});break;case h:s.trigger(u.AUDIO_TRACK_LOADED,{details:e,track:y,id:v||0,groupId:b||"",stats:n,networkDetails:i,deliveryDirectives:E});break;case f:s.trigger(u.SUBTITLE_TRACK_LOADED,{details:e,track:y,id:v||0,groupId:b||"",stats:n,networkDetails:i,deliveryDirectives:E})}}}class ml{static get version(){return qr}static isMSESupported(){return ul()}static isSupported(){return function(){if(!ul())return!1;const e=C();return"function"==typeof(null==e?void 0:e.isTypeSupported)&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>e.isTypeSupported(Ce(t,"video")))||["mp4a.40.2","fLaC"].some(t=>e.isTypeSupported(Ce(t,"audio"))))}()}static getMediaSource(){return C()}static get Events(){return u}static get MetadataSchema(){return ci}static get ErrorTypes(){return o}static get ErrorDetails(){return l}static get DefaultConfig(){return ml.defaultConfig?ml.defaultConfig:Yo}static set DefaultConfig(e){ml.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new jr,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=function(e,t,n){const r=k();if("object"==typeof console&&!0===e||"object"==typeof e){const a=["debug","log","info","warn","error"];a.forEach(t=>{r[t]=_(t,e,n)});try{r.log(`Debug logs enabled for "${t}" in hls.js version 1.6.13`)}catch(i){return k()}a.forEach(t=>{R[t]=_(t,e)})}else E(R,r);return r}(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=function(e,t,n){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=Wo(e),i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(e=>{const a=`${"level"===e?"playlist":e}LoadPolicy`,s=void 0===t[a],o=[];i.forEach(n=>{const i=`${e}Loading${n}`,l=t[i];if(void 0!==l&&s){o.push(i);const e=r[a].default;switch(t[a]={default:e},n){case"TimeOut":e.maxLoadTimeMs=l,e.maxTimeToFirstByteMs=l;break;case"MaxRetry":e.errorRetry.maxNumRetry=l,e.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":e.errorRetry.retryDelayMs=l,e.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":e.errorRetry.maxRetryDelayMs=l,e.timeoutRetry.maxRetryDelayMs=l}}}),o.length&&n.warn(`hls.js config: "${o.join('", "')}" setting(s) are deprecated, use "${a}": ${it(t[a])}`)}),S(S({},r),t)}(ml.DefaultConfig,e,t);this.userConfig=e,n.progressive&&Xo(n,t);const{abrController:r,bufferController:i,capLevelController:a,errorController:s,fpsController:o}=n,l=new s(this),d=this.abrController=new r(this),c=new zt(this),h=n.interstitialsController,f=h?this.interstitialsController=new h(this,ml):null,g=this.bufferController=new i(this,c),p=this.capLevelController=new a(this),m=new o(this),y=new pl(this),v=n.contentSteeringController,b=v?new v(this):null,T=this.levelController=new sl(this,b),w=new il(this),A=new cl(this.config,this.logger),I=this.streamController=new dl(this,c,A),x=this.gapController=new Qo(this,c);p.setStreamController(I),m.setStreamController(I);const C=[y,T,I];f&&C.splice(1,0,f),b&&C.splice(1,0,b),this.networkControllers=C;const D=[d,g,x,p,m,w,c];this.audioTrackController=this.createController(n.audioTrackController,C);const L=n.audioStreamController;L&&C.push(this.audioStreamController=new L(this,c,A)),this.subtitleTrackController=this.createController(n.subtitleTrackController,C);const M=n.subtitleStreamController;M&&C.push(this.subtititleStreamController=new M(this,c,A)),this.createController(n.timelineController,D),A.emeController=this.emeController=this.createController(n.emeController,D),this.cmcdController=this.createController(n.cmcdController,D),this.latencyController=this.createController(al,D),this.coreComponents=D,C.push(l);const N=l.onErrorOut;"function"==typeof N&&this.on(u.ERROR,N,l),this.on(u.MANIFEST_LOADED,y.onManifestLoaded,y)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,r){this._emitter.off(e,t,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const t=e===u.ERROR;this.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.INTERNAL_EXCEPTION,fatal:t,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(u.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(e=>e.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(e=>e.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const t=new Error(`attachMedia failed: invalid argument (${e})`);return void this.trigger(u.ERROR,{type:o.OTHER_ERROR,details:l.ATTACH_MEDIA_ERROR,fatal:!0,error:t})}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,n=t?e.media:e,r=t?e:{media:n};this._media=n,this.trigger(u.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(u.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(u.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,n=this._url,r=this._url=G.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),t&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(u.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,t),this.started&&this.networkControllers);n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!this.started&&this.networkControllers);e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[g]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[p]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[m]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=null==e?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=function(){try{return crypto.randomUUID()}catch(e){try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch(t){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}}}()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return-1===e&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){(function(e){return Ye.indexOf(e)>-1})(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let r;if(r=-1===t&&null!=e&&e.length?e.length-1:t,n)for(let i=r;i--;){const t=e[i].attrs["HDCP-LEVEL"];if(t&&t<=n)return i}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return(null==(t=this.audioTrackController)?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return(null==(t=this.subtitleTrackController)?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return!!e&&e.subtitleDisplay}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!(null==(e=this.bufferController)||!e.bufferedToEnd)}get interstitialsManager(){var e;return(null==(e=this.interstitialsController)?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){return Ve(e,st(t),navigator.mediaCapabilities)}}ml.defaultConfig=void 0;
/*! For license information please see dash.all.min.js.LICENSE.txt */
var yl={7267:function(e,t){t.byteLength=function(e){var t=o(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a,s=o(e),l=s[0],u=s[1],d=new i(3*(l+(a=u))/4-a),c=0,h=u>0?l-4:l;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],d[c++]=t>>16&255,d[c++]=t>>8&255,d[c++]=255&t;return 2===u&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,d[c++]=255&t),1===u&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,d[c++]=t>>8&255,d[c++]=255&t),d},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],s=16383,o=0,u=r-i;o<u;o+=s)a.push(l(e,o,o+s>u?u:o+s));return 1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,a,s=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},44:function(e,t,n){var r=n(7267),i=n(7986),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;var s=2147483647;function o(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|p(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){var t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return f(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return f(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);var i=function(e){if(l.isBuffer(e)){var t=0|g(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||q(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return d(e),o(e<0?0:0|g(e))}function h(e){for(var t=e.length<0?0:0|g(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function g(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(i)return r?-1:U(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){var a,s=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,l/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var d=-1;for(a=n;a<o;a++)if(u(e,a)===u(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===l)return d*s}else-1!==d&&(a-=a-d),d=-1}else for(n+l>o&&(n=o-l),a=n;a>=0;a--){for(var c=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){c=!1;break}if(c)return a}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(q(o))return s;e[n+s]=o}return s}function T(e,t,n,r){return B(U(t,e.length-n),e,n,r)}function S(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function w(e,t,n,r){return B(z(t),e,n,r)}function A(e,t,n,r){return B(function(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,o,l,u=e[i],d=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c<=n)switch(c){case 1:u<128&&(d=u);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(d=l);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(l=(15&u)<<12|(63&a)<<6|63&s)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(l=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&l<1114112&&(d=l)}null===d?(d=65533,c=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}(r)}t.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||console.error,Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return i=t,a=n,d(r=e),r<=0?o(r):void 0!==i?"string"==typeof a?o(r).fill(i,a):o(r).fill(i):o(r);var r,i,a},l.allocUnsafe=function(e){return c(e)},l.allocUnsafeSlow=function(e){return c(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(j(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(j(a,Uint8Array))i+a.length>r.length?l.from(a).copy(r,i):Uint8Array.prototype.set.call(r,a,i);else{if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(j(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(r,i),d=e.slice(t,n),c=0;c<o;++c)if(u[c]!==d[c]){a=u[c],s=d[c];break}return a<s?-1:s<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=G[e[a]];return i}function D(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length-1;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,a){return t=+t,n>>>=0,a||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function O(e,t,n,r,a){return t=+t,n>>>=0,a||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=l.isBuffer(e)?e:l.from(e,r),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var F=/[^+/0-9A-Za-z-_]/g;function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var G=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()},6877:function(e,t){var n={parseBuffer:function(e){return new r(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(i.prototype._boxProcessors[e]=t)},createFile:function(){return new r},createBox:function(e,t,n){var r=i.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,r){var i=n.createBox(e,t,r);return i.version=0,i.flags=0,i},Utils:{}};n.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},n.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},n.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=n.parseBuffer,t.addBoxProcessor=n.addBoxProcessor,t.createFile=n.createFile,t.createBox=n.createBox,t.createFullBox=n.createFullBox,t.Utils=n.Utils,n.Cursor=function(e){this.offset=void 0===e?0:e};var r=function(e){this._cursor=new n.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};r.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},r.prototype.fetchAll=function(e,t){var n=[];return r._sweep.call(this,e,n,t),n},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=i.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},r._sweep=function(e,t,n){for(var i in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;r._sweep.call(this.boxes[i],e,t,n)}},r.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},r.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)};var i=function(){this._cursor=new n.Cursor};i.parse=function(e){var t=new i;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},i.create=function(e){var t=new i;return t.type=e,t.boxes=[],t},i.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],i.prototype._boxProcessors={},i.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},i.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},i.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},i.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},i.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},i.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},i.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(i.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},i.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},i.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},i.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},i.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},i.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},i.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},i.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},i.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?n.Utils.dataViewToString(t):t},i.prototype._readUTF8TerminatedString=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;if(e>0){var r;for(t=new DataView(this._raw.buffer,this._cursor.offset,e),r=0;r<e&&0!==t.getUint8(r);r++);t=new DataView(this._raw.buffer,this._cursor.offset,r),this._cursor.offset+=Math.min(r+1,e)}return t?n.Utils.dataViewToString(t):t},i.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},i.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},i.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(i.parse(this))},i.prototype.append=function(e,t){n.Utils.appendBox(this,e,t)},i.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},i.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},i.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},i.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},i.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},i.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},i.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},i.prototype._writeUTF8String=function(e){var t=n.Utils.utf8ToByteArray(e);if(this._rawo)for(var r=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)r.setUint8(i,t[i]);else this.size+=t.length},i.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},i.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},i.prototype._boxProcessors.avc1=i.prototype._boxProcessors.avc2=i.prototype._boxProcessors.avc3=i.prototype._boxProcessors.avc4=i.prototype._boxProcessors.hvc1=i.prototype._boxProcessors.hev1=i.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},i.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},i.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},i.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},i.prototype._boxProcessors.free=i.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},i.prototype._boxProcessors.ftyp=i.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},i.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},i.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},i.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},i.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},i.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},i.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},i.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},i.prototype._boxProcessors.meta=function(){this._procFullBox()},i.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},i.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},i.prototype._boxProcessors.mp4a=i.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},i.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},i.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},i.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",1==this.version?64:32)},i.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(e){this._procEntryField(e,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},i.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},i.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},i.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},i.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},i.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},i.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},i.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},i.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},i.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_count","uint",32),this._procEntryField(e,"sample_delta","uint",32)})},i.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},i.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},i.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},i.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},i.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},i.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},i.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},i.prototype._boxProcessors["url "]=i.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},i.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},i.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},i.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},i.prototype._boxProcessors.vtte=function(){}},9826:function(e){var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}var s,o;p(e,t,a,{once:!0}),"error"!==t&&(o=i,"function"==typeof(s=e).on&&p(s,"error",o,{once:!0}))})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,a,s;if(o(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,console&&console.warn}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function p(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(a){r.once&&e.removeEventListener(t,i),n(a)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var u=l.length,d=g(l,u);for(n=0;n<u;++n)r(d[n],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return o(t),this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,c(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,s;if(o(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7316:function(e){e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var s=a[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},7986:function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,l=(1<<o)-1,u=l>>1,d=-7,c=n?i-1:0,h=n?-1:1,f=e[t+c];for(c+=h,a=f&(1<<-d)-1,f>>=-d,d+=o;d>0;a=256*a+e[t+c],c+=h,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=r;d>0;s=256*s+e[t+c],c+=h,d-=8);if(0===a)a=1-u;else{if(a===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),a-=u}return(f?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,l,u=8*a-i-1,d=(1<<u)-1,c=d>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,g=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+c>=1?h/l:h*Math.pow(2,1-c))*l>=2&&(s++,l/=2),s+c>=d?(o=0,s=d):s+c>=1?(o=(t*l-1)*Math.pow(2,i),s+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&o,f+=g,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;e[n+f]=255&s,f+=g,s/=256,u-=8);e[n+f-g]|=128*p}},5474:function(e,t,n){!function(e){e.parser=function(e,t){return new i(e,t)},e.SAXParser=i,e.SAXStream=s,e.createStream=function(e,t){return new s(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(t,n){if(!(this instanceof i))return new i(t,n);var a=this;!function(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}(a),a.q=a.c="",a.bufferCheckPosition=e.MAX_BUFFER_LENGTH,a.opt=n||{},a.opt.lowercase=a.opt.lowercase||a.opt.lowercasetags,a.looseCase=a.opt.lowercase?"toLowerCase":"toUpperCase",a.tags=[],a.closed=a.closedRoot=a.sawRoot=!1,a.tag=a.error=null,a.strict=!!t,a.noscript=!(!t&&!a.opt.noscript),a.state=_.BEGIN,a.strictEntities=a.opt.strictEntities,a.ENTITIES=a.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),a.attribList=[],a.opt.xmlns&&(a.ns=Object.create(m)),a.trackPosition=!1!==a.opt.position,a.trackPosition&&(a.position=a.line=a.column=0),x(a,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){N(this)},write:function(t){var n=this;if(this.error)throw this.error;if(n.closed)return M(n,"Cannot write after close. Assign an onready handler.");if(null===t)return N(n);"object"==typeof t&&(t=t.toString());for(var i=0,a="";a=G(t,i++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case _.BEGIN:if(n.state=_.BEGIN_WHITESPACE,"\ufeff"===a)continue;q(n,a);continue;case _.BEGIN_WHITESPACE:q(n,a);continue;case _.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=i-1;a&&"<"!==a&&"&"!==a;)(a=G(t,i++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=t.substring(s,i-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(!w(o,a)||n.sawRoot&&!n.closedRoot||P(n,"Text data outside of root node."),"&"===a?n.state=_.TEXT_ENTITY:n.textNode+=a):(n.state=_.OPEN_WAKA,n.startTagPosition=n.position);continue;case _.SCRIPT:"<"===a?n.state=_.SCRIPT_ENDING:n.script+=a;continue;case _.SCRIPT_ENDING:"/"===a?n.state=_.CLOSE_TAG:(n.script+="<"+a,n.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===a)n.state=_.SGML_DECL,n.sgmlDecl="";else if(S(o,a));else if(S(y,a))n.state=_.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=_.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=_.PROC_INST,n.procInstName=n.procInstBody="";else{if(P(n,"Unencoded <"),n.startTagPosition+1<n.position){var l=n.position-n.startTagPosition;a=new Array(l).join(" ")+a}n.textNode+="<"+a,n.state=_.TEXT}continue;case _.SGML_DECL:(n.sgmlDecl+a).toUpperCase()===h?(C(n,"onopencdata"),n.state=_.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=_.COMMENT,n.comment="",n.sgmlDecl=""):(n.sgmlDecl+a).toUpperCase()===f?(n.state=_.DOCTYPE,(n.doctype||n.sawRoot)&&P(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(C(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=_.TEXT):S(d,a)?(n.state=_.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case _.SGML_DECL_QUOTED:a===n.q&&(n.state=_.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case _.DOCTYPE:">"===a?(n.state=_.TEXT,C(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=_.DOCTYPE_DTD:S(d,a)&&(n.state=_.DOCTYPE_QUOTED,n.q=a));continue;case _.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=_.DOCTYPE:S(d,a)&&(n.state=_.DOCTYPE_DTD_QUOTED,n.q=a);continue;case _.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=_.DOCTYPE_DTD,n.q="");continue;case _.COMMENT:"-"===a?n.state=_.COMMENT_ENDING:n.comment+=a;continue;case _.COMMENT_ENDING:"-"===a?(n.state=_.COMMENT_ENDED,n.comment=L(n.opt,n.comment),n.comment&&C(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==a?(P(n,"Malformed comment"),n.comment+="--"+a,n.state=_.COMMENT):n.state=_.TEXT;continue;case _.CDATA:"]"===a?n.state=_.CDATA_ENDING:n.cdata+=a;continue;case _.CDATA_ENDING:"]"===a?n.state=_.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===a?(n.cdata&&C(n,"oncdata",n.cdata),C(n,"onclosecdata"),n.cdata="",n.state=_.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=_.CDATA);continue;case _.PROC_INST:"?"===a?n.state=_.PROC_INST_ENDING:S(o,a)?n.state=_.PROC_INST_BODY:n.procInstName+=a;continue;case _.PROC_INST_BODY:if(!n.procInstBody&&S(o,a))continue;"?"===a?n.state=_.PROC_INST_ENDING:n.procInstBody+=a;continue;case _.PROC_INST_ENDING:">"===a?(C(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=_.TEXT):(n.procInstBody+="?"+a,n.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:S(v,a)?n.tagName+=a:(O(n),">"===a?z(n):"/"===a?n.state=_.OPEN_TAG_SLASH:(w(o,a)&&P(n,"Invalid character in tag name"),n.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===a?(z(n,!0),B(n)):(P(n,"Forward-slash in opening tag not followed by >"),n.state=_.ATTRIB);continue;case _.ATTRIB:if(S(o,a))continue;">"===a?z(n):"/"===a?n.state=_.OPEN_TAG_SLASH:S(y,a)?(n.attribName=a,n.attribValue="",n.state=_.ATTRIB_NAME):P(n,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===a?n.state=_.ATTRIB_VALUE:">"===a?(P(n,"Attribute without value"),n.attribValue=n.attribName,U(n),z(n)):S(o,a)?n.state=_.ATTRIB_NAME_SAW_WHITE:S(v,a)?n.attribName+=a:P(n,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=_.ATTRIB_VALUE;else{if(S(o,a))continue;P(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",C(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?z(n):S(y,a)?(n.attribName=a,n.state=_.ATTRIB_NAME):(P(n,"Invalid attribute name"),n.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(S(o,a))continue;S(d,a)?(n.q=a,n.state=_.ATTRIB_VALUE_QUOTED):(P(n,"Unquoted attribute value"),n.state=_.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case _.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=_.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}U(n),n.q="",n.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:S(o,a)?n.state=_.ATTRIB:">"===a?z(n):"/"===a?n.state=_.OPEN_TAG_SLASH:S(y,a)?(P(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=_.ATTRIB_NAME):P(n,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(w(c,a)){"&"===a?n.state=_.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}U(n),">"===a?z(n):n.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(n.tagName)">"===a?B(n):S(v,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=_.SCRIPT):(w(o,a)&&P(n,"Invalid tagname in closing tag"),n.state=_.CLOSE_TAG_SAW_WHITE);else{if(S(o,a))continue;w(y,a)?n.script?(n.script+="</"+a,n.state=_.SCRIPT):P(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case _.CLOSE_TAG_SAW_WHITE:if(S(o,a))continue;">"===a?B(n):P(n,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var u,g;switch(n.state){case _.TEXT_ENTITY:u=_.TEXT,g="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:u=_.ATTRIB_VALUE_QUOTED,g="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:u=_.ATTRIB_VALUE_UNQUOTED,g="attribValue"}";"===a?(n[g]+=j(n),n.entity="",n.state=u):S(n.entity.length?E:b,a)?n.entity+=a:(P(n,"Invalid character in entity name"),n[g]+="&"+n.entity+a,n.entity="",n.state=u);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(t){for(var n=Math.max(e.MAX_BUFFER_LENGTH,10),i=0,a=0,s=r.length;a<s;a++){var o=t[r[a]].length;if(o>n)switch(r[a]){case"textNode":D(t);break;case"cdata":C(t,"oncdata",t.cdata),t.cdata="";break;case"script":C(t,"onscript",t.script),t.script="";break;default:M(t,"Max buffer length exceeded: "+r[a])}i=Math.max(i,o)}var l=e.MAX_BUFFER_LENGTH-i;t.bufferCheckPosition=l+t.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;D(e=this),""!==e.cdata&&(C(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(C(e,"onscript",e.script),e.script="")}};try{t=n(3515).Stream}catch(H){t=function(){}}var a=e.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function s(e,n){if(!(this instanceof s))return new s(e,n);t.apply(this),this._parser=new i(e,n),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(e){r.emit("error",e),r._parser.error=null},this._decoder=null,a.forEach(function(e){Object.defineProperty(r,"on"+e,{get:function(){return r._parser["on"+e]},set:function(t){if(!t)return r.removeAllListeners(e),r._parser["on"+e]=t,t;r.on(e,t)},enumerable:!0,configurable:!1})})}s.prototype=Object.create(t.prototype,{constructor:{value:s}}),s.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=n(748).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,n){var r=this;return r._parser["on"+e]||-1===a.indexOf(e)||(r._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),r.emit.apply(r,t)}),t.prototype.on.call(r,e,n)};var o="\r\n\t ",l="0124356789",u="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",c=o+">",h="[CDATA[",f="DOCTYPE",g="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",m={xml:g,xmlns:p};o=T(o),l=T(l),u=T(u);var y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,E=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function T(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function S(e,t){return n=e,"[object RegExp]"===Object.prototype.toString.call(n)?!!t.match(e):e[t];var n}function w(e,t){return!S(e,t)}d=T(d),c=T(c);var A,I,k,_=0;for(var R in e.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach(function(t){var n=e.ENTITIES[t],r="number"==typeof n?String.fromCharCode(n):n;e.ENTITIES[t]=r}),e.STATE)e.STATE[e.STATE[R]]=R;function x(e,t,n){e[t]&&e[t](n)}function C(e,t,n){e.textNode&&D(e),x(e,t,n)}function D(e){e.textNode=L(e.opt,e.textNode),e.textNode&&x(e,"ontext",e.textNode),e.textNode=""}function L(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function M(e,t){return D(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,x(e,"onerror",t),e}function N(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==_.BEGIN&&e.state!==_.BEGIN_WHITESPACE&&e.state!==_.TEXT&&M(e,"Unexpected end"),D(e),e.c="",e.closed=!0,x(e,"onend"),i.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&M(e,t)}function O(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,C(e,"onopentagstart",n)}function F(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function U(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=F(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==g)P(e,"xml: prefix must be bound to "+g+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==p)P(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,C(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function z(e,t){if(e.opt.xmlns){var n=e.tag,r=F(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(t){C(e,"onopennamespace",{prefix:t,uri:n.ns[t]})});for(var a=0,s=e.attribList.length;a<s;a++){var o=e.attribList[a],l=o[0],u=o[1],d=F(l,!0),c=d.prefix,h=d.local,f=""===c?"":n.ns[c]||"",g={name:l,value:u,prefix:c,local:h,uri:f};c&&"xmlns"!==c&&!f&&(P(e,"Unbound namespace prefix: "+JSON.stringify(c)),g.uri=c),e.tag.attributes[l]=g,C(e,"onattribute",g)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),C(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=_.TEXT:e.state=_.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function B(e){if(!e.tagName)return P(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=_.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=_.SCRIPT);C(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)P(e,"Unexpected close tag");if(t<0)return P(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=_.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,C(e,"onclosetag",e.tagName);var s={};for(var o in a.ns)s[o]=a.ns[o];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==l.ns&&Object.keys(a.ns).forEach(function(t){var n=a.ns[t];C(e,"onclosenamespace",{prefix:t,uri:n})})}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=_.TEXT}function j(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(P(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function q(e,t){"<"===t?(e.state=_.OPEN_WAKA,e.startTagPosition=e.position):w(o,t)&&(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=_.TEXT)}function G(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}_=e.STATE,String.fromCodePoint||(A=String.fromCharCode,I=Math.floor,k=function(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var a="";++r<i;){var s=Number(arguments[r]);if(!isFinite(s)||s<0||s>1114111||I(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?n.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,n.push(e,t)),(r+1===i||n.length>16384)&&(a+=A.apply(null,n),n.length=0)}return a},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:k,configurable:!0,writable:!0}):String.fromCodePoint=k)}(t)},6739:function(e,t,n){!function(e,t,n,r,i){function a(e){if("contents"in e)for(var t=("styleAttrs"in e?e.styleAttrs[r.byName.ruby.qname]:null),n="span"===e.kind&&("container"===t||"textContainer"===t||"baseContainer"===t),i=e.contents.length-1;i>=0;i--)!n||"styleAttrs"in e.contents[i]&&r.byName.ruby.qname in e.contents[i].styleAttrs?a(e.contents[i]):delete e.contents[i]}function s(e,t,n,r){var i=r&&"seq"===r.timeContainer,a=0;r&&(a=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+a:a;var o=t.begin,l=null;if("sets"in t)for(var u=0;u<t.sets.length;u++)s(e,t.sets[u],l,t),o="seq"===t.timeContainer?t.sets[u].end:Math.max(o,t.sets[u].end),l=t.sets[u];if("contents"in t){if("contents"in t)for(var d=0;d<t.contents.length;d++)s(e,t.contents[d],l,t),o="seq"===t.timeContainer?t.contents[d].end:Math.max(o,t.contents[d].end),l=t.contents[d]}else o=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,a+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=a+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function o(e){this.node=e}function l(){this.events=[],this.head=new u,this.body=null}function u(){this.styling=new d,this.layout=new f}function d(){this.styles={},this.initials={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function h(){this.styleAttrs=null}function f(){this.regions={}}function g(e,t){p.call(this,"image"),this.src=e,this.type=t}function p(e){this.kind=e}function m(e){this.id=e}function y(e){this.regionID=e}function v(e){this.styleAttrs=e}function b(e){this.sets=e}function E(e){this.contents=e}function T(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function S(){p.call(this,"body")}function w(){p.call(this,"div")}function A(){p.call(this,"p")}function I(){p.call(this,"span")}function k(){p.call(this,"span")}function _(){p.call(this,"br")}function R(){}function x(){}function C(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function D(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function L(e,t){var n={};if(null!==e)for(var i in e.attributes){var a=e.attributes[i].uri+" "+e.attributes[i].local,s=r.byQName[a];if(void 0!==s){var o=s.parse(e.attributes[i].value);null!==o?(n[a]=o,s===r.byName.zIndex&&U(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):z(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value)}}return n}function M(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function N(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function P(e,t,n){for(;t.styleRefs.length>0;){var r=t.styleRefs.pop();r in e.styles?(P(e,e.styles[r],n),F(e.styles[r].styleAttrs,t.styleAttrs)):z(n,"Non-existant style id referenced")}}function O(e,t,n,r){for(var i=t.length-1;i>=0;i--){var a=t[i];a in e.styles?F(e.styles[a].styleAttrs,n):z(r,"Non-existant style id referenced")}}function F(e,t){for(var n in e)e.hasOwnProperty(n)&&(n in t||(t[n]=e[n]))}function U(e,t){if(e&&e.warn&&e.warn(t))throw t}function z(e,t){if(e&&e.error&&e.error(t))throw t}function B(e,t){throw e&&e.fatal&&e.fatal(t),t}function j(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(a>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,i,p){var m=t.parser(!0,{xmlns:!0}),y=[],v=[],b=[],E=0,T=null;m.onclosetag=function(e){if(y[0]instanceof R)null!==T.head&&null!==T.head.styling&&O(T.head.styling,y[0].styleRefs,y[0].styleAttrs,i),delete y[0].styleRefs;else if(y[0]instanceof d)for(var t in y[0].styles)y[0].styles.hasOwnProperty(t)&&P(y[0],y[0].styles[t],i);else if(y[0]instanceof A||y[0]instanceof I){if(y[0].contents.length>1){var r,a=[y[0].contents[0]];for(r=1;r<y[0].contents.length;r++)y[0].contents[r]instanceof k&&a[a.length-1]instanceof k?a[a.length-1].text+=y[0].contents[r].text:a.push(y[0].contents[r]);y[0].contents=a}y[0]instanceof I&&1===y[0].contents.length&&y[0].contents[0]instanceof k&&(y[0].text=y[0].contents[0].text,delete y[0].contents)}else y[0]instanceof o&&(y[0].node.uri===n.ns_tt&&"metadata"===y[0].node.local?E--:E>0&&p&&"onCloseTag"in p&&p.onCloseTag());b.shift(),v.shift(),y.shift()},m.ontext=function(e){if(void 0===y[0]);else if(y[0]instanceof I||y[0]instanceof A){if(y[0]instanceof I){var t=y[0].styleAttrs[r.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}var n=new k;n.initFromText(T,y[0],e,v[0],b[0],i),y[0].contents.push(n)}else y[0]instanceof o&&E>0&&p&&"onText"in p&&p.onText(e)},m.onopentag=function(e){var t=e.attributes["xml:space"];t?b.unshift(t.value):0===b.length?b.unshift("default"):b.unshift(b[0]);var a=e.attributes["xml:lang"];if(a?v.unshift(a.value):0===v.length?v.unshift(""):v.unshift(v[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==T&&B(i,"Two <tt> elements at ("+this.line+","+this.column+")"),(T=new l).initFromNode(e,v[0],i),y.unshift(T);else if("head"===e.local)y[0]instanceof l||B(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),y.unshift(T.head);else if("styling"===e.local)y[0]instanceof u||B(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),y.unshift(T.head.styling);else if("style"===e.local){var s;y[0]instanceof d?((s=new c).initFromNode(e,i),s.id?T.head.styling.styles[s.id]=s:z(i,"<style> element missing @id attribute"),y.unshift(s)):y[0]instanceof R?((s=new c).initFromNode(e,i),F(s.styleAttrs,y[0].styleAttrs),y.unshift(s)):B(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===e.local){var m;if(y[0]instanceof d){for(var k in(m=new h).initFromNode(e,i),m.styleAttrs)m.styleAttrs.hasOwnProperty(k)&&(T.head.styling.initials[k]=m.styleAttrs[k]);y.unshift(m)}else B(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===e.local)y[0]instanceof u||B(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),y.unshift(T.head.layout);else if("region"===e.local){y[0]instanceof f||B(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var C=new R;C.initFromNode(T,e,v[0],i),!C.id||C.id in T.head.layout.regions?z(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):T.head.layout.regions[C.id]=C,y.unshift(C)}else if("body"===e.local){y[0]instanceof l||B(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==T.body&&B(i,"Second <body> element at "+this.line+","+this.column+")");var D=new S;D.initFromNode(T,e,v[0],i),T.body=D,y.unshift(D)}else if("div"===e.local){y[0]instanceof w||y[0]instanceof S||B(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var L=new w;L.initFromNode(T,y[0],e,v[0],i);var M=L.styleAttrs[r.byName.backgroundImage.qname];M&&(L.contents.push(new g(M)),delete L.styleAttrs[r.byName.backgroundImage.qname]),y[0].contents.push(L),y.unshift(L)}else if("image"===e.local){y[0]instanceof w||B(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var N=new g;N.initFromNode(T,y[0],e,v[0],i),y[0].contents.push(N),y.unshift(N)}else if("p"===e.local){y[0]instanceof w||B(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var P=new A;P.initFromNode(T,y[0],e,v[0],i),y[0].contents.push(P),y.unshift(P)}else if("span"===e.local){y[0]instanceof I||y[0]instanceof A||B(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var O=new I;O.initFromNode(T,y[0],e,v[0],b[0],i),y[0].contents.push(O),y.unshift(O)}else if("br"===e.local){y[0]instanceof I||y[0]instanceof A||B(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var U=new _;U.initFromNode(T,y[0],e,v[0],i),y[0].contents.push(U),y.unshift(U)}else if("set"===e.local){y[0]instanceof I||y[0]instanceof A||y[0]instanceof w||y[0]instanceof S||y[0]instanceof R||y[0]instanceof _||B(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var j=new x;j.initFromNode(T,y[0],e,i),y[0].sets.push(j),y.unshift(j)}else y.unshift(new o(e));else y.unshift(new o(e));if(y[0]instanceof o)if(e.uri===n.ns_tt&&"metadata"===e.local)E++;else if(E>0&&p&&"onOpenTag"in p){var q=[];for(var G in e.attributes)q[e.attributes[G].uri+" "+e.attributes[G].local]={uri:e.attributes[G].uri,local:e.attributes[G].local,value:e.attributes[G].value};p.onOpenTag(e.uri,e.local,q)}},m.write(e).close(),delete T.head.styling.styles;var C=!1;for(var D in T.head.layout.regions)if(T.head.layout.regions.hasOwnProperty(D)){C=!0;break}if(!C){var L=R.prototype.createDefaultRegion(T.lang);T.head.layout.regions[L.id]=L}for(var M in T.head.layout.regions)T.head.layout.regions.hasOwnProperty(M)&&s(T,T.head.layout.regions[M],null,null);return T.body&&s(T,T.body,null,null),T.body&&a(T.body),T},l.prototype.initFromNode=function(e,t,r){var a=function(e,t){var r=M(e,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var s=/(\d+) (\d+)/.exec(r);null!==s?(a=parseInt(s[1]),i=parseInt(s[2])):U(t,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(e,r);this.cellLength={h:new i.ComputedLength(0,1/a.h),w:new i.ComputedLength(1/a.w,0)};var s=function(e,t){var r,i=M(e,n.ns_ttp,"frameRate"),a=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):U(t,"Malformed frame rate attribute (using initial value instead)"));var s=M(e,n.ns_ttp,"frameRateMultiplier"),o=1;null!==s&&(null!==(r=/(\d+) (\d+)/.exec(s))?o=parseInt(r[1])/parseInt(r[2]):U(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var l=o*a,u=1,d=M(e,n.ns_ttp,"tickRate");return null===d?null!==i&&(u=l):null!==(r=/(\d+)/.exec(d))?u=parseInt(r[1]):U(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:l,tickRate:u}}(e,r);this.effectiveFrameRate=s.effectiveFrameRate,this.tickRate=s.tickRate,this.aspectRatio=function(e,t){var r=M(e,n.ns_ittp,"aspectRatio");null===r&&(r=M(e,n.ns_ttp,"displayAspectRatio"));var i=null;if(null!==r){var a=/(\d+)\s+(\d+)/.exec(r);if(null!==a){var s=parseInt(a[1]),o=parseInt(a[2]);0!==s&&0!==o?i=s/o:z(t,"Illegal aspectRatio values (ignoring)")}else z(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,r);var o=M(e,n.ns_ttp,"timeBase");null!==o&&"media"!==o&&B(r,"Unsupported time base");var l=function(e,t){var r=M(e,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return U(t,"Malformed extent (ignoring)"),null;var s=i.parseLength(a[0]),o=i.parseLength(a[1]);return o&&s?{h:o,w:s}:(U(t,"Malformed extent values (ignoring)"),null)}(e,r);null===l?this.pxLength={h:null,w:null}:("px"===l.h.unit&&"px"===l.w.unit||B(r,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/l.h.value),w:new i.ComputedLength(1/l.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)},this.lang=t},l.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=j(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=j(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},l.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},l.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(e,t){this.id=C(e),this.styleAttrs=L(e,t),this.styleRefs=D(e)},h.prototype.initFromNode=function(e,t){for(var r in this.styleAttrs={},e.attributes)if(e.attributes[r].uri===n.ns_itts||e.attributes[r].uri===n.ns_ebutts||e.attributes[r].uri===n.ns_tts){var i=e.attributes[r].uri+" "+e.attributes[r].local;this.styleAttrs[i]=e.attributes[r].value}},g.prototype.initFromNode=function(e,t,n,r,i){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||z(i,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||z(i,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,e,t,n,i),T.prototype.initFromNode.call(this,e,t,n,i),b.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},m.prototype.initFromNode=function(e,t,n,r){this.id=C(n)},y.prototype.initFromNode=function(e,t,n,r){var i;this.regionID=(i=n)&&"region"in i.attributes?i.attributes.region.value:""},v.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=L(n,r),null!==e.head&&null!==e.head.styling&&O(e.head.styling,D(n),this.styleAttrs,r)},b.prototype.initFromNode=function(e,t,n,r){this.sets=[]},E.prototype.initFromNode=function(e,t,n,r){this.contents=[]},T.prototype.initFromNode=function(e,t,n,r){var i,a,s,o=function(e,t,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=N(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&U(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=N(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&U(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;return n&&"end"in n.attributes&&null===(s=N(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&U(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:s,explicit_dur:a}}(e,0,n,r);this.explicit_begin=o.explicit_begin,this.explicit_end=o.explicit_end,this.explicit_dur=o.explicit_dur,this.timeContainer=(a=r,(s=(i=n)&&"timeContainer"in i.attributes?i.attributes.timeContainer.value:null)&&"par"!==s?"seq"===s?"seq":(z(a,"Illegal value of timeContainer (assuming 'par')"),"par"):"par")},S.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,null,t,r),T.prototype.initFromNode.call(this,e,null,t,r),b.prototype.initFromNode.call(this,e,null,t,r),y.prototype.initFromNode.call(this,e,null,t,r),E.prototype.initFromNode.call(this,e,null,t,r),this.lang=n},w.prototype.initFromNode=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,n,i),T.prototype.initFromNode.call(this,e,t,n,i),b.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),E.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},A.prototype.initFromNode=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,n,i),T.prototype.initFromNode.call(this,e,t,n,i),b.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),E.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},I.prototype.initFromNode=function(e,t,n,r,i,a){v.prototype.initFromNode.call(this,e,t,n,a),T.prototype.initFromNode.call(this,e,t,n,a),b.prototype.initFromNode.call(this,e,t,n,a),y.prototype.initFromNode.call(this,e,t,n,a),E.prototype.initFromNode.call(this,e,t,n,a),this.space=i,this.lang=r},k.prototype.initFromText=function(e,t,n,r,i,a){T.prototype.initFromNode.call(this,e,t,null,a),this.text=n,this.space=i,this.lang=r},_.prototype.initFromNode=function(e,t,n,r,i){y.prototype.initFromNode.call(this,e,t,n,i),T.prototype.initFromNode.call(this,e,t,n,i),this.lang=r},R.prototype.createDefaultRegion=function(e){var t=new R;return m.call(t,""),v.call(t,{}),b.call(t,[]),T.call(t,0,Number.POSITIVE_INFINITY,null),this.lang=e,t},R.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,null,t,r),T.prototype.initFromNode.call(this,e,null,t,r),b.prototype.initFromNode.call(this,e,null,t,r),this.styleAttrs=L(t,r),this.styleRefs=D(t),this.lang=n},x.prototype.initFromNode=function(e,t,n,r){T.prototype.initFromNode.call(this,e,t,n,r);var i=L(n,r);for(var a in this.qname=null,this.value=null,i)if(i.hasOwnProperty(a)){if(this.qname){z(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(t,"undefined"==typeof sax?n(5474):sax,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},1612:function(e,t,n){var r=/firefox/i.test(navigator.userAgent);!function(e,t,n){function i(e,t,c,f){var g;if("region"===c.kind)(g=document.createElement("div")).style.position="absolute";else if("body"===c.kind)g=document.createElement("div");else if("div"===c.kind)g=document.createElement("div");else if("image"===c.kind){if(g=document.createElement("img"),null!==e.imgResolver&&null!==c.src){var y=e.imgResolver(c.src,g);y&&(g.src=y),g.height=e.regionH,g.width=e.regionW}}else if("p"===c.kind)g=document.createElement("p");else if("span"===c.kind)if("container"===c.styleAttrs[n.byName.ruby.qname])g=document.createElement("ruby"),e.ruby=!0;else if("base"===c.styleAttrs[n.byName.ruby.qname])g=document.createElement("span");else if("text"===c.styleAttrs[n.byName.ruby.qname])g=document.createElement("rt");else if("baseContainer"===c.styleAttrs[n.byName.ruby.qname])g=document.createElement("rbc");else if("textContainer"===c.styleAttrs[n.byName.ruby.qname])g=document.createElement("rtc");else{if("delimiter"===c.styleAttrs[n.byName.ruby.qname])return;g=document.createElement("span")}else"br"===c.kind&&(g=document.createElement("br"));if(g){if(c.lang&&("region"!==c.kind&&c.lang===f.lang||(g.lang=c.lang)),t.appendChild(g),g.style.margin="0","region"===c.kind){var E=c.styleAttrs[n.byName.writingMode.qname];"lrtb"===E||"lr"===E?(e.ipd="lr",e.bpd="tb"):"rltb"===E||"rl"===E?(e.ipd="rl",e.bpd="tb"):"tblr"===E?(e.ipd="tb",e.bpd="lr"):"tbrl"!==E&&"tb"!==E||(e.ipd="tb",e.bpd="rl")}else if("p"===c.kind&&"tb"===e.bpd){var T=c.styleAttrs[n.byName.direction.qname];e.ipd="ltr"===T?"lr":"rl"}for(var S=0;S<h.length;S++){var w=h[S],A=c.styleAttrs[w.qname];void 0!==A&&null!==w.map&&w.map(e,g,c,A)}var I=g,k=c.styleAttrs[n.byName.linePadding.qname];if(k&&!k.isZero()){var _=k.toUsedLength(e.w,e.h);if(_>0){var R=Math.ceil(_)+"px";"tb"===e.bpd?(I.style.paddingLeft=R,I.style.paddingRight=R):(I.style.paddingTop=R,I.style.paddingBottom=R),e.lp=k}}var x=c.styleAttrs[n.byName.multiRowAlign.qname];if(x&&"auto"!==x){var C=document.createElement("span");C.style.display="inline-block",C.style.textAlign=x,g.appendChild(C),I=C,e.mra=x}var D=c.styleAttrs[n.byName.rubyReserve.qname];if(D&&"none"!==D[0]&&(e.rubyReserve=D),c.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===c.kind&&c.text){var L=c.styleAttrs[n.byName.textEmphasis.qname];if(L&&"none"!==L.style&&(e.textEmphasis=!0),n.byName.textCombine.qname in c.styleAttrs&&"all"===c.styleAttrs[n.byName.textCombine.qname])g.textContent=c.text,g._isd_element=c,L&&d(e,g,0,L);else for(var M="",N=0;N<c.text.length;N++){M+=c.text.charAt(N);var P=c.text.charCodeAt(N);if(P<55296||P>56319||N===c.text.length-1){var O=document.createElement("span");O.textContent=M,L&&d(e,O,0,L),g.appendChild(O),M="",O._isd_element=c}}}if("contents"in c)for(var F=0;F<c.contents.length;F++)i(e,I,c.contents[F],c);var U=[];if("p"===c.kind&&(u(e,I,U,null),e.rubyReserve&&(function(e,t){for(var n=0;n<e.length;n++){var r,i,a=document.createElement("ruby"),s=document.createElement("span");s.textContent="",a.appendChild(s);var o,l=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&1==e.length?((r=document.createElement("rtc")).style[m]=p?"after":"under",r.textContent="",r.style.fontSize=l,(i=document.createElement("rtc")).style[m]=p?"before":"over",i.textContent="",i.style.fontSize=l,a.appendChild(r),a.appendChild(i)):((r=document.createElement("rtc")).textContent="",r.style.fontSize=l,o="after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&n>0?p?"after":"tb"===t.bpd||"rl"===t.bpd?"under":"over":p?"before":"tb"===t.bpd||"rl"===t.bpd?"over":"under",r.style[m]=o,a.appendChild(r));for(var u=null,d=0;d<e[n].rbc.length;d++)if("ruby"===e[n].rbc[d].localName){u=e[n].rbc[d];for(var c=0;c<u.style.length;c++)a.style.setProperty(u.style.item(c),u.style.getPropertyValue(u.style.item(c)));break}(u=u||e[n].elements[0].node).parentElement.insertBefore(a,u)}}(U,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].rbc.length;r++){var i;e[n].rbc[r].style[m]||(i=p?0===n?"before":"after":"tb"===t.bpd||"rl"===t.bpd?0===n?"over":"under":0===n?"under":"over",e[n].rbc[r].style[m]=i)}}(U,e),e.ruby=null),e.textEmphasis&&(function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].te.length;r++){var i;e[n].te[r].style[v]&&"none"!==e[n].te[r].style[v]||(i="tb"===t.bpd?0===n?"left over":"left under":"rl"===t.bpd?0===n?"right under":"left under":0===n?"left under":"right under",e[n].te[r].style[v]=i)}}(U,e),e.textEmphasis=null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(U),e.mra=null),e.lp&&(function(e,t,n){if(null!==e)for(var i=0;i<e.length;i++){var a=e[i].elements.length,s=Math.ceil(t)+"px",o="-"+Math.ceil(t)+"px";if(0!==a){var l=e[i].elements[e[i].start_elem],u=e[i].elements[e[i].end_elem];if(l===u){var d=l.node.getBoundingClientRect();if(0==d.width||0==d.height)continue}"lr"===n.ipd?(l.node.style.marginLeft=o,l.node.style.paddingLeft=s):"rl"===n.ipd?(l.node.style.paddingRight=s,l.node.style.marginRight=o):"tb"===n.ipd&&(l.node.style.paddingTop=s,l.node.style.marginTop=o),"lr"===n.ipd?(r||(u.node.style.marginRight=o),u.node.style.paddingRight=s):"rl"===n.ipd?(u.node.style.paddingLeft=s,r||(u.node.style.marginLeft=o)):"tb"===n.ipd&&(u.node.style.paddingBottom=s,u.node.style.marginBottom=o)}}}(U,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=1;i<r.elements.length;){var o=r.elements[i-1],l=r.elements[i];s(o.node,l.node,t)?r.elements.splice(i,1):i++}for(var u,d,c=[],h=0;h<e.length;h++)for(var f=0;f<e[h].elements.length;f++)(d=a(u=e[h].elements[f].node,c,!1))&&(u.style.backgroundColor=d);for(var g=0;g<c.length;g++)c[g].style.backgroundColor=""}(U,e),e.flg)){var z=l(I.getBoundingClientRect(),e);!function(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var s,o,l,u;if(s=0===a?Math.round(t):a===e.length?Math.round(n):Math.round((e[a-1].after+e[a].before)/2),a>0&&e[a-1])for(l=0;l<e[a-1].elements.length;l++)o=i*(s-(u=e[a-1].elements[l]).after)+"px","lr"===r.bpd?u.node.style.paddingRight=o:"rl"===r.bpd?u.node.style.paddingLeft=o:"tb"===r.bpd&&(u.node.style.paddingBottom=o);if(a<e.length)for(l=0;l<e[a].elements.length;l++)o=i*((u=e[a].elements[l]).before-s)+"px","lr"===r.bpd?u.node.style.paddingLeft=o:"rl"===r.bpd?u.node.style.paddingRight=o:"tb"===r.bpd&&(u.node.style.paddingTop=o)}}(U,z.before,z.after,e),e.flg=null}if("region"===c.kind&&"tb"===e.bpd&&e.enableRollUp&&c.contents.length>0&&"after"===c.styleAttrs[n.byName.displayAlign.qname]){u(e,I,U,null);var B=new o(""===c.id?"_":c.id,U);if(e.currentISDState[B.id]=B,e.previousISDState&&B.id in e.previousISDState&&e.previousISDState[B.id].plist.length>0&&B.plist.length>1&&B.plist[B.plist.length-2].text===e.previousISDState[B.id].plist[e.previousISDState[B.id].plist.length-1].text){var j=g.firstElementChild,q=B.plist[B.plist.length-1].after-B.plist[B.plist.length-1].before;j.style.bottom="-"+q+"px",j.style.transition="transform 0.4s",j.style.position="relative",j.style.transform="translateY(-"+q+"px)"}}}else b(e.errorHandler,"Error processing ISD element kind: "+c.kind)}function a(e,t,n){return e.style.backgroundColor?(n&&!t.includes(e)&&t.push(e),e.style.backgroundColor):"SPAN"===e.parentElement.nodeName||"RUBY"===e.parentElement.nodeName||"RBC"===e.parentElement.nodeName||"RTC"===e.parentElement.nodeName||"RT"===e.parentElement.nodeName?a(e.parentElement,t,!0):void 0}function s(e,t,n){if("SPAN"===e.tagName&&"SPAN"===t.tagName&&e._isd_element===t._isd_element){if(!e._isd_element)return b(n.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;e.textContent+=t.textContent;for(var r=0;r<t.style.length;r++){var i=t.style[r];(i.indexOf("border")>=0||i.indexOf("padding")>=0||i.indexOf("margin")>=0)&&(e.style[i]=t.style[i])}return t.parentElement.removeChild(t),!0}return!1}function o(e,t){this.id=e,this.plist=t}function l(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function u(e,t,n,r){if("rt"!==t.localName&&"rtc"!==t.localName){var i,a,s,o,d=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName||"rb"===t.localName){var c=l(t.getBoundingClientRect(),e);if(0!==n.length&&(i=c.before,a=c.after,s=n[n.length-1].before,a<(o=n[n.length-1].after)&&i>s||o<=a&&s>=i)){var h=Math.sign(c.after-c.before),f=Math.sign(c.end-c.start);h*(c.before-n[n.length-1].before)<0&&(n[n.length-1].before=c.before),h*(c.after-n[n.length-1].after)>0&&(n[n.length-1].after=c.after),f*(c.start-n[n.length-1].start)<0&&(n[n.length-1].start=c.start,n[n.length-1].start_elem=n[n.length-1].elements.length),f*(c.end-n[n.length-1].end)>0&&(n[n.length-1].end=c.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:c.before,after:c.after,start:c.start,end:c.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:d,before:c.before,after:c.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var g=t.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&(u(e,g,n,d),"ruby"===g.localName||"rtc"===g.localName?n.length>0&&n[n.length-1].rbc.push(g):"span"===g.localName&&g.style[y]&&"none"!==g.style[y]&&n.length>0&&n[n.length-1].te.push(g)),g=g.nextSibling}}function d(e,t,n,r){var i;"none"!==r.style&&("auto"===r.style?t.style[y]="filled":t.style[y]=r.style+" "+r.symbol,("before"===r.position||"after"===r.position)&&(i="tb"===e.bpd?"before"===r.position?"left over":"left under":"rl"===e.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",t.style[v]=i))}function c(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,r,a,s,o,l,u){var d=r||t.clientHeight,c=a||t.clientWidth;if(null!==e.aspectRatio){var h=d*e.aspectRatio;h>c?d=Math.round(c/e.aspectRatio):c=h}var f=document.createElement("div");f.style.position="relative",f.style.width=c+"px",f.style.height=d+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var g={h:d,w:c,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:s||!1,isd:e,errorHandler:o,previousISDState:l,enableRollUp:u||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(t.appendChild(f),"contents"in e)for(var p=0;p<e.contents.length;p++)i(g,f,e.contents[p],e);return g.currentISDState};for(var h=[new c("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")}),new c("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new c("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new c("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new c("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new c("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h.toUsedLength(e.w,e.h),e.regionW=r.w.toUsedLength(e.w,e.h);var i=0,a=0,s=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];s&&(i=s[0].toUsedLength(e.w,e.h)+s[2].toUsedLength(e.w,e.h),a=s[1].toUsedLength(e.w,e.h)+s[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"}),new c("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){for(var i=[],a=0;a<r.length;a++)r[a]=r[a].trim(),"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);if(i.length>0){for(var s=[i[0]],o=1;o<i.length;o++)-1==s.indexOf(i[o])&&s.push(i[o]);i=s}t.style.fontFamily=i.join(",")}),new c("http://www.w3.org/ns/ttml#styling shear",function(e,t,n,r){if(0!==r){var i=-.9*r;"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)"}}),new c("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r.toUsedLength(e.w,e.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new c("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new c("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r.toUsedLength(e.w,e.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new c("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new c("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0].toUsedLength(e.w,e.h)+"px",i[1]=r[3].toUsedLength(e.w,e.h)+"px",i[2]=r[2].toUsedLength(e.w,e.h)+"px",i[3]=r[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")}),new c("http://www.w3.org/ns/ttml#styling position",function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"}),new c("http://www.w3.org/ns/ttml#styling rubyAlign",function(e,t,n,r){t.style.rubyAlign="spaceAround"===r?"space-around":"center"}),new c("http://www.w3.org/ns/ttml#styling rubyPosition",function(e,t,n,r){var i;"before"!==r&&"after"!==r||(i=p?r:"tb"===e.bpd||"rl"===e.bpd?"before"===r?"over":"under":"before"===r?"under":"over",t.parentElement.style[m]=i)}),new c("http://www.w3.org/ns/ttml#styling showBackground",null),new c("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var i;i="start"===r?"rl"===e.ipd?"right":"left":"end"===r?"rl"===e.ipd?"left":"right":r,t.style.textAlign=i}),new c("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new c("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){}),new c("http://www.w3.org/ns/ttml#styling textShadow",function(e,t,r,i){var a=r.styleAttrs[n.byName.textOutline.qname];if("none"===i&&"none"===a)t.style.textShadow="";else{var s=[];if("none"!==a){var o="rgba("+a.color[0].toString()+","+a.color[1].toString()+","+a.color[2].toString()+","+(a.color[3]/255).toString()+")";s.push("1px 1px 1px "+o),s.push("-1px 1px 1px "+o),s.push("1px -1px 1px "+o),s.push("-1px -1px 1px "+o)}if("none"!==i)for(var l=0;l<i.length;l++)s.push(i[l].x_off.toUsedLength(e.w,e.h)+"px "+i[l].y_off.toUsedLength(e.w,e.h)+"px "+i[l].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[l].color[0].toString()+","+i[l].color[1].toString()+","+i[l].color[2].toString()+","+(i[l].color[3]/255).toString()+")");t.style.textShadow=s.join(",")}}),new c("http://www.w3.org/ns/ttml#styling textCombine",function(e,t,n,r){t.style.textCombineUpright=r}),new c("http://www.w3.org/ns/ttml#styling textEmphasis",function(e,t,n,r){}),new c("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i}),new c("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new c("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new c("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new c("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new c("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],f={},g=0;g<h.length;g++)f[h[g].qname]=h[g];var p="webkitRubyPosition"in window.getComputedStyle(document.documentElement),m=p?"webkitRubyPosition":"rubyPosition",y="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",v="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function b(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},8905:function(e,t,n){!function(e,t,n,r){e.generateISD=function(e,t,r){var i,s=new l(e),o={},u={},d=e.head.styling.initials[n.byName.showBackground.qname],c=e.head.styling.initials[n.byName.backgroundColor.qname];for(var h in e.head.layout.regions)if(e.head.layout.regions.hasOwnProperty(h)){var f=e.head.layout.regions[h],g=f.styleAttrs[n.byName.showBackground.qname]||d,p=f.styleAttrs[n.byName.backgroundColor.qname]||c;u[f.id]=("always"===g||void 0===g)&&void 0!==p&&!(t<f.begin||t>=f.end)}for(var m in e.body&&e.body.regionID&&(u[e.body.regionID]=!0),i=null!==e.body?function e(t,n){if(n.contents){var r={};for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.contents=[],n.contents.filter(function(e){return!(t<e.begin||t>=e.end)}).forEach(function(n){var i=e(t,n);i.regionID&&(u[i.regionID]=!0),null!==i&&r.contents.push(i)}),r}return n}(t,e.body):null,void 0!==u[""]&&(u[""]=!0),u)if(u[m]){var y=a(e,t,e.head.layout.regions[m],i,null,"",e.head.layout.regions[m],r,o);null!==y&&s.contents.push(y.element)}return s};var i=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname];function a(e,t,l,c,h,f,g,p,m){if(t<g.begin||t>=g.end)return null;var y="regionID"in g&&""!==g.regionID?g.regionID:f;if(null!==h&&y!==l.id&&(!("contents"in g)||"contents"in g&&0===g.contents.length||""!==y))return null;var v=new u(g);if("sets"in g)for(var b=0;b<g.sets.length;b++)t<g.sets[b].begin||t>=g.sets[b].end||(v.styleAttrs[g.sets[b].qname]=g.sets[b].value);var E={};for(var T in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(T)&&(E[T]=!0,"region"===v.kind&&T===n.byName.writingMode.qname&&!(n.byName.direction.qname in v.styleAttrs))){var S=v.styleAttrs[T];"lrtb"===S||"lr"===S?v.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==S&&"rl"!==S||(v.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==h)for(var w=0;w<n.all.length;w++){var A=n.all[w];if(A.qname===n.byName.textDecoration.qname){var I=h.styleAttrs[A.qname],k=v.styleAttrs[A.qname],_=[];void 0===k?_=I:-1===k.indexOf("none")?((-1===k.indexOf("noUnderline")&&-1!==I.indexOf("underline")||-1!==k.indexOf("underline"))&&_.push("underline"),(-1===k.indexOf("noLineThrough")&&-1!==I.indexOf("lineThrough")||-1!==k.indexOf("lineThrough"))&&_.push("lineThrough"),(-1===k.indexOf("noOverline")&&-1!==I.indexOf("overline")||-1!==k.indexOf("overline"))&&_.push("overline")):_.push("none"),v.styleAttrs[A.qname]=_}else if(A.qname!==n.byName.fontSize.qname||A.qname in v.styleAttrs||"span"!==v.kind||"textContainer"!==v.styleAttrs[n.byName.ruby.qname])if(A.qname!==n.byName.fontSize.qname||A.qname in v.styleAttrs||"span"!==v.kind||"text"!==v.styleAttrs[n.byName.ruby.qname])A.inherit&&A.qname in h.styleAttrs&&!(A.qname in v.styleAttrs)&&(v.styleAttrs[A.qname]=h.styleAttrs[A.qname]);else{var R=h.styleAttrs[n.byName.fontSize.qname];"textContainer"===h.styleAttrs[n.byName.ruby.qname]?v.styleAttrs[A.qname]=R:v.styleAttrs[A.qname]=new r.ComputedLength(.5*R.rw,.5*R.rh)}else{var x=h.styleAttrs[n.byName.fontSize.qname];v.styleAttrs[A.qname]=new r.ComputedLength(.5*x.rw,.5*x.rh)}}for(var C=0;C<n.all.length;C++){var D=n.all[C];if(!(D.qname in v.styleAttrs)&&!(D.qname===n.byName.position.qname&&n.byName.origin.qname in v.styleAttrs||D.qname===n.byName.origin.qname&&n.byName.position.qname in v.styleAttrs)){var L=e.head.styling.initials[D.qname]||D.initial;if(null!==L&&("region"===v.kind||!1===D.inherit&&null!==L)){var M=D.parse(L);null!==M?(v.styleAttrs[D.qname]=M,E[D.qname]=!0):d(p,"Invalid initial value for '"+D.qname+"' on element '"+v.kind)}}}for(var N=0;N<n.all.length;N++){var P=n.all[N];if(P.qname in E&&null!==P.compute){var O=P.compute(e,h,v,v.styleAttrs[P.qname],m);null!==O?v.styleAttrs[P.qname]=O:(v.styleAttrs[P.qname]=P.compute(e,h,v,P.parse(P.initial),m),d(p,"Style '"+P.qname+"' on element '"+v.kind+"' cannot be computed"))}}if("none"===v.styleAttrs[n.byName.display.qname])return null;var F=null;null===h?F=null===c?[]:[c]:"contents"in g&&(F=g.contents);for(var U=0;null!==F&&U<F.length;U++){var z=a(e,t,l,c,v,y,F[U],p,m);null!==z&&v.contents.push(z.element)}for(var B in v.styleAttrs)if(v.styleAttrs.hasOwnProperty(B)){var j=!1;if("span"===v.kind){var q=v.styleAttrs[n.byName.ruby.qname];(j=("container"===q||"textContainer"===q||"baseContainer"===q)&&-1!==i.indexOf(B))||(j="container"!==q&&B===n.byName.rubyAlign.qname),j||(j=!("textContainer"===q||"text"===q)&&B===n.byName.rubyPosition.qname)}if(!j){var G=n.byQName[B];"applies"in G&&(j=-1===G.applies.indexOf(v.kind))}j&&delete v.styleAttrs[B]}var H=v.styleAttrs[n.byName.ruby.qname];if("p"===v.kind||"span"===v.kind&&("textContainer"===H||"text"===H)){var V=[];s(v,V),function(e){for(var t,n=0;n<e.length;)if("br"!==(t=e[n]).kind&&"preserve"!==t.space){var r=t.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(r)&&(0===n||"br"===(i=e[n-1]).kind||/[\r\n\t ]$/.test(i.text))&&(r=r.substring(1)),t.text=r,0===r.length?e.splice(n,1):n++}else n++;var i,a;for(n=0;n<e.length;n++)"br"!==(t=e[n]).kind&&"preserve"!==t.space?/[ ]$/.test(t.text)&&(n===e.length-1||"br"===(a=e[n+1]).kind||"preserve"===a.space&&/^[\r\n]/.test(a.text))&&(t.text=t.text.slice(0,-1)):n++}(V),o(v)}return"div"===v.kind&&n.byName.backgroundImage.qname in v.styleAttrs||"br"===v.kind||"image"===v.kind||"contents"in v&&v.contents.length>0||"span"===v.kind&&null!==v.text||"region"===v.kind&&"always"===v.styleAttrs[n.byName.showBackground.qname]?{region_id:y,element:v}:null}function s(e,t){if("contents"in e)for(var r=0;r<e.contents.length;r++){var i=e.contents[r],a=i.styleAttrs[n.byName.ruby.qname];("span"!==i.kind||"textContainer"!==a&&"text"!==a)&&("contents"in i?s(i,t):("span"===i.kind&&0!==i.text.length||"br"===i.kind)&&t.push(i))}}function o(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)o(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function l(e){this.contents=[],this.aspectRatio=e.aspectRatio,this.lang=e.lang}function u(e){for(var t in this.kind=e.kind||"region",this.lang=e.lang,e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)e.styleAttrs.hasOwnProperty(t)&&(this.styleAttrs[t]=e.styleAttrs[t]);"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function d(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscStyles?n(1219):imscStyles,"undefined"==typeof imscUtils?n(6404):imscUtils)},7640:function(e,t,n){t.generateISD=n(8905).generateISD,t.fromXML=n(6739).fromXML,t.renderHTML=n(1612).render},977:function(e,t){var n;(n=t).ns_tt="http://www.w3.org/ns/ttml",n.ns_tts="http://www.w3.org/ns/ttml#styling",n.ns_ttp="http://www.w3.org/ns/ttml#parameter",n.ns_xml="http://www.w3.org/XML/1998/namespace",n.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",n.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",n.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",n.ns_ebutts="urn:ebu:tt:style"},1219:function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,a,s,o){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=s,this.compute=o}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,r,i,a){var s,o;if("auto"===i)s=new n.ComputedLength(0,1);else if(null===(s=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)o=new n.ComputedLength(1,0);else if(null===(o=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:s,w:o}}),new r(t.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(e){for(var t=e.split(","),n=[],r=0;r<t.length;r++)t[r]=t[r].trim(),"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new r(t.ns_tts,"shear","0%",["p"],!0,!0,n.parseLength,function(e,t,n,r){return"%"!==r.unit?null:Math.abs(r.value)>100?100*Math.sign(r.value):r.value}),new r(t.ns_tts,"fontSize","1c",["span","p"],!0,!0,n.parseLength,function(t,r,i,a,s){return n.toComputedLength(a.value,a.unit,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)}),new r(t.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(e){return e},null),new r(t.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(e){return e},null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:n.parseLength(e)},function(t,r,i,a,s){var o;if("normal"===a)o=a;else if(null===(o=n.toComputedLength(a.value,a.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h)))return null;return o}),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null},function(e,t,r,i,a){var s,o;if("auto"===i)s=new n.ComputedLength(0,0);else if(null===(s=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)o=new n.ComputedLength(0,0);else if(null===(o=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:s,w:o}}),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(t.length>4)return null;for(var r=[],i=0;i<t.length;i++){var a=n.parseLength(t[i]);if(!a)return null;r.push(a)}return r},function(t,r,i,a,s){var o;if(1===a.length)o=[a[0],a[0],a[0],a[0]];else if(2===a.length)o=[a[0],a[1],a[0],a[1]];else if(3===a.length)o=[a[0],a[1],a[2],a[1]];else{if(4!==a.length)return null;o=[a[0],a[1],a[2],a[3]]}var l=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===l||"lr"===l)o=[o[0],o[3],o[2],o[1]];else if("rltb"===l||"rl"===l)o=[o[0],o[1],o[2],o[3]];else if("tblr"===l)o=[o[3],o[0],o[1],o[2]];else{if("tbrl"!==l&&"tb"!==l)return null;o=[o[3],o[2],o[1],o[0]]}for(var u=[],d=0;d<o.length;d++)if(0===o[d].value)u[d]=new n.ComputedLength(0,0);else if(u[d]=n.toComputedLength(o[d].value,o[d].unit,i.styleAttrs[e.byName.fontSize.qname],0===d||2===d?i.styleAttrs[e.byName.extent.qname].h:i.styleAttrs[e.byName.extent.qname].w,0===d||2===d?t.cellLength.h:t.cellLength.w,0===d||2===d?t.pxLength.h:t.pxLength.w),null===u[d])return null;return u}),new r(t.ns_tts,"position","top left",["region"],!1,!0,function(e){return n.parsePosition(e)},function(t,r,i,a){var s,o;return null===(s=n.toComputedLength(a.v.offset.value,a.v.offset.unit,null,new n.ComputedLength(-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-i.styleAttrs[e.byName.extent.qname].h.rh),null,t.pxLength.h))?null:("bottom"===a.v.edge&&(s=new n.ComputedLength(-s.rw-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-s.rh-i.styleAttrs[e.byName.extent.qname].h.rh)),o=n.toComputedLength(a.h.offset.value,a.h.offset.unit,null,new n.ComputedLength(t.dimensions.w.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-i.styleAttrs[e.byName.extent.qname].w.rh),null,t.pxLength.w),null===s?null:("right"===a.h.edge&&(o=new n.ComputedLength(t.dimensions.w.rw-o.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-o.rh-i.styleAttrs[e.byName.extent.qname].w.rh)),{h:s,w:o}))}),new r(t.ns_tts,"ruby","none",["span"],!1,!0,function(e){return e},null),new r(t.ns_tts,"rubyAlign","center",["span"],!0,!0,function(e){return"center"!==e&&"spaceAround"!==e?null:e},null),new r(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"rubyReserve","none",["p"],!0,!0,function(e){var t=e.split(" "),r=[null,null];if(0===t.length||t.length>2)return null;if("none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(r[0]=t[0],2===t.length&&"none"!==t[0]){var i=n.parseLength(t[1]);if(!i)return null;r[1]=i}return r},function(t,r,i,a,s){return"none"===a[0]?a:null===(o=null===a[1]?new n.ComputedLength(.5*i.styleAttrs[e.byName.fontSize.qname].rw,.5*i.styleAttrs[e.byName.fontSize.qname].rh):n.toComputedLength(a[1].value,a[1].unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))?null:[a[0],o];var o}),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r}),new r(t.ns_tts,"textCombine","none",["span"],!0,!0,function(e){return"none"===e||"all"===e?e:null},null),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new r(t.ns_tts,"textEmphasis","none",["span"],!0,!0,function(e){for(var t=e.split(" "),r={style:null,symbol:null,color:null,position:null},i=0;i<t.length;i++)if("none"===t[i]||"auto"===t[i])r.style=t[i];else if("filled"===t[i]||"open"===t[i])r.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])r.symbol=t[i];else if("current"===t[i])r.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])r.position=t[i];else if(r.color=n.parseColor(t[i]),null===r.color)return null;return null==r.style&&null==r.symbol?r.style="auto":(r.symbol=r.symbol||"circle",r.style=r.style||"filled"),r.position=r.position||"outside",r.color=r.color||"current",r},null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(t.thickness=a,t):null},function(t,r,i,a,s){if("none"===a)return a;var o={};return null===a.color?o.color=i.styleAttrs[e.byName.color.qname]:o.color=a.color,o.thickness=n.toComputedLength(a.thickness.value,a.thickness.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===o.thickness?null:o}),new r(t.ns_tts,"textShadow","none",["span"],!0,!0,n.parseTextShadow,function(t,r,i,a){if("none"===a)return a;for(var s=[],o=0;o<a.length;o++){var l={};if(l.x_off=n.toComputedLength(a[o][0].value,a[o][0].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.w),null===l.x_off)return null;if(l.y_off=n.toComputedLength(a[o][1].value,a[o][1].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===l.y_off)return null;if(null===a[o][2])l.b_radius=0;else if(l.b_radius=n.toComputedLength(a[o][2].value,a[o][2].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===l.b_radius)return null;null===a[o][3]?l.color=i.styleAttrs[e.byName.color.qname]:l.color=a[o][3],s.push(l)}return s}),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,function(e,t,r,i,a){return n.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)}),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,function(e){return"true"===e},null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(t,"undefined"==typeof imscNames?n(977):imscNames,"undefined"==typeof imscUtils?n(6404):imscUtils)},6404:function(e,t){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,s=null,o=i[e.toLowerCase()];return void 0!==o?s=o:null!==(a=t.exec(e))?s=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(e))?s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(e))&&(s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),s};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(e){var t,n=null;return null!==(t=a.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n},e.parseTextShadow=function(t){for(var n=t.match(/([^\(,\)]|\([^\)]+\))+/g),r=[],i=0;i<n.length;i++){var a=n[i].split(" ");if(1===a.length&&"none"===a[0])return"none";if(a.length>1&&a.length<5){var s=[null,null,null,null],o=e.parseLength(a.shift());if(null===o)return null;if(s[0]=o,null===(o=e.parseLength(a.shift())))return null;if(s[1]=o,0===a.length){r.push(s);continue}if(null!==(o=e.parseLength(a[0]))&&(s[2]=o,a.shift()),0===a.length){r.push(s);continue}var l=e.parseColor(a[0]);if(null===l)return null;s[3]=l,r.push(s)}}return r},e.parsePosition=function(t){var n=t.split(" "),r=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(n.length>4)return null;for(var i=0;i<n.length;i++)if(!r(n[i])){var a=e.parseLength(n[i]);if(null===a)return null;n[i]=a}for(var s={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},o=0;o<n.length;){var l=n[o++];if(r(l)){var u={value:0,unit:"%"};2!==n.length&&o<n.length&&!r(n[o])&&(u=n[o++]),"right"===l?(s.h.edge=l,s.h.offset=u):"bottom"===l?(s.v.edge=l,s.v.offset=u):"left"===l?s.h.offset=u:"top"===l&&(s.v.offset=u)}else{if(1!==n.length&&2!==n.length)return null;1===o?s.h.offset=l:s.v.offset=l}}return s},e.ComputedLength=function(e,t){this.rw=e,this.rh=t},e.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(t,n,r,i,a,s){return"%"===n&&i?new e.ComputedLength(i.rw*t/100,i.rh*t/100):"em"===n&&r?new e.ComputedLength(r.rw*t,r.rh*t):"c"===n&&a?new e.ComputedLength(t*a.rw,t*a.rh):"px"===n&&s?new e.ComputedLength(t*s.rw,t*s.rh):"rh"===n?new e.ComputedLength(0,t/100):"rw"===n?new e.ComputedLength(t/100,0):null}}(t)},7523:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},3282:function(e){function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,a=-1,s=0,o=0;o<=e.length;++o){if(o<e.length)n=e.charCodeAt(o);else{if(47===n)break;n=47}if(47===n){if(a===o-1||1===s);else if(a!==o-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var l=r.lastIndexOf("/");if(l!==r.length-1){-1===l?(r="",i=0):i=(r=r.slice(0,l)).length-1-r.lastIndexOf("/"),a=o,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,a=o,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(a+1,o):r=e.slice(a+1,o),i=o-a-1;a=o,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var s;a>=0?s=arguments[a]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(r=s+"/"+r,i=47===s.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var a=e.length,s=a-i,o=1;o<n.length&&47===n.charCodeAt(o);++o);for(var l=n.length-o,u=s<l?s:l,d=-1,c=0;c<=u;++c){if(c===u){if(l>u){if(47===n.charCodeAt(o+c))return n.slice(o+c+1);if(0===c)return n.slice(o+c)}else s>u&&(47===e.charCodeAt(i+c)?d=c:0===c&&(d=0));break}var h=e.charCodeAt(i+c);if(h!==n.charCodeAt(o+c))break;47===h&&(d=c)}var f="";for(c=i+d+1;c<=a;++c)c!==a&&47!==e.charCodeAt(c)||(0===f.length?f+="..":f+="/..");return f.length>0?f+n.slice(o+d):(o+=d,47===n.charCodeAt(o)&&++o,n.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,a=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!a){i=s;break}}else a=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,a=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var o=n.length-1,l=-1;for(r=e.length-1;r>=0;--r){var u=e.charCodeAt(r);if(47===u){if(!s){i=r+1;break}}else-1===l&&(s=!1,l=r+1),o>=0&&(u===n.charCodeAt(o)?-1==--o&&(a=r):(o=-1,a=l))}return i===a?a=l:-1===a&&(a=e.length),e.slice(i,a)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){i=r+1;break}}else-1===a&&(s=!1,a=r+1);return-1===a?"":e.slice(i,a)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,a=!0,s=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47!==l)-1===i&&(a=!1,i=o+1),46===l?-1===n?n=o:1!==s&&(s=1):-1!==n&&(s=-1);else if(!a){r=o+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return n=(t=e).dir||t.root,r=t.base||(t.name||"")+(t.ext||""),n?n===t.root?n+r:n+"/"+r:r;var t,n,r},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),a=47===i;a?(n.root="/",r=1):r=0;for(var s=-1,o=0,l=-1,u=!0,d=e.length-1,c=0;d>=r;--d)if(47!==(i=e.charCodeAt(d)))-1===l&&(u=!1,l=d+1),46===i?-1===s?s=d:1!==c&&(c=1):-1!==s&&(c=-1);else if(!u){o=d+1;break}return-1===s||-1===l||0===c||1===c&&s===l-1&&s===o+1?-1!==l&&(n.base=n.name=0===o&&a?e.slice(1,l):e.slice(o,l)):(0===o&&a?(n.name=e.slice(1,s),n.base=e.slice(1,l)):(n.name=e.slice(o,s),n.base=e.slice(o,l)),n.ext=e.slice(s,l)),o>0?n.dir=e.slice(0,o-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},3515:function(e,t,n){e.exports=i;var r=n(9826).EventEmitter;function i(){r.call(this)}n(7523)(i,r),i.Readable=n(2762),i.Writable=n(3726),i.Duplex=n(884),i.Transform=n(6756),i.PassThrough=n(1390),i.finished=n(2896),i.pipeline=n(8460),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",l));var s=!1;function o(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",u),e.on("error",u),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},1602:function(e){var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,(a=t,s=r,o=i,"string"==typeof n?n:n(a,s,o)))||this;var a,s,o}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(e,t,n){var i,a,s,o,l,u;if("string"==typeof t&&"not "===t.substr(0,4)?(i="must not be",t=t.replace(/^not /,"")):i="must be",l=e,(void 0===u||u>l.length)&&(u=l.length)," argument"===l.substring(u-9,u))a="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var d=("number"!=typeof o&&(o=0),o+1>(s=e).length||-1===s.indexOf(".",o)?"argument":"property");a='The "'.concat(e,'" ').concat(d," ").concat(i," ").concat(r(t,"type"))}return a+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=t},884:function(e,t,n){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var i=n(2762),a=n(3726);n(7523)(u,i);for(var s=r(a.prototype),o=0;o<s.length;o++){var l=s[o];u.prototype[l]||(u.prototype[l]=a.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(c,this)}function c(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},1390:function(e,t,n){e.exports=i;var r=n(6756);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(7523)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},2762:function(e,t,n){var r;e.exports=A,A.ReadableState=w,n(9826).EventEmitter;var i,a=function(e,t){return e.listeners(t).length},s=n(2611),o=n(44).Buffer,l=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=n(7199);i=u&&u.debuglog?u.debuglog("stream"):function(){};var d,c,h,f=n(3791),g=n(2410),p=n(1749).getHighWaterMark,m=n(1602).codes,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,E=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7523)(A,s);var T=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function w(e,t,i){r=r||n(884),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=p(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(748).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function A(e){if(r=r||n(884),!(this instanceof A))return new A(e);var t=this instanceof r;this._readableState=new w(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function I(e,t,n,r,a){i("readableAddChunk",t);var s,u,d,c,h,f=e._readableState;if(null===t)f.reading=!1,function(e,t){if(i("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,C(e)))}}(e,f);else if(a||(u=f,h=d=t,o.isBuffer(h)||h instanceof l||"string"==typeof d||void 0===d||u.objectMode||(c=new y("chunk",["string","Buffer","Uint8Array"],d)),s=c),s)T(e,s);else if(f.objectMode||t&&t.length>0)if("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)f.endEmitted?T(e,new E):k(e,f,t,!0);else if(f.ended)T(e,new v);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!n?(t=f.decoder.write(t),f.objectMode||0!==t.length?k(e,f,t,!1):D(e,f)):k(e,f,t,!1)}else r||(f.reading=!1,D(e,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function k(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),D(e,t)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),A.prototype.destroy=g.destroy,A.prototype._undestroy=g.undestroy,A.prototype._destroy=function(e,t){t(e)},A.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),I(this,e,t,!1,n)},A.prototype.unshift=function(e){return I(this,e,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(e){d||(d=n(748).StringDecoder);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var _=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((n=e)>=_?n=_:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function x(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(C,e))}function C(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,O(e)}function D(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(L,e,t))}function L(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(i("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){i("readable nexttick read 0"),e.read(0)}function P(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),O(e),t.flowing&&!t.reading&&e.read(0)}function O(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function U(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(z,t,e))}function z(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}A.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):x(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&U(this),null;var r,a=t.needReadable;return i("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",a=!0),t.ended||t.reading?i("reading or ended",a=!1):a&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&U(this)),null!==r&&this.emit("data",r),r},A.prototype._read=function(e){T(this,new b("_read()"))},A.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?g:o;function o(){i("onend"),e.end()}r.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",function t(a,s){i("onunpipe"),a===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,i("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",c),e.removeListener("unpipe",t),n.removeListener("end",o),n.removeListener("end",g),n.removeListener("data",d),u=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())});var l=function(e){return function(){var t=e._readableState;i("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,O(e))}}(n);e.on("drain",l);var u=!1;function d(t){i("ondata");var a=e.write(t);i("dest.write",a),!1===a&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==B(r.pipes,e))&&!u&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function c(t){i("onerror",t),g(),e.removeListener("error",c),0===a(e,"error")&&T(e,t)}function h(){e.removeListener("finish",f),g()}function f(){i("onfinish"),e.removeListener("close",h),g()}function g(){i("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",c),e.once("close",h),e.once("finish",f),e.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),e},A.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},A.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?x(this):r.reading||process.nextTick(N,this))),n},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(M,this),n},A.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(M,this),t},A.prototype.resume=function(){var e,t,n=this._readableState;return n.flowing||(i("resume"),n.flowing=!n.readableListening,e=this,(t=n).resumeScheduled||(t.resumeScheduled=!0,process.nextTick(P,e,t))),n.paused=!1,this},A.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var a in e.on("end",function(){if(i("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(a){i("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(r=!0,e.pause()))}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){i("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=n(5857)),c(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),A._fromList=F,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(e,t){return void 0===h&&(h=n(3411)),h(A,e,t)})},6756:function(e,t,n){e.exports=d;var r=n(1602).codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(884);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush(function(t,n){h(e,t,n)})}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}n(7523)(d,l),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,n){n(new i("_transform()"))},d.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,function(e){t(e)})}},3726:function(e,t,n){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(void 0),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=A,A.WritableState=w;var a,s={deprecate:n(9e3)},o=n(2611),l=n(44).Buffer,u=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=n(2410),c=n(1749).getHighWaterMark,h=n(1602).codes,f=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,p=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,E=h.ERR_UNKNOWN_ENCODING,T=d.errorOrDestroy;function S(){}function w(e,t,a){i=i||n(884),e=e||{},"boolean"!=typeof a&&(a=t instanceof i),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=c(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n,r=e._writableState,i=r.sync,a=r.writecb;if("function"!=typeof a)throw new p;if((n=r).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)!function(e,t,n,r,i){--t.pendingcb,n?(process.nextTick(i,r),process.nextTick(C,e,t),e._writableState.errorEmitted=!0,T(e,r)):(i(r),e._writableState.errorEmitted=!0,T(e,r),C(e,t))}(e,r,i,t,a);else{var s=R(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),i?process.nextTick(k,e,r,s,a):k(e,r,s,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function A(e){var t=this instanceof(i=i||n(884));if(!t&&!a.call(A,this))return new A(e);this._writableState=new w(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function I(e,t,n,r,i,a,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function k(e,t,n,r){var i,a;n||(i=e,0===(a=t).length&&a.needDrain&&(a.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),C(e,t)}function _(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,a=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var o=0,l=!0;n;)a[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;a.allBuffers=l,I(e,t,!0,t.length,a,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,d=n.encoding,c=n.callback;if(I(e,t,!1,t.objectMode?1:u.length,u,d,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final(function(n){t.pendingcb--,n&&T(e,n),t.prefinished=!0,e.emit("prefinish"),C(e,t)})}function C(e,t){var n,r,i=R(t);if(i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,process.nextTick(x,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var a=e._readableState;(!a||a.autoDestroy&&a.endEmitted)&&e.destroy()}return i}n(7523)(A,o),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===A&&e&&e._writableState instanceof w}})):a=function(e){return e instanceof this},A.prototype.pipe=function(){T(this,new m)},A.prototype.write=function(e,t,n){var r,i,a=this._writableState,s=!1,o=!a.objectMode&&(r=e,l.isBuffer(r)||r instanceof u);return o&&!l.isBuffer(e)&&(i=e,e=l.from(i)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=S),a.ending?function(e,t){var n=new b;T(e,n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i;return null===n?i=new v:"string"==typeof n||t.objectMode||(i=new f("chunk",["string","Buffer"],n)),!i||(T(e,i),process.nextTick(r,i),!1)}(this,a,e,n))&&(a.pendingcb++,s=function(e,t,n,r,i,a){if(!n){var s=(u=r,d=i,(o=t).objectMode||!1===o.decodeStrings||"string"!=typeof u||(u=l.from(u,d)),u);r!==s&&(n=!0,i="buffer",r=s)}var o,u,d,c=t.objectMode?1:r.length;t.length+=c;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,c,r,i,a);return h}(this,a,o,e,t,n)),s},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||_(this,e))},A.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(e,t,n){n(new g("_write()"))},A.prototype._writev=null,A.prototype.end=function(e,t,n){var r,i,a,s=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||(r=this,a=n,(i=s).ending=!0,C(r,i),a&&(i.finished?process.nextTick(a):r.once("finish",a)),i.ended=!0,r.writable=!1),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),A.prototype.destroy=d.destroy,A.prototype._undestroy=d.undestroy,A.prototype._destroy=function(e,t){t(e)}},5857:function(e,t,n){var r;function i(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}var a=n(2896),s=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),c=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[s]=null,e[o]=null,t(f(n,!1)))}}function p(e){process.nextTick(g,e)}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(r={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise(function(t,n){process.nextTick(function(){e[l]?n(e[l]):t(f(void 0,!0))})});var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,r){e.then(function(){t[u]?n(f(void 0,!0)):t[c](n,r)},r)}}(r,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(f(i,!1));n=new Promise(this[c])}return this[d]=n,n}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){e?n(e):t(f(void 0,!0))})})}),r),m);e.exports=function(e){var t,n=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,o,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,c,{value:function(e,t){var r=n[h].read();r?(n[d]=null,n[s]=null,n[o]=null,e(f(r,!1))):(n[s]=e,n[o]=t)},writable:!0}),t));return n[d]=null,a(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[d]=null,n[s]=null,n[o]=null,t(e)),void(n[l]=e)}var r=n[s];null!==r&&(n[d]=null,n[s]=null,n[o]=null,r(f(void 0,!0))),n[u]=!0}),e.on("readable",p.bind(null,n)),n}},3791:function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var o=n(44).Buffer,l=n(3779).inspect,u=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,r,i=o.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=i,r=s,o.prototype.copy.call(t,n,r),s+=a.data.length,a=a.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?r+=i:r+=i.slice(0,e),0==(e-=a)){a===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(a));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2410:function(e){function t(e,t){r(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var a=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,e)):process.nextTick(r,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!i&&e?a._writableState?a._writableState.errorEmitted?process.nextTick(n,a):(a._writableState.errorEmitted=!0,process.nextTick(t,a,e)):process.nextTick(t,a,e):i?(process.nextTick(n,a),i(e)):process.nextTick(n,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},2896:function(e,t,n){var r=n(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(a||i);var s,o=n.readable||!1!==n.readable&&t.readable,l=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||c()},d=t._writableState&&t._writableState.finished,c=function(){l=!1,d=!0,o||a.call(t)},h=t._readableState&&t._readableState.endEmitted,f=function(){o=!1,h=!0,l||a.call(t)},g=function(e){a.call(t,e)},p=function(){var e;return o&&!h?(t._readableState&&t._readableState.ended||(e=new r),a.call(t,e)):l&&!d?(t._writableState&&t._writableState.ended||(e=new r),a.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return(s=t).setHeader&&"function"==typeof s.abort?(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)):l&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",c),!1!==n.error&&t.on("error",g),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("end",f),t.removeListener("error",g),t.removeListener("close",p)}}},3411:function(e){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(e,t,n){var r,i=n(1602).codes,a=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var d,c,h=(c=t).length?"function"!=typeof c[c.length-1]?o:c.pop():o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var f=t.map(function(e,i){var a=i<t.length-1;return function(e,t,i,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var o=!1;e.on("close",function(){o=!0}),void 0===r&&(r=n(2896)),r(e,{readable:t,writable:i},function(e){if(e)return a(e);o=!0,a()});var l=!1;return function(t){if(!o&&!l)return l=!0,(n=e).setHeader&&"function"==typeof n.abort?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new s("pipe"));var n}}(e,a,i>0,function(e){d||(d=e),e&&f.forEach(l),a||(f.forEach(l),h(d))})});return t.reduce(u)}},1749:function(e,t,n){var r=n(1602).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var a,s,o,l=(s=i,o=n,null!=(a=t).highWaterMark?a.highWaterMark:s?a[o]:null);if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||l<0)throw new r(i?n:"highWaterMark",l);return Math.floor(l)}return e.objectMode?16:16384}}},2611:function(e,t,n){e.exports=n(9826).EventEmitter},748:function(e,t,n){var r=n(4598).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4598:function(e,t,n){var r=n(44),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=s),a(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},8571:function(e,t,n){var r;!function(i,a){var s="function",o="undefined",l="object",u="string",d="major",c="model",h="name",f="type",g="vendor",p="version",m="architecture",y="console",v="mobile",b="tablet",E="smarttv",T="wearable",S="embedded",w="Amazon",A="Apple",I="ASUS",k="BlackBerry",_="Browser",R="Chrome",x="Firefox",C="Google",D="Huawei",L="LG",M="Microsoft",N="Motorola",P="Opera",O="Samsung",F="Sharp",U="Sony",z="Xiaomi",B="Zebra",j="Facebook",q="Chromium OS",G="Mac OS",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},V=function(e,t){return typeof e===u&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},$=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},Y=function(e,t){for(var n,r,i,o,u,d,c=0;c<t.length&&!u;){var h=t[c],f=t[c+1];for(n=r=0;n<h.length&&!u&&h[n];)if(u=h[n++].exec(e))for(i=0;i<f.length;i++)d=u[++r],typeof(o=f[i])===l&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,d):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=d?d.replace(o[1],o[2]):a:this[o[0]]=d?o[1].call(this,d,o[2]):a:4===o.length&&(this[o[0]]=d?o[3].call(this,d.replace(o[1],o[2])):a):this[o]=d||a;c+=2}},W=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(V(t[n][r],e))return"?"===n?a:n}else if(V(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,p],[/opios[\/ ]+([\w\.]+)/i],[p,[h,P+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[p,[h,P+" GX"]],[/\bopr\/([\w\.]+)/i],[p,[h,P]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,p],[/\bddg\/([\w\.]+)/i],[p,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[h,"UC"+_]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[h,"Smart Lenovo "+_]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+_],p],[/\bfocus\/([\w\.]+)/i],[p,[h,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[h,P+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[h,P+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[h,"MIUI "+_]],[/fxios\/([-\w\.]+)/i],[p,[h,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+_]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+_],p],[/samsungbrowser\/([\w\.]+)/i],[p,[h,O+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,j],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[h,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,R+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[h,"Android "+_]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[p,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[h,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,p],[/(cobalt)\/([\w\.]+)/i],[h,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,K]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[g,O],[f,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[g,O],[f,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[g,A],[f,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[g,A],[f,b]],[/(macintosh);/i],[c,[g,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[g,F],[f,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[g,D],[f,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[g,D],[f,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[g,z],[f,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[g,z],[f,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[g,"OPPO"],[f,v]],[/\b(opd2\d{3}a?) bui/i],[c,[g,"OPPO"],[f,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[g,"Vivo"],[f,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[g,"Realme"],[f,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[g,N],[f,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[g,N],[f,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[g,L],[f,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[g,L],[f,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[g,"Lenovo"],[f,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[g,"Nokia"],[f,v]],[/(pixel c)\b/i],[c,[g,C],[f,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[g,C],[f,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[g,U],[f,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[g,U],[f,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[g,"OnePlus"],[f,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[g,w],[f,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[g,w],[f,v]],[/(playbook);[-\w\),; ]+(rim)/i],[c,g,[f,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[g,k],[f,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[g,I],[f,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[g,I],[f,v]],[/(nexus 9)/i],[c,[g,"HTC"],[f,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[c,/_/g," "],[f,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[g,"Acer"],[f,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[g,"Meizu"],[f,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[g,"Ulefone"],[f,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,c,[f,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,c,[f,b]],[/(surface duo)/i],[c,[g,M],[f,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[g,"Fairphone"],[f,v]],[/(u304aa)/i],[c,[g,"AT&T"],[f,v]],[/\bsie-(\w*)/i],[c,[g,"Siemens"],[f,v]],[/\b(rct\w+) b/i],[c,[g,"RCA"],[f,b]],[/\b(venue[\d ]{2,7}) b/i],[c,[g,"Dell"],[f,b]],[/\b(q(?:mv|ta)\w+) b/i],[c,[g,"Verizon"],[f,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[g,"Barnes & Noble"],[f,b]],[/\b(tm\d{3}\w+) b/i],[c,[g,"NuVision"],[f,b]],[/\b(k88) b/i],[c,[g,"ZTE"],[f,b]],[/\b(nx\d{3}j) b/i],[c,[g,"ZTE"],[f,v]],[/\b(gen\d{3}) b.+49h/i],[c,[g,"Swiss"],[f,v]],[/\b(zur\d{3}) b/i],[c,[g,"Swiss"],[f,b]],[/\b((zeki)?tb.*\b) b/i],[c,[g,"Zeki"],[f,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],c,[f,b]],[/\b(ns-?\w{0,9}) b/i],[c,[g,"Insignia"],[f,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[g,"NextBook"],[f,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],c,[f,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],c,[f,v]],[/\b(ph-1) /i],[c,[g,"Essential"],[f,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[g,"Envizen"],[f,b]],[/\b(trio[-\w\. ]+) b/i],[c,[g,"MachSpeed"],[f,b]],[/\btu_(1491) b/i],[c,[g,"Rotor"],[f,b]],[/(shield[\w ]+) b/i],[c,[g,"Nvidia"],[f,b]],[/(sprint) (\w+)/i],[g,c,[f,v]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[g,M],[f,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[g,B],[f,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[g,B],[f,v]],[/smart-tv.+(samsung)/i],[g,[f,E]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[g,O],[f,E]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,L],[f,E]],[/(apple) ?tv/i],[g,[c,A+" TV"],[f,E]],[/crkey/i],[[c,R+"cast"],[g,C],[f,E]],[/droid.+aft(\w+)( bui|\))/i],[c,[g,w],[f,E]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[g,F],[f,E]],[/(bravia[\w ]+)( bui|\))/i],[c,[g,U],[f,E]],[/(mitv-\w{5}) bui/i],[c,[g,z],[f,E]],[/Hbbtv.*(technisat) (.*);/i],[g,c,[f,E]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,$],[c,$],[f,E]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,c,[f,y]],[/droid.+; (shield) bui/i],[c,[g,"Nvidia"],[f,y]],[/(playstation [345portablevi]+)/i],[c,[g,U],[f,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[g,M],[f,y]],[/((pebble))app/i],[g,c,[f,T]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[g,A],[f,T]],[/droid.+; (glass) \d/i],[c,[g,C],[f,T]],[/droid.+; (wt63?0{2,3})\)/i],[c,[g,B],[f,T]],[/(quest( \d| pro)?)/i],[c,[g,j],[f,T]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[f,S]],[/(aeobc)\b/i],[c,[g,w],[f,S]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[f,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[f,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,v]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[p,W,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,W,X],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,G],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,p],[/\(bb(10);/i],[p,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[h,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[h,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,q],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,p],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,p]]},J=function(e,t){if(typeof e===l&&(t=e,e=a),!(this instanceof J))return new J(e,t).getResult();var n=typeof i!==o&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),y=n&&n.userAgentData?n.userAgentData:a,E=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(Q,t):Q,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[h]=a,t[p]=a,Y.call(t,r,E.browser),t[d]=typeof(e=t[p])===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==s&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[m]=a,Y.call(e,r,E.cpu),e},this.getDevice=function(){var e={};return e[g]=a,e[c]=a,e[f]=a,Y.call(e,r,E.device),T&&!e[f]&&y&&y.mobile&&(e[f]=v),T&&"Macintosh"==e[c]&&n&&typeof n.standalone!==o&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[c]="iPad",e[f]=b),e},this.getEngine=function(){var e={};return e[h]=a,e[p]=a,Y.call(e,r,E.engine),e},this.getOS=function(){var e={};return e[h]=a,e[p]=a,Y.call(e,r,E.os),T&&!e[h]&&y&&y.platform&&"Unknown"!=y.platform&&(e[h]=y.platform.replace(/chrome os/i,q).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>500?$(e,500):e,this},this.setUA(r),this};J.VERSION="1.0.38",J.BROWSER=H([h,p,d]),J.CPU=H([m]),J.DEVICE=H([c,g,f,y,v,E,b,T,S]),J.ENGINE=J.OS=H([h,p]),typeof t!==o?(e.exports&&(t=e.exports=J),t.UAParser=J):n.amdO?(r=function(){return J}.call(t,n,t,e))===a||(e.exports=r):typeof i!==o&&(i.UAParser=J);var Z=typeof i!==o&&(i.jQuery||i.Zepto);if(Z&&!Z.ua){var ee=new J;Z.ua=ee.getResult(),Z.ua.get=function(){return ee.getUA()},Z.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Z.ua[n]=t[n]}}}("object"==typeof window?window:this)},9e3:function(e,t,n){function r(e){try{if(!n.g.localStorage)return!1}catch(r){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation"),n=!0}return e.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(e,t,n){n.r(t),n.d(t,{Debug:function(){return a.default},FactoryMaker:function(){return i.default},MediaPlayer:function(){return r.default}});var r=n(255),i=n(138),a=n(649),s=n(8986),o="undefined"!=typeof window&&window||global,l=o.dashjs;l||(l=o.dashjs={}),l.MediaPlayer=r.default,l.FactoryMaker=i.default,l.Debug=a.default,l.Version=(0,s.getVersionString)(),t.default=l},649:function(e,t,n){n.r(t);var r=n(8850),i=n(3621),a=n(138);function s(e){e=e||{};const t=this.context,n=(0,r.default)(t).getInstance(),a=e.settings,s=[];let o,l,u,d;function c(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function h(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(1,this,...t)}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(2,this,...t)}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(3,this,...t)}function p(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(4,this,...t)}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];y(5,this,...t)}function y(e,t){let r="",o=null;l&&(o=(new Date).getTime(),r+="["+(o-d)+"]"),u&&t&&t.getClassName&&(r+="["+t.getClassName()+"]",t.getType&&(r+="["+t.getType()+"]")),r.length>0&&(r+=" ");for(var c=arguments.length,h=new Array(c>2?c-2:0),f=2;f<c;f++)h[f-2]=arguments[f];Array.apply(null,h).forEach(function(e){r+=e+" "}),s[e]&&a&&a.get().debug.logLevel>=e&&s[e](r),a&&a.get().debug.dispatchEvent&&n.trigger(i.default.LOG,{message:r,level:e})}return o={getLogger:function(e){return{fatal:h.bind(e),error:f.bind(e),warn:g.bind(e),info:p.bind(e),debug:m.bind(e)}},setLogTimestampVisible:function(e){l=e},setCalleeNameVisible:function(e){u=e}},l=!0,u=!0,d=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(s[1]=c(window.console.error),s[2]=c(window.console.error),s[3]=c(window.console.warn),s[4]=c(window.console.info),s[5]=c(window.console.debug)),o}s.__dashjs_factory_name="Debug";const o=a.default.getSingletonFactory(s);o.LOG_LEVEL_NONE=0,o.LOG_LEVEL_FATAL=1,o.LOG_LEVEL_ERROR=2,o.LOG_LEVEL_WARNING=3,o.LOG_LEVEL_INFO=4,o.LOG_LEVEL_DEBUG=5,a.default.updateSingletonFactory(s.__dashjs_factory_name,o),t.default=o},8850:function(e,t,n){n.r(t);var r=n(138),i=n(1191);function a(){let e={};function t(t,n,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!t)throw new Error("event type cannot be null or undefined");if(!n||"function"!=typeof n)throw new Error("listener must be a function: "+n);let o=a.priority||0;if(r(t,n,i)>=0)return;e[t]=e[t]||[];const l={callback:n,scope:i,priority:o,executeOnlyOnce:s};i&&i.getStreamId&&(l.streamId=i.getStreamId()),i&&i.getType&&(l.mediaType=i.getType()),a&&a.mode&&(l.mode=a.mode),e[t].some((n,r)=>{if(n&&o>n.priority)return e[t].splice(r,0,l),!0})||e[t].push(l)}function n(t,n,i){if(!t||!n||!e[t])return;const a=r(t,n,i);a<0||(e[t][a]=null)}function r(t,n,r){let i=-1;return e[t]?(e[t].some((e,t)=>{if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i):i}const a={on:function(e,n,r){t(e,n,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})},once:function(e,n,r){t(e,n,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},!0)},off:n,trigger:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e[t])return;if(r=r||{},r.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");r.type=t,a.streamId&&(r.streamId=a.streamId),a.mediaType&&(r.mediaType=a.mediaType);const s=[];e[t].filter(e=>!(!e||a.streamId&&e.streamId&&e.streamId!==a.streamId||a.mediaType&&e.mediaType&&e.mediaType!==a.mediaType||a.mode&&e.mode&&e.mode!==a.mode||!e.mode&&a.mode&&a.mode===i.default.EVENT_MODE_ON_RECEIVE)).forEach(e=>{e&&e.callback.call(e.scope,r),e.executeOnlyOnce&&s.push(e)}),s.forEach(e=>{n(t,e.callback,e.scope)})},reset:function(){e={}}};return a}a.__dashjs_factory_name="EventBus";const s=r.default.getSingletonFactory(a);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(a.__dashjs_factory_name,s),t.default=s},138:function(e,t,n){n.r(t);const r=function(){let e,t=[];const n={},r={};function i(e,n){for(const r in t){const i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,t){return t[e]}function s(e,t,n){e in n&&(n[e]=t)}function o(t,n,r){let i;const a=t.__dashjs_factory_name,s=n[a];if(s){let a=s.instance;if(!s.override)return a.apply({context:n,factory:e},r);i=t.apply({context:n},r),a=a.apply({context:n,factory:e,parent:i},r);for(const e in a)i.hasOwnProperty(e)&&(i[e]=a[e])}else i=t.apply({context:n},r);return i.getClassName=function(){return a},i}return e={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,n,r){for(const i in t){const a=t[i];if(a.context===e&&a.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})},deleteSingletonInstances:function(e){t=t.filter(t=>t.context!==e)},getSingletonFactory:function(e){let r=a(e.__dashjs_factory_name,n);return r||(r=function(n){let r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,e.__dashjs_factory_name)),r||(r=o(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(e){return a(e,n)},updateSingletonFactory:function(e,t){s(e,t,n)},getClassFactory:function(e){let t=a(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return o(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return a(e,r)},updateClassFactory:function(e,t){s(e,t,r)}},e}();t.default=r},8261:function(e,t,n){n.r(t);var r=n(138),i=n(7263),a=n(649),s=n(5212),o=n(7568),l=n(8850),u=n(3621);function d(){let e;const t=this.context,n=(0,l.default)(t).getInstance(),r={"streaming.delay.liveDelay":u.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":u.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":u.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":u.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":u.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":u.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":u.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":u.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":u.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":u.default.SETTING_UPDATED_MIN_BITRATE},d={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:s.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:s.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:s.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:s.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:s.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:s.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...s.default.THUMBNAILS_SCHEME_ID_URIS.map(e=>({schemeIdUri:e}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:s.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:s.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:s.default.TRACK_SWITCH_MODE_NEVER_REPLACE},ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:s.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[o.HTTPRequest.MPD_TYPE]:500,[o.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[o.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[o.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[o.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[o.HTTPRequest.LICENSE]:1e3,[o.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[o.HTTPRequest.MPD_TYPE]:3,[o.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[o.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[o.HTTPRequest.INIT_SEGMENT_TYPE]:3,[o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[o.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[o.HTTPRequest.LICENSE]:3,[o.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:s.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:s.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:s.default.CMCD_MODE_QUERY,enabledKeys:s.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let c=i.default.clone(d);function h(e,t,a){for(let s in e)e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&("object"!=typeof e[s]||e[s]instanceof RegExp||e[s]instanceof Array||null===e[s]?(t[s]=i.default.clone(e[s]),r[a+s]&&n.trigger(r[a+s])):h(e[s],t[s],a.slice()+s+"."))}return e={get:function(){return c},update:function(e){"object"==typeof e&&h(e,c,"")},reset:function(){c=i.default.clone(d)}},e}d.__dashjs_factory_name="Settings";let c=r.default.getSingletonFactory(d);t.default=c},7263:function(e,t,n){n.r(t);var r=n(3282),i=n(8571),a=n(5212);class s{static mixin(e,t,n){let r,i={};if(e)for(let a in t)t.hasOwnProperty(a)&&(r=t[a],a in e&&(e[a]===r||a in i&&i[a]===r)||("object"==typeof e[a]&&null!==e[a]?e[a]=s.mixin(e[a],r,n):e[a]=n(r)));return e}static clone(e){if(!e||"object"!=typeof e)return e;if(e instanceof RegExp)return new RegExp(e);let t;if(e instanceof Array){t=[];for(let n=0,r=e.length;n<r;++n)n in e&&t.push(s.clone(e[n]))}else t={};return s.mixin(t,e,s.clone)}static addAdditionalQueryParameterToUrl(e,t){try{if(!t||0===t.length)return e;let n=e;return t.forEach(e=>{let{key:t,value:r}=e;const i=n.includes("?")?"&":"?";n+=`${i}${encodeURIComponent(t)}=${encodeURIComponent(r)}`}),n}catch(n){return e}}static removeQueryParameterFromUrl(e,t){if(!e||!t)return e;const n=new URL(e),r=new URLSearchParams(n.search);if(!r||0===r.size||!r.has(t))return e;r.delete(t);const i=Array.from(r.entries()).map(e=>{let[t,n]=e;return`${t}=${n}`}).join("&"),a=`${n.origin}${n.pathname}`;return i?`${a}?${i}`:a}static parseHttpHeaders(e){let t={};if(!e)return t;let n=e.trim().split("\r\n");for(let r=0,i=n.length;r<i;r++){let e=n[r],i=e.indexOf(": ");i>0&&(t[e.substring(0,i)]=e.substring(i+2))}return t}static parseQueryParams(e){const t=[],n=new URLSearchParams(e);for(const[r,i]of n.entries())t.push({key:decodeURIComponent(r),value:decodeURIComponent(i)});return t}static generateUuid(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}static generateHashCode(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}static getRelativeUrl(e,t){try{const n=new URL(e),i=new URL(t);if(n.protocol=i.protocol,n.origin!==i.origin)return t;let a=r.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),i.pathname.substr(0,i.pathname.lastIndexOf("/")));const s=0===a.length?1:0;return a+=i.pathname.substr(i.pathname.lastIndexOf("/")+s,i.pathname.length-1),i.pathname.length<a.length?i.pathname:a}catch(n){return t}}static getHostFromUrl(e){try{return new URL(e).host}catch(t){return null}}static parseUserAgent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=null===e&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return(0,i.UAParser)(t)}catch(t){return{}}}static stringHasProtocol(e){return/(http(s?)):\/\//i.test(e)}static bufferSourceToDataView(e){return s.toDataView(e,DataView)}static bufferSourceToInt8(e){return s.toDataView(e,Uint8Array)}static uint8ArrayToString(e){return new TextDecoder("utf-8").decode(e)}static bufferSourceToHex(e){const t=s.bufferSourceToInt8(e);let n="";for(let r of t)r=r.toString(16),1===r.length&&(r="0"+r),n+=r;return n}static toDataView(e,t){const n=s.getArrayBuffer(e);let r=1;"BYTES_PER_ELEMENT"in DataView&&(r=DataView.BYTES_PER_ELEMENT);const i=((e.byteOffset||0)+e.byteLength)/r,a=(e.byteOffset||0)/r,o=Math.floor(Math.max(0,Math.min(a,i)));return new t(n,o,Math.floor(Math.min(o+Math.max(1/0,0),i))-o)}static getArrayBuffer(e){return e instanceof ArrayBuffer?e:e.buffer}static getCodecFamily(e){const{base:t,profile:n}=s._getCodecParts(e);switch(t){case"mp4a":switch(n){case"69":case"6b":case"40.34":return a.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return a.default.CODEC_FAMILIES.AAC;case"a5":return a.default.CODEC_FAMILIES.AC3;case"e6":return a.default.CODEC_FAMILIES.EC3;case"b2":return a.default.CODEC_FAMILIES.DTSX;case"a9":return a.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return a.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return a.default.CODEC_FAMILIES.HEVC;default:return t}return t}static _getCodecParts(e){const[t,...n]=e.split(".");return{base:t,profile:n.join(".")}}}t.default=s},8986:function(e,t,n){n.r(t),n.d(t,{getVersionString:function(){return i}});const r="5.0.3";function i(){return r}},8748:function(e,t,n){n.r(t),t.default=class{extend(e,t){if(!e)return;let n=!!t&&t.override,r=!!t&&t.publicOnly;for(const i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}},5734:function(e,t,n){n.r(t);var r=n(7252);class i extends r.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}t.default=i},3621:function(e,t,n){n.r(t);var r=n(5734);class i extends r.default{}let a=new i;t.default=a},7252:function(e,t,n){n.r(t),t.default=class{extend(e,t){if(!e)return;let n=!!t&&t.override,r=!!t&&t.publicOnly;for(const i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}},8854:function(e,t,n){n.r(t),t.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(e,t,n){n.r(t),t.default=class{constructor(){this.schemeIdUri="",this.value=""}}},255:function(e,t,n){n.r(t),n.d(t,{default:function(){return $o}});class r{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){"function"==typeof t&&t()}}}class i{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const r=t[n];Object.prototype.hasOwnProperty.call(e,r)&&(this[r]=e[r])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}}class o{constructor(){this.uchar=" ",this.penState=new i}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}const l=100,u={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},d=function(e){return String.fromCharCode(u[e]||e)};class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new i;for(let t=0;t<l;t++)this.chars.push(new o);this.logger=e}equals(e){for(let t=0;t<l;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<l;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=l)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=d(e);this.pos>=l?this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(e){let t;for(t=e;t<l;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<l;n++){const r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}const h=15;class f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let t=0;t<h;t++)this.rows.push(new c(e));this.logger=e}reset(){for(let e=0;e<h;e++)this.rows[e].clear();this.currRow=14}equals(e){let t=!0;for(let n=0;n<h;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<h;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<h;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let t=0;t<h;t++)this.rows[t].clear();const e=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){const r=n.rows[e].cueStartTime,i=this.logger.time;if(null!==r&&null!==i&&r<i)for(let a=0;a<this.nrRollUpRows;a++)this.rows[t-this.nrRollUpRows+a+1].copy(n.rows[e+a])}}this.currRow=t;const n=this.rows[this.currRow];if(null!==e.indent){const t=e.indent,r=Math.max(t-1,0);n.setCursor(e.indent),e.color=n.chars[r].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",r=-1;for(let i=0;i<h;i++){const n=this.rows[i].getTextString();n&&(r=i+1,e?t.push("Row "+r+": '"+n+"'"):t.push(n.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n}getTextAndFormat(){return this.rows}}class g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new r;this.chNr=e,this.outputFilter=t,this.mode=null,this.displayedMemory=new f(n),this.nonDisplayedMemory=new f(n),this.lastOutputScreen=new f(n),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var e,t;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),null===(t=null===(e=this.outputFilter)||void 0===e?void 0:e.reset)||void 0===t||t.call(e),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=r[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}const p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function m(e,t,n){return n.a===e&&n.b===t}const y=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t},v={17:2,18:4,21:6,22:8,23:10,19:13,20:15},b={25:2,26:4,29:6,30:8,31:10,27:13,28:15},E={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},T={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function S(e,t,n){n.a=e,n.b=t}class w{constructor(e,t,n){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const i=this.logger=new r;this.channels=[null,new g(e,t,i),new g(e+1,n,i)]}addData(e,t){this.lastTime=e,this.logger.time=e;for(let n=0;n<t.length;n+=2){const r=127&t[n],i=127&t[n+1];let a=!1,s=null;if(null!==this.lastTime&&(e=this.lastTime+.5*n*1001/3e4,this.logger.time=e),0===r&&0===i)continue;this.logger.log(3,()=>"["+y([t[n],t[n+1]])+"] -> ("+y([r,i])+")");const o=this.cmdHistory;if(r>=16&&r<=31){if(m(r,i,o)){S(null,null,o),this.logger.log(3,()=>"Repeated command ("+y([r,i])+") is dropped");continue}S(r,i,this.cmdHistory),a=this.parseCmd(r,i),a||(a=this.parseMidrow(r,i)),a||(a=this.parsePAC(r,i)),a||(a=this.parseBackgroundAttributes(r,i))}else S(null,null,o);if(!a&&(s=this.parseChars(r,i),s.length)){const e=this.currentChannel;e&&e>0?this.channels[e].insertChars(s):this.logger.log(2,"No channel found yet. TEXT-MODE?")}a||s||this.logger.log(2,()=>"Couldn't parse cleaned data "+y([r,i])+" orig: "+y([t[n],t[n+1]]))}}parseCmd(e,t){if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;const n=20===e||21===e||23===e?1:2,r=this.channels[n];return 20===e||21===e||28===e||29===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.currentChannel=n,!0}parseMidrow(e,t){let n=0;if((17===e||25===e)&&t>=32&&t<=47){if(n=17===e?1:2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+y([e,t])+")"),!0)}return!1}parsePAC(e,t){let n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;const r=e<=23?1:2;n=t>=64&&t<=95?1===r?E[e]:T[e]:1===r?v[e]:b[e];const i=this.channels[r];return!!i&&(i.setPAC(this.interpretPAC(n,t)),this.currentChannel=r,!0)}interpretPAC(e,t){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=!(1&~n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r}parseChars(e,t){let n,r=[],i=null;if(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19){let e;e=17===i?t+80:18===i?t+112:t+144,this.logger.log(2,()=>"Special char '"+d(e)+"' in channel "+n),r=[e]}else e>=32&&e<=127&&(r=0===t?[e]:[e,t]);return r&&this.logger.log(3,()=>"Char codes =  "+y(r).join(",")),r}parseBackgroundAttributes(e,t){if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;let n;const r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=p[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));const i=e<=23?1:2;return this.channels[i].setBkgData(r),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}S(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}var A=n(5212),I=n(8854),k={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},_=n(8850),R=n(3621),x=n(138),C=n(649),D=n(1191);function L(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v,b,E,T,S,w,I,x,L;function M(){F(),p=!1,c=0,h=0,v=0,I=!1,b=!0,E=!1,x=!1,T=NaN,y=NaN,l&&(t.off(R.default.DATA_UPDATE_COMPLETED,Q,n),t.off(R.default.MANIFEST_UPDATED,Ee,n),t.off(R.default.STREAMS_COMPOSED,Te,n),t.off(D.default.PLAYBACK_ENDED,ge,n),t.off(D.default.STREAM_INITIALIZING,ve,n),t.off(D.default.REPRESENTATION_SWITCH,be,n),t.off(D.default.BUFFER_LEVEL_STATE_CHANGED,ee,n),X(),l.removeEventListener("canplay",J),l.removeEventListener("canplaythrough",Z),l.removeEventListener("play",te),l.removeEventListener("waiting",ne),l.removeEventListener("playing",re),l.removeEventListener("pause",ie),l.removeEventListener("error",pe),l.removeEventListener("seeking",ae),l.removeEventListener("seeked",se),l.removeEventListener("timeupdate",oe),l.removeEventListener("progress",le),l.removeEventListener("ratechange",ue),l.removeEventListener("loadedmetadata",de),l.removeEventListener("loadeddata",ce),l.removeEventListener("stalled",ye),l.removeEventListener("ended",he),l.removeEventListener("volumechange",fe)),d=null,l=null,f=null,g=null}function N(){return parseFloat((P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-j()).toFixed(5))}function P(e){const t=e||f;return t.start+t.duration}function O(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];f&&l&&l.getElement()?(e&&g&&B(j()),l.play()):p=!0}function F(){f&&l&&l.pause()}function U(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];f&&l&&l.getElement()&&e!==(isNaN(T)?l.getTime():T)&&(S=!0===n,S||(T=e),r.info("Requesting seek to time: "+e+(S?" (internal)":"")),g&&i&&B(e),l.setCurrentTime(e,t))}function z(){if(!f||!l||!g)return;const e=i&&i.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO,t=s.getCurrentDVRInfo(e);return t&&t.range?t.range.end:0}function B(e){const t=new Date(u.getClientReferenceTime()),n=o.getRegularPeriods()[0],r=u.calcPresentationTimeFromWallTime(t,n);c=r-e}function j(){return f&&l?l.getTime():null}function q(){return f&&l?l.isPaused():null}function G(){return f&&l?l.isSeeking():null}function H(){return f&&l?l.isStalled():null}function V(){return f&&l?l.getPlaybackRate():null}function K(){return f&&l?l.getEnded():null}function $(){return g}function Y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(q()||!g||0===l.getReadyState()||G()||I)return;e||(e=i.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO);const t=j(),n=function(e,t){const n=s.getCurrentDVRInfo(t),r=n?n.range:null;let i;return r?(i=e>r.end?Math.max(r.end-c,r.start):e>0&&e+.25<r.start&&Math.abs(e-r.start)<31536e4?E?Math.max(r.end-c,r.start):r.start:e,i):NaN}(t,e);!isNaN(n)&&n!==t&&!G()&&(H()||w||1===l.getReadyState())&&(r.debug(`UpdateCurrentTime: Seek to actual time: ${n} from currentTime: ${t}`),U(n,!1,!1))}function W(){null===d&&(d=setInterval(()=>{!function(){if(t.trigger(R.default.WALLCLOCK_TIME_UPDATED,{isDynamic:g,time:new Date}),$()){const e=Date.now();(isNaN(y)||e>y+L.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(i.addDVRMetric(),q()?function(){const e=Date.now();(!m||e>m+500)&&(m=e,oe())}():Y(),y=e)}}()},L.get().streaming.wallclockTimeUpdateInterval))}function X(){clearInterval(d),d=null}function Q(e){const t=e.currentRepresentation,n=t?t.mediaInfo.streamInfo:null;null!==n&&f.id===n.id&&(f=n)}function J(){t.trigger(R.default.CAN_PLAY)}function Z(){t.trigger(R.default.CAN_PLAY_THROUGH)}function ee(e){e.streamId===i.getActiveStreamInfo().id&&(w=e.state===k.BUFFER_EMPTY,L.get().streaming.buffer.setStallState&&l.setStallState(e.mediaType,e.state===k.BUFFER_EMPTY))}function te(){r.info("Native video element event: play"),Y(),W(),t.trigger(R.default.PLAYBACK_STARTED,{startTime:j()})}function ne(){r.info("Native video element event: waiting"),t.trigger(R.default.PLAYBACK_WAITING,{playingTime:j()})}function re(){r.info("Native video element event: playing"),S=!1,t.trigger(R.default.PLAYBACK_PLAYING,{playingTime:j()})}function ie(){r.info("Native video element event: pause"),t.trigger(R.default.PLAYBACK_PAUSED,{ended:K()})}function ae(){if(S)return;let e=j();isNaN(T)||T===e||(e=T),T=NaN,r.info("Seeking to: "+e),W(),t.trigger(R.default.PLAYBACK_SEEKING,{seekTime:e,streamId:f.id})}function se(){r.info("Native video element event: seeked"),S=!1,t.trigger(R.default.PLAYBACK_SEEKED)}function oe(){f&&t.trigger(R.default.PLAYBACK_TIME_UPDATED,{timeToEnd:N(),time:j(),streamId:f.id})}function le(){t.trigger(R.default.PLAYBACK_PROGRESS,{streamId:f.id})}function ue(){const e=V();r.info("Native video element event: ratechange: ",e),t.trigger(R.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function de(){r.info("Native video element event: loadedmetadata"),t.trigger(R.default.PLAYBACK_METADATA_LOADED),W()}function ce(){r.info("Native video element event: loadeddata"),t.trigger(R.default.PLAYBACK_LOADED_DATA)}function he(){r.info("Native video element event: ended"),F(),X();const e=i?i.getActiveStreamInfo():null;e&&t.trigger(R.default.PLAYBACK_ENDED,{isLast:e.isLast})}function fe(){t.trigger(R.default.PLAYBACK_VOLUME_CHANGED)}function ge(e){if(d&&e.isLast){r.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const t=e.seekTime?e.seekTime:P();l.setCurrentTime(t),F(),X()}}function pe(e){const n=e.target||e.srcElement;t.trigger(R.default.PLAYBACK_ERROR,{error:n.error})}function me(){g=!1}function ye(e){t.trigger(R.default.PLAYBACK_STALLED,{e:e})}function ve(e){var t;(t=e.mediaInfo)&&t.supplementalProperties&&t.supplementalProperties.find(e=>e.schemeIdUri===A.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(r.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),E=!0)}function be(e){const t=i.getActiveStreamInfo();e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===A.default.VIDEO||e.mediaType===A.default.AUDIO)&&(b=e.currentRepresentation.availabilityTimeComplete,E=!b,E&&!x&&(x=!0))}function Ee(){I=!0}function Te(){I=!1}return n={computeAndSetLiveDelay:function(e,t){let n,r,i;const s=!isNaN(e)&&isFinite(e)?e:NaN;let l=o.getSuggestedPresentationDelay();const u=a.getServiceDescriptionSettings();return n=isNaN(L.get().streaming.delay.liveDelay)?null===L.get().streaming.delay.liveDelayFragmentCount||isNaN(L.get().streaming.delay.liveDelayFragmentCount)||isNaN(s)?u&&!isNaN(u.liveDelay)&&u.liveDelay>0?u.liveDelay:!0===L.get().streaming.delay.useSuggestedPresentationDelay&&null!==l&&!isNaN(l)&&l>0?l:isNaN(s)?t&&!isNaN(t.minBufferTime)?4*t.minBufferTime:4*f.manifestInfo.minBufferTime:4*s:s*L.get().streaming.delay.liveDelayFragmentCount:L.get().streaming.delay.liveDelay,i=o.getAvailabilityStartTime(),null!==i&&(v=i),r=t&&t.dvrWindowSize>0?Math.min(n,t.dvrWindowSize):n,c=r,h=r,r},getAvailabilityStartTime:function(){return v},getBufferLevel:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;return i.getActiveStreamProcessors().forEach(n=>{if(!e||0===e.length||-1===e.indexOf(n.getType())){const e=n.getBufferLevel();t=null===t?e:Math.min(t,e)}}),t},getCurrentLiveLatency:function(){if(!g||isNaN(v))return NaN;let e=j();if(isNaN(e)||0===e)return 0;const t=(new Date).getTime()+1e3*u.getClientTimeOffset();return Math.max(((t-v-1e3*e)/1e3).toFixed(3),0)},getEnded:K,getInitialCatchupModeActivated:function(){return x},getIsDynamic:$,getIsManifestUpdateInProgress:function(){return I},getLiveDelay:function(){return c},getLowLatencyModeEnabled:function(){return E},getOriginalLiveDelay:function(){return h},getPlaybackRate:V,getPlaybackStalled:function(){return w},getPlayedRanges:function(){return f&&l?l.getPlayedRanges():null},getStreamController:function(){return i},getStreamEndTime:P,getTime:j,getTimeToStreamEnd:N,initialize:function(e,r){f=e,!0!==r&&(l.addEventListener("canplay",J),l.addEventListener("canplaythrough",Z),l.addEventListener("play",te),l.addEventListener("waiting",ne),l.addEventListener("playing",re),l.addEventListener("pause",ie),l.addEventListener("error",pe),l.addEventListener("seeking",ae),l.addEventListener("seeked",se),l.addEventListener("timeupdate",oe),l.addEventListener("progress",le),l.addEventListener("ratechange",ue),l.addEventListener("loadedmetadata",de),l.addEventListener("loadeddata",ce),l.addEventListener("stalled",ye),l.addEventListener("ended",he),l.addEventListener("volumechange",fe),g=f.manifestInfo.isDynamic,w=!1,S=!1,t.on(R.default.DATA_UPDATE_COMPLETED,Q,n),t.on(R.default.MANIFEST_UPDATED,Ee,n),t.on(R.default.STREAMS_COMPOSED,Te,n),t.on(D.default.PLAYBACK_ENDED,ge,n,{priority:_.default.EVENT_PRIORITY_HIGH}),t.on(D.default.STREAM_INITIALIZING,ve,n),t.on(D.default.REPRESENTATION_SWITCH,be,n),t.on(D.default.BUFFER_LEVEL_STATE_CHANGED,ee,n),t.on(D.default.DYNAMIC_TO_STATIC,me,n),p&&(p=!1,O()))},isPaused:q,isProgressing:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(r=>{let i=-1,a=null;const s=e=>{clearTimeout(a),a=null,t.off(D.default.PLAYBACK_TIME_UPDATED,o,n),r(e)},o=e=>{i<0?i=e.time:e.time>i+.1&&s(!0)};a=setTimeout(()=>{s(!1)},e),t.on(D.default.PLAYBACK_TIME_UPDATED,o,n)})},isSeeking:G,isStalled:H,pause:F,play:O,reset:M,seek:U,seekToCurrentLive:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=z();0!==r&&U(r-c,e,t,n)},seekToOriginalLive:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=z();0!==r&&(c=h,U(r-c,e,t,n))},setConfig:function(e){e&&(e.streamController&&(i=e.streamController),e.serviceDescriptionController&&(a=e.serviceDescriptionController),e.dashMetrics&&(s=e.dashMetrics),e.adapter&&(o=e.adapter),e.videoModel&&(l=e.videoModel),e.timelineConverter&&(u=e.timelineConverter),e.settings&&(L=e.settings))},updateCurrentTime:Y},r=(0,C.default)(e).getInstance().getLogger(n),M(),n}L.__dashjs_factory_name="PlaybackController";var M=x.default.getSingletonFactory(L),N=n(7568);class P{constructor(e){this.action=P.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=e||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===N.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(e){this.type=e&&e.init?N.HTTPRequest.INIT_SEGMENT_TYPE:N.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null,this.representation=e&&e.representation?e.representation:null}}P.ACTION_DOWNLOAD="download",P.ACTION_COMPLETE="complete";var O=P;const F="loading",U="executed",z="failed";function B(e){const t=(e=e||{}).eventBus,n=e.events,r=e.dashMetrics,i=e.fragmentLoader,a=e.debug,s=e.streamInfo,o=e.type;let l,u,d,c;function h(e){return!!e&&function(t){let n=!1;return t.some(t=>{if(i=e,a=t,!isNaN(i.index)&&i.startTime===a.startTime&&i.adaptationIndex===a.adaptationIndex&&i.type===a.type||(r=t,e.representation.id===r.representation.id)||function(e,t){return e.action===O.ACTION_COMPLETE&&e.action===t.action}(e,t))return n=!0,n;var r,i,a}),n}(d)}function f(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function g(e){d=d.filter(t=>{const n=f(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n})}function p(e,t){t<=e+.5||(d=d.filter(n=>{const r=f(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r}))}function m(e,t,n){for(let r=e.length-1;r>=0;r--){const i=e[r],a=i.startTime,s=a+i.duration;if(n=isNaN(n)?f(i):n,!isNaN(a)&&!isNaN(s)&&t+n>=a&&t-n<s||isNaN(a)&&isNaN(t))return i}return null}function y(e,t){r.addSchedulingInfo(e,t),r.addRequestsQueue(e.mediaType,c,d)}function v(e){e.sender===i&&(c.splice(c.indexOf(e.request),1),e.response&&!e.error&&d.push(e.request),y(e.request,e.error?z:U),t.trigger(n.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:s.id,mediaType:o}))}function b(e){e.sender===i&&t.trigger(n.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:s.id,mediaType:o})}function E(e){e.sender===i&&t.trigger(n.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:s.id,mediaType:o})}function T(){d=[],c=[],i&&i.resetInitialSettings()}return l={abortRequests:function(){u.debug("abort requests"),i.abort(),c=[]},executeRequest:function(e){var r;e.action===O.ACTION_DOWNLOAD?(y(e,F),c.push(e),r=e,t.trigger(n.FRAGMENT_LOADING_STARTED,{request:r},{streamId:s.id,mediaType:o}),i.load(r)):u.warn("Unknown request action.")},getRequests:function(e){const t=e?e.state instanceof Array?e.state:[e.state]:[];let n=[];return t.forEach(t=>{const r=function(e){let t;switch(e){case F:t=c;break;case U:t=d;break;default:t=[]}return t}(t);var i,a;n=n.concat((i=r,(a=e).hasOwnProperty("time")?[m(i,a.time,a.threshold)]:i.filter(e=>{for(const t in a)if("state"!==t&&a.hasOwnProperty(t)&&e[t]!=a[t])return!1;return!0})))}),n},getStreamId:function(){return s.id},getType:function(){return o},isFragmentLoaded:h,isFragmentLoadedOrPending:function(e){let t,n=!1,r=0;if(n=h(e),!n)for(r=0;r<c.length;r++)t=c[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsAfterTime:function(e){d=d.filter(t=>isNaN(t.startTime)||void 0!==e&&t.startTime<e)},removeExecutedRequestsBeforeTime:g,reset:function(){t.off(n.LOADING_COMPLETED,v,this),t.off(n.LOADING_DATA_PROGRESS,b,this),t.off(n.LOADING_ABANDONED,E,this),i&&i.reset(),T()},resetInitialSettings:T,syncExecutedRequestsWithBufferedRange:function(e,t){if(!e||0===e.length)return void g();let n=0;for(let r=0,i=e.length;r<i;r++)p(n,e.start(r)),n=e.end(r);t>0&&p(n,t)}},u=a.getLogger(l),T(),t.on(n.LOADING_COMPLETED,v,l),t.on(n.LOADING_DATA_PROGRESS,b,l),t.on(n.LOADING_ABANDONED,E,l),l}B.__dashjs_factory_name="FragmentModel";const j=x.default.getClassFactory(B);j.FRAGMENT_MODEL_LOADING=F,j.FRAGMENT_MODEL_EXECUTED=U,j.FRAGMENT_MODEL_CANCELED="canceled",j.FRAGMENT_MODEL_FAILED=z,x.default.updateClassFactory(B.__dashjs_factory_name,j);var q=j,G=n(1944),H=n(8748);class V extends H.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var K=new V,$=n(8261);function Y(e){const t=this.context,n=(0,$.default)(t).getInstance(),r=e.textController,i=e.eventBus;let a,s,o,l,u,d,c=[],h=[],f=!1,g=e.mediaSource,p=null;function m(e){return e.mimeType+';codecs="'+e.codecs+'"'}function y(e){return l=r.getTextSourceBuffer(e),Promise.resolve()}function v(){if("function"==typeof l.addEventListener)try{l.addEventListener("updateend",I,!1),l.addEventListener("error",k,!1),l.addEventListener("abort",k,!1)}catch(e){d=setInterval(I,50)}else d=setInterval(I,50)}function b(){try{"function"==typeof l.removeEventListener&&(l.removeEventListener("updateend",I,!1),l.removeEventListener("error",k,!1),l.removeEventListener("abort",k,!1)),clearInterval(d)}catch(e){o.error(e)}}function E(e){return new Promise(t=>{l&&n.get().streaming.buffer.useAppendWindow?_(()=>{try{if(!l)return void t();let n=g.duration,r=0;e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(n=e.start+e.duration),e&&!isNaN(e.start)&&(r=e.start),l.appendWindowEnd===n&&l.appendWindowStart===r||(l.appendWindowStart=0,l.appendWindowEnd=n+.01,l.appendWindowStart=Math.max(r-.1,0),o.debug(`Updated append window for ${u.type}. Set start to ${l.appendWindowStart} and end to ${l.appendWindowEnd}`)),t()}catch(n){o.warn("Failed to set append window"),t()}}):t()})}function T(e){return new Promise(t=>{l?_(()=>{try{l.timestampOffset===e||isNaN(e)||(l.timestampOffset=e,o.debug(`Set MSE timestamp offset to ${e}`)),t()}catch(n){t()}}):t()})}function S(){if(!f&&h.length>0){f=!0;const n=h[0];h.splice(0,1);const r=function(){f=!1,h.length>0&&S.call(this),n&&n.data&&n.data.segmentType&&n.data.segmentType!==N.HTTPRequest.INIT_SEGMENT_TYPE&&delete n.data.bytes,n.promise.resolve({chunk:n.data})};try{if(p=n.request,0===n.data.bytes.byteLength)r.call(this);else{try{o.debug(`Appending ${n.data.segmentType} from period ${n.data.streamId} to buffer. Request URL: ${n.request.url}, Representation: ID: ${n.data.representation.id}, bitrate: ${n.data.representation.bitrateInKbit}`)}catch(e){}l.appendBuffer?l.appendBuffer(n.data.bytes):l.append(n.data.bytes,n.data),_(r.bind(this))}}catch(t){o.fatal('SourceBuffer append failed "'+t+'"'),h.length>0?S():f=!1,delete n.data.bytes,n.promise.reject({chunk:n.data,error:new G.default(t.code,t.message)})}}}function w(){c.length>0&&!l.updating&&(c.shift()(),w())}function I(){l.updating||w()}function k(e){const t=e.target||{};!function(e,t){let n=t||{};i.trigger(e,n,{streamId:u.streamInfo.id,mediaType:s})}(R.default.SOURCE_BUFFER_ERROR,{error:t,lastRequestAppended:p})}function _(e){try{c.push(e),l.updating||w()}catch(t){o.error(t)}}return a={abort:function(){return new Promise(e=>{try{h=[],"open"===g.readyState?_(()=>{try{l&&l.abort(),e()}catch(t){e()}}):l&&l.setTextTrack&&"ended"===g.readyState?(l.abort(),e()):e()}catch(t){e()}})},abortBeforeAppend:function(){return new Promise(e=>{_(()=>{const t=l.appendWindowStart,n=l.appendWindowEnd;l&&(l.abort(),l.appendWindowStart=t,l.appendWindowEnd=n),e()})})},append:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((n,r)=>{e?(h.push({data:e,promise:{resolve:n,reject:r},request:t}),_(S.bind(this))):r({chunk:e,error:new G.default(K.APPEND_ERROR_CODE,K.APPEND_ERROR_MESSAGE)})})},changeType:function(e){const t=m(e);return new Promise(e=>{_(()=>{l.changeType&&(o.debug(`Changing SourceBuffer codec to ${t}`),l.changeType(t)),e()})})},getAllBufferRanges:function(){try{return l.buffered}catch(e){return o.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return l},getType:function(){return s},initializeForFirstUse:function(e,t){u=e;const n=e.streamInfo;s=u.type;const r=t?m(t):e.codec;try{if(r.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return y(n);l=g.addSourceBuffer(r),v();const e=[];return e.push(E(u.streamInfo)),t&&void 0!==t.mseTimeOffset&&e.push(T(t.mseTimeOffset)),Promise.all(e)}catch(i){return u.type==A.default.TEXT&&!u.isFragmented||-1!==r.indexOf('codecs="stpp')||-1!==r.indexOf('codecs="vtt')||-1!==r.indexOf("text/vtt")?y(n):Promise.reject(i)}},initializeForStreamSwitch:function(e,t,n){u=e,s=u.type,l=n.getBuffer(),v()},remove:function(e){return new Promise((t,n)=>{const r=e.start,i=e.end;r>=0&&i>r?_(function(){try{l.remove(r,i),_(function(){t({from:r,to:i,unintended:!1}),e.resolve&&e.resolve()})}catch(a){n({from:r,to:i,unintended:!1,error:new G.default(K.REMOVE_ERROR_CODE,K.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(a)}}):t()})},removeEventListeners:b,reset:function(){if(l){try{c=[],b(),f=!1,h=[],l.getClassName&&"TextSourceBuffer"===l.getClassName()||(o.debug("Removing sourcebuffer from media source"),g.removeSourceBuffer(l))}catch(e){}l=null}p=null},updateAppendWindow:E,updateTimestampOffset:T},o=(0,C.default)(t).getInstance().getLogger(a),a}Y.__dashjs_factory_name="SourceBufferSink";var W=x.default.getClassFactory(Y);function X(e){const t=this.context;let n,r,i,a=[],s=e;function o(e,t){return a=a.filter(n=>!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))),Promise.resolve()}return n={getAllBufferRanges:function(){let e=[];for(let n=0;n<a.length;n++){let t=a[n];0===e.length||t.start>e[e.length-1].end?e.push({start:t.start,end:t.end}):e[e.length-1].end=t.end}const t={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(t,"length",{get:function(){return e.length}}),t},append:function(e){return"InitializationSegment"!==e.segmentType?(a.push(e),a.sort(function(e,t){return e.start-t.start}),i=null):i=e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),s&&s({chunk:e}),Promise.resolve()},remove:o,abort:function(){return Promise.resolve()},discharge:function(e,t){const n=(r=e,s=t,a.filter(e=>(isNaN(s)||e.start<s)&&(isNaN(r)||e.end>r)));var r,s;return i&&(n.push(i),i=null),o(e,t),n},reset:function(){a=[],i=null,s=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},r=(0,C.default)(t).getInstance().getLogger(n),n}X.__dashjs_factory_name="PreBufferSink";var Q=x.default.getClassFactory(X);function J(){let e={};return{save:function(t){const n=t.streamId,r=t.representation.id;e[n]=e[n]||{},e[n][r]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}J.__dashjs_factory_name="InitCache";var Z=x.default.getSingletonFactory(J);const ee=.01,te="BufferController";function ne(e){const t=(e=e||{}).capabilities,n=this.context,r=(0,_.default)(n).getInstance(),i=e.fragmentModel,a=e.playbackController,s=e.representationController,o=e.settings,l=e.streamInfo,u=e.textController,d=e.type;let c,h,f,g,p,m,y,v,b,E,T,S,w,I,x,L,M,P,O,F,U;function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((n,r)=>{m=e,b&&t&&"function"==typeof b.discharge?(E=b,B(t).then(()=>{n()}).catch(e=>{r(e)})):n()})}function B(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return new Promise((a,o)=>{var l,c,f;P&&e?m?(T=!1,(l=e,c=t,f=i,new Promise(e=>{b=W(n).create({mediaSource:m,textController:u,eventBus:r}),function(e,t,n){const r=s.getCurrentRepresentation();return t&&t[d]&&(d===A.default.VIDEO||d===A.default.AUDIO)?function(e,t,n,r){b.initializeForStreamSwitch(e,t,n[d]);const i=[];return i.push(b.abortBeforeAppend()),i.push(me()),i.push(Y(t,r)),t&&void 0!==t.mseTimeOffset&&i.push(pe(t)),Promise.allSettled(i)}(e,r,t,n):(i=e,a=r,b.initializeForFirstUse(i,a));var i,a}(l,c,f).then(()=>pe(s.getCurrentRepresentation())).then(()=>{e(b)}).catch(t=>{h.warn("Caught error on create SourceBuffer: "+t),e(b)})})).then(e=>{a(e)}).catch(e=>{o(e)})):(T=!0,function(){return new Promise((e,t)=>{b=Q(n).create(K.bind(this)),pe(s.getCurrentRepresentation()).then(()=>{e(b)}).catch(()=>{t()})})}().then(e=>{a(e)}).catch(e=>{o(e)})):a(null)})}function j(e){o.get().streaming.cacheInitSegments&&(h.info("Init fragment finished loading saving to",d+"'s init cache"),P.save(e.chunk)),h.debug(`Appending init fragment for type ${d}, representationId ${e.chunk.representation.id} and bandwidth ${e.chunk.representation.bandwidth}`),H(e.chunk)}function G(e){H(e.chunk,e.request)}function H(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;b&&(b.append(e,t).then(e=>{K(e)}).catch(e=>{K(e)}),e.representation.mediaInfo.type===A.default.VIDEO&&we(R.default.VIDEO_CHUNK_RECEIVED,{chunk:e}))}function V(e){if(e&&e.length>0)for(let t=0,n=e.length;t<n;t++)h.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",a.getTime())}function K(e){if(e.error)return 22===e.error.code&&function(){if(M=!0,p=.8*Ee(),h.warn("Quota exceeded, Critical Buffer: "+p),p>0){const e=Math.max(.2*p,1),t=p-e,n=Math.min(o.get().streaming.buffer.bufferTimeAtTopQuality,.9*t),r=Math.min(o.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*t),i={streaming:{buffer:{bufferToKeep:parseFloat(e.toFixed(5)),bufferTimeAtTopQuality:parseFloat(n.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(r.toFixed(5))}}};o.update(i)}}(),void(22!==e.error.code&&Se()||(h.warn("Clearing playback buffer to overcome quota exceed situation"),we(R.default.QUOTA_EXCEEDED,{criticalBufferLevel:p,quotaExceededTime:e.chunk.start}),he(ce())));if(!b)return;if(se(),M=!1,I=e.chunk,!I||!I.endFragment)return;I&&!isNaN(I.index)&&(y=Math.max(I.index,y),oe());const t=b.getAllBufferRanges();I.segmentType===N.HTTPRequest.MEDIA_SEGMENT_TYPE&&(V(t),ne(),function(){if(isNaN(U)||T)return;if(d!==A.default.AUDIO&&d!==A.default.VIDEO)return void(U=NaN);const e=a.getTime(),t=ae(e,0),n=ae(U,0);if(t&&n&&t.start===n.start)return void(U=NaN);const r=s.getCurrentRepresentation().segmentDuration,i=ae(U,r);i&&(o.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(e-U)>r?U<=i.end&&a.seek(Math.max(U,i.start),!1,!0):e<i.start&&a.seek(i.start,!1,!0))}());let n=!1;S&&(S.indexOf(I)>0&&(n=!0),S=null),I&&!n&&we(R.default.BYTES_APPENDED_END_FRAGMENT,{startTime:I.start,index:I.index,bufferedRanges:t,segmentType:I.segmentType,mediaType:d,representationId:I.representation.id})}function $(e,t){const n=[];return n.push(pe(e)),n.push(b?b.abort():Promise.resolve()),n.push(Y(e,t)),Promise.allSettled(n)}function Y(e,n){return e&&n?e&&n&&e.mimeType===n.mimeType&&e.codecFamily===n.codecFamily?(h.debug(`Switching to new codec ${e.codecs} without changeType as previous codec ${n.codecs} is compatible.`),Promise.resolve()):o.get().streaming.buffer.useChangeType&&t.supportsChangeType()?(h.debug(`Using changeType() to switch from codec ${n.codecs} to ${e.codecs}`),b.changeType(e)):(h.debug("changeType() not available"),Promise.resolve()):(h.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function X(){return new Promise((e,t)=>{let n=J();if(!n||0===n.length)return ne(),void e();he(n).then(()=>{e()}).catch(e=>{t(e)})})}function J(e){const t=[],n=b.getAllBufferRanges();if(!n||0===n.length)return t;if(!e&&0!==e||isNaN(e))t.push({start:n.start(0),end:n.end(n.length-1)+.5});else{const r=function(e,t){const n=o.get().streaming.buffer.bufferToKeep,r=t.start(0);if(e-r>n){let t=Math.max(0,e-n);const a=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:e,threshold:ee})[0];if(a&&(t=Math.min(a.startTime,t)),t>0)return{start:r,end:t}}return null}(e,n),a=function(e,t){const n=t.end(t.length-1)+.5,r=Te(e),a=l.manifestInfo.duration>=o.get().streaming.buffer.longFormContentDurationThreshold?o.get().streaming.buffer.bufferTimeAtTopQualityLongForm:o.get().streaming.buffer.bufferTimeAtTopQuality;let s=isNaN(r)?e:Math.min(r,e+a);if(s>=t.end(t.length-1))return null;const u=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:e,threshold:ee})[0];if(u&&(s=Math.max(u.startTime+u.duration,s)),o.get().streaming.buffer.avoidCurrentTimeRangePruning)for(let i=0;i<t.length;i++)if(t.start(i)<=e&&e<=t.end(i)&&t.start(i)<=s&&s<=t.end(i)){let r=s;s=i+1<t.length?t.start(i+1):t.end(i)+1,h.debug("Buffered range ["+t.start(i)+", "+t.end(i)+"] overlaps with targetTime "+e+" and range to be pruned ["+r+", "+n+"], using ["+s+", "+n+"] instead"+(s<n?"":" (no actual pruning)"));break}return s<t.end(t.length-1)?{start:s,end:n}:null}(e,n);r&&t.push(r),a&&t.push(a)}return t}function ne(){(!F||d===A.default.TEXT&&u.isTextEnabled())&&se()}function re(){le()}function ie(){le(),U=NaN}function ae(e,t){if(!b)return null;const n=b.getAllBufferRanges();let r,i,a=0,s=0,o=null,l=null,u=0;const d=isNaN(t)?.15:t;if(null!=n){for(i=0,r=n.length;i<r;i++)if(a=n.start(i),s=n.end(i),null===o)u=Math.abs(a-e),(e>=a&&e<s||u<=d)&&(o=a,l=s);else{if(u=a-l,!(u<=d))break;l=s}if(null!==o)return{start:o,end:l}}return null}function se(){if(a){let e=a.getTime()||0;T&&(e=isNaN(U)?0:U);const t=o.get().streaming.gaps.jumpGaps&&!isNaN(o.get().streaming.gaps.smallGapLimit)?o.get().streaming.gaps.smallGapLimit:NaN;g=Math.max(function(e,t){let n,r;return o.get().streaming.gaps.jumpGaps&&(t=o.get().streaming.gaps.smallGapLimit),n=ae(e,t),r=null===n?0:n.end-e,r}(e,t),0),we(R.default.BUFFER_LEVEL_UPDATED,{mediaType:d,bufferLevel:g}),le()}}function oe(){const e=y>=v-1,t=a.getTimeToStreamEnd(l)-g<1e-5;!e&&!t||f||(be(!0),h.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${l.id} and type ${d}`))}function le(){if(d!==A.default.AUDIO&&d!==A.default.VIDEO)return;const e=a.getLowLatencyModeEnabled()?o.get().streaming.buffer.lowLatencyStallThreshold:o.get().streaming.buffer.stallThreshold;g<=e&&!f?ue(k.BUFFER_EMPTY):(f||g>e)&&ue(k.BUFFER_LOADED)}function ue(e){w===e||e===k.BUFFER_EMPTY&&0===a.getTime()||d===A.default.TEXT&&!u.isTextEnabled()||(w=e,we(R.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),we(e===k.BUFFER_LOADED?R.default.BUFFER_LOADED:R.default.BUFFER_EMPTY),h.debug(e===k.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function de(){b&&d!==A.default.TEXT&&(f||he(ce()))}function ce(){const e=[],t=b.getAllBufferRanges();if(!t||0===t.length)return e;const n=a.getTime();let r=Math.max(0,n-o.get().streaming.buffer.bufferToKeep);const s=i.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:n,threshold:ee})[0];if(s)r=Math.min(s.startTime,r);else if(0===n&&a.getIsDynamic())return[];if(t.start(0)<=r){const n={start:0,end:r};for(let e=0;e<t.length&&t.end(e)<=r;e++)n.end=t.end(e);n.start<n.end&&e.push(n)}return e}function he(e){return new Promise((t,n)=>{if(!e||!b||0===e.length)return se(),void t();const r=[];e.forEach(e=>{var t;r.push((t=e,new Promise((e,n)=>{t.resolve=e,t.reject=n,O.push(t)})))}),L||fe(),Promise.all(r).then(()=>{t()}).catch(e=>{n(e)})})}function fe(){try{if(0===O.length||!b)return h.debug("Nothing to prune, halt pruning"),O=[],void(L=!1);const e=b.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return h.debug("SourceBuffer is empty (or does not exist), halt pruning"),O=[],void(L=!1);const t=O.shift();h.debug(`${d}: Removing buffer from: ${t.start} to ${t.end}`),L=!0,a.getTime()<t.end&&be(!1),b.remove(t).then(e=>{ge(e)}).catch(e=>{ge(e)})}catch(e){L=!1}}function ge(e){h.debug("onRemoved buffer from:",e.from,"to",e.to),b&&(V(b.getAllBufferRanges()),0===O.length&&(L=!1,se()),e.unintended&&(h.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),we(R.default.SEEK_TARGET,{time:e.from})),L?fe():(F?F=!1:se(),we(R.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:Se(),quotaExceeded:M})))}function pe(e){return new Promise(t=>{e&&void 0!==e.mseTimeOffset&&b&&b.updateTimestampOffset?b.updateTimestampOffset(e.mseTimeOffset).then(()=>{t()}).catch(()=>{t()}):t()})}function me(){return b&&!f?b.updateAppendWindow(l):Promise.resolve()}function ye(){x++,x*(o.get().streaming.wallclockTimeUpdateInterval/1e3)>=o.get().streaming.buffer.bufferPruningInterval&&(x=0,de())}function ve(){le()}function be(e){f=e,f?we(R.default.BUFFERING_COMPLETED):v=Number.POSITIVE_INFINITY}function Ee(){try{const e=b.getAllBufferRanges();let t,n,r=0;if(!e)return r;for(n=0,t=e.length;n<t;n++)r+=e.end(n)-e.start(n);return r}catch(e){return 0}}function Te(e){try{let t=e;const n=b.getAllBufferRanges();if(!n||0===n.length)return NaN;let r=0;for(;t===e&&r<n.length;){const e=n.start(r),i=n.end(r);t>=e&&t<=i&&(t=i),r+=1}return t===e?NaN:t}catch(t){return NaN}}function Se(){const e=Ee();return isNaN(e)||e<p}function we(e,t){let n=t||{};r.trigger(e,n,{streamId:l.id,mediaType:d})}function Ae(e,t){if(p=Number.POSITIVE_INFINITY,w=void 0,v=Number.POSITIVE_INFINITY,y=0,I=null,f=!1,L=!1,M=!1,g=0,x=0,O=[],U=NaN,T=!1,b){let n=b;b=null,e||(t?n.removeEventListeners():n.abort().then(()=>{n.reset(t),n=null}))}F=!1}return c={appendInitSegmentFromCache:function(e){const t=P.extract(l.id,e);return!!t&&(h.debug(`Appending init fragment for type ${d}, representationId ${t.representation.id} and bandwidth ${t.representation.bandwidth}`),H(t),!0)},clearBuffers:he,createBufferSink:B,dischargePreBuffer:function(){if(b&&E&&"function"==typeof E.discharge){const e=E.getAllBufferRanges();if(e.length>0){let t="Beginning "+d+"PreBuffer discharge, adding buffer for:";for(let n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";h.debug(t)}else h.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");S=[];let t=E.discharge(),n=null;for(let r=0;r<t.length;r++){const e=t[r];if(e.segmentType!==N.HTTPRequest.INIT_SEGMENT_TYPE){const t=P.extract(e.streamId,e.representation.id);t&&n!==t&&(S.push(t),b.append(t),n=t)}S.push(e),b.append(e)}E.reset(),E=null}},getAllRangesWithSafetyFactor:J,getBuffer:function(){return b},getBufferControllerType:function(){return te},getBufferLevel:function(){return g},getContinuousBufferTimeForTargetTime:Te,getIsBufferingCompleted:function(){return f},getIsPruningInProgress:function(){return L},getMediaSource:function(){return m},getRangeAt:ae,getStreamId:function(){return l.id},getType:function(){return d},hasBufferAtTime:function(e){try{const t=b.getAllBufferRanges();if(!t||0===t.length)return!1;let n=0;for(;n<t.length;){const r=t.start(n),i=t.end(n);if(e>=r&&e<=i)return!0;n+=1}return!1}catch(t){return h.error(t),!1}},initialize:function(e){z(e),r.on(R.default.INIT_FRAGMENT_LOADED,j,c),r.on(R.default.MEDIA_FRAGMENT_LOADED,G,c),r.on(R.default.WALLCLOCK_TIME_UPDATED,ye,c),r.on(D.default.PLAYBACK_PLAYING,ie,c),r.on(D.default.PLAYBACK_PROGRESS,ne,c),r.on(D.default.PLAYBACK_TIME_UPDATED,ne,c),r.on(D.default.PLAYBACK_RATE_CHANGED,ve,c),r.on(D.default.PLAYBACK_STALLED,re,c)},prepareForAbandonQualitySwitch:function(e,t){return $(e,t)},prepareForDefaultQualitySwitch:function(e,t){return $(e,t)},prepareForFastQualitySwitch:function(e,t){return $(e,t)},prepareForForceReplacementQualitySwitch:function(e,t){return new Promise(n=>{const r=[];r.push(b.abort()),r.push(me()),r.push(X()),r.push(pe(e)),r.push(Y(e,t)),Promise.allSettled(r).then(()=>{be(!1),n()})})},prepareForNonReplacementTrackSwitch:function(e,t){return new Promise(n=>{const r=[];r.push(me()),r.push(Y(e,t)),Promise.allSettled(r).then(()=>{n()})})},prepareForPlaybackSeek:function(){return f&&be(!1),b.abort()},prepareForReplacementTrackSwitch:function(e,t){return new Promise(n=>{const r=[];r.push(b.abort()),r.push(me()),r.push(Y(e,t)),r.push(X()),r.push(pe(e)),Promise.allSettled(r).then(()=>{be(!1),n()})})},pruneAllSafely:X,pruneBuffer:de,reset:function(e,t){r.off(R.default.INIT_FRAGMENT_LOADED,j,this),r.off(R.default.MEDIA_FRAGMENT_LOADED,G,this),r.off(R.default.WALLCLOCK_TIME_UPDATED,ye,this),r.off(D.default.PLAYBACK_PLAYING,ie,this),r.off(D.default.PLAYBACK_PROGRESS,ne,this),r.off(D.default.PLAYBACK_TIME_UPDATED,ne,this),r.off(D.default.PLAYBACK_RATE_CHANGED,ve,this),r.off(D.default.PLAYBACK_STALLED,re,this),Ae(e,t)},segmentRequestingCompleted:function(e){isNaN(e)||(v=e,oe())},setIsBufferingCompleted:be,setMediaSource:z,setSeekTarget:function(e){U=e},updateAppendWindow:me,updateBufferTimestampOffset:pe},h=(0,C.default)(n).getInstance().getLogger(c),P=Z(n).getInstance(),Ae(),c}ne.__dashjs_factory_name=te;var re=x.default.getClassFactory(ne);const ie="NotFragmentedTextBufferController";function ae(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance(),r=e.textController,i=e.errHandler,a=e.streamInfo,s=e.type;let o,l,u,d,c,h;function f(e){d=e}function g(e){var t;l!==e&&(l=e,l&&(t=R.default.BUFFERING_COMPLETED,n.trigger(t,{},{streamId:a.id,mediaType:s})))}function p(e){e.chunk.bytes&&!l&&(h.save(e.chunk),c.append(e.chunk),g(!0))}return o={initialize:function(e){f(e)},getStreamId:function(){return a.id},getType:function(){return s},getBufferControllerType:function(){return ie},createBufferSink:function(e){return new Promise((a,o)=>{try{c=W(t).create({mediaSource:d,textController:r,eventBus:n}),c.initializeForFirstUse(e),u||(c.getBuffer()&&"function"==typeof c.getBuffer().initialize&&c.getBuffer().initialize(),u=!0),a(c)}catch(l){i.error(new G.default(K.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,K.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+s)),o(l)}})},dischargePreBuffer:function(){},getBuffer:function(){return c},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:f,getMediaSource:function(){return d},appendInitSegmentFromCache:function(e){return null!==h.extract(a.id,e)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:g,getIsPruningInProgress:function(){return!1},reset:function(e){n.off(R.default.INIT_FRAGMENT_LOADED,p,o),!e&&c&&(c.abort(),c.reset(),c=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return l=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},u=!1,d=null,l=!1,h=Z(t).getInstance(),n.on(R.default.INIT_FRAGMENT_LOADED,p,o),o}ae.__dashjs_factory_name=ie;var se=x.default.getClassFactory(ae);function oe(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance(),r=e.dashMetrics,i=e.mediaPlayerModel,a=e.fragmentModel,s=e.abrController,o=e.playbackController,l=e.textController,u=e.type,d=e.bufferController,c=e.representationController,h=e.settings;let f,g,p,m,y,v,b,E,T,S,w,I;function x(){w=!0}function L(){w=!1}function M(e){if(d.getIsBufferingCompleted())return;N();const t=isNaN(e)?0:e;y=setTimeout(P,t)}function N(){y&&(clearTimeout(y),y=null)}function P(){try{if(function(){try{return u===A.default.TEXT&&!l.isTextEnabled()||o.isPaused()&&(!o.getStreamController().getInitialPlayback()||!o.getStreamController().getAutoPlay())&&!h.get().streaming.scheduling.scheduleWhilePaused}catch(e){return!1}}())return void N();if(function(){try{return!!w&&c.getCurrentRepresentation()&&(null==E||T||function(){const e=c.getCurrentRepresentation();if(!u||!e)return!0;let t=e&&e.segmentDuration&&!isNaN(e.segmentDuration)?e.segmentDuration:0;const n=r.getCurrentBufferLevel(u),i=O();return(i<=t||o.getLowLatencyModeEnabled()||u===A.default.AUDIO&&v)&&(t=0),n+t<i}())}catch(e){return!1}}()){let e=!1;I&&(e=s.checkPlaybackQuality(u,g.id)),e||function(){const e=c.getCurrentRepresentation();S||e.id!==E||T?(T?(p.debug("Switch track for "+u+", representation id = "+e.id),T=!1):p.debug("Quality has changed, get init request for representationid = "+e.id),n.trigger(R.default.INIT_FRAGMENT_NEEDED,{representationId:e.id,sender:f},{streamId:g.id,mediaType:u}),I=!1,S=!1):(p.debug(`Media segment needed for ${u} and stream id ${g.id}`),n.trigger(R.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:g.id,mediaType:u}),I=!0)}()}else M(o.getLowLatencyModeEnabled()?h.get().streaming.scheduling.lowLatencyTimeout:h.get().streaming.scheduling.defaultTimeout)}catch(e){M(o.getLowLatencyModeEnabled()?h.get().streaming.scheduling.lowLatencyTimeout:h.get().streaming.scheduling.defaultTimeout)}}function O(){let e=NaN;const t=c.getCurrentRepresentation();return u&&t?(e=u===A.default.TEXT?function(){try{if(l.isTextEnabled()){const e=c.getCurrentRepresentation();if(isNaN(e.fragmentDuration)){const e=r.getCurrentSchedulingInfo(k.SCHEDULING_INFO);return e?e.duration:0}return e.fragmentDuration}return 0}catch(e){return 0}}():u===A.default.AUDIO&&v?function(){try{const e=r.getCurrentBufferLevel(A.default.VIDEO),t=c.getCurrentRepresentation();return isNaN(t.fragmentDuration)?e+1:Math.max(e+1,t.fragmentDuration)}catch(e){return 0}}():function(){try{const e=c.getCurrentRepresentation(),t=e.mediaInfo.streamInfo;return s.isPlayingAtTopQuality(e)?t.manifestInfo.duration>=h.get().streaming.buffer.longFormContentDurationThreshold?h.get().streaming.buffer.bufferTimeAtTopQualityLongForm:h.get().streaming.buffer.bufferTimeAtTopQuality:i.getBufferTimeDefaultUnadjusted()}catch(e){return i.getBufferTimeDefaultUnadjusted()}}(),e):e}function F(){U(!0)}function U(e){if(o&&a){const t=a.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:o.getTime(),threshold:0})[0];t&&o.getTime()>=t.startTime&&((!b.representation||t.representation.mediaInfo.type===b.representation.mediaInfo.type&&t.representation.mediaInfo.index!==b.representation.mediaInfo.index)&&e&&(p.debug(`Track change rendered for streamId ${g.id} and type ${u}`),n.trigger(R.default.TRACK_CHANGE_RENDERED,{mediaType:u,oldMediaInfo:b&&b.representation&&b.representation.mediaInfo?b.representation.mediaInfo:null,newMediaInfo:t.representation.mediaInfo,streamId:g.id})),b.representation&&t.representation.id===b.representation.id||!e||(p.debug(`Quality change rendered for streamId ${g.id} and type ${u}`),n.trigger(R.default.QUALITY_CHANGE_RENDERED,{mediaType:u,oldRepresentation:b.representation?b.representation:null,newRepresentation:t.representation,streamId:g.id})),b.representation=t.representation)}}function z(){a.abortRequests(),N()}function B(){h.get().streaming.scheduling.scheduleWhilePaused||M()}function j(e){r.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function G(){I=!0,m=0,E=null,b={representation:null},T=!1,S=!1,w=!0}return f={clearScheduleTimer:N,getBufferTarget:O,getPlaybackController:function(){return o},getStreamId:function(){return g.id},getSwitchTrack:function(){return T},getTimeToLoadDelay:function(){return m},getType:function(){return u},initialize:function(e){v=e,n.on(R.default.URL_RESOLUTION_FAILED,z,f),n.on(D.default.PLAYBACK_STARTED,B,f),n.on(D.default.PLAYBACK_RATE_CHANGED,j,f),n.on(D.default.PLAYBACK_TIME_UPDATED,F,f),n.on(D.default.MANAGED_MEDIA_SOURCE_START_STREAMING,x,f),n.on(D.default.MANAGED_MEDIA_SOURCE_END_STREAMING,L,f)},reset:function(){n.off(R.default.URL_RESOLUTION_FAILED,z,f),n.off(D.default.PLAYBACK_STARTED,B,f),n.off(D.default.PLAYBACK_RATE_CHANGED,j,f),n.off(D.default.PLAYBACK_TIME_UPDATED,F,f),n.off(D.default.MANAGED_MEDIA_SOURCE_START_STREAMING,x,f),n.off(D.default.MANAGED_MEDIA_SOURCE_END_STREAMING,L,f),N(),U(!1),G(),g=null},setCheckPlaybackQuality:function(e){I=e},setInitSegmentRequired:function(e){S=e},setLastInitializedRepresentationId:function(e){E=e},setSwitchTrack:function(e){T=e},setTimeToLoadDelay:function(e){m=e},startScheduleTimer:M},p=(0,C.default)(t).getInstance().getLogger(f),G(),g=e.streamInfo,f}oe.__dashjs_factory_name="ScheduleController";var le=x.default.getClassFactory(oe);const ue=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var de=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function ce(e,t,n,r,i,a,s,o){let l=new de;var u;return l.representation=e,l.duration=t,l.presentationStartTime=n,l.mediaStartTime=r,l.availabilityStartTime=i.calcAvailabilityStartTimeFromPresentationTime(a,e,s),l.availabilityEndTime=i.calcAvailabilityEndTimeFromPresentationTime(a+t,e,s),l.wallStartTime=i.calcWallTimeForSegment(l,s),l.replacementNumber=(u=o,l.representation.startNumber+u),l.index=o,l}function he(e,t,n,r){const i=t.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===t.availabilityTimeOffset)return!0;const r=e.getClientReferenceTime();return n.availabilityStartTime.getTime()<=r&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=r)}return!0}function fe(e,t,n,r,i,a){return e?(s=t,o=n,l=r,u=i,d=a,e.replace(ue,(e,t,n,r)=>{let i,a;switch(t){case void 0:return"$";case"RepresentationID":i=s;break;case"Number":i=o;break;case"SubNumber":i=l;break;case"Bandwidth":i=u;break;case"Time":if("string"==typeof d)return d;i=d?Math.round(d):d;break;default:i=null}if(null==i)return e;switch(r){case void 0:case"d":case"i":case"u":a=i.toString();break;case"o":a=i.toString(8);break;case"x":a=i.toString(16);break;case"X":a=i.toString(16).toUpperCase();break;default:a=i.toString()}const c=parseInt(n,10)||1;return a.padStart(c,"0")})):e;var s,o,l,u,d}function ge(e,t,n,r){let i,a,s;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),s=parseFloat((a+i).toFixed(5));const o=ce(n,i,a,e.calcMediaTimeFromPresentationTime(a,n),e,s,t,r);return he(e,n,o,t)?o:null}function pe(e,t,n,r,i,a,s,o,l,u){const d=r/a,c=i/a;let h,f,g;return h=e.calcPresentationTimeFromMediaTime(d,n),f=h+c,g=ce(n,c,h,d,e,f,t,l),he(e,n,g,t)?(g.replacementTime=u||r,g.media=fe(s,void 0,g.replacementNumber,void 0,void 0,g.replacementTime),g.mediaRange=o,g):null}function me(e){const t=(e=e||{}).eventBus,n=e.events,r=e.abrController,i=e.dashMetrics,a=e.playbackController,s=e.timelineConverter,o=e.type,l=e.streamInfo,u=e.segmentsController,d=e.isDynamic;let c,h,f;function g(){return o}function p(){return f}function m(){f=null,h=[]}function y(e){return new Promise((t,n)=>{const r=e.hasInitialization(),a=e.hasSegments(),o=[];o.push(u.updateInitData(e,r)),o.push(u.updateSegmentData(e,a)),Promise.all(o).then(n=>{var r,a,o;n[0]&&!n[0].error&&(a=e,o=n[0],e=o&&!o.error&&o.representation?o.representation:a),n[1]&&!n[1].error&&(e=function(e,t){if(!t||t.error)return;const n=t.segments,r=[];let i,a,o,l,u=0;for(i=0,a=n?n.length:0;i<a;i++)o=n[i],l=pe(s,d,e,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,u),l&&(r.push(l),l=null,u++);return r.length>0&&(e.segments=r),e}(e,n[1])),e.fragmentDuration=e.segmentDuration?e.segmentDuration:e.segments&&e.segments.length>0?e.segments[0].duration:NaN,(r=e).mediaFinishedInformation=u.getMediaFinishedInformation(r),function(e){let t,n=i.getCurrentManifestUpdate(),r=!1;if(n){for(let i=0;i<n.representationInfo.length;i++)if(t=n.representationInfo[i],t.index===e.index&&t.mediaType===g()){r=!0;break}r||i.addManifestUpdateRepresentationInfo(e,g())}}(e),t()}).catch(e=>{n(e)})})}function v(e){if(!h||0===h.length)return null;const t=h.filter(t=>t.id===e);return t.length>0?t[0]:null}function b(e){t.trigger(n.DATA_UPDATE_COMPLETED,{currentRepresentation:f,error:e},{streamId:l.id,mediaType:o})}function E(e){f&&f.id===e.id||function(e){!function(){if(!(r&&i&&a&&s))throw new Error(A.default.MISSING_CONFIG_ERROR)}();const n=new Date,u=1e3*a.getTime();e&&i.addRepresentationSwitch(e.adaptation.type,n,u,e.id),t.trigger(D.default.REPRESENTATION_SWITCH,{mediaType:o,streamId:l.id,currentRepresentation:e},{streamId:l.id,mediaType:o})}(e),f=e}function T(e){if(e.newDuration){const t=p();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return c={getCurrentRepresentation:p,getRepresentationById:v,getStreamId:function(){return l.id},getType:g,prepareQualityChange:function(e){const t=h.filter(t=>t.id===e.id);t.length>0&&E(t[0])},reset:function(){t.off(D.default.MANIFEST_VALIDITY_CHANGED,T,c),m()},updateData:function(e,t,n){return new Promise((s,u)=>{if(h=e,E(v(n)),o!==A.default.VIDEO&&o!==A.default.AUDIO&&(o!==A.default.TEXT||!t))return b(),void s();const d=[];for(let e=0,t=h.length;e<t;e++){const t=h[e];d.push(y(t))}Promise.all(d).then(()=>{!function(){r.setPlaybackQuality(o,l,f);const e=i.getCurrentDVRInfo(o);e&&i.updateManifestUpdateInfo({latency:e.range.end-a.getTime()}),b()}(),s()}).catch(e=>{u(e)})})}},m(),t.on(D.default.MANIFEST_VALIDITY_CHANGED,T,c),c}me.__dashjs_factory_name="RepresentationController";var ye=x.default.getClassFactory(me),ve=n(656);function be(e){const t=(e=e||{}).eventBus,n=e.debug,r=e.urlUtils,i=e.type,a=e.streamInfo,s=e.segmentsController,o=e.timelineConverter,l=e.baseURLController;let u,d,c,h,f;function g(){return i}function p(){c=null}function m(e,t,n){const i=l.resolve(n.path);let a,s,o={};return i&&t!==i.url&&r.isRelative(t)?(a=i.url,s=i.serviceLocation,o=i.queryParams,t&&(a=r.resolve(t,a))):a=t,!r.isRelative(a)&&(e.url=a,e.serviceLocation=s,e.queryParams=o,!0)}function y(e,t){if(null==t)return null;const n=new O,r=t.representation,i=r.bandwidth,a=fe(t.media,r.id,t.replacementNumber,void 0,i,t.replacementTime);return n.mediaType=g(),n.bandwidth=r.bandwidth,n.type=N.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.availabilityTimeComplete=r.availabilityTimeComplete,n.wallStartTime=t.wallStartTime,n.index=t.index,n.adaptationIndex=r.adaptation.index,n.representation=r,m(n,a,r)?n:void 0}function v(e,t,n){let r=null;if(!t||!t.segmentInfoType)return r;const i=s.getSegmentByTime(t,n);return i&&(c=i,d.debug("Index for time "+n+" is "+i.index),r=y(0,i)),r}function b(e,t,n){let r=null;const i=s.getSegmentByIndex(t,n,c?c.mediaStartTime:-1);if(i)r=y(0,i),c=i;else{if(h&&!f)return d.debug(g()+" No segment found at index: "+n+". Wait for next loop"),null;f=!0}return r}function E(){d.debug("Dynamic stream complete"),f=!0}return u={getCurrentIndex:function(){return c?c.index:-1},getInitRequest:function(e,t){return t?function(e,t,n){const r=new O,i=t.adaptation.period,a=i.start;if(r.mediaType=n,r.type=N.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=o.calcAvailabilityStartTimeFromPresentationTime(a,t,h),r.availabilityEndTime=o.calcAvailabilityEndTimeFromPresentationTime(a+i.duration,t,h),r.representation=t,m(r,t.initialization,t))return r.url=fe(r.url,void 0,void 0,void 0,t.bandwidth),r}(0,t,g()):null},getNextSegmentRequest:function(e,t){if(!t||!t.segmentInfoType)return null;let n=c?c.index+1:0;return t&&c&&t.endNumber&&c.replacementNumber&&c.replacementNumber>=t.endNumber?(f=!0,null):b(0,t,n)},getNextSegmentRequestIdempotent:function(e,t){let n=null,r=c?c.index+1:0;const i=s.getSegmentByIndex(t,r,c?c.mediaStartTime:-1);return i?(n=y(0,i),n):null},getSegmentRequestForTime:v,getStreamId:function(){return a.id},getStreamInfo:function(){return a},getType:g,getValidTimeAheadOfTargetTime:function(e,t,n,r){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(r)&&(r=.5),v(0,n,e))return e;if(n.adaptation.period.start+n.adaptation.period.duration<e)return NaN;const i=isFinite(n.adaptation.period.duration)?n.adaptation.period.start+n.adaptation.period.duration:e+30;let a=Math.min(e+r,i),s=NaN,o=null;for(;a<=i;){let e=null;if(a<=i&&(e=v(0,n,a)),e){s=a,o=e;break}a+=r}if(o){const t=o.startTime+o.duration;return e>o.startTime&&t-e>r?e:!isNaN(o.startTime)&&e<o.startTime&&s>o.startTime?o.startTime+.001:Math.min(t-r,s)}return s}catch(i){return NaN}},initialize:function(e){h=e,f=!1,s.initialize(e)},isLastSegmentRequested:function(e,t){if(!e||!c)return!1;if(f)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(c.presentationStartTime+c.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(c.index)&&c.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!h||e.segmentInfoType===I.default.SEGMENT_TEMPLATE)return!0;if(h&&e.segmentInfoType===I.default.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(h&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===I.default.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&c&&!isNaN(c.mediaStartTime)&&!isNaN(c.duration)&&c.mediaStartTime+c.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(e,t){return t&&t.segmentInfoType?b(0,t,c?c.index:0):null},reset:function(){p(),t.off(D.default.DYNAMIC_TO_STATIC,E,u)}},d=n.getLogger(u),p(),t.on(D.default.DYNAMIC_TO_STATIC,E,u),u}be.__dashjs_factory_name="DashHandler";var Ee=x.default.getClassFactory(be);function Te(){let e;const t=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,a=(e,t)=>{try{return new window.URL(e,t).toString()}catch(n){return e}},s=(e,t)=>{let n=o;if(!t)return e;if(!d(e))return e;c(e)&&(n=l),h(e)&&(n=u);const r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function o(e){const t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function l(e){const t=e.match(i);return t?t[1]:""}function u(e){const n=e.match(t);return n?n[0]:""}function d(e){return!t.test(e)}function c(e){return d(e)&&"/"===e.charAt(0)}function h(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=a}catch(t){}finally{e=e||s}}(),{parseBaseUrl:o,parseOrigin:l,parseScheme:u,isRelative:d,isPathAbsolute:c,isSchemeRelative:h,isHTTPURL:function(e){return n.test(e)},isHTTPS:function(e){return r.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,n){return e(t,n)}}}Te.__dashjs_factory_name="DefaultURLUtils";var Se=x.default.getSingletonFactory(Te);function we(){let e,t,n=[];const r=this.context;function i(e,r,i){let a=function(e){let r;for(r=0;r<n.length;r++)if(n[r].regex.test(e))return n[r].utils;return t}(i||r);return a&&"function"==typeof a[e]?a[e](r,i):t[e](r,i)}return t=Se(r).getInstance(),e={registerUrlRegex:function(e,t){n.push({regex:e,utils:t})},parseBaseUrl:function(e){return i("parseBaseUrl",e)},parseOrigin:function(e){return i("parseOrigin",e)},parseScheme:function(e){return i("parseScheme",e)},isRelative:function(e){return i("isRelative",e)},isPathAbsolute:function(e){return i("isPathAbsolute",e)},isSchemeRelative:function(e){return i("isSchemeRelative",e)},isHTTPURL:function(e){return i("isHTTPURL",e)},isHTTPS:function(e){return i("isHTTPS",e)},removeHostname:function(e){return i("removeHostname",e)},resolve:function(e,t){return i("resolve",e,t)}},e}we.__dashjs_factory_name="URLUtils";var Ae=x.default.getSingletonFactory(we);class Ie{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Ie.INITIAL_PLAYOUT_START_REASON="initial_playout",Ie.SEEK_START_REASON="seek",Ie.RESUME_FROM_PAUSE_START_REASON="resume",Ie.METRICS_COLLECTION_START_REASON="metrics_collection_start";class ke{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function _e(e,t){const n=(e=e||{}).timelineConverter,r=e.dashMetrics;let i;function a(){if(!n)throw new Error(A.default.MISSING_CONFIG_ERROR)}function s(e,t){const n=e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentList,r=n.SegmentTimeline,i=n.SegmentURL;let a,s,l,u,d,c,h,f=0,g=-1;h=e.timescale,a=r.S;let p=!1;for(l=0,u=a.length;l<u&&!p;l++)for(s=a[l],c=0,s.hasOwnProperty("r")&&(c=s.r),s.hasOwnProperty("t")&&(f=s.t),c<0&&(c=o(e,a[l+1],s,h,f/h)),d=0;d<=c&&!p;d++)g++,p=t(f,n,i,s,h,g,l),p&&(e.segmentDuration=s.d/h),f+=s.d}function o(e,t,i,a,s){let o;if(t&&t.hasOwnProperty("t"))o=t.t/a;else try{let t=0;if(isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)){const e=r.getCurrentDVRInfo();t=isNaN(e.end)?0:e.end}else t=e.adaptation.period.start+e.adaptation.period.duration;o=n.calcMediaTimeFromPresentationTime(t,e),e.segmentDuration=i.d/a}catch(l){o=0}return Math.max(Math.ceil((o-s)/(i.d/a))-1,0)}return i={getSegmentByIndex:function(e,r,i){if(a(),!e)return null;let o=null,l=!1;return s(e,function(r,a,s,u,d,c,h){if(l||i<0){let i=a.media,l=u.mediaRange;return s&&(i=s[h].media||"",l=s[h].mediaRange),o=pe(n,t,e,r,u.d,d,i,l,c,u.tManifest),!0}return r>=i*d-.5*u.d&&(l=!0),!1}),o},getSegmentByTime:function(e,r){if(a(),!e)return null;void 0===r&&(r=null);let i=null;const o=n.calcMediaTimeFromPresentationTime(r,e);return s(e,function(r,a,s,l,u,d,c){const h=parseFloat((o*u).toPrecision(15));if(h<r+l.d&&h>=r){let o=a.media,h=l.mediaRange;return s&&(o=s[c].media||"",h=s[c].mediaRange),i=pe(n,t,e,r,l.d,u,o,h,d,l.tManifest),!0}return!1}),i},getMediaFinishedInformation:function(e){if(!e)return 0;const t=(e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentList).SegmentTimeline;let n,r,i,a,s,l,u,d=0,c=0,h=0;for(u=e.timescale,n=t.S,a=n.length,i=0;i<a;i++)for(r=n[i],l=0,r.hasOwnProperty("r")&&(l=r.r),r.hasOwnProperty("t")&&(d=r.t,c=d/u),l<0&&(l=o(e,n[i+1],r,u,c)),s=0;s<=l;s++)h++,d+=r.d,c=d/u;return{numberOfSegments:h,mediaTimeOfLastSignaledSegment:c}}},i}ke.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",ke.REBUFFERING_REASON="rebuffering",ke.USER_REQUEST_STOP_REASON="user_request",ke.END_OF_PERIOD_STOP_REASON="end_of_period",ke.END_OF_CONTENT_STOP_REASON="end_of_content",ke.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",ke.FAILURE_STOP_REASON="failure",_e.__dashjs_factory_name="TimelineSegmentsGetter";var Re=x.default.getClassFactory(_e);function xe(e,t){const n=(e=e||{}).timelineConverter;let r;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(A.default.MISSING_CONFIG_ERROR)}function a(e,r){if(i(),!e)return null;const a=e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentTemplate;r=Math.max(r,0);const s=ge(n,t,e,r);if(s){if(e.endNumber&&s.replacementNumber>e.endNumber)return null;s.replacementTime=Math.round(r*e.segmentDuration*e.timescale,10),s.media=fe(a.media,void 0,s.replacementNumber,void 0,void 0,s.replacementTime)}return s}return r={getSegmentByIndex:a,getSegmentByTime:function(e,t){if(i(),!e)return null;const r=e.segmentDuration;if(isNaN(r))return null;let s=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return a(e,Math.floor(s/r))},getMediaFinishedInformation:function(e){const t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;const n=e.segmentDuration;return isNaN(n)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/n),t}},r}xe.__dashjs_factory_name="TemplateSegmentsGetter";var Ce=x.default.getClassFactory(xe);function De(e,t){const n=(e=e||{}).timelineConverter;let r;function i(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(A.default.MISSING_CONFIG_ERROR)}function a(e,r){if(i(),!e)return null;const a=e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentList,s=a.SegmentURL.length,o=e&&!isNaN(e.startNumber)?e.startNumber:1,l=Math.max(o-1,0),u=Math.max(r-l,0);let d=null;if(u<s){const i=a.SegmentURL[u];d=ge(n,t,e,r),d&&(d.replacementTime=(o+r-1)*e.segmentDuration,d.media=i.media?i.media:"",d.mediaRange=i.mediaRange,d.indexRange=i.indexRange)}return d}return r={getSegmentByIndex:a,getSegmentByTime:function(e,t){if(i(),!e)return null;const r=e.segmentDuration;if(isNaN(r))return null;const s=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return a(e,Math.floor(s/r))},getMediaFinishedInformation:function(e){const t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;const n=e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index].Representation[e.index].SegmentList,r=e&&!isNaN(e.startNumber)?e.startNumber:1,i=Math.max(r-1,0);return t.numberOfSegments=i+n.SegmentURL.length,t}},r}De.__dashjs_factory_name="ListSegmentsGetter";var Le=x.default.getClassFactory(De);function Me(e){const t=(e=e||{}).timelineConverter;let n;function r(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(A.default.MISSING_CONFIG_ERROR)}function i(e,t){if(r(),!e)return null;const n=e.segments?e.segments.length:-1;let i;if(t<n&&(i=e.segments[t],i&&i.index===t))return i;for(let r=0;r<n;r++)if(i=e.segments[r],i&&i.index===t)return i;return null}return n={getSegmentByIndex:i,getSegmentByTime:function(e,t){r();return i(e,function(e,t){if(!e)return-1;const n=e.segments,r=n?n.length:null;let i,a,s,o,l,u=-1;if(n&&r>0)for(l=0;l<r;l++)if(a=n[l],s=a.presentationStartTime,o=a.duration,i=o/2,t+i>=s&&t-i<s+o){u=a.index;break}return u}(e,t))},getMediaFinishedInformation:function(e){const t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments?(t.numberOfSegments=e.segments.length,t):t}},n}Me.__dashjs_factory_name="SegmentBaseGetter";var Ne=x.default.getClassFactory(Me);function Pe(e){e=e||{};const t=this.context,n=e.dashConstants,r=e.type,i=e.segmentBaseController;let a,s;function o(e){return e?e.segments?s[n.SEGMENT_BASE]:s[e.segmentInfoType]:null}return a={initialize:function(r){s[n.SEGMENT_TIMELINE]=Re(t).create(e,r),s[n.SEGMENT_TEMPLATE]=Ce(t).create(e,r),s[n.SEGMENT_LIST]=Le(t).create(e,r),s[n.SEGMENT_BASE]=Ne(t).create(e,r)},updateInitData:function(e,t){return t?Promise.resolve():i.getSegmentBaseInitSegment({representation:e,mediaType:r})},updateSegmentData:function(e,t){return t?Promise.resolve():i.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:r})},getSegmentByIndex:function(e,t,n){const r=o(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){const n=o(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){const t=o(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},s={},a}Pe.__dashjs_factory_name="SegmentsController";var Oe=x.default.getClassFactory(Pe);function Fe(){let e;return e={ntpToUTC:function(e){const t=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(t.getTime()+e).getTime()}},e}Fe.__dashjs_factory_name="TimeUtils";var Ue=x.default.getSingletonFactory(Fe),ze=class{constructor(e){this.newMediaInfo=e.newMediaInfo,this.previouslySelectedRepresentation=e.previouslySelectedRepresentation,this.newRepresentation=e.newRepresentation}};function Be(e){e=e||{};let t,n,r,i,a,s,o,l,u,d,c,h,f,g,p,m,y=this.context,v=(0,_.default)(y).getInstance(),b=e.abrController,E=e.adapter,T=e.boxParser,S=e.capabilities,w=e.dashMetrics,x=e.errHandler,L=e.fragmentModel,M=e.manifestModel,P=e.mediaController,O=e.mediaPlayerModel,F=e.mimeType,U=e.playbackController,z=e.segmentBlacklistController,B=e.settings,j=e.streamInfo,H=e.textController,V=e.timelineConverter,$=e.type;function Y(){return j.id}function W(){return $}function X(){l=[],r=null,n=0,p=!1,g=!1,d=!1,m=!1,ue()}function Q(e){return!isNaN(e)&&!isNaN(j.duration)&&isFinite(j.duration)&&e>=j.start+j.duration}function J(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.sender)if(U.getIsManifestUpdateInProgress())te();else if((!r.isText||H.isTextEnabled())&&t&&e.representationId&&!t.appendInitSegmentFromCache(e.representationId)){const e=c.getCurrentRepresentation();if(0===e.range)return void Z();const t=i?i.getInitRequest(r,e):null;t?L.executeRequest(t):n&&(h.setInitSegmentRequired(!0),te())}}function Z(e){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(U.getIsManifestUpdateInProgress()||t.getIsPruningInProgress())return void te();let l=function(){let e;if(isNaN(n)||W()===A.default.TEXT&&!H.isTextEnabled())return null;if(i){const t=De();e=p?i.getSegmentRequestForTime(r,t,n):g?i.repeatSegmentRequest(r,t):i.getNextSegmentRequest(r,t)}return e}();var u;l?(p=!1,g=!1,u=l,isNaN(u.startTime+u.duration)||(n=u.startTime+u.duration),u.delayLoadingTime=(new Date).getTime()+h.getTimeToLoadDelay(),h.setTimeToLoadDelay(0),function(e){let t=e.url;return e.range&&(t=t.concat("_",e.range)),z.contains(t)}(u)?(o.warn(`Fragment request url ${u.url} for stream id ${j.id} and media type ${$} is on the ignore list and will be skipped`),te()):(o.debug(`Next fragment request url for stream id ${j.id} and media type ${$} is ${u.url} with request range ${u.range}`),L.executeRequest(u))):function(e){const t=c.getCurrentRepresentation();try{if(B.get().streaming.gaps.enableSeekFix&&(p||0===U.getTime())){let a;if(s?s&&t.segmentInfoType===I.default.SEGMENT_TIMELINE&&(a=i.getValidTimeAheadOfTargetTime(n,r,t,B.get().streaming.gaps.threshold)):(a=i.getValidTimeAheadOfTargetTime(n,r,t,B.get().streaming.gaps.threshold),isNaN(a)&&n>=t.adaptation.period.mpd.mediaPresentationDuration-t.segmentDuration&&(a=n-.1)),!isNaN(a)&&a!==n)return void(U.isSeeking()||0===U.getTime()?(o.warn(`Adjusting playback time ${a} because of gap in the manifest. Seeking by ${a-n}`),U.seek(a,!1,!1)):(o.warn(`Adjusting buffering time ${a} because of gap in the manifest. Adjusting time by ${a-n}`),je(a),e&&te()))}}catch(a){o.error(a)}ee()||e&&te()}(a)}function ee(){const e=c.getCurrentRepresentation(),r=i.isLastSegmentRequested(e,n);if(r){const e=i.getCurrentIndex();o.debug(`Segment requesting for stream ${j.id} has finished`),v.trigger(R.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:e},{streamId:j.id,mediaType:$}),t.segmentRequestingCompleted(e),Ce()}return r}function te(){h.startScheduleTimer(U.getLowLatencyModeEnabled()?B.get().streaming.scheduling.lowLatencyTimeout:B.get().streaming.scheduling.defaultTimeout)}function ne(e){w.addBufferState($,e.state,h.getBufferTarget()),e.state!==k.BUFFER_EMPTY||U.isSeeking()||(o.info("Buffer is empty! Stalling!"),w.pushPlayListTraceMetrics(new Date,ke.REBUFFERING_REASON))}function ie(e){L.syncExecutedRequestsWithBufferedRange(t.getBuffer().getAllBufferRanges(),j.duration),e.quotaExceeded&&e.from>U.getTime()&&je(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&h.startScheduleTimer()}function ae(e){if(!e||!e.lastRequestAppended||!e.lastRequestAppended.url)return;let t=e.lastRequestAppended.url;e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),o.warn(`Blacklisting segment with url ${t}`),z.add(t)}function oe(e){if(o.debug(`Appended bytes for ${e.mediaType} and stream id ${e.streamId}`),e.segmentType===N.HTTPRequest.INIT_SEGMENT_TYPE){const t=e.representationId;h.setLastInitializedRepresentationId(t),o.info("["+$+"] lastInitializedRepresentationId changed to "+t)}u&&u.enabled?me(u.newRepresentation,u.oldRepresentation):m||h.startScheduleTimer(0)}function ue(){u={newRepresentation:null,oldRepresentation:null,enabled:!1}}function de(e){return new Promise(n=>{if(!c)return Promise.resolve();let i=null;var a;i=e.newRepresentation?{selectedRepresentation:(a=e).newRepresentation,currentMediaInfo:a.newMediaInfo}:null!==r&&E.areMediaInfosEqual(r,e.newMediaInfo)?{currentMediaInfo:e.newMediaInfo,selectedRepresentation:c.getCurrentRepresentation()}:function(e){let t=NaN;return t=!B.get().streaming.abr.autoSwitchBitrate[e.newMediaInfo.type]&&e.previouslySelectedRepresentation?e.previouslySelectedRepresentation.bitrateInKbit:b.getInitialBitrateFor($),{selectedRepresentation:b.getOptimalRepresentationForBitrate(e.newMediaInfo,t,!1),currentMediaInfo:e.newMediaInfo}}(e),ce(i.currentMediaInfo),v.trigger();const s=b.getPossibleVoRepresentations(r,!1);return c.updateData(s,r.isFragmented,i.selectedRepresentation.id).then(()=>{!function(){const e=c.getCurrentRepresentation();t.getIsBufferingCompleted()||t.updateBufferTimestampOffset(e)}(),n()}).catch(e=>{o.error(e),n()})})}function ce(e){E.areMediaInfosEqual(r,e)||v.trigger(D.default.NEW_TRACK_SELECTED,{value:e}),r=e,b.handleNewMediaInfo(r),v.trigger(R.default.MEDIAINFO_UPDATED,{mediaType:$,streamId:j.id,currentMediaInfo:r})}function he(e){const n=e.newRepresentation,i=e.oldRepresentation;var a,s;n&&i||o.warn("_handleDifferentSwitchTypes() is missing the target representations"),e.reason&&e.reason.forceReplace?(a=n,s=i,L.abortRequests(),v.trigger(R.default.BUFFER_REPLACEMENT_STARTED,{mediaType:$,streamId:j.id},{mediaType:$,streamId:j.id}),h.setCheckPlaybackQuality(!1),t.prepareForForceReplacementQualitySwitch(a,s).then(()=>{fe()}).catch(()=>{fe()})):e&&e.reason&&e.reason.forceAbandon?function(e,n){t.prepareForAbandonQualitySwitch(e,n).then(()=>{ge()}).catch(()=>{ge()})}(n,i):O.getFastSwitchEnabled()?function(e,n){const i=U.getTime();let a=1.5*(isNaN(e.fragmentDuration)?1:e.fragmentDuration);const s=L.getRequests({state:q.FRAGMENT_MODEL_EXECUTED,time:i+a,threshold:0})[0];if(s&&!r.isText){const r=t.getBufferLevel(),o=b.getAbandonmentStateFor(j.id,$);s.bandwidth<e.bandwidth&&r>=a&&o===k.ALLOW_LOAD?t.prepareForFastQualitySwitch(e,n).then(()=>{pe(i,a)}).catch(()=>{pe(i,a)}):me(e,n)}else me(e,n)}(n,i):me(n,i),w.pushPlayListTraceMetrics(new Date,ke.REPRESENTATION_SWITCH_STOP_REASON),w.createPlaylistTraceMetrics(n.id,1e3*U.getTime(),U.getPlaybackRate())}function fe(){Pe(),ue(),d=!1}function ge(){L.abortRequests(),g=!0,h.setCheckPlaybackQuality(!1),h.startScheduleTimer(),d=!1}function pe(e,t){L.abortRequests(),je(e+t),h.setCheckPlaybackQuality(!1),h.startScheduleTimer(),d=!1}function me(e,n){const r=L.getRequests({state:q.FRAGMENT_MODEL_LOADING});if(r&&r.length>0)return o.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),u.newRepresentation=e,u.oldRepresentation=n,void(u.enabled=!0);t.prepareForDefaultQualitySwitch(e,n).then(()=>{be()}).catch(()=>{be()})}function be(){h.setCheckPlaybackQuality(!1),r.segmentAlignment||r.subSegmentAlignment?h.startScheduleTimer():Fe(),ue(),d=!1}function Te(e){o.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),U.isSeeking()||h.getSwitchTrack()||d||(o.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?h.setInitSegmentRequired(!0):je(e.request.startTime+e.request.duration/2),h.startScheduleTimer(0))}function Se(e){var t;o.info("OnFragmentLoadingCompleted for stream id "+j.id+" and media type "+$+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),r.isText&&h.startScheduleTimer(0),e.error&&e.request.serviceLocation&&(t=e,o.info("Fragment loading completed with an error"),t&&t.request&&t.request.type&&(t.request.type===N.HTTPRequest.INIT_SEGMENT_TYPE?J({representationId:t.request.representation.id,sender:{}},!1):t.request.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE&&(je(t.request.startTime+t.request.duration/2),Z({},!1))))}function we(){je(U.getTime()),xe().startScheduleTimer()}function Ie(e){const n=e.currentTrackInfo;if(!n)return;const r=l.find(e=>e.index===n.index&&e.lang===n.lang);r&&de(new ze({newMediaInfo:r})).then(()=>{t.setIsBufferingCompleted(!1),je(U.getTime()),h.setInitSegmentRequired(!0),h.startScheduleTimer()})}function _e(e){je(e.quotaExceededTime),Ce()}function Re(){return t?t.getBuffer():null}function xe(){return h}function Ce(){h&&h.clearScheduleTimer()}function De(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;return isNaN(t)?e=c?c.getCurrentRepresentation():null:((0,ve.checkInteger)(t),e=c?c.getRepresentationById(t):null),e}function Le(){return!!t&&t.getIsBufferingCompleted()}function Me(e){if(!B.get().streaming.enableManifestTimescaleMismatchFix)return;const t=e.chunk,n=t.bytes,r=De(t.representation.id);r&&(r.timescale=T.getMediaTimescaleFromMoov(n))}function Ne(e){const t=e.chunk,n=t.bytes,r=De(t.representation.id);if(r){let t;if(B.get().streaming.parseInbandPrft&&e.request.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE){t=t||T.parse(n);const e=function(e,t){const n=e.getBoxes("prft"),r=[];return n.forEach(e=>{r.push(function(e,t){let n="unknown";switch(e.flags){case 0:n=I.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:n=I.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:n=I.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let r=1e3*e.ntp_timestamp_sec+e.ntp_timestamp_frac/2**32*1e3;return r=Ue(y).getInstance().ntpToUTC(r),{type:n,ntpTimestamp:r,mediaTime:e.media_time/t}}(e,t))}),r}(t,r.timescale);e&&e.length&&v.trigger(D.default.INBAND_PRFT,{data:e},{streamId:j.id,mediaType:$})}const i=E.getEventsFor(r.mediaInfo,null,j),a=E.getEventsFor(r,r,j);if(i&&i.length>0||a&&a.length>0){const r=e.request;t=t||T.parse(n);const s=function(e,t,n,r){try{const i={},a=[],s=n.concat(r);for(let e=0,t=s.length;e<t;e++)i[s[e].schemeIdUri+"/"+s[e].value]=s[e];const o=e.getBoxes("emsg");if(!o||0===o.length)return a;const l=e.getBox("sidx"),u=!l||isNaN(l.earliest_presentation_time)||isNaN(l.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:l.earliest_presentation_time/l.timescale,d=Math.max(u,0),h=c.getCurrentRepresentation();for(let e=0,t=o.length;e<t;e++){const t=E.getEvent(o[e],i,d,h);t&&a.push(t)}return a}catch(i){return[]}}(t,r,i,a);v.trigger(R.default.INBAND_EVENTS,{events:s},{streamId:j.id})}}}function Pe(){const e=U.getTime();B.get().streaming.buffer.flushBufferAtTrackSwitch&&U.seek(e+.001,!1,!0),je(e),t.setSeekTarget(e),h.startScheduleTimer()}function Fe(){const e=U.getTime(),n=t.getContinuousBufferTimeForTargetTime(e);je(isNaN(n)?e:n),h.startScheduleTimer()}function Be(e){e&&!isNaN(e.time)&&(je(e.time),t.setSeekTarget(e.time))}function je(e){n=e,p=!0}return a={checkAndHandleCompletedBuffering:ee,clearScheduleTimer:Ce,createBufferSinks:function(e,n){const i=Re();return i?Promise.resolve(i):t?t.createBufferSink(r,e,n):Promise.resolve(null)},dischargePreBuffer:function(){t.dischargePreBuffer()},finalisePlayList:function(e,t){w.pushPlayListTraceMetrics(e,t)},getAllMediaInfos:function(){return l},getBuffer:Re,getBufferController:function(){return t},getBufferLevel:function(){return t?t.getBufferLevel():0},getFragmentModel:function(){return L},getMediaInfo:function(){return r},getMediaSource:function(){return t.getMediaSource()},getRepresentation:De,getRepresentationController:function(){return c},getScheduleController:xe,getStreamId:Y,getStreamInfo:function(){return j},getType:W,initialize:function(r,o,l){f=Oe(y).create({events:R.default,eventBus:v,streamInfo:j,timelineConverter:V,dashConstants:I.default,segmentBaseController:e.segmentBaseController,type:$}),i=Ee(y).create({streamInfo:j,type:$,timelineConverter:V,dashMetrics:w,mediaPlayerModel:O,baseURLController:e.baseURLController,errHandler:x,segmentsController:f,settings:B,boxParser:T,events:R.default,eventBus:v,errors:K,debug:(0,C.default)(y).getInstance(),dashConstants:I.default,constants:A.default,urlUtils:Ae(y).getInstance()}),s=j.manifestInfo.isDynamic,i.initialize(s),b.registerStreamType($,a),c=ye(y).create({streamInfo:j,type:$,abrController:b,dashMetrics:w,playbackController:U,timelineConverter:V,dashConstants:I.default,events:R.default,eventBus:v,errors:K,isDynamic:s,adapter:E,segmentsController:f}),t=function(e,t){let n=null;return e?(n=e!==A.default.TEXT||t?re(y).create({abrController:b,capabilities:S,errHandler:x,fragmentModel:L,manifestModel:M,mediaController:P,mediaPlayerModel:O,playbackController:U,representationController:c,settings:B,streamInfo:j,textController:H,type:e}):se(y).create({errHandler:x,fragmentModel:L,mimeType:F,settings:B,streamInfo:j,textController:H,type:e}),n):(x.error(new G.default(K.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,K.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}($,l),t&&t.initialize(r),h=le(y).create({streamInfo:j,type:$,mimeType:F,adapter:E,dashMetrics:w,mediaPlayerModel:O,fragmentModel:L,abrController:b,playbackController:U,textController:H,mediaController:P,bufferController:t,representationController:c,settings:B}),h.initialize(o),n=0,p=!1,g=!1},isBufferingCompleted:Le,prepareInnerPeriodPlaybackSeeking:function(e){return new Promise(n=>{if(t.hasBufferAtTime(e.seekTime))return t.pruneBuffer(),Q(t.getContinuousBufferTimeForTargetTime(e.seekTime))&&t.setIsBufferingCompleted(!0),void n();Ce(),L.abortRequests(),t.prepareForPlaybackSeek().then(()=>{const n=t.getAllRangesWithSafetyFactor(e.seekTime);return t.clearBuffers(n)}).then(()=>{const r=t.getContinuousBufferTimeForTargetTime(e.seekTime);if(Q(r))t.setIsBufferingCompleted(!0),n();else{const i=isNaN(r)?e.seekTime:r;je(i),t.setSeekTarget(i);const a=[];a.push(t.updateAppendWindow());const s=De();a.push(t.updateBufferTimestampOffset(s)),Promise.all(a).then(()=>{h.setInitSegmentRequired(!0),h.setCheckPlaybackQuality(!1),h.startScheduleTimer(),n()})}}).catch(e=>{o.error(e)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((e,n)=>{try{Ce(),L.abortRequests(),t.prepareForPlaybackSeek().then(()=>t.pruneAllSafely()).then(()=>{e()})}catch(r){n(r)}})},prepareQualityChange:function(e){e.newRepresentation&&(u&&u.enabled&&o.warn(`Canceling queued representation switch to ${u.newRepresentation.id} for ${$}`),e.isAdaptationSetSwitch?(o.debug(`Preparing quality switch to different AdaptationSet for type ${$}`),function(e){const t=e.newRepresentation;d=!0,Ce(),h.setSwitchTrack(!0);const n=t.mediaInfo;ce(n),de(new ze({newMediaInfo:n,newRepresentation:t})).then(()=>{he(e)})}(e)):(o.debug(`Preparing quality within the same AdaptationSet for type ${$}`),function(e){const t=e.newRepresentation;d=!0,Ce(),c.prepareQualityChange(t),he(e)}(e)))},prepareTrackSwitch:function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(r=>{o.debug(`Preparing track switch for type ${$}`);const i=$===A.default.TEXT||n||B.get().streaming.trackSwitchMode[$]===A.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&U.getTimeToStreamEnd(j)>B.get().streaming.buffer.stallThreshold;var s;t.getIsBufferingCompleted()&&!i?(s=e,new Promise(e=>{const n=c.getCurrentRepresentation();t.prepareForNonReplacementTrackSwitch(n,s).then(()=>{v.trigger(R.default.BUFFERING_COMPLETED,{},{streamId:j.id,mediaType:$}),e()}).catch(()=>{v.trigger(R.default.BUFFERING_COMPLETED,{},{streamId:j.id,mediaType:$}),e()})})).then(()=>{r()}):(h.setSwitchTrack(!0),i?function(e){return new Promise(n=>{v.trigger(R.default.BUFFER_REPLACEMENT_STARTED,{mediaType:$,streamId:j.id},{mediaType:$,streamId:j.id}),L.abortRequests();const r=De();t.prepareForReplacementTrackSwitch(r,e).then(()=>{Pe(),n()}).catch(()=>{Pe(),n()})})}(e).then(()=>{r()}):function(e){return new Promise(n=>{const r=()=>{const i=L.getRequests({state:q.FRAGMENT_MODEL_LOADING});if(i&&0!==i.length)v.once(D.default.FRAGMENT_LOADING_COMPLETED,r,a);else{const r=De();t.prepareForNonReplacementTrackSwitch(r,e).then(()=>{Fe(),n()}).catch(e=>{o.error(e),Fe(),n()})}};r()})}(e).then(()=>{r()}))})},probeNextRequest:function(){const e=De();return i.getNextSegmentRequestIdempotent(r,e)},reset:function(e,n){i&&i.reset(),t&&(t.reset(e,n),t=null),h&&(h.reset(),h=null),c&&(c.reset(),c=null),f&&(f=null),b&&b.unRegisterStreamType(Y(),$),v.off(R.default.INIT_FRAGMENT_NEEDED,J,a),v.off(R.default.MEDIA_FRAGMENT_NEEDED,Z,a),v.off(R.default.INIT_FRAGMENT_LOADED,Me,a),v.off(R.default.MEDIA_FRAGMENT_LOADED,Ne,a),v.off(R.default.BUFFER_LEVEL_STATE_CHANGED,ne,a),v.off(R.default.BUFFER_CLEARED,ie,a),v.off(R.default.SEEK_TARGET,Be,a),v.off(R.default.FRAGMENT_LOADING_ABANDONED,Te,a),v.off(R.default.FRAGMENT_LOADING_COMPLETED,Se,a),v.off(R.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,we,a),v.off(R.default.SET_NON_FRAGMENTED_TEXT,Ie,a),v.off(R.default.QUOTA_EXCEEDED,_e,a),v.off(R.default.SOURCE_BUFFER_ERROR,ae,a),v.off(R.default.BYTES_APPENDED_END_FRAGMENT,oe,a),X(),$=null,j=null},selectMediaInfo:de,setExplicitBufferingTime:je,setMediaInfoArray:function(e){l=e},setMediaSource:function(e){return t.setMediaSource(e,r)},setTrackSwitchInProgress:function(e){m=e},updateStreamInfo:function(e){return j=e,Le()?Promise.resolve():t.updateAppendWindow()}},o=(0,C.default)(y).getInstance().getLogger(a),X(),v.on(R.default.INIT_FRAGMENT_NEEDED,J,a),v.on(R.default.MEDIA_FRAGMENT_NEEDED,Z,a),v.on(R.default.INIT_FRAGMENT_LOADED,Me,a),v.on(R.default.MEDIA_FRAGMENT_LOADED,Ne,a),v.on(R.default.BUFFER_LEVEL_STATE_CHANGED,ne,a),v.on(R.default.BUFFER_CLEARED,ie,a),v.on(R.default.SEEK_TARGET,Be,a),v.on(R.default.FRAGMENT_LOADING_ABANDONED,Te,a),v.on(R.default.FRAGMENT_LOADING_COMPLETED,Se,a),v.on(R.default.QUOTA_EXCEEDED,_e,a),v.on(R.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,we,a),v.on(R.default.SET_NON_FRAGMENTED_TEXT,Ie,a),v.on(R.default.SOURCE_BUFFER_ERROR,ae,a),v.on(R.default.BYTES_APPENDED_END_FRAGMENT,oe,a),a}Be.__dashjs_factory_name="StreamProcessor";var je=x.default.getClassFactory(Be),qe=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},Ge=n(7263);function He(){let e,t;function n(){t&&(t.onloadend=t.onerror=t.onprogress=t.onload=null,t.abort(),t=null)}return e={load:function(e,r){if(t=null,t=new XMLHttpRequest,t.open(e.method,e.url,!0),e.responseType&&(t.responseType=e.responseType),e.headers)for(let n in e.headers){let r=e.headers[n];r&&t.setRequestHeader(n,r)}return t.withCredentials="include"===e.credentials,t.timeout=e.timeout,t.onload=function(){r.url=this.responseURL,r.status=this.status,r.statusText=this.statusText,r.headers=Ge.default.parseHttpHeaders(this.getAllResponseHeaders()),r.data=this.response},e.customData&&(t.onloadend=e.customData.onloadend,t.onprogress=e.customData.onprogress,t.onabort=e.customData.onabort,t.ontimeout=e.customData.ontimeout),t.send(),e.customData.abort=n.bind(this),!0},abort:n,getXhr:function(){return t},reset:function(){n(),e=null},resetInitialSettings:function(){n()}},e}He.__dashjs_factory_name="XHRLoader";var Ve=x.default.getClassFactory(He);function Ke(){const e=this.context,t=(0,$.default)(e).getInstance();let n,r,i;function a(e,t,n){e.customData.reader.read().then(n).catch(function(){s(e)})}function s(e){e.customData.onloadend&&e.customData.onloadend()}function o(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Date.now()}function l(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch(e){}}function u(e,t){try{if((e=e.filter(n=>n.bytes>t/4/e.length)).length>1){let t=0;const n=(e[e.length-1].timestamp-e[0].timestamp)/e.length;return e.forEach((r,i)=>{const a=e[i+1];if(a){const e=a.timestamp-r.timestamp;t+=e<n?e:0}}),t}return null}catch(n){return null}}function d(e,t){return 8*e/t}return i=(0,C.default)(e).getInstance().getLogger(n),n={abort:l,calculateDownloadedTime:u,load:function(e,n){const c=function(e){const t=new Headers;if(e.headers)for(let n in e.headers){let r=e.headers[n];r&&t.append(n,r)}return t}(e),h=function(e){let t;return"function"==typeof window.AbortController&&(t=new AbortController,e.customData.abortController=t,t.signal.onabort=e.customData.onabort),e.customData.abort=l.bind(e),t}(e),f=(g=e,p=c,m=h,new Request(g.url,{method:g.method,headers:p,credentials:g.credentials,signal:m?m.signal:void 0}));var g,p,m;fetch(f).then(s=>{!function(e,n,s){(function(e,t){e.status=t.status,e.statusText=t.statusText,e.url=t.url;const n={};for(const r of t.headers.keys())n[r]=t.headers.get(r);e.headers=n})(s,e),e.ok||n.customData.onloadend();let l=0,c=!1,h=new Uint8Array,f=0;n.customData.reader=e.body.getReader();let g=[],p=[],m=[],y=!0;const v=t.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,b=e=>{let{value:t,done:E}=e;E?function(){if(h){const e=function(){let e=null;return v===A.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?e=function(){const e=function(e,t){try{let n,r;if(n=e.slice(0,-1),r=t.slice(0,-1),n.length!==r.length&&i.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${n.length}, Mdat: ${r.length}`),n.length<=1)return null;let a=[],s=0,o=0;for(let e=0;e<n.length;e++)if(n[e]&&r[e]){let t=r[e].timestamp-n[e].timestamp;if(t>1){const n=d(r[e].bytes,t);a.push(n),o=0}else{0===o&&(o=n[e].timestamp,s=0);let t=r[e].timestamp-o;if(t>1){s+=r[e].bytes;const n=d(s,t);a.push(n),o=0}else s+=r[e].bytes}}return a.length>0?a.reduce((e,t)=>e+t,0)/a.length:null}catch(n){return null}}(p,m);return e?8*l/e:null}():v===A.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(e=u(g,l)),e}();n.customData.onprogress({loaded:l,total:l,lengthComputable:!0,time:e}),s.data=h.buffer}n.customData.onloadend()}():(t&&t.length>0&&function(e){h=function(e,t){if(0===e.length)return t;const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(h,e),l+=e.length,g.push({timestamp:o(),bytes:e.length}),v===A.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&y&&r.findLastTopIsoBoxCompleted(["moof"],h,f).found&&(y=!1,p.push({timestamp:o()}));const t=r.findLastTopIsoBoxCompleted(["moov","mdat"],h,f);var i;t.found?function(e){const t=function(e){let t;return e===h.length?(t=h,h=new Uint8Array):(t=new Uint8Array(h.subarray(0,e)),h=h.subarray(e)),t}(e.startOffsetOfLastFoundTargetBox+e.sizeOfLastFoundTargetBox);v!==A.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||y||(y=!0,m.push({timestamp:o(),bytes:t.length})),n.customData.onprogress({data:t.buffer,lengthComputable:!1,noTrace:!0}),f=0}(t):(f=(i=t).startOffsetOfLastCompletedBox+i.sizeOfLastCompletedBox,c||(n.customData.onprogress({lengthComputable:!1,noTrace:!0}),c=!0))}(t),a(n,0,b))};a(n,0,b)}(s,e,n)}).catch(()=>{s(e)})},reset:function(){},setConfig:function(e){r=e.boxParser}},n}Ke.__dashjs_factory_name="FetchLoader";var $e=x.default.getClassFactory(Ke),Ye=n(913),We=class{constructor(){this.period=null,this.index=-1,this.type=null}};class Xe{constructor(e,t,n,r){this.url=e||"",this.serviceLocation=t||e||"",this.dvbPriority=n||1,this.dvbWeight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}Xe.DEFAULT_DVB_PRIORITY=1,Xe.DEFAULT_DVB_WEIGHT=1;var Qe=Xe,Je=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(e){e&&(this.schemeIdUri=e.schemeIdUri?e.schemeIdUri:null,this.value=null!==e.value&&void 0!==e.value?e.value.toString():null,this.id=e.id?e.id:null,e[I.default.DVB_URL]&&(this.dvbUrl=e[I.default.DVB_URL]),e[I.default.DVB_MIMETYPE]&&(this.dvbMimeType=e[I.default.DVB_MIMETYPE]),e[I.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=e[I.default.DVB_FONTFAMILY]))}inArray(e){return!!e&&e.some(e=>this.schemeIdUri===e.schemeIdUri&&(this.value?this.value.toString().match(e.value):"".match(e.value)))}},Ze=class extends Je{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(e){super.init(e),e&&(this.version=e.version,this.sessionID=e.sessionID,this.contentID=e.contentID,this.mode=e.mode??"query",this.keys=e.keys?e.keys.split(" "):null,this.includeInRequests=e.includeInRequests?e.includeInRequests.split(" "):["segment"],this.schemeIdUri=e.schemeIdUri)}},et=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},tt=class extends Je{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(e){super.init(e),e&&(this.ref=e.hasOwnProperty(I.default.REF)?e[I.default.REF]:null,this.refId=e.hasOwnProperty(I.default.REF_ID)?e[I.default.REF_ID]:null,this.robustness=e.hasOwnProperty(I.default.ROBUSTNESS)?e[I.default.ROBUSTNESS]:null,this.cencDefaultKid=e.hasOwnProperty(I.default.CENC_DEFAULT_KID)?e[I.default.CENC_DEFAULT_KID]:null,this.pssh=e.hasOwnProperty(I.default.PSSH)?e[I.default.PSSH]:null,this.pro=e.hasOwnProperty(I.default.PRO)?e[I.default.PRO]:null,this.laUrl=e.hasOwnProperty(I.default.LA_URL)?e[I.default.LA_URL]:e.hasOwnProperty(I.default.LA_URL_LOWER_CASE)?e[I.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(e){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(t=>{null===this[t]&&(this[t]=e[t])})}},nt=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},rt=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},it=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},at=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},st=class{constructor(e,t){this.url=e||"",this.serviceLocation=t||null,this.queryParams={}}},ot=n(7393),lt=class{constructor(e,t,n){this.url=e||"",this.serviceLocation=t||null,this.ttl=n||NaN,this.queryParams={}}};class ut{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}ut.DEFAULT_ID="defaultId";var dt=ut,ct=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},ht=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN,this.endNumber=null}hasInitialization(){return null!==this.initialization||null!==this.range}hasSegments(){return this.segmentInfoType!==I.default.BASE_URL&&this.segmentInfoType!==I.default.SEGMENT_BASE&&!this.indexRange}},ft=n(5717);function gt(){let e,t,n,r;const i=this.context,a=Ae(i).getInstance(),s=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function o(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation&&e.Representation.length){const n=S(e.Representation[0]);if(n&&n.some(e=>A.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)>=0))return t===A.default.IMAGE}if(e.ContentComponent&&e.ContentComponent.length>0){if(e.ContentComponent.length>1)return t===A.default.MUXED;if(e.ContentComponent[0].contentType===t)return!0}const n=t===A.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation&&e.Representation.length){const t=e.Representation[0].codecs;if(n.test(t))return!0}if(e.hasOwnProperty(I.default.MIME_TYPE))return n.test(e.mimeType);if(e.Representation){let t;for(let r=0;r<e.Representation.length;r++)if(t=e.Representation[r],t.hasOwnProperty(I.default.MIME_TYPE))return n.test(t.mimeType)}return!1}function l(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(I.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(I.default.SEGMENT_TIMELINE)||e.hasOwnProperty(I.default.SEGMENT_LIST)||e.hasOwnProperty(I.default.SEGMENT_BASE))return!0;if(e.Representation&&e.Representation.length>0){const t=e.Representation[0];if(t.hasOwnProperty(I.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(I.default.SEGMENT_TIMELINE)||t.hasOwnProperty(I.default.SEGMENT_LIST)||t.hasOwnProperty(I.default.SEGMENT_BASE))return!0}return!1}function u(e){return o(e,A.default.VIDEO)}function d(e){return o(e,A.default.TEXT)}function c(e){return o(e,A.default.IMAGE)}function h(e){return e&&e.Representation&&e.Representation.sort((e,t)=>e.bandwidth-t.bandwidth),e}function f(e,t){return e&&e.Period&&s(t)&&e.Period[t]?e.Period[t].AdaptationSet:[]}function g(e){return e&&e.Period?e.Period:[]}function p(e){const t=m(e);return t&&t.length>0}function m(e){let t=[];if(!e)return t;const n=y(e);return t=t.concat(n),e.hasOwnProperty(I.default.ADAPTATION_SET)&&e[I.default.ADAPTATION_SET].length>0&&e[I.default.ADAPTATION_SET].forEach(e=>{const n=y(e);t=t.concat(n)}),t}function y(e){return e&&e.hasOwnProperty(I.default.CONTENT_PROTECTION)&&0!==e.ContentProtection.length?e[I.default.CONTENT_PROTECTION].map(e=>{const t=new tt;return t.init(e),t}):[]}function v(e){let t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===I.default.DYNAMIC),t}function b(e){if(!e)return null;const t=e[I.default.FRAMERATE];if(!t)return null;if("string"==typeof t&&t.includes("/")){const[e,n]=t.split("/").map(e=>parseInt(e,10));if(!isNaN(e)&&!isNaN(n)&&0!==n)return e/n}return parseInt(t)}function E(e,t){return t&&t.hasOwnProperty(e)&&t[e].length?t[e].map(e=>{const t=new Je;return t.init(e),t}):[]}function T(e,t){if(!t)return[];let n=function(e,t){if(!t||!t.length)return[];let n=t[0][e]||[];return 0===n.length?[]:1===t.length?n:n.filter(n=>t.slice(1).every(t=>t.hasOwnProperty(e)&&t[e].some(e=>e.schemeIdUri===n.schemeIdUri&&e.value===n.value)))}(e,t[I.default.REPRESENTATION]);return t.hasOwnProperty(e)&&t[e].length&&n.push(...t[e]),n.map(e=>{const t=new Je;return t.init(e),t})}function S(e){return E(I.default.ESSENTIAL_PROPERTY,e)}function w(e){return E(I.default.SUPPLEMENTAL_PROPERTY,e)}function k(e){if(!e||!e.S)return NaN;let t=e.S[0],n=e.S[1];return t.hasOwnProperty("d")?t.d:n.t-t.t}function _(e){const t=e.presentationTimeOffset;return e.adaptation.period.start-t}function R(e,t){if(!e)throw new Error("Period cannot be null or undefined");let n=dt.DEFAULT_ID+"_"+t;return e.hasOwnProperty(I.default.ID)&&e.id.toString().length>0&&"__proto__"!==e.id&&(n=e.id.toString()),n}function x(e,t,n){const r=[];let i;if(!e)return r;for(i=0;i<e.length;i++){const a=new it;if(a.timescale=1,a.representation=t,!e[i].hasOwnProperty(A.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");a.schemeIdUri=e[i].schemeIdUri,e[i].hasOwnProperty(I.default.TIMESCALE)&&(a.timescale=e[i].timescale),e[i].hasOwnProperty(I.default.VALUE)&&(a.value=e[i].value),r.push(a),a.period=n}return r}function D(e){const t=[],n=e.BaseURL||[e.baseUri];let r=!1;return n.some(n=>{if(n){const i=new Qe;let s=n.__text||n;return a.isRelative(s)&&(r=!0,e.baseUri&&(s=a.resolve(s,e.baseUri))),i.url=s,n.hasOwnProperty(I.default.SERVICE_LOCATION)&&n.serviceLocation.length?i.serviceLocation=n.serviceLocation:i.serviceLocation=s,n.hasOwnProperty(I.default.DVB_PRIORITY)&&(i.dvbPriority=n[I.default.DVB_PRIORITY]),n.hasOwnProperty(I.default.DVB_WEIGHT)&&(i.dvbWeight=n[I.default.DVB_WEIGHT]),n.hasOwnProperty(I.default.AVAILABILITY_TIME_OFFSET)&&(i.availabilityTimeOffset=n[I.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(I.default.AVAILABILITY_TIME_COMPLETE)&&(i.availabilityTimeComplete="false"!==n[I.default.AVAILABILITY_TIME_COMPLETE]),t.push(i),r}}),t}function L(e){const t=new nt;return t.serverUrl=e.__text,e.hasOwnProperty(I.default.DEFAULT_SERVICE_LOCATION)&&(t.defaultServiceLocation=e[I.default.DEFAULT_SERVICE_LOCATION],t.defaultServiceLocationArray=t.defaultServiceLocation.split(" ")),e.hasOwnProperty(I.default.QUERY_BEFORE_START)&&(t.queryBeforeStart="true"===e[I.default.QUERY_BEFORE_START].toLowerCase()),e.hasOwnProperty(I.default.CLIENT_REQUIREMENT)&&(t.clientRequirement="false"!==e[I.default.CLIENT_REQUIREMENT].toLowerCase()),t}function M(e){const t=new et;return e.hasOwnProperty(I.default.CMCD_PARAMETERS)&&e[I.default.CMCD_PARAMETERS].schemeIdUri===A.default.CTA_5004_2023_SCHEME&&(t.cmcdParameters=new Ze,t.cmcdParameters.init(e[I.default.CMCD_PARAMETERS])),e.hasOwnProperty(I.default.SERVICE_LOCATIONS)&&""!==e[I.default.SERVICE_LOCATIONS]&&(t.serviceLocations=e[I.default.SERVICE_LOCATIONS],t.serviceLocationsArray=t.serviceLocations.toString().split(" ")),e.hasOwnProperty(I.default.ADAPTATION_SETS)&&""!==e[I.default.ADAPTATION_SETS]&&(t.adaptationSets=e[I.default.ADAPTATION_SETS],t.adaptationSetsArray=t.adaptationSets.toString().split(" ")),t}return e={getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(I.default.ACCESSIBILITY)&&e[I.default.ACCESSIBILITY].length?e[I.default.ACCESSIBILITY].map(e=>{const t=new Je;return t.init(e),t}):[]},getAdaptationForId:function(e,t,n){const r=f(t,n);let i,a;for(i=0,a=r.length;i<a;i++)if(r[i].hasOwnProperty(I.default.ID)&&r[i].id===e)return r[i];return null},getAdaptationForIndex:function(e,t,n){const r=f(t,n);return r.length>0&&s(e)?r[e]:null},getAdaptationsForPeriod:function(e){const n=e&&s(e.index)?e.mpd.manifest.Period[e.index]:null,r=[];let i,a,l;if(n&&n.AdaptationSet)for(l=0;l<n.AdaptationSet.length;l++)a=n.AdaptationSet[l],i=new We,a.hasOwnProperty(I.default.ID)&&(i.id=a.id),i.index=l,i.period=e,o(a,A.default.MUXED)?i.type=A.default.MUXED:o(a,A.default.AUDIO)?i.type=A.default.AUDIO:u(a)?i.type=A.default.VIDEO:d(a)?i.type=A.default.TEXT:c(a)?i.type=A.default.IMAGE:t.warn("Unknown Adaptation stream type"),r.push(i);return r},getAdaptationsForType:function(e,t,n){const r=f(e,t);let i,a;const s=[];for(i=0,a=r.length;i<a;i++)o(r[i],n)&&s.push(h(r[i]));return s},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(I.default.AUDIO_CHANNEL_CONFIGURATION)&&e[I.default.AUDIO_CHANNEL_CONFIGURATION].length?e[I.default.AUDIO_CHANNEL_CONFIGURATION].map(e=>{const t=new Je;return t.init(e),t}):[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(I.default.AUDIO_CHANNEL_CONFIGURATION)&&e[I.default.AUDIO_CHANNEL_CONFIGURATION].length?e[I.default.AUDIO_CHANNEL_CONFIGURATION].map(e=>{const t=new Je;return t.init(e),t}):[]},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(I.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getBaseURLsFromElement:D,getBitrateListForAdaptation:function(e){const t=h(e);return(t&&t.Representation?t.Representation:[]).map(e=>({bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}))},getCodec:function(e,t,n){let r=null;if(e&&e.Representation&&e.Representation.length>0){const i=s(t)&&t>=0&&t<e.Representation.length?e.Representation[t]:e.Representation[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getCombinedEssentialPropertiesForAdaptationSet:function(e){return T(I.default.ESSENTIAL_PROPERTY,e)},getCombinedSupplementalPropertiesForAdaptationSet:function(e){return T(I.default.SUPPLEMENTAL_PROPERTY,e)},getContentProtectionByAdaptation:function(e){return y(e)},getContentProtectionByManifest:function(e){let t=[];if(!e)return t;const n=y(e);return t=t.concat(n),e.hasOwnProperty(I.default.PERIOD)&&e[I.default.PERIOD].length>0&&e[I.default.PERIOD].forEach(e=>{const n=m(e);t=t.concat(n)}),t},getContentProtectionByPeriod:m,getContentSteering:function(e){if(e&&e.hasOwnProperty(I.default.CONTENT_STEERING))return L(e[I.default.CONTENT_STEERING][0])},getDuration:function(e){let t;return t=e&&e.hasOwnProperty(I.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,t},getEssentialPropertiesForAdaptationSet:function(e){return E(I.default.ESSENTIAL_PROPERTY,e)},getEssentialPropertiesForRepresentation:S,getEventStreamForAdaptationSet:function(e,t,n){let r,i,a;return e&&e.Period&&t&&t.period&&s(t.period.index)&&(i=e.Period[t.period.index],i&&i.AdaptationSet&&s(t.index)&&(a=i.AdaptationSet[t.index],a&&(r=a.InbandEventStream))),x(r,null,n)},getEventStreamForRepresentation:function(e,t,n){let r,i,a,o;return e&&e.Period&&t&&t.adaptation&&t.adaptation.period&&s(t.adaptation.period.index)&&(i=e.Period[t.adaptation.period.index],i&&i.AdaptationSet&&s(t.adaptation.index)&&(a=i.AdaptationSet[t.adaptation.index],a&&a.Representation&&s(t.index)&&(o=a.Representation[t.index],o&&(r=o.InbandEventStream)))),x(r,t,n)},getEventsForPeriod:function(e){const t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period:null,i=n&&e&&s(e.index)?n[e.index].EventStream:null,a=[];let o,l;if(i)for(o=0;o<i.length;o++){const t=new it;if(t.period=e,t.timescale=1,!i[o].hasOwnProperty(A.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(t.schemeIdUri=i[o][A.default.SCHEME_ID_URI],i[o].hasOwnProperty(I.default.TIMESCALE)&&(t.timescale=i[o][I.default.TIMESCALE]),i[o].hasOwnProperty(I.default.VALUE)&&(t.value=i[o][I.default.VALUE]),i[o].hasOwnProperty(I.default.PRESENTATION_TIME_OFFSET)&&(t.presentationTimeOffset=i[o][I.default.PRESENTATION_TIME_OFFSET]),l=0;i[o].Event&&l<i[o].Event.length;l++){const n=i[o].Event[l],s=new rt;s.presentationTime=0,s.eventStream=t,n.hasOwnProperty(I.default.PRESENTATION_TIME)&&(s.presentationTime=n.presentationTime);const u=t.presentationTimeOffset?t.presentationTimeOffset/t.timescale:0;s.calculatedPresentationTime=s.presentationTime/t.timescale+e.start-u,n.hasOwnProperty(I.default.DURATION)&&(s.duration=n.duration/t.timescale),n.hasOwnProperty(I.default.ID)?s.id=parseInt(n.id):s.id=null,n.Signal&&n.Signal.Binary?s.messageData=r.decodeArray(n.Signal.Binary.toString()):s.messageData=n.messageData||n.__cdata||n.__text,a.push(s)}}return a},getFramerate:b,getId:function(e){return e&&e[I.default.ID]||null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;const r=f(t,n);for(let a=0;a<r.length;a++)if((0,ot.default)(i).getInstance().areEqual(r[a],e))return a;return-1},getIsDynamic:v,getIsFragmented:l,getIsText:d,getIsTypeOf:o,getLabelsForAdaptation:function(e){if(!e||!e.Label)return[];const t=[];for(let n=0;n<e.Label.length;n++)t.push({lang:e.Label[n].lang,text:e.Label[n].__text||e.Label[n]});return t},getLanguageForAdaptation:function(e){let t="";return e&&e.hasOwnProperty(I.default.LANG)&&(t=e.lang),t},getLocation:function(e){return e&&e.hasOwnProperty(I.default.LOCATION)?e[I.default.LOCATION].map(e=>{const t=e.__text||e,n=e.hasOwnProperty(I.default.SERVICE_LOCATION)?e[I.default.SERVICE_LOCATION]:null;return new st(t,n)}):[]},getManifestUpdatePeriod:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(I.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getMimeType:function(e){return e&&e.Representation&&e.Representation.length>0?e.Representation[0].mimeType:null},getMpd:function(e){const t=new at;return e&&(t.manifest=e,e.hasOwnProperty(I.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(I.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(I.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(I.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(I.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(I.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(I.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(I.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getPatchLocation:function(e){return e&&e.hasOwnProperty(I.default.PATCH_LOCATION)?e[I.default.PATCH_LOCATION].map(e=>{const t=e.__text||e,n=e.hasOwnProperty(I.default.SERVICE_LOCATION)?e[I.default.SERVICE_LOCATION]:null;let r=e.hasOwnProperty(I.default.TTL)?1e3*parseFloat(e[I.default.TTL]):NaN;return new lt(t,n,r)}):[]},getProducerReferenceTimesForAdaptation:function(e){const t=e&&e.hasOwnProperty(I.default.PRODUCER_REFERENCE_TIME)?e[I.default.PRODUCER_REFERENCE_TIME]:[];(e&&e.hasOwnProperty(I.default.REPRESENTATION)?e[I.default.REPRESENTATION]:[]).forEach(e=>{e.hasOwnProperty(I.default.PRODUCER_REFERENCE_TIME)&&t.push(...e[I.default.PRODUCER_REFERENCE_TIME])});const n=[];return t.forEach(e=>{const t=new ct;e.hasOwnProperty(I.default.ID)&&(t[I.default.ID]=parseInt(e[I.default.ID]),e.hasOwnProperty(I.default.WALL_CLOCK_TIME)&&(t[I.default.WALL_CLOCK_TIME]=e[I.default.WALL_CLOCK_TIME],e.hasOwnProperty(I.default.PRESENTATION_TIME)&&(t[I.default.PRESENTATION_TIME]=e[I.default.PRESENTATION_TIME],e.hasOwnProperty(I.default.INBAND)&&(t[I.default.INBAND]="false"!==e[I.default.INBAND]),e.hasOwnProperty(I.default.TYPE)&&(t[I.default.TYPE]=e[I.default.TYPE]),n.push(t))))}),n},getPublishTime:function(e){return e&&e.hasOwnProperty(I.default.PUBLISH_TIME)?new Date(e[I.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(e,t){const n=g(t);return n.length>0&&s(e)?n[e]:null},getRealPeriods:g,getRegularPeriods:function(e){const r=!!e&&v(e.manifest),i=[];let a,s,o=null,l=null,u=null,d=null;for(s=0,a=e&&e.manifest&&e.manifest.Period?e.manifest.Period.length:0;s<a;s++)l=e.manifest.Period[s],l.hasOwnProperty(I.default.START)?(d=new dt,d.start=l.start):null!==o&&o.hasOwnProperty(I.default.DURATION)&&null!==u?(d=new dt,d.start=parseFloat((u.start+u.duration).toFixed(5))):0!==s||r||(d=new dt,d.start=0),null!==u&&isNaN(u.duration)&&(null!==d?u.duration=parseFloat((d.start-u.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==d&&(d.id=R(l,s),d.index=s,d.mpd=e,d.isEncrypted=p(l),l.hasOwnProperty(I.default.DURATION)&&(d.duration=l.duration),u&&(u.nextPeriodId=d.id),i.push(d),o=l,u=d),l=null,d=null;return 0===i.length||null!==u&&isNaN(u.duration)&&(u.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(A.default.MISSING_CONFIG_ERROR)}();const t=v(e.mpd.manifest);let r;return e.mpd.manifest.mediaPresentationDuration?r=e.mpd.manifest.mediaPresentationDuration:e.duration?r=e.duration:t?r=Number.POSITIVE_INFINITY:n.error(new G.default(K.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),r}(u)-u.start).toFixed(5))),i},getRepresentationCount:function(e){return e&&e.Representation?e.Representation.length:0},getRepresentationFor:function(e,t){return t&&t.Representation&&t.Representation.length>0&&s(e)?t.Representation[e]:null},getRepresentationSortFunction:function(){return(e,t)=>e.bandwidth-t.bandwidth},getRepresentationsForAdaptation:function(e,t){const n=[],r=function(e){if(e&&e.period&&s(e.period.index)){const t=e.period.mpd.manifest.Period[e.period.index];if(t&&t.AdaptationSet&&s(e.index))return h(t.AdaptationSet[e.index])}}(e);let i,a;if(r&&r.Representation){if(e&&e.period&&s(e.period.index)){const t=D(e.period.mpd.manifest);t&&(a=t[0])}for(let s=0,o=r.Representation.length;s<o;++s){const o=r.Representation[s],u=new ht;if(u.index=s,u.adaptation=e,u.mediaInfo=t,o.hasOwnProperty(I.default.ID)&&(u.id=o.id),o.hasOwnProperty(I.default.CODECS)&&(u.codecs=o.codecs,u.codecFamily=Ge.default.getCodecFamily(u.codecs)),o.hasOwnProperty(I.default.MIME_TYPE)&&(u.mimeType=o[I.default.MIME_TYPE]),o.hasOwnProperty(I.default.CODEC_PRIVATE_DATA)&&(u.codecPrivateData=o.codecPrivateData),o.hasOwnProperty(I.default.BANDWITH)&&(u.bandwidth=o.bandwidth,u.bitrateInKbit=o.bandwidth/1e3),o.hasOwnProperty(I.default.WIDTH)&&(u.width=o.width),o.hasOwnProperty(I.default.HEIGHT)&&(u.height=o.height),o.hasOwnProperty(I.default.SCAN_TYPE)&&(u.scanType=o.scanType),o.hasOwnProperty(I.default.FRAMERATE)&&(u.frameRate=b(o)),o.hasOwnProperty(I.default.QUALITY_RANKING)&&(u.qualityRanking=o[I.default.QUALITY_RANKING]),o.hasOwnProperty(I.default.MAX_PLAYOUT_RATE)&&(u.maxPlayoutRate=o.maxPlayoutRate),o.hasOwnProperty(I.default.SEGMENT_BASE)?(i=o.SegmentBase,u.segmentInfoType=I.default.SEGMENT_BASE):o.hasOwnProperty(I.default.SEGMENT_LIST)?(i=o.SegmentList,i.hasOwnProperty(I.default.SEGMENT_TIMELINE)?u.segmentInfoType=I.default.SEGMENT_TIMELINE:u.segmentInfoType=I.default.SEGMENT_LIST):o.hasOwnProperty(I.default.SEGMENT_TEMPLATE)?(i=o.SegmentTemplate,i.hasOwnProperty(I.default.SEGMENT_TIMELINE)?u.segmentInfoType=I.default.SEGMENT_TIMELINE:u.segmentInfoType=I.default.SEGMENT_TEMPLATE,i.hasOwnProperty(I.default.INITIALIZATION_MINUS)&&(u.initialization=i.initialization.split("$Bandwidth$").join(o.bandwidth).split("$RepresentationID$").join(o.id))):u.segmentInfoType=I.default.BASE_URL,u.essentialProperties=S(o),u.supplementalProperties=w(o),i){if(i.hasOwnProperty(I.default.INITIALIZATION)){const e=i.Initialization;e.hasOwnProperty(I.default.SOURCE_URL)&&(u.initialization=e.sourceURL),e.hasOwnProperty(I.default.RANGE)&&(u.range=e.range)}else d(r)&&l(r)&&r.mimeType&&-1===r.mimeType.indexOf("application/mp4")&&(u.range=0);i.hasOwnProperty(I.default.TIMESCALE)&&(u.timescale=i.timescale),i.hasOwnProperty(I.default.DURATION)?u.segmentDuration=i.duration/u.timescale:o.hasOwnProperty(I.default.SEGMENT_TEMPLATE)&&(i=o.SegmentTemplate,i.hasOwnProperty(I.default.SEGMENT_TIMELINE)&&(u.segmentDuration=k(i.SegmentTimeline)/u.timescale)),i.hasOwnProperty(I.default.MEDIA)&&(u.media=i.media),i.hasOwnProperty(I.default.START_NUMBER)&&(u.startNumber=parseInt(i.startNumber)),i.hasOwnProperty(I.default.INDEX_RANGE)&&(u.indexRange=i.indexRange),i.hasOwnProperty(I.default.PRESENTATION_TIME_OFFSET)&&(u.presentationTimeOffset=i.presentationTimeOffset/u.timescale),i.hasOwnProperty(I.default.AVAILABILITY_TIME_OFFSET)?u.availabilityTimeOffset=i.availabilityTimeOffset:a&&void 0!==a.availabilityTimeOffset&&(u.availabilityTimeOffset=a.availabilityTimeOffset),i.hasOwnProperty(I.default.AVAILABILITY_TIME_COMPLETE)?u.availabilityTimeComplete="false"!==i.availabilityTimeComplete:a&&void 0!==a.availabilityTimeComplete&&(u.availabilityTimeComplete=a.availabilityTimeComplete),i.hasOwnProperty(I.default.END_NUMBER)&&(u.endNumber=i[I.default.END_NUMBER])}u.mseTimeOffset=_(u),u.path=[e.period.index,e.index,s],isNaN(u.width)||isNaN(u.height)||isNaN(u.frameRate)||(u.pixelsPerSecond=Math.max(1,u.width*u.height*u.frameRate),isNaN(u.bandwidth)||(u.bitsPerPixel=u.bandwidth/u.pixelsPerSecond)),n.push(u)}}return n},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(I.default.ROLE)&&e[I.default.ROLE].length?e[I.default.ROLE].map(e=>{e.schemeIdUri===A.default.DASH_ROLE_SCHEME_ID&&"Main"===e.value&&(e.value=I.default.MAIN);const t=new Je;return t.init(e),t}):[]},getSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(I.default.SEGMENT_ALIGNMENT))&&"true"===e[I.default.SEGMENT_ALIGNMENT]},getSelectionPriority:function(e){try{const t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(t){return 1}},getServiceDescriptions:function(e){const t=[];if(e&&e.hasOwnProperty(I.default.SERVICE_DESCRIPTION))for(const n of e.ServiceDescription){let e=null,r=null,i=null,a=null,s=null,o=null,l=null,u=null;for(const t in n)if(n.hasOwnProperty(t))if(t===I.default.ID)e=n[t];else if(t===I.default.SERVICE_DESCRIPTION_SCOPE)r=n[t].schemeIdUri;else if(t===I.default.SERVICE_DESCRIPTION_LATENCY)i={target:parseInt(n[t].target),max:parseInt(n[t].max),min:parseInt(n[t].min),referenceId:parseInt(n[t].referenceId)};else if(t===I.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)a={max:parseFloat(n[t].max),min:parseFloat(n[t].min)};else if(t===I.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)s={mediaType:n[t].mediaType,max:parseInt(n[t].max),min:parseInt(n[t].min),target:parseInt(n[t].target),type:n[t].type,maxQualityDifference:parseInt(n[t].maxQualityDifference)};else if(t===I.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)o={mediaType:n[t].mediaType,max:parseInt(n[t].max),min:parseInt(n[t].min),target:parseInt(n[t].target)};else if(t===I.default.CONTENT_STEERING){let e=n[t];e=Array.isArray(e)?e.at(e.length-1):e,l=L(e)}else t===I.default.CLIENT_DATA_REPORTING&&(u=M(n[t]));t.push({id:e,schemeIdUri:r,latency:i,playbackRate:a,operatingQuality:s,operatingBandwidth:o,contentSteering:l,clientDataReporting:u})}return t},getSubSegmentAlignment:function(e){return!(!e||!e.hasOwnProperty(I.default.SUB_SEGMENT_ALIGNMENT))&&"true"===e[I.default.SUB_SEGMENT_ALIGNMENT]},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(I.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(e){return E(I.default.SUPPLEMENTAL_PROPERTY,e)},getSupplementalPropertiesForRepresentation:w,getUTCTimingSources:function(e){const t=v(e),n=!!e&&e.hasOwnProperty(I.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming:null,i=[];return(t||n)&&r&&r.forEach(function(e){const t=new ft.default;e.hasOwnProperty(A.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(I.default.VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(I.default.VIEWPOINT)&&e[I.default.VIEWPOINT].length?e[I.default.VIEWPOINT].map(e=>{const t=new Je;return t.init(e),t}):[]},hasProfile:function(e,t){let n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n},isPeriodEncrypted:p,setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(r=e.BASE64))}},t=(0,C.default)(i).getInstance().getLogger(e),e}gt.__dashjs_factory_name="DashManifestModel";var pt=x.default.getSingletonFactory(gt);const mt={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},yt=mt;class vt{constructor(e,t){Array.isArray(e)&&(e=e.map(e=>e instanceof vt?e:new vt(e))),this.value=e,this.params=t}}const bt="Dict";function Et(e,t,n,r){return new Error(`failed to ${e} "${i=t,Array.isArray(i)?JSON.stringify(i):i instanceof Map?"Map{}":i instanceof Set?"Set{}":"object"==typeof i?JSON.stringify(i):String(i)}" as ${n}`,{cause:r});var i}function Tt(e,t,n){return Et("serialize",e,t,n)}class St{constructor(e){this.description=e}}const wt="Bare Item",At="Boolean",It="Byte Sequence",kt="Integer";function _t(e){return e<-999999999999999||999999999999999<e}function Rt(e){if(_t(e))throw Tt(e,kt);return e.toString()}function xt(e,t){if(e<0)return-xt(-e,t);const n=Math.pow(10,t);if(Math.abs(e*n%1-.5)<Number.EPSILON){const t=Math.floor(e*n);return(t%2==0?t:t+1)/n}return Math.round(e*n)/n}const Ct="Decimal";function Dt(e){const t=xt(e,3);if(Math.floor(Math.abs(t)).toString().length>12)throw Tt(e,Ct);const n=t.toString();return n.includes(".")?n:`${n}.0`}const Lt="String",Mt=/[\x00-\x1f\x7f]+/;function Nt(e){return e.description||e.toString().slice(7,-1)}const Pt="Token";function Ot(e){const t=Nt(e);if(!1===/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t))throw Tt(t,Pt);return t}function Ft(e){switch(typeof e){case"number":if(!Number.isFinite(e))throw Tt(e,wt);return Number.isInteger(e)?Rt(e):Dt(e);case"string":return function(e){if(Mt.test(e))throw Tt(e,Lt);return`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(e);case"symbol":return Ot(e);case"boolean":return function(e){if("boolean"!=typeof e)throw Tt(e,At);return e?"?1":"?0"}(e);case"object":if(e instanceof Date)return`@${Rt(e.getTime()/1e3)}`;if(e instanceof Uint8Array)return function(e){if(!1===ArrayBuffer.isView(e))throw Tt(e,It);return`:${t=e,btoa(String.fromCharCode(...t))}:`;var t}(e);if(e instanceof St)return Ot(e);default:throw Tt(e,wt)}}function Ut(e){if(!1===/^[a-z*][a-z0-9\-_.*]*$/.test(e))throw Tt(e,"Key");return e}function zt(e){return null==e?"":Object.entries(e).map(e=>{let[t,n]=e;return!0===n?`;${Ut(t)}`:`;${Ut(t)}=${Ft(n)}`}).join("")}function Bt(e){return e instanceof vt?`${Ft(e.value)}${zt(e.params)}`:Ft(e)}const jt=e=>Math.round(e),qt=e=>100*jt(e/100),Gt={br:jt,d:jt,bl:qt,dl:qt,mtp:qt,nor:(e,t)=>((null==t?void 0:t.baseUrl)&&(e=function(e,t){const n=new URL(e),r=new URL(t);if(n.origin!==r.origin)return e;const i=n.pathname.split("/").slice(1),a=r.pathname.split("/").slice(1,-1);for(;i[0]===a[0];)i.shift(),a.shift();for(;a.length;)a.shift(),i.unshift("..");return i.join("/")}(e,t.baseUrl)),encodeURIComponent(e)),rtp:qt,tb:jt};function Ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(n=function(e,t){const n={};if(null==e||"object"!=typeof e)return n;const r=Object.keys(e).sort(),i=Object.assign({},Gt,null==t?void 0:t.formatters),a=null==t?void 0:t.filter;return r.forEach(r=>{if(null==a?void 0:a(r))return;let s=e[r];const o=i[r];var l;o&&(s=o(s,t)),"v"===r&&1===s||"pr"==r&&1===s||("number"==typeof(l=s)?Number.isFinite(l):null!=l&&""!==l&&!1!==l)&&(function(e){return"ot"===e||"sf"===e||"st"===e}(r)&&"string"==typeof s&&(s=new St(s)),n[r]=s)}),n}(e,t),r=Object.assign({whitespace:!1},t),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{whitespace:!0};if("object"!=typeof e)throw Tt(e,bt);const n=e instanceof Map?e.entries():Object.entries(e),r=(null==t?void 0:t.whitespace)?" ":"";return Array.from(n).map(e=>{let[t,n]=e;n instanceof vt==0&&(n=new vt(n));let r=Ut(t);var i;return!0===n.value?r+=zt(n.params):(r+="=",Array.isArray(n.value)?r+=`(${(i=n).value.map(Bt).join(" ")})${zt(i.params)}`:r+=Bt(n)),r}).join(`,${r}`)}(n,r)):"";var n,r}const Vt="CMCD-Object",Kt="CMCD-Request",$t="CMCD-Session",Yt="CMCD-Status",Wt={[Vt]:["br","d","ot","tb"],[Kt]:["bl","dl","mtp","nor","nrr","su"],[$t]:["cid","pr","sf","sid","st","v"],[Yt]:["bs","rtp"]},Xt="segment";function Qt(){let e,t,n,r,i,a,s,o,l,u,d,c,h,f,g,p,m=this.context,y=(0,_.default)(m).getInstance(),v=(0,$.default)(m).getInstance(),b=(0,C.default)(m).getInstance();function E(){r={pr:1,nor:null,st:null,sf:null,sid:`${Ge.default.generateUuid()}`,cid:null},h={},c={},f={},d=void 0,g=void 0,p=!1,I()}function T(){I()}function S(){g||(g=Date.now())}function w(){g&&!r.msd&&(r.msd=Date.now()-g)}function I(){if(!s)return;const e=s.getStreamController();if(!e)return;if("function"!=typeof e.getActiveStream)return;const t=e.getActiveStream();t&&(u=t.getStreamProcessors())}function k(e){try{const t=x(),n=t.version?t.keys:v.get().streaming.cmcd.enabledKeys;return Object.keys(e).filter(e=>n.includes(e)).reduce((t,n)=>(t[n]=e[n],t),{})}catch(t){return e}}function R(){const e=x();return function(e){if(Object.keys(e).length){if(1!==parseInt(e.version))return n.error("version parameter must be defined in 1."),!1;if(!e.keys)return n.error("keys parameter must be defined."),!1}const t=e.version,r=v.get().streaming.cmcd&&v.get().streaming.cmcd.enabled;return t||r}(e)&&function(e){let t=v.get().streaming.cmcd.includeInRequests;e.version&&(t=e.includeInRequests??[Xt]);const r=A.default.CMCD_AVAILABLE_REQUESTS,i=t.filter(e=>!r.includes(e));return i.length===t.length?(n.error("None of the request types are supported."),!1):(i.map(e=>{n.warn(`request type ${e} is not supported.`)}),!0)}(e)&&function(e){const t=A.default.CMCD_AVAILABLE_KEYS,r=A.default.CMCD_V2_AVAILABLE_KEYS,i=e.version?e.keys:v.get().streaming.cmcd.enabledKeys,a=v.get().streaming.cmcd.version,s=i.filter(e=>!(t.includes(e)||2===a&&r.includes(e)));return s.length===i.length&&i.length>0?(n.error(`None of the keys are implemented for CMCD version ${a}.`),!1):(s.map(e=>{n.warn(`key parameter ${e} is not implemented for CMCD version ${a}.`)}),!0)}(e)}function x(){let e={};if(o){const t=o.getServiceDescriptionSettings();v.get().streaming.cmcd.applyParametersFromMpd&&t.clientDataReporting&&t.clientDataReporting.cmcdParameters&&(e=t.clientDataReporting.cmcdParameters)}return e}function L(e){try{let n=null;if(e.type,(t=e.mediaType)!==A.default.VIDEO&&t!==A.default.AUDIO||d&&d!=A.default.AUDIO||(d=t),function(e){const t=x();let n=v.get().streaming.cmcd.includeInRequests;t.version&&(n=t.includeInRequests?t.includeInRequests:[Xt]);const r={[N.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[N.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[N.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[N.HTTPRequest.MPD_TYPE]:"mpd",[N.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[N.HTTPRequest.OTHER_TYPE]:"other"};return n.some(t=>r[e]===t)}(e.type)){if(e.type===N.HTTPRequest.MPD_TYPE)return function(){const e=O();return e.ot=yt.MANIFEST,e}();if(e.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE)return P(e.mediaType),M(e,e.mediaType);if(e.type===N.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const e=O();return e.ot=yt.INIT,e.su=!0,e}();if(e.type===N.HTTPRequest.OTHER_TYPE||e.type===N.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const e=O();return e.ot=yt.OTHER,e}();if(e.type===N.HTTPRequest.LICENSE)return function(){const e=O();return e.ot=yt.KEY,e}();if(e.type===N.HTTPRequest.CONTENT_STEERING_TYPE)return function(e){const t=d?M(e,d):O();return t.ot=yt.OTHER,t}(e)}return n}catch(n){return null}var t}function M(e,t){P(t);const n=O(),o=function(e){try{return parseInt(e.bandwidth/1e3)}catch(t){return null}}(e),d=function(e){try{return isNaN(e.duration)?NaN:Math.round(1e3*e.duration)}catch(t){return null}}(e),g=function(e){try{return 100*parseInt(l.getSafeAverageThroughput(e)/100)}catch(t){return null}}(t),p=function(e){try{const t=r.pr,n=a.getCurrentBufferLevel(e);return isNaN(t)||isNaN(n)?null:100*parseInt(n/t*10)}catch(t){return null}}(t),m=F(t),y=function(e){try{const t=i.getPossibleVoRepresentationsFilteredBySettings(e).map(e=>e.bitrateInKbit);return Math.max(...t)}catch(t){return null}}(e.representation?.mediaInfo),b=r.pr,E=function(e){if(u&&0!==u.length)for(let t of u)if(t.getType()===e)return t.probeNextRequest()}(t);let T;t===A.default.VIDEO&&(T=yt.VIDEO),t===A.default.AUDIO&&(T=yt.AUDIO),t===A.default.TEXT&&(T="application/mp4"===e.representation.mediaInfo.mimeType?yt.TIMED_TEXT:yt.CAPTION);let S=v.get().streaming.cmcd.rtp;return S||(S=function(e){try{let t=s.getPlaybackRate();t||(t=1);let{bandwidth:n,mediaType:r,representation:i,duration:a}=e;if(!i.mediaInfo)return NaN;let o=F(r);0===o&&(o=500);let l=n*a/1e3/(o/t/1e3),u=v.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(v.get().streaming.cmcd.rtpSafetyFactor)?v.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(l*u/100)+1)}catch(t){return NaN}}(e)),isNaN(S)||(n.rtp=S),E&&(e.url!==E.url?n.nor=encodeURIComponent(Ge.default.getRelativeUrl(e.url,E.url)):E.range&&(n.nrr=E.range)),o&&(n.br=o),T&&(n.ot=T),isNaN(d)||(n.d=d),isNaN(g)||(n.mtp=g),isNaN(p)||(n.dl=p),isNaN(m)||(n.bl=m),isNaN(y)||(n.tb=y),isNaN(b)||1===b||(n.pr=b),h[t]&&(n.bs=!0,h[t]=!1),!c[t]&&f[t]||(n.su=!0,c[t]=!1,f[t]=!0),n}function P(e){f.hasOwnProperty(e)||(f[e]=!1),c.hasOwnProperty(e)||(c[e]=!1),h.hasOwnProperty(e)||(h[e]=!1)}function O(){const e=x(),t={};let n=v.get().streaming.cmcd.cid?v.get().streaming.cmcd.cid:r.cid;if(n=e.contentID?e.contentID:n,t.v=v.get().streaming.cmcd.version??1,t.sid=v.get().streaming.cmcd.sid?v.get().streaming.cmcd.sid:r.sid,t.sid=e.sessionID?e.sessionID:t.sid,t.sid=`${t.sid}`,n&&(t.cid=`${n}`),isNaN(r.pr)||1===r.pr||null===r.pr||(t.pr=r.pr),r.st&&(t.st=r.st),r.sf&&(t.sf=r.sf),2===t.v){let e=1e3*s.getCurrentLiveLatency();isNaN(e)||(t.ltc=e);const n=r.msd;p||isNaN(n)||(t.msd=n,p=!0)}return t}function F(e){try{const t=a.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(t){return null}}function U(e){try{r.pr=e.playbackRate}catch(t){}}function z(t){try{const n=e.getIsDynamic(t.data)?"l":"v",i=t.protocol&&"MSS"===t.protocol?"s":"d";r.st=`${n}`,r.sf=`${i}`}catch(n){}}function B(e){try{e.state&&e.mediaType&&e.state===D.default.BUFFER_EMPTY&&(h[e.mediaType]||(h[e.mediaType]=!0),c[e.mediaType]||(c[e.mediaType]=!0))}catch(t){}}function j(){for(let e in h)h.hasOwnProperty(e)&&(h[e]=!0);for(let e in c)c.hasOwnProperty(e)&&(c[e]=!0)}return t={getCmcdData:L,getQueryParameter:function(e){try{if(R()){const t=L(e),n=Ht(k(t));return y.trigger(Ye.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(t){return null}},getHeaderParameters:function(e){try{if(R()){const t=L(e),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={};if(!e)return n;const r=Object.entries(e),i=Object.entries(Wt).concat(Object.entries((null==t?void 0:t.customHeaderMap)||{})),a=r.reduce((e,t)=>{var n,r;const[a,s]=t,o=(null===(n=i.find(e=>e[1].includes(a)))||void 0===n?void 0:n[0])||Kt;return null!==(r=e[o])&&void 0!==r||(e[o]={}),e[o][a]=s,e},{});return Object.entries(a).reduce((e,n)=>{let[r,i]=n;return e[r]=Ht(i,t),e},n)}(k(t),1===v.get().streaming.cmcd.version?{}:{customHeaderMap:{[Kt]:["ltc"],[$t]:["msd"]}});return y.trigger(Ye.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:n}),n}return null}catch(t){return null}},getCmcdParametersFromManifest:x,setConfig:function(e){e&&(e.abrController&&(i=e.abrController),e.dashMetrics&&(a=e.dashMetrics),e.throughputController&&(l=e.throughputController),e.playbackController&&(s=e.playbackController),e.serviceDescriptionController&&(o=e.serviceDescriptionController))},reset:function(){y.off(D.default.PLAYBACK_RATE_CHANGED,U,this),y.off(D.default.MANIFEST_LOADED,z,this),y.off(D.default.BUFFER_LEVEL_STATE_CHANGED,B,t),y.off(D.default.PLAYBACK_SEEKED,j,t),y.off(D.default.PLAYBACK_STARTED,S,t),y.off(D.default.PLAYBACK_PLAYING,w,t),E()},initialize:function(e){y.on(D.default.PLAYBACK_RATE_CHANGED,U,t),y.on(D.default.MANIFEST_LOADED,z,t),y.on(D.default.BUFFER_LEVEL_STATE_CHANGED,B,t),y.on(D.default.PLAYBACK_SEEKED,j,t),y.on(D.default.PERIOD_SWITCH_COMPLETED,T,t),e?y.on(D.default.MANIFEST_LOADING_STARTED,S,t):y.on(D.default.PLAYBACK_STARTED,S,t),y.on(D.default.PLAYBACK_PLAYING,w,t)},isCmcdEnabled:R},e=pt(m).getInstance(),n=b.getLogger(t),E(),t}Qt.__dashjs_factory_name="CmcdModel";var Jt=x.default.getSingletonFactory(Qt);const Zt="CMSD-Dynamic",en="CMSD-Static",tn=mt;function nn(e,t,n){return Et("parse",e,t,n)}const rn="List";function an(e,t){return{value:e,src:t}}const sn="Inner List",on="Date",ln=`${kt} or ${Ct}`;function un(e){let t,n=1,r="";const i=nn(e,ln);if("-"===e[0]&&(n=-1,e=e.substring(1)),e.length<=0)throw i;const a=/^(\d+)?/g,s=a.exec(e);if(0===s[0].length)throw i;if(r+=s[1],"."===(e=e.substring(a.lastIndex))[0]){if(r.length>12)throw i;const a=/^(\.\d+)?/g,s=a.exec(e);if(e=e.substring(a.lastIndex),0===s[0].length||s[1].length>4)throw i;if(r+=s[1],r.length>16)throw i;t=parseFloat(r)*n}else{if(r.length>15)throw i;if(t=parseInt(r)*n,_t(t))throw nn(r,ln)}return an(t,e)}function dn(e,t){const n=e[0];if('"'===n)return function(e){let t="",n=0;if('"'!==e[n])throw nn(e,Lt);for(n++;e.length>n;){if("\\"===e[n]){if(e.length<=n+1)throw nn(e,Lt);if(n++,'"'!==e[n]&&"\\"!==e[n])throw nn(e,Lt);t+=e[n]}else{if('"'===e[n])return an(t,e.substring(++n));if(Mt.test(e[n]))throw nn(e,Lt);t+=e[n]}n++}throw nn(e,Lt)}(e);if(/^[-0-9]/.test(n))return un(e);if("?"===n)return function(e){let t=0;if("?"!==e[t])throw nn(e,At);if(t++,"1"===e[t])return an(!0,e.substring(++t));if("0"===e[t])return an(!1,e.substring(++t));throw nn(e,At)}(e);if(":"===n)return function(e){if(":"!==e[0])throw nn(e,It);if(!1===(e=e.substring(1)).includes(":"))throw nn(e,It);const t=/(^.*?)(:)/g,n=t.exec(e)[1];return e=e.substring(t.lastIndex),an(new Uint8Array([...atob(n)].map(e=>e.charCodeAt(0))),e)}(e);if(/^[a-zA-Z*]/.test(n))return function(e){if(!1===/^[a-zA-Z*]$/.test(e[0]))throw nn(e,Pt);const t=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,n=t.exec(e)[1];return e=e.substring(t.lastIndex),an(Symbol.for(n),e)}(e);if("@"===n)return function(e){let t=0;if("@"!==e[t])throw nn(e,on);t++;const n=un(e.substring(t));if(!1===Number.isInteger(n.value))throw nn(e,on);return an(new Date(1e3*n.value),n.src)}(e);throw nn(e,wt)}function cn(e){let t=0;if(!1===/^[a-z*]$/.test(e[t]))throw nn(e,"Key");let n="";for(;e.length>t;){if(!1===/^[a-z0-9_\-.*]$/.test(e[t]))return an(n,e.substring(t));n+=e[t],t++}return an(n,e.substring(t))}function hn(e,t){let n;for(;e.length>0&&";"===e[0];){const t=cn(e=e.substring(1).trim()),r=t.value;let i=!0;if("="===(e=t.src)[0]){const t=dn(e=e.substring(1));i=t.value,e=t.src}null==n&&(n={}),n[r]=i}return an(n,e)}function fn(e,t){const n=dn(e),r=hn(e=n.src);return e=r.src,an(new vt(n.value,r.value),e)}function gn(e,t){return"("===e[0]?function(e){if("("!==e[0])throw nn(e,sn);e=e.substring(1);const t=[];for(;e.length>0;){if(")"===(e=e.trim())[0]){const n=hn(e=e.substring(1));return an(new vt(t,n.value),n.src)}const n=fn(e);if(t.push(n.value)," "!==(e=n.src)[0]&&")"!==e[0])throw nn(e,sn)}throw nn(e,sn)}(e):fn(e)}const pn=en.toLowerCase(),mn=Zt.toLowerCase(),yn=["mb","st","sf","v"],vn="stream",bn={video:tn.VIDEO,audio:tn.AUDIO,text:tn.TIMED_TEXT,stream:vn};function En(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a;function s(){i={},a={}}function o(e){e&&Object.keys(e).forEach(t=>{yn.includes(t)||delete e[t]})}function l(e){try{return(t=e)?Object.entries(function(e){try{const{src:t,value:n}=function(e){const t={};for(;e.length>0;){let n;const r=cn(e),i=r.value;if("="===(e=r.src)[0]){const t=gn(e.substring(1));n=t.value,e=t.src}else{const t=hn(e);n=new vt(!0,t.value),e=t.src}if(t[i]=n,0===(e=e.trim()).length)return an(t,e);if(","!==e[0])throw nn(e,bt);if(0===(e=e.substring(1).trim()).length||","===e[0])throw nn(e,bt)}return an(t,e)}(e.trim());if(""!==t)throw nn(t,bt);return n}catch(t){throw nn(e,bt,t)}}(t)).reduce((e,t)=>{let[n,r]=t;const{value:i}=r;return e[n]="symbol"==typeof i?Nt(i):i,e},{}):{}}catch(n){r.error("Failed to parse CMSD-Static response header value:",n)}var t}function u(e){try{const n=(t=e)?function(e){try{const{src:t,value:n}=function(e){const t=[];for(;e.length>0;){const n=gn(e);if(t.push(n.value),0===(e=n.src.trim()).length)return an(t,e);if(","!==e[0])throw nn(e,rn);if(0===(e=e.substring(1).trim()).length||","===e[0])throw nn(e,rn)}return an(t,e)}(e.trim());if(""!==t)throw nn(t,rn);return n}catch(t){throw nn(e,rn,t)}}(t):[],r=n[n.length-1];return r?.params||{}}catch(n){return r.error("Failed to parse CMSD-Dynamic response header value:",n),{}}var t}function d(e){return bn[e]||tn.OTHER}function c(e,t,n){const r=e===en?i:a,s=r[t]||{},o=r[vn]||{};return s[n]||o[n]}return n={setConfig:function(){},initialize:function(){},reset:function(){s()},parseResponseHeaders:function(e,n){let r=null,s=null;for(const i in e){const n=e[i];switch(i){case pn:r=l(n),t.trigger(R.default.CMSD_STATIC_HEADER,r);break;case mn:s||(s=u(n))}}let c=vn;return r&&r.ot?c=r.ot:n&&(c=d(n)),o(i[c]),o(a[c]),r&&(i[c]=Object.assign(i[c]||{},r)),s&&(a[c]=Object.assign(a[c]||{},s)),{static:r,dynamic:s}},getMaxBitrate:function(e){let t=d(e);return c(Zt,t,"mb")||-1},getEstimatedThroughput:function(e){let t=d(e);return c(Zt,t,"etp")||null},getResponseDelay:function(e){let t=d(e);return c(Zt,t,"rd")||null},getRoundTripTime:function(e){let t=d(e);return c(Zt,t,"rtt")||null}},r=(0,C.default)(e).getInstance().getLogger(n),s(),n}En.__dashjs_factory_name="CmsdModel";var Tn=x.default.getSingletonFactory(En),Sn=n(1926);function wn(){let e,t;function n(){t={}}return e={reset:function(){n()},processResponseHeaders:function(e){if(!(e&&e.headers&&e.request&&e.request.url))return;const n=e.headers[A.default.COMMON_ACCESS_TOKEN_HEADER];if(n){const r=Ge.default.getHostFromUrl(e.request.url);r&&(t[r]=n)}},getCommonAccessTokenForUrl:function(e){if(!e)return null;const n=Ge.default.getHostFromUrl(e);return n?t[n]?t[n]:null:void 0}},n(),e}wn.__dashjs_factory_name="CommonAccessTokenController";var An=x.default.getSingletonFactory(wn);function In(){let e,t;return e={setConfig:function(e){e&&e.serviceDescriptionController&&(t=e.serviceDescriptionController)},isAdaptationsIncluded:function(e){const{adaptationSetsArray:n}=t?.getServiceDescriptionSettings()?.clientDataReporting??{};return!n||0===n?.length||n.includes(e)},isServiceLocationIncluded:function(e,n){if(e===N.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:r}=t?.getServiceDescriptionSettings()?.clientDataReporting??{};return!r||0===r?.length||r.includes(n)}},e}In.__dashjs_factory_name="ClientDataReportingController";var kn=x.default.getSingletonFactory(In);function _n(){let e,t,n;const r=this.context;function i(e,t,n,r,i){const a=function(e,t){let n=[];return n=t===I.default.PERIOD?e[I.default.SUPPLEMENTAL_PROPERTY]||[]:[...e[I.default.ESSENTIAL_PROPERTY]||[],...e[I.default.SUPPLEMENTAL_PROPERTY]||[]],n.find(e=>e.schemeIdUri===A.default.URL_QUERY_INFO_SCHEME&&e.UrlQueryInfo||e.schemeIdUri===A.default.EXT_URL_QUERY_INFO_SCHEME&&e.ExtUrlQueryInfo)}(t,i);var s,o;!function(e,t,n,r){n.initialQueryString="";let i="";const a=e?.ExtUrlQueryInfo||e?.UrlQueryInfo;i=a&&a.queryString?t&&t.length>0?t+"&"+a.queryString:a.queryString:t,"true"===a?.useMPDUrlQuery&&r&&(i=i?i+"&"+r:r),n.initialQueryString=i}(a,r.initialQueryString,e,n),function(e,t,n){if(!e)return void(t.finalQueryString=n);const r=e?.ExtUrlQueryInfo?.queryTemplate||e?.UrlQueryInfo?.queryTemplate||"";t.finalQueryString=r===I.default.QUERY_PART?t?.initialQueryString:""}(a,e,r.finalQueryString),e.sameOriginOnly=a?.ExtUrlQueryInfo?.sameOriginOnly,e.queryParams=Ge.default.parseQueryParams(e?.finalQueryString),e.includeInRequests=(s=a,o=r.includeInRequests,s?s.ExtUrlQueryInfo?.includeInRequests?s.ExtUrlQueryInfo.includeInRequests.split(" "):[I.default.SEGMENT_TYPE]:o)}return t=(0,C.default)(r).getInstance().getLogger(e),e={getFinalQueryString:function(e){try{if(!n)return null;if(e.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE||e.type===N.HTTPRequest.INIT_SEGMENT_TYPE){const t=e.representation;if(!t)return null;const r=t.adaptation,i=r.period,a=n.period[i.index].adaptation[r.index].representation[t.index],s=new URL(e.url),o=!a.sameOriginOnly||n.origin===s.origin;if(a.includeInRequests.includes(I.default.SEGMENT_TYPE)&&o)return a.queryParams}else if(e.type===N.HTTPRequest.MPD_TYPE){if([I.default.MPD_TYPE,I.default.MPD_PATCH_TYPE].some(e=>n.includeInRequests.includes(e)))return n.queryParams}else if(e.type===N.HTTPRequest.CONTENT_STEERING_TYPE&&n.includeInRequests.includes(I.default.STEERING_TYPE))return n.queryParams}catch(r){return t.error(r),null}},createFinalQueryStrings:function(e){n={origin:new URL(e.url).origin,period:[]};const t=e.url.split("?")[1];i(n,e,t,{initialQueryString:"",includeInRequests:[]},I.default.MPD),e.Period.forEach(e=>{const r={adaptation:[]};i(r,e,t,n,I.default.PERIOD),e.AdaptationSet.forEach(e=>{const n={representation:[]};i(n,e,t,r,I.default.ADAPTATION_SET),e.Representation.forEach(e=>{const r={};i(r,e,t,n,I.default.REPRESENTATION),n.representation.push(r)}),r.adaptation.push(n)}),n.period.push(r)})}},e}_n.__dashjs_factory_name="ExtUrlQueryInfoController";var Rn=x.default.getSingletonFactory(_n),xn=class{constructor(e){this.url=e.url,this.method=e.method,this.responseType=void 0!==e.responseType?e.responseType:null,this.headers=void 0!==e.headers?e.headers:{},this.credentials=void 0!==e.credentials?e.credentials:null,this.mode=void 0!==e.mode?e.mode:null,this.timeout=void 0!==e.timeout?e.timeout:0,this.cmcd=void 0!==e.cmcd?e.cmcd:null,this.customData=void 0!==e.customData?e.customData:null}},Cn=class{constructor(e){this.request=e.request,this.url=void 0!==e.url?e.url:null,this.redirected=void 0!==e.redirected&&e.redirected,this.status=void 0!==e.status?e.status:null,this.statusText=void 0!==e.statusText?e.statusText:"",this.type=void 0!==e.type?e.type:"",this.headers=void 0!==e.headers?e.headers:{},this.data=void 0!==e.data?e.data:null,this.resourceTiming=void 0!==e.resourceTiming?e.resourceTiming:null}};function Dn(e){e=e||{};const t=this.context,n=e.errHandler,r=e.dashMetrics,i=e.mediaPlayerModel,a=e.boxParser,s=e.errors,o=e.requestTimeout||0,l=(0,_.default)(t).getInstance(),u=(0,$.default)(t).getInstance();let d,c,h,f,g,p,m,y,v,b,E,T,S,w;function I(e,s){const d=function(){C()},k=function(t){const n=new Date;U&&(U=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(O.firstByteDate=n,V.resourceTiming.responseStart=n.getTime())),t.lengthComputable&&(O.bytesLoaded=V.length=t.loaded,O.bytesTotal=V.resourceTiming.encodedBodySize=t.total,V.length=t.total,V.resourceTiming.encodedBodySize=t.loaded),t.noTrace||(F.push({s:B,d:t.time?t.time:n.getTime()-B.getTime(),b:[t.loaded?t.loaded-j:0],t:t.throughput}),O.traces=F,B=n,j=t.loaded),q&&(clearTimeout(q),q=null),u.get().streaming.fragmentRequestProgressTimeout>0&&(q=setTimeout(function(){w.warn("Abort request "+H.url+" due to progress timeout"),$.abort(H),d()},u.get().streaming.fragmentRequestProgressTimeout)),e.progress&&t&&e.progress(t)},_=function(){C(!0)},x=function(e){let t;if(e.lengthComputable){let n=e.loaded/e.total*100;t="Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+n.toFixed(3)+"% Completed"}else t="Request timeout: non-computable download size";w.warn(t)},C=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];-1!==c.indexOf(H)&&c.splice(c.indexOf(H),1),q&&(clearTimeout(q),q=null),E.processResponseHeaders(V),D(),L(),function(e){const t=b.getResponseInterceptors();return t?t.reduce((e,t)=>e.then(e=>t(e)),Promise.resolve(e)):Promise.resolve(e)}(V).then(n=>{if(V=n,function(e,t,n){const i=e.customData.request,a=u.get().streaming.cmsd&&u.get().streaming.cmsd.enabled?m.parseResponseHeaders(t.headers,i.mediaType):null;r.addHttpRequest(i,t.url,t.status,t.headers,n,a)}(H,V,F),t)e.abort&&e.abort(O);else if(O.type===N.HTTPRequest.MPD_TYPE&&(r.addManifestUpdate(O),l.trigger(R.default.MANIFEST_LOADING_FINISHED,{requestObject:O})),V.status>=200&&V.status<=299&&V.data)e.success&&e.success(V.data,V.statusText,V.url),e.complete&&e.complete(O,V.statusText);else{try{404===V.status&&u.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&O.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE&&i.getRetryAttemptsForType(N.HTTPRequest.MEDIA_SEGMENT_TYPE)===s&&l.trigger(R.default.ATTEMPT_BACKGROUND_SYNC)}catch(a){}P()}})},D=function(){O.startDate=z,O.endDate=new Date,O.firstByteDate=O.firstByteDate||z},L=function(){V.resourceTiming.responseEnd=Date.now(),function(e,t){if(!u.get().streaming.abr.throughput.useResourceTimingApi)return;if("undefined"==typeof performance||e.range)return;const n=performance.getEntriesByType("resource");if(void 0===n||n.length<=0)return;let r=0,i=null;for(;r<n.length;){if(n[r].name===e.url){i=n[r];break}r+=1}var a;(a=i)&&!isNaN(a.responseStart)&&a.responseStart>0&&!isNaN(a.responseEnd)&&a.responseEnd>0&&!isNaN(a.transferSize)&&a.transferSize>0&&(e.customData.request.resourceTimingValues=i,t.resourceTiming.startTime=i.startTime,t.resourceTiming.encodedBodySize=i.encodedBodySize,t.resourceTiming.responseStart=i.startTime,t.resourceTiming.responseEnd=i.responseEnd,t.resourceTiming.duration=i.duration)}(H,V)},M=function(e,t,n){return new Promise(r=>{(function(e){const t=b.getRequestInterceptors();return t?t.reduce((e,t)=>e.then(e=>t(e)),Promise.resolve(e)):Promise.resolve(e)})(t).then(i=>{(t=i).customData.onloadend=d,t.customData.onprogress=k,t.customData.onabort=_,t.customData.ontimeout=x,n.resourceTiming.startTime=Date.now(),e.load(t,n),r()})})},P=function(){if(s>0){s--,e&&e.request&&(e.request.retryAttempts+=1);let t={config:e};f.push(t),t.timeout=setTimeout(function(){-1!==f.indexOf(t)&&(f.splice(f.indexOf(t),1),I(e,s))},i.getRetryIntervalsForType(O.type))}else{if(O.type===N.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;n.error(new G.default(g[O.type],O.url+" is not available",{request:O,response:V})),e.error&&e.error(O,"error",V.statusText,V),e.complete&&e.complete(O,V.statusText)}},O=e.request,F=[];let U,z,B,j,q,H,V;if(O.bytesLoaded=NaN,O.bytesTotal=NaN,O.firstByteDate=null,O.traces=[],U=!0,z=new Date,B=z,j=0,q=null,!r||!n)throw new Error("config object is not correct or missing");const K=function(e){let n,i;return e.hasOwnProperty("availabilityTimeComplete")&&!1===e.availabilityTimeComplete&&window.fetch&&"arraybuffer"===e.responseType&&e.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE?(v||(v=$e(t).create(),v.setConfig({dashMetrics:r,boxParser:a})),n=v,i=A.default.FILE_LOADER_TYPES.FETCH):(y||(y=Ve(t).create()),n=y,i=A.default.FILE_LOADER_TYPES.XHR),{loader:n,fileLoaderType:i}}(O),$=K.loader;var Y;O.fileLoaderType=K.fileLoaderType,O.headers={},function(e){const t=e?.serviceLocation,n=e?.mediaInfo?.id?.toString();if(T.isServiceLocationIncluded(e.type,t)&&T.isAdaptationsIncluded(n)&&p.isCmcdEnabled()){const t=p.getCmcdParametersFromManifest(),n=t.mode?t.mode:u.get().streaming.cmcd.mode;if(n===A.default.CMCD_MODE_QUERY){e.url=Ge.default.removeQueryParameterFromUrl(e.url,A.default.CMCD_QUERY_KEY);const t=function(e){try{const t=[],n=p.getQueryParameter(e);return n&&t.push(n),t}catch(t){return[]}}(e);e.url=Ge.default.addAdditionalQueryParameterToUrl(e.url,t)}else n===A.default.CMCD_MODE_HEADER&&(e.headers=Object.assign(e.headers,p.getHeaderParameters(e)))}}(Y=O),0===Y.retryAttempts&&function(e){let t=S.getFinalQueryString(e);t&&(e.url=Ge.default.addAdditionalQueryParameterToUrl(e.url,t))}(Y),function(e){if(e.queryParams){const t=Object.keys(e.queryParams).map(t=>({key:t,value:e.queryParams[t]}));e.url=Ge.default.addAdditionalQueryParameterToUrl(e.url,t)}}(Y),function(e){const t=E.getCommonAccessTokenForUrl(e.url);t&&(e.headers[A.default.COMMON_ACCESS_TOKEN_HEADER]=t)}(Y),O.range&&(O.headers.Range="bytes="+O.range);const W=b.getXHRWithCredentialsForType(O.type);H=new xn({url:O.url,method:N.HTTPRequest.GET,responseType:O.responseType,headers:O.headers,credentials:W?"include":"omit",timeout:o,cmcd:p.getCmcdData(O),customData:{request:O}}),V=new Cn({request:H,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let X=(new Date).getTime();if(isNaN(O.delayLoadingTime)||X>=O.delayLoadingTime)return c.push(H),M($,H,V);{let e={httpRequest:H,httpResponse:V};return h.push(e),e.delayTimeout=setTimeout(function(){if(-1!==h.indexOf(e)){h.splice(h.indexOf(e),1);try{z=new Date,B=z,c.push(e.httpRequest),M($,e.httpRequest,e.httpResponse)}catch(t){e.httpRequest.onloadend()}}},O.delayLoadingTime-X),Promise.resolve()}}return d={abort:function(){f.forEach(e=>{clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),f=[],h.forEach(e=>clearTimeout(e.delayTimeout)),h=[],c.forEach(e=>{const t=e.customData;t&&(t.request&&t.request.type===N.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(t.onloadend=t.onprogress=void 0,t.abort&&t.abort()))}),c=[]},load:function(e){return e.request?I(e,i.getRetryAttemptsForType(e.request.type)):(e.error&&e.error(e.request,"error"),Promise.resolve())},reset:function(){c=[],h=[],f=[],y&&y.reset(),v&&v.reset(),y=null,v=null},resetInitialSettings:function(){y&&y.resetInitialSettings()},setConfig:function(e){e&&(e.commonAccessTokenController&&(E=e.commonAccessTokenController),e.extUrlQueryInfoController&&(S=e.extUrlQueryInfoController))}},w=(0,C.default)(t).getInstance().getLogger(d),c=[],h=[],f=[],p=Jt(t).getInstance(),T=kn(t).getInstance(),m=Tn(t).getInstance(),b=(0,Sn.default)(t).getInstance(),E=An(t).getInstance(),S=Rn(t).getInstance(),g={[N.HTTPRequest.MPD_TYPE]:s.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[N.HTTPRequest.XLINK_EXPANSION_TYPE]:s.DOWNLOAD_ERROR_ID_XLINK_CODE,[N.HTTPRequest.INIT_SEGMENT_TYPE]:s.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[N.HTTPRequest.MEDIA_SEGMENT_TYPE]:s.DOWNLOAD_ERROR_ID_CONTENT_CODE,[N.HTTPRequest.INDEX_SEGMENT_TYPE]:s.DOWNLOAD_ERROR_ID_CONTENT_CODE,[N.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:s.DOWNLOAD_ERROR_ID_CONTENT_CODE,[N.HTTPRequest.OTHER_TYPE]:s.DOWNLOAD_ERROR_ID_CONTENT_CODE},d}Dn.__dashjs_factory_name="HTTPLoader";var Ln=x.default.getClassFactory(Dn);function Mn(){let e,t;function n(){t={}}function r(){n()}return r(),e={getLoader:function(e){for(var n in t)if(t.hasOwnProperty(n)&&e.startsWith(n))return t[n];return Ln},registerLoader:function(e,n){t[e]=n},unregisterLoader:function(e){t[e]&&delete t[e]},unregisterAllLoader:n,reset:r},e}Mn.__dashjs_factory_name="SchemeLoaderFactory";var Nn=x.default.getSingletonFactory(Mn);function Pn(e){e=e||{};const t=this.context;let n,r,i;return r=Nn(t).getInstance(),n={abort:function(){i&&i.abort()},load:function(n){if(!i){let a=r.getLoader(n&&n.request?n.request.url:null);i=a(t).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})}i.load(n)},reset:function(){r&&(r.reset(),r=null),i&&"function"==typeof i.reset&&i.reset(),i=null},resetInitialSettings:function(){i&&"function"==typeof i.resetInitialSettings&&i.resetInitialSettings()}},n}Pn.__dashjs_factory_name="URLLoader";var On=x.default.getClassFactory(Pn),Fn=class extends O{constructor(e){super(e),this.checkForExistenceOnly=!0}};function Un(e){e=e||{};const t=this.context,n=e.eventBus,r=e.events,i=e.urlUtils,a=e.errors,s=e.streamId;let o,l;return o={abort:function(){l&&l.abort()},checkForExistence:function(e){const t=function(t){n.trigger(r.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){let n=new Fn(e.url);l.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){const t=function(t,i){n.trigger(r.LOADING_COMPLETED,{request:e,response:t||null,error:i||null,sender:o})};e?l.load({request:e,progress:function(t){n.trigger(r.LOADING_PROGRESS,{request:e,stream:t.stream,streamId:s}),t.data&&n.trigger(r.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:o})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new G.default(a.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(e){e&&n.trigger(r.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:o})}}):t(void 0,new G.default(a.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,a.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){l&&(l.abort(),l.reset(),l=null)},resetInitialSettings:function(){l&&l.resetInitialSettings()}},l=On(t).create({errHandler:e.errHandler,errors:a,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,urlUtils:i,constants:A.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),o}Un.__dashjs_factory_name="FragmentLoader";var zn=x.default.getClassFactory(Un);function Bn(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance(),r=e.errHandler,i=e.mediaPlayerModel,a=e.dashMetrics,s=(0,C.default)(t).getInstance(),o=e.streamInfo;let l,u,d;function c(){return o.id}function h(){for(let e in d)d[e].reset();d={}}function f(e){if(!e.sender)return;const t=e.request,r=e.response,i=t.isInitializationRequest(),a=t.representation.mediaInfo.streamInfo;if(e.error&&(t.mediaType===A.default.AUDIO||t.mediaType===A.default.VIDEO||t.mediaType===A.default.TEXT&&t.representation.mediaInfo.isFragmented)&&n.trigger(R.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:e.request.serviceLocation}),!r||!a)return void u.warn("No "+t.mediaType+" bytes to push or stream is inactive.");const s=function(e,t,n,r){const i=new qe;return i.streamId=n,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.representation=t.representation,i.endFragment=r,i}(r,t,o.id,e.type!==R.default.FRAGMENT_LOADING_PROGRESS);n.trigger(i?R.default.INIT_FRAGMENT_LOADED:R.default.MEDIA_FRAGMENT_LOADED,{chunk:s,request:t},{streamId:a.id,mediaType:t.mediaType})}return l={getStreamId:c,getModel:function(l){let u=d[l];return u||(u=q(t).create({streamInfo:o,type:l,dashMetrics:a,fragmentLoader:zn(t).create({dashMetrics:a,mediaPlayerModel:i,errHandler:r,settings:e.settings,boxParser:e.boxParser,eventBus:n,events:R.default,errors:K,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:c()}),debug:s,eventBus:n,events:R.default}),d[l]=u),u},reset:function(){n.off(D.default.FRAGMENT_LOADING_COMPLETED,f,this),n.off(D.default.FRAGMENT_LOADING_PROGRESS,f,this),h()}},u=s.getLogger(l),h(),n.on(D.default.FRAGMENT_LOADING_COMPLETED,f,l),n.on(D.default.FRAGMENT_LOADING_PROGRESS,f,l),l}Bn.__dashjs_factory_name="FragmentController";var jn=x.default.getClassFactory(Bn),qn=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},Gn=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class Hn{constructor(e){if(this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(let t=0;t<e.boxes.length;t++)this.boxes.push(new Hn(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(let t=0;t<e.references.length;t++){let n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.version=1===e.version?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(let t=0,n=e.samples.length;t<n;t++){let n={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(n)}}break;case"prft":this.version=e.version,this.reference_track_ID=e.reference_track_ID,this.ntp_timestamp_sec=e.ntp_timestamp_sec,this.ntp_timestamp_frac=e.ntp_timestamp_frac,this.media_time=e.media_time,this.flags=e.flags}}getChildBox(e){for(let t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}getChildBoxes(e){let t=[];for(let n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}var Vn=Hn;function Kn(){let e,t;function n(e){let n=[];if(!e||!t||"function"!=typeof t.fetchAll)return n;let i,a=t.fetchAll(e);for(let t=0,s=a.length;t<s;t++)i=r(a[t]),i&&n.push(i);return n}function r(e){if(!e)return null;let t=new Vn(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return e={getBox:function(e){return e&&t&&t.boxes&&0!==t.boxes.length&&"function"==typeof t.fetch?r(t.fetch(e)):null},getBoxes:n,setData:function(e){t=e},getLastBox:function(){if(!t||!t.boxes||!t.boxes.length)return null;let e=n(t.boxes[t.boxes.length-1].type);return e.length>0?e[e.length-1]:null}},e}Kn.__dashjs_factory_name="IsoFile";var $n=x.default.getClassFactory(Kn),Yn=n(6877),Wn=class{constructor(e){let{found:t,sizeOfLastCompletedBox:n,sizeOfLastFoundTargetBox:r,startOffsetOfLastCompletedBox:i,startOffsetOfLastFoundTargetBox:a,typeOfLastCompletedBox:s,typeOfLastTargetBox:o}=e;this.found=void 0!==t&&t,this.sizeOfLastCompletedBox=void 0!==n?n:0,this.sizeOfLastFoundTargetBox=void 0!==r?r:0,this.startOffsetOfLastCompletedBox=void 0!==i?i:0,this.startOffsetOfLastFoundTargetBox=void 0!==a?a:0,this.typeOfLastCompletedBox=void 0!==s?s:null,this.typeOfLastTargetBox=void 0!==o?o:null}};function Xn(){let e,t,n=this.context;function r(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);let t=Yn.parseBuffer(e),r=$n(n).create();return r.setData(t),r}function i(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function a(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={findInitRange:function(t){let n,i,a=null;const s=r(t);if(!s)return a;const o=s.getBox("ftyp"),l=s.getBox("moov");return e.debug("Searching for initialization."),l&&l.isComplete&&(n=o?o.offset:l.offset,i=l.offset+l.size-1,a=n+"-"+i,e.debug("Found the initialization.  Range: "+a)),a},findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new Wn({found:!1});const r=t instanceof ArrayBuffer?new Uint8Array(t):t;let s,o=0,l=0,u=null;for(;n<r.byteLength;){const t=i(r,n),d=a(r,n+4);if(0===t)break;n+t<=r.byteLength&&(e.indexOf(d)>=0?s=new Wn({found:!0,startOffsetOfLastFoundTargetBox:n,sizeOfLastFoundTargetBox:t,typeOfLastTargetBox:d}):(o=n,l=t,u=d)),n+=t}return s||new Wn({found:!1,startOffsetOfLastCompletedBox:o,sizeOfLastCompletedBox:l,typeOfLastCompletedBox:u})},getMediaTimescaleFromMoov:function(e){let t=r(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let t,n,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v,b=r(e),E=b.getBoxes("moof"),T=b.getBoxes("mfhd");y=b.getBoxes("moof").length,m=T[T.length-1].sequence_number,i=0,o=[];let S=-1,w=-1;for(h=0;h<E.length;h++){let e=E[h],r=e.getChildBoxes("traf");for(d=0;d<r.length;d++){let h=r[d],m=h.getChildBox("tfhd"),y=h.getChildBox("tfdt");s=y.baseMediaDecodeTime;let b=h.getChildBoxes("trun"),E=h.getChildBoxes("subs");for(c=0;c<b.length;c++){let r=b[c];for(i=r.sample_count,p=(m.base_data_offset||0)+(r.data_offset||0),u=0;u<i;u++){l=r.samples[u],t=void 0!==l.sample_duration?l.sample_duration:m.default_sample_duration,a=void 0!==l.sample_size?l.sample_size:m.default_sample_size,n=void 0!==l.sample_composition_time_offset?l.sample_composition_time_offset:0;let i={dts:s,cts:s+n,duration:t,offset:e.offset+p,size:a,subSizes:[a]};if(E)for(f=0;f<E.length;f++){let e=E[f];if(S<e.entry_count-1&&u>w&&(S++,w+=e.entries[S].sample_delta),u==w){i.subSizes=[];let t=e.entries[S];for(g=0;g<t.subsample_count;g++)i.subSizes.push(t.subsamples[g].subsample_size)}}o.push(i),p+=a,s+=t}}v=s-y.baseMediaDecodeTime}}return{sampleList:o,lastSequenceNumber:m,totalDuration:v,numSequences:y}},parse:r},e=(0,C.default)(n).getInstance().getLogger(t),t}Xn.__dashjs_factory_name="BoxParser";var Qn=x.default.getSingletonFactory(Xn);function Jn(e){const t=this.context,n=e.adapter,r=e.baseURLController,i=e.streamInfo,a=e.timelineConverter,s=e.debug,o=e.eventBus,l=e.events,u=e.dashConstants,d=Ae(t).getInstance();let c,h,f,g,p,m,y,v,b;function E(e,t){const i=new Gn;i.id=e.id,i.bitrate=e.bandwidth,i.width=e.width,i.height=e.height,i.tilesHor=1,i.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(e=>{if(A.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)>=0&&e.value){const t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(i.tilesHor=parseInt(t[0],10),i.tilesVert=parseInt(t[1],10))}}),t?y.updateSegmentData(e).then(t=>{!function(e,t,i){let s=[];const o=function(e,t){const r=[];let i,s,o,l,u=0;for(i=0,s=e.segments.length;i<s;i++)o=e.segments[i],l=pe(a,n.getIsDynamic(),t,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,u),l&&(r.push(l),l=null,u++);return r}(i,t);t.segments=o,t.fragmentDuration=t.segmentDuration||(t.segments&&t.segments.length>0?t.segments[0].duration:NaN),e.segmentDuration=t.segments[0].duration,e.readThumbnail=function(e,n){let i=null;s.some(t=>{if(t.start<=e&&t.end>e)return i=t.url,!0}),i?n(i):t.segments.some(i=>{if(i.mediaStartTime<=e&&i.mediaStartTime+i.duration>e){const e=r.resolve(t.path),a=new xn({method:"get",url:e.url,responseType:"arraybuffer",customData:{request:{range:i.mediaRange},onloadend:function(e){let t=b.getSamplesInfo(e.target.response),r=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),a=window.URL.createObjectURL(r);s.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:a}),n&&n(a)}}}),o=new Cn({request:a});return v.load(a,o),!0}})}}(i,e,t)}):(i.startNumber=e.startNumber,i.segmentDuration=e.segmentDuration,i.timescale=e.timescale,i.templateUrl=function(e){const t=d.isRelative(e.media)?d.resolve(e.media,r.resolve(e.path).url):e.media;return t?fe(t,e.id):""}(e)),i.tilesHor>0&&i.tilesVert>0&&(i.widthPerTile=i.width/i.tilesHor,i.heightPerTile=i.height/i.tilesVert,h.push(i))}function T(){h=[],f=[],p=-1,m=null,g&&(g.reset(),g=null)}return c={addTracks:function(){if(!i||!n)return;if(m=n.getMediaInfoForType(i,A.default.IMAGE),!m)return;const e=n.getVoRepresentations(m);e&&e.length>0&&e.forEach(e=>{(e.segmentInfoType===I.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===I.default.SEGMENT_TIMELINE)&&E(e),e.segmentInfoType===I.default.SEGMENT_BASE&&E(e,!0),f.push(e)}),h.length>0&&h.sort((e,t)=>e.bitrate-t.bitrate)},getCurrentTrack:function(){return p<0?null:h[p]},getCurrentTrackIndex:function(){return p},getRepresentations:function(){return f},getThumbnailRequestForTime:function(e){let t;const r=n.getVoRepresentations(m);for(let n=0;n<r.length;n++)if(h[p].id===r[n].id){t=r[n];break}return g.getSegmentRequestForTime(m,t,e)},getTracks:function(){return h},reset:T,setTrackById:function(e){if(!h||0===h.length)return;const t=h.findIndex(t=>t.id===e);-1!==t&&(p=t)},setTrackByIndex:function(e){h&&0!==h.length&&(e>=h.length&&(e=h.length-1),p=e)}},T(),v=Ve(t).create({}),b=Qn(t).getInstance(),y=Oe(t).create({events:l,eventBus:o,streamInfo:i,timelineConverter:a,dashConstants:u,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:A.default.IMAGE}),g=Ee(t).create({streamInfo:i,type:A.default.IMAGE,timelineConverter:a,segmentsController:y,baseURLController:r,debug:s,eventBus:o,events:l,dashConstants:u,urlUtils:d}),g.initialize(!!n&&n.getIsDynamic()),c}Jn.__dashjs_factory_name="ThumbnailTracks";var Zn=x.default.getClassFactory(Jn);function er(e){const t=this.context,n=e.streamInfo;let r,i;function a(e){i.setTrackByIndex(e)}function s(){i&&i.reset()}return r={getCurrentTrack:function(){return i.getCurrentTrack()},getCurrentTrackIndex:function(){return i.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return i.getRepresentations()},getStreamId:function(){return n.id},initialize:function(){i.addTracks();const e=i.getTracks();e&&e.length>0&&a(0)},provide:function(e,t){if("function"!=typeof t)return;const n=i.getCurrentTrack();let r,a;if(!n||n.segmentDuration<=0||null==e)return void t(null);a=i.getThumbnailRequestForTime(e),a&&(n.segmentDuration=a.duration),r=e%n.segmentDuration;const s=Math.floor(r*n.tilesHor*n.tilesVert/n.segmentDuration),o=new qn;if(o.width=Math.floor(n.widthPerTile),o.height=Math.floor(n.heightPerTile),o.x=Math.floor(s%n.tilesHor)*n.widthPerTile,o.y=Math.floor(s/n.tilesHor)*n.heightPerTile,"readThumbnail"in n)return n.readThumbnail(e,e=>{o.url=e,t(o)});if(a)o.url=a.url,n.segmentDuration=NaN;else{const t=Math.floor(e/n.segmentDuration);o.url=function(e,t){const n=t+e.startNumber;return fe(e.templateUrl,void 0,n,void 0,e.bandwidth,(n-1)*e.segmentDuration*e.timescale)}(n,t)}t(o)},reset:s,setTrackByIndex:a,setTrackById:function(e){i.setTrackById(e)}},s(),i=Zn(t).create({streamInfo:n,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),r}er.__dashjs_factory_name="ThumbnailController";var tr=x.default.getClassFactory(er);function nr(e){let t;e=e||{};let n=[];const r=(0,_.default)(this.context).getInstance(),i=e.updateEventName,a=e.addBlacklistEventName;function s(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(i,{entry:e}))}function o(e){s(e.entry)}return t={add:s,remove:function(e){const t=n.indexOf(e);-1!==t&&n.splice(t,1)},contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){a&&r.off(a,o,t),n=[]}},a&&r.on(a,o,t),t}nr.__dashjs_factory_name="BlackListController";var rr=x.default.getClassFactory(nr);const ir=[A.default.VIDEO,A.default.AUDIO,A.default.TEXT,A.default.MUXED,A.default.IMAGE];function ar(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance(),r=Ae(t).getInstance(),i=e.manifestModel,a=e.mediaPlayerModel,s=e.dashMetrics,o=e.manifestUpdater,l=e.adapter,u=e.timelineConverter,d=e.capabilities,c=e.errHandler,h=e.abrController,f=e.playbackController,g=e.throughputController,p=e.eventController,m=e.mediaController,y=e.protectionController,v=e.textController,b=e.videoModel;let E=e.streamInfo;const T=e.settings;let S,w,k,x,D,L,M,N,P,O,F,U,z,B,j,q;function H(e,t,n){return new Promise((r,a)=>{Z(),te();let s=b.getElement();const o=[];ir.forEach(t=>{if((t!==A.default.TEXT||e)&&(t!==A.default.VIDEO||!s||s&&/^VIDEO$/i.test(s.nodeName))){const r=n.find(e=>e.mediaInfo.type===t);o.push(V(t,e,r))}}),Promise.all(o).then(()=>{return e=t,new Promise(t=>{const n={},r=k.map(t=>{const n=t.getRepresentation();return t.createBufferSinks(e,n)});Promise.all(r).then(e=>{e.forEach(e=>{e&&(n[e.getType()]=e)}),t(n)}).catch(()=>{t(n)})});var e}).then(t=>{if(0===k.length){const e="No streams to play.";c.error(new G.default(K.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,i.getValue())),w.fatal(e)}else ce();e&&v.createTracks(E),r(t)}).catch(e=>{a(e)})})}function V(r,s,o){let p,y=l.getAllMediaInfoForType(E,r),b=[],S=null;if(!y||0===y.length)return w.info("No "+r+" data."),Promise.resolve();r===A.default.VIDEO&&(M=!0),r===A.default.AUDIO&&(N=!0);for(let e=0,t=y.length;e<t;e++)S=y[e],r===A.default.TEXT&&S.isEmbedded&&(v.addEmbeddedTrack(E,S),b.push(S)),$(S)&&m.addTrack(S);if(b.length>0&&(m.setInitialMediaSettingsForType(r,E),v.addMediaInfosToBuffer(E,r,b)),y=y.filter(e=>!e.isEmbedded),0===y.length)return Promise.resolve();if(r===A.default.IMAGE)return O=tr(t).create({streamInfo:E,adapter:l,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:B,eventBus:n,events:R.default,dashConstants:I.default,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),O.initialize(),Promise.resolve();n.trigger(R.default.STREAM_INITIALIZING,{streamInfo:E,mediaInfo:S}),m.setInitialMediaSettingsForType(r,E);let _=function(n,r){const s=n&&n.length>0?n[0]:null;let o=P.getModel(s?s.type:null);const p=s?s.type:null,y=s?s.mimeType:null,b=s?s.isFragmented:null;let S=je(t).create({abrController:h,adapter:l,baseURLController:e.baseURLController,boxParser:z,capabilities:d,dashMetrics:e.dashMetrics,errHandler:c,fragmentModel:o,manifestModel:i,mediaController:m,mediaPlayerModel:a,mimeType:y,playbackController:f,segmentBaseController:e.segmentBaseController,segmentBlacklistController:F,settings:T,streamInfo:E,textController:v,throughputController:g,timelineConverter:u,type:p});return S.initialize(r,M,b),k.push(S),S.setMediaInfoArray(n),p===A.default.TEXT&&v.addMediaInfosToBuffer(E,p,n,o),S}(y,s);if(p=m.getCurrentTrackFor(r,E.id),p){const e=r===A.default.TEXT&&p.isEmbedded?y[0]:p,t=new ze({newMediaInfo:e,previouslySelectedRepresentation:o});return _.selectMediaInfo(t)}return Promise.resolve()}function $(e){const t=e?e.type:null;let n;return t===A.default.MUXED?(n="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",w.fatal(n),c.error(new G.default(K.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,n,i.getValue())),!1):!(t!==A.default.TEXT&&t!==A.default.IMAGE&&e.contentProtection&&e.contentProtection.length>0&&!d.supportsEncryptedMedia()&&(c.error(new G.default(K.CAPABILITY_MEDIAKEYS_ERROR_CODE,K.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Y(e){let t=k?k.length:0;for(let n=0;n<t;n++){let t=k[n].getFragmentModel();t.abortRequests(),t.resetInitialSettings(),k[n].reset(!1,e)}v&&v.deactivateStream(E),O&&(O.reset(),O=null),k=[],D=!1,L=!1,he(!1),X(!1),n.trigger(R.default.STREAM_DEACTIVATED,{streamInfo:E})}function W(e){Y(e),x=!1,M=!1,N=!1,j=!1,q=[]}function X(e){j=e}function Q(){return E?E.start:NaN}function J(){return E?E.id:null}function Z(){if(!b||!h)throw new Error(A.default.MISSING_CONFIG_ERROR)}function ee(e){e.error&&(c.error(e.error),w.fatal(e.error.message))}function te(){if(p){const e=l.getEventsFor(E);e&&e.length>0&&p.addInlineEvents(e,E.id)}}function ne(e){let t=re(e);return t?t.getMediaInfo():null}function re(e){return e?k.find(t=>t.getType()===e):null}function ie(){let e=ue();const t=e.length;if(0!==t){for(let n=0;n<t;n++)if(!e[n].isBufferingCompleted()&&(e[n].getType()===A.default.AUDIO||e[n].getType()===A.default.VIDEO))return void w.debug("onBufferingCompleted - One streamProcessor has finished but",e[n].getType(),"one is not buffering completed");w.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),L=!0,n.trigger(R.default.STREAM_BUFFERING_COMPLETED,{streamInfo:E},{streamInfo:E})}else w.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function ae(e){p&&p.addInbandEvents(e.events,E.id)}function se(){ce()}function oe(e){return e&&e.type?le(e.type):null}function le(e){return e?ue().filter(function(t){return t.getType()===e})[0]:null}function ue(){let e,t,n=[];for(let r=0;r<k.length;r++)t=k[r],e=t.getType(),e!==A.default.AUDIO&&e!==A.default.VIDEO&&e!==A.default.TEXT||n.push(t);return n}function de(){const e=k.length;for(let t=0;t<e&&k[t];t++)k[t].getScheduleController().startScheduleTimer()}function ce(){const e=k.length;if(y){y.clearMediaInfoArray();for(let t=0;t<e&&k[t];t++){const e=k[t].getType(),n=k[t].getMediaInfo();if(e===A.default.AUDIO||e===A.default.VIDEO||e===A.default.TEXT&&n&&n.isFragmented){let e=k[t].getMediaInfo();e&&y.initializeForMedia(e)}}y.handleKeySystemFromManifest()}x||(x=!0,b.waitForReadyState(A.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{n.trigger(R.default.STREAM_INITIALIZED,{streamInfo:E})}))}function he(e){U=e}function fe(){return U}return S={activate:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((i,a)=>{if(!D)return fe()?(D=!0,n.trigger(R.default.STREAM_ACTIVATED,{streamInfo:E}),void i(t)):void function(e,t){return H(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])}(e,t,r).then(e=>{D=!0,r&&r.length>0&&de(),n.trigger(R.default.STREAM_ACTIVATED,{streamInfo:E}),i(e)}).catch(e=>{a(e)});i(t)})},checkAndHandleCompletedBuffering:function(){L||k.forEach(e=>{e.checkAndHandleCompletedBuffering()})},deactivate:Y,getAdapter:function(){return l},getCurrentMediaInfoForType:function(e){const t=le(e);return t?t.getMediaInfo():null},getCurrentRepresentationForType:function(e){const t=le(e);return t?t.getRepresentation():null},getDuration:function(){return E?E.duration:NaN},getHasAudioTrack:function(){return N},getHasFinishedBuffering:function(){return L},getHasVideoTrack:function(){return M},getId:J,getIsActive:function(){return D},getIsEndedEventSignaled:function(){return j},getPreloaded:fe,getRepresentationForTypeById:function(e,t){let n;if(e===A.default.IMAGE){if(!O)return null;n=O.getPossibleVoRepresentations()}else{n=function(e){let t=re(e);return t?t.getAllMediaInfos():[]}(e).flatMap(e=>h.getPossibleVoRepresentationsFilteredBySettings(e,!0))}if(!n||0===n.length)return null;const r=n.filter(e=>e.id===t);return r&&r.length>0?r[0]:null},getRepresentationForTypeByIndex:function(e,t){let n;if(e===A.default.IMAGE){if(!O)return null;n=O.getPossibleVoRepresentations()}else{const t=ne(e);n=h.getPossibleVoRepresentationsFilteredBySettings(t,!0)}return n[t=Math.max(Math.min(t,n.length-1),0)]},getRepresentationsByType:function(e){if(Z(),e===A.default.IMAGE)return O?O.getPossibleVoRepresentations():[];const t=ne(e);return h.getPossibleVoRepresentationsFilteredBySettings(t,!0)},getStartTime:Q,getStreamId:function(){return E?E.id:null},getStreamInfo:function(){return E},getStreamProcessors:ue,getThumbnailController:function(){return O},initialize:function(){n.on(R.default.BUFFERING_COMPLETED,ie,S),n.on(R.default.INBAND_EVENTS,ae,S),n.on(R.default.DATA_UPDATE_COMPLETED,se,S),y&&(n.on(R.default.KEY_ERROR,ee,S),n.on(R.default.SERVER_CERTIFICATE_UPDATED,ee,S),n.on(R.default.LICENSE_REQUEST_COMPLETE,ee,S),n.on(R.default.KEY_SYSTEM_SELECTED,ee,S),n.on(R.default.KEY_SESSION_CREATED,ee,S)),v.initializeForStream(E),n.trigger(R.default.STREAM_UPDATED,{streamInfo:E})},initializeForTextWithMediaSource:function(e){return new Promise((t,n)=>{V(A.default.TEXT,e,null).then(()=>function(){const e=le(A.default.TEXT);return e?e.createBufferSinks():Promise.resolve()}()).then(()=>{v.createTracks(E),t()}).catch(e=>{n(e)})})},prepareQualityChange:function(e){const t=le(e.mediaType);t&&t.prepareQualityChange(e)},prepareTrackChange:function(e){if(!D||!E)return;L=!1;let t=e.newMediaInfo,n=i.getValue(),r=oe(t);if(!r)return;let a=f.getTime();if(w.info("Stream -  Process track changed at current time "+a),n.refreshManifestOnSwitchTrack)q.push(e),o.getIsUpdating()||(w.debug("Stream -  Refreshing manifest for switch track"),o.refreshManifest());else{r.clearScheduleTimer(),r.setTrackSwitchInProgress(!0);const n=r.getRepresentation();r.selectMediaInfo(new ze({newMediaInfo:t})).then(()=>{const t=!!(e&&e.options&&e.options.hasOwnProperty("replaceBuffer"))&&e.options.replaceBuffer;return r.prepareTrackSwitch(n,t)}).then(()=>{r.setTrackSwitchInProgress(!1)})}},reset:function(e){P&&(P.reset(),P=null),h&&E&&h.clearDataForStream(E.id),F&&(F.reset(),F=null),v&&E&&v.clearDataForStream(E.id),m&&E&&m.clearDataForStream(E.id),W(e),E=null,n.off(R.default.BUFFERING_COMPLETED,ie,S),n.off(R.default.INBAND_EVENTS,ae,S),n.off(R.default.DATA_UPDATE_COMPLETED,se,S),y&&(n.off(R.default.KEY_ERROR,ee,S),n.off(R.default.SERVER_CERTIFICATE_UPDATED,ee,S),n.off(R.default.LICENSE_REQUEST_COMPLETE,ee,S),n.off(R.default.KEY_SYSTEM_SELECTED,ee,S),n.off(R.default.KEY_SESSION_CREATED,ee,S))},setIsEndedEventSignaled:X,setMediaSource:function(e){return new Promise((t,n)=>{const r=[];for(let i=0;i<k.length;)$(k[i].getMediaInfo())?(r.push(k[i].setMediaSource(e)),i++):(k[i].reset(),k.splice(i,1));Promise.all(r).then(()=>{for(let e=0;e<k.length;e++)k[e].dischargePreBuffer();if(0===k.length){const e="No streams to play.";c.error(new G.default(K.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e+"nostreams",i.getValue())),w.fatal(e)}t()}).catch(e=>{w.error(e),n(e)})})},startPreloading:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((r,i)=>{fe()?i():(w.info(`[startPreloading] Preloading next stream with id ${J()}`),he(!0),H(e,t,n).then(()=>{for(let e=0;e<k.length&&k[e];e++)k[e].setExplicitBufferingTime(Q()),k[e].getScheduleController().startScheduleTimer();r()}).catch(()=>{he(!1),i()}))})},startScheduleControllers:de,triggerProtectionError:function(e){ee(e)},updateData:function(e){return new Promise(t=>{E=e,p&&te();let r,i=[];for(let e=0,n=k.length;e<n;e++){let t=k[e];const n=t.getMediaInfo();i.push(t.updateStreamInfo(E));let r=l.getAllMediaInfoForType(E,t.getType());if(r=r.filter(e=>!e.isEmbedded),t.setMediaInfoArray(r),r)for(let e=0;e<r.length;e++)l.areMediaInfosEqual(n,r[e])&&i.push(t.selectMediaInfo(new ze({newMediaInfo:r[e]})))}Promise.all(i).then(()=>{let e=[];for(;q.length>0;){let t=q.pop(),n=t.newMediaInfo;if(r=oe(t.oldMediaInfo),!r)return;const i=r.getRepresentation();r.setTrackSwitchInProgress(!0),e.push(r.prepareTrackSwitch(i)),e.push(r.selectMediaInfo(new ze({newMediaInfo:n})))}return Promise.all(e)}).then(()=>{ce(),r&&r.setTrackSwitchInProgress(!1),n.trigger(R.default.STREAM_UPDATED,{streamInfo:E}),t()}).catch(e=>{c.error(e)})})}},function(){try{B=(0,C.default)(t).getInstance(),w=B.getLogger(S),W(),z=Qn(t).getInstance(),F=rr(t).create({updateEventName:R.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:R.default.SEGMENT_LOCATION_BLACKLIST_ADD}),P=jn(t).create({streamInfo:E,mediaPlayerModel:a,dashMetrics:s,errHandler:c,settings:T,boxParser:z,dashConstants:I.default,urlUtils:r})}catch(e){throw e}}(),S}ar.__dashjs_factory_name="Stream";var sr=x.default.getClassFactory(ar),or=class{constructor(e){this.url=e||null,this.type=N.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},lr=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function ur(){const e=this.context,t=Ae(e).getInstance();let n,r,i,a,s,o,l,u,d,c,h,f,g,p,m;function y(e){E(e,"baseUrl")}function v(e){E(e,"location")}function b(e){var t,n;e&&e.throughputValues&&e.throughputValues.serviceLocation&&(t=e.throughputValues.serviceLocation,n=e.throughputValues,s[t]||(s[t]=[]),s[t].push(n),s[t].length>4&&s[t].shift())}function E(e,t){if(e&&e.request&&e.request.serviceLocation){const n=e.request.serviceLocation;-1===a[t].all.indexOf(n)&&a[t].all.push(n),a[t].current=n}}function T(){const e=h.getValue();let t=m.getContentSteering(e);return t||(t=f.getServiceDescriptionSettings().contentSteering),t}function S(){return new Promise(e=>{try{const n=T();if(!n||!n.serverUrl)return void e();const o=function(e){let n=e.serverUrl;i&&i.reloadUri&&(n=t.isRelative(i.reloadUri)?t.resolve(i.reloadUri,e.serverUrl):i.reloadUri);const r=[],o=a.baseUrl.all.concat(a.location.all);if(o.length>0){const e=o.map(e=>({serviceLocation:e,throughput:function(e){if(!e||!s[e]||0===s[e].length)return-1;const t=g.getArithmeticMean(s[e],s[e].length,!0);return parseInt(1e3*t)}(e)}));let t="",n="";e.forEach((e,r)=>{0!==r&&(t+=",",n+=","),t+=e.serviceLocation,n+=e.throughput>-1?e.throughput:""}),r.push({key:"_DASH_pathway",value:`"${t}"`}),r.push({key:"_DASH_throughput",value:n})}return n=Ge.default.addAdditionalQueryParameterToUrl(n,r),n}(n),u=new or(o);l.load({request:u,success:t=>{var n;(n=t)&&n[I.default.CONTENT_STEERING_RESPONSE.VERSION]&&1===parseInt(n[I.default.CONTENT_STEERING_RESPONSE.VERSION])&&(i=new lr,i.version=n[I.default.CONTENT_STEERING_RESPONSE.VERSION],n[I.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(n[I.default.CONTENT_STEERING_RESPONSE.TTL])&&(i.ttl=n[I.default.CONTENT_STEERING_RESPONSE.TTL]),n[I.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(i.reloadUri=n[I.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),n[I.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(i.pathwayPriority=n[I.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),n[I.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(i.pathwayClones=n[I.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],i.pathwayClones=i.pathwayClones.filter(e=>{return(t=e)[I.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&t[I.default.CONTENT_STEERING_RESPONSE.ID]&&t[I.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&t[I.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][I.default.CONTENT_STEERING_RESPONSE.HOST];var t})),k()),p.trigger(D.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:i,url:o}),e()},error:(t,n,a,s)=>{!function(e,t){try{switch(r.warn("Error fetching data from content steering server",e),t.status){case 410:break;case 429:const e=t&&t.getResponseHeader?t.getResponseHeader("retry-after"):null;null!==e&&(i||(i={}),i.ttl=parseInt(e)),k();break;default:k()}}catch(n){r.error(n)}}(t,s),e(t)},complete:()=>{a.baseUrl.all=w(a.baseUrl),a.location.all=w(a.location)}})}catch(n){e(n)}})}function w(e){return e.all&&0!==e.all.length&&e.current?e.all.filter(t=>t===e.current):[]}function A(e){try{const t=[];return e&&0!==e.length&&i&&i.pathwayClones&&0!==i.pathwayClones.length?(i.pathwayClones.forEach(n=>{let r=e.filter(e=>n[I.default.CONTENT_STEERING_RESPONSE.BASE_ID]===e.serviceLocation),i=null;if(r&&r.length>0&&(i=r[0]),i){const e=new URL(i.url);let r=n[I.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][I.default.CONTENT_STEERING_RESPONSE.HOST];r=Ge.default.stringHasProtocol(r)?r:`${e.protocol}//${r}`;const a={synthesizedUrl:`${r}${e.pathname}`,serviceLocation:n[I.default.CONTENT_STEERING_RESPONSE.ID],queryParams:n[I.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][I.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:i};t.push(a)}}),t):t}catch(t){return r.error(t),[]}}function k(){i&&i.ttl&&!isNaN(i.ttl)&&(o&&clearTimeout(o),o=setTimeout(()=>{S()},1e3*i.ttl))}function _(){o&&clearTimeout(o),o=null}function R(){i=null,s={},a={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},_()}return n={reset:function(){R(),p.off(D.default.FRAGMENT_LOADING_STARTED,y,n),p.off(D.default.MANIFEST_LOADING_STARTED,v,n),p.off(D.default.THROUGHPUT_MEASUREMENT_STORED,b,n)},setConfig:function(e){e&&(e.adapter&&(m=e.adapter),e.errHandler&&(u=e.errHandler),e.dashMetrics&&(d=e.dashMetrics),e.mediaPlayerModel&&(c=e.mediaPlayerModel),e.manifestModel&&(h=e.manifestModel),e.serviceDescriptionController&&(f=e.serviceDescriptionController),e.throughputController&&(g=e.throughputController),e.eventBus&&(p=e.eventBus))},loadSteeringData:S,getCurrentSteeringResponseData:function(){return i},shouldQueryBeforeStart:function(){const e=T();return!!e&&e.queryBeforeStart},getSteeringDataFromManifest:T,stopSteeringRequestTimer:_,getSynthesizedBaseUrlElements:function(e){try{return A(e).map(e=>{const t=new Qe(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t.dvbPriority=e.reference.dvbPriority,t.dvbWeight=e.reference.dvbWeight,t.availabilityTimeOffset=e.reference.availabilityTimeOffset,t.availabilityTimeComplete=e.reference.availabilityTimeComplete,t})}catch(t){return r.error(t),[]}},getSynthesizedLocationElements:function(e){try{return A(e).map(e=>{const t=new st(e.synthesizedUrl,e.serviceLocation);return t.queryParams=e.queryParams,t})}catch(t){return r.error(t),[]}},initialize:function(){l=On(e).create({errHandler:u,dashMetrics:d,mediaPlayerModel:c,errors:K}),p.on(D.default.FRAGMENT_LOADING_STARTED,y,n),p.on(D.default.MANIFEST_LOADING_STARTED,v,n),p.on(D.default.THROUGHPUT_MEASUREMENT_STORED,b,n)}},r=(0,C.default)(e).getInstance().getLogger(n),R(),n}ur.__dashjs_factory_name="ContentSteeringController";var dr=x.default.getSingletonFactory(ur);function cr(){const e=this.context,t=(0,$.default)(e).getInstance();let n,r,i;return n={select:function(e){if(!e||0===e.length)return null;let n=null;return t.get().streaming.applyContentSteering&&(n=function(e){const t=i.getCurrentSteeringResponseData();return t&&t.pathwayPriority&&t.pathwayPriority.length>0?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,i=null;for(;n<e.length;){const a=e[n],s=t.findIndex(e=>e.serviceLocation&&e.serviceLocation===a);if(-1!==s&&!r.contains(t[s].serviceLocation)){i=t[s];break}n+=1}return i}(t.pathwayPriority,e):null}(e)),n||(n=e[0]),n},setConfig:function(e){e.blacklistController&&(r=e.blacklistController),e.contentSteeringController&&(i=e.contentSteeringController)},reset:function(){r.reset()}},r=rr(e).create({updateEventName:R.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:R.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),i=dr(e).getInstance(),n}cr.__dashjs_factory_name="LocationSelector";var hr=x.default.getClassFactory(cr);function fr(){const e=this.context,t=(0,_.default)(e).getInstance(),n=Ae(e).getInstance();let r,i,a,s,o,l,u,d,c,h,f,g,p,m;function y(){a=NaN,u=!1,o=!0,l=!1,v()}function v(){null!==s&&(clearTimeout(s),s=null)}function b(e){v(),l||(isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),s=setTimeout(S,e)))}function E(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u=!0;const t=c.getValue();let r=t.url;r&&(r=Ge.default.removeQueryParameterFromUrl(r,A.default.CMCD_QUERY_KEY));let i=null;const a=f.getPatchLocation(t),s=h.select(a);let o=null;if(s&&!e)r=s.url,i=s.serviceLocation,o=s.queryParams;else{const e=function(e){const t=f.getLocation(e),n=p.getSynthesizedLocationElements(t);return t.concat(n)}(t),n=h.select(e);n&&(r=n.url,i=n.serviceLocation,o=n.queryParams)}n.isRelative(r)&&(r=n.resolve(r,t.url)),d.load(r,i,o)}function T(e){if(e){if(f.getIsPatch(e)){let t=e;e=c.getValue();let n=f.isPatchValid(e,t),r=n;if(n){let n=f.getPublishTime(e);f.applyPatchToManifest(e,t);let i=f.getPublishTime(e);r=n.getTime()!==i.getTime()}if(!r)return i.debug("Patch provided is invalid, performing full manifest refresh"),void E(!0);e.loadedTime=new Date}}else(e=c.getValue()).loadedTime=new Date;if(c.getValue()&&c.getValue().type===I.default.DYNAMIC&&e.type===I.default.STATIC)return t.trigger(R.default.DYNAMIC_TO_STATIC),u=!1,void(l=!0);c.setValue(e);const n=new Date,r=(n.getTime()-e.loadedTime.getTime())/1e3;a=f.getManifestUpdatePeriod(e,r),1e3*a>2147483647&&(a=2147483.647),t.trigger(R.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),o||b()}function S(){o||(u?b(m.get().streaming.manifestUpdateRetryInterval):E())}function w(e){e.error?e.error.code===K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&g.error(e.error):T(e.manifest)}function k(){o=!1,b()}function x(){o=!m.get().streaming.scheduling.scheduleWhilePaused,o&&v()}function L(){u=!1}return r={initialize:function(){y(),t.on(R.default.STREAMS_COMPOSED,L,this),t.on(D.default.PLAYBACK_STARTED,k,this),t.on(D.default.PLAYBACK_PAUSED,x,this),t.on(R.default.INTERNAL_MANIFEST_LOADED,w,this)},setManifest:function(e){T(e)},refreshManifest:E,getIsUpdating:function(){return u},setConfig:function(e){e&&(e.manifestModel&&(c=e.manifestModel),e.adapter&&(f=e.adapter),e.manifestLoader&&(d=e.manifestLoader),e.errHandler&&(g=e.errHandler),e.locationSelector&&(h=e.locationSelector),e.settings&&(m=e.settings),e.contentSteeringController&&(p=e.contentSteeringController))},reset:function(){t.off(D.default.PLAYBACK_STARTED,k,this),t.off(D.default.PLAYBACK_PAUSED,x,this),t.off(R.default.STREAMS_COMPOSED,L,this),t.off(R.default.INTERNAL_MANIFEST_LOADED,w,this),y()}},i=(0,C.default)(e).getInstance().getLogger(r),h=hr(e).create(),r}fr.__dashjs_factory_name="ManifestUpdater";var gr=x.default.getClassFactory(fr);function pr(){const e=this.context,t=(0,_.default)(e).getInstance(),n=Ae(e).getInstance();let r,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v;function b(){d=[],c=[],h=null,f=null,p=null,g=NaN,a=!1,s=!1,m=o.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function E(){o.get().streaming.utcSynchronization.enabled&&!a&&!s&&p&&p.value&&p.schemeIdUri&&!isNaN(g)&&!isNaN(o.get().streaming.utcSynchronization.backgroundAttempts)&&(f&&(Date.now()-f)/1e3<30||(d=[],s=!0,T(isNaN(o.get().streaming.utcSynchronization.backgroundAttempts)?2:o.get().streaming.utcSynchronization.backgroundAttempts)))}function T(e){try{if(e<=0)return void F();const t=Date.now();l[p.schemeIdUri](p.value,function(n){const r=Date.now(),i=w(t,r,n);d.push(i),T(e-1)},function(){F()})}catch(t){F()}}function S(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!c||0===c.length||e>=c.length)return void A();let t=c[e];if(t)if(l.hasOwnProperty(t.schemeIdUri)){const n=(new Date).getTime();l[t.schemeIdUri](t.value,function(e){const r=(new Date).getTime(),i=w(n,r,e);p=t,A(i)},function(){S(e+1)})}else S(e+1);else A()}function w(e,t,n){return n-(t-(t-e)/2)}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,t=isNaN(e);t&&o.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let e=u.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?O(!0):O(!1,t-Date.now())}():O(t,e)}function I(e){let t=Date.parse(e);return isNaN(t)&&(t=function(e){let t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function k(e){return Date.parse(e)}function x(e){return Date.parse(e)}function D(e,t,n){n()}function L(e,t,n){let r=I(e);isNaN(r)?n():t(r)}function M(e,t,r,i,a){let s,o,l=!1,u=new XMLHttpRequest,d=a?N.HTTPRequest.HEAD:N.HTTPRequest.GET,c=t.match(/\S+/g);if(t=c.shift(),s=function(){l||(l=!0,c.length?M(e,c.join(" "),r,i,a):i())},o=function(){let t,n;200===u.status&&(t=a?u.getResponseHeader("Date"):u.response,n=e(t),isNaN(n)||(r(n),l=!0))},n.isRelative(t)){const e=v.resolve();e&&(t=n.resolve(t,e.url))}u.open(d,t),u.timeout=5e3,u.onload=o,u.onloadend=s,u.send()}function P(e,t,n){M(x,e,t,n,!0)}function O(e,n){if(isNaN(g)||isNaN(n)||e||function(e){try{const t=U(e),n=isNaN(m)?30:m,r=isNaN(o.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:o.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,a=isNaN(o.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:o.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,s=isNaN(o.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:o.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let l;t?(l=Math.min(n*r,a),i.debug(`Increasing timeBetweenSyncAttempts to ${l}`)):(l=Math.max(n/r,s),i.debug(`Decreasing timeBetweenSyncAttempts to ${l}`)),m=l}catch(t){}}(n),!e&&!isNaN(n)){h=Date.now(),a=!1;const e=isNaN(g);g=n,e&&E(),i.debug(`Completed UTC sync. Setting client - server offset to ${n}`)}e&&(p=null,a=!1,y.error(new G.default(K.TIME_SYNC_FAILED_ERROR_CODE,K.TIME_SYNC_FAILED_ERROR_MESSAGE))),t.trigger(R.default.UPDATE_TIME_SYNC_OFFSET,{offset:n}),t.trigger(R.default.TIME_SYNCHRONIZATION_COMPLETED)}function F(){if(!d||0===d.length)return;const e=d.reduce((e,t)=>e+t,0)/d.length;U(e)?i.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(i.debug(`Completed background UTC sync. Setting client - server offset to ${e}`),g=e,t.trigger(R.default.UPDATE_TIME_SYNC_OFFSET,{offset:g})),s=!1,f=Date.now()}function U(e){try{if(isNaN(g))return!0;const t=o.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(o.get().streaming.utcSynchronization.maximumAllowedDrift)?o.get().streaming.utcSynchronization.maximumAllowedDrift:100;return e>=g-t&&e<=g+t}catch(t){return!0}}return r={initialize:function(){b(),l={"urn:mpeg:dash:utc:http-head:2014":P,"urn:mpeg:dash:utc:http-xsdate:2014":M.bind(null,I),"urn:mpeg:dash:utc:http-iso:2014":M.bind(null,k),"urn:mpeg:dash:utc:direct:2014":L,"urn:mpeg:dash:utc:http-head:2012":P,"urn:mpeg:dash:utc:http-xsdate:2012":M.bind(null,I),"urn:mpeg:dash:utc:http-iso:2012":M.bind(null,k),"urn:mpeg:dash:utc:direct:2012":L,"urn:mpeg:dash:utc:http-ntp:2014":D,"urn:mpeg:dash:utc:ntp:2014":D,"urn:mpeg:dash:utc:sntp:2014":D}},attemptSync:function(e,n){c=e,a||(function(e){try{if(!e||!o.get().streaming.utcSynchronization.enabled)return!1;const t=isNaN(m)?30:m;return!(h&&t&&!isNaN(t))||(Date.now()-h)/1e3>=t}catch(t){return!0}}(n)?(a=!0,S()):t.trigger(R.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(u=e.dashMetrics),e.baseURLController&&(v=e.baseURLController),e.errHandler&&(y=e.errHandler),e.settings&&(o=e.settings))},reset:function(){b(),t.off(R.default.ATTEMPT_BACKGROUND_SYNC,E,r)}},i=(0,C.default)(e).getInstance().getLogger(r),t.on(R.default.ATTEMPT_BACKGROUND_SYNC,E,r),r}pr.__dashjs_factory_name="TimeSyncController";const mr=x.default.getSingletonFactory(pr);mr.HTTP_TIMEOUT_MS=5e3,x.default.updateSingletonFactory(pr.__dashjs_factory_name,mr);var yr=mr;function vr(){let e,t,n,r,i;const a=this.context,s=(0,_.default)(a).getInstance();return e={attachMediaSource:function(e){let n=window.URL.createObjectURL(t);return e.setSource(n),"managedMediaSource"===r&&(e.setDisableRemotePlayback(!0),t.addEventListener("startstreaming",()=>{s.trigger(D.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),t.addEventListener("endstreaming",()=>{s.trigger(D.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),n},createMediaSource:function(){let e="WebKitMediaSource"in window,n="MediaSource"in window;return"ManagedMediaSource"in window?(t=new ManagedMediaSource,r="managedMediaSource",i.info("Created ManagedMediaSource")):n?(t=new MediaSource,r="mediaSource",i.info("Created MediaSource")):e&&(t=new WebKitMediaSource,i.info("Created WebkitMediaSource")),t},detachMediaSource:function(e){e.setSource(null)},setConfig:function(e){e&&e.settings&&(n=e.settings)},setDuration:function e(r){t&&"open"===t.readyState&&(null===r&&isNaN(r)||t.duration!==r&&(r!==1/0||n.get().streaming.buffer.mediaSourceDurationInfinity||(r=Math.pow(2,32)),function(e){let t=e.sourceBuffers;for(let n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(t)?setTimeout(e.bind(null,r),50):(i.info("Set MediaSource duration:"+r),t.duration=r)))},setSeekable:function(e,n){t&&"function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange&&"open"===t.readyState&&e>=0&&e<n&&(t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,n))},signalEndOfStream:function(e){if(!e||"open"!==e.readyState)return;let t=e.sourceBuffers;for(let n=0;n<t.length;n++){if(t[n].updating)return;if(0===t[n].buffered.length)return}i.info("call to mediaSource endOfStream"),e.endOfStream()}},i=(0,C.default)(a).getInstance().getLogger(e),e}vr.__dashjs_factory_name="MediaSourceController";var br=x.default.getSingletonFactory(vr);function Er(){const e="urn:mpeg:dash:event:2012",t="updated",n="added",r=this.context,i=(0,_.default)(r).getInstance();let a,s,o,l,u,d,c,h,f,g,p;function m(){if(!c||!h)throw new Error("setConfig function has to be called previously")}function y(){p=!1,o={},l={},u=null,g=!1,d=Date.now()/1e3}function v(){try{if(!g){g=!0;const e=h.getTime();let t=e-d;t=d>0?Math.max(0,t):0,b(l,t,e),b(o,t,e),E(l),E(o),d=e,g=!1}}catch(e){g=!1,s.error(e)}}function b(e,t,n){try{A(e,function(r){if(void 0!==r){const i=isNaN(r.duration)?0:r.duration;r.calculatedPresentationTime<=n&&r.calculatedPresentationTime+t+i>=n?k(r,D.default.EVENT_MODE_ON_START):(I(n,i+t,r.calculatedPresentationTime)||function(e){try{const t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(t){return s.error(t),!1}}(r))&&(s.debug(`Removing event ${r.id} from period ${r.eventStream.period.id} as it is expired or invalid`),function(e,t){try{const n=t.eventStream.schemeIdUri,r=t.eventStream.period.id,i=t.eventStream.value,a=t.id;e[r][n]=e[r][n].filter(e=>i&&e.eventStream.value&&e.eventStream.value!==i||e.id!==a),0===e[r][n].length&&delete e[r][n]}catch(n){s.error(n)}}(e,r))}})}catch(r){s.error(r)}}function E(e){try{for(const t in e)e.hasOwnProperty(t)&&0===Object.keys(e[t]).length&&delete e[t]}catch(t){s.error(t)}}function T(e,r){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=e.eventStream.schemeIdUri,s=e.eventStream.value,o=e.id;let l="discarded";r[a]||(r[a]=[]);const u=r[a].findIndex(e=>(!s||e.eventStream.value&&e.eventStream.value===s)&&e.id===o);if(-1===u)r[a].push(e),e.triggeredReceivedEvent=!1,e.triggeredStartEvent=!1,l=n;else if(i){const n=r[a][u];e.triggeredReceivedEvent=n.triggeredReceivedEvent,e.triggeredStartEvent=n.triggeredStartEvent,r[a][u]=e,l=t}return l}function S(e){try{if(1==e.eventStream.value){const t=e.calculatedPresentationTime;let n;n=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,i.trigger(D.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:t,newDuration:n,newManifestValidAfter:NaN},{mode:D.default.EVENT_MODE_ON_START})}}catch(t){s.error(t)}}function w(e){try{const t=h.getTime();A(e,function(e){const n=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.duration)?e.eventStream.period.duration:NaN,r=e.eventStream&&e.eventStream.period&&!isNaN(e.eventStream.period.start)?e.eventStream.period.start:NaN;if(isNaN(n)||isNaN(r))return;const i=e.calculatedPresentationTime;Math.abs(i-t)<300&&k(e,D.default.EVENT_MODE_ON_START)})}catch(t){s.error(t)}}function A(e,t){try{if(e){const n=Object.keys(e);for(let r=0;r<n.length;r++){const i=e[n[r]],a=Object.keys(i);for(let e=0;e<a.length;e++)i[a[e]].forEach(e=>{void 0!==e&&t(e)})}}}catch(n){s.error(n)}}function I(e,t,n){try{return e-t>n}catch(r){return s.error(r),!1}}function k(t,n){try{const a=h.getTime(),o=t.id;if(n===D.default.EVENT_MODE_ON_RECEIVE&&!t.triggeredReceivedEvent)return s.debug(`Received event ${o}`),t.triggeredReceivedEvent=!0,void i.trigger(t.eventStream.schemeIdUri,{event:t},{mode:n});t.triggeredStartEvent||(t.eventStream.schemeIdUri===e&&1==t.eventStream.value?0===t.duration&&0===t.presentationTimeDelta||(s.debug(`Starting manifest refresh event ${o} at ${a}`),function(){try{m(),c.refreshManifest()}catch(e){s.error(e)}}()):"urn:mpeg:dash:event:callback:2015"===t.eventStream.schemeIdUri&&1==t.eventStream.value?(s.debug(`Starting callback event ${o} at ${a}`),function(e){try{let t=Ve(r).create({});const n=new xn({method:"get",url:e,responseType:"arraybuffer",customData:{}}),i=new Cn({request:n});t.load(n,i)}catch(t){s.error(t)}}(t.messageData instanceof Uint8Array?Ge.default.uint8ArrayToString(t.messageData):t.messageData)):(s.debug(`Starting event ${o} from period ${t.eventStream.period.id} at ${a}`),i.trigger(t.eventStream.schemeIdUri,{event:t},{mode:n}),f.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete t.messageData,delete t.parsedMessageData},f.get().streaming.events.deleteEventMessageDataTimeout)),t.triggeredStartEvent=!0)}catch(a){s.error(a)}}return a={addInlineEvents:function(e,r){try{if(m(),o[r]||(o[r]={}),e)for(let i=0;i<e.length;i++){let a=e[i];if(!I(h.getTime(),isNaN(a.duration)?0:a.duration,a.calculatedPresentationTime)){let e=T(a,o[r],!0);e===n?(s.debug(`Added inline event with id ${a.id} from period ${r}`),k(a,D.default.EVENT_MODE_ON_RECEIVE)):e===t&&s.debug(`Updated inline event with id ${a.id} from period ${r}`)}}}catch(i){throw i}},addInbandEvents:function(t,r){try{m(),l[r]||(l[r]={});for(let i=0;i<t.length;i++){let a=t[i];I(h.getTime(),isNaN(a.duration)?0:a.duration,a.calculatedPresentationTime)||(T(a,l[r],!1)===n?(a.eventStream.schemeIdUri===e&&S(a),s.debug(`Added inband event with id ${a.id} from period ${r}`),k(a,D.default.EVENT_MODE_ON_RECEIVE)):s.debug(`Inband event with scheme_id_uri ${a.eventStream.schemeIdUri}, value ${a.eventStream.value}, period id ${r} and event id ${a.id} was ignored because it has been added before.`))}v()}catch(i){throw i}},getInbandEvents:function(){return l},getInlineEvents:function(){return o},start:function(){try{m(),s.debug("Start Event Controller");const e=f.get().streaming.events.eventControllerRefreshDelay;p||isNaN(e)||(p=!0,u=setInterval(v,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(c=e.manifestUpdater),e.playbackController&&(h=e.playbackController),e.settings&&(f=e.settings)}catch(t){throw t}},reset:function(){(function(){try{null!==u&&p&&(clearInterval(u),u=null,p=!1,function(){try{w(l),w(o)}catch(e){s.error(e)}}())}catch(e){throw e}})(),y()}},s=(0,C.default)(r).getInstance().getLogger(a),y(),a}Er.__dashjs_factory_name="EventController";var Tr=x.default.getSingletonFactory(Er),Sr={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},wr=n(445),Ar=n(1923);function Ir(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v,b,E,T,S,w,I,x,L,M,N,P,O,F,U,z,B,j,q,H,V,$,Y,W,X,Q,J,ee,te,ne,re,ie,ae;function se(){if(!(o&&o.hasOwnProperty("load")&&w&&w.hasOwnProperty("initialize")&&w.hasOwnProperty("reset")&&w.hasOwnProperty("getClientTimeOffset")&&l&&S&&d&&q))throw new Error(A.default.MISSING_CONFIG_ERROR)}function oe(){!function(){try{const n=u.getStreamsInfo();if(!x&&0===n.length)throw new Error("There are no periods in the MPD");x&&n.length>0&&d.updateManifestUpdateInfo({currentTime:q.getTime(),buffered:j.getBufferRange(),presentationStartTime:n[0].start,clientTimeOffset:w.getClientTimeOffset()}),I.length>0&&(0!==(e=n).length?I=I.filter(t=>{const n=e.filter(e=>e.id===t.getId()).length>0||t.getId()===x.getId();return n||(r.debug(`Removing stream ${t.getId()}`),t.reset(!0),t=null),n}):r.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects."));const i=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];i.push(ue(t)),d.addManifestUpdateStreamInfo(t)}Promise.all(i).then(()=>new Promise((e,t)=>{x?e():de(n,e,t)})).then(()=>{t.trigger(R.default.STREAMS_COMPOSED),Me()}).catch(e=>{throw e})}catch(n){S.error(new G.default(K.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n.message+" nostreamscomposed",l.getValue())),z=!0,tt()}var e}()}function le(){ne=!0}function ue(t){let n=Je(t.id);return n?n.updateData(t):(n=sr(e).create({manifestModel:l,mediaPlayerModel:V,dashMetrics:d,manifestUpdater:s,adapter:u,timelineConverter:w,capabilities:i,capabilitiesFilter:a,errHandler:S,baseURLController:g,segmentBaseController:p,textController:M,abrController:y,playbackController:q,throughputController:v,eventController:E,mediaController:b,protectionController:L,videoModel:j,streamInfo:t,settings:te}),I.push(n),n.initialize(),Promise.resolve())}function de(e,n,i){try{we();const a=d.getCurrentDVRInfo().range;if(a.end<a.start){re&&clearTimeout(re);const s=Math.min(1e3*(-1*(a.end-a.start)+2),2147483647);return r.debug(`Waiting for ${s} ms before playback can start`),t.trigger(R.default.AST_IN_FUTURE,{delay:s}),void(re=setTimeout(()=>{de(e,n,i)},s))}te.get().streaming.applyProducerReferenceTime&&H.calculateProducerReferenceTimeOffsets(e);const s=e[0].manifestInfo;if(te.get().streaming.applyServiceDescription&&H.applyServiceDescription(s),u.getIsDynamic()){const e=je(0,s);q.computeAndSetLiveDelay(e,s)}(te.get().streaming.applyContentSteering&&f.shouldQueryBeforeStart()?f.loadSteeringData():Promise.resolve()).then(()=>{const e=l.getValue();e&&g.update(e),ce(),n()}).catch(e=>{r.error(e),ce(),n()})}catch(a){i(a)}}function ce(){const e=function(){let e;if(u.getIsDynamic()){const t=d.getCurrentDVRInfo();e=(t&&t.range?t.range.end:0)-q.getOriginalLiveDelay();const n=t?t.range:null;if(n){if(isNaN(ie)&&-1===ie.toString().indexOf("posix:")){const t=Ue(!0);isNaN(t)||(r.info(`Start time from URI parameters: ${t}`),e=Math.min(e,t))}else{r.info(`Start time provided by the app: ${ie}`);const t=ze(!0,ie);isNaN(t)||(e=Math.min(e,t))}const t=te.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;e=Math.max(e,n.start+t)}}else if(e=rt()[0].getStreamInfo().start,isNaN(ie)){const t=Ue(!1);isNaN(t)||(r.info(`Start time from URI parameters: ${t}`),e=Math.max(e,t))}else{r.info(`Start time provided by the app: ${ie}`);const t=ze(!1,ie);isNaN(t)||(e=Math.max(e,t))}return e}();let n=Se(e);const i=null!==n?n:I[0];t.trigger(R.default.INITIAL_STREAM_SWITCH,{startTime:e}),he(i,null,e),Q||(Q=setInterval(function(){!F&&q.getTimeToStreamEnd()<=0&&!q.isSeeking()&&t.trigger(R.default.PLAYBACK_ENDED,{isLast:Qe().isLast})},200))}function he(e,n,i){try{if(F||!e||n===e&&e.getIsActive())return;F=!0,t.trigger(R.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});let a=!1,s=[];x=e,n&&(a=Ee(e,n),s=pe(n),n.deactivate(a)),i=isNaN(i)?!a&&n?e.getStreamInfo().start:NaN:i,r.info(`Switch to stream ${e.getId()}. Seektime is ${i}, current playback time is ${q.getTime()}. Seamless period switch is set to ${a}`),ee=ee.filter(e=>e.getId()!==x.getId()),q.initialize(Qe(),!!n),j.getElement()?fe({seekTime:i,keepBuffers:a,streamActivated:!1,representationsFromPreviousPeriod:s}):ge({seekTime:i,keepBuffers:a})}catch(a){F=!1}}function fe(e){let t;function n(){if(!B||"open"!==B.readyState)return;r.debug("MediaSource is open!"),window.URL.revokeObjectURL(t),B.removeEventListener("sourceopen",n),B.removeEventListener("webkitsourceopen",n),Fe();const i=d.getCurrentDVRInfo();c.setSeekable(i.range.start,i.range.end),e.streamActivated?(isNaN(e.seekTime)||q.seek(e.seekTime,!0,!0),x.setMediaSource(B).then(()=>{x.initializeForTextWithMediaSource(B)})):ge(e)}function i(){B.addEventListener("sourceopen",n,!1),B.addEventListener("webkitsourceopen",n,!1),t=c.attachMediaSource(j),r.debug("MediaSource attached to element.  Waiting on open...")}B?e.keepBuffers?ge(e):(c.detachMediaSource(j),i()):(B=c.createMediaSource(),i())}function ge(e){const n=e.representationsFromPreviousPeriod||[];x.activate(B,e.keepBuffers?J:void 0,n).then(n=>{n&&(J=n),isNaN(e.seekTime)||(t.trigger(R.default.SEEK_TARGET,{time:e.seekTime},{streamId:x.getId()}),q.seek(e.seekTime,!1,!0),x.startScheduleControllers()),F=!1,t.trigger(R.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Qe()})})}function pe(e){return(e?e.getStreamProcessors():[]).map(e=>e.getRepresentation())}function me(e){const t=Se(e.seekTime);var n;t&&t!==x?t&&t!==x&&(ye(),function(e,t){const n=e&&!isNaN(e.seekTime)?e.seekTime:NaN,r=x.getStreamProcessors().map(t=>t.prepareOuterPeriodPlaybackSeeking(e));Promise.all(r).then(()=>{he(t,x,n)}).catch(e=>{S.error(e)})}(e,t)):(ye(),n=e,x.getStreamProcessors().forEach(e=>e.prepareInnerPeriodPlaybackSeeking(n)),Ke(ke.USER_REQUEST_STOP_REASON)),$e(Ie.SEEK_START_REASON)}function ye(){ve()}function ve(){ee&&ee.length>0&&(ee.forEach(e=>{e.deactivate(!0)}),ee=[])}function be(e){if(e.newMediaInfo.streamInfo.id===x.getId()){if(ve(),te.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&e.oldMediaInfo&&e.oldMediaInfo.codec!==e.newMediaInfo.codec){const e=q.getTime();return x.deactivate(!1),void fe({seekTime:e,keepBuffers:!1,streamActivated:!1})}x.prepareTrackChange(e)}}function Ee(e,t){try{return te.get().streaming.buffer.reuseExistingSourceBuffers&&(i.isProtectionCompatible(t.getStreamInfo(),e.getStreamInfo())||ne)&&i.supportsChangeType()&&te.get().streaming.buffer.useChangeType}catch(n){return!1}}function Te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(B&&!e.getPreloaded()&&Ee(e,t)){const n=pe(t);e.startPreloading(B,J,n).then(()=>{ee.push(e)})}}function Se(e){if(isNaN(e))return null;const t=I.length;for(let n=0;n<t;n++){const t=I[n];if(e<parseFloat((t.getStartTime()+t.getDuration()).toFixed(5)))return t}return null}function we(){try{const e=u.getIsDynamic(),t=u.getStreamsInfo()[0].manifestInfo,n=q.getTime(),r=w.calcTimeShiftBufferWindow(I,e),i=Pe();if(void 0===r.start||void 0===r.end)return;i&&0!==i.length?i.forEach(e=>{d.addDVRInfo(e.getType(),n,t,r)}):d.addDVRInfo(A.default.VIDEO,n,t,r)}catch(e){}}function Ae(e){if(W&&O){const e=V.getInitialBufferLevel(),t=[A.default.TEXT];(isNaN(e)||e<=q.getBufferLevel(t)||u.getIsDynamic()&&e>q.getLiveDelay())&&(W=!1,$e(Ie.INITIAL_PLAYOUT_START_REASON),q.play())}e&&e.mediaType&&d.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function _e(e){e.streamInfo.id===x.getId()&&ve(),Je(e.streamInfo.id).prepareQualityChange(e)}function Re(){if(u.getIsDynamic()&&0!==q.getOriginalLiveDelay()&&x){const e=u.getStreamsInfo();if(e.length>0){const t=e[0].manifestInfo,n=je(0,t);q.computeAndSetLiveDelay(n,t)}}}function xe(){if(He()){const e=j.getPlaybackQuality();e&&d.addDroppedFrames(e)}}function Ce(){r.debug("[onPlaybackStarted]"),!W&&Y&&$e(Ie.RESUME_FROM_PAUSE_START_REASON),W&&(W=!1),X&&(X=!1,te.get().streaming.applyContentSteering&&!f.shouldQueryBeforeStart()&&f.loadSteeringData()),Y=!1}function De(e){r.debug("[onPlaybackPaused]"),e.ended||(Y=!0,Ke(ke.USER_REQUEST_STOP_REASON))}function Le(e){r.debug(`Stream with id ${e.streamInfo.id} finished buffering`);const t=e.streamInfo.isLast;B&&t?(r.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),c.signalEndOfStream(B)):Me()}function Me(){if(!x)return;if(!x.getHasFinishedBuffering())return void x.checkAndHandleCompletedBuffering();const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e||x||null;if(t){const e=t.getStreamInfo();return I.filter(function(t){const n=t.getStreamInfo();return n.start>e.start&&e.id!==n.id})}}catch(t){return[]}}(x);let t=0;for(;t<e.length;){const n=e[t],r=0===t?x:e[t-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&B&&Te(n,r),t+=1}}function Ne(){Q&&(clearInterval(Q),Q=null)}function Pe(){return x?x.getStreamProcessors():[]}function Oe(e){if(x&&!x.getIsEndedEventSignaled()){x.setIsEndedEventSignaled(!0);const e=function(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||x||null;if(!e)return null;const t=e.getStreamInfo(),n=t.start;let r=0,i=-1,a=NaN;for(;r<I.length;){const e=I[r].getStreamInfo(),s=e.start-n;s>0&&(isNaN(a)||s<a)&&t.id!==e.id&&(a=s,i=r),r+=1}return i>=0?I[i]:null}();e?(r.debug(`StreamController onEnded, found next stream with id ${e.getStreamInfo().id}. Switching from ${x.getStreamInfo().id} to ${e.getStreamInfo().id}`),he(e,x,NaN)):(r.debug("StreamController no next stream found"),x.setIsEndedEventSignaled(!1)),Ke(e?ke.END_OF_PERIOD_STOP_REASON:ke.END_OF_CONTENT_STOP_REASON)}e&&e.isLast&&(Ne(),f.stopSteeringRequestTimer())}function Fe(e){const t=e||Qe().manifestInfo.duration;c.setDuration(t)}function Ue(e){const t=m.getURIFragmentData();if(!t||!t.t)return NaN;const n=rt()[0].getStreamInfo().start;return t.t=t.t.split(",")[0],Be(e,t.t,n)}function ze(e,t){let n=0;return e||(n=rt()[0].getStreamInfo().start),Be(e,t,n)}function Be(e,t,n){const r=u.getRegularPeriods()[0],i=t.toString(),a=-1!==i.indexOf("posix:")?"now"===i.substring(6)?Date.now()/1e3:parseFloat(i.substring(6)):NaN;return e&&!isNaN(a)?w.calcPresentationTimeFromWallTime(new Date(1e3*a),r):parseFloat(i)+n}function je(e,t){try{let e=NaN;return t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration)?t.maxFragmentDuration:isFinite(e)?e:NaN}catch(n){return NaN}}function qe(){const e=l.getValue();g.initialize(e)}function Ge(e){if(e.error)z=!0,tt();else{r.info("Manifest updated... updating data system wide.");const n=e.manifest;u.updatePeriods(n),a.filterUnsupportedFeatures(n).then(()=>{g.initialize(n);let e=u.getUTCTimingSources();!u.getIsDynamic()||e&&0!==e.length||t.trigger(D.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.WARNING,event:Sr.EVENTS.NO_UTC_TIMING_ELEMENT});let r=u.getIsDynamic()?e.concat($.getUTCTimingSources()):e;h.attemptSync(r,u.getIsDynamic()),P.createFinalQueryStrings(n)})}}function He(){return!!x&&x.getHasVideoTrack()}function Ve(){return!!x&&x.getHasAudioTrack()}function Ke(e,t){t=t||new Date,Pe().forEach(n=>{n.finalisePlayList(t,e)}),d.addPlayList()}function $e(e){d.createPlaylistMetrics(1e3*q.getTime(),e)}function Ye(e){L.updateKeyStatusesMap(e),function(){const e=Pe();let r=!1;e.forEach(e=>{const t=e.getMediaInfo();!t||i.areKeyIdsUsable(t)?t&&i.areKeyIdsExpired(t)&&function(e){const t=Je(e.getStreamId());t&&t.triggerProtectionError({error:new G.default(Ar.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,Ar.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(e):(r=!0,function(e){const t=e.getAllMediaInfos().filter(e=>i.areKeyIdsUsable(e));if(t&&0!==t.length)b.setTrack(t[0],{replaceBuffer:!0});else{const t=e.getType();S.error(new G.default(K.NO_SUPPORTED_KEY_IDS,`Type: ${t}: ${K.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(e))}),r&&(0===q.getTime()?t.once(D.default.FRAGMENT_LOADING_COMPLETED,()=>{We()},n):q.isProgressing(500).then(e=>{e||We()}))}()}function We(){const e=q.getTime();q.seek(e+.01,!1,!1)}function Xe(e){if(!e.error)return;let t;switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE",ae.counts.mediaErrorDecode+=1;break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}"MEDIA_ERR_DECODE"===t&&te.get().errors.recoverAttempts.mediaErrorDecode>=ae.counts.mediaErrorDecode?function(){r.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const e=q.getTime();x.deactivate(!1),r.info(`MediaSource has been resetted. Resuming playback from time ${e}`),fe({seekTime:e,keepBuffers:!1,streamActivated:!1})}():(U=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),r.fatal("Video Element Error: "+t),e.error&&r.fatal(e.error),S.error(new G.default(e.error.code,t)),tt())}function Qe(){return x?x.getStreamInfo():null}function Je(e){for(let t=0,n=I.length;t<n;t++)if(I[t].getId()===e)return I[t];return null}function Ze(e){isNaN(e.newDuration)||Fe(e.newDuration)}function et(){I=[],ie=NaN,L=null,F=!1,x=null,U=!1,z=!1,W=!0,X=!0,Y=!1,O=!0,Q=null,ne=!1,ee=[],re=null,ae={counts:{mediaErrorDecode:0}}}function tt(){se(),h.reset(),Ke(U||z?ke.FAILURE_STOP_REASON:ke.USER_REQUEST_STOP_REASON);for(let e=0,t=I?I.length:0;e<t;e++)I[e].reset(U);t.off(D.default.PLAYBACK_TIME_UPDATED,xe,n),t.off(D.default.PLAYBACK_SEEKING,me,n),t.off(D.default.PLAYBACK_ERROR,Xe,n),t.off(D.default.PLAYBACK_STARTED,Ce,n),t.off(D.default.PLAYBACK_PAUSED,De,n),t.off(D.default.PLAYBACK_ENDED,Oe,n),t.off(D.default.METRIC_ADDED,nt,n),t.off(D.default.MANIFEST_VALIDITY_CHANGED,Ze,n),t.off(D.default.BUFFER_LEVEL_UPDATED,Ae,n),t.off(D.default.QUALITY_CHANGE_REQUESTED,_e,n),t.off(D.default.CONTENT_STEERING_REQUEST_COMPLETED,qe,n),R.default.KEY_SESSION_UPDATED&&t.off(R.default.KEY_SESSION_UPDATED,le,n),t.off(R.default.MANIFEST_UPDATED,Ge,n),t.off(R.default.STREAM_BUFFERING_COMPLETED,Le,n),t.off(R.default.TIME_SYNCHRONIZATION_COMPLETED,oe,n),t.off(R.default.CURRENT_TRACK_CHANGED,be,n),t.off(R.default.SETTING_UPDATED_LIVE_DELAY,Re,n),t.off(R.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,n),t.off(wr.default.INTERNAL_KEY_STATUSES_CHANGED,Ye,n),g.reset(),s.reset(),E.reset(),d.clearAllCurrentMetrics(),l.setValue(null),o.reset(),w.reset(),T.reset(),B&&(c.detachMediaSource(j),B=null),j=null,L&&(L=null,N=null,l.getValue()&&t.trigger(R.default.PROTECTION_DESTROYED,{data:l.getValue().url})),Ne(),t.trigger(R.default.STREAM_TEARDOWN_COMPLETE),et()}function nt(e){if(e.metric===k.DVR_INFO){const t=Ve()?A.default.AUDIO:A.default.VIDEO;e.mediaType===t&&c.setSeekable(e.value.range.start,e.value.range.end)}}function rt(){return I}return n={addDVRMetric:we,getActiveStream:function(){return x},getActiveStreamInfo:Qe,getActiveStreamProcessors:Pe,getAutoPlay:function(){return O},getHasMediaOrInitialisationError:function(){return U||z},getInitialPlayback:function(){return W},getIsStreamSwitchInProgress:function(){return F},getStreamById:Je,getStreamForTime:Se,getStreams:rt,getTimeRelativeToStreamId:function(e,t){let n=null,r=0,i=0,a=null;for(let s=0;s<I.length;s++){if(n=I[s],i=n.getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},hasAudioTrack:Ve,hasVideoTrack:He,initialize:function(r,i){se(),O=r,N=i,w.initialize(),s=gr(e).create(),s.setConfig({manifestModel:l,adapter:u,manifestLoader:o,errHandler:S,settings:te,contentSteeringController:f}),s.initialize(),E=Tr(e).getInstance(),E.setConfig({manifestUpdater:s,playbackController:q,settings:te}),E.start(),P=Rn(e).getInstance(),h.setConfig({dashMetrics:d,baseURLController:g,errHandler:S,settings:te}),h.initialize(),c.setConfig({settings:te}),L&&(t.trigger(R.default.PROTECTION_CREATED,{controller:L}),L.setMediaElement(j.getElement()),N&&L.setProtectionData(N)),t.on(D.default.PLAYBACK_TIME_UPDATED,xe,n),t.on(D.default.PLAYBACK_SEEKING,me,n),t.on(D.default.PLAYBACK_ERROR,Xe,n),t.on(D.default.PLAYBACK_STARTED,Ce,n),t.on(D.default.PLAYBACK_PAUSED,De,n),t.on(D.default.PLAYBACK_ENDED,Oe,n),t.on(D.default.METRIC_ADDED,nt,n),t.on(D.default.MANIFEST_VALIDITY_CHANGED,Ze,n),t.on(D.default.BUFFER_LEVEL_UPDATED,Ae,n),t.on(D.default.QUALITY_CHANGE_REQUESTED,_e,n),t.on(D.default.CONTENT_STEERING_REQUEST_COMPLETED,qe,n),R.default.KEY_SESSION_UPDATED&&t.on(R.default.KEY_SESSION_UPDATED,le,n),t.on(R.default.MANIFEST_UPDATED,Ge,n),t.on(R.default.STREAM_BUFFERING_COMPLETED,Le,n),t.on(R.default.TIME_SYNCHRONIZATION_COMPLETED,oe,n),t.on(R.default.CURRENT_TRACK_CHANGED,be,n),t.on(R.default.SETTING_UPDATED_LIVE_DELAY,Re,n),t.on(R.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Re,n),t.on(wr.default.INTERNAL_KEY_STATUSES_CHANGED,Ye,n)},load:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;se(),ie=t,o.load(e)},loadWithManifest:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;!function(){if(!s||!s.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),ie=t,s.setManifest(e)},refreshManifest:function(){s.getIsUpdating()||s.refreshManifest()},reset:tt,setConfig:function(e){e&&(e.capabilities&&(i=e.capabilities),e.capabilitiesFilter&&(a=e.capabilitiesFilter),e.manifestLoader&&(o=e.manifestLoader),e.manifestModel&&(l=e.manifestModel),e.mediaPlayerModel&&(V=e.mediaPlayerModel),e.customParametersModel&&($=e.customParametersModel),e.protectionController&&(L=e.protectionController),e.adapter&&(u=e.adapter),e.dashMetrics&&(d=e.dashMetrics),e.errHandler&&(S=e.errHandler),e.timelineConverter&&(w=e.timelineConverter),e.videoModel&&(j=e.videoModel),e.playbackController&&(q=e.playbackController),e.throughputController&&(v=e.throughputController),e.serviceDescriptionController&&(H=e.serviceDescriptionController),e.contentSteeringController&&(f=e.contentSteeringController),e.textController&&(M=e.textController),e.abrController&&(y=e.abrController),e.mediaController&&(b=e.mediaController),e.settings&&(te=e.settings),e.baseURLController&&(g=e.baseURLController),e.uriFragmentModel&&(m=e.uriFragmentModel),e.segmentBaseController&&(p=e.segmentBaseController),e.manifestUpdater&&(s=e.manifestUpdater))},setProtectionData:function(e){N=e,L&&L.setProtectionData(N)},switchToVideoElement:function(e){x&&(q.initialize(Qe()),fe({seekTime:e,keepBuffers:!1,streamActivated:!0}))}},r=(0,C.default)(e).getInstance().getLogger(n),h=yr(e).getInstance(),c=br(e).getInstance(),T=Z(e).getInstance(),et(),n}Ir.__dashjs_factory_name="StreamController";var kr=x.default.getSingletonFactory(Ir);function _r(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l,u,d,c,h,f;function g(){f.debug("Stopping the gap controller"),s&&(clearInterval(s),s=null),function(){t.off(R.default.WALLCLOCK_TIME_UPDATED,b,this),t.off(R.default.INITIAL_STREAM_SWITCH,v,this),t.off(R.default.PLAYBACK_SEEKING,p,this),t.off(R.default.BUFFER_REPLACEMENT_STARTED,m,n),t.off(R.default.TRACK_CHANGE_RENDERED,y,n)}(),s=null,o=NaN,a=0,c=null,h={}}function p(){c&&(clearTimeout(c),c=null)}function m(e){try{if(e.streamId!==u.getActiveStreamInfo().id||e.mediaType!==A.default.VIDEO&&e.mediaType!==A.default.AUDIO)return;e.streamId===u.getActiveStreamInfo().id&&(h[e.mediaType]=!0)}catch(t){f.error(t)}}function y(e){e&&e.mediaType&&(h[e.mediaType]=!1)}function v(){s||function(){try{s||(f.debug("Starting the gap controller"),s=setInterval(()=>{E()&&T(l.getTime())},100))}catch(e){}}()}function b(){if(E(i.get().streaming.gaps.enableSeekFix)&&(a++,a>=10)){const e=l.getTime();r===e?T(e,!0):(r=e,o=NaN),a=0}}function E(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!u.getActiveStream())return!1;const t=Object.keys(h).some(e=>h[e]),n=!!e&&function(){const e=u.getActiveStream(),t=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5));return l.getTime()+i.get().streaming.gaps.threshold>=t}();return!t&&i.get().streaming.gaps.jumpGaps&&u.getActiveStreamProcessors().length>0&&(!l.isSeeking()||n)&&!l.isPaused()&&!u.getIsStreamSwitchInProgress()&&!u.getHasMediaOrInitialisationError()}function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=i.get().streaming.gaps.enableStallFix,r=i.get().streaming.gaps.stallSeek,a=i.get().streaming.gaps.smallGapLimit,s=i.get().streaming.gaps.jumpLargeGaps,h=d.getBufferRange();let g,p=NaN,m=!1;if(g=function(e,t){try{if(!e||e.length<=1&&t>0)return NaN;let n=NaN,r=0;for(;isNaN(n)&&r<e.length;){const a=r>0?e.end(r-1):0;t<e.start(r)&&a-t<i.get().streaming.gaps.threshold&&(n=r),r+=1}return n}catch(n){return null}}(h,e),!isNaN(g)){const t=h.start(g),n=t-e;n>0&&(n<=a||s)&&(p=t)}const y=l.getTimeToStreamEnd();if(isNaN(p)&&t&&isFinite(y)&&!isNaN(y)&&y<a&&(p=parseFloat(l.getStreamEndTime().toFixed(5)),m=!0),n&&isNaN(p)&&t&&isNaN(g)&&function(e,t){for(let n=0,r=e.length;n<r;n++)if(t>=e.start(n)&&t<=e.end(n))return!0;return!1}(h,e)&&(0===r?(f.warn("Toggle play pause to break stall"),d.pause(),d.play()):(f.warn(`Jumping ${r}s to break stall`),p=e+r)),p>0&&o!==p&&p>e&&!c){const t=p-e;if(m){const n=u.getStreamForTime(p),r=n&&!!n.getPreloaded();f.warn(`Jumping to end of stream because of gap from ${e} to ${p}. Gap duration: ${t}`),l.seek(p,!0,r)}else{const n=l.getIsDynamic(),r=g>0?h.end(g-1):e,i=n?1e3*Math.max(0,t-.1):0;c=window.setTimeout(()=>{l.seek(p,!0,!0),f.warn(`Jumping gap occuring in period ${u.getActiveStream().getStreamId()} starting at ${r} and ending at ${p}. Jumping by: ${p-r}`),c=null},i)}o=p}}return n={reset:g,setConfig:function(e){e&&(e.settings&&(i=e.settings),e.playbackController&&(l=e.playbackController),e.streamController&&(u=e.streamController),e.videoModel&&(d=e.videoModel))},initialize:function(){!function(){t.on(R.default.WALLCLOCK_TIME_UPDATED,b,this),t.on(R.default.INITIAL_STREAM_SWITCH,v,this),t.on(R.default.PLAYBACK_SEEKING,p,this),t.on(R.default.BUFFER_REPLACEMENT_STARTED,m,n),t.on(R.default.TRACK_CHANGE_RENDERED,y,n)}()}},f=(0,C.default)(e).getInstance().getLogger(n),g(),n}_r.__dashjs_factory_name="GapController";var Rr=x.default.getSingletonFactory(_r);function xr(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l,u,d,c;function h(){r=!1;const e=Ge.default.parseUserAgent();i=e&&e.browser&&e.browser.name&&"safari"===e.browser.name.toLowerCase()}function f(){r=!1}function g(e){if(e.streamId!==o.getActiveStreamInfo().id||!d)return;const t=l.getLiveDelay();l.getBufferLevel()>t/2&&(d=!1)}function p(e){e.streamId===o.getActiveStreamInfo().id&&(d=e.state===k.BUFFER_EMPTY)}function m(){u.getCatchupModeEnabled()||a.setPlaybackRate(1)}function y(){l.getIsDynamic()&&u.getCatchupModeEnabled()&&(u.getCatchupPlaybackRates().max>0||u.getCatchupPlaybackRates().min<0)&&!l.isPaused()&&!l.isSeeking()&&function(){try{return!(!l.getTime()>0||r)&&(b()===A.default.LIVE_CATCHUP_MODE_LOLP?function(e,t){try{return Math.abs(v())>0||e<t}catch(n){return!1}}(l.getBufferLevel(),s.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(v())>0}catch(e){return!1}}())}catch(e){return!1}}()&&function(){if(!r&&a){let e;const t=a.getPlaybackRate(),n=u.getCatchupPlaybackRates(),o=l.getBufferLevel(),h=v(),f=u.getCatchupMaxDrift();if(!isNaN(f)&&f>0&&h>f)c.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),r=!0,l.seekToCurrentLive(!0,!1);else{const r=l.getCurrentLiveLatency(),u=l.getLiveDelay();e=b()===A.default.LIVE_CATCHUP_MODE_LOLP?function(e,t,n,r,i){let a;if(i<r){const t=Math.abs(e.min),n=5*(i-r);a=1-t+2*t/(1+Math.pow(Math.E,-n)),c.debug("[LoL+ playback control_buffer-based] bufferLevel: "+i+", newRate: "+a)}else{const r=.02;if(Math.abs(t-n)<=r*n)a=1;else{const r=t-n,i=r<0?Math.abs(e.min):e.max,s=5*r;a=1-i+2*i/(1+Math.pow(Math.E,-s))}c.debug("[LoL+ playback control_latency-based] latency: "+t+", newRate: "+a)}return a}(n,r,u,s.get().streaming.liveCatchup.playbackBufferMin,o):function(e,t,n,r){if(d)return 1;const i=t-n,a=i<0?Math.abs(e.min):e.max,s=5*i;let o=1-a+2*a/(1+Math.pow(Math.E,-s));return l.getPlaybackStalled()&&r<=n/2&&i>0&&(o=1),o}(n,r,u,o);const h=i?.25:.02/(.5/n.max);(e&&Math.abs(t-e)>=h||1==e)&&(c.debug(`[CatchupController]: Setting playback rate to ${e}`),a.setPlaybackRate(e))}}}()}function v(){return l.getCurrentLiveLatency()-l.getLiveDelay()}function b(){const e=s.get().streaming.liveCatchup.playbackBufferMin;return s.get().streaming.liveCatchup.mode!==A.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?A.default.LIVE_CATCHUP_MODE_DEFAULT:A.default.LIVE_CATCHUP_MODE_LOLP}function E(){u.getCatchupPlaybackRates(!0)}return n={reset:function(){t.off(D.default.BUFFER_LEVEL_UPDATED,g,n),t.off(D.default.BUFFER_LEVEL_STATE_CHANGED,p,n),t.off(D.default.PLAYBACK_PROGRESS,y,n),t.off(D.default.PLAYBACK_TIME_UPDATED,y,n),t.off(D.default.PLAYBACK_SEEKED,f,n),t.off(R.default.SETTING_UPDATED_CATCHUP_ENABLED,m,n),t.off(R.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,E,n),t.off(R.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,E,n),t.off(D.default.STREAM_INITIALIZED,E,n),h(),a.setPlaybackRate(1,!0)},setConfig:function(e){e&&(e.settings&&(s=e.settings),e.videoModel&&(a=e.videoModel),e.streamController&&(o=e.streamController),e.playbackController&&(l=e.playbackController),e.mediaPlayerModel&&(u=e.mediaPlayerModel))},initialize:function(){t.on(D.default.BUFFER_LEVEL_UPDATED,g,n),t.on(D.default.BUFFER_LEVEL_STATE_CHANGED,p,n),t.on(D.default.PLAYBACK_PROGRESS,y,n),t.on(D.default.PLAYBACK_TIME_UPDATED,y,n),t.on(D.default.PLAYBACK_SEEKED,f,n),t.on(R.default.SETTING_UPDATED_CATCHUP_ENABLED,m,n),t.on(R.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,E,n),t.on(R.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,E,n),t.on(D.default.STREAM_INITIALIZED,E,n),E()}},c=(0,C.default)(e).getInstance().getLogger(n),h(),n}xr.__dashjs_factory_name="CatchupController";var Cr=x.default.getSingletonFactory(xr);const Dr=[A.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Lr="video",Mr="audio";function Nr(){const e=this.context;let t,n,r,i,a;function s(){n={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},r=[]}function o(e,t,r){try{n[e][t]=r/1e3}catch(a){i.error(a)}}return t={getServiceDescriptionSettings:function(){return n},getProducerReferenceTimeOffsets:function(){return r},calculateProducerReferenceTimeOffsets:function(e){try{let t=[];if(e&&e.length>0){const n=[A.default.VIDEO,A.default.AUDIO,A.default.TEXT],r=a.getAvailabilityStartTime()/1e3;e.forEach(e=>{const i=n.reduce((t,n)=>t.concat(a.getAllMediaInfoForType(e,n)),[]).reduce((t,n)=>(a.getProducerReferenceTimes(e,n).forEach(i=>{const s=a.getVoRepresentations(n);if(s&&s.length>0&&s[0].adaptation&&s[0].segmentInfoType===I.default.SEGMENT_TEMPLATE){const n=s[0],a=new Date(i[I.default.WALL_CLOCK_TIME]).getTime()/1e3-(i[I.default.PRESENTATION_TIME]/n[I.default.TIMESCALE]-n[I.default.PRESENTATION_TIME_OFFSET]+e.start),o=r-a;t.push({id:i[I.default.ID],to:o})}}),t),[]);t=t.concat(i)})}r=t}catch(t){i.error(t),r=[]}},applyServiceDescription:function(e){if(!e||!e.serviceDescriptions)return;const t=e.serviceDescriptions.filter(e=>Dr.includes(e.schemeIdUri)),a=e.serviceDescriptions.filter(e=>null==e.schemeIdUri);let s=t.length>0?t[t.length-1]:a[a.length-1];var l;s&&(s.latency&&s.latency.target>0&&function(e){let t;if(e.schemeIdUri,A.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,t={liveDelay:(a=e).latency.target/1e3,maxDrift:!isNaN(a.latency.max)&&a.latency.max>a.latency.target?(a.latency.max-a.latency.target+500)/1e3:NaN,referenceId:a.latency.referenceId||NaN},r.length>0){let{to:e,id:a}=function(e){let t,n=0,i=r.filter(t=>t.id===e.referenceId);return 0===i.length?(n=r.length>0?r[0].to:0,t=r[0].id||NaN):(n=i[0].to||0,t=i[0].id||NaN),{to:n,id:t}}(t);n.liveDelay=t.liveDelay-e,n.liveCatchup.maxDrift=t.maxDrift,i.debug(`\n                Found latency properties coming from service description. Applied time offset of ${e} from ProducerReferenceTime element with id ${a}.\n                Live Delay: ${t.liveDelay-e}, Live catchup max drift: ${t.maxDrift}\n            `)}else n.liveDelay=t.liveDelay,n.liveCatchup.maxDrift=t.maxDrift,i.debug(`Found latency properties coming from service description: Live Delay: ${t.liveDelay}, Live catchup max drift: ${t.maxDrift}`);var a}(s),s.playbackRate&&function(e){const t=e.playbackRate.min?Math.round(1e3*(e.playbackRate.min-1))/1e3:NaN,r=e.playbackRate.max?Math.round(1e3*(e.playbackRate.max-1))/1e3:NaN;n.liveCatchup.playbackRate.min=t,n.liveCatchup.playbackRate.max=r,i.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${t}`),i.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${r}`)}(s),s.operatingQuality,s.operatingBandwidth&&function(e){if(!e||!e.operatingBandwidth||!e.operatingBandwidth.mediaType||"all"===e.operatingBandwidth.mediaType)return;const t={};t.minBandwidth=e.operatingBandwidth.min,t.maxBandwidth=e.operatingBandwidth.max,t.targetBandwidth=e.operatingBandwidth.target;const n=[];e.operatingBandwidth.mediaType===Lr||e.operatingBandwidth.mediaType===Mr?n.push(e.operatingBandwidth.mediaType):"any"===e.operatingBandwidth.mediaType&&(n.push(Mr),n.push(Lr)),n.forEach(e=>{isNaN(t.minBandwidth)||o("minBitrate",e,t.minBandwidth),isNaN(t.maxBandwidth)||o("maxBitrate",e,t.maxBandwidth),isNaN(t.targetBandwidth)||o("initialBitrate",e,t.targetBandwidth)})}(s),s.contentSteering&&(l=s,n.contentSteering=l.contentSteering),s.clientDataReporting&&function(e){n.clientDataReporting=e.clientDataReporting}(s))},reset:function(){s()},setConfig:function(e){e&&e.adapter&&(a=e.adapter)}},i=(0,C.default)(e).getInstance().getLogger(t),s(),t}Nr.__dashjs_factory_name="ServiceDescriptionController";var Pr=x.default.getSingletonFactory(Nr);function Or(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(e.irregular)return e.irregular;if(e.regular)return e.regular;if(e.language){t=t.concat(e.language,e.extendedLanguageSubtags||[],e.script||[],e.region||[],e.variants||[]);const n=e.extensions||[];let r=-1;for(;++r<n.length;){const e=n[r];e.singleton&&e.extensions&&e.extensions.length>0&&t.push(e.singleton,...e.extensions)}}return e.privateuse&&e.privateuse.length>0&&t.push("x",...e.privateuse),t.join("-")}function Fr(e){const t="string"==typeof e?e.charCodeAt(0):e;return t>=97&&t<=122||t>=65&&t<=90}function Ur(e){const t="string"==typeof e?e.charCodeAt(0):e;return t>=48&&t<=57}function zr(e){return Fr(e)||Ur(e)}const Br=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],jr={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},qr={}.hasOwnProperty;function Gr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},r=String(e),i=r.toLowerCase();let a=0;if(null==e)throw new Error("Expected string, got `"+e+"`");if(qr.call(jr,i)){const e=jr[i];return void 0!==t.normalize&&null!==t.normalize&&!t.normalize||"string"!=typeof e?(n[Br.includes(i)?"regular":"irregular"]=r,n):Gr(e)}for(;Fr(i.charCodeAt(a))&&a<9;)a++;if(a>1&&a<9){if(n.language=r.slice(0,a),a<4){let e=0;for(;45===i.charCodeAt(a)&&Fr(i.charCodeAt(a+1))&&Fr(i.charCodeAt(a+2))&&Fr(i.charCodeAt(a+3))&&!Fr(i.charCodeAt(a+4));){if(e>2)return s(a,3,"Too many extended language subtags, expected at most 3 subtags");n.extendedLanguageSubtags.push(r.slice(a+1,a+4)),a+=4,e++}}for(45===i.charCodeAt(a)&&Fr(i.charCodeAt(a+1))&&Fr(i.charCodeAt(a+2))&&Fr(i.charCodeAt(a+3))&&Fr(i.charCodeAt(a+4))&&!Fr(i.charCodeAt(a+5))&&(n.script=r.slice(a+1,a+5),a+=5),45===i.charCodeAt(a)&&(Fr(i.charCodeAt(a+1))&&Fr(i.charCodeAt(a+2))&&!Fr(i.charCodeAt(a+3))?(n.region=r.slice(a+1,a+3),a+=3):Ur(i.charCodeAt(a+1))&&Ur(i.charCodeAt(a+2))&&Ur(i.charCodeAt(a+3))&&!Ur(i.charCodeAt(a+4))&&(n.region=r.slice(a+1,a+4),a+=4));45===i.charCodeAt(a);){const e=a+1;let t=e;for(;zr(i.charCodeAt(t));){if(t-e>7)return s(t,1,"Too long variant, expected at most 8 characters");t++}if(!(t-e>4||t-e>3&&Ur(i.charCodeAt(e))))break;n.variants.push(r.slice(e,t)),a=t}for(;45===i.charCodeAt(a)&&120!==i.charCodeAt(a+1)&&zr(i.charCodeAt(a+1))&&45===i.charCodeAt(a+2)&&zr(i.charCodeAt(a+3));){let e=a+2,t=0;for(;45===i.charCodeAt(e)&&zr(i.charCodeAt(e+1))&&zr(i.charCodeAt(e+2));){const n=e+1;for(e=n+2,t++;zr(i.charCodeAt(e));){if(e-n>7)return s(e,2,"Too long extension, expected at most 8 characters");e++}}if(!t)return s(e,4,"Empty extension, extensions must have at least 2 characters of content");n.extensions.push({singleton:r.charAt(a+1),extensions:r.slice(a+3,e).split("-")}),a=e}}else a=0;if(0===a&&120===i.charCodeAt(a)||45===i.charCodeAt(a)&&120===i.charCodeAt(a+1)){a=a?a+2:1;let e=a;for(;45===i.charCodeAt(e)&&zr(i.charCodeAt(e+1));){const t=a+1;for(e=t;zr(i.charCodeAt(e));){if(e-t>7)return s(e,5,"Too long private-use area, expected at most 8 characters");e++}n.privateuse.push(r.slice(a+1,e)),a=e}}return a!==r.length?s(a,6,"Found superfluous content after tag"):n;function s(e,r,i){return t.warning&&t.warning(i,r,e),t.forgiving?n:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}const Hr=(Vr=function(e,t){const n=e.split("-"),r=t.split("-");let i=0,a=0;if("*"!==r[a]&&n[i]!==r[a])return!1;for(i++,a++;a<r.length;)if("*"!==r[a]){if(!n[i])return!1;if(n[i]!==r[a]){if(1===n[i].length)return!1;i++}else i++,a++}else a++;return!0},Kr=!0,function(e,t){let n=$r(e,"tag");const r=$r(null==t?"*":t,"range"),i=[];let a=-1;for(;++a<r.length;){const e=r[a].toLowerCase();if(!Kr&&"*"===e)continue;let t=-1;const s=[];for(;++t<n.length;)if(Vr(n[t].toLowerCase(),e)){if(!Kr)return n[t];i.push(n[t])}else s.push(n[t]);n=s}return Kr?i:void 0});var Vr,Kr;function $r(e,t){const n=e&&"string"==typeof e?[e]:e;if(!n||"object"!=typeof n||!("length"in n))throw new Error("Invalid "+t+" `"+n+"`, expected non-empty string");return n}const Yr=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],Wr=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],Xr={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Qr={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},Jr={}.hasOwnProperty;function Zr(e){const{language:t,script:n,region:r}=e;let i;var a,s;return n&&r&&(i=Qr[Or({language:t,script:n,region:r})])?(e.script=void 0,e.region=void 0):n&&(i=Qr[Or({language:t,script:n})])?e.script=void 0:r&&(i=Qr[Or({language:t,region:r})])?e.region=void 0:t&&(i=Qr[t]),i&&(e.language=void 0,a=e,s=Gr(i),a.language||(a.language=s.language),a.script||(a.script=s.script),a.region||(a.region=s.region),s.variants&&a.variants.push(...s.variants)),Or(e)}function ei(e,t){const n={},r=Gr(String(e||"").toLowerCase(),n),i=Or(r);if(!i)return i;let a=-1;for(;++a<Yr.length;){let e=Yr[a].from;"und-"===e.slice(0,4)&&r.language&&(e=r.language+e.slice(3)),Hr(i,e).length>0&&ti(r,e,Yr[a].to)}for(a=-1;++a<Wr.length;)ni(r,Wr[a].from.field,Wr[a].from.value)&&ri(r,Wr[a].to.field,Wr[a].to.value);if(function(e){Zr(e);const{language:t,script:n,region:r}=e;if(!t)return e;const i=Or({language:t,script:n,region:r});i===Zr(Gr(t))?(e.script=void 0,e.region=void 0):r&&i===Zr(Gr(t+"-"+r))?e.script=void 0:n&&i===Zr(Gr(t+"-"+n))&&(e.region=void 0)}(r),r.variants.sort(),r.extensions.sort(ii),n.warning){let e;for(e in Xr)if(Jr.call(Xr,e)){const t=Xr[e],i=r[e];if(i&&Jr.call(t,i)){const r=t[i];n.warning("Deprecated "+e+" `"+i+"`, expected one of `"+r.join("`, `")+"`",-1,7)}}}return r.script&&(r.script=r.script.charAt(0).toUpperCase()+r.script.slice(1)),r.region&&(r.region=r.region.toUpperCase()),Or(r)}function ti(e,t,n){const r=Gr(t),i=Gr(n),a=[],s=r.language;let o;for(o in r)if(Jr.call(r,o)){const t=r[o];t&&ni(e,o,t)&&a.push(o)}for(o in i)if(Jr.call(i,o)){const t=i[o];s&&t&&(a.includes(o)||!e[o])&&ri(e,o,"language"===o&&"und"===t?s:t)}}function ni(e,t,n){let r,i=!1;if(n){const a=e[t];if(r=a,Array.isArray(a)){r=[];let e=-1;for(;++e<a.length;){const t=a[e];n.includes(t)?i=!0:r.push(t)}}else a===n&&(r=null,i=!0);e[t]=r}return i}function ri(e,t,n){const r=e[t];if(Array.isArray(r)){const e=Array.isArray(n)?n:[n];let t=-1;for(;++t<e.length;){const n=e[t];r.includes(n)||r.push(n)}}else e[t]=n}function ii(e,t){return e.singleton>t.singleton?1:e.singleton<t.singleton?-1:0}const ai={0:void 0,1:1,2:2,3:3,4:4,5:5,6:5,7:7,8:2,9:3,10:4,11:6,12:7,13:22,14:7,15:10,16:9,17:11,18:13,19:11,20:13};function si(e){return 0==e?0:e.toString(2).match(/1/g).length}function oi(e,t){let n,r=parseInt("0x"+e,16),i=r&t[0],a=r&t[1];return n=si(i)+2*si(a),n}function li(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l,u,d,c,h;function f(e){if(!(e&&e.currentRepresentation&&e.currentRepresentation.mediaInfo&&e.currentRepresentation.mediaInfo.type))return;const t=e.currentRepresentation.mediaInfo.type;l[t]=e.currentRepresentation}function g(e,t){return e&&i[t]&&i[t][e]?i[t][e].list:[]}function p(e,t){return e&&i[t]&&i[t][e]?i[t][e].current:null}function m(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.streamInfo)return;const r=e.type,s=e.streamInfo.id,l=p(r,s);if(i[s]&&i[s][r]&&(i[s][r].current=e,i[s][r].current&&(r!==A.default.TEXT&&!b(e,l)||r===A.default.TEXT&&e.isFragmented)&&t.trigger(R.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:l,newMediaInfo:e,switchMode:a.get().streaming.trackSwitchMode[r],options:n},{streamId:s}),!n.hasOwnProperty("noSettingsSave")||!n.noSettingsSave)){let t=function(e){const t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration,codec:e.codec};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}(e);if(!t||!i[s][r].storeLastSettings)return;t.roles&&(t.role=t.roles[0],delete t.roles),t.accessibility&&(t.accessibility=t.accessibility[0]),t.audioChannelConfiguration&&(t.audioChannelConfiguration=t.audioChannelConfiguration[0]),o[r]=t,h.setSavedMediaSettings(r,t)}}function y(e,t){e&&t&&(s[e]=t)}function v(e){return e?s[e]:null}function b(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.id===t.id,r=JSON.stringify(e.viewpoint)===JSON.stringify(t.viewpoint),i=e.lang===t.lang,a=e.codec===t.codec,s=JSON.stringify(e.roles)===JSON.stringify(t.roles),o=JSON.stringify(e.accessibility)===JSON.stringify(t.accessibility),l=JSON.stringify(e.audioChannelConfiguration)===JSON.stringify(t.audioChannelConfiguration);return n&&a&&r&&i&&s&&o&&l}function E(){i={},o={},l={},s={audio:null,video:null,text:null},t.off(D.default.REPRESENTATION_SWITCH,f,n)}function T(e,t,n){let i=[];return e.forEach(function(e){t(n,e)&&i.push(e)}),0!==i.length||t===L&&a.get().streaming.assumeDefaultRoleAsMain&&G(n.role,{schemeIdUri:A.default.DASH_ROLE_SCHEME_ID,value:I.default.MAIN})&&(r.info("no track with Role set to main - assuming main as default and searching again"),i=T(e,M,null),0!==i.length)?i:(r.info("Filter-Function ("+t.name+") resulted in no tracks; setting ignored"),e)}function S(e,t){try{return!e.lang||e.lang instanceof RegExp?t.lang.match(e.lang):""!==t.lang&&Hr(t.lang,ei(e.lang)).length>0}catch(n){return!1}}function w(e,t){return void 0===e.index||null===e.index||t.index===e.index}function k(e,t){return void 0===e.id||null===e.id||t.id===e.id}function x(e,t){return!e.viewpoint||!!t.viewpoint.filter(function(t){return G(t,e.viewpoint)})[0]}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!t.roles&&(!e.role||!!t.roles.filter(function(t){return G(t,e.role)})[0]||t.type===A.default.AUDIO&&n)}function M(e,t){return!t.roles||0===t.roles.length}function N(e,t){let n;return n=e.accessibility?!!t.accessibility.filter(function(t){return G(t,e.accessibility)})[0]:!t.accessibility.length,n}function P(e,t){return!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return G(t,e.audioChannelConfiguration)})[0]}function O(e,t){return!e.codec||e.codec===t.codec}function F(e){let t=0,n=[];return e.forEach(e=>{isNaN(e.selectionPriority)||(e.selectionPriority>t?(t=e.selectionPriority,n=[e]):e.selectionPriority===t&&n.push(e))}),n}function U(e){let t,n=0,r=[];return e.forEach(function(e){t=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t>n?(n=t,r=[e]):t===n&&r.push(e)}),r}function z(e){return e[0]&&e[0].type===A.default.VIDEO?function(e){let t,n=1/0,r=[];return e.forEach(function(e){const i=e.bitrateList.reduce(function(e,t){const n=Math.max(1,t.width*t.height);return e+t.bandwidth/n},0);t=i/e.bitrateList.length,t<n?(n=t,r=[e]):t===n&&r.push(e)}),r}(e):e[0]&&e[0].type===A.default.AUDIO?function(e){let t=1/0,n=[];return e.forEach(function(e){let r=e.audioChannelConfiguration.reduce(function(e,t){return e+(function(e){let t;if(!e||!e.schemeIdUri||!e.value)return;const n=e.schemeIdUri,r=e.value;return"urn:mpeg:dash:23003:3:audio_channel_configuration:2011"===n||"urn:mpeg:mpegB:cicp:ChannelConfiguration"===n?t=ai[r]:"tag:dolby.com,2014:dash:audio_channel_configuration:2011"===n?t=function(e){if(4===e.length)return oi(e,[63880,1648])}(r):"tag:dolby.com,2015:dash:audio_channel_configuration:2015"===n?t=function(e){if(6===e.length)return"800000"===e?24:oi(e,[56834,205245])}(r):"tag:dts.com,2014:dash:audio_channel_configuration:2012"===n?t=parseInt(r):"tag:dts.com,2018:uhd:audio_channel_configuration"===n&&(t=function(e){if(!(e.length>8))return oi(e,[4294901727,0])}(r)),t}(t)||0)},0)/e.audioChannelConfiguration.length;e.hasOwnProperty("supplementalProperties")&&e.supplementalProperties.some(e=>"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"===e.schemeIdUri&&"JOC"===e.value)&&(r=16),r||(r=1);let i=e.bitrateList.reduce(function(e,t){return e+t.bandwidth/r},0)/e.bitrateList.length;i<t?(t=i,n=[e]):i===t&&n.push(e)}),n}(e):e}function B(e){let t,n=0,r=[];return e.forEach(function(e){t=e.representationCount,t>n?(n=t,r=[e]):t===n&&r.push(e)}),r}function j(e,t){if(e===A.default.TEXT)return function(e){if(!e||0===e.length)return null;const t=e.filter(e=>!(e&&e.roles&&e.roles.length>0)||e.roles.every(e=>e.schemeIdUri!==A.default.DASH_ROLE_SCHEME_ID||e.value!==I.default.FORCED_SUBTITLE));return t.length>0?t[0]:e[0]}(t);let n;const i=u.getCustomInitialTrackSelectionFunction();if(n=function(e){try{let t;return t=function(e){try{const t=e.filter(e=>{const t=e.type;return e.bitrateList.some(e=>{const n=d.getAbrBitrateParameter("maxBitrate",t),r=d.getAbrBitrateParameter("minBitrate",t);return!(n>-1&&e.bandwidth>1e3*n||r>-1&&e.bandwidth<1e3*r)})});return t.length>0?t:e}catch(t){return r.error(t),e}}(e),t=function(e){try{if(!a.get().streaming.abr.limitBitrateByPortal)return e;const{elementWidth:t}=c.getVideoElementSize(),n=e.filter(e=>e.type!==A.default.VIDEO||e.bitrateList.some(e=>e.width<=t));return n.length>0?n:e}catch(t){return r.error(t),e}}(t),t}catch(t){return r.error(t),e}}(t),i&&"function"==typeof i)n=i(n);else if(l[e])n=function(e,t){if(!e||0===e.length||!t||!l[t])return e;const n=l[t].bandwidth;if(!n||isNaN(n))return e;let r={min:NaN,track:null};return e.forEach(e=>{e.bitrateList.forEach(t=>{const i=Math.abs(t.bandwidth-n);(isNaN(r.min)||i<r.min)&&(r.min=i,r.track=e)})}),r.track?[r.track]:e}(n,e);else if(a.get().streaming.ignoreSelectionPriority||(r.info("Trying to find track with highest selectionPriority"),n=F(n)),n.length>1&&a.get().streaming.prioritizeRoleMain&&(r.info("Trying to find a main track"),n=T(n,L,{role:{schemeIdUri:A.default.DASH_ROLE_SCHEME_ID,value:I.default.MAIN}})),n.length>1){r.info("Selecting track based on selectionModeForInitialTrack");let e=a.get().streaming.selectionModeForInitialTrack;switch(e){case A.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:n=function(e){let t=U(e);return t.length>1&&(t=B(t)),t}(n);break;case A.default.TRACK_SELECTION_MODE_FIRST_TRACK:n=q(n);break;case A.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:n=function(e){let t=z(e);return t.length>1&&(t=U(t)),t}(n);break;case A.default.TRACK_SELECTION_MODE_WIDEST_RANGE:n=function(e){let t=B(e);return t.length>1&&(t=U(e)),t}(n);break;default:r.warn(`Track selection mode ${e} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),n=q(n)}}return n.length>0?n[0]:t[0]}function q(e){return e[0]}function G(e,t){return!(!e||!t)&&JSON.stringify({schemeIdUri:e.schemeIdUri,value:e.value})===JSON.stringify({schemeIdUri:t.schemeIdUri,value:t.value})}return n={addTrack:function(e){if(!e)return;const t=e.type;if((n=t)!==A.default.AUDIO&&n!==A.default.VIDEO&&n!==A.default.TEXT&&n!==A.default.IMAGE)return;var n;let r=e.streamInfo.id;i[r]||(i[r]=function(){const e=a.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:e,current:null},video:{list:[],storeLastSettings:e,current:null},text:{list:[],storeLastSettings:e,current:null},image:{list:[],storeLastSettings:e,current:null}}}());const s=i[r][t].list;for(let i=0,a=s.length;i<a;++i)if(b(s[i],e))return;s.push(e)},areTracksEqual:b,clearDataForStream:function(e){i[e]&&delete i[e]},getCurrentTrackFor:p,getInitialSettings:v,getTracksFor:g,getTracksWithHighestSelectionPriority:F,getTracksWithHighestBitrate:U,getTracksWithHighestEfficiency:z,getTracksWithWidestRange:B,initialize:function(){t.on(D.default.REPRESENTATION_SWITCH,f,n)},isCurrentTrack:function(e){if(!e)return!1;const t=e.type,n=e.streamInfo.id;return i[n]&&i[n][t]&&b(i[n][t].current,e)},matchSettings:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=!1;if(e.lang){if(e.lang instanceof RegExp)r=t.lang.match(e.lang);else if(""!==t.lang){const n=ei(e.lang);n&&(r=Hr(t.lang,n).length>0)}}else r=!0;const i=void 0===e.index||null===e.index||t.index===e.index,a=!e.viewpoint||!!t.viewpoint.filter(function(t){return G(t,e.viewpoint)})[0],s=!e.role||!!t.roles.filter(function(t){return G(t,e.role)})[0];let o=!e.accessibility||!!t.accessibility.filter(function(t){return G(t,e.accessibility)})[0],l=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter(function(t){return G(t,e.audioChannelConfiguration)})[0];return r&&i&&a&&(s||t.type===A.default.AUDIO&&n)&&o&&l}catch(r){return!1}},matchSettingsAccessibility:N,matchSettingsAudioChannelConfig:P,matchSettingsIndex:w,matchSettingsLang:S,matchSettingsRole:L,matchSettingsViewPoint:x,reset:E,saveTextSettingsDisabled:function(){h.setSavedMediaSettings(A.default.TEXT,null)},selectInitialTrack:j,setConfig:function(e){e&&(e.domStorage&&(h=e.domStorage),e.settings&&(a=e.settings),e.customParametersModel&&(u=e.customParametersModel),e.mediaPlayerModel&&(d=e.mediaPlayerModel),e.videoModel&&(c=e.videoModel))},setInitialMediaSettingsForType:function(e,t){let n=o[e]||v(e);const i=g(e,t.id);let a=[];n&&0!==Object.keys(n).length||(n=h.getSavedMediaSettings(e),n&&delete n.codec,y(e,n)),i&&0!==i.length&&(n&&(a=Array.from(i),r.info("Filtering "+a.length+" "+e+" tracks based on settings"),a=T(a,k,n),a=T(a,S,n),a=T(a,w,n),a=T(a,x,n),e===A.default.AUDIO&&o[e]||(a=T(a,L,n)),a=T(a,N,n),a=T(a,P,n),a=T(a,O,n),r.info("Filtering "+e+" tracks ended, found "+a.length+" matching track(s).")),0===a.length?m(j(e,i)):a.length>1?m(j(e,a)):m(a[0]))},setInitialSettings:y,setTrack:m},r=(0,C.default)(e).getInstance().getLogger(n),E(),n}li.__dashjs_factory_name="MediaController";const ui=x.default.getSingletonFactory(li);x.default.updateSingletonFactory(li.__dashjs_factory_name,ui);var di=ui;const ci=NaN;class hi{constructor(e,t){this.data={baseUrls:e||null,selectedIdx:t||ci},this.children=[]}}function fi(){let e,t,n,r;const i=this.context,a=(0,ot.default)(i).getInstance();function s(e,t,n){const r=o(n);e[t]?a.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=ci):e[t]=new hi(r)}function o(e){let t=n.getBaseURLsFromElement(e);const i=r.getSynthesizedBaseUrlElements(t);return i&&i.length>0&&i.forEach(e=>{const n=t.findIndex(t=>t.serviceLocation===e.serviceLocation);-1!==n?t[n]=e:t.push(e)}),t}function l(e,n){const r=n||t;e(r.data),r.children&&r.children.forEach(t=>l(e,t))}function u(){t=new hi}return e={reset:u,update:function(e){!function(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();const r=o(e);a.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=ci),e&&e.Period&&e.Period.forEach((e,r)=>{s(t.children,r,e),e.AdaptationSet&&e.AdaptationSet.forEach((e,i)=>{s(t.children[r].children,i,e),e.Representation&&e.Representation.sort(n.getRepresentationSortFunction()).forEach((e,n)=>{s(t.children[r].children[i].children,n,e)})})})}(e)},getForPath:function(e){let n=t;const r=[n.data];return e&&e.forEach(e=>{n=n.children[e],n&&r.push(n.data)}),r.filter(e=>e.baseUrls.length)},invalidateSelectedIndexes:function(e){l(t=>{isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=ci)})},setConfig:function(e){e.adapter&&(n=e.adapter),e.contentSteeringController&&(r=e.contentSteeringController)},getBaseUrls:function(e){return o(e)}},u(),e}fi.__dashjs_factory_name="BaseURLTreeModel";var gi=x.default.getClassFactory(fi);function pi(e){let t;const n=(e=e||{}).blacklistController;return t={select:function(e){return e&&function(e){let t,n,r=0,i=[],a=0;if(n=e.sort(function(e,t){let n=e.dvbPriority-t.dvbPriority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvbPriority&&e.dvbPriority&&n[0].dvbPriority===e.dvbPriority}),n.length)return n.length>1&&(n.forEach(e=>{r+=e.dvbWeight,i.push(r)}),t=Math.floor(Math.random()*(r-1)),i.every((e,n)=>(a=n,!(t<e)))),n[a]}(function(e){let t=[];return e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvbPriority&&t.push(e.dvbPriority),!1)}).filter(function(e){return!t.length||!e.dvbPriority||-1===t.indexOf(e.dvbPriority)})}(e))}},t}pi.__dashjs_factory_name="DVBSelector";var mi=x.default.getClassFactory(pi);function yi(e){let t;const n=(e=e||{}).blacklistController;return t={select:function(e){let t,r=0;return e&&e.some((e,t)=>(r=t,!n.contains(e.serviceLocation)))&&(t=e[r]),t}},t}yi.__dashjs_factory_name="BasicSelector";var vi=x.default.getClassFactory(yi);function bi(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a=[];function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0,r=NaN;for(;n<e.length;){const a=e[n],s=t.findIndex(e=>e.serviceLocation&&e.serviceLocation===a);if(-1!==s&&!i.contains(t[s].serviceLocation)){r=s;break}n+=1}return r}function o(e){const t=r.getCurrentSteeringResponseData();if(!t)return;const n=e.entry,s=setTimeout(()=>{i.remove(n),a.splice(a.indexOf(s,1))},1e3*t.ttl);a.push(s)}return n={selectBaseUrlIndex:function(e){let t=NaN;if(isNaN(e.selectedIdx)){const n=r.getSteeringDataFromManifest();n&&n.defaultServiceLocationArray.length>0&&(t=s(n.defaultServiceLocationArray,e.baseUrls))}const n=r.getCurrentSteeringResponseData();return e.baseUrls&&e.baseUrls.length&&n&&n.pathwayPriority&&n.pathwayPriority.length&&(t=s(n.pathwayPriority,e.baseUrls)),t},setConfig:function(e){e.blacklistController&&(i=e.blacklistController),e.contentSteeringController&&(r=e.contentSteeringController),t.on(e.addBlacklistEventName,o,n)},reset:function(){a.forEach(e=>clearTimeout(e)),a=[]}},r=dr(e).getInstance(),n}bi.__dashjs_factory_name="ContentSteeringSelector";var Ei=x.default.getClassFactory(bi);function Ti(){const e=this.context,t=(0,_.default)(e).getInstance(),n=(0,$.default)(e).getInstance();let r,i,a,s,o,l;function u(){o.reset(),i.reset()}return r={chooseSelector:function(e){(0,ve.checkParameterType)(e,"boolean"),l=e?s:a},select:function(e){if(!e)return;if(n.get().streaming.applyContentSteering){const t=o.selectBaseUrlIndex(e);isNaN(t)||-1===t||(e.selectedIdx=t)}if(!isNaN(e.selectedIdx))return e.baseUrls[e.selectedIdx];let r=l.select(e.baseUrls);return r?(e.selectedIdx=e.baseUrls.indexOf(r),r):(t.trigger(R.default.URL_RESOLUTION_FAILED,{error:new G.default(K.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,K.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(l===a&&u()))},reset:u,setConfig:function(e){e.selector&&(l=e.selector),e.contentSteeringSelector&&(o=e.contentSteeringSelector)}},i=rr(e).create({updateEventName:R.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:R.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),a=vi(e).create({blacklistController:i}),s=mi(e).create({blacklistController:i}),o=Ei(e).create(),o.setConfig({blacklistController:i,addBlacklistEventName:R.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),l=a,r}Ti.__dashjs_factory_name="BaseURLSelector";var Si=x.default.getClassFactory(Ti);function wi(){let e,t;const n=this.context,r=(0,_.default)(n).getInstance(),i=Ae(n).getInstance();let a,s,o;function l(e){a.update(e),s.chooseSelector(t.getIsDVB(e)),r.trigger(D.default.BASE_URLS_UPDATED,{baseUrls:u(e)})}function u(e){return a.getBaseUrls(e)}return e={reset:function(){a.reset(),s.reset()},initialize:function(e){a.setConfig({adapter:t,contentSteeringController:o}),l(e)},resolve:function(e){const t=a.getForPath(e).reduce((e,t)=>{const n=s.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e.queryParams=n.queryParams,e):new Qe},new Qe);if(!i.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(s=e.baseURLSelector),e.adapter&&(t=e.adapter),e.contentSteeringController&&(o=e.contentSteeringController)},getBaseUrls:u,update:l},a=gi(n).create(),s=Si(n).create(),r.on(R.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(e){a.invalidateSelectedIndexes(e.entry)},e),e}wi.__dashjs_factory_name="BaseURLController";var Ai=x.default.getClassFactory(wi),Ii=class extends O{constructor(e,t){super(),this.url=e||null,this.type=t||null,this.mediaType=A.default.STREAM,this.responseType=""}};function ki(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance();let r,i=On(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,errors:K});return r={load:function(e,t,r){const a=function(i,a){t.resolved=!0,t.resolvedContent=i||null,n.trigger(R.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:r,error:i||a?null:new G.default(K.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,K.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)a(null,!0);else{const t=new Ii(e,N.HTTPRequest.XLINK_EXPANSION_TYPE);i.load({request:t,success:function(e){a(e)},error:function(){a(null)}})}},reset:function(){i&&(i.abort(),i=null)}},r}ki.__dashjs_factory_name="XlinkLoader";var _i=x.default.getClassFactory(ki);const Ri="onLoad";function xi(e){e=e||{};let t=this.context,n=(0,_.default)(t).getInstance();const r=Ae(t).getInstance();let i,a,s,o;function l(e,t,n){let i,a,s={};s.elements=e,s.type=t,s.resolveType=n,0===s.elements.length&&d(s);for(let l=0;l<s.elements.length;l++)i=s.elements[l],a=r.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,o.load(a,i,s)}function u(e){let t,n,r="";if(t=e.element,n=e.resolveObject,t.resolvedContent){let e=0;0===t.resolvedContent.indexOf("<?xml")&&(e=t.resolvedContent.indexOf("?>")+2),r=t.resolvedContent.substr(0,e)+"<response>"+t.resolvedContent.substr(e)+"</response>",t.resolvedContent=a.parseXml(r).response}(function(e){let t,n;for(t=0;t<e.elements.length;t++)if(n=e.elements[t],!1===n.resolved)return!1;return!0})(n)&&d(n)}function d(e){let t,r,i=[];if(function(e){let t,n,r,i,o,l,u=[];for(i=e.elements.length-1;i>=0;i--){if(t=e.elements[i],n=t.type,t.resolvedContent){if(t.resolvedContent)for(o=0;o<t.resolvedContent[n].length;o++)r=t.resolvedContent[n][o],u.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],u.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),l=0;l<u.length;l++)t.parentElement[n].splice(t.index+l,0,u[l]);u=[]}e.elements.length>0&&a.getIron().run(s)}(e),"onActuate"===e.resolveType&&n.trigger(R.default.XLINK_READY,{manifest:s}),e.resolveType===Ri)switch(e.type){case I.default.PERIOD:for(t=0;t<s[I.default.PERIOD].length;t++)r=s[I.default.PERIOD][t],r.hasOwnProperty(I.default.ADAPTATION_SET)&&(i=i.concat(c(r[I.default.ADAPTATION_SET],r,I.default.ADAPTATION_SET,Ri))),r.hasOwnProperty(I.default.EVENT_STREAM)&&(i=i.concat(c(r[I.default.EVENT_STREAM],r,I.default.EVENT_STREAM,Ri)));l(i,I.default.ADAPTATION_SET,Ri);break;case I.default.ADAPTATION_SET:n.trigger(R.default.XLINK_READY,{manifest:s})}}function c(e,t,n,r){let i,a,s,o=[];for(a=e.length-1;a>=0;a--)i=e[a],i.hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(a,1);for(a=0;a<e.length;a++)i=e[a],i.hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(s=h(i["xlink:href"],t,n,a,r,i),o.push(s));return o}function h(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return i={resolveManifestOnLoad:function(e){let t;s=e,s.Period?(t=c(s.Period,s,I.default.PERIOD,Ri),l(t,I.default.PERIOD,Ri)):n.trigger(R.default.XLINK_READY,{manifest:s})},setParser:function(e){e&&(a=e)},reset:function(){n.off(R.default.XLINK_ELEMENT_LOADED,u,i),o&&(o.reset(),o=null)}},n.on(R.default.XLINK_ELEMENT_LOADED,u,i),o=_i(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,settings:e.settings}),i}xi.__dashjs_factory_name="XlinkController";var Ci=x.default.getClassFactory(xi);function Di(e){function t(e,t){for(let n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(let i=0,a=e.length;i<a;++i){const a=e[i];if(n[a.name])if(r[a.name]){if(a.merge){const e=n[a.name],i=r[a.name];"object"==typeof e&&"object"==typeof i?t(e,i):r[a.name]=e+i}}else r[a.name]=n[a.name]}}function r(e,t){for(let i=0,a=e.children.length;i<a;++i){const a=e.children[i],s=t[a.name];if(s)for(let i=0,o=s.length;i<o;++i){const o=s[i];n(e.properties,t,o),r(a,o)}}}return{run:function(t){if(null===t||"object"!=typeof t)return t;if(t.Period&&"period"in e){const n=e.period,i=t.Period;for(let t=0,a=i.length;t<a;++t){const a=i[t];if(r(n,a),"adaptationset"in e){const t=a.AdaptationSet;if(t){const n=e.adaptationset;for(let e=0,i=t.length;e<i;++e)r(n,t[e])}}}}return t}}}Di.__dashjs_factory_name="ObjectIron";var Li=x.default.getClassFactory(Di),Mi=class{constructor(e,t){this._test=e,this._converter=t}get test(){return this._test}get converter(){return this._converter}};const Ni=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Pi=class extends Mi{constructor(){super((e,t,n)=>{const r=[I.default.MIN_BUFFER_TIME,I.default.MEDIA_PRESENTATION_DURATION,I.default.MINIMUM_UPDATE_PERIOD,I.default.TIMESHIFT_BUFFER_DEPTH,I.default.MAX_SEGMENT_DURATION,I.default.MAX_SUBSEGMENT_DURATION,I.default.SUGGESTED_PRESENTATION_DELAY,I.default.START,A.default.START_TIME,I.default.DURATION],i=r.length;for(let a=0;a<i;a++)if(t===r[a])return Ni.test(n);return!1},e=>{const t=Ni.exec(e);let n=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n})}};const Oi=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var Fi=class extends Mi{constructor(){super((e,t,n)=>Oi.test(n),e=>{const t=Oi.exec(e);let n;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){const e=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*e*60*1e3}return new Date(n)})}};const Ui=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,zi=[I.default.ID];var Bi=class extends Mi{constructor(){super((e,t,n)=>Ui.test(n)&&-1===zi.indexOf(t),e=>parseFloat(e))}},ji=class extends Mi{constructor(){super((e,t)=>{const n={[I.default.ADAPTATION_SET]:[I.default.LANG],[I.default.REPRESENTATION]:[I.default.LANG],[I.default.CONTENT_COMPONENT]:[I.default.LANG],[I.default.LABEL]:[I.default.LANG],[I.default.GROUP_LABEL]:[I.default.LANG]};if(n.hasOwnProperty(e)){let r=n[e];return void 0!==r&&r.indexOf(t)>=0}return!1},e=>ei(e)||String(e))}},qi=class{constructor(e){var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},Gi=class{constructor(e,t,n){this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(e=>{this._properties.push(new qi(e))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},Hi=class extends Gi{constructor(){const e=[I.default.PROFILES,I.default.WIDTH,I.default.HEIGHT,I.default.SAR,I.default.FRAMERATE,I.default.AUDIO_SAMPLING_RATE,I.default.MIME_TYPE,I.default.SEGMENT_PROFILES,I.default.CODECS,I.default.MAXIMUM_SAP_PERIOD,I.default.START_WITH_SAP,I.default.MAX_PLAYOUT_RATE,I.default.CODING_DEPENDENCY,I.default.SCAN_TYPE,I.default.FRAME_PACKING,I.default.AUDIO_CHANNEL_CONFIGURATION,I.default.CONTENT_PROTECTION,I.default.INBAND_EVENT_STREAM];super(I.default.ADAPTATION_SET,e,[new Gi(I.default.REPRESENTATION,e,[new Gi(I.default.SUB_REPRESENTATION,e)])])}},Vi=class extends Gi{constructor(){const e=[I.default.SEGMENT_BASE,I.default.SEGMENT_TEMPLATE,I.default.SEGMENT_LIST];super(I.default.PERIOD,e,[new Gi(I.default.ADAPTATION_SET,e,[new Gi(I.default.REPRESENTATION,e)])])}};const Ki={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function $i(e,t){const n=t.split(/(&[#a-zA-Z0-9]+;)/);if(n.length<=1)return t;for(let r=1;r<n.length;r+=2){const t=n[r];if("#"===t.charAt(1)){let e;e="x"===t.charAt(2)?parseInt(t.substring(3,t.length-1),16):parseInt(t.substring(2,t.length-1),10),!isNaN(e)&&e>=0&&e<=1114111&&(n[r]=String.fromCodePoint(e))}else e.hasOwnProperty(t)&&(n[r]=e[t])}return n.join("")}function Yi(e,t){var n=(t=t||{}).pos||0,r=!!t.keepComments,i=!!t.keepWhitespace,a=t.attrMatchers||[],s=t.nodesAsArray||[],o="<".charCodeAt(0),l=">".charCodeAt(0),u="-".charCodeAt(0),d="/".charCodeAt(0),c="!".charCodeAt(0),h="'".charCodeAt(0),f='"'.charCodeAt(0),g="[".charCodeAt(0),p="]".charCodeAt(0);function m(t,a){for(var h=[];e[n];)if(e.charCodeAt(n)==o){if(e.charCodeAt(n+1)===d){var f=n+2;if(n=e.indexOf(">",n),-1==e.substring(f,n).indexOf(t)){var m=e.substring(0,n).split("\n");throw new Error("Unexpected close tag\nLine: "+(m.length-1)+"\nColumn: "+(m[m.length-1].length+1)+"\nChar: "+e[n])}return n+1&&(n+=1),h}if(e.charCodeAt(n+1)===c){if(e.charCodeAt(n+2)==u){const t=n;for(;-1!==n&&(e.charCodeAt(n)!==l||e.charCodeAt(n-1)!=u||e.charCodeAt(n-2)!=u||-1==n);)n=e.indexOf(">",n+1);-1===n&&(n=e.length),r&&h.push(e.substring(t,n+1))}else{if(e.charCodeAt(n+2)===g&&e.charCodeAt(n+8)===g&&"cdata"===e.substr(n+3,5).toLowerCase()){var y=e.indexOf("]]>",n);-1==y?(h.push(e.substr(n+9)),n=e.length):(h.push(e.substring(n+9,y)),n=y+3);continue}{const t=n+1;n+=2;for(var v=!1;(e.charCodeAt(n)!==l||!0===v)&&e[n];)e.charCodeAt(n)===g?v=!0:!0===v&&e.charCodeAt(n)===p&&(v=!1),n++;h.push(e.substring(t,n))}}n++;continue}var b=T();if(h.push(b),"?"===b.tagName[0]&&(h.push(...b.children),b.children=[]),a){let e=b.tagName;-1!==s.indexOf(e)?(a[e]||(a[e]=[]),a[e].push(b)):a[e]=b}}else{var E=(void 0,S=n,-2==(n=e.indexOf("<",n)-1)&&(n=e.length),$i(Ki,e.slice(S,n+1)));i||(E=E.trim()),a?a.__text=E:h.push(E),n++}var S;return h}function y(e,t,n){if("S"===e)return parseInt(n);let r=$i(Ki,n);return a.forEach(i=>{i.test(e,t,n)&&(r=i.converter(n))}),r}var v="\r\n\t>/= ";function b(){for(var t=n;-1===v.indexOf(e[n])&&e[n];)n++;return e.slice(t,n)}var E=t.noChildNodes||["img","br","input","meta","link","hr"];function T(){n++;const t=b();let r=[],i={tagName:t},a=i.tagName.indexOf(":");for(-1!==a&&(i.__prefix=i.tagName.substr(0,a),i.tagName=i.tagName.substr(a+1));e.charCodeAt(n)!==l&&e[n];){var s=e.charCodeAt(n);if(s>64&&s<91||s>96&&s<123){for(var o=b(),u=e.charCodeAt(n);u&&u!==h&&u!==f&&!(u>64&&u<91||u>96&&u<123)&&u!==l;)n++,u=e.charCodeAt(n);if(u===h||u===f){var c=(void 0,void 0,g=e[n],p=n+1,n=e.indexOf(g,p),e.slice(p,n));if(-1===n)return i}else c=null,n--;c=y(i.tagName,o,c),i[o]=c}n++}var g,p;if(e.charCodeAt(n-1)!==d)if("script"==t){var v=n+1;n=e.indexOf("<\/script>",n),r=[e.slice(v,n)],n+=9}else"style"==t?(v=n+1,n=e.indexOf("</style>",n),r=[e.slice(v,n)],n+=8):-1===E.indexOf(t)?(n++,r=m(t,i)):n++;else n++;return i.__children=r,i}var S,w=null;if(void 0!==t.attrValue)for(t.attrName=t.attrName||"id",w=[];-1!==(S=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e),n=S?S.index:-1);)-1!==(n=e.lastIndexOf("<",n))&&w.push(T()),e=e.substr(n),n=0;else w=t.parseNode?T():m("");return t.filter&&(w=Xi(w,t.filter)),t.simplify?Wi(Array.isArray(w)?w:[w]):(t.setPos&&(w.pos=n),w)}function Wi(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var n in e.forEach(function(e){if("object"==typeof e){t[e.tagName]||(t[e.tagName]=[]);var n=Wi(e.children);t[e.tagName].push(n),Object.keys(e.attributes).length&&"string"!=typeof n&&(n._attributes=e.attributes)}}),t)1==t[n].length&&(t[n]=t[n][0]);return t}function Xi(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";var i=[];return e.forEach(function(e,a){if("object"==typeof e&&t(e,a,n,r)&&i.push(e),e.children){var s=Xi(e.children,t,n+1,(r?r+".":"")+a+"."+e.tagName);i=i.concat(s)}}),i}const Qi=[I.default.PERIOD,I.default.BASE_URL,I.default.ADAPTATION_SET,I.default.REPRESENTATION,I.default.CONTENT_PROTECTION,I.default.ROLE,I.default.ACCESSIBILITY,I.default.AUDIO_CHANNEL_CONFIGURATION,I.default.CONTENT_COMPONENT,I.default.ESSENTIAL_PROPERTY,I.default.LABEL,I.default.S,I.default.SEGMENT_URL,I.default.EVENT,I.default.EVENT_STREAM,I.default.LOCATION,I.default.SERVICE_DESCRIPTION,I.default.SUPPLEMENTAL_PROPERTY,I.default.METRICS,I.default.REPORTING,I.default.PATCH_LOCATION,I.default.REPLACE,I.default.ADD,I.default.REMOVE,I.default.UTC_TIMING,I.default.INBAND_EVENT_STREAM,I.default.PRODUCER_REFERENCE_TIME,I.default.CONTENT_STEERING];function Ji(e){e=e||{};const t=this.context,n=e.debug;let r,i,a,s;function o(e){try{let t=Yi(e,{parseNode:!0,attrMatchers:a,nodesAsArray:Qi}),n={};if(-1!==t.tagName.toLowerCase().indexOf("xml"))for(let e in t){if(Array.isArray(t[e])){n[e]=t[e][0];break}if("object"==typeof t[e]){n[e]=t[e];break}}else n[t.tagName]=t,delete t.tagName;return n}catch(t){return null}}return r={getIron:function(){return s},parseXml:o,parse:function(e){let t;const n=window.performance.now();if(t=o(e),!t)throw new Error("failed to parse the manifest");t.Patch?(t=t.Patch,t.add&&t.add.forEach(e=>s.run(e)),t.replace&&t.replace.forEach(e=>s.run(e))):(t=t.MPD,s.run(t));const r=window.performance.now();return i.info("Parsing complete: "+(r-n).toPrecision(3)+"ms"),t.protocol="DASH",t}},i=n.getLogger(r),a=[new Pi,new Fi,new Bi,new ji],s=Li(t).create({adaptationset:new Hi,period:new Vi}),r}Ji.__dashjs_factory_name="DashParser";var Zi=x.default.getClassFactory(Ji);function ea(e){e=e||{};const t=this.context,n=e.debug,r=e.settings,i=(0,_.default)(t).getInstance(),a=Ae(t).getInstance();let s,o,l,u,d,c=e.mssHandler,h=e.errHandler;function f(e){i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return s={load:function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const f=new Date,g=new Ii(e,N.HTTPRequest.MPD_TYPE);s&&(g.serviceLocation=s),h&&(g.queryParams=h),g.startDate||(g.startDate=f),i.trigger(R.default.MANIFEST_LOADING_STARTED,{request:g}),l.load({request:g,success:function(s,l,h){if(!u)return;let f,g,p;if(h&&h!==e?(g=a.parseBaseUrl(h),f=h):(a.isRelative(e)&&(e=a.resolve(e,window.location.href)),g=a.parseBaseUrl(e)),"No Content"!=l)if(null===d&&(d=function(e){let r=null;return e.indexOf("SmoothStreamingMedia")>-1?(c&&(r=c.createMssParser(),c.createMssFragmentProcessor(),c.registerEvents()),r):e.indexOf("MPD")>-1||e.indexOf("Patch")>-1?Zi(t).create({debug:n}):r}(s)),null!==d){u.setParser(d);try{p=d.parse(s)}catch(m){return void i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${e}`)})}if(p){if(p.url=f||e,p.originalUrl||(p.originalUrl=p.url),r&&r.get().streaming.enableManifestDurationMismatchFix&&p.mediaPresentationDuration&&p.Period.length>1){const e=p.Period.reduce((e,t)=>e+t.duration,0);!isNaN(e)&&p.mediaPresentationDuration>e&&(o.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),p.mediaPresentationDuration=e)}p.baseUri=g,p.loadedTime=new Date,u.resolveManifestOnLoad(p),i.trigger(R.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:s})}else i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${e}`)})}else i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,K.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${e}`)});else i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(t,n,r){i.trigger(R.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new G.default(K.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,K.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${e}, ${r}`)})}})},reset:function(){i.off(R.default.XLINK_READY,f,s),c&&c.reset(),u&&(u.reset(),u=null),l&&(l.abort(),l=null)}},o=n.getLogger(s),i.on(R.default.XLINK_READY,f,s),l=On(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,urlUtils:a,constants:A.default,dashConstants:I.default,errors:K,requestTimeout:e.settings.get().streaming.manifestRequestTimeout}),u=Ci(t).create({errHandler:h,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,settings:e.settings}),d=null,s}ea.__dashjs_factory_name="ManifestLoader";var ta=x.default.getClassFactory(ea);function na(){let e;const t=this.context,n=(0,_.default)(t).getInstance();return e={error:function(e){n.trigger(R.default.ERROR,{error:e})}},e}na.__dashjs_factory_name="ErrorHandler";var ra=x.default.getSingletonFactory(na),ia=n(559);function aa(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i,a,s,o,l;function u(e,t,n){const r=c(e,t,n);return i.isCodecSupportedBasedOnTestedConfigurations(r,e)}function d(e,t,n,r,i){const a=c(e,t,n),s=JSON.stringify(a);r.has(s)||(r.add(s),i.push(a))}function c(e,t,n){let i=null;switch(e){case A.default.VIDEO:i=function(e,t){let n={codec:t,width:e.width||null,height:e.height||null,framerate:r.getFramerate(e)||null,bitrate:e.bandwidth||null,isSupported:!0};a.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(n,function(e){let t={colorGamut:null,transferFunction:null,isSupported:!0};for(const n of e.EssentialProperty||[])n.schemeIdUri===A.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(n.value.toString())?t.colorGamut=A.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:n.schemeIdUri===A.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(n.value.toString())?t.colorGamut=A.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:n.schemeIdUri===A.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(n.value.toString())?t.colorGamut=A.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:n.schemeIdUri===A.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(n.value.toString())?t.colorGamut=null:n.schemeIdUri===A.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(t.isSupported=!1),n.schemeIdUri===A.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(n.value.toString())?t.transferFunction=A.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:n.schemeIdUri===A.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(n.value.toString())?t.transferFunction=A.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:n.schemeIdUri===A.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(n.value.toString())?t.transferFunction=A.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:n.schemeIdUri===A.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(n.value.toString())?t.transferFunction=null:n.schemeIdUri===A.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(t.isSupported=!1);return t}(e));let i=n.isSupported;a.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(n,function(e){let t={isSupported:!0,hdrMetadataType:null};for(const n of e.EssentialProperty||[])n.schemeIdUri===A.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===A.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?t.hdrMetadataType=A.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:n.schemeIdUri===A.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===A.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?t.hdrMetadataType=A.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:n.schemeIdUri===A.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&n.value===A.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?t.hdrMetadataType=A.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:n.schemeIdUri===A.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(t.isSupported=!1);return t}(e));let s=n.isSupported;return i&&s||(n.isSupported=!1),n}(t,n);break;case A.default.AUDIO:i=function(e,t){const n=e.audioSamplingRate||null;return{codec:t,bitrate:e.bandwidth||null,samplerate:n,isSupported:!0}}(t,n);break;default:return i}return l=i,(s=t)&&s[I.default.CONTENT_PROTECTION]&&s[I.default.CONTENT_PROTECTION].length>0&&(l.keySystemsMetadata=o.getSupportedKeySystemMetadataFromContentProtection(s[I.default.CONTENT_PROTECTION])),l;var s,l}function h(e){if(!e||0===e.length)return!0;let t=0;for(;t<e.length;){if(!i.supportsEssentialProperty(e[t]))return l.debug("[Stream] EssentialProperty not supported: "+e[t].schemeIdUri),!1;t+=1}return!0}return n={setConfig:function(e){e&&(e.adapter&&(r=e.adapter),e.capabilities&&(i=e.capabilities),e.settings&&(a=e.settings),e.protectionController&&(o=e.protectionController),e.customParametersModel&&(s=e.customParametersModel))},filterUnsupportedFeatures:function(e){return new Promise(n=>{const o=[A.default.VIDEO,A.default.AUDIO],c=[];o.forEach(t=>{(function(e,t){if(!e||!e.Period||0===e.Period.length)return[];const n=new Set,i=[];return e.Period.forEach(e=>{e.AdaptationSet.forEach(e=>{r.getIsTypeOf(e,t)&&e.Representation.forEach((a,s)=>{const o=r.getCodec(e,s,!1);d(t,a,o,n,i);const l=r.getSupplementalCodecs(a);l.length>0&&d(t,a,l[0],n,i)})})}),i})(e,t).forEach(e=>{c.push(i.runCodecSupportCheck(e,t))})}),Promise.allSettled(c).then(()=>{return o.forEach(n=>{var i,a;i=n,(a=e)&&a.Period&&0!==a.Period.length&&a.Period.forEach(e=>{var n,a;a=i,(n=e)&&n.AdaptationSet&&0!==n.AdaptationSet.length&&(n.AdaptationSet=n.AdaptationSet.filter(e=>{var n,i;r.getIsTypeOf(e,a)&&(i=a,(n=e).Representation&&0!==n.Representation.length&&(n.Representation=n.Representation.filter((e,t)=>{const a=r.getCodec(n,t,!1),s=u(i,e,a);let o=function(e,t){let n=!1;const i=r.getSupplementalCodecs(e);return i.length>0&&(i.length>1&&l.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),n=u(t,e,i[0])),n}(e,i);return o&&(l.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${e.id}`),e.codecs=e[I.default.SUPPLEMENTAL_CODECS]),s||o||l.warn(`[CapabilitiesFilter] Codec ${a} not supported. Removing Representation with ID ${e.id}`),s||o})));const s=e.Representation&&e.Representation.length>0;return s||(t.trigger(R.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:e}),l.warn(`[CapabilitiesFilter] AdaptationSet with ID ${e.id?e.id:"undefined"} and codec ${e.codecs?e.codecs:"undefined"} has been removed because of no supported Representation`)),s}))})}),a.get().streaming.capabilities.filterUnsupportedEssentialProperties&&((n=e)&&n.Period&&0!==n.Period.length&&n.Period.forEach(e=>{e.AdaptationSet=e.AdaptationSet.filter(e=>!e.Representation||0===e.Representation.length||!!h(r.getEssentialPropertiesForAdaptationSet(e))&&(e.Representation=e.Representation.filter(e=>h(r.getEssentialPropertiesForRepresentation(e))),e.Representation&&e.Representation.length>0))})),function(e){if(!e||!e.Period||0===e.Period.length)return Promise.resolve();const t=[];return e.Period.forEach(e=>{var n;t.push((n=e,new Promise(e=>{if(!n||!n.AdaptationSet||0===n.AdaptationSet.length)return void e();const t=[];n.AdaptationSet.forEach(e=>{var n;t.push((n=e,new Promise(e=>{if(!n.Representation||0===n.Representation.length)return void e();const t=[];n.Representation.forEach(e=>{t.push(function(e){const t=[],n=s.getCustomCapabilitiesFilters();return n&&0!==n.length?n.forEach(n=>{t.push(new Promise(t=>t(n(e))))}):t.push(Promise.resolve(!0)),Promise.all(t)}(e))}),Promise.all(t).then(t=>{n.Representation=n.Representation.filter((e,n)=>{let r=t[n].every(e=>e);return r||l.debug("[Stream] Representation "+e.id+" has been removed because of unsupported CustomFilter"),r}),e()}).catch(t=>{l.warn("[Stream] at least one promise rejected in CustomFilter with error: ",t),e()})})))}),Promise.all(t).then(()=>{n.AdaptationSet=n.AdaptationSet.filter(e=>e.Representation&&e.Representation.length>0),e()}).catch(()=>{e()})})))}),Promise.all(t)}(e);var n}).then(()=>{n()}).catch(e=>{l.error(e),n()})})}},l=(0,C.default)(e).getInstance().getLogger(n),n}aa.__dashjs_factory_name="CapabilitiesFilter";var sa=x.default.getSingletonFactory(aa),oa=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function la(){let e,t;return e={initialize:function(e){if(t=new oa,!e)return null;const n=e.indexOf("#");if(-1!==n){const r=e.substr(n+1).split("&");for(let e=0,n=r.length;e<n;++e){const n=r[e],i=n.indexOf("=");if(-1!==i){const e=n.substring(0,i);t.hasOwnProperty(e)&&(t[e]=n.substr(i+1))}}}},getURIFragmentData:function(){return t}},e}la.__dashjs_factory_name="URIFragmentModel";var ua=x.default.getSingletonFactory(la);function da(){let e,t,n=this.context,r=(0,_.default)(n).getInstance();return e={getValue:function(){return t},setValue:function(e){t=e,e&&r.trigger(R.default.MANIFEST_LOADED,{data:e})}},e}da.__dashjs_factory_name="ManifestModel";var ca=x.default.getSingletonFactory(da);function ha(){let e,t,n,r;const i=this.context,a=(0,$.default)(i).getInstance();function s(e,n){return isNaN(e)?0:e>0?(n&&t.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e<-.5?(n&&t.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):e}function o(e,n){return isNaN(e)?0:e<0?(n&&t.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):e>1?(n&&t.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):e}function l(){const e=u(),t=n.getLiveDelay();return!isNaN(t)&&t>0?Math.min(e,t):e}function u(){return a.get().streaming.buffer.bufferTimeDefault>0?a.get().streaming.buffer.bufferTimeDefault:d()?20:12}function d(){return null!==a.get().streaming.buffer.fastSwitchEnabled?a.get().streaming.buffer.fastSwitchEnabled:!n.getLowLatencyModeEnabled()}return e={getCatchupMaxDrift:function(){if(!isNaN(a.get().streaming.liveCatchup.maxDrift)&&a.get().streaming.liveCatchup.maxDrift>=0)return a.get().streaming.liveCatchup.maxDrift;const e=r.getServiceDescriptionSettings();return e&&e.liveCatchup&&!isNaN(e.liveCatchup.maxDrift)&&e.liveCatchup.maxDrift>=0?e.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return null!==a.get().streaming.liveCatchup.enabled?a.get().streaming.liveCatchup.enabled:n.getInitialCatchupModeActivated()},getBufferTimeDefault:l,getBufferTimeDefaultUnadjusted:u,getFastSwitchEnabled:d,getInitialBufferLevel:function(){const e=a.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(l(),e)},getRetryAttemptsForType:function(e){const t=isNaN(a.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:a.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryAttempts[e]*t:a.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){const t=isNaN(a.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:a.get().streaming.retryIntervals.lowLatencyReductionFactor;return n.getLowLatencyModeEnabled()?a.get().streaming.retryIntervals[e]/t:a.get().streaming.retryIntervals[e]},getCatchupPlaybackRates:function(e){const t=a.get().streaming.liveCatchup.playbackRate;if(!isNaN(t.min)||!isNaN(t.max))return{min:s(t.min,e),max:o(t.max,e)};const n=r.getServiceDescriptionSettings();if(n&&n.liveCatchup&&(!isNaN(n.liveCatchup.playbackRate.min)||!isNaN(n.liveCatchup.playbackRate.max))){const t=n.liveCatchup.playbackRate;return{min:s(t.min,e),max:o(t.max,e)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(e,t){try{const n=a.get().streaming.abr[e][t];if(!isNaN(n)&&-1!==n)return n;const i=r.getServiceDescriptionSettings();return i&&i[e]&&!isNaN(i[e][t])?i[e][t]:-1}catch(n){return-1}},setConfig:function(e){e.playbackController&&(n=e.playbackController),e.serviceDescriptionController&&(r=e.serviceDescriptionController)},reset:function(){}},t=(0,C.default)(i).getInstance().getLogger(e),e}ha.__dashjs_factory_name="MediaPlayerModel";var fa=x.default.getSingletonFactory(ha);const ga={DEFAULT:.5,STRONG:1,WEAK:0};function pa(e,t,n,r){let i,a,s,o,l;return a=void 0===e?null:e,s=function(e){let t=ga.DEFAULT;return e!==ga.DEFAULT&&e!==ga.STRONG&&e!==ga.WEAK||(t=e),t}(n),o=void 0===t?null:t,l=void 0===r?null:r,i={representation:a,reason:o,rule:l,priority:s},i}pa.__dashjs_factory_name="SwitchRequest";const ma=x.default.getClassFactory(pa);ma.NO_CHANGE=null,ma.PRIORITY=ga,x.default.updateClassFactory(pa.__dashjs_factory_name,ma);var ya=ma;function va(e){e=e||{};const t=this.context,n=e.dashMetrics;let r,i;return r={getSwitchRequest:function(e){try{const r=ya(t).create();r.rule=this.getClassName();const i=e.getMediaInfo(),a=e.getMediaType(),s=n.getCurrentBufferState(a),o=e.getScheduleController(),l=e.getAbrController(),u=e.getStreamInfo(),d=u?u.id:null,c=u&&u.manifestInfo?u.manifestInfo.isDynamic:null,h=e.getThroughputController(),f=h.getSafeAverageThroughput(a),g=h.getAverageLatency(a);return isNaN(f)||!s||l.getAbandonmentStateFor(d,a)===k.ALLOW_LOAD&&(s.state===k.BUFFER_LOADED||c)&&(r.representation=l.getOptimalRepresentationForBitrate(i,f,!0),r.reason={throughput:f,latency:g,message:`[ThroughputRule]: Switching to Representation with bitrate ${r.representation?r.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${f}`},o.setTimeToLoadDelay(0)),r}catch(r){return i.error(r),ya(t).create()}},reset:function(){}},i=(0,C.default)(t).getInstance().getLogger(r),r}va.__dashjs_factory_name="ThroughputRule";var ba=x.default.getClassFactory(va);function Ea(e){e=e||{};const t=this.context,n=(0,_.default)(t).getInstance(),r=e.dashMetrics,i=(0,$.default)(t).getInstance();let a,s,o;function l(){const e=i.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;o={},o[A.default.VIDEO]={ignoreCount:e},o[A.default.AUDIO]={ignoreCount:e}}function u(){l()}function d(e){isNaN(e.startTime)||e.mediaType!==A.default.AUDIO&&e.mediaType!==A.default.VIDEO||o[e.mediaType].ignoreCount>0&&o[e.mediaType].ignoreCount--}return a={getSwitchRequest:function(e){const n=ya(t).create();if(n.rule=this.getClassName(),!e||!e.hasOwnProperty("getMediaType"))return n;const a=e.getMediaType(),l=r.getCurrentBufferState(a),u=e.getRepresentation().fragmentDuration;if(d=e.getScheduleController().getPlaybackController(),c=a,h=u,!(!d.getLowLatencyModeEnabled()&&o[c].ignoreCount<=0&&h))return n;var d,c,h;const f=e.getMediaInfo(),g=e.getAbrController();if(l&&l.state===k.BUFFER_EMPTY)s.debug("["+a+"] Switch to index 0; buffer is empty."),n.representation=g.getOptimalRepresentationForBitrate(f,0,!0),n.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const t=e.getThroughputController(),s=r.getCurrentBufferLevel(a),o=t.getAverageThroughput(a,null,NaN)*i.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*s/u;if(isNaN(o)||o<=0)return n;n.representation=g.getOptimalRepresentationForBitrate(f,o,!0),n.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:o}}return n},reset:function(){l(),n.off(D.default.PLAYBACK_SEEKING,u,a),n.off(R.default.BYTES_APPENDED_END_FRAGMENT,d,a)}},s=(0,C.default)(t).getInstance().getLogger(a),l(),n.on(D.default.PLAYBACK_SEEKING,u,a),n.on(R.default.BYTES_APPENDED_END_FRAGMENT,d,a),a}Ea.__dashjs_factory_name="InsufficientBufferRule";var Ta=x.default.getClassFactory(Ea);function Sa(e){const t=(e=e||{}).mediaPlayerModel,n=e.dashMetrics,r=this.context,i=(0,$.default)(r).getInstance();let a,s,o;function l(){o={}}return a={shouldAbandon:function(e){const a=ya(r).create();a.rule=this.getClassName();try{if(!e)return a;const r=e.getCurrentRequest();if(!isNaN(r.index)){if(null===r.firstByteDate||o.hasOwnProperty(r.index))return a;const s=t.getBufferTimeDefault(),l=e.getMediaType();if(n.getCurrentBufferLevel(l)>s)return a;const u=Date.now()-r.firstByteDate.getTime();if(r.traces.length>=i.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&u>i.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&r.bytesLoaded<r.bytesTotal)return function(e,t,n){const r=e.getMediaInfo(),a=e.getMediaType(),s=t.traces.reduce((e,t)=>e+t.b[0],0)-t.traces[0].b[0],l=Math.max(t.traces.reduce((e,t)=>e+t.d,0)-t.traces[0].d,1),u=Math.round(8*s/l),d=Number(8*t.bytesTotal/u/1e3).toFixed(2),c=e.getRepresentation(),h=e.getAbrController();if(d<t.duration*i.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||h.isPlayingAtLowestQuality(c))return n;if(!o.hasOwnProperty(t.index)){const i=e.getAbrController(),s=t.bytesTotal-t.bytesLoaded,l=i.getOptimalRepresentationForBitrate(r,u,!0),d=t.representation;s>t.bytesTotal*l.bitrateInKbit/d.bitrateInKbit&&(n.representation=l,n.reason={throughputInKbit:u,message:`[AbandonRequestRule][${a} is asking to abandon and switch to quality to ${l.absoluteIndex}. The measured bandwidth was ${u} kbit/s`},o[t.index]=!0)}return n}(e,r,a)}return a}catch(l){return s.error(l),a}},reset:l},s=(0,C.default)(r).getInstance().getLogger(a),l(),a}Sa.__dashjs_factory_name="AbandonRequestsRule";var wa=x.default.getClassFactory(Sa);function Aa(){const e=this.context,t=(0,$.default)(e).getInstance();let n;return n={getSwitchRequest:function(n){const r=ya(e).create();if(r.rule=this.getClassName(),!n||!n.hasOwnProperty("getDroppedFramesHistory"))return r;const i=n.getDroppedFramesHistory();if(!i)return r;const a=n.getStreamInfo().id,s=n.getMediaInfo(),o=n.getAbrController(),l=i.getFrameHistory(a);if(!l||0===Object.keys(l).length)return r;let u=0,d=0;const c=o.getPossibleVoRepresentationsFilteredBySettings(s,!0);let h=null;for(let e=1;e<c.length;e++){const n=c[e];if(n&&l[n.id]&&(u=l[n.id].droppedVideoFrames,d=l[n.id].totalVideoFrames,d>t.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&u/d>t.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){h=c[e-1];break}}return h&&(r.representation=h,r.reason={droppedFrames:u,message:`[DroppedFramesRule]: Switching to index ${h.absoluteIndex}. Dropped Frames: ${u}, Total Frames: ${d}`}),r}},n}Aa.__dashjs_factory_name="DroppedFramesRule";var Ia=x.default.getClassFactory(Aa);function ka(){const e=this.context,t=(0,$.default)(e).getInstance();let n;return n={getSwitchRequest:function(n){const r=ya(e).create();if(r.rule=this.getClassName(),!n)return r;const i=n.getStreamInfo().id,a=n.getMediaType(),s=n?n.getSwitchRequestHistory():null,o=s?s.getSwitchRequests(i,a):{},l=n.getAbrController(),u=n.getMediaInfo(),d=l.getPossibleVoRepresentationsFilteredBySettings(u,!0);let c=0,h=0;for(let e=0;e<d.length;e++){const n=d[e];if(n&&o[n.id]&&(c+=o[n.id].drops,h+=o[n.id].noDrops,c+h>=t.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&c/h>t.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){r.representation=e>0&&o[n.id].drops>0?d[e-1]:n,r.reason={drops:c,noDrops:h,message:`[SwitchHistoryRule]: Switch to index: ${r.representation.absoluteIndex} samples: ${c+h} drops:  ${c}`};break}}return r}},n}ka.__dashjs_factory_name="SwitchHistoryRule";var _a=x.default.getClassFactory(ka);const Ra="BOLA_STATE_ONE_BITRATE",xa="BOLA_STATE_STARTUP",Ca="BOLA_STATE_STEADY",Da=10;function La(e){e=e||{};const t=this.context,n=e.dashMetrics,r=e.mediaPlayerModel,i=(0,_.default)(t).getInstance(),a=ss(t).getInstance();let s,o,l;function u(e){const t=e.mediaType,n=e.streamId,r=t===A.default.AUDIO?[A.default.AUDIO]:l[n];for(const i in r)l[n]&&l[n].hasOwnProperty(i)&&l[n][i].state===Ca&&(l[n][i].placeholderBuffer=0)}function d(e){const t=e.streamId;for(const n in l[t])if(l[t].hasOwnProperty(n)){const e=l[t][n];e.state!==Ra&&(e.state=xa,c(e))}}function c(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function h(e){try{if(e&&e.metric===k.HTTP_REQUEST&&e.value&&e.value.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){const t=l[e.value._streamId]&&l[e.value._streamId][e.mediaType]?l[e.value._streamId][e.mediaType]:null;t&&t.state!==Ra&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),f(t,e.mediaType))}}catch(t){o.error(t)}}function f(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){const r=n.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),i=y(e,e.currentRepresentation),a=Math.max(0,i-r);e.placeholderBuffer=Math.min(a,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function g(e){if(e&&l[e.streamId]&&l[e.streamId][e.mediaType]){const t=l[e.streamId][e.mediaType];t&&t.state!==Ra&&(t.currentRepresentation=e.newRepresentation)}}function p(e,t,n){const r=n.reduce((e,t,r)=>t>n[e]?r:e,0);if(0===r)return null;const i=Math.max(e,Da+2*t.length),a=(n[r]-1)/(i/Da-1);return{gp:a,Vp:Da/a}}function m(e,t){const i=r.getBufferTimeDefault();if(e.bufferTimeDefault!==i){const r=p(i,e.representations,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){const a=n.getCurrentBufferLevel(t);let s=a+e.placeholderBuffer;s-=Da,s*=r.Vp/e.Vp,s+=Da,e.bufferTimeDefault=i,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,s-a)}}}function y(e,t){return e.Vp*(e.utilities[t.absoluteIndex]+e.gp)}function v(e){if(e&&e.chunk&&e.chunk.representation.mediaInfo&&l[e.streamId]){const t=l[e.streamId][e.chunk.representation.mediaInfo.type];if(t&&t.state!==Ra){const n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.currentRepresentation=e.chunk.representation,f(t,e.chunk.representation.mediaInfo.type)}}}function b(){S()}function E(e,t){const n=t.absoluteIndex,r=t.bandwidth,i=e.utilities[n];let a=0;for(let s=n-1;s>=0;--s)if(e.utilities[s]<e.utilities[n]){const t=e.representations[s].bandwidth,n=e.utilities[s],o=e.Vp*(e.gp+(r*n-t*i)/(r-t));a=Math.max(a,o)}return a}function T(e){if(e&&l[e.streamId]){const t=l[e.streamId][e.mediaType];if(t&&t.state!==Ra){const r=n.getCurrentBufferLevel(e.mediaType);let i;i=t.currentRepresentation.absoluteIndex>0?E(t,t.currentRepresentation):Da;const a=Math.max(0,i-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,a)}}}function S(){l={}}return s={getSwitchRequest:function(e){try{const i=ya(t).create();e.getScheduleController().setTimeToLoadDelay(0),i.rule=this.getClassName(),i.reason=i.reason||{};const s=function(e){const t=e.getMediaType(),n=e.getStreamInfo().id;l[n]||(l={},l[n]={});let i=l[n][t];return i?i.state!==Ra&&m(i,t):(i=function(e){const t={},n=e.getMediaInfo(),i=a.getPossibleVoRepresentationsFilteredBySettings(n,!0);let s=i.map(e=>e.bandwidth).map(e=>Math.log(e));s=s.map(e=>e-s[0]+1);const o=r.getBufferTimeDefault(),l=p(o,i,s);return l?(t.state=xa,t.representations=i,t.utilities=s,t.bufferTimeDefault=o,t.Vp=l.Vp,t.gp=l.gp,t.currentRepresentation=null,c(t)):t.state=Ra,t}(e),l[n][t]=i),i}(e);switch(i.reason.state=s.state,s.state){case Ra:break;case xa:!function(e,t,r){const i=t.getMediaType(),s=t.getThroughputController().getSafeAverageThroughput(i);if(isNaN(s))return;const o=t.getMediaInfo(),l=a.getOptimalRepresentationForBitrate(o,s,!0),u=n.getCurrentBufferLevel(i);e.representation=l,e.reason.throughput=s,r.placeholderBuffer=Math.max(0,E(r,l)-u),r.currentRepresentation=l,!isNaN(r.lastSegmentDurationS)&&u>=r.lastSegmentDurationS&&(r.state=Ca)}(i,e,s);break;case Ca:!function(e,t,r){const i=t.getMediaType(),s=t.getThroughputController(),o=t.getMediaInfo(),l=s.getSafeAverageThroughput(i),u=t.getScheduleController();!function(e,t){const n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){const t=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,t)}}else{const t=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,t)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,m(e,t)}(r,i);const d=n.getCurrentBufferLevel(i);let c=function(e,t){const n=e.representations.length;let r=NaN,i=NaN;for(let a=0;a<n;++a){let n=(e.Vp*(e.utilities[a]-1+e.gp)-t)/e.representations[a].bandwidth;(isNaN(i)||n>=i)&&(i=n,r=a)}return e.representations[r]}(r,d+r.placeholderBuffer);const h=a.getOptimalRepresentationForBitrate(o,l,!0);c.absoluteIndex>r.currentRepresentation.absoluteIndex&&c.absoluteIndex>h.absoluteIndex&&(c=h.absoluteIndex>r.currentRepresentation.absoluteIndex?h:r.currentRepresentation);let f=Math.max(0,d+r.placeholderBuffer-y(r,c));f<=r.placeholderBuffer?(r.placeholderBuffer-=f,f=0):(f-=r.placeholderBuffer,r.placeholderBuffer=0,a.isPlayingAtTopQuality(c)?f=0:u.setTimeToLoadDelay(1e3*f)),e.representation=c,e.reason.throughput=l,e.reason.bufferLevel=d,e.reason.placeholderBuffer=r.placeholderBuffer,e.reason.delay=f,r.currentRepresentation=c}(i,e,s);break;default:!function(e,t,n){o.debug("BOLA ABR rule invoked in bad state.");const r=t.getMediaInfo(),i=t.getMediaType(),s=t.getThroughputController().getSafeAverageThroughput(i);e.representation=a.getOptimalRepresentationForBitrate(r,s,!0),e.reason.state=n.state,e.reason.throughput=s,n.state=xa,c(n)}(i,e,s)}return i}catch(i){return o.error(i),ya(t).create()}},handleNewMediaInfo:function(e){e&&e.streamInfo&&e.type&&l[e.streamInfo.id]&&l[e.streamInfo.id][e.type]&&delete l[e.streamInfo.id][e.type]},reset:function(){S(),i.off(D.default.BUFFER_EMPTY,u,s),i.off(D.default.PLAYBACK_SEEKING,d,s),i.off(D.default.METRIC_ADDED,h,s),i.off(D.default.QUALITY_CHANGE_REQUESTED,g,s),i.off(D.default.FRAGMENT_LOADING_ABANDONED,T,s),i.off(R.default.MEDIA_FRAGMENT_LOADED,v,s),i.off(R.default.SETTING_UPDATED_MAX_BITRATE,b,s),i.off(R.default.SETTING_UPDATED_MIN_BITRATE,b,s)}},o=(0,C.default)(t).getInstance().getLogger(s),S(),i.on(D.default.BUFFER_EMPTY,u,s),i.on(D.default.PLAYBACK_SEEKING,d,s),i.on(D.default.METRIC_ADDED,h,s),i.on(D.default.QUALITY_CHANGE_REQUESTED,g,s),i.on(D.default.FRAGMENT_LOADING_ABANDONED,T,s),i.on(R.default.MEDIA_FRAGMENT_LOADED,v,s),i.on(R.default.SETTING_UPDATED_MAX_BITRATE,b,s),i.on(R.default.SETTING_UPDATED_MIN_BITRATE,b,s),s}La.__dashjs_factory_name="BolaRule";var Ma=x.default.getClassFactory(La);const Na="L2A_STATE_ONE_BITRATE",Pa="L2A_STATE_STARTUP",Oa="L2A_STATE_STEADY",Fa=Math.pow(4,.99);function Ua(e){e=e||{};const t=this.context,n=e.dashMetrics,r=(0,_.default)(t).getInstance();let i,a,s,o;function l(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,e.lastSegmentUrl=""}function u(){for(const e in a)if(a.hasOwnProperty(e)){const t=a[e];t.state!==Na&&(t.state=Pa,l(t))}}function d(e){if(e&&e.chunk&&e.chunk.representation&&e.chunk.representation.mediaInfo){const t=a[e.chunk.representation.mediaInfo.type],n=s[e.chunk.representation.mediaInfo.type];if(t&&t.state!==Na){const r=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||r>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=r,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=r,t.lastSegmentDurationS=e.chunk.duration,t.currentRepresentation=e.chunk.representation,h(t,n)}}}function c(e){if(e&&e.metric===k.HTTP_REQUEST&&e.value&&e.value.type===N.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){const t=a[e.mediaType],n=s[e.mediaType];t&&t.state!==Na&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),h(t,n))}}function h(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function f(e,t){if(e.length!==t.length)return-1;let n=0;for(let r=0;r<e.length;r++)n+=e[r]*t[r];return n}function g(){a={},s={}}return i={getSwitchRequest:function(e){try{const r=ya(t).create();r.rule=this.getClassName();const i=e.getMediaType(),o=e.getScheduleController();if(r.reason=r.reason||{},i===A.default.AUDIO)return r;o.setTimeToLoadDelay(0);const u=function(e){const t=e.getMediaType();let n=a[t];return n||(n=function(e){const t={},n=e.getMediaInfo();return t.state=Pa,t.currentRepresentation=null,(r=n)&&r.type&&(s[r.type]={},s[r.type].w=[],s[r.type].prev_w=[],s[r.type].Q=0,s[r.type].segment_request_start_s=0,s[r.type].segment_download_finish_s=0,s[r.type].B_target=1.5),l(t),t;var r}(e),a[t]=n),n}(e);if(!s[i])return r;switch(r.reason.state=u.state,u.state){case Na:break;case Pa:!function(e,t,r){const i=e.getMediaInfo(),a=e.getMediaType(),o=e.getThroughputController().getSafeAverageThroughput(a);if(isNaN(o))return t;const l=e.getAbrController(),u=l.getOptimalRepresentationForBitrate(i,o,!0),d=n.getCurrentBufferLevel(a,!0),c=s[a],h=l.getPossibleVoRepresentationsFilteredBySettings(i,!0);if(t.representation=u,t.reason.throughput=o,r.currentRepresentation=u,!isNaN(r.lastSegmentDurationS)&&d>=c.B_target){r.state=Oa,c.Q=Fa;for(let e=0;e<h.length;++e)h[e].id===r.currentRepresentation.id?c.prev_w[e]=1:c.prev_w[e]=0}}(e,r,u);break;case Oa:!function(e,t,r){let i=[];const a=e.getThroughputController(),o=e.getMediaType();let l=a.getAverageThroughput(o,A.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),u=n.getCurrentHttpRequest(o),d=null;const c=s[o];if(l<1&&(l=1),u.url===r.lastSegmentUrl||u.type===N.HTTPRequest.INIT_SEGMENT_TYPE)d=r.currentRepresentation;else{let t=r.lastSegmentDurationS,n=1;const a=e.getAbrController(),s=e.getMediaInfo(),o=a.getPossibleVoRepresentationsFilteredBySettings(s,!0);let h=e.getVideoModel().getPlaybackRate();const g=Math.max(Math.pow(4,1),Fa*Math.sqrt(4));for(let e=0;e<o.length;++e){const r=o[e];h*r.bitrateInKbit>l&&(n=-1),c.w[e]=c.prev_w[e]+n*(t/(2*g))*((c.Q+Fa)*(h*r.bitrateInKbit/l))}c.w=function(e){const t=e.length;let n=!1,r=[];for(let l=0;l<t;++l)r[l]=e[l];let i=e.sort(function(e,t){return t-e}),a=0,s=0,o=[];for(let l=0;l<t-1;++l)if(a+=i[l],s=(a-1)/(l+1),s>=i[l+1]){n=!0;break}n||(s=(a+i[t-1]-1)/t);for(let l=0;l<t;++l)o[l]=Math.max(r[l]-s,0);return o}(c.w);for(let e=0;e<o.length;++e)i[e]=c.w[e]-c.prev_w[e],c.prev_w[e]=c.w[e];const p=o.map(e=>e.bandwidth);c.Q=Math.max(0,c.Q-t+t*h*((f(p,c.prev_w)+f(p,i))/l));let m=[];for(let e=0;e<p.length;++e)m[e]=Math.abs(p[e]-f(c.w,p));const y=m.indexOf(Math.min(...m));d=a.getRepresentationByAbsoluteIndex(y,s,!0),d.absoluteIndex>r.currentRepresentation.absoluteIndex&&p[r.currentRepresentation.absoluteIndex+1]<=l&&(d=a.getRepresentationByAbsoluteIndex(r.currentRepresentation.absoluteIndex+1,s,!0)),d.bitrateInKbit>=l&&(c.Q=2*Math.max(Fa,c.Q)),r.lastSegmentUrl=u.url}t.representation=d,r.currentRepresentation=t.representation}(e,r,u);break;default:!function(e,t,n){const r=e.getAbrController(),i=e.getMediaInfo(),a=e.getMediaType(),s=e.getThroughputController().getSafeAverageThroughput(a);t.representation=r.getOptimalRepresentationForBitrate(i,s,!0),t.reason.throughput=s,n.state=Pa,l(n)}(e,r,u)}return r}catch(r){return o.error(r),ya(t).create()}},reset:function(){g(),r.off(R.default.PLAYBACK_SEEKING,u,i),r.off(R.default.MEDIA_FRAGMENT_LOADED,d,i),r.off(R.default.METRIC_ADDED,c,i)}},o=(0,C.default)(t).getInstance().getLogger(i),g(),r.on(R.default.PLAYBACK_SEEKING,u,i),r.on(R.default.MEDIA_FRAGMENT_LOADED,d,i),r.on(R.default.METRIC_ADDED,c,i),i}Ua.__dashjs_factory_name="L2ARule";var za=x.default.getClassFactory(Ua);function Ba(){const e=this.context;let t,n,r,i,a,s,o,l,u;function d(){r=null,i=1,a=100,s=0,o=null,l=null,u="dynamic_weight_selection"}function c(){let e=0;if(r)for(let t=0;t<r.length;t++){let n=r[t];n.state.throughput>e&&(e=n.state.throughput)}return e}function h(e,t,n){let r=e.map((e,r)=>n[r]*Math.pow(e-t[r],2)).reduce((e,t)=>e+t);return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function f(e,t){return h([e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[1,1,1,1])}function g(e,t){for(let n=0;n<r.length;n++){let i=r[n],a=.1;const s=f(i,e);p(i,t,Math.exp(-1*Math.pow(s,2)/(2*Math.pow(a,2))))}}function p(e,t,n){let r=e.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(t[0]-r.throughput)*i[0]*n,r.latency=r.latency+(t[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(t[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(t[3]-r.switch)*i[3]*n}return t={getNextQuality:function(e,t,d,f,p,m,y,v){let b=f,E=d;!function(e,t){if(!r){r=[];const n=t.getPossibleVoRepresentationsFilteredBySettings(e,!0),a=n.map(e=>e.bandwidth);s=Math.min(...a),i=function(e){const t=e.map(e=>Math.pow(e,2)).reduce((e,t)=>e+t);return Math.sqrt(t)}(a),n.forEach(e=>{let t={representation:e,state:{throughput:e.bandwidth/i,latency:0,rebuffer:0,switch:0}};r.push(t)}),l=function(e){let t=[],n=function(e){let t=[];for(let n=0;n<e;n++){let e=[Math.random()*c(),Math.random(),Math.random(),Math.random()];t.push(e)}return t}(Math.pow(e.length,2));t.push(n[0]);let r=[1,1,1,1];for(let o=1;o<e.length;o++){let e=null,i=null;for(let a=0;a<n.length;a++){let s=n[a],o=null;for(let e=0;e<t.length;e++){let n=h(s,t[e],r);(null===o||n<o)&&(o=n)}(null===i||o>i)&&(e=s,i=o)}t.push(e)}let i=null,a=null;for(let o=0;o<t.length;o++){let e=0;for(let n=0;n<t.length;n++)o!==n&&(e+=h(t[o],t[n],r));(null===i||e>i)&&(i=e,a=o)}let s=[];for(s.push(t[a]),t.splice(a,1);t.length>0;){let e=null,n=null;for(let i=0;i<t.length;i++){let a=h(s[0],t[i],r);(null===e||a<e)&&(e=a,n=i)}s.push(t[n]),t.splice(n,1)}return s}(r)}}(t,e);let T=d/i;T>1&&(T=c()),f/=a;let S=r.find(e=>e.representation.id===y.id),w=S.representation.bandwidth*v.getSegmentDuration()/E,A=Math.max(0,w-p);if(p-w<v.getMinBuffer())return n.debug(`Buffer is low for bitrate= ${S.representation.bandwidth} downloadTime=${w} currentBuffer=${p} rebuffer=${A}`),function(e,t){let n=0,i=e;if(r)for(let a=0;a<r.length;a++){let s=r[a];s.representation.bandwidth<e.representation.bandwidth&&s.representation.bandwidth>n&&t>s.representation.bandwidth&&(n=s.representation.bandwidth,i=s)}return i}(S,E).representation;switch(u){case"manual_weight_selection":o=[.4,.4,.4,.4];break;case"random_weight_selection":o=function(e){let t=[],n=Math.sqrt(2/e);for(let r=0;r<4;r++)t.push(Math.random()*n);return o=t,o}(r.length);break;default:!function(e,t,n,i,a,s){o||(o=l[l.length-1]);let u=e.findWeightVector(r,t,n,i,a,s);null!==u&&-1!==u&&(o=u)}(v,b,p,A,E,m)}let I=null,k=null,_=null;for(let i=0;i<r.length;i++){let e=r[i],t=e.state,a=[t.throughput,t.latency,t.rebuffer,t.switch],l=o.slice(),u=v.getNextBufferWithBitrate(e.representation.bandwidth,p,E),c=u<v.getMinBuffer();c&&n.debug(`Buffer is low for bitrate=${e.representation.bandwidth} downloadTime=${w} currentBuffer=${p} nextBuffer=${u}`),(e.representation.bandwidth>d-1e4||c)&&e.representation.bandwidth!==s&&(l[0]=100);let f=h(a,[T,0,0,0],l);(null===I||f<I)&&(I=f,k=e.representation,_=e)}let R=Math.abs(S.representation.bandwidth-_.representation.bandwidth)/i;return g(S,[T,f,A,R]),g(_,[T,0,0,R]),k},reset:function(){d()}},n=(0,C.default)(e).getInstance().getLogger(t),d(),t}Ba.__dashjs_factory_name="LearningAbrController";var ja=x.default.getClassFactory(Ba),qa=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function Ga(){let e,t,n,r,i;function a(){t=null,n=null,r=null,i=null}function s(e,t,n,r){let i=new qa;return i.type=e,i.weights.bitrateReward=t||1,i.weights.bitrateSwitchPenalty=1,i.weights.rebufferPenalty=n||1e3,i.weights.latencyPenalty=[],i.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),i.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),i.weights.playbackSpeedPenalty=r||200,i}function o(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(let a=0;a<i.weights.latencyPenalty.length;a++){let e=i.weights.latencyPenalty[a];if(n<=e.threshold){i.latencyWSum+=e.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,a,o){t=s("segment",e,a,o),n=e,r=a,i=o},logSegmentMetrics:function(e,n,r,i){t&&o(e,n,r,i,t)},getPerSegmentQoe:function(){return t},calculateSingleUseQoe:function(e,t,a,l){let u=null;return n&&r&&i&&(u=s("segment",n,r,i)),u?(o(e,t,a,l,u),u.totalQoe):0},reset:function(){a()}},a(),e}Ga.__dashjs_factory_name="LoLpQoeEvaluator";var Ha=x.default.getClassFactory(Ga);function Va(e){let t,n,r,i,a=e.targetLatency,s=e.bufferMin,o=e.segmentDuration,l=e.qoeEvaluator;function u(){return o}function d(e,t){const n=u();let r;return r=t>n?e-n:e+n-t,r}return t={getMinBuffer:function(){return s},getSegmentDuration:u,getNextBufferWithBitrate:function(e,t,n){return d(t,e*o/n)},getNextBuffer:d,findWeightVector:function(e,t,n,u,c,h){let f=null,g=null,p=null,m=Math.abs(t-i);return e.forEach(e=>{r.forEach(r=>{r[0];let i,u=r[1],y=r[2],v=(r[3],e.representation.bandwidth*o/c),b=d(n,v);i=0===y?10:1/y;let E=i*Math.max(1e-5,v-b);i=0===u?10:1/u;let T=i*e.state.latency,S=l.calculateSingleUseQoe(e.representation.bandwidth,E,T,h);var w;(null===f||S>f)&&(w=b,!(t>a+m)&&w>=s)&&(f=S,g=r,p=e.representation.bandwidth)})}),null===g&&null===p&&(g=-1),i=t,g}},n=[.2,.4,.6,.8,1],r=function(e){let t=e.map(function(e){return[e]}),n=function(t,r,i){if(i===r)return t;let a=t.length;for(let n=0;n<a;n++){let n=t.shift();for(let r=0;r<e.length;r++)t.push(n.concat(e[r]))}return n(t,r,i+1)};return n(t,4,1)}(n),i=0,t}Va.__dashjs_factory_name="LoLpWeightSelector";var Ka=x.default.getClassFactory(Va);function $a(e){let t,n,r,i,a=(e=e||{}).dashMetrics,s=this.context;return n={getSwitchRequest:function(e){try{let n=ya(s).create();n.rule=this.getClassName();let o=e.getMediaInfo().type,l=e.getAbrController();const u=e.getStreamInfo();let d=e.getRepresentation();const c=e.getMediaInfo(),h=a.getCurrentBufferState(o),f=e.getScheduleController(),g=a.getCurrentBufferLevel(o,!0),p=f.getPlaybackController();let m=p.getCurrentLiveLatency();if(o===A.default.AUDIO)return n;m||(m=0);const y=p.getPlaybackRate(),v=e.getThroughputController().getSafeAverageThroughput(o);if(t.debug(`Throughput ${Math.round(v)} kbps`),isNaN(v)||!h)return n;if(l.getAbandonmentStateFor(u.id,o)===k.ABANDON_LOAD)return n;let b=l.getPossibleVoRepresentationsFilteredBySettings(c,!0).map(e=>e.bandwidth),E=e.getRepresentation().fragmentDuration,T=Math.min(...b)/1e3,S=Math.max(...b)/1e3,w=d.bandwidth/1e3,I=a.getCurrentHttpRequest(o,!0),_=(I.tresponse.getTime()-I.trequest.getTime())/1e3,R=_>E?_-E:0;i.setupPerSegmentQoe(E,S,T),i.logSegmentMetrics(w,R,m,y);let x=Ka(s).create({targetLatency:1.5,bufferMin:.3,segmentDuration:E,qoeEvaluator:i});return n.representation=r.getNextQuality(l,c,1e3*v,m,g,y,d,x),n.reason={throughput:v,latency:m},n.priority=ya.PRIORITY.STRONG,f.setTimeToLoadDelay(0),n}catch(n){throw n}},reset:function(){r.reset(),i.reset()}},t=(0,C.default)(s).getInstance().getLogger(n),r=ja(s).create(),i=Ha(s).create(),n}$a.__dashjs_factory_name="LoLPRule";var Ya=x.default.getClassFactory($a);function Wa(e){e=e||{};const t=this.context,n=e.mediaPlayerModel,r=e.customParametersModel,i=e.dashMetrics,a=e.settings,s=(0,_.default)(t).getInstance();let o,l,u,d;function c(){Object.values(A.default.QUALITY_SWITCH_RULES).forEach(e=>{l=h(e,l)}),Object.values(A.default.ABANDON_FRAGMENT_RULES).forEach(e=>{u=h(e,u)}),r.getAbrCustomRules().forEach(function(e){e.type===A.default.RULES_TYPES.QUALITY_SWITCH_RULES&&l.push(e.rule(t).create()),e.type===A.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&u.push(e.rule(t).create())}),0===l.length&&(l.push(Ma(t).create({dashMetrics:i,mediaPlayerModel:n,settings:a})),l.push(ba(t).create({dashMetrics:i})))}function h(e,r){const s=e.charAt(0).toLowerCase()+e.slice(1);return!a.get().streaming.abr.rules[s].active||(o=e,r.filter(e=>e.getClassName()===o).length>0)?a.get().streaming.abr.rules[s].active?r:function(e,t){return e.filter(e=>e.getClassName()!==t)}(r,e):(r.push(function(e){switch(e){case A.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Ma(t).create({dashMetrics:i,mediaPlayerModel:n,settings:a});case A.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return ba(t).create({dashMetrics:i});case A.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return Ta(t).create({dashMetrics:i,settings:a});case A.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return _a(t).create();case A.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return Ia(t).create();case A.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return za(t).create({dashMetrics:i,settings:a});case A.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Ya(t).create({dashMetrics:i});case A.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return wa(t).create({dashMetrics:i,mediaPlayerModel:n,settings:a})}}(e)),r);var o}function f(e){return e.filter(e=>e.representation!==ya.NO_CHANGE)}function g(e){const t={};let n,r,i,a=null;if(0!==e.length){for(t[ya.PRIORITY.STRONG]=null,t[ya.PRIORITY.WEAK]=null,t[ya.PRIORITY.DEFAULT]=null,n=0,r=e.length;n<r;n+=1)i=e[n],i.representation!==ya.NO_CHANGE&&(null===t[i.priority]||t[i.priority].representation!==ya.NO_CHANGE&&i.representation.bitrateInKbit<t[i.priority].representation.bitrateInKbit)&&(t[i.priority]=i);return t[ya.PRIORITY.WEAK]&&t[ya.PRIORITY.WEAK].representation!==ya.NO_CHANGE&&(a=t[ya.PRIORITY.WEAK]),t[ya.PRIORITY.DEFAULT]&&t[ya.PRIORITY.DEFAULT].representation!==ya.NO_CHANGE&&(a=t[ya.PRIORITY.DEFAULT]),t[ya.PRIORITY.STRONG]&&t[ya.PRIORITY.STRONG].representation!==ya.NO_CHANGE&&(a=t[ya.PRIORITY.STRONG]),a}}function p(){c()}return o={clearDataForStream:function(e){[l,u].forEach(t=>{t&&t.length&&t.forEach(t=>t.clearDataForStream&&"function"==typeof t.clearDataForStream&&t.clearDataForStream(e))})},getAbandonFragmentRules:function(){return u},getBestPossibleSwitchRequest:function(e){return e&&g(f(l.filter(t=>{const n=t.getClassName();if(n!==A.default.QUALITY_SWITCH_RULES.BOLA_RULE&&n!==A.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const r=e.getMediaType();return d[r]&&n===A.default.QUALITY_SWITCH_RULES.BOLA_RULE||!d[r]&&n===A.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(t=>t.getSwitchRequest(e))))||ya(t).create()},getBolaState:function(e){return d[e]},getMinSwitchRequest:g,getQualitySwitchRules:function(){return l},handleNewMediaInfo:function(e){l.forEach(t=>t.handleNewMediaInfo&&t.handleNewMediaInfo(e)),u.forEach(t=>t.handleNewMediaInfo&&t.handleNewMediaInfo(e))},initialize:function(){l=[],u=[],d={},c(),s.on(R.default.SETTING_UPDATED_ABR_ACTIVE_RULES,p,o)},reset:function(){[l,u].forEach(e=>{e&&e.length&&e.forEach(e=>e.reset&&e.reset())}),l=[],u=[],d={},s.off(R.default.SETTING_UPDATED_ABR_ACTIVE_RULES,p,o)},setBolaState:function(e,t){d[e]=t},shouldAbandonFragment:function(e){if(!e)return ya(t).create();const n=g(f(u.map(t=>t.shouldAbandon(e))));return n&&(n.reason.forceAbandon=!0),n||ya(t).create()}},o}Wa.__dashjs_factory_name="ABRRulesCollection";const Xa=x.default.getClassFactory(Wa);x.default.updateSingletonFactory(Wa.__dashjs_factory_name,Xa);var Qa=Xa;function Ja(e){let t;const n=(e=e||{}).abrController,r=e.throughputController,i=e.switchRequestHistory,a=e.droppedFramesHistory,s=e.currentRequest,o=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentation():null,u=e.videoModel?e.videoModel:null;function d(){return l?l.mediaInfo:null}return t={getAbrController:function(){return n},getCurrentRequest:function(){return s},getDroppedFramesHistory:function(){return a},getMediaInfo:d,getMediaType:function(){const e=d();return e?e.type:null},getRepresentation:function(){return l},getScheduleController:function(){return o},getStreamInfo:function(){const e=d();return e?e.streamInfo:null},getSwitchRequestHistory:function(){return i},getThroughputController:function(){return r},getVideoModel:function(){return u}},t}Ja.__dashjs_factory_name="RulesContext";var Za=x.default.getClassFactory(Ja);function es(){let e={},t={};const n=this.context,r=(0,$.default)(n).getInstance();return{clearForStream:function(n){delete e[n],delete t[n]},getSwitchRequests:function(t,n){return null!=t&&null!=n&&e[t]&&e[t][n]?e[t][n]:{}},push:function(n){const i=n.currentRepresentation,a=n.newRepresentation;if(i.mediaInfo.streamInfo.id!==a.mediaInfo.streamInfo.id||a.mediaInfo.id!==i.mediaInfo.id)return;const s=i.mediaInfo.streamInfo.id;var o;e[s]||(e[o=s]={},t[o]={});const l=i.mediaInfo.type;e[s][l]||function(n,r){e[n][r]={},t[n][r]=[]}(s,l);const u=n.currentRepresentation.id;e[s][l][u]||function(t,n,r){e[t][n][r]={noDrops:0,drops:0,dropSize:0}}(s,l,u);let d=n.newRepresentation.absoluteIndex-n.currentRepresentation.absoluteIndex,c=d<0?1:0,h=c?-d:0,f=c?0:1;e[s][l][n.currentRepresentation.id].drops+=c,e[s][l][n.currentRepresentation.id].dropSize+=h,e[s][l][n.currentRepresentation.id].noDrops+=f,t[s][l].push({id:n.currentRepresentation.id,noDrop:f,drop:c,dropSize:h});const g=function(e,n){return t[e][n].length>r.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?t[e][n].shift():null}(s,l);g&&function(t,n,r){e[t][n][r.id].drops-=r.drop,e[t][n][r.id].dropSize-=r.dropSize,e[t][n][r.id].noDrops-=r.noDrop}(s,l,g)},reset:function(){e={},t={}}}}es.__dashjs_factory_name="SwitchRequestHistory";var ts=x.default.getClassFactory(es);function ns(){let e={},t={},n={};return{clearForStream:function(r){delete e[r],delete t[r],delete n[r]},getFrameHistory:function(t){return e[t]},push:function(r,i,a){if(!i)return;var s;e[r]||(e[s=r]=[],t[s]=0,n[s]=0);let o=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,l=a&&a.totalVideoFrames?a.totalVideoFrames:0,u=o-t[r];t[r]=o;let d=l-n[r];n[r]=l;const c=e[r];c[i]?(c[i].droppedVideoFrames+=u,c[i].totalVideoFrames+=d):c[i]={droppedVideoFrames:u,totalVideoFrames:d}},reset:function(){e={},t={},n={}}}}ns.__dashjs_factory_name="DroppedFramesHistory";var rs=x.default.getClassFactory(ns);function is(){const e=this.context,t=(0,C.default)(e).getInstance(),n=(0,_.default)(e).getInstance();let r,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v,b,E,T,S;function w(){u={},l={},b&&b.reset(),v&&v.reset(),y=void 0,b=void 0,v=void 0,clearTimeout(d),d=null}function I(e){let t=x(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);return t=function(e){try{return function(e){try{if(!S.get().streaming.cmsd.enabled||!S.get().streaming.cmsd.abr.applyMb)return e;const t=e.filter(e=>{const t=e.mediaInfo.type;let n=p.getMaxBitrate(t);if(t!==A.default.VIDEO||n<0)return!0;const r=e.mediaInfo.streamInfo.id;return n-=l[r][A.default.AUDIO].getRepresentation().bitrateInKbit||0,e.bitrateInKbit<=n});return t.length>0?t:e}catch(t){return i.error(t),e}}(e=function(e){try{if(!S.get().streaming.abr.limitBitrateByPortal)return e;const{elementWidth:t}=h.getVideoElementSize(),n=e.filter(e=>e.mediaInfo.type!==A.default.VIDEO||e.width<=t);return n.length>0?n:e}catch(t){return i.error(t),e}}(e=function(e){try{const t=e.filter(e=>{const t=e.mediaInfo.type,n=e.bitrateInKbit,r=f.getAbrBitrateParameter("maxBitrate",t),i=f.getAbrBitrateParameter("minBitrate",t);return!(r>-1&&n>r||i>-1&&n<i)});return t.length>0?t:e}catch(t){return i.error(t),e}}(e)))}catch(t){return i.error(t),e}}(t),t}function x(e,t){let n=[];if(!e)return n;const r=function(e){try{const t=[];if(e&&t.push(e),!S.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!e.adaptationSetSwitchingCompatibleIds||0===e.adaptationSetSwitchingCompatibleIds.length)return t;const n=l[e.streamInfo.id][e.type].getAllMediaInfos().filter(t=>e.adaptationSetSwitchingCompatibleIds.includes(t.id));return t.concat(n)}catch(t){return[e]}}(e);return r.forEach(e=>{let t=c.getVoRepresentations(e);t&&t.length>0&&(n=n.concat(t))}),n=function(e){let t=null;return e.filter(e=>(t||(t=e.mediaInfo),!isNaN(e.qualityRanking)&&c.areMediaInfosEqual(t,e.mediaInfo))).length===e.length}(i=n)?((a=i).sort((e,t)=>t.qualityRanking-e.qualityRanking),a):function(e){return e.sort((e,t)=>c.areMediaInfosEqual(e.mediaInfo,t.mediaInfo)?isNaN(e.pixelsPerSecond)||isNaN(t.pixelsPerSecond)||e.pixelsPerSecond===t.pixelsPerSecond?e.bandwidth-t.bandwidth:e.pixelsPerSecond-t.pixelsPerSecond:isNaN(e.pixelsPerSecond)||isNaN(t.pixelsPerSecond)||e.pixelsPerSecond===t.pixelsPerSecond?isNaN(e.bitsPerPixel)||isNaN(t.bitsPerPixel)?e.bandwidth-t.bandwidth:t.bitsPerPixel-e.bitsPerPixel:e.pixelsPerSecond-t.pixelsPerSecond),e}(i),n.forEach((e,t)=>{e.absoluteIndex=t}),n=n.filter(n=>{const r=!!t||c.areMediaInfosEqual(n.mediaInfo,e),i=!n||!n.mediaInfo||o.areKeyIdsUsable(n.mediaInfo);return r&&i}),n;var i,a}function L(t){const n=t.request.mediaType,i=t.streamId;if(!(n&&i&&l[i]&&S.get().streaming.abr.autoSwitchBitrate[n]))return;const o=l[i][n];if(!o)return;const f=Za(e).create({abrController:r,streamProcessor:o,currentRequest:t.request,throughputController:E,adapter:c,videoModel:h}),g=a.shouldAbandonFragment(f);g&&g.representation!==ya.NO_CHANGE&&function(e,t,n,r,i){if(r.getFragmentModel().getRequests({state:q.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]){const e=(o=n,u[a=t]&&u[a][o]?u[a][o]:null);e&&(e.state=k.ABANDON_LOAD),v.reset(),P(n,s.getActiveStreamInfo(),i.representation,i.reason),clearTimeout(d),d=setTimeout(()=>{e&&(u[t][n].state=k.ALLOW_LOAD),d=null},S.get().streaming.abandonLoadTimeout)}var a,o}(t,i,n,o,g)}function M(e){e.mediaType===A.default.VIDEO&&(void 0!==y&&b.push(e.streamId,y,h.getPlaybackQuality()),y=e.newRepresentation.id)}function N(e){!F()||e.metric!==k.BUFFER_LEVEL||e.mediaType!==A.default.AUDIO&&e.mediaType!==A.default.VIDEO||function(e,t){try{const n=f.getBufferTimeDefault(),r=n,s=.5*n,o=a.getBolaState(e),l=t>=(o?s:r);a.setBolaState(e,l),l!==o&&(l?i.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):i.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}catch(n){i.error(n)}}(e.mediaType,.001*e.value.level)}function P(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!(t&&t.id&&e&&l&&l[t.id]&&l[t.id][e]&&n))return;const i=l[t.id][e].getRepresentation();i&&n.id===i.id||O(i,n,r)}function O(e,t,r){const a=t.mediaInfo.streamInfo.id,s=t.mediaInfo.type;if(s&&l[a]&&l[a][s]){const o=l[a][s].getStreamInfo(),u=T.getCurrentBufferLevel(s),d=null!==e&&!c.areMediaInfosEqual(e.mediaInfo,t.mediaInfo),h=e?e.bitrateInKbit:0;i.info(`[AbrController]: Switching quality in period ${a} for media type ${s}. Switch from bitrate ${h} to bitrate ${t.bitrateInKbit}. Current buffer level: ${u}. Reason:`+(r?JSON.stringify(r):"/")),n.trigger(R.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:e,newRepresentation:t,reason:r,streamInfo:o,mediaType:s,isAdaptationSetSwitch:d},{streamId:o.id,mediaType:s});const f=E.getAverageThroughput(s);isNaN(f)||m.setSavedBitrateSettings(s,f)}}function F(){return S.get().streaming.abr.rules.bolaRule.active&&S.get().streaming.abr.rules.throughputRule.active}return r={checkPlaybackQuality:function(t,n){try{if(!(t&&l&&l[n]&&l[n][t]))return!1;if(b){const e=h.getPlaybackQuality();e&&b.push(n,y,e)}if(!S.get().streaming.abr.autoSwitchBitrate[t])return!1;const i=l[n][t],s=i.getRepresentation(),o=Za(e).create({abrController:r,throughputController:E,switchRequestHistory:v,droppedFramesHistory:b,streamProcessor:i,adapter:c,videoModel:h}),d=a.getBestPossibleSwitchRequest(o);if(!d||!d.representation)return!1;let f=d.representation;return v.push({currentRepresentation:s,newRepresentation:f}),f.id!==s.id&&(u[n][t].state===k.ALLOW_LOAD||f.absoluteIndex<s.absoluteIndex)&&(O(s,f,d.reason),!0)}catch(s){return i.error(s),!1}},clearDataForStream:function(e){b&&b.clearForStream(e),l[e]&&delete l[e],v&&v.clearForStream(e),u[e]&&delete u[e],a.clearDataForStream(e)},getAbandonmentStateFor:function(e,t){return u[e]&&u[e][t]?u[e][t].state:null},getInitialBitrateFor:function(e){if(e===A.default.TEXT)return NaN;let t=f.getAbrBitrateParameter("initialBitrate",e);if(t>0)return t;let n=NaN;if(m&&m.hasOwnProperty("getSavedBitrateSettings")&&(n=m.getSavedBitrateSettings(e)),!isNaN(n))return n;const r=E.getAverageThroughput(e);return!isNaN(r)&&r>0?r:e===A.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(e,t){const n=I(e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);if(!n||0===n.length)return null;const r=n.reduce((e,t)=>e.bandwidth<t.bandwidth?e:t);if(t<=0)return r;const i=n.filter(e=>e.bitrateInKbit<=t);return i&&0!==i.length?i.reduce((e,t)=>t.absoluteIndex>e.absoluteIndex?t:e):r},getPossibleVoRepresentations:function(e){return x(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:I,getRepresentationByAbsoluteIndex:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return isNaN(e)||e<0?null:I(t,n).find(t=>t.absoluteIndex===e)},handleNewMediaInfo:function(e){a.handleNewMediaInfo(e)},initialize:function(){b=rs(e).create(),v=ts(e).create(),a=Qa(e).create({dashMetrics:T,customParametersModel:g,mediaPlayerModel:f,settings:S}),a.initialize(),n.on(D.default.QUALITY_CHANGE_RENDERED,M,r),n.on(D.default.METRIC_ADDED,N,r),n.on(R.default.LOADING_PROGRESS,L,r)},isPlayingAtLowestQuality:function(e){return I(e.mediaInfo,!0)[0].id===e.id},isPlayingAtTopQuality:function(e){if(!e)return!0;const t=I(e.mediaInfo,!0);return t[t.length-1].id===e.id},registerStreamType:function(e,t){const n=t.getStreamInfo().id;l[n]||(l[n]={}),l[n][e]=t,u[n]||(u[n]={}),u[n][e]={},u[n][e].state=k.ALLOW_LOAD,void 0===a.getBolaState(e)&&a.setBolaState(e,S.get().streaming.abr.rules.bolaRule.active&&!F())},reset:function(){w(),n.off(D.default.QUALITY_CHANGE_RENDERED,M,r),n.off(D.default.METRIC_ADDED,N,r),n.off(R.default.LOADING_PROGRESS,L,r),a&&a.reset()},setConfig:function(e){e&&(e.streamController&&(s=e.streamController),e.throughputController&&(E=e.throughputController),e.domStorage&&(m=e.domStorage),e.mediaPlayerModel&&(f=e.mediaPlayerModel),e.customParametersModel&&(g=e.customParametersModel),e.cmsdModel&&(p=e.cmsdModel),e.dashMetrics&&(T=e.dashMetrics),e.adapter&&(c=e.adapter),e.videoModel&&(h=e.videoModel),e.settings&&(S=e.settings),e.capabilities&&(o=e.capabilities))},setPlaybackQuality:P,setWindowResizeEventCalled:function(e){},unRegisterStreamType:function(e,t){try{l[e]&&l[e][t]&&delete l[e][t],u[e]&&u[e][t]&&delete u[e][t]}catch(n){}}},i=t.getLogger(r),w(),r}is.__dashjs_factory_name="AbrController";const as=x.default.getSingletonFactory(is);x.default.updateSingletonFactory(is.__dashjs_factory_name,as);var ss=as;const os=new Map([[A.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[A.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[A.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[A.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function ls(){let e,t,n,r,i,a,s,o,l,u,d;const c=this.context,h=(0,_.default)(c).getInstance(),f=[];function g(e){r&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?r.playbackRate=e:I(A.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{r.playbackRate=e}))}function p(){return f.length>0}function m(){if(r&&p()&&0===r.playbackRate){const e=document.createEvent("Event");e.initEvent("waiting",!0,!1),r.dispatchEvent(e)}}function y(e,t){r&&r.addEventListener(e,t)}function v(e,t){r&&r.removeEventListener(e,t)}function b(){return r?r.readyState:NaN}function E(){return r?r.buffered:null}function T(){return r?r.clientWidth:NaN}function S(){return r?r.clientHeight:NaN}function w(e,t,n,i,a){if(r)for(let s=0;s<r.textTracks.length;s++)if(r.textTracks[s].kind===e&&(!t||r.textTracks[s].label==t)&&r.textTracks[s].language===n&&r.textTracks[s].isTTML===i&&r.textTracks[s].isEmbedded===a)return r.textTracks[s];return null}function I(e,t){return e===A.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||b()>=e?(t(),null):function(e,t){const n=()=>{v(e,n),t(e)};return y(e,n),{func:n,event:e}}(os.get(e),t)}return e={addEventListener:y,addTextTrack:function(e,t,n,i,a){if(!r)return null;let s=w(e,t,n,i,a);return s||(s=r.addTextTrack(e,t,n),s.isEmbedded=a,s.isTTML=i),s},appendChild:function(e){r&&(r.appendChild(e),void 0!==e.isTTML&&(r.textTracks[r.textTracks.length-1].isTTML=e.isTTML,r.textTracks[r.textTracks.length-1].isEmbedded=e.isEmbedded))},getBufferRange:E,getClientHeight:S,getClientWidth:T,getElement:function(){return r},getEnded:function(){return r?r.ended:null},getPlaybackQuality:function(){if(!r)return null;let e="webkitDroppedFrameCount"in r&&"webkitDecodedFrameCount"in r,t=null;return"getVideoPlaybackQuality"in r?t=r.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDroppedFrameCount+r.webkitDecodedFrameCount,creationTime:new Date}),t},getPlaybackRate:function(){return r?r.playbackRate:null},getPlayedRanges:function(){return r?r.played:null},getReadyState:b,getSource:function(){return r?r.src:null},getTTMLRenderingDiv:function(){return o},getTextTrack:w,getTextTracks:function(){return r?r.textTracks:[]},getTime:function(){return r?isNaN(i)?r.currentTime:i:null},getVideoElementSize:function(){const e=n.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:T()*e,elementHeight:S()*e}},getVideoHeight:function(){return r?r.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(r){const e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(r){const e=r.parentNode.host||r.parentNode;return e?r.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return r?r.videoWidth:NaN},getVttRenderingDiv:function(){return l},initialize:function(){h.on(R.default.PLAYBACK_PLAYING,m,this)},isPaused:function(){return r?r.paused:null},isSeeking:function(){return r?r.seeking||!isNaN(i):null},isStalled:p,pause:function(){r&&(r.pause(),r.autoplay=!1)},play:function(){if(r){r.autoplay=!0;const e=r.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(e=>{"NotAllowedError"===e.name&&h.trigger(R.default.PLAYBACK_NOT_ALLOWED),t.warn(`Caught pending play exception - continuing (${e})`)})}},removeChild:function(e){r&&r.removeChild(e)},removeEventListener:v,reset:function(){clearTimeout(d),h.off(R.default.PLAYBACK_PLAYING,m,this),f.length=0},setConfig:function(e){e&&e.settings&&(n=e.settings)},setCurrentTime:function(e,t){r&&(a&&a.func&&a.event&&v(a.event,a.func),i=e,a=I(A.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(r)if(r.currentTime!==i)try{i=t?function(e){const t=E();let n=e,r=9999999999;if(t)for(let i=0;i<t.length;i++){const a=t.start(i),s=t.end(i),o=Math.abs(a-e),l=Math.abs(s-e);if(e>=a&&e<=s)return e;o<r&&(r=o,n=a),l<r&&(r=l,n=s)}return n}(i):i,isNaN(i)||(r.currentTime=i),i=NaN}catch(e){0===r.readyState&&e.code===e.INVALID_STATE_ERR&&(d=setTimeout(function(){r.currentTime=i,i=NaN},400))}else i=NaN}))},setDisableRemotePlayback:function(e){r&&(r.disableRemotePlayback=e)},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";r=e,r&&(r.preload="auto")},setPlaybackRate:g,setSource:function(e){r&&(e?r.src=e:(r.removeAttribute("src"),r.load()))},setStallState:function(e,t){var i;i=e,t?function(e){if(null!==e&&r&&!r.seeking&&-1===f.indexOf(e)&&(f.push(e),n.get().streaming.buffer.syntheticStallEvents.enabled&&r&&1===f.length&&(n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||b()>=A.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){u=r.playbackRate,g(0,!0);const e=document.createEvent("Event");e.initEvent("waiting",!0,!1),r.dispatchEvent(e)}}(i):function(e){let t=f.indexOf(e);if(null!==e&&(-1!==t&&f.splice(t,1),n.get().streaming.buffer.syntheticStallEvents.enabled&&r&&!p())){const e=()=>{if(g(u||1,n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!r.paused){const e=document.createEvent("Event");e.initEvent("playing",!0,!1),r.dispatchEvent(e)}};n.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?e():(s&&s.func&&s.event&&v(s.event,s.func),s=I(A.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,e))}}(i)},setTTMLRenderingDiv:function(e){o=e,o.style.position="absolute",o.style.display="flex",o.style.overflow="hidden",o.style.pointerEvents="none",o.style.top=0,o.style.left=0},setVttRenderingDiv:function(e){l=e},waitForReadyState:I},t=(0,C.default)(c).getInstance().getLogger(e),n=(0,$.default)(c).getInstance(),i=NaN,e}ls.__dashjs_factory_name="VideoModel";var us=x.default.getSingletonFactory(ls);const ds=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],cs="dashjs_?_bitrate",hs="dashjs_?_settings",fs="localStorage",gs="lastBitrate",ps="lastMediaSettings";function ms(e){e=e||{};const t=this.context,n=e.settings;let r,i,a;function s(e){if(void 0!==a)return a;let t;a=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(n){return i.warn("DOMStorage access denied: "+n.message),a}if(!t||e!==fs)return a;try{t.setItem("1","1"),t.removeItem("1"),a=!0}catch(n){i.warn("DOMStorage is supported, but cannot be used: "+n.message)}return a}function o(){const e=6e5;return Math.round((new Date).getTime()/e)*e}function l(e,t){return s(e)&&n.get().streaming[t+"CachingInfo"].enabled}function u(){if(!n)throw new Error(A.default.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(e){if(u(),!n.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let t=NaN;if(l(fs,gs)){const a=cs.replace(/\?/,e);try{const r=JSON.parse(localStorage.getItem(a))||{},s=(new Date).getTime()-parseInt(r.timestamp,10)>=n.get().streaming.lastBitrateCachingInfo.ttl||!1,o=parseFloat(r.bitrate);isNaN(o)||s?s&&localStorage.removeItem(a):(t=o,i.debug("Last saved bitrate for "+e+" was "+o))}catch(r){return null}}return t},setSavedBitrateSettings:function(e,t){if(l(fs,gs)&&t){const r=cs.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:o()}))}catch(n){i.error(n.message)}}},getSavedMediaSettings:function(e){if(u(),!n.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let t=null;if(l(fs,ps)){const i=hs.replace(/\?/,e);try{const e=JSON.parse(localStorage.getItem(i))||{},r=(new Date).getTime()-parseInt(e.timestamp,10)>=n.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=e.settings,r&&(localStorage.removeItem(i),t=null)}catch(r){return null}}return t},setSavedMediaSettings:function(e,t){if(l(fs,ps)){const r=hs.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:o()}))}catch(n){i.error(n.message)}}}},i=(0,C.default)(t).getInstance().getLogger(r),s(fs)&&ds.forEach(e=>{const t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(n){i.error(n.message)}}}),r}ms.__dashjs_factory_name="DOMStorage";var ys=x.default.getSingletonFactory(ms),vs=n(8986);function bs(){const e=this.context;let t,n,r,i,a,s,o,l,u,d,c,h;function f(e,t,r,a){let s=null;const l=e?h.resolve(e.path):null,u=a||{init:!0,url:l?l.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:t,representation:e};n.debug("Start searching for initialization.");const d=m(u);o.load({request:d,success:function(n){if(u.bytesLoaded=u.range.end,s=i.findInitRange(n),!s)return u.range.end=u.bytesLoaded+u.bytesToLoad,f(e,t,r,u);e.range=s,r(e)},error:function(){r(e)}}),n.debug("Perform init search: "+u.url)}function g(e,t,r,a,s,l){if(r&&(void 0===r.start||void 0===r.end)){const e=r?r.toString().split("-"):null;r=e?{start:parseFloat(e[0]),end:parseFloat(e[1])}:null}s=s||p;let u=null,d=null;const c=!!r,f=e?h.resolve(e.path):null,y={init:!1,url:f?f.url:void 0,range:c?r:{start:0,end:1500},searching:!c,bytesLoaded:l?l.bytesLoaded:0,bytesToLoad:1500,mediaType:t,representation:e},v=m(y);o.load({request:v,success:function(r){const o=y.bytesToLoad,l=r.byteLength;if(y.bytesLoaded=y.range.end-y.range.start,u=i.parse(r),d=u.getBox("sidx"),d&&d.isComplete){const r=d.references;let i,o;if(null!=r&&r.length>0&&(i=1===r[0].reference_type),i){let i,o,l,u,c;n.debug("Initiate multiple SIDX load."),y.range.end=y.range.start+d.size;let h=[],f=0,p=(d.offset||y.range.start)+d.size;const m=function(t){t?(h=h.concat(t),f++,f>=o&&(h.sort(function(e,t){return e.startTime-t.startTime<0?-1:0}),s(h,e,a))):s(null,e,a)};for(i=0,o=r.length;i<o;i++)l=p,u=p+r[i].referenced_size-1,p+=r[i].referenced_size,c={start:l,end:u},g(e,t,c,a,m,y)}else n.debug("Parsing segments from SIDX. representation "+t+" - id: "+e.id+" for range : "+y.range.start+" - "+y.range.end),o=function(e,t){const n=e.references,r=n.length,i=e.timescale;let a=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size;const o=[];let l,u,d,c;for(let h=0;h<r;h++)d=n[h].subsegment_duration,c=n[h].referenced_size,l=new de,l.duration=d,l.startTime=a,l.timescale=i,u=s+c-1,l.mediaRange=s+"-"+u,o.push(l),a+=d,s+=c;return o}(d,y),s(o,e,a)}else{if(d)y.range.start=d.offset||y.range.start,y.range.end=y.range.start+(d.size||o);else{if(l<y.bytesLoaded)return void s(null,e,a);{const e=u.getLastBox();e&&e.size?(y.range.start=e.offset+e.size,y.range.end=y.range.start+o):y.range.end+=o}}g(e,t,y.range,a,null,y)}},error:function(){s(null,e,a)}}),n.debug(`Perform SIDX load for type ${t} : ${y.url} with range ${y.range.start} - ${y.range.end}`)}function p(e,t,n){n({segments:e,representation:t,error:e?void 0:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function m(e){if(!e.url)return;const t=new O;return t.setInfo(e),t}return t={setConfig:function(e){e.baseURLController&&(h=e.baseURLController),e.dashMetrics&&(a=e.dashMetrics),e.mediaPlayerModel&&(s=e.mediaPlayerModel),e.errHandler&&(r=e.errHandler),e.boxParser&&(i=e.boxParser),e.debug&&(n=e.debug.getLogger(t)),e.errors&&(l=e.errors),e.urlUtils&&(c=e.urlUtils),e.constants&&(u=e.constants),e.dashConstants&&(d=e.dashConstants)},initialize:function(){o=On(e).create({errHandler:r,dashMetrics:a,mediaPlayerModel:s,boxParser:i,errors:l,urlUtils:c,constants:u,dashConstants:d})},loadInitialization:function(e,t){return new Promise(n=>{f(e,t,n)})},loadSegments:function(e,t,n){return new Promise(r=>{g(e,t,n,r)})},reset:function(){o&&(o.abort(),o=null)}},t}bs.__dashjs_factory_name="SegmentBaseLoader";var Es=x.default.getSingletonFactory(bs);function Ts(e){let t;e=e||{};let n=new DataView(e.data),r=0;function i(e,t){let i,a,s=!0,o=0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(s=!1),o=4):e.tag>65535?(i=n.getUint16(r),a=n.getUint8(r+2),256*i+a!==e.tag&&(s=!1),o=3):e.tag>255?(n.getUint16(r)!==e.tag&&(s=!1),o=2):(n.getUint8(r)!==e.tag&&(s=!1),o=1),!s&&e.required&&!t)throw new Error("required tag not found");return s&&(r+=o),s}function a(e){let t=1,i=128,a=-1,s=0,o=n.getUint8(r),l=0;for(l=0;l<8;l+=1){if((o&i)===i){s=void 0===e?o&~i:o,a=l;break}i>>=1}for(l=0;l<a;l+=1,t+=1)s=s<<8|255&n.getUint8(r+t);return r+=t,s}return t={getPos:function(){return r},setPos:function(e){r=e},consumeTag:i,consumeTagAndSize:function(e,t){let n=i(e,t);return n&&a(),n},parseTag:function(e){let n;return i(e),n=a(),t[e.parse](n)},skipOverElement:function(e,t){let n,s=i(e,t);return s&&(n=a(),r+=n),s},getMatroskaCodedNum:a,getMatroskaFloat:function(e){let t;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8}return t},getMatroskaUint:function(e){if(e>4)return function(e){const t=Math.floor(Number.MAX_SAFE_INTEGER/256);let i=0;for(let a=0;a<e;a+=1){if(i>t)throw new Error("Value exceeds safe integer limit");i*=256;const e=n.getUint8(r+a);if(i>Number.MAX_SAFE_INTEGER-e)throw new Error("Value exceeds safe integer limit");i+=e}return r+=e,i}(e);let t=0;for(let i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t>>>0},moreData:function(){return r<n.byteLength}},t}Ts.__dashjs_factory_name="EBMLParser";var Ss=x.default.getClassFactory(Ts);function ws(){const e=this.context;let t,n,r,i,a,s,o,l,u;function d(e){const t=new O;return t.setInfo(e),t}return t={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(A.default.MISSING_CONFIG_ERROR);u=e.baseURLController,a=e.dashMetrics,s=e.mediaPlayerModel,i=e.errHandler,l=e.errors,n=e.debug.getLogger(t)},initialize:function(){o=On(e).create({errHandler:i,dashMetrics:a,mediaPlayerModel:s,errors:l})},loadInitialization:function(e,t){return new Promise(r=>{let i=null,a=e?u.resolve(e.path):null,s=e?e.range.split("-"):null,l={range:{start:s?parseFloat(s[0]):null,end:s?parseFloat(s[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:t};n.info("Start loading initialization."),i=d(l),o.load({request:i,success:function(){r(e)},error:function(){r(e)}}),n.debug("Perform init load: "+l.url)})},loadSegments:function(t,i,a){return new Promise(s=>{let c=null,h=t?u.resolve(t.path):null,f=h?h.url:void 0;c=d({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:c,url:f,init:!1,mediaType:i,representation:t}),n.debug("Parsing ebml header"),o.load({request:c,success:function(i){!function(t,i,a,s){if(!t||0===t.byteLength)return void s(null);let l,u,c,h,f=Ss(e).create({data:t}),g=a?a.split("-"):null,p=null,m={url:i,range:{start:g?parseFloat(g[0]):null,end:g?parseFloat(g[1]):null},request:p};for(n.debug("Parse EBML header: "+m.url),f.skipOverElement(r.EBML),f.consumeTag(r.Segment),c=f.getMatroskaCodedNum(),c+=f.getPos(),h=f.getPos();f.moreData()&&!f.consumeTagAndSize(r.Segment.Info,!0);)if(!(f.skipOverElement(r.Segment.SeekHead,!0)||f.skipOverElement(r.Segment.Tracks,!0)||f.skipOverElement(r.Segment.Cues,!0)||f.skipOverElement(r.Void,!0)))throw new Error("no valid top level element found");for(;void 0===l;){let e=f.getMatroskaCodedNum(!0),t=f.getMatroskaCodedNum();e===r.Segment.Info.Duration.tag?l=f[r.Segment.Info.Duration.parse](t):f.setPos(f.getPos()+t)}p=d(m),o.load({request:p,success:function(t){u=function(t,i,a,s){let o,l,u,d,c,h,f,g;for(l=function(t){let n,i,a=[],s=Ss(e).create({data:t});for(s.consumeTagAndSize(r.Segment.Cues);s.moreData()&&s.consumeTagAndSize(r.Segment.Cues.CuePoint,!0);){for(n={},n.CueTime=s.parseTag(r.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];s.moreData()&&s.consumeTag(r.Segment.Cues.CuePoint.CueTrackPositions,!0);){const e=s.getMatroskaCodedNum(),t=s.getPos();if(i={},i.Track=s.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=s.parseTag(r.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(i),s.setPos(t+e)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");a.push(n)}if(0===a.length)throw new Error("mandatory cuepoint not found");return a}(t),u=[],c=0,h=l.length;c<h;c+=1)d=new de,o=0,o=c<l.length-1?l[c+1].CueTime-l[c].CueTime:s-l[c].CueTime,d.duration=o,d.startTime=l[c].CueTime,d.timescale=1e3,f=l[c].CueTracks[0].ClusterPosition+i,g=c<l.length-1?l[c+1].CueTracks[0].ClusterPosition+i-1:a-1,d.mediaRange=f+"-"+g,u.push(d);return n.debug("Parsed cues: "+u.length+" cues."),u}(t,h,c,l),s(u)},error:function(){n.error("Download Error: Cues "+m.url),s(null)}}),n.debug("Perform cues load: "+m.url+" bytes="+m.range.start+"-"+m.range.end)}(i,f,a,function(e){s({segments:e,representation:t,error:e?void 0:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){s({representation:t,error:new G.default(l.SEGMENT_BASE_LOADER_ERROR_CODE,l.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){o&&(o.abort(),o=null)}},r={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},t}ws.__dashjs_factory_name="WebmSegmentBaseLoader";var As=x.default.getSingletonFactory(ws);function Is(e){e=e||{};const t=this.context,n=e.eventBus,r=e.events,i=e.dashMetrics,a=e.mediaPlayerModel,s=e.errHandler,o=e.baseURLController,l=e.debug,u=e.boxParser,d=e.errors;let c,h,f;function g(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return c={initialize:function(){h.initialize(),f.initialize()},getSegmentBaseInitSegment:function(e){return g(e.representation.mimeType)?f.loadInitialization(e.representation,e.mediaType):h.loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return g(e.mimeType)?f.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null):h.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){h.reset(),f.reset()}},h=Es(t).getInstance(),f=As(t).getInstance(),h.setConfig({baseURLController:o,dashMetrics:i,mediaPlayerModel:a,errHandler:s,eventBus:n,events:r,errors:d,debug:l,boxParser:u}),f.setConfig({baseURLController:o,dashMetrics:i,mediaPlayerModel:a,errHandler:s,eventBus:n,events:r,errors:d,debug:l}),c}Is.__dashjs_factory_name="SegmentBaseController";var ks=x.default.getSingletonFactory(Is),_s=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},Rs=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},xs=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},Cs=class{constructor(e){this.valid="/"==e[0],this.path=e.split("/").filter(e=>0!==e.length).map(e=>{let t={name:e},n=e.indexOf("[");if(-1!=n){t.name=e.substring(0,n);let r=e.substring(n+1,e.length-1);this.valid=this.valid&&-1==r.indexOf("[");let i=r.indexOf("=");-1!=i?(t.attribute={name:r.substring(1,i),value:r.substring(i+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(r,10)-1}return t})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return"text()"===this.path[this.path.length-1].name}getMpdTarget(e,t){let n=null,r=e,i=1,a="MPD";for(;i<this.path.length&&null!==r;){n=r;let e=this.path[i];if(a=e.name,i!==this.path.length-1||!a.startsWith("@")&&"text()"!==a){let t=n[a]||[];if(0===t.length&&n[a]&&t.push(n[a]),e.position)r=t[e.position]||null;else if(e.attribute){let n=e.attribute;r=t.filter(e=>e[n.name]==n.value)[0]||null}else r=Array.isArray(t)?t[0]:t}i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:"text()"===a?{name:"__text",leaf:r,target:r}:{name:a,leaf:r,target:t?n:r}}},Ds=class{constructor(e,t,n){this.action=e,this.xpath=t,this.value=n,this.position=null}getMpdTarget(e){let t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}};function Ls(){let e,t;const n=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(I.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(e){return e&&e[I.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(I.default.ORIGINAL_PUBLISH_TIME)?new Date(e[I.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(e){return e?(e.__children||[]).map(e=>{const n=e.tagName;if("add"!==n&&"remove"!==n&&"replace"!==n)return t.warn(`Ignoring node of invalid action: ${n}`),null;let r=e.sel;if("add"===n&&e.type){if(!e.type.startsWith("@"))return t.warn(`Ignoring add action for prefixed namespace declaration: ${e.type}=${e.__text}`),null;r=`${r}/${e.type}`}let i=new Cs(r);if(!i.isValid())return t.warn(`Ignoring action with invalid selector: ${n} - ${r}`),null;let a=null;i.findsAttribute()||i.findsTextReplace()?a=e.__text||"":"remove"!==n&&(a=e.__children.reduce((e,t)=>{let n=t.tagName;return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t)),e},{}));let s=new Ds(n,i,a);return"add"===n&&(s.position=e.pos),s}).filter(e=>!!e):[]},getPublishTime:function(e){return e&&e.hasOwnProperty(I.default.PUBLISH_TIME)?new Date(e[I.default.PUBLISH_TIME]):null}},t=(0,C.default)(n).getInstance().getLogger(e),e}Ls.__dashjs_factory_name="PatchManifestModel";var Ms=x.default.getSingletonFactory(Ls);function Ns(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"!=typeof TextDecoder){const n=new TextDecoder("utf-8").decode(e);if(t){const e=n.indexOf("\0");return-1!==e?n.substring(0,e):n}return n.replace(/\0/g,"")}const n=e.length;let r,i,a,s="",o=0;for(;o<n;){if(r=e[o++],0===r&&t)return s;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=e[o++],s+=String.fromCharCode((31&r)<<6|63&i);break;case 14:i=e[o++],a=e[o++],s+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&a)}}return s}function Ps(e){return function(e,t,n,r){const i=(a=e)instanceof ArrayBuffer?a:a.buffer;var a;let s=1;"BYTES_PER_ELEMENT"in r&&(s=r.BYTES_PER_ELEMENT);const o=(c=e)&&c.buffer instanceof ArrayBuffer&&void 0!==c.byteLength&&void 0!==c.byteOffset?e.byteOffset:0,l=(o+e.byteLength)/s,u=(o+t)/s,d=Math.floor(Math.max(0,Math.min(u,l)));var c;return new r(i,d,Math.floor(Math.min(d+Math.max(n,0),l))-d)}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,Uint8Array)}function Os(e){return"PRIV"===e.type?function(e){if(e.size<2)return;const t=Ns(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}(e):"W"===e.type[0]?function(e){if("WXXX"===e.type){if(e.size<2)return;let t=1;const n=Ns(e.data.subarray(t),!0);t+=n.length+1;const r=Ns(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Ns(e.data);return{key:e.type,info:"",data:t}}(e):"APIC"===e.type?function(e){const t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.size<2)return;if(3!==e.data[0])return;const n=e.data.subarray(1).indexOf(0);if(-1===n)return;const r=Ns(Ps(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return;const s=Ns(Ps(e.data,3+n,a));let o;return o="--\x3e"===r?Ns(Ps(e.data,4+n+a)):(l=e.data.subarray(4+n+a))instanceof ArrayBuffer?l:0==l.byteOffset&&l.byteLength==l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer,t.mimeType=r,t.pictureType=i,t.description=s,t.data=o,t;var l}(e):function(e){if(e.size<2)return;if("TXXX"===e.type){let t=1;const n=Ns(e.data.subarray(t),!0);t+=n.length+1;const r=Ns(e.data.subarray(t));return{key:e.type,info:n,data:r}}const t=Ns(e.data.subarray(1));return{key:e.type,info:"",data:t}}(e)}function Fs(e,t){let n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3],n}function Us(e){const t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=Fs(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}}function zs(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Bs(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function js(){let e,t,n,r,i,a;const s=this.context;function o(e,n){const i=n?n.index:0,a=t.getAdaptationsForType(r[i].mpd.manifest,i,e);if(!a||0===a.length)return null;if(a.length>1&&n)for(let r=0,o=a.length;r<o;r++)if(s=a[r],t.getRolesForAdaptation(s).filter(function(e){return e.schemeIdUri===A.default.DASH_ROLE_SCHEME_ID&&e.value===I.default.MAIN})[0])return a[r];var s;return a[0]}function l(e,n,r,a,s,o){let l,u,d,c,h,f,g=[];if(!a||0===a.length)return[];const y=t.getAdaptationsForPeriod(n);for(c=0,f=a.length;c<f;c++)if(l=a[c],d=t.getIndexForAdaptation(l,e,r.index),u=p(y[d]),o){let e=u.accessibility.length;for(h=0;h<e;h++){if(!u)continue;let e=u.accessibility[h];if(e.schemeIdUri===i.ACCESSIBILITY_CEA608_SCHEME)if(e.value&&""!==e.value){let t=e.value.split(";");if("CC"===t[0].substring(0,2))for(h=0;h<t.length;h++)u||(u=p.call(this,y[d])),m(u,t[h].substring(0,3),t[h].substring(4)),g.push(u),u=null;else for(h=0;h<t.length;h++)u||(u=p.call(this,y[d])),m(u,"CC"+(h+1),t[h]),g.push(u),u=null}else m(u,i.CC1,"eng"),g.push(u),u=null}}else s===i.IMAGE?(u.type=i.IMAGE,g.push(u),u=null):u&&g.push(u);return g}function u(e){const n=d(e);return t.getRegularPeriods(n)}function d(e){const n=h(e);return t.getMpd(n)}function c(){r=[]}function h(e){return e||(r.length>0?r[0].mpd.manifest:null)}function f(e){try{const n=g(e.streamInfo,r),i=t.getAdaptationsForPeriod(n);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&i?i[e.index]:null}catch(n){return null}}function g(e,t){const n=t.length;for(let r=0;r<n;r++){let n=t[r];if(e&&e.id===n.id)return n}return null}function p(e){if(!e)return null;let n=new _s;const r=e.period.mpd.manifest.Period[e.period.index].AdaptationSet[e.index];return n.id=e.id,n.index=e.index,n.type=e.type,n.streamInfo=y(e.period),n.representationCount=t.getRepresentationCount(r),n.labels=t.getLabelsForAdaptation(r),n.lang=t.getLanguageForAdaptation(r),n.segmentAlignment=t.getSegmentAlignment(r),n.subSegmentAlignment=t.getSubSegmentAlignment(r),n.viewpoint=t.getViewpointForAdaptation(r),n.accessibility=t.getAccessibilityForAdaptation(r),n.accessibility.filter(function(e){if(e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==a)return!0})[0]&&(n.embeddedCaptions=!0),n.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(r),0===n.audioChannelConfiguration.length&&r.Representation&&r.Representation.length>0&&(n.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(r.Representation[0])),n.roles=t.getRolesForAdaptation(r),n.codec=t.getCodec(r),n.mimeType=t.getMimeType(r),n.contentProtection=t.getContentProtectionByAdaptation(r),n.bitrateList=t.getBitrateListForAdaptation(r),n.selectionPriority=t.getSelectionPriority(r),n.contentProtection&&n.contentProtection.length>0&&(n.contentProtection=function(e,n){if(!e||!e.length||!n)return e;const r=t.getContentProtectionByManifest(n);if(!r||!r.length)return e;const i=r.reduce((e,t)=>(t.refId&&e.set(t.refId,t),e),new Map);return e.map(e=>{if(e.ref){const t=i.get(e.ref);t&&e.mergeAttributesFromReference(t)}return e})}(n.contentProtection,e.period.mpd.manifest),n.contentProtection=function(e){const t=e.map(e=>e.cencDefaultKid).filter(e=>null!==e);if(t.length){const n=t[0];e.forEach(e=>{e.keyId=n})}return e}(n.contentProtection),n.normalizedKeyIds=function(e){const t=new Set;return e.forEach(e=>{e.cencDefaultKid&&"string"==typeof e.cencDefaultKid&&t.add(e.cencDefaultKid.replace(/-/g,"").toLowerCase())}),t}(n.contentProtection)),n.isText=t.getIsText(r),n.essentialProperties=t.getCombinedEssentialPropertiesForAdaptationSet(r),n.supplementalProperties=t.getCombinedSupplementalPropertiesForAdaptationSet(r),n.isFragmented=t.getIsFragmented(r),n.isEmbedded=!1,n.adaptationSetSwitchingCompatibleIds=function(e){if(!e||!e.supplementalProperties)return[];let t=[];const n=e.supplementalProperties.filter(e=>e.schemeIdUri===I.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return n&&n.length>0&&(t=n[0].value.toString().split(",").map(e=>e)),t}(n),n}function m(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=i.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,e.lang=ei(n),e.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function y(e){let n=new Rs;return n.id=e.id,n.index=e.index,n.start=e.start,n.duration=e.duration,n.manifestInfo=function(e){let n=new xs;return n.dvrWindowSize=e.timeShiftBufferDepth,n.loadedTime=e.manifest.loadedTime,n.availableFrom=e.availabilityStartTime,n.minBufferTime=e.manifest.minBufferTime,n.maxFragmentDuration=e.maxSegmentDuration,n.duration=t.getDuration(e.manifest),n.isDynamic=t.getIsDynamic(e.manifest),n.serviceDescriptions=t.getServiceDescriptions(e.manifest),n.protocol=e.manifest.protocol,n}(e.mpd),n.isLast=1===e.mpd.manifest.Period.length||Math.abs(n.start+n.duration-n.manifestInfo.duration)<1,n.isEncrypted=e.isEncrypted,n}function v(){if(!i)throw new Error("setConfig function has to be called previously")}function b(e){return r.length>0?r[0].mpd.manifest.Period[e]:null}function E(e,t,n){let r,i,a,s,o,l;if(e)for(i=e.AdaptationSet,o=0;o<i.length;o+=1)for(r=i[o],s=r.Representation,l=0;l<s.length;l+=1)if(a=s[l],t===a.id)return n?l:a;return null}return e={applyPatchToManifest:function(e,t){n.getPatchOperations(t).forEach(t=>{let n=t.getMpdTarget(e);if(null===n)return;let{name:r,target:i,leaf:a}=n;if(t.xpath.findsAttribute()||"__text"===r){switch(t.action){case"add":case"replace":i[r]=t.value;break;case"remove":delete i[r]}return}let s=(i[r]||[]).indexOf(a),o="prepend"===t.position||"before"===t.position;if("remove"===t.action||"replace"===t.action)if(Array.isArray(i[r])){if(-1!=s){let e=i[r];e.splice(s,1),e.length>0?i[r]=e:delete i[r]}}else delete i[r];"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach(e=>{let n=t.value[e],a=i[e]||[];if(0===a.length&&i[e]&&a.push(i[e]),0===a.length)a=n;else{let i=a.length;i=e==r&&-1!=s?s+(o?0:1)+("replace"===t.action?-1:0):o?0:a.length,a.splice.apply(a,[i,0].concat(n))}i[e]=a})})},areMediaInfosEqual:function(e,t){if(!e||!t)return!1;const n=e.id===t.id,r=e.codec===t.codec,i=JSON.stringify(e.viewpoint)===JSON.stringify(t.viewpoint),a=e.lang===t.lang,s=JSON.stringify(e.roles)===JSON.stringify(t.roles),o=JSON.stringify(e.accessibility)===JSON.stringify(t.accessibility),l=JSON.stringify(e.audioChannelConfiguration)===JSON.stringify(t.audioChannelConfiguration);return n&&r&&i&&a&&s&&o&&l},getAllMediaInfoForType:function(e,n,a){let s=r,o=a,d=[];if(o)v(),s=u(o);else{if(!(r.length>0))return d;o=r[0].mpd.manifest}const c=g(e,s);let h=t.getAdaptationsForType(o,e?e.index:null,n);return d=l(o,c,e,h,n),n===i.TEXT&&(h=t.getAdaptationsForType(o,e?e.index:null,i.VIDEO),d=d.concat(l(o,c,e,h,n,!0))),d},getAvailabilityStartTime:function(e){const n=d(e);return t.getAvailabilityStartTime(n)},getBandwidthForRepresentation:function(e,t){let n;return n=E(b(t),e),n?n.bandwidth:null},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getCodec:function(e,n,r){return t.getCodec(e,n,r)},getContentSteering:function(e){return t.getContentSteering(e)},getDuration:function(e){const n=h(e);return t.getDuration(n)},getEssentialPropertiesForAdaptationSet:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(n){return[]}},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(n){return[]}},getEvent:function(e,t,n,r){try{if(!e||!t||isNaN(n)||!r)return null;const i=e.scheme_id_uri,a=e.value;if(!t[i+"/"+a])return null;const s=new rt,o=e.timescale||1,l=r.adaptation.period.start,u=t[i+"/"+a],d=isNaN(r.presentationTimeOffset)?isNaN(u.presentationTimeOffset)?0:u.presentationTimeOffset:r.presentationTimeOffset;let c,h=e.presentation_time_delta/o;c=0===e.version?l+n-d+h:l-d+h;const f=e.event_duration/o,g=e.id,p=e.message_data;return s.eventStream=u,s.eventStream.value=a,s.eventStream.timescale=o,s.duration=f,s.id=g,s.calculatedPresentationTime=c,s.messageData=p,s.presentationTimeDelta=h,s.parsedMessageData=i===A.default.ID3_SCHEME_ID_URI?function(e){let t=0;const n=[];for(;Bs(e,t);){const r=Fs(e,t+6);e[t+5]>>6&1&&(t+=10),t+=10;const i=t+r;for(;t+10<i;){const r=Us(e.subarray(t)),i=Os(r);i&&n.push(i),t+=r.size+10}zs(e,t)&&(t+=10)}return n}(p):null,s}catch(i){return null}},getEventsFor:function(e,n,i){let a=[];if(r.length>0){const s=r[0].mpd.manifest;if(e instanceof Rs){const n=g(e,r);a=t.getEventsForPeriod(n)}else if(e instanceof _s){const n=g(i,r);a=t.getEventStreamForAdaptationSet(s,f(e),n)}else if(e instanceof ht){const e=g(i,r);a=t.getEventStreamForRepresentation(s,n,e)}}return a},getFramerate:function(e){return t.getFramerate(e)},getIndexForRepresentation:function(e,t){return function(e,t){const n=E(e,t,!0);return null!==n?n:-1}(b(t),e)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(e){const n=h(e);return t.getIsDynamic(n)},getIsPatch:function(e){return n.getIsPatch(e)},getIsTextTrack:function(e){return t.getIsText(e)},getIsTypeOf:function(e,n){return t.getIsTypeOf(e,n)},getLocation:function(e){return t.getLocation(e)},getMainAdaptationForType:o,getManifestUpdatePeriod:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.getManifestUpdatePeriod(e,n)},getMediaInfoForType:function(e,n){if(0===r.length||!e)return null;let i=g(e,r);if(!i)return null;const a=t.getAdaptationsForPeriod(i);let s=o(n,e);return s?p(a[t.getIndexForAdaptation(s,r[0].mpd.manifest,e.index)]):null},getMpd:d,getPatchLocation:function(e){const n=t.getPatchLocation(e),r=t.getPublishTime(e);return n&&0!==n.length&&r?n.filter(e=>isNaN(e.ttl)||r.getTime()+e.ttl>(new Date).getTime()):[]},getPeriodById:function(e){if(!e||0===r.length)return null;const t=r.filter(t=>t.id===e);return t&&t.length>0?t[0]:null},getProducerReferenceTimes:function(e,n){let i,a;const s=g(e,r);return i=n?n.id:null,r.length>0&&s&&(a=i?t.getAdaptationForId(i,r[0].mpd.manifest,s.index):t.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,s.index)),a?t.getProducerReferenceTimesForAdaptation(a):[]},getPublishTime:function(e){return t.getPublishTime(e)},getRealAdaptation:function(e,n){let i,a;const s=g(e,r);return i=n?n.id:null,r.length>0&&s&&(a=i?t.getAdaptationForId(i,r[0].mpd.manifest,s.index):t.getAdaptationForIndex(n?n.index:null,r[0].mpd.manifest,s.index)),a},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,r[0].mpd.manifest)},getRegularPeriods:u,getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getStreamsInfo:function(e,t){const n=[];let i=r;if(e&&(v(),i=u(e)),i.length>0){(!t||t>i.length)&&(t=i.length);for(let e=0;e<t;e++)n.push(y(i[e]))}return n},getSuggestedPresentationDelay:function(){const e=r.length>0?r[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getSupplementalCodecs:function(e){const t=e[I.default.SUPPLEMENTAL_CODECS];return t?t.split(" ").map(t=>e.mimeType+';codecs="'+t+'"'):[]},getUTCTimingSources:function(){const e=h();return t.getUTCTimingSources(e)},getVoRepresentations:function(e){let n;const r=f(e);return n=t.getRepresentationsForAdaptation(r,e),n},isPatchValid:function(e,r){let i=t.getId(e),a=n.getMpdId(r),s=t.getPublishTime(e),o=n.getPublishTime(r),l=n.getOriginalPublishTime(r);return!!(i&&a&&i==a&&s&&l&&s.getTime()==l.getTime()&&o&&s.getTime()<o.getTime())},reset:c,setConfig:function(e){e&&(e.constants&&(i=e.constants),e.cea608parser&&(a=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;v(),r=u(e)}},t=pt(s).getInstance(),n=Ms(s).getInstance(),c(),e}js.__dashjs_factory_name="DashAdapter";var qs=x.default.getSingletonFactory(js);class Gs{static round10(e,t){return n="round",r=e,void 0===(i=t)||0==+i?Math[n](r):(i=+i,null===(r=+r)||isNaN(r)||"number"!=typeof i||i%1!=0?NaN:(r=r.toString().split("e"),+((r=(r=Math[n](+(r[0]+"e"+(r[1]?+r[1]-i:-i)))).toString().split("e"))[0]+"e"+(r[1]?+r[1]+i:i))));var n,r,i}}var Hs=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Vs=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},Ks=class{constructor(){this.t=null,this.level=null}},$s=class{constructor(){this.target=null,this.state=k.BUFFER_EMPTY}},Ys=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},Ws=class{constructor(){this.time=null,this.droppedFrames=null}};class Xs{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class Qs{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Js{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var Zs=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},eo=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function to(e){const t=(e=e||{}).settings;let n,r,i=this.context,a=(0,_.default)(i).getInstance();function s(){a.trigger(R.default.METRICS_CHANGED)}function o(e){a.trigger(R.default.METRIC_CHANGED,{mediaType:e}),s()}function l(e,t,n){a.trigger(R.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),o(e)}function u(e,t,n){a.trigger(R.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),o(e)}function d(e,t){let n=null;return e?(r.hasOwnProperty(e)?n=r[e]:t||(n=new Hs,r[e]=n),n):n}function c(e,n,r){let i=d(e);null!==i&&(i[n].push(r),i[n].length>t.get().streaming.metrics.maxListDepth&&i[n].shift())}function h(e,t,n){c(e,t,n),u(e,t,n)}return n={addBufferLevel:function(e,t,n){let r=new Ks;r.t=t,r.level=n,h(e,k.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){let r=new $s;r.target=n,r.state=t,h(e,k.BUFFER_STATE,r)},addDVBErrors:function(e){h(A.default.STREAM,k.DVB_ERRORS,e)},addDVRInfo:function(e,t,n,r){let i=new Ys;i.time=t,i.range=r,i.manifestInfo=n,h(e,k.DVR_INFO,i)},addDroppedFrames:function(e,t){let n=new Ws,r=d(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||h(e,k.DROPPED_FRAMES,n))},addHttpRequest:function e(t,n,r,i){let a=new N.HTTPRequest;n.url&&n.url!==t.url&&(e({mediaType:t.mediaType,type:t.type,url:t.url,serviceLocation:null,range:t.range,startDate:t.startDate,firstByteDate:null,endDate:null,duration:t.duration,fileLoaderType:t.fileLoaderType,resourceTimingValues:t.resourceTimingValues},{url:null,status:null,headers:null},null,i),a.actualurl=n.url),a.tcpid=null,a.type=t.type,a.url=t.url,a.range=t.range||null,a.trequest=t.startDate,a.tresponse=t.firstByteDate,a.responsecode=n.status,a.cmsd=i,a._tfinish=t.endDate,a._stream=t.mediaType,a._mediaduration=t.duration,a._responseHeaders="";for(const s in n.headers)a._responseHeaders+=s+": "+n.headers[s]+"\r\n";a._serviceLocation=t.serviceLocation||null,a._fileLoaderType=t.fileLoaderType,a._resourceTimingValues=t.resourceTimingValues,a._streamId=t&&t.representation&&t.representation.mediaInfo&&t.representation.mediaInfo.streamInfo?t.representation.mediaInfo.streamInfo.id:null,r?r.forEach(e=>{!function(e,t,n,r){let i=new N.HTTPRequestTrace;i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n}(a,e.s,e.d,e.b,e.t)}):(delete a.interval,delete a.trace),h(t.mediaType,k.HTTP_REQUEST,a)},addManifestUpdate:function(e,t,n,r){let i=new Xs;i.mediaType=e,i.type=t,i.requestTime=n,i.fetchTime=r,c(A.default.STREAM,k.MANIFEST_UPDATE,i),u(e,k.MANIFEST_UPDATE,i)},addManifestUpdateRepresentationInfo:function(e,t,n){if(e&&e.representationInfo){const r=new Js;r.id=t?t.id:null,r.index=t?t.index:null,r.mediaType=n,r.startNumber=t?t.startNumber:null,r.presentationTimeOffset=t?t.presentationTimeOffset:null,e.representationInfo.push(r),l(e.mediaType,k.MANIFEST_UPDATE_TRACK_INFO,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){if(e){let a=new Qs;a.id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),l(e.mediaType,k.MANIFEST_UPDATE_STREAM_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach(e=>{e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,h(A.default.STREAM,k.PLAY_LIST,e)},addRepresentationSwitch:function(e,t,n,r,i){let a=new Vs;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,h(e,k.TRACK_SWITCH,a)},addRequestsQueue:function(e,t,n){let r=new eo;r.loadingRequests=t,r.executedRequests=n,d(e).RequestsQueue=r,u(e,k.REQUESTS_QUEUE,r)},addSchedulingInfo:function(e,t,n,r,i,a,s,o,l){let u=new Zs;u.mediaType=e,u.t=t,u.type=n,u.startTime=r,u.availabilityStartTime=i,u.duration=a,u.bandwidth=s,u.range=o,u.state=l,h(e,k.SCHEDULING_INFO,u)},clearAllCurrentMetrics:function(){r={},s()},clearCurrentMetricsForType:function(e){delete r[e],o(e)},getMetricsFor:d,updateManifestUpdateInfo:function(e,t){if(e){for(let n in t)e[n]=t[n];l(e.mediaType,k.MANIFEST_UPDATE,e)}}},r={},n}to.__dashjs_factory_name="MetricsModel";var no=x.default.getSingletonFactory(to);function ro(e){e=e||{};const t=this.context;let n,r,i,a,s=e.metricsModel;function o(e){const t=s.getMetricsFor(e,!0);if(!t)return null;const n=t.HttpList;let r,i=null;if(!n||n.length<=0)return null;for(r=n.length-1;r>=0;){if(n[r].responsecode){i=n[r];break}r--}return i}function l(e){const t=s.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function u(e,t){if(!e)return null;const n=e[t];return n&&0!==n.length?n[n.length-1]:null}return n={getCurrentRepresentationSwitch:function(e){return u(s.getMetricsFor(e,!0),k.TRACK_SWITCH)},getCurrentBufferState:function(e){return u(s.getMetricsFor(e,!0),k.BUFFER_STATE)},getCurrentBufferLevel:function(e){const t=u(s.getMetricsFor(e,!0),k.BUFFER_LEVEL);return t?Gs.round10(t.level/1e3,-3):0},getCurrentHttpRequest:o,getHttpRequests:l,getCurrentDroppedFrames:function(){return u(s.getMetricsFor(A.default.VIDEO,!0),k.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return u(s.getMetricsFor(e,!0),k.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return u(e?s.getMetricsFor(e,!0):s.getMetricsFor(A.default.VIDEO,!0)||s.getMetricsFor(A.default.AUDIO,!0),k.DVR_INFO)},getCurrentManifestUpdate:function(){return u(s.getMetricsFor(A.default.STREAM),k.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;let n={},r=o(e);r&&(n=Ge.default.parseHttpHeaders(r._responseHeaders));const i=n[t.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;let t,n,r,i={};for(t=l(A.default.STREAM),r=t.length-1;r>=0;r--)if(n=t[r],n.type===N.HTTPRequest.MPD_TYPE){i=Ge.default.parseHttpHeaders(n._responseHeaders);break}const a=i[e.toLowerCase()];return void 0===a?null:a},addRepresentationSwitch:function(e,t,n,r,i){s.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){s.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){const t=this.getCurrentManifestUpdate();s.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){const t=this.getCurrentManifestUpdate();s.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){const n=this.getCurrentManifestUpdate();s.addManifestUpdateRepresentationInfo(n,e,t)}},addManifestUpdate:function(e){s.addManifestUpdate(A.default.STREAM,e.type,e.startDate,e.endDate)},addHttpRequest:function(e,t,n,r,i,a){const o={status:n,headers:r,url:t};s.addHttpRequest(e,o,i,a)},addSchedulingInfo:function(e,t){s.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.bandwidth,e.range,t)},addRequestsQueue:function(e,t,n){s.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){s.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){s.addBufferState(e,t,n)},addDroppedFrames:function(e){s.addDroppedFrames(A.default.VIDEO,e)},addPlayList:function(){a&&(s.addPlayList(a),a=null)},addDVBErrors:function(e){s.addDVBErrors(e)},createPlaylistMetrics:function(e,t){a=new Ie,a.start=new Date,a.mstart=e,a.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===r&&(r=!1,i=new ke,i.representationid=e,i.start=new Date,i.mstart=t,i.playbackspeed=null!==n?n.toString():null)},updatePlayListTraceMetrics:function(e){if(i)for(let t in i)i[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===r&&a&&i&&i.start){const n=i.start;i.duration=e.getTime()-n.getTime(),i.stopreason=t,a.trace.push(i),r=!0}},clearAllCurrentMetrics:function(){s.clearAllCurrentMetrics()}},s=s||no(t).getInstance({settings:e.settings}),r=!0,i=null,a=null,n}ro.__dashjs_factory_name="DashMetrics";var io=x.default.getSingletonFactory(ro);function ao(){const e=this.context,t=(0,_.default)(e).getInstance(),n=(0,$.default)(e).getInstance();let r,i,a,s;function o(e){s=e}function l(e,t,n,r){let i,a=t.adaptation.period.mpd;const s=a.availabilityStartTime;if(r)i=n&&a.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(s.getTime()+1e3*(e+a.timeShiftBufferDepth)):a.availabilityEndTime;else if(n){const n=t.availabilityTimeOffset;i=new Date(s.getTime()+1e3*(e-n))}else i=s;return i}function u(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*s)/1e3}function d(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function c(e){const t={start:NaN,end:NaN},n=e[0].getAdapter().getRegularPeriods()[0],r=u(new Date,n);if(!e||0===e.length)return{range:t,now:r};e.forEach(e=>{let n=e.getCurrentRepresentationForType(A.default.VIDEO);if(n||(n=e.getCurrentRepresentationForType(A.default.AUDIO)),!n){const t=e.getAdapter(),r=t.getMediaInfoForType(e.getStreamInfo(),A.default.VIDEO)||t.getMediaInfoForType(e.getStreamInfo(),A.default.AUDIO);n=t.getVoRepresentations(r)[0]}let a={start:NaN,end:NaN};if(n)if(n.segmentInfoType===I.default.SEGMENT_TIMELINE)a=function(e){const t=e.adaptation.period.mpd.manifest.Period[e.adaptation.period.index].AdaptationSet[e.adaptation.index],n=i.getRepresentationFor(e.index,t),r=n.SegmentTemplate||n.SegmentList,a=r.SegmentTimeline,s=r.timescale,o=a.S,l={start:0,end:0},u=o[0].t,c=!isNaN(u),h=c?u:0;let f,g,p,m,y=0;for(c&&(l.start=d(h/s,e)),p=0,m=o.length;p<m;p++)f=o[p],g=0,f.hasOwnProperty("r")&&(g=f.r),y+=f.d*(1+g);return l.end=d((h+y)/s,e),l}(n);else{const e=n.adaptation.period;a.start=e.start,a.end=Math.max(r,e.start+e.duration)}!isNaN(a.start)&&(isNaN(t.start)||t.start>a.start)&&(t.start=a.start),!isNaN(a.end)&&(isNaN(t.end)||t.end<a.end)&&(t.end=a.end)}),t.end=Math.min(r,t.end);const a=f(e,t.end,!0);return t.end=isNaN(a)?t.end:a,t.start=n&&n.mpd&&n.mpd.timeShiftBufferDepth&&!isNaN(n.mpd.timeShiftBufferDepth)&&!isNaN(t.end)?Math.max(t.end-n.mpd.timeShiftBufferDepth,t.start):t.start,t.start=f(e,t.start),{range:t,now:r}}function h(e,t){a=e-t.end}function f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{let r=0,i=!1,a=NaN;for(;!i&&r<e.length;){const s=e[r].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(a=t,i=!0):!n&&s.start>t&&(isNaN(a)||s.start<a)?a=s.start:n&&s.start+s.duration<t&&(isNaN(a)||s.start+s.duration>a)&&(a=s.start+s.duration),r+=1}return a}catch(r){return t}}function g(e){void 0===e.offset||isNaN(e.offset)||o(e.offset/1e3)}function p(){s=0,a=0}function m(){t.off(R.default.UPDATE_TIME_SYNC_OFFSET,g,this),p()}return r={initialize:function(){p(),t.on(R.default.UPDATE_TIME_SYNC_OFFSET,g,this)},getClientTimeOffset:function(){return s},setClientTimeOffset:o,getClientReferenceTime:function(){return Date.now()-1e3*a+1e3*s},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return l(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return l(e,t,n,!0)},calcPresentationTimeFromWallTime:u,calcPresentationTimeFromMediaTime:d,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){let n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},calcTimeShiftBufferWindow:function(e,r){if(!r)return function(e){const t={start:NaN,end:NaN};let n=0,r=NaN;return e.forEach(e=>{const t=e.getStreamInfo();n+=t.duration,(isNaN(r)||t.start<r)&&(r=t.start)}),t.start=r,t.end=r+n,t}(e);if(n.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const t=c(e);return h(t.now,t.range),t.range}return function(e){const r={start:NaN,end:NaN};if(!e||0===e.length)return r;const i=e[0].getAdapter().getRegularPeriods()[0],a=u(new Date,i),s=i.mpd.timeShiftBufferDepth,o=isNaN(s)?0:a-s;if(r.start=f(e,o),r.end=!isNaN(r.start)&&a<r.start?a:f(e,a,!0),!isNaN(s)&&r.end<a-s&&(r.end=NaN),n.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const n=c(e);if(n.range.end<r.start)return t.trigger(D.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.WARNING,event:Sr.EVENTS.INVALID_DVR_WINDOW}),h(n.now,n.range),n.range}return r}(e)},reset:m},i=pt(e).getInstance(),m(),r}ao.__dashjs_factory_name="TimelineConverter";var so,oo,lo,uo,co,ho=x.default.getSingletonFactory(ao),fo={};so="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oo=function(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(so.charAt(63&i>>18)),n.push(so.charAt(63&i>>12)),n.push(so.charAt(63&i>>6)),n.push(so.charAt(63&i))}return 2==e.length-t?(i=(e[t]<<16)+(e[t+1]<<8),n.push(so.charAt(63&i>>18)),n.push(so.charAt(63&i>>12)),n.push(so.charAt(63&i>>6)),n.push("=")):1==e.length-t&&(i=e[t]<<16,n.push(so.charAt(63&i>>18)),n.push(so.charAt(63&i>>12)),n.push("==")),n.join("")},lo=function(){for(var e=[],t=0;t<64;++t)e[so.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),uo=function(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(lo[e.charCodeAt(t)]<<18)+(lo[e.charCodeAt(t+1)]<<12)+(lo[e.charCodeAt(t+2)]<<6)+lo[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},co={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},fo.decodeArray=function(e){var t=uo(e);return new Uint8Array(t)},fo.encodeASCII=function(e){var t=co.encode(e);return oo(t)},fo.decodeASCII=function(e){var t=uo(e);return co.decode(t)},fo.encode=function(e){var t=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t}(e);return oo(t)},fo.decode=function(e){return function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}(uo(e))},"undefined"!=typeof exports&&(exports.decode=fo.decode,exports.decodeArray=fo.decodeArray,exports.encode=fo.encode,exports.encodeASCII=fo.encodeASCII);var go=fo,po=class extends _s{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},mo=n(7377);function yo(){let e,t=0;function n(e){let t="";for(let n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function r(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function i(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function a(e,t){const n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?i(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?i(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function s(e){return e.replace(/^\s+/g,"")}function o(e){return e.replace(/\s+$/g,"")}return e={createHTMLCaptionsFromScreen:function(e,i,l,u){let d=null,c=null,h=!1,f=-1,g={start:i,end:l,spans:[]},p="style_cea608_white_black";const m={},y={},v=[];let b,E;for(b=0;b<15;++b){const e=u.rows[b];let t="",r=null;if(!1===e.isEmpty()){const a=n(e.chars);null===d&&(d={x:a,y1:b,y2:b+1,p:[]}),a!==f&&h&&(d.p.push(g),g={start:i,end:l,spans:[]},d.y2=b,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(c=m[d.name],c.p.contat(d.p)),d={x:a,y1:b,y2:b+1,p:[]});for(let n=0;n<e.chars.length;++n){const i=e.chars[n],a=i.penState;if(null===r||!a.equals(r)){t.trim().length>0&&(g.spans.push({name:p,line:t,row:b}),t="");let e="style_cea608_"+a.foreground+"_"+a.background;a.underline&&(e+="_underline"),a.italics&&(e+="_italics"),y.hasOwnProperty(e)||(y[e]=JSON.parse(JSON.stringify(a))),r=a,p=e}t+=i.uchar}t.trim().length>0&&g.spans.push({name:p,line:t,row:b}),h=!0,f=a}else h=!1,f=-1,d&&(d.p.push(g),g={start:i,end:l,spans:[]},d.y2=b,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(c=m[d.name],c.p.contat(d.p)),d=null)}d&&(d.p.push(g),d.y2=b+1,d.name="region_"+d.x+"_"+d.y1+"_"+d.y2,!1===m.hasOwnProperty(d.name)?(v.push(d),m[d.name]=d):(c=m[d.name],c.p.contat(d.p)),d=null);const T=[];for(b=0;b<v.length;++b){const n=v[b],u="sub_cea608_"+t++,d=document.createElement("div");d.id=u;const c=r(n);d.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+c;const h=document.createElement("div");h.className="paragraph bodyStyle",h.style.cssText=a(e);const f=document.createElement("div");f.className="cueUniWrapper",f.style.cssText="unicode-bidi: normal; direction: ltr;";for(let t=0;t<n.p.length;++t){const r=n.p[t];let i=0;for(E=0;E<r.spans.length;++E){let t=r.spans[E];if(t.line.length>0){if(0!==E&&i!=t.row){const e=document.createElement("br");e.className="lineBreak",f.appendChild(e)}let n=!1;i===t.row&&(n=!0),i=t.row;const l=y[t.name],u=document.createElement("span");u.className="spanPadding "+t.name+" customSpanColor",u.style.cssText=a(e,l),0!==E&&n?E===r.spans.length-1?u.textContent=o(t.line):u.textContent=t.line:r.spans.length>1&&E<r.spans.length-1&&t.row===r.spans[E+1].row?u.textContent=s(t.line):u.textContent=t.line.trim(),f.appendChild(u)}}}h.appendChild(f),d.appendChild(h);const g={bodyStyle:["%",90]};for(const e in y)y.hasOwnProperty(e)&&(g[e]=["%",90]);T.push({type:"html",start:i,end:l,cueHTMLElement:d,cueID:u,cellResolution:[32,15],isFromCEA608:!0,fontSize:g,lineHeight:{},linePadding:{}})}return T}},e}yo.__dashjs_factory_name="EmbeddedTextHtmlRender";var vo=x.default.getSingletonFactory(yo);function bo(e,t,n){const r=[];for(let i=t;i<n;i++)i+2<n&&0===e.getUint8(i)&&0===e.getUint8(i+1)&&3===e.getUint8(i+2)?(r.push(0),r.push(0),i+=2):r.push(e.getUint8(i));return new DataView(new Uint8Array(r).buffer)}function Eo(e,t,n,r){return!(4!==e||t<8)&&181===n.getUint8(r)&&49===n.getUint16(r+1)&&1195456820===n.getUint32(r+3)&&3===n.getUint8(r+7)}function To(e,t){return(127&e)>0||(127&t)>0}function So(e,t){let n=0;for(;n<e.byteLength;){let i,a=0,s=0;do{a+=i=e.getUint8(n++)}while(255===i);do{s+=i=e.getUint8(n++)}while(255===i);if(Eo(a,s,e,n)){const i=n+10,a=i+3*(31&e.getUint8(i-2));for(let n=i;n<a;n+=3){const i=e.getUint8(n);if(4&i){const a=3&i;if(0===(r=a)||1===r){const r=e.getUint8(n+1),i=e.getUint8(n+2);To(r,i)&&t[a].push(r,i)}}}}n+=s}var r}function wo(e,t,n){let r=0,i=0;const a=[[],[]];for(let s=t;s<t+n-5&&(r=e.getUint32(s),i=31&e.getUint8(s+4),!(s+5+r>t+n));s++)6===i&&s+5+r<=e.byteLength&&So(bo(e,s+5,s+5+r),a),s+=r+3;return a}function Ao(e){const t=e.errHandler,n=e.manifestModel,r=e.mediaController,i=e.videoModel,a=e.textTracks,s=e.vttParser,o=e.vttCustomRenderingParser,l=e.ttmlParser,u=e.streamInfo,d=e.settings,c=this.context,h=(0,_.default)(c).getInstance();let f,g,p,m,y,v,b,E,T,S,k,x,D,L,M,P,O,F=!1;function U(){v=null,E=NaN,T=[],S=null,b=!1,y=[],m=null}function z(e){const t={};t[I.default.SUBTITLE]="subtitles",t[I.default.CAPTION]="captions",t[I.default.FORCED_SUBTITLE]="subtitles";const n=new po;for(let i in e)n[i]=e[i];var r;n.defaultTrack=function(e){let t=!1;return x.length>1&&e.isEmbedded?t=e.id&&e.id===A.default.CC1:1===x.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===x.length&&(t=e.index===y[0].index),t}(e),n.isTTML=(r=e).codec&&r.codec.search(A.default.STPP)>=0||r.mimeType&&r.mimeType.search(A.default.TTML)>=0,n.kind=function(e,t){let n=e.roles&&e.roles.length>0?t[e.roles[0].value]:t.caption;return n=Object.values(t).includes(n)?n:t.caption,n}(e,t),a.addTextTrackInfo(n)}function B(e){const t=e.chunk;t.representation.mediaInfo.embeddedCaptions&&q(t.bytes,t)}function j(e){k=e}function q(e,r){const i=r.representation.mediaInfo,o=i.type,l=i.mimeType,u=i.codec||l;u?-1!==i.codec.indexOf("application/mp4")?function(e,t,r){let i,o;if("InitializationSegment"===t.segmentType)b=!0,E=p.getMediaTimescaleFromMoov(e);else{if(!b)return;o=p.getSamplesInfo(e),i=o.sampleList,i.length>0&&(S=i[0].cts-t.start*E),r.search(A.default.STPP)>=0?function(e,t,r){let i,s;for(m=null!==m?m:$(r),i=0;i<t.length;i++){const r=t[i],l=r.cts,u=V(),d=u+l/E,c=d+r.duration/E;f.buffered.add(d,c);const h=new DataView(e,r.offset,r.subSizes[0]);let p=Yn.Utils.dataViewToString(h,A.default.UTF8);const y=[];let b=r.offset+r.subSizes[0];for(s=1;s<r.subSizes.length;s++){const t=new Uint8Array(e,b,r.subSizes[s]),n=String.fromCharCode.apply(null,t);y.push(n),b+=r.subSizes[s]}try{const e=n.getValue().ttmlTimeIsRelative?l/E:0,t=m.parse(p,e,l/E,(l+r.duration)/E,y);a.addCaptions(k,u,t)}catch(o){v.removeExecutedRequestsBeforeTime(),Y(),g.error("TTML parser error: "+o)}}}(e,i,r):function(e,t){let n,r,i;const o=[];for(n=0;n<t.length;n++){const a=t[n];a.cts-=S;const u=V()+a.cts/E,d=u+a.duration/E;f.buffered.add(u,d);const c=e.slice(a.offset,a.offset+a.size),h=Yn.parseBuffer(c);for(r=0;r<h.boxes.length;r++){const e=h.boxes[r];if(g.debug("VTT box1: "+e.type),"vtte"!==e.type&&"vttc"===e.type){g.debug("VTT vttc boxes.length = "+e.boxes.length);let t={styles:{}};for(i=0;i<e.boxes.length;i++){const n=e.boxes[i];if(g.debug("VTT box2: "+n.type),"payl"===n.type)t.start=a.cts/E,t.end=(a.cts+a.duration)/E,t.data=n.cue_text;else if("sttg"===n.type&&n.settings&&""!==n.settings)try{const e=n.settings.split(" ");t.styles=s.getCaptionStyles(e)}catch(l){}}t&&t.data&&(o.push(t),g.debug(`VTT  ${t.start} - ${t.end} :  ${t.data}`))}}}o.length>0&&a.addCaptions(k,0,o)}(e,i)}}(e,r,u):o===A.default.VIDEO?function(e,t){let n,r;if(t.segmentType===N.HTTPRequest.INIT_SEGMENT_TYPE)0===D&&(D=p.getMediaTimescaleFromMoov(e));else if(t.segmentType===N.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===D)return void g.warn("CEA-608: No timescale for embeddedTextTrack yet");r=p.getSamplesInfo(e);const d=r.lastSequenceNumber,c=Math.trunc(t.start),h=Math.trunc(t.end);if(P[0]||P[1]||function(){let e;for(let t=0;t<x.length;t++){if(e=a.getTrackIdxForId(x[t].id),-1===e)return void g.warn("CEA-608: data before track is ready.");const n=H(e);P[t]=new w(t+1,{newCue:n},null)}}(),D){if(i=L,s=d,o=r.numSequences,l=M,u=c,null!==i&&null!==s&&null!==l&&null!==u&&(s===i?l!==u:s!==i+o))for(n=0;n<P.length;n++)P[n]&&P[n].reset();const t=function(e,t){if(0===t.length)return null;const n={splits:[],fields:[[],[]]},r=new DataView(e);for(let i=0;i<t.length;i++){const e=t[i],a=wo(r,e.offset,e.size);let s=null,o=0;for(let t=0;t<2;t++)if(a[t].length>0){e.cts!==s?o=0:o+=1;const r=V();n.fields[t].push([e.cts+r*D,a[t],o]),s=e.cts}}return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,r.sampleList);for(let e=0;e<P.length;e++){const r=t.fields[e],i=P[e];if(i)for(n=0;n<r.length;n++)i.addData(r[n][0]/D,r[n][1])}L=d,M=h}}var i,s,o,l,u}(e,r):function(e,n,r){let i,s;const o=new DataView(e,0,e.byteLength);s=Yn.Utils.dataViewToString(o,A.default.UTF8);try{i=$(r).parse(s,0),a.addCaptions(a.getCurrentTrackIdx(),0,i),f.buffered&&f.buffered.add(n.start,n.end)}catch(l){t.error(new G.default(K.TIMED_TEXT_ERROR_ID_PARSE_CODE,K.TIMED_TEXT_ERROR_MESSAGE_PARSE+l.message,s))}}(e,r,u):g.error("No text type defined")}function H(e){return function(t,n,r){let s;s=i.getTTMLRenderingDiv()?O.createHTMLCaptionsFromScreen(i.getElement(),t,n,r):[{start:t,end:n,data:r.getDisplayText(),styles:{}}],s&&a.addCaptions(e,0,s)}}function V(){return isNaN(f.timestampOffset)?0:f.timestampOffset}function $(e){let t;return e.search(A.default.VTT)>=0?t=d.get().streaming.text.webvtt.customRenderingEnabled&&o?o:s:(e.search(A.default.TTML)>=0||e.search(A.default.STPP)>=0)&&(t=l),t}function Y(e,t){void 0===e&&e===t&&(e=f.buffered.start(0),t=f.buffered.end(f.buffered.length-1)),f.buffered.remove(e,t),a.deleteCuesFromTrackIdx(k,e,t)}function W(e){x.forEach(function(t){const n=a.getTrackIdxForId(t.id);n>=0&&a.deleteCuesFromTrackIdx(n,e.from,e.to)})}return f={initialize:function(){F||(x=[],k=null,D=0,P=[],L=null,M=null,F=!0,O=vo(c).getInstance(),h.on(R.default.VIDEO_CHUNK_RECEIVED,B,f),h.on(R.default.BUFFER_CLEARED,W,f))},addMediaInfos:function(e,t,n){if(y=y.concat(t),e===A.default.TEXT&&t[0].isFragmented&&!t[0].isEmbedded){v=n,f.buffered=(0,mo.default)(c).create(),T=r.getTracksFor(A.default.TEXT,u.id).filter(e=>e.isFragmented);const e=r.getCurrentTrackFor(A.default.TEXT,u.id);for(let t=0;t<T.length;t++)if(T[t]===e){j(t);break}}for(let r=0;r<t.length;r++)z(t[r])},resetMediaInfos:function(){y=[]},getStreamId:function(){return u.id},append:q,abort:function(){},addEmbeddedTrack:function(e){if(F&&e)if(e.id===A.default.CC1||e.id===A.default.CC3){for(let t=0;t<x.length;t++)if(x[t].id===e.id)return;x.push(e)}else g.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){h.off(R.default.VIDEO_CHUNK_RECEIVED,B,f),h.off(R.default.BUFFER_CLEARED,W,f),a&&a.deleteAllTextTracks(),F=!1,x=[],P=[null,null],L=null,M=null},getConfig:function(){return{fragmentModel:v,fragmentedTracks:T,videoModel:i}},setCurrentFragmentedTrackIdx:j,remove:Y,reset:function(){U(),y=[],p=null}},g=(0,C.default)(c).getInstance().getLogger(f),p=Qn(c).getInstance(),U(),f}Ao.__dashjs_factory_name="TextSourceBuffer";var Io=x.default.getClassFactory(Ao);class ko{constructor(e){if(this.cues=new Map,e)for(const t of e)this.addCue(t)}hasCue(e){const t=this.cues.get(e.startTime);return t&&t.some(t=>{return r=e,(n=t).startTime===r.startTime&&n.endTime===r.endTime&&n instanceof VTTCue&&r instanceof VTTCue&&n.text===r.text;var n,r})}addCue(e){const t=this.cues.get(e.startTime);t?this.hasCue(e)||t.push(e):this.cues.set(e.startTime,[e])}}var _o=n(7640);const Ro=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function xo(e){const t=this.context,n=(0,_.default)(t).getInstance(),r=e.videoModel,i=e.streamInfo,a=e.settings;let s,o,l,u,d,c,h,f,g,p,m,y,v,b,E,T,S,w,I,k;function x(e){const t=e.kind,n=void 0!==e.id?e.id:e.lang,i=e.lang,a=e.isTTML,s=e.isEmbedded;return r.addTextTrack(t,n,i,a,s)}function L(e,t,n,r,i,a){let s=0,o=0;e/t>n/r?(o=t,s=o/r*n):(s=e,o=s/n*r);let l=0,u=0,d=0,c=0;return s/o>i?(c=o,d=o*i):(d=s,c=s/i),l=(e-d)/2,u=(t-c)/2,a?{x:l+.1*d,y:u+.1*c,w:.8*d,h:.8*c}:{x:l,y:u,w:d,h:c}}function M(e,t){const i=r.getClientWidth(),a=r.getClientHeight(),s=r.getVideoWidth(),o=r.getVideoHeight(),l=r.getVideoRelativeOffsetTop(),u=r.getVideoRelativeOffsetLeft();if(0!==s&&0!==o){let r=s/o,d=!1;e.isFromCEA608&&(r=3.5/3,d=!0);const c=L.call(this,i,a,s,o,r,d),y=c.w,v=c.h,T=c.x,w=c.y;if(y!=g||v!=p||T!=h||w!=f||t){if(h=T+u,f=w+l,g=y,p=v,m){const e=m.style;e&&(e.left=h+"px",e.top=f+"px",e.width=g+"px",e.height=p+"px",e.zIndex=b&&document[b]||E?S:null,n.trigger(D.default.CAPTION_CONTAINER_RESIZE))}const t=e.activeCues;if(t){const e=t.length;for(let n=0;n<e;++n){const e=t[n];e.scaleCue(e)}}}}}function N(e){const t=g,n=p;let r,i,a,s,o;if(e.cellResolution){const l=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){i=(e.linePadding[r]*l[0]).toString();const t=document.getElementsByClassName("spanPadding");for(let e=0;e<t.length;e++)t[e].style.cssText=t[e].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),t[e].style.cssText=t[e].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?a=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.fontSize[r][1]),i=(a*l[1]).toString(),o="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(let e=0;e<o.length;e++)o[e].style.cssText=o[e].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?s=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(s=e.lineHeight[r][1]),i=(s*l[1]).toString(),o=document.getElementsByClassName(r);for(let e=0;e<o.length;e++)o[e].style.cssText=o[e].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){let t=document.getElementById(e.cueID);t&&m.removeChild(t),O(e)}}function P(e,t){const n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){const r=n.exec(t),i=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(e.images[i])}if(r.test(t)){const n=r.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[n]}return t}function O(e){if(m){ae.call(this);const t=document.createElement("div");m.appendChild(t),T=(0,_o.renderHTML)(e.isd,t,function(t){return P(e,t)},m.clientHeight,m.clientWidth,a.get().streaming.text.imsc.displayForcedOnlyMode,function(e){o.info("renderCaption :",e)},T,a.get().streaming.text.imsc.enableRollUp),t.id=e.cueID,n.trigger(D.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:c})}}function F(e,t){return!!t&&t.endTime>=e.startTime}function U(e,t){return!!a.get().streaming.text.extendSegmentedCues&&!!function(e,t,n){for(let r=0;r<n.length;r++){const i=n[r];if(JSON.stringify(e[i])!==JSON.stringify(t[i]))return!1}return!0}(t,e,Ro)&&(t.endTime=Math.max(t.endTime,e.endTime),!0)}function z(e,t){t&&t.forEach(t=>{t.kind&&"image"===t.kind&&(t.src=P(e,t.src)),z(e,t.contents)})}function B(e,t,n){const i=X(e),s=a.get().streaming.text.dispatchForManualRendering;if(!i)return;if(!Array.isArray(n)||0===n.length)return;const l=new ko(i.cues);for(let d=0;d<n.length;d++){let e=null;const c=n[d];i.cellResolution=c.cellResolution,i.isFromCEA608=c.isFromCEA608,isNaN(c.start)||isNaN(c.end)||(s?e=j(c,t):K(c)&&m?e=H(c,t,i):c.data&&(e=V(c,t,i)));try{if(e){if(!l.hasCue(e))if(l.addCue(e),a.get().streaming.text.webvtt.customRenderingEnabled)i.manualCueList||(i.manualCueList=[]),i.manualCueList.push(e);else{let t;i.cues&&0!==i.cues.length&&(t=i.cues[i.cues.length-1]),F(e,t)?U(e,t)||(t.isd&&(t.onexit=function(){}),i.mode!==A.default.TEXT_DISABLED&&i.addCue(e)):i.mode!==A.default.TEXT_DISABLED&&i.addCue(e)}const t=a.get().streaming.buffer.bufferToKeep;ee(i,0,r.getTime()-t)}else o.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(u){throw te(i),i.addCue(e),u}}}function j(e,t){let n=$(e,t);return n.onenter=function(){K(e)&&k&&k.cueID!==n.cueID&&G(k),delete n.type,k=n,q(n)},n.onexit=function(){G(n),k=null},n}function q(e){n.trigger(D.default.CUE_ENTER,e)}function G(e){n.trigger(D.default.CUE_EXIT,{cueID:e.cueID})}function H(e,t,r){const i=this;let a=$(e,t);return m.style.left=h+"px",m.style.top=f+"px",m.style.width=g+"px",m.style.height=p+"px",a.onenter=function(){r.mode===A.default.TEXT_SHOWING&&(this.isd?(I?requestAnimationFrame(()=>O(this)):O(this),o.debug("Cue enter id:"+this.cueID)):(m.appendChild(this.cueHTMLElement),N.call(i,this),n.trigger(D.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:c})))},a.onexit=function(){if(m){const e=m.childNodes;for(let t=0;t<e.length;++t)e[t].id===this.cueID&&(o.debug("Cue exit id:"+e[t].id),m.removeChild(e[t]),--t)}},a}function V(e,t,r){let i=$(e,t);if(i.isActive=!1,e.styles)try{void 0!==e.styles.align&&"align"in i&&(i.align=e.styles.align),void 0!==e.styles.line&&"line"in i&&(i.line=e.styles.line),void 0!==e.styles.lineAlign&&(i.lineAlign=e.styles.lineAlign),void 0!==e.styles.snapToLines&&"snapToLines"in i&&(i.snapToLines=e.styles.snapToLines),void 0!==e.styles.position&&"position"in i&&(i.position=e.styles.position),void 0!==e.styles.positionAlign&&(i.positionAlign=e.styles.positionAlign),void 0!==e.styles.size&&"size"in i&&(i.size=e.styles.size)}catch(a){o.error(a)}return i.onenter=function(){r.mode===A.default.TEXT_SHOWING&&n.trigger(D.default.CAPTION_RENDERED,{currentTrackIdx:c})},i}function K(e){return"html"===e.type}function $(e,t){return K(e)?function(e,t){let n=new l(e.start+t,e.end+t,"");return n.cueHTMLElement=e.cueHTMLElement,n.isd=e.isd,n.images=e.images,n.embeddedImages=e.embeddedImages,n.cueID=e.cueID,n.scaleCue=N.bind(self),n.cellResolution=e.cellResolution,n.lineHeight=e.lineHeight,n.linePadding=e.linePadding,n.fontSize=e.fontSize,n.isd&&z(n,n.isd.contents),n}(e,t):function(e,t){let n=new l(e.start-t,e.end-t,e.data);return n.cueID=Ge.default.generateUuid(),n}(e,t)}function Y(e){if(y){const t=y.childNodes;for(let n=0;n<t.length;++n)t[n].id===e.cueID&&(y.removeChild(t[n]),--n)}}function W(){const e=r.getTextTracks(),t=[];for(const n of e)n.manualMode===A.default.TEXT_SHOWING&&t.push(n);return t}function X(e){return e>=0&&u[e]?r.getTextTrack(u[e].kind,u[e].id,u[e].lang,u[e].isTTML,u[e].isEmbedded):null}function Q(e){if(e===c)return;c=e;const t=X(c);J.call(this,t),v&&(clearInterval(v),v=null),t&&"html"===t.renderingType&&(M.call(this,t,!0),window.ResizeObserver?(w=new window.ResizeObserver(()=>{M.call(this,t,!0)}),w.observe(r.getElement())):v=setInterval(M.bind(this,t),500))}function J(e){ae.call(this),e&&"html"===e.renderingType?re.call(this):ie.call(this)}function Z(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return!!e&&(isNaN(t)||(r?e.startTime:e.endTime)>=t)&&(isNaN(n)||(r?e.endTime:e.startTime)<=n)}function ee(e,t,n){if(!(n<t)&&e&&(e.cues||e.manualCueList)){const r=e.cues&&e.cues.length>0?"native":"custom",i="native"===r?e.cues:e.manualCueList;if(!i||0===i.length)return;for(let a=i.length-1;a>=0;a--)Z(i[a],t,n,!0)&&!ne(i[a])&&("native"===r?e.removeCue(i[a]):(Y(i[a]),delete e.manualCueList[a]))}}function te(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e&&(e.cues||e.manualCueList)){const i=e.cues&&e.cues.length>0?"native":"custom",a="native"===i?e.cues:e.manualCueList;if(!a||0===a.length)return;for(let s=a.length-1;s>=0;s--)Z(a[s],t,n,r)&&("native"===i?(a[s].onexit&&a[s].onexit(),e.removeCue(a[s])):(Y(a[s]),delete e.manualCueList[s]))}}function ne(e){const t=r.getTime();return t>=e.startTime&&t<=e.endTime}function re(){let e=document.getElementById("native-cue-style");if(e)return;e=document.createElement("style"),e.id="native-cue-style",document.head.appendChild(e);const t=e.sheet,n=r.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(i){o.info(""+i.message)}}function ie(){const e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function ae(){if(m)for(;m.firstChild;)m.removeChild(m.firstChild)}return s={addCaptions:B,addTextTrackInfo:function(e){u.push(e)},createTracks:function(){u.sort(function(e,t){return e.index-t.index}),m=r.getTTMLRenderingDiv(),y=r.getVttRenderingDiv();let e=-1;for(let t=0;t<u.length;t++){const r=x(u[t]);d.push(r),u[t].defaultTrack&&(r.default=!0,e=t);const i=X(t);i&&(i.mode=A.default.TEXT_SHOWING,m&&(u[t].isTTML||u[t].isEmbedded)?i.renderingType="html":i.renderingType="default"),B(t,0,u[t].captionData),n.trigger(D.default.TEXT_TRACK_ADDED)}if(Q.call(this,e),e>=0){let t=function(){const r=X(e);r&&"html"===r.renderingType&&M.call(this,r,!0),n.off(D.default.PLAYBACK_METADATA_LOADED,t,this)};n.on(D.default.PLAYBACK_METADATA_LOADED,t,this);for(let n=0;n<u.length;n++){const t=X(n);if(t){const r=a.get().streaming.text.dispatchForManualRendering;t.mode=n!==e||r?A.default.TEXT_HIDDEN:A.default.TEXT_SHOWING,t.manualMode=n===e?A.default.TEXT_SHOWING:A.default.TEXT_HIDDEN}}}n.trigger(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:c,tracks:u,streamId:i.id})},deleteAllTextTracks:function(){const e=d?d.length:0;for(let t=0;t<e;t++){const e=X(t);e&&te.call(this,e,i.start,i.start+i.duration,!1)}d=[],u=[],v&&(clearInterval(v),v=null),w&&r&&(w.unobserve(r.getElement()),w=null),c=-1,ae.call(this)},deleteCuesFromTrackIdx:function(e,t,n){const r=X(e);r&&te(r,t,n)},disableManualTracks:function(){const e=W();if(e&&e.length>0){const t=e[0].manualCueList;t&&t.length>0&&t.forEach(e=>{if(e.isActive)if(e.isActive=!1,a.get().streaming.text.dispatchForManualRendering)G(e);else if(y){const t=y.childNodes;for(let n=0;n<t.length;++n)t[n].id===e.cueID&&(y.removeChild(t[n]),--n)}})}},getCurrentTrackIdx:function(){return c},getCurrentTextTrackInfo:function(){return u[c]},getStreamId:function(){return i.id},getTextTrackInfos:function(){return u},getTrackIdxForId:function(e){let t=-1;for(let n=0;n<u.length;n++)if(u[n].id===e){t=n;break}return t},initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,u=[],d=[],c=-1,h=0,f=0,g=0,p=0,m=null,y=null,v=null,E=!1,S=2147483647,T=null,I="requestAnimationFrame"in window,void 0!==document.fullscreenElement?b="fullscreenElement":void 0!==document.webkitIsFullScreen?b="webkitIsFullScreen":document.msFullscreenElement?b="msFullscreenElement":document.mozFullScreen&&(b="mozFullScreen"))},manualCueProcessing:function(e){const t=W();if(t&&t.length>0){const n=t[0].manualCueList;n&&n.length>0&&n.forEach(t=>{t.startTime<=e&&t.endTime>=e&&!t.isActive?(t.isActive=!0,a.get().streaming.text.dispatchForManualRendering?q(t):WebVTT.processCues(window,[t],y,t.cueID)):t.isActive&&(t.startTime>e||t.endTime<e)&&(t.isActive=!1,a.get().streaming.text.dispatchForManualRendering?G(t):Y(t))})}},setCurrentTrackIdx:Q,setModeForTrackIdx:function(e,t){const n=X(e);n&&n.mode!==t&&(n.mode=t),n&&n.manualMode!==t&&(n.manualMode=t)}},o=(0,C.default)(t).getInstance().getLogger(s),s}xo.__dashjs_factory_name="TextTracks";var Co=x.default.getClassFactory(xo);function Do(){const e=this.context;let t,n,r,i,a,s;function o(e){const t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function l(e){const t=e.split(i),n=t[1].split(s);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:u(n)}}function u(e){const t={};return e.forEach(function(e){const n=e.split(":");if(n.length>1){const[e,r]=n;switch(e){case"align":case"A":t.align=r;break;case"line":case"L":const[e,n]=r.split(","),i=e.endsWith("%");t.line="auto"===e?e:parseInt(e,10),i&&(t.snapToLines=!1),n&&(t.lineAlign=n);break;case"position":case"P":const[a,s]=r.split(",");t.position=parseInt(a,10),s&&(t.positionAlign=s);break;case"size":case"S":t.size=parseInt(r,10)}}}),t}function d(e,t){let n,r=t,a="",s="";for(;""!==e[r]&&r<e.length;)r++;if(n=r-t,n>1)for(let o=0;o<n;o++){if(s=e[t+o],s.match(i)){a="";break}a+=s,o!==n-1&&(a+="\n")}else s=e[t],s.match(i)||(a=s);return a}return t={parse:function(e){const t=[];let s,u;if(!e)return t;s=(e=e.split(r)).length,u=-1;for(let r=0;r<s;r++){let s=e[r];if(s.length>0&&"WEBVTT"!==s&&s.match(i)){const i=l(s),c=i.cuePoints,h=i.styles,f=d(e,r+1),g=o(c[0].replace(a,"")),p=o(c[1].replace(a,""));!isNaN(g)&&!isNaN(p)&&g>=u&&p>g?""!==f?(u=g,t.push({start:g,end:p,data:f,styles:h})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing")}}return t},getCaptionStyles:u},n=(0,C.default)(e).getInstance().getLogger(t),r=/(?:\r\n|\r|\n)/gm,i=/-->/,a=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,t}Do.__dashjs_factory_name="VTTParser";var Lo=x.default.getSingletonFactory(Do);function Mo(){let e,t;return e={parse:function(e){let n=[];return t.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},n.push(e)},t.parse(e),n}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(t=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(e){}}(),e}Mo.__dashjs_factory_name="VttCustomRenderingParser";var No=x.default.getSingletonFactory(Mo);function Po(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i=0;function a(){const e="cue_TTML_"+i;return i++,e}return n={parse:function(e,n,i,s,o){let l="";const u=[];let d,c,h;const f={},g={};let p="",m="",y={onOpenTag:function(e,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(t.trigger(D.default.CONFORMANCE_VIOLATION,{level:Sr.LEVELS.ERROR,event:Sr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void r.warn("smpte-tt imageType != PNG. Discarded");p=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){p&&(g[p]=m.trim()),m="",p=""},onText:function(e){p&&(m+=e)}};if(!e)throw l="no ttml data to parse",new Error(l);f.data=e,t.trigger(R.default.TTML_TO_PARSE,f);let v=(0,_o.fromXML)(f.data,function(e){l=e},y);t.trigger(R.default.TTML_PARSED,{ttmlString:f.data,ttmlDoc:v});const b=v.getMediaTimeEvents();for(h=0;h<b.length;h++){let e=(0,_o.generateISD)(v,b[h],function(e){l=e});e.contents.some(e=>e.contents.length)&&(d=b[h]+n,c=b[h+1]+n,d<c&&u.push({start:d,end:c,type:"html",cueID:a(),isd:e,images:o,embeddedImages:g}))}if(""!==l)throw r.error(l),new Error(l);return u}},r=(0,C.default)(e).getInstance().getLogger(n),n}Po.__dashjs_factory_name="TTMLParser";var Oo=x.default.getSingletonFactory(Po);function Fo(e){let t=this.context;const n=(0,_.default)(t).getInstance(),r=Ae(t).getInstance(),i=e.adapter,a=e.baseURLController;let s,o,l;function u(e,t){let n,s,o=!1;if(a.resolve()){const t=i.getVoRepresentations(e);t&&t.length>0&&(n=a.resolve(t[0].path).url)}const u=e.essentialProperties.filter(e=>e.schemeIdUri&&e.schemeIdUri===A.default.FONT_DOWNLOAD_DVB_SCHEME),d=e.supplementalProperties.filter(e=>e.schemeIdUri&&e.schemeIdUri===A.default.FONT_DOWNLOAD_DVB_SCHEME);u.length>0?(o=!0,s=u):s=d,s.forEach(i=>{if((a=i).value&&1===parseInt(a.value)&&a.dvbUrl&&a.dvbUrl.length>0&&a.dvbFontFamily&&a.dvbFontFamily.length>0&&a.dvbMimeType&&(a.dvbMimeType===A.default.OFF_MIMETYPE||a.dvbMimeType===A.default.WOFF_MIMETYPE)){let a=(s=i.dvbUrl,u=n,r.isPathAbsolute(s)?s:r.isRelative(s)?u?r.resolve(s,u):r.resolve(s):s);l.push({fontFamily:i.dvbFontFamily,url:a,mimeType:i.dvbMimeType,trackId:e.id,streamId:t,isEssential:o,status:"unloaded",fontFace:new FontFace(i.dvbFontFamily,`url(${a})`,{display:"swap"})})}var a,s,u})}function d(e,t){const n=l[e];l[e]={...n,status:t}}function c(){l=[]}return s={addFontsFromTracks:function(e,t){if(e&&Array.isArray(e)&&t)for(let n=0;n<e.length;n++)u(e[n],t)},downloadFonts:function(){for(let e=0;e<l.length;e++){let t=l[e];document.fonts.add(t.fontFace),n.trigger(D.default.DVB_FONT_DOWNLOAD_ADDED,t),t.fontFace.load().then(()=>{d(e,"loaded"),n.trigger(D.default.DVB_FONT_DOWNLOAD_COMPLETE,t)},r=>{d(e,"error"),o.debug("Font download error: ",r),n.trigger(D.default.DVB_FONT_DOWNLOAD_FAILED,t)})}},getFonts:function(){return l},getFontsForTrackId:function(e){return l.filter(t=>t.trackId&&t.trackId===e)},reset:function(){!function(){for(const e of l){let t=document.fonts.delete(e.fontFace);o.debug(`Removal of fontFamily: ${e.fontFamily} was ${t?"successful":"unsuccessful"}`)}}(),c()}},o=(0,C.default)(t).getInstance().getLogger(s),c(),s}Fo.__dashjs_factory_name="DVBFonts";var Uo=x.default.getClassFactory(Fo);function zo(e){let t=this.context;const n=e.adapter,r=e.errHandler,i=e.manifestModel,a=e.mediaController,s=e.baseURLController,o=e.videoModel,l=e.settings;let u,d,c,h,f,g,p,m,y,v,b,E,T,S;function w(e){if(S.error(`Could not download ${e.isEssential?"an essential":"a"} font - fontFamily: ${e.fontFamily}, url: ${e.url}`),e.isEssential){let t=h[e.streamId].getTrackIdxForId(e.trackId);h[e.streamId].setModeForTrackIdx(t,A.default.TEXT_DISABLED)}}function k(e){if(S.debug(`Successfully downloaded ${e.isEssential?"an essential":"a"} font - fontFamily: ${e.fontFamily}, url: ${e.url}`),e.isEssential){let t=h[e.streamId].getTrackIdxForId(e.trackId);t===h[e.streamId].getCurrentTrackIdx()?h[e.streamId].setModeForTrackIdx(t,A.default.TEXT_SHOWING):h[e.streamId].setModeForTrackIdx(t,A.default.TEXT_HIDDEN)}}function x(e){let t=e.tracks,n=e.index;const r=e.streamId;if(!1===l.get().streaming.text.defaultEnabled&&!P()||E)O(r,-1);else{const e=a.getCurrentTrackFor(A.default.TEXT,r);if(e){const i={lang:e.lang,role:e.roles[0],index:e.index,codec:e.codec,accessibility:e.accessibility[0]};t.some((e,t)=>{if(a.matchSettings(i,e))return O(r,t),n=t,!0})}y=!1}d[r].lastEnabledIndex=n,m.trigger(D.default.TEXT_TRACKS_ADDED,{enabled:P(),index:n,tracks:t,streamId:r}),b=!0,T.addFontsFromTracks(t,r),T.getFonts().forEach(e=>{if(e.isEssential){let t=h[e.streamId].getTrackIdxForId(e.trackId);h[e.streamId].setModeForTrackIdx(t,A.default.TEXT_DISABLED)}}),T.downloadFonts()}function L(e){try{const t=e.streamId;if(!h[t]||isNaN(e.time))return;h[t].manualCueProcessing(e.time)}catch(t){}}function M(e){try{const t=e.streamId;if(!h[t])return;h[t].disableManualTracks()}catch(t){}}function N(e){try{if(!e||!e.mediaType||e.mediaType!==A.default.AUDIO||!e.currentMediaInfo)return;const t=h[e.streamId].getCurrentTextTrackInfo();let n=NaN;y?n=F(e.streamId):U(t)&&e.currentMediaInfo.lang&&e.currentMediaInfo.lang!==t.lang&&(n=F(e.streamId),isNaN(n)&&(n=-1)),isNaN(n)||O(e.streamId,n)}catch(t){S.error(t)}}function P(){let e=!0;return y&&!v&&(e=!1),e}function O(e,t){y=-1===t,y&&a&&a.saveTextSettingsDisabled();let n=z(e);if(n===t||!h[e])return;h[e].disableManualTracks();let r=h[e].getCurrentTextTrackInfo(),i=r?o.getTextTrack(r.kind,r.id,r.lang,r.isTTML,r.isEmbedded):null;i&&i.mode!==A.default.TEXT_DISABLED&&h[e].setModeForTrackIdx(n,A.default.TEXT_HIDDEN),h[e].setCurrentTrackIdx(t),r=h[e].getCurrentTextTrackInfo();const s=l.get().streaming.text.dispatchForManualRendering;if(r&&!s&&r.mode!==A.default.TEXT_DISABLED&&h[e].setModeForTrackIdx(t,A.default.TEXT_SHOWING),r&&r.isFragmented&&!r.isEmbedded)!function(e,t,n){if(!c[e])return;let r=c[e].getConfig().fragmentedTracks;for(let i=0;i<r.length;i++){let s=r[i];if(t.lang===s.lang&&(s.id?t.id===s.id:t.index===s.index)){let t=a.getCurrentTrackFor(A.default.TEXT,e);(s.id?t.id!==s.id:t.index!==s.index)?(h[e].deleteCuesFromTrackIdx(n),c[e].setCurrentFragmentedTrackIdx(i)):-1===n&&m.trigger(R.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:e,mediaType:A.default.TEXT})}}}(e,r,n);else if(r&&!r.isFragmented)u=e,d=r,m.trigger(R.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:d},{streamId:u,mediaType:A.default.TEXT});else if(!r&&y){const t=F(e);return void(isNaN(t)||O(e,t))}var u,d;a.setTrack(r)}function F(e){const t=h[e].getTextTrackInfos().filter((e,t)=>(e._indexToSelect=t,!!(e&&e.roles&&e.roles.length>0)&&U(e)));if(!t||t.length<=0)return NaN;const n=a.getCurrentTrackFor(A.default.AUDIO,e);if(!n)return NaN;const r=t.find(e=>n.lang===e.lang);return r?r._indexToSelect:NaN}function U(e){return!(!e||!e.roles||0===e.roles.length)&&e.roles.some(e=>e.schemeIdUri===A.default.DASH_ROLE_SCHEME_ID&&e.value===I.default.FORCED_SUBTITLE)}function z(e){return h[e].getCurrentTrackIdx()}function B(){c={},h={},d={},y=!0,b=!1,E=!1}return u={addEmbeddedTrack:function(e,t){const n=e.id;c[n]&&c[n].addEmbeddedTrack(t)},addMediaInfosToBuffer:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=e.id;c[i]&&c[i].addMediaInfos(t,n,r)},createTracks:function(e){const t=e.id;h[t]&&h[t].createTracks()},deactivateStream:function(e){if(!e)return;const t=e.id;c[t]&&c[t].resetMediaInfos(),h[t]&&h[t].deleteAllTextTracks()},enableForcedTextStreaming:function(e){return(0,ve.checkParameterType)(e,"boolean"),v=e,!0},enableText:function(e,t){return(0,ve.checkParameterType)(t,"boolean"),P()!==t&&(t&&O(e,d[e].lastEnabledIndex),t||(d[e].lastEnabledIndex=z(e),b?O(e,-1):E=!0)),!0},getAllTracksAreDisabled:function(){return y},getCurrentTrackIdx:z,getTextSourceBuffer:function(e){const t=e.id;if(c&&c[t])return c[t]},initialize:function(){T=Uo(t).create({adapter:n,baseURLController:s}),m.on(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,x,u),m.on(R.default.DVB_FONT_DOWNLOAD_FAILED,w,u),m.on(R.default.DVB_FONT_DOWNLOAD_COMPLETE,k,u),m.on(R.default.MEDIAINFO_UPDATED,N,u),l.get().streaming.text.webvtt.customRenderingEnabled&&(m.on(R.default.PLAYBACK_TIME_UPDATED,L,u),m.on(R.default.PLAYBACK_SEEKING,M,u))},initializeForStream:function(e){const s=e.id,u=Co(t).create({videoModel:o,settings:l,streamInfo:e});u.initialize(),h[s]=u;const m=Io(t).create({errHandler:r,adapter:n,dvbFonts:T,manifestModel:i,mediaController:a,videoModel:o,textTracks:u,vttParser:f,vttCustomRenderingParser:g,ttmlParser:p,streamInfo:e,settings:l});m.initialize(),c[s]=m,d[s]={},d[s].lastEnabledIndex=-1},isTextEnabled:P,reset:function(){Object.keys(c).forEach(e=>{c[e].resetEmbedded(),c[e].reset()}),T.reset(),B(),m.off(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,x,u),m.off(R.default.DVB_FONT_DOWNLOAD_FAILED,w,u),m.off(R.default.DVB_FONT_DOWNLOAD_COMPLETE,k,u),m.off(R.default.MEDIAINFO_UPDATED,N,u),l.get().streaming.text.webvtt.customRenderingEnabled&&(m.off(R.default.PLAYBACK_TIME_UPDATED,L,u),m.off(R.default.PLAYBACK_SEEKING,M,u))},setTextTrack:O,clearDataForStream:function(e){c[e]&&(c[e].resetEmbedded(),c[e].reset(),delete c[e]),h[e]&&(h[e].deleteAllTextTracks(),delete h[e]),d[e]&&delete d[e]}},v=!1,b=!1,E=!1,f=Lo(t).getInstance(),g=No(t).getInstance(),p=Oo(t).getInstance(),m=(0,_.default)(t).getInstance(),S=(0,C.default)(t).getInstance().getLogger(u),B(),u}zo.__dashjs_factory_name="TextController";var Bo=x.default.getClassFactory(zo);function jo(e){e=e||{};const t=this.context,n=(0,C.default)(t).getInstance(),r=e.settings,i=(0,_.default)(t).getInstance();let a,s,o,l,u,d;function c(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function h(e,t,n,r){const i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;const a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function f(){a={},s={},o={},l={}}const g={addEntry:function(e,t){try{if(!(e&&t&&t.trace&&t.trace.length))return;a[n=e]=a[n]||[],s[n]=s[n]||[],o[n]=o[n]||{fastEstimate:0,slowEstimate:0,totalWeight:0},l[n]=l[n]||{fastEstimate:0,slowEstimate:0,totalWeight:0};const f=t.tresponse.getTime()-t.trequest.getTime()||1;let g=function(e,t){return e._fileLoaderType&&e._fileLoaderType===A.default.FILE_LOADER_TYPES.FETCH?function(e){const t=e.trace.reduce((e,t)=>e+t.b[0],0),n=e.trace.reduce((e,t)=>e+t.d,0);let i=NaN;return r.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(i=c()),isNaN(i)&&(i=Math.round(8*t/n)),{downloadedBytes:t,value:i,downloadTimeInMs:n}}(e):function(e,t){let n=NaN,i=NaN,a=!1;if(r.get().streaming.abr.throughput.useResourceTimingApi&&e._resourceTimingValues)n=e._resourceTimingValues.transferSize,i=e._resourceTimingValues.responseEnd-e._resourceTimingValues.responseStart,a=!0;else{if(e.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};n=e.trace.reduce((e,t)=>e+t.b[0],0)-e.trace[0].b[0],i=Math.max(e.trace.reduce((e,t)=>e+t.d,0)-e.trace[0].d,1)}let s=NaN;if(!a&&r.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(s=c()),isNaN(s)){const e=r.get().streaming.abr.throughput.useDeadTimeLatency?i:i+t;s=Math.round(8*n/e)}return{downloadedBytes:n,value:s,downloadTimeInMs:i}}(e,t)}(t,f);if(g.latencyInMs=f,isNaN(g.value)||!isFinite(g.value))return;if(t.cmsd){const e=t.cmsd.dynamic&&t.cmsd.dynamic.etp?t.cmsd.dynamic.etp:null;if(e){const t=r.get().streaming.cmsd.abr.etpWeightRatio;t>0&&t<=1&&(g.value=g.value*(1-t)+e*t)}}if(function(e,t,n){return r.get().streaming.abr.throughput.useResourceTimingApi&&n._resourceTimingValues?0===n._resourceTimingValues.transferSize&&n._resourceTimingValues.decodedBodySize>0:!isNaN(t)&&(e===A.default.VIDEO?t<r.get().streaming.cacheLoadThresholds[A.default.VIDEO]:e===A.default.AUDIO?t<r.get().streaming.cacheLoadThresholds[A.default.AUDIO]:void 0)}(e,t._tfinish.getTime()-t.trequest.getTime(),t))return void d.debug(`${e} Assuming segment ${t.url} came from cache, ignoring it for throughput calculation`);d.debug(`Added throughput entry for ${e}: ${g.value} kbit/s`),g.serviceLocation=t._serviceLocation,a[e].push(g),s[e].push({value:f}),function(e){a[e].length>r.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&a[e].shift(),s[e].length>r.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&s[e].shift()}(e),i.trigger(D.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:g}),t.type!==N.HTTPRequest.MPD_TYPE&&(h(o[e],g.value,r.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*g.downloadTimeInMs,u.bandwidthHalfLife),h(l[e],f,1,u.latencyHalfLife))}catch(n){d.error(n)}var n},getThroughputDict:function(e){return e?a[e]:a},getEwmaThroughputDict:function(e){return e?o[e]:o},getEwmaLatencyDict:function(e){return e?l[e]:l},getEwmaHalfLife:function(){return u},getLatencyDict:function(e){return e?s[e]:s},reset:f};return d=n.getLogger(g),u={bandwidthHalfLife:{fast:r.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:r.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:r.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:r.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},f(),g}jo.__dashjs_factory_name="ThroughputModel";var qo=x.default.getClassFactory(jo);function Go(){const e=this.context,t=(0,_.default)(e).getInstance();let n,r,i;function a(){performance.clearResourceTimings()}function s(e){e.metric!==k.HTTP_REQUEST||!e.value||e.value.type!==N.HTTPRequest.MPD_TYPE&&(e.value.type!==N.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==A.default.AUDIO&&e.mediaType!==A.default.VIDEO)||n.addEntry(e.mediaType,e.value)}function o(e,t){let a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN,y=null,v=n.getEwmaHalfLife(),b=null,E=!0;switch(s||(s=i.get().streaming.abr.throughput.averageCalculationMode),e){case A.default.THROUGHPUT_TYPES.BANDWIDTH:y=s===A.default.THROUGHPUT_CALCULATION_MODES.EWMA?n.getEwmaThroughputDict(t):n.getThroughputDict(t),b=v.bandwidthHalfLife,E=!0,o=isNaN(o)?r.getIsDynamic()?i.get().streaming.abr.throughput.sampleSettings.live:i.get().streaming.abr.throughput.sampleSettings.vod:o;break;case A.default.THROUGHPUT_TYPES.LATENCY:y=s===A.default.THROUGHPUT_CALCULATION_MODES.EWMA?n.getEwmaLatencyDict(t):n.getLatencyDict(t),b=v.latencyHalfLife,E=!1,o=isNaN(o)?i.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:o}if(!y||0===y.length)return NaN;switch(s){case A.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return a=l(y,o,e),u(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return a=l(y,o,e),d(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return a=l(y,o,e),c(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return a=l(y,o,e),h(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return a=l(y,o,e),f(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return a=l(y,o,e),g(y,a);case A.default.THROUGHPUT_CALCULATION_MODES.EWMA:return p(y,b,E);case A.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return a=l(y,o,e),m(y,a)}}function l(e,t,n){if(e){if(t>=e.length)t=e.length;else if(n===A.default.THROUGHPUT_TYPES.BANDWIDTH&&i.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let r=1;r<t;++r){const n=e[e.length-r].value/e[e.length-r-1].value;if((n>=i.get().streaming.abr.throughput.sampleSettings.increaseScale||n<=i.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(t+=1)===e.length)break}}else t=0;return t}function u(e,t){let n=e;return 0!==t&&n&&0!==n.length?(n=n.slice(-t),n.reduce((e,t)=>e+t.value,0)/n.length):NaN}function d(e,t){let n=e;if(0===t||!n||0===n.length)return NaN;n=n.slice(-t);let r=0;return n.reduce((e,t)=>{let n=Math.sqrt(t.downloadedBytes);return r+=n,e+t.value*n},0)/r}function c(e,t){let n=e;if(0===t||!n||0===n.length)return NaN;n=n.slice(-t);let r=0;return n.reduce((e,t,n)=>{let i=n+1;return r+=i,e+t.value*i},0)/r}function h(e,t){let n=e;if(0===t||!n||0===n.length)return NaN;n=n.slice(-t);const r=n.reduce((e,t)=>e+1/t.value,0);return n.length/r}function f(e,t){let n=e;if(0===t||!n||0===n.length)return NaN;n=n.slice(-t);let r=0;const i=n.reduce((e,t)=>{let n=Math.sqrt(t.downloadedBytes);return r+=n,e+1/t.value*n},0);return r/i}function g(e,t){let n=e;if(0===t||!n||0===n.length)return NaN;n=n.slice(-t);let r=0;const i=n.reduce((e,t,n)=>{let i=n+1;return r+=i,e+1/t.value*i},0);return r/i}function p(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||e.totalWeight<=0)return NaN;const r=e.fastEstimate/(1-Math.pow(.5,e.totalWeight/t.fast)),i=e.slowEstimate/(1-Math.pow(.5,e.totalWeight/t.slow));return n?Math.min(r,i):Math.max(r,i)}function m(e,t){if(0===t||!e||0===e.length)return NaN;let n=e.slice(-t).map(e=>e.value),r=2/(n.length+1),i=n[n.length-1],a=n[n.length-1];for(let s=0;s<n.length;s++)i=r*n[s]+(1-r)*i,a=r*i+(1-r)*a;return a}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;const r=o(A.default.THROUGHPUT_TYPES.BANDWIDTH,e,t,n);return Math.round(r)}const v={getArithmeticMean:u,getAverageLatency:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;const r=o(A.default.THROUGHPUT_TYPES.LATENCY,e,t,n);return Math.round(r)},getAverageThroughput:y,getByteSizeWeightedArithmeticMean:d,getByteSizeWeightedHarmonicMean:f,getDateWeightedArithmeticMean:c,getDateWeightedHarmonicMean:g,getEwma:p,getHarmonicMean:h,getRawThroughputData:function(e){return e?n.getThroughputDict(e):[]},getSafeAverageThroughput:function(e){let t=y(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN);return isNaN(t)||(t*=i.get().streaming.abr.throughput.bandwidthSafetyFactor),t},getZlema:m,initialize:function(){n=qo(e).create({settings:i}),t.on(D.default.METRIC_ADDED,s,v),performance&&performance.addEventListener("resourcetimingbufferfull",a)},reset:function(){n.reset(),t.off(D.default.METRIC_ADDED,s,v),performance&&performance.removeEventListener("resourcetimingbufferfull",a)},setConfig:function(e){e.settings&&(i=e.settings),e.playbackController&&(r=e.playbackController)}};return v}Go.__dashjs_factory_name="ThroughputController";var Ho=x.default.getSingletonFactory(Go);function Vo(){const e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",n="You must first call attachView() to set the video element before calling this method",r="You must first call attachSource() with a valid source before calling this method",i="MediaPlayer not initialized!",a=this.context,s=(0,_.default)(a).getInstance();let o=(0,$.default)(a).getInstance();const l=(0,C.default)(a).getInstance({settings:o});let u,d,c,h,f,g,p,m,y,v,b,E,T,S,L,P,O,F,U,z,B,j,q,H,V,Y,W,X,Q,J,Z,ee,te,ne,re,ie,ae,se,oe,le,ue;function de(){ke(null),we(null),h=null,L&&(L.reset(),L=null),P&&(P.reset(),P=null),B&&B.reset(),o.reset(),F&&(F.reset(),F=null)}function ce(){return!!c&&!!ae.getElement()}function he(){return(0,vs.getVersionString)()}function fe(){if(!p)throw t;return Q.isPaused()}function ge(){if(!p)throw t;return Q.getIsDynamic()}function pe(e){const t=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let n=te.getCurrentDVRInfo(t);return n?me(n.range.start+e,n):0}function me(e,t){let n=Q.getOriginalLiveDelay();return e>t.range.end-n&&(e=t.range.end-n),e}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!p)throw t;let n=Se().currentTime;return""!==e&&(n=Y.getTimeRelativeToStreamId(n,e)),n}function be(e){(0,ve.checkParameterType)(e,"boolean"),m=e}function Ee(){B.restoreDefaultUTCTimingSources()}function Te(){return te}function Se(){if(!ae.getElement())throw n;return ae.getElement()}function we(e){if(!f)throw i;ae.setElement(e),e&&(Ce(),function(){if(P||"undefined"==typeof dashjs)return;let e=dashjs.MetricsReporting;if("function"==typeof e){let t=e(a).create();P=t.createMetricsReporting({debug:l,eventBus:s,mediaElement:Se(),adapter:U,dashMetrics:te,mediaPlayerModel:z,events:R.default,constants:A.default,metricsConstants:k})}}(),function(){if(O||"undefined"==typeof dashjs)return;let e=dashjs.MssHandler;"function"==typeof e&&(K.extend(e.errors),O=e(a).create({eventBus:s,mediaPlayerModel:z,dashMetrics:te,manifestModel:ne,playbackController:Q,streamController:Y,protectionController:L,baseURLController:q,errHandler:j,events:R.default,constants:A.default,debug:l,initSegmentType:N.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:go,ISOBoxer:Yn,settings:o}))}(),Y&&Y.switchToVideoElement(y)),p&&Re(),Le(y)}function Ie(t){if(!g)throw e;let n=Y.getActiveStreamInfo();return n?S.getTracksFor(t,n.id).filter(e=>!L||L.areKeyIdsUsable(e.normalizedKeyIds)):[]}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!f)throw i;"string"==typeof e&&se.initialize(e),null==t&&(t=NaN),isNaN(t)||(t=Math.max(0,t)),y=t,c=e,(g||p)&&Re(),ce()&&Le(y)}function _e(){if(!g)throw e;let t=Y.getActiveStreamInfo();return t?Y.getStreamById(t.id):null}function Re(){p=!1,g=!1,U.reset(),Y.reset(),X.reset(),ee.reset(),Q.reset(),J.reset(),Z.reset(),v.reset(),b.reset(),S.reset(),le.reset(),L&&(o.get().streaming.protection.keepProtectionMediaKeys?L.stop():(L.reset(),L=null,Ce())),W.reset(),re.reset(),ie.reset()}function xe(){return ta(a).create({debug:l,errHandler:j,dashMetrics:te,mediaPlayerModel:z,mssHandler:O,settings:o})}function Ce(){if(L)return L;if("undefined"==typeof dashjs)return null;let e=dashjs.Protection;if("function"==typeof e){let t=e(a).create();return R.default.extend(e.events),D.default.extend(e.events,{publicOnly:!0}),K.extend(e.errors),L=t.createProtectionSystem({debug:l,errHandler:j,videoModel:ae,customParametersModel:B,capabilities:H,eventBus:s,events:R.default,BASE64:go,constants:A.default,cmcdModel:re,settings:o}),H||(H=(0,ia.default)(a).getInstance()),H.setProtectionController(L),L}return null}function De(){if(!f)throw i;if(F)return F;if("undefined"==typeof dashjs)return null;let e=dashjs.OfflineController;if("function"==typeof e){R.default.extend(e.events),D.default.extend(e.events,{publicOnly:!0}),K.extend(e.errors);const t=xe(),n=gr(a).create();return n.setConfig({manifestModel:ne,adapter:U,manifestLoader:t,errHandler:j,contentSteeringController:Z}),F=e(a).create({debug:l,manifestUpdater:n,baseURLController:q,manifestLoader:t,manifestModel:ne,mediaPlayerModel:z,abrController:v,playbackController:Q,adapter:U,errHandler:j,dashMetrics:te,timelineConverter:T,segmentBaseController:le,schemeLoaderFactory:E,eventBus:s,events:R.default,errors:K,constants:A.default,settings:o,dashConstants:I.default,urlUtils:Ae(a).getInstance()}),F}return null}function Le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;F&&F.resetRecords(),!g&&c&&(g=!0,d.info("Streaming Initialized"),function(){const e=xe();Y||(Y=kr(a).getInstance()),W||(W=Bo(a).create({errHandler:j,manifestModel:ne,adapter:U,mediaController:S,baseURLController:q,videoModel:ae,settings:o})),V.setConfig({capabilities:H,customParametersModel:B,adapter:U,settings:o,protectionController:L,manifestModel:ne,errHandler:j}),Y.setConfig({capabilities:H,capabilitiesFilter:V,manifestLoader:e,manifestModel:ne,mediaPlayerModel:z,customParametersModel:B,protectionController:L,textController:W,adapter:U,dashMetrics:te,errHandler:j,timelineConverter:T,videoModel:ae,playbackController:Q,serviceDescriptionController:J,contentSteeringController:Z,abrController:v,throughputController:b,mediaController:S,settings:o,baseURLController:q,uriFragmentModel:se,segmentBaseController:le}),X.setConfig({settings:o,playbackController:Q,streamController:Y,videoModel:ae,timelineConverter:T,adapter:U}),Q.setConfig({streamController:Y,serviceDescriptionController:J,dashMetrics:te,adapter:U,videoModel:ae,timelineConverter:T,settings:o}),ee.setConfig({streamController:Y,playbackController:Q,mediaPlayerModel:z,videoModel:ae,settings:o}),b.setConfig({settings:o,playbackController:Q}),v.setConfig({streamController:Y,capabilities:H,domStorage:oe,mediaPlayerModel:z,customParametersModel:B,throughputController:b,cmsdModel:ie,dashMetrics:te,adapter:U,videoModel:ae,settings:o}),re.setConfig({abrController:v,dashMetrics:te,playbackController:Q,serviceDescriptionController:J,throughputController:b}),ue.setConfig({serviceDescriptionController:J}),ie.setConfig({}),S.initialize(),b.initialize(),v.initialize(),Y.initialize(m,h),W.initialize(),X.initialize(),ee.initialize(),re.initialize(m),ie.initialize(),Z.initialize(),le.initialize()}(),"string"==typeof c?Y.load(c,e):Y.loadWithManifest(c,e)),!p&&ce()&&(p=!0,s.trigger(D.default.PLAYBACK_INITIALIZED),d.info("Playback Initialized"))}return u={addABRCustomRule:function(e,t,n){B.addAbrCustomRule(e,t,n)},addRequestInterceptor:function(e){B.addRequestInterceptor(e)},addResponseInterceptor:function(e){B.addResponseInterceptor(e)},addUTCTimingSource:function(e,t){B.addUTCTimingSource(e,t)},attachProtectionController:function(e){L=e},attachSource:ke,attachTTMLRenderingDiv:function(e){if(!ae.getElement())throw n;ae.setTTMLRenderingDiv(e)},attachView:we,attachVttRenderingDiv:function(e){if(!ae.getElement())throw n;ae.setVttRenderingDiv(e)},clearDefaultUTCTimingSources:function(){B.clearDefaultUTCTimingSources()},convertToTimeCode:function(e){e=Math.max(e,0);let t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},destroy:function(){de(),x.default.deleteSingletonInstances(a)},duration:function(){if(!p)throw t;let e=Se().duration;if(Q.getIsDynamic()){const t=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let n=te.getCurrentDVRInfo(t);e=n?n.range.end-n.range.start:0}return e},enableForcedTextStreaming:function(e){return!(!Y.getActiveStreamInfo()||!W)&&W.enableForcedTextStreaming(e)},enableText:function(e){const t=Y.getActiveStreamInfo();return!(!t||!W)&&W.enableText(t.id,e)},extend:function(e,t,n){x.default.extend(e,t,n,a)},formatUTC:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Date(1e3*e),a=i.toLocaleDateString(t),s=i.toLocaleTimeString(t,{hour12:n});return r?s+" "+a:s},getABRCustomRules:function(){return B.getAbrCustomRules()},getActiveStream:_e,getAutoPlay:function(){return m},getAvailableBaseUrls:function(){const e=ne.getValue();return e?q.getBaseUrls(e):[]},getAvailableLocations:function(){const e=ne.getValue();if(!e)return[];const t=U.getLocation(e),n=Z.getSynthesizedLocationElements(t);return t.concat(n)},getAverageLatency:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.default.VIDEO,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getAverageLatency(e,t,n):0},getAverageThroughput:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.default.VIDEO,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getAverageThroughput(e,t,n):0},getBufferLength:function(e){const t=[A.default.VIDEO,A.default.AUDIO,A.default.TEXT];if(e)return-1!==t.indexOf(e)?Te().getCurrentBufferLevel(e)||NaN:(d.warn("getBufferLength requested for invalid type"),NaN);{const e=t.map(e=>Ie(e).length>0?Te().getCurrentBufferLevel(e):Number.MAX_VALUE).reduce((e,t)=>Math.min(e,t));return e===Number.MAX_VALUE?NaN:e}},getCurrentLiveLatency:function(){if(!f)throw i;return p?Q.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(t){if(!g)throw e;if(t!==A.default.IMAGE&&t!==A.default.VIDEO&&t!==A.default.AUDIO)return null;const n=_e();if(!n)return null;if(t===A.default.IMAGE){const e=n.getThumbnailController();return e?e.getCurrentTrack():-1}return n.getCurrentRepresentationForType(t)},getCurrentSteeringResponseData:function(){if(Z)return Z.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let e=NaN;const t=Y.getActiveStreamInfo();if(t&&W)return e=W.getCurrentTrackIdx(t.id),e},getCurrentTrackFor:function(t){if(!g)throw e;let n=Y.getActiveStreamInfo();return n?S.getCurrentTrackFor(t,n.id):null},getDashAdapter:function(){return U},getDashMetrics:Te,getDebug:function(){return l},getDvrSeekOffset:pe,getDvrWindow:function(){if(!p)throw t;const e=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let n=te.getCurrentDVRInfo(e);if(!n)return{};let r=0;const i=Q.getIsDynamic();return i&&(r=n.manifestInfo.availableFrom.getTime()/1e3),{start:n.range.start,end:n.range.end,startAsUtc:i?r+n.range.start:NaN,endAsUtc:i?r+n.range.end:NaN,size:n.range.end-n.range.start}},getInitialMediaSettingsFor:function(e){if(!f)throw i;return S.getInitialSettings(e)},getLowLatencyModeEnabled:function(){if(!p)throw t;return Q.getLowLatencyModeEnabled()},getManifest:function(){return ne.getValue()},getOfflineController:function(){return De()},getPlaybackRate:function(){return Se().playbackRate},getProtectionController:function(){return Ce()},getRawThroughputData:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.default.VIDEO;return b?b.getRawThroughputData(e):[]},getRepresentationsByType:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!g)throw e;let r=n?Y.getStreamById(n):_e();return r?r.getRepresentationsByType(t):[]},getSafeAverageThroughput:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A.default.VIDEO,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN;return b?b.getSafeAverageThroughput(e,t,n):0},getSettings:function(){return o.get()},getSource:function(){if(!c)throw r;return c},getStreamsFromManifest:function(t){if(!g)throw e;return U.getStreamsInfo(t)},getTTMLRenderingDiv:function(){return ae?ae.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!p)throw t;return Q.getOriginalLiveDelay()},getTracksFor:Ie,getTracksForTypeFromManifest:function(t,n,r){if(!g)throw e;return(r=r||U.getStreamsInfo(n,1)[0])?U.getAllMediaInfoForType(r,t,n):[]},getVersion:he,getVideoElement:Se,getVolume:function(){return Se().volume},getXHRWithCredentialsForType:function(e){return B.getXHRWithCredentialsForType(e)},initialize:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;H||(H=(0,ia.default)(a).getInstance(),H.setConfig({settings:o,protectionController:L})),j||(j=ra(a).getInstance()),H.supportsMediaSource()?(f||(f=!0,T=ho(a).getInstance(),b||(b=Ho(a).getInstance()),v||(v=ss(a).getInstance()),E||(E=Nn(a).getInstance()),Q||(Q=M(a).getInstance()),S||(S=di(a).getInstance()),Y||(Y=kr(a).getInstance()),X||(X=Rr(a).getInstance()),ee||(ee=Cr(a).getInstance()),J||(J=Pr(a).getInstance()),Z||(Z=dr(a).getInstance()),V||(V=sa(a).getInstance()),U=qs(a).getInstance(),ne=ca(a).getInstance(),re=Jt(a).getInstance(),ie=Tn(a).getInstance(),ue=kn(a).getInstance(),te=io(a).getInstance({settings:o}),oe=ys(a).getInstance({settings:o}),U.setConfig({constants:A.default,cea608parser:new w,errHandler:j,BASE64:go}),q||(q=Ai(a).create()),q.setConfig({adapter:U,contentSteeringController:Z}),J.setConfig({adapter:U}),le||(le=ks(a).getInstance({dashMetrics:te,mediaPlayerModel:z,errHandler:j,baseURLController:q,events:R.default,eventBus:s,debug:l,boxParser:Qn(a).getInstance(),errors:K})),S.setConfig({domStorage:oe,settings:o,mediaPlayerModel:z,customParametersModel:B,videoModel:ae}),z.setConfig({playbackController:Q,serviceDescriptionController:J}),Z.setConfig({adapter:U,errHandler:j,dashMetrics:te,mediaPlayerModel:z,manifestModel:ne,serviceDescriptionController:J,throughputController:b,eventBus:s}),Ee(),be(void 0===n||n),De()),e&&we(e),t&&ke(t,r),d.info("[dash.js "+he()+"] MediaPlayer has been initialized")):j.error(new G.default(K.CAPABILITY_MEDIASOURCE_ERROR_CODE,K.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:ge,isMuted:function(){return Se().muted},isPaused:fe,isReady:ce,isSeeking:function(){if(!p)throw t;return Q.isSeeking()},isTextEnabled:function(){const e=Y.getActiveStreamInfo();return!(!e||!W)&&W.isTextEnabled(e)},off:function(e,t,n){s.off(e,t,n)},on:function(e,t,n,r){s.on(e,t,n,r)},pause:function(){if(!p)throw t;Q.pause()},play:function(){if(!p)throw t;(!m||fe()&&p)&&Q.play(!0)},preload:function(){if(!ae.getElement()&&!g){if(!c)throw r;Le(y)}},provideThumbnail:function(e,t){if("function"!=typeof t)return;if(e<0)return void t(null);const n=Q.getIsDynamic()?pe(e):e,r=Y.getStreamForTime(n);if(null===r)return void t(null);const i=r.getThumbnailController();if(i)return i.provide(n,t);t(null)},refreshManifest:function(e){if(!f)throw i;if(!ce())return e(null,r);let t=this;if("function"==typeof e){const n=function(r){s.off(R.default.INTERNAL_MANIFEST_LOADED,n,t),r.error?e(null,r.error):e(r.manifest)};s.on(R.default.INTERNAL_MANIFEST_LOADED,n,t)}Y.refreshManifest()},registerCustomCapabilitiesFilter:function(e){B.registerCustomCapabilitiesFilter(e)},registerLicenseRequestFilter:function(e){B.registerLicenseRequestFilter(e)},registerLicenseResponseFilter:function(e){B.registerLicenseResponseFilter(e)},removeABRCustomRule:function(e){B.removeAbrCustomRule(e)},removeAllABRCustomRule:function(){B.removeAllAbrCustomRule()},removeRequestInterceptor:function(e){B.removeRequestInterceptor(e)},removeResponseInterceptor:function(e){B.removeResponseInterceptor(e)},removeUTCTimingSource:function(e,t){B.removeUTCTimingSource(e,t)},reset:de,resetCustomInitialTrackSelectionFunction:function(){B.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){o.reset()},restoreDefaultUTCTimingSources:Ee,retrieveManifest:function(e,t){let n=xe(),r=this;const i=function(e){e.error?t(null,e.error):t(e.manifest),s.off(R.default.INTERNAL_MANIFEST_LOADED,i,r),n.reset()};s.on(R.default.INTERNAL_MANIFEST_LOADED,i,r),se.initialize(e),n.load(e)},seek:function(e){if(!p)throw t;if((0,ve.checkParameterType)(e,"number"),isNaN(e))throw A.default.BAD_ARGUMENT_ERROR;e<0&&(e=0);let n=Q.getIsDynamic()?pe(e):e;const r=Se();!Q.getIsDynamic()&&r.duration&&(n=Math.min(r.duration,n)),Q.seek(n,!1,!1,!0)},seekToOriginalLive:function(){p&&ge()&&Q.seekToOriginalLive()},seekToPresentationTime:function(e){if(!p)throw t;if((0,ve.checkParameterType)(e,"number"),isNaN(e))throw A.default.BAD_ARGUMENT_ERROR;e<0&&(e=0);const n=Se();if(!Q.getIsDynamic()&&n.duration&&(e=Math.min(n.duration,e)),Q.getIsDynamic()){const t=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let n=te.getCurrentDVRInfo(t);if(!n)return;(e=me(e,n))<n.range.start&&(e=n.range.start)}Q.seek(e,!1,!1,!0)},setAutoPlay:be,setConfig:function(e){e&&(e.capabilities&&(H=e.capabilities),e.capabilitiesFilter&&(V=e.capabilitiesFilter),e.streamController&&(Y=e.streamController),e.textController&&(W=e.textController),e.gapController&&(X=e.gapController),e.throughputController&&(b=e.throughputController),e.playbackController&&(Q=e.playbackController),e.serviceDescriptionController&&(J=e.serviceDescriptionController),e.contentSteeringController&&(Z=e.contentSteeringController),e.clientDataReportingController&&(ue=e.clientDataReportingController),e.catchupController&&(ee=e.catchupController),e.mediaPlayerModel&&(z=e.mediaPlayerModel),e.customParametersModel&&(B=e.customParametersModel),e.abrController&&(v=e.abrController),e.schemeLoaderFactory&&(E=e.schemeLoaderFactory),e.mediaController&&(S=e.mediaController),e.settings&&(o=e.settings),e.dashMetrics&&(te=e.dashMetrics))},setCurrentTrack:function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!g)throw e;!L||L.areKeyIdsUsable(t.normalizedKeyIds)?S.setTrack(t,{noSettingsSave:n}):d.error(`Can not switch to track with index ${t.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(e){B.setCustomInitialTrackSelectionFunction(e)},setInitialMediaSettingsFor:function(e,t){if(!f)throw i;let n=function(e){const t=o.get().streaming.defaultSchemeIdUri;let n={};function r(e,t,n){let r={};if(t){if(t instanceof Array)throw"Array type not supported for settings!";return t instanceof Object?(r.schemeIdUri=t.schemeIdUri?t.schemeIdUri:"",r.value=t.value?t.value:""):(r.schemeIdUri=n,r.value=t,d.warn("No schemeIdUri provided for "+e+', using default "'+n+'"')),r}return null}return void 0!==e.id&&(n.id=e.id),void 0!==e.lang&&(n.lang=e.lang),isNaN(e.index)||(n.index=e.index),void 0!==e.viewpoint&&(n.viewpoint=r("viewpoint",e.viewpoint,t.viewpoint)),void 0!==e.audioChannelConfiguration&&(n.audioChannelConfiguration=r("audioChannelConfiguration",e.audioChannelConfiguration,t.audioChannelConfiguration)),void 0!==e.role&&(n.role=r("role",e.role,t.role),n.role.schemeIdUri===A.default.DASH_ROLE_SCHEME_ID&&"Main"===n.role.value&&(n.role.value=I.default.MAIN)),void 0!==e.accessibility&&(n.accessibility=r("accessibility",e.accessibility,t.accessibility)),n}(t);S.setInitialSettings(e,n)},setMute:function(e){(0,ve.checkParameterType)(e,"boolean"),Se().muted=e},setPlaybackRate:function(e){Se().playbackRate=e},setProtectionData:function(e){h=e,Y&&Y.setProtectionData(h)},setRepresentationForTypeById:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t!==A.default.IMAGE&&t!==A.default.VIDEO&&t!==A.default.AUDIO)return;if(!g)throw e;const i=_e();if(i)if(t===A.default.IMAGE){const e=i.getThumbnailController();e&&e.setTrackById(n)}else{const e=i.getRepresentationForTypeById(t,n);e&&v.setPlaybackQuality(t,Y.getActiveStreamInfo(),e,{forceReplace:r})}},setRepresentationForTypeByIndex:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t!==A.default.IMAGE&&t!==A.default.VIDEO&&t!==A.default.AUDIO)return;if(!g)throw e;const i=_e();if(i)if(t===A.default.IMAGE){const e=i.getThumbnailController();e&&e.setTrackByIndex(n)}else{const e=i.getRepresentationForTypeByIndex(t,n);e&&v.setPlaybackQuality(t,Y.getActiveStreamInfo(),e,{forceReplace:r})}},setTextTrack:function(e){if(!p)throw t;const n=Y.getActiveStreamInfo();n&&W&&W.setTextTrack(n.id,e)},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw A.default.BAD_ARGUMENT_ERROR;Se().volume=e},setXHRWithCredentialsForType:function(e,t){B.setXHRWithCredentialsForType(e,t)},time:ye,timeAsUTC:function(){if(!p)throw t;if(!Q.getIsDynamic()||ye()<0)return NaN;const e=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let n,r,i=te.getCurrentDVRInfo(e);return i?(n=i.manifestInfo.availableFrom.getTime()/1e3,r=n+ye(),r):0},timeInDvrWindow:function(){if(!p)throw t;if(!Q.getIsDynamic())return ye();let e=Se().currentTime;const n=Y&&Y.hasVideoTrack()?A.default.VIDEO:A.default.AUDIO;let r=te.getCurrentDVRInfo(n);return e=null===r||0===e?0:Math.max(0,e-r.range.start),e},trigger:function(e,t,n){s.trigger(e,t,n)},triggerSteeringRequest:function(){if(Z)return Z.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(e){B.unregisterCustomCapabilitiesFilter(e)},unregisterLicenseRequestFilter:function(e){B.unregisterLicenseRequestFilter(e)},unregisterLicenseResponseFilter:function(e){B.unregisterLicenseResponseFilter(e)},updateSettings:function(e){o.update(e)},updateSource:function(e){c=e,Y.load(c)}},d=l.getLogger(u),f=!1,p=!1,g=!1,m=!0,y=NaN,L=null,F=null,h=null,U=null,le=null,R.default.extend(D.default),z=fa(a).getInstance(),B=(0,Sn.default)(a).getInstance(),ae=us(a).getInstance(),se=ua(a).getInstance(),u}Vo.__dashjs_factory_name="MediaPlayer";const Ko=x.default.getClassFactory(Vo);Ko.events=D.default,Ko.errors=K,x.default.updateClassFactory(Vo.__dashjs_factory_name,Ko);var $o=Ko},1191:function(e,t,n){n.r(t);var r=n(7252);class i extends r.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let a=new i;t.default=a},5212:function(e,t,n){n.r(t),t.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(e,t,n){n.r(t),t.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});class r{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var i=r,a=n(913),s=n(138);function o(e){let t,n;const r=(e=e||{}).eventBus,s=e.dashMetrics,o=e.metricsConstants,l=e.events;function u(e){let t=new i;if(n){for(const n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),s.addDVBErrors(t)}}function d(e){e.error||(n=e.manifest)}function c(e){u({errorcode:i.BASE_URL_CHANGED,servicelocation:e.entry})}function h(){u({errorcode:i.BECAME_REPORTER})}function f(e){var t;e.metric===o.HTTP_REQUEST&&(0===(t=e.value).responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&u({errorcode:t.responsecode||i.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function g(e){let t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=i.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=i.CORRUPT_MEDIA_OTHER;break;default:return}u({errorcode:t})}return t={initialize:function(){r.on(l.MANIFEST_UPDATED,d,t),r.on(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,c,t),r.on(l.METRIC_ADDED,f,t),r.on(l.METRIC_UPDATED,f,t),r.on(l.PLAYBACK_ERROR,g,t),r.on(a.default.BECAME_REPORTING_PLAYER,h,t)},reset:function(){r.off(l.MANIFEST_UPDATED,d,t),r.off(l.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,c,t),r.off(l.METRIC_ADDED,f,t),r.off(l.METRIC_UPDATED,f,t),r.off(l.PLAYBACK_ERROR,g,t),r.off(a.default.BECAME_REPORTING_PLAYER,h,t)}},t}o.__dashjs_factory_name="DVBErrorsTranslator";var l=s.default.getSingletonFactory(o),u=n(7377);function d(e){e=e||{};let t,n,r=!1,i=this.context,a=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(e=>{let t=e.starttime,r=t+e.duration;n.add(t,r)}),r=!!e[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){let e,t=n.length;if(!t)return!0;e=r?(new Date).getTime()/1e3:a.currentTime;for(let r=0;r<t;r+=1){let t=n.start(r),i=n.end(r);if(t<=e&&e<i)return!0}return!1}},n=(0,u.default)(i).create(),t}d.__dashjs_factory_name="RangeController";var c=s.default.getClassFactory(d);function h(){return{serialise:function e(t){let n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(r=t[n],null==r&&(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach(function(t){let n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))}),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}h.__dashjs_factory_name="MetricSerialiser";var f=s.default.getSingletonFactory(h);function g(){let e,t,n,r=window.crypto||window.msCrypto,i=Uint32Array,a=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function s(){r&&(e||(e=new i(10)),r.getRandomValues(e),t=0)}return n={random:function(n,i){let o;return n||(n=0),i||(i=1),r?(t===e.length&&s(),o=e[t]/a,t+=1):o=Math.random(),o*(i-n)+n}},s(),n}g.__dashjs_factory_name="RNG";var p=s.default.getSingletonFactory(g),m=n(1926);function y(e){let t;e=e||{};let n,r,i,a,s,o,l,u=this.context,d=[];const c=e.metricsConstants;function h(){a=!1,s=!1,o=null,l=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),s&&l.isEnabled()&&t.forEach(function(t){let i=n.serialise(t);e!==c.DVB_ERRORS&&(i=`metricname=${e}&${i}`),i=`${o}?${i}`,function(e,t,n){let i=new XMLHttpRequest;i.withCredentials=r.getXHRWithCredentialsForType(c.HTTP_REQUEST_DVB_REPORTING_TYPE);const a=function(){let e=d.indexOf(i);-1!==e&&(d.splice(e,1),!(i.status>=200&&i.status<300)&&n&&n())};d.push(i);try{i.open("GET",e),i.onloadend=a,i.onerror=a,i.send()}catch(s){i.onerror()}}(i,0,function(){s=!1})})},initialize:function(e,t){let n;if(l=t,o=e.dvbReportingUrl,!o)throw new Error("required parameter missing (dvb:reportingUrl)");a||(n=e.dvbProbability,n&&(1e3===n||n/1e3>=i.random())&&(s=!0),a=!0)},reset:function(){h()}},n=f(u).getInstance(),i=p(u).getInstance(),r=(0,m.default)(u).getInstance(),h(),t}y.__dashjs_factory_name="DVBReporting";var v=s.default.getClassFactory(y);function b(e){e=e||{};const t={"urn:dvb:dash:reporting:2014":v},n=this.context;let r;const i=e.debug?e.debug.getLogger(r):{},a=e.metricsConstants,s=e.mediaPlayerModel||{};return r={create:function(e,r){let o;try{o=t[e.schemeIdUri](n).create({metricsConstants:a,mediaPlayerModel:s}),o.initialize(e,r)}catch(l){o=null,i.error(`ReportingFactory: could not create Reporting with schemeIdUri ${e.schemeIdUri} (${l.message})`)}return o},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}},r}b.__dashjs_factory_name="ReportingFactory";var E=s.default.getSingletonFactory(b);function T(e){let t,n=[];const r=E(this.context).getInstance(e);return t={initialize:function(e,t){e.some(e=>{let i=r.create(e,t);if(i)return n.push(i),!0})},reset:function(){n.forEach(e=>e.reset()),n=[]},report:function(e,t){n.forEach(n=>n.report(e,t))}},t}T.__dashjs_factory_name="ReportingController";var S=s.default.getClassFactory(T);function w(){return{reconstructFullMetricName:function(e,t,n){let r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}w.__dashjs_factory_name="HandlerHelpers";var A=s.default.getSingletonFactory(w);function I(e){let t,n,r,i,a,s;e=e||{};let o=this.context,l=A(o).getInstance(),u=[];const d=e.metricsConstants;function c(){let e=function(){try{return Object.keys(u).map(e=>u[e]).reduce((e,t)=>e.level<t.level?e:t)}catch(e){return}}();e&&s!==e.t&&(s=e.t,n.report(i,e))}return t={initialize:function(e,t,s){t&&(r=l.validateN(s),n=t,i=l.reconstructFullMetricName(e,s),a=setInterval(c,r))},reset:function(){clearInterval(a),a=null,r=0,n=null,s=null},handleNewMetric:function(e,t,n){e===d.BUFFER_LEVEL&&(u[n]=t)}},t}I.__dashjs_factory_name="BufferLevelHandler";var k=s.default.getClassFactory(I),_=s.default.getClassFactory(function(e){let t,n,r=(e=e||{}).eventBus;const i=e.metricsConstants;function s(){r.off(a.default.METRICS_INITIALISATION_COMPLETE,s,this),r.trigger(a.default.BECAME_REPORTING_PLAYER)}return t={initialize:function(e,t){t&&(n=t,r.on(a.default.METRICS_INITIALISATION_COMPLETE,s,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}},t});function R(e){let t,n,r,i,a,s;e=e||{};let o=[],l=A(this.context).getInstance();const u=e.metricsConstants;function d(){var e=o;e.length&&n&&n.report(a,e),o=[]}return t={initialize:function(e,t,o,u){t&&(r=l.validateN(o),n=t,u&&u.length&&(i=u),a=l.reconstructFullMetricName(e,o,u),s=setInterval(d,r))},reset:function(){clearInterval(s),s=null,r=null,i=null,o=[],n=null},handleNewMetric:function(e,t){e===u.HTTP_REQUEST&&(i&&i!==t.type||o.push(t))}},t}R.__dashjs_factory_name="HttpListHandler";var x=s.default.getClassFactory(R);function C(){let e,t,n;return e={initialize:function(e,r){t=e,n=r},reset:function(){n=null,t=void 0},handleNewMetric:function(e,r){e===t&&n&&n.report(t,r)}},e}C.__dashjs_factory_name="GenericMetricHandler";var D=s.default.getClassFactory(C);function L(e){let t;const n=(e=e||{}).debug?e.debug.getLogger(t):{};let r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const i=this.context;let a={BufferLevel:k,DVBErrors:_,HttpList:x,PlayList:D,RepSwitchList:D,TcpList:D};return t={create:function(t,s){var o,l=t.match(r);if(l){try{(o=a[l[1]](i).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(l[1],s,l[3],l[5])}catch(u){o=null,n.error(`MetricsHandlerFactory: Could not create handler for type ${l[1]} with args ${l[3]}, ${l[5]} (${u.message})`)}return o}},register:function(e,t){a[e]=t},unregister:function(e){delete a[e]}},t}L.__dashjs_factory_name="MetricsHandlerFactory";var M=s.default.getSingletonFactory(L);function N(e){e=e||{};let t,n=[];const r=this.context,i=e.eventBus,a=e.events;let s=M(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function o(e){n.forEach(t=>{t.handleNewMetric(e.metric,e.value,e.mediaType)})}return t={initialize:function(e,r){e.split(",").forEach((e,t,i)=>{let a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){let n=i[t+1];n&&-1===n.indexOf("(")&&-1!==n.indexOf(")")&&(e+=","+n,delete i[t+1])}a=s.create(e,r),a&&n.push(a)}),i.on(a.METRIC_ADDED,o,t),i.on(a.METRIC_UPDATED,o,t)},reset:function(){i.off(a.METRIC_ADDED,o,t),i.off(a.METRIC_UPDATED,o,t),n.forEach(e=>e.reset()),n=[]}},t}N.__dashjs_factory_name="MetricsHandlersController";var P=s.default.getClassFactory(N);function O(e){let t,n,r,i;e=e||{};let a=this.context;function s(){t&&t.reset(),n&&n.reset(),r&&r.reset()}return i={initialize:function(i){try{r=c(a).create({mediaElement:e.mediaElement}),r.initialize(i.Range),n=S(a).create({debug:e.debug,metricsConstants:e.metricsConstants,mediaPlayerModel:e.mediaPlayerModel}),n.initialize(i.Reporting,r),t=P(a).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events}),t.initialize(i.metrics,n)}catch(o){throw s(),o}},reset:s},i}O.__dashjs_factory_name="MetricsController";var F=s.default.getClassFactory(O),U=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},z=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},B=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function j(e){let t,n=(e=e||{}).adapter;const r=e.constants;return t={getMetrics:function(e){let t=[];return e&&e.Metrics&&e.Metrics.forEach(i=>{var a=new U,s=n.getIsDynamic(e);i.hasOwnProperty("metrics")&&(a.metrics=i.metrics,i.Range&&i.Range.forEach(t=>{var i=new z;i.starttime=function(e,t,i){let a,s,o=0;return t?o=n.getAvailabilityStartTime(e)/1e3:(a=n.getRegularPeriods(e),a.length&&(o=a[0].start)),s=o,i&&i.hasOwnProperty(r.START_TIME)&&(s+=i.starttime),s}(e,s,t),t.hasOwnProperty("duration")?i.duration=t.duration:i.duration=n.getDuration(e),i._useWallClockTime=s,a.Range.push(i)}),i.Reporting&&(i.Reporting.forEach(e=>{var t=new B;e.hasOwnProperty(r.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(r.DVB_REPORTING_URL)&&(t.dvbReportingUrl=e[r.DVB_REPORTING_URL]),e.hasOwnProperty(r.DVB_PROBABILITY)&&(t.dvbProbability=e[r.DVB_PROBABILITY]),a.Reporting.push(t))}),t.push(a)))}),t}},t}j.__dashjs_factory_name="ManifestParsing";var q=s.default.getSingletonFactory(j);function G(e){let t;e=e||{};let n={},r=this.context,i=e.eventBus;const s=e.events;function o(t){if(t.error)return;let s=Object.keys(n);q(r).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach(t=>{const i=JSON.stringify(t);if(n.hasOwnProperty(i))s.splice(i,1);else try{let a=F(r).create(e);a.initialize(t),n[i]=a}catch(a){}}),s.forEach(e=>{n[e].reset(),delete n[e]}),i.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}function l(){Object.keys(n).forEach(e=>{n[e].reset()}),n={}}return t={reset:function(){i.off(s.MANIFEST_UPDATED,o,t),i.off(s.STREAM_TEARDOWN_COMPLETE,l,t)}},i.on(s.MANIFEST_UPDATED,o,t),i.on(s.STREAM_TEARDOWN_COMPLETE,l,t),t}G.__dashjs_factory_name="MetricsCollectionController";var H=s.default.getClassFactory(G);function V(){let e,t,n=this.context;return e={createMetricsReporting:function(e){return t=l(n).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}),t.initialize(),H(n).create(e)},getReportingFactory:function(){return E(n).getInstance()},getMetricsHandlerFactory:function(){return M(n).getInstance()}},e}V.__dashjs_factory_name="MetricsReporting";const K=dashjs.FactoryMaker.getClassFactory(V);K.events=a.default,dashjs.FactoryMaker.updateClassFactory(V.__dashjs_factory_name,K);var $=K},913:function(e,t,n){n.r(t);var r=n(7252);class i extends r.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let a=new i;t.default=a},1926:function(e,t,n){n.r(t);var r=n(5717),i=n(138),a=n(8261),s=n(656),o=n(5212);function l(){let e,t,n,i,l,u,d,c,h,f;const g=this.context,p=(0,a.default)(g).getInstance();function m(){i=[],l=[],u=[],d=[],c=[],f=[],h=null,t=[]}function y(e,t){let n=-1;e.some((e,r)=>{if(e===t)return n=r,!0}),n<0||e.splice(n,1)}function v(e){let t;for(t=0;t<f.length;t++)if(f[t].rulename===e)return t;return-1}function b(e,n){E(e,n);let i=new r.default;i.schemeIdUri=e,i.value=n,t.push(i)}function E(e,n){(0,s.checkParameterType)(e,"string"),(0,s.checkParameterType)(n,"string"),t.forEach(function(r,i){r.schemeIdUri===e&&r.value===n&&t.splice(i,1)})}return e={addAbrCustomRule:function(e,t,n){if("string"!=typeof e||e!==o.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&e!==o.default.RULES_TYPES.QUALITY_SWITCH_RULES||"string"!=typeof t)throw o.default.BAD_ARGUMENT_ERROR;let r=v(t);-1===r?f.push({type:e,rulename:t,rule:n}):(f[r].type=e,f[r].rule=n)},addRequestInterceptor:function(e){i.push(e)},addResponseInterceptor:function(e){l.push(e)},addUTCTimingSource:b,clearDefaultUTCTimingSources:function(){t=[]},getAbrCustomRules:function(){return f},getCustomCapabilitiesFilters:function(){return c},getCustomInitialTrackSelectionFunction:function(){return h},getLicenseRequestFilters:function(){return u},getLicenseResponseFilters:function(){return d},getRequestInterceptors:function(){return i},getResponseInterceptors:function(){return l},getUTCTimingSources:function(){return t},getXHRWithCredentialsForType:function(e){const t=n[e];return void 0===t?n.default:t},registerCustomCapabilitiesFilter:function(e){c.push(e)},registerLicenseRequestFilter:function(e){u.push(e)},registerLicenseResponseFilter:function(e){d.push(e)},removeAbrCustomRule:function(e){if(e){let t=v(e);-1!==t&&f.splice(t,1)}else f=[]},removeAllAbrCustomRule:function(){f=[]},removeRequestInterceptor:function(e){y(i,e)},removeResponseInterceptor:function(e){y(l,e)},removeUTCTimingSource:E,reset:function(){m()},resetCustomInitialTrackSelectionFunction:function(){h=null},restoreDefaultUTCTimingSources:function(){let e=p.get().streaming.utcSynchronization.defaultTimingSource;b(e.scheme,e.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(e){h=e},setXHRWithCredentialsForType:function e(t,r){t?n[t]=!!r:Object.keys(n).forEach(t=>{e(t,r)})},unregisterCustomCapabilitiesFilter:function(e){y(c,e)},unregisterLicenseRequestFilter:function(e){y(u,e)},unregisterLicenseResponseFilter:function(e){y(d,e)}},n={default:!1},m(),e}l.__dashjs_factory_name="CustomParametersModel",t.default=i.default.getSingletonFactory(l)},3888:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var r=n(8854),i=n(2861);const a={prefixes:["clearkey","dashif","ck"]};class s{static findMp4ProtectionElement(e){let t=null;for(let n=0;n<e.length;++n){let a=e[n];a.schemeIdUri&&a.schemeIdUri.toLowerCase()===r.default.MP4_PROTECTION_SCHEME&&a.value&&(a.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CENC||a.value.toLowerCase()===i.default.ENCRYPTION_SCHEME_CBCS)&&(t=a)}return t}static getPSSHData(e){let t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}static getPSSHForKeySystem(e,t){let n=s.parsePSSHList(t);return e&&n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(e,t){return"pssh"in e&&e.pssh?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}static parsePSSHList(e){if(null==e)return[];let t=new DataView(e.buffer||e),n={},r=0;for(;;){let e,i,a,s,o,l,u=r;if(r>=t.buffer.byteLength)break;if(e=t.getUint32(r),i=r+e,r+=4,1886614376===t.getUint32(r))if(r+=4,a=t.getUint8(r),0===a||1===a){for(r++,r+=3,s="",o=0;o<4;o++)l=t.getUint8(r+o).toString(16),s+=1===l.length?"0"+l:l;for(r+=4,s+="-",o=0;o<2;o++)l=t.getUint8(r+o).toString(16),s+=1===l.length?"0"+l:l;for(r+=2,s+="-",o=0;o<2;o++)l=t.getUint8(r+o).toString(16),s+=1===l.length?"0"+l:l;for(r+=2,s+="-",o=0;o<2;o++)l=t.getUint8(r+o).toString(16),s+=1===l.length?"0"+l:l;for(r+=2,s+="-",o=0;o<6;o++)l=t.getUint8(r+o).toString(16),s+=1===l.length?"0"+l:l;r+=6,s=s.toLowerCase(),r+=4,n[s]=t.buffer.slice(u,i),r=i}else r=i;else r=i}return n}static getLicenseServerUrlFromMediaInfo(e,t){try{if(!e||0===e.length)return null;let n=0,r=null;for(;n<e.length&&!r;){const i=e[n];if(i&&i.contentProtection&&i.contentProtection.length>0){const e=i.contentProtection.filter(e=>e.schemeIdUri&&e.schemeIdUri===t);if(e&&e.length>0){let t=0;for(;t<e.length&&!r;){const n=e[t];n.laUrl&&n.laUrl.__prefix&&a.prefixes.includes(n.laUrl.__prefix)&&n.laUrl.__text&&(r=n.laUrl.__text),t+=1}}}n+=1}return r}catch(n){return null}}static hexKidToBufferSource(e){const t=e.replace(/-/g,"");return new Uint8Array(t.match(/[\da-f]{2}/gi).map(function(e){return parseInt(e,16)})).buffer}}var o=s,l=class{constructor(e,t){this.contentType=e,this.robustness=t}},u=class{constructor(e,t,n,r,a,s){this.initDataTypes=s&&s.length>0?s:[i.default.INITIALIZATION_DATA_TYPE_CENC],e&&e.length&&(this.audioCapabilities=e),t&&t.length&&(this.videoCapabilities=t),this.distinctiveIdentifier=n,this.persistentState=r,this.sessionTypes=a}},d=n(1923),c=n(1944),h=class{constructor(e,t,n,r,i,a,s,o){this.url=e,this.method=t,this.responseType=n,this.headers=r,this.withCredentials=i,this.messageType=a,this.sessionId=s,this.data=o}},f=class{constructor(e,t,n){this.url=e,this.headers=t,this.data=n}},g=n(7568),p=n(7263),m=n(5212),y=n(138);function v(e){const t=(e=e||{}).BASE64,n=e.cmcdModel,r=e.constants,a=e.customParametersModel,s=e.debug,y=e.eventBus,v=e.events,b=e.protectionKeyController,E=e.settings;let T,S,w,A,I,k,_,R,x,C,D,L,M=e.protectionModel,N=[];function P(){if(!(y&&y.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function O(e,n){D||A?D&&F():function(e,n){if(A)return;var r;A=!0;const i=function(e){const t=[];for(let n=0;n<e.length;n++){const r=U(e[n]);t.push({ks:e[n].ks,configs:[r],protData:e[n].protData})}return t}(e=(r=e).sort((e,t)=>(T&&T[e.ks.systemString]&&T[e.ks.systemString].priority>=0?T[e.ks.systemString].priority:r.length)-(T&&T[t.ks.systemString]&&T[t.ks.systemString].priority>=0?T[t.ks.systemString].priority:r.length)));let a;M.requestKeySystemAccess(i).then(e=>(a=e.data,function(e){let t=e&&e.selectedSystemString?e.selectedSystemString:e.keySystem.systemString;return _.info("DRM: KeySystem Access Granted for system string ("+t+")!  Selecting key system..."),M.selectKeySystem(e)}(a))).then(e=>{!function(e,n){D=e,A=!1,y.trigger(v.KEY_SYSTEM_SELECTED,{data:n});const r=j(D);r&&r.serverCertificate&&r.serverCertificate.length>0&&M.setServerCertificate(t.decodeArray(r.serverCertificate).buffer),F()}(e,a)}).catch(e=>{var t;t=e,D=null,A=!1,n||y.trigger(v.KEY_SYSTEM_SELECTED,{data:null,error:new c.default(d.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,d.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)})})}(e,n)}function F(){let e;for(let n=0;n<x.length;n++)for(e=0;e<x[n].length;e++)if(D===x[n][e].ks){t=x[n][e],b.isClearKey(D)&&function(e){if(e.protData&&e.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(e.protData.clearkeys).length){const t={kids:Object.keys(e.protData.clearkeys)};e.initData=(new TextEncoder).encode(JSON.stringify(t))}}(t),t.sessionId?z(t):null!==t.initData&&B(t);break}var t;x=[]}function U(e){const t=e.protData,n=[],a=[],s=t&&t.initDataTypes&&t.initDataTypes.length>0?t.initDataTypes:[i.default.INITIALIZATION_DATA_TYPE_CENC],o=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:C,d=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:C,c=e.sessionType,h=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",f=t&&t.persistentState?t.persistentState:"temporary"===c?"optional":"required";return R.forEach(e=>{e.type===r.AUDIO?n.push(new l(e.codec,o)):e.type===r.VIDEO&&a.push(new l(e.codec,d))}),new u(n,a,h,f,[c],s)}function z(e){P(),M.loadKeySession(e)}function B(e){if(e&&function(e){if(!e)return!1;try{const t=M.getSessionTokens();for(let n=0;n<t.length;n++)if(t[n].getKeyId()===e)return!0;return!1}catch(t){return!1}}(e.keyId))return;const t=o.getPSSHForKeySystem(D,e?e.initData:null);if(t){if(q(t))return;try{e.initData=t,M.createKeySession(e)}catch(n){y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new c.default(d.default.KEY_SESSION_CREATED_ERROR_CODE,d.default.KEY_SESSION_CREATED_ERROR_MESSAGE+n.message)})}}else e&&e.initData?M.createKeySession(e):y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new c.default(d.default.KEY_SESSION_CREATED_ERROR_CODE,d.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(D?D.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function j(e){if(e){const t=e.systemString;if(T)return t in T?T[t]:null}return null}function q(e){if(!e)return!1;try{const t=M.getAllInitData();for(let n=0;n<t.length;n++)if(b.initDataEquals(e,t[n]))return _.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(t){return!1}}function G(e){P(),e?(M.setMediaElement(e),y.on(v.NEED_KEY,Q,S)):null===e&&(M.setMediaElement(e),y.off(v.NEED_KEY,Q,S))}function H(e){_.debug("DRM: onKeyMessage");const t=e.data;y.trigger(v.KEY_MESSAGE,{data:t});const n=t.messageType?t.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,r=t.message,s=t.sessionToken,l=j(D),u=b.getLicenseServerModelInstance(D,l,n),m={sessionToken:s,messageType:n};if(r&&0!==r.byteLength){if(!u)return _.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+s.getSessionId()),void V(m);if(b.isClearKey(D)){const e=b.processClearKeyLicenseRequest(D,l,r);if(e&&e.keyPairs&&e.keyPairs.length>0)return _.debug("DRM: ClearKey license request handled by application!"),V(m),void M.updateKeySession(s,e)}!function(e,t,n){const r=e.sessionToken,s=e.messageType?e.messageType:i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,l={sessionToken:r,messageType:s},u=D?D.systemString:null;let m=function(e,t,n,r,i){let a=null;const s=r.message;if(e&&e.serverURL){const n=e.serverURL;"string"==typeof n&&""!==n?a=n:"object"==typeof n&&n.hasOwnProperty(t)&&(a=n[t])}else if(e&&e.laURL&&""!==e.laURL)a=e.laURL;else if(a=o.getLicenseServerUrlFromMediaInfo(R,D.schemeIdURI),!a&&!b.isClearKey(D)){const e=o.getPSSHData(n.initData);a=D.getLicenseServerURLFromInitData(e),a||(a=r.laURL)}return a=i.getServerURLFromMessage(a,s,t),a}(n,s,r,e,t);if(!m)return void V(l,new c.default(d.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const y={};let v=!1;n&&Y(y,n.httpRequestHeaders);const T=e.message;Y(y,D.getRequestHeadersFromMessage(T)),Object.keys(y).forEach(e=>{"authorization"===e.toLowerCase()&&(v=!0)}),n&&"boolean"==typeof n.withCredentials&&(v=n.withCredentials);const S=function(e){if(M)if(e.status>=200&&e.status<=299){const n=p.default.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null);let i=new f(e.responseURL,n,e.response);X(a.getLicenseResponseFilters(),i).then(()=>{const n=t.getLicenseMessage(i.data,u,s);null!==n?(V(l),M.updateKeySession(r,n)):W(e,l,u,s,t)})}else W(e,l,u,s,t)},w=function(e){V(l,new c.default(d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+u+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},A=function(e){V(l,new c.default(d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+u+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},I=D.getLicenseRequestFromMessage(T),k=t.getHTTPMethod(s),_=t.getResponseType(u,s),x=n&&!isNaN(n.httpTimeout)?n.httpTimeout:8e3,C=r.getSessionId()||null;let L=new h(m,k,_,y,v,s,C,I);const N=isNaN(E.get().streaming.retryAttempts[g.HTTPRequest.LICENSE])?3:E.get().streaming.retryAttempts[g.HTTPRequest.LICENSE];X(a.getLicenseRequestFilters(),L).then(()=>{K(L,N,x,S,w,A)})}(t,u,l)}else V(m,new c.default(d.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;y.trigger(v.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function K(e,t,r,i,a,s){const o=new XMLHttpRequest,l=n.getCmcdParametersFromManifest();if(n.isCmcdEnabled()&&(l.mode?l.mode:E.get().streaming.cmcd.mode)===m.default.CMCD_MODE_QUERY){const t=n.getQueryParameter({url:e.url,type:g.HTTPRequest.LICENSE});t&&(e.url=p.default.addAdditionalQueryParameterToUrl(e.url,[t]))}o.open(e.method,e.url,!0),o.responseType=e.responseType,o.withCredentials=e.withCredentials,r>0&&(o.timeout=r);for(const n in e.headers)o.setRequestHeader(n,e.headers[n]);if(n.isCmcdEnabled()&&(l.mode?l.mode:E.get().streaming.cmcd.mode)===m.default.CMCD_MODE_HEADER){const t=n.getHeaderParameters({url:e.url,type:g.HTTPRequest.LICENSE});if(t)for(const e in t){let n=t[e];n&&o.setRequestHeader(e,n)}}const u=function(){t--;const n=isNaN(E.get().streaming.retryIntervals[g.HTTPRequest.LICENSE])?1e3:E.get().streaming.retryIntervals[g.HTTPRequest.LICENSE];I=setTimeout(function(){K(e,t,r,i,a,s)},n)};o.onload=function(){k=null,this.status>=200&&this.status<=299||t<=0?i(this):(_.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+t),u())},o.ontimeout=o.onerror=function(){k=null,t<=0?s(this):(_.warn("License request network request failed . Retrying it... Pending retries: "+t),u())},o.onabort=function(){a(this)},y.trigger(v.LICENSE_REQUEST_SENDING,{url:e.url,headers:e.headers,payload:e.data,sessionId:e.sessionId}),k=o,o.send(e.data)}function $(){k&&(k.onloadend=k.onerror=k.onprogress=void 0,k.abort(),k=null),I&&(clearTimeout(I),I=null)}function Y(e,t){if(t)for(const n in t)e[n]=t[n]}function W(e,t,n,r,i){let a="NONE",s=null;e.response&&(a=i.getErrorResponse(e.response,n,r),s={serverResponse:e.response||null,responseCode:e.status||null,responseText:e.statusText||null}),V(t,new c.default(d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a,s))}function X(e,t){return e?e.reduce((e,n)=>e.then(()=>n(t)),Promise.resolve()):Promise.resolve()}function Q(e,t){if(E.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(_.debug("DRM: onNeedKey"),e.key.initDataType!==i.default.INITIALIZATION_DATA_TYPE_CENC)return void _.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);if(0===R.length&&(_.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))return void N.push(setTimeout(()=>{Q(e,t)},500));let n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),D){const e=o.getPSSHForKeySystem(D,n);if(e&&q(e))return}_.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));const r=b.getSupportedKeySystemMetadataFromSegmentPssh(n,T,L);var a;0!==r.length?(a=r,x.push(a),O(a,!1)):_.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function J(e,t){if(e.size<=0)return!1;if(t.size>0&&[...e].every(e=>{const n=t.get(e);return void 0!==n&&""!==n}))return!0;const n=M.getSessionTokens();if(n&&n.length>0){const t=n.filter(t=>[...e].includes(t.normalizedKeyId));if(t.some(e=>!e.hasTriggeredKeyStatusMapUpdate)||0===t.length)return!1}return!E.get().streaming.protection.ignoreKeyStatuses&&e&&e.size>0&&t&&t.size>0}return S={areKeyIdsExpired:function(e){try{return!!J(e,w)&&[...e].every(e=>w.get(e)===i.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(t){return _.error(t),!1}},areKeyIdsUsable:function(e){try{return!J(e,w)||[...e].some(e=>{const t=w.get(e);return t&&t!==i.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&t!==i.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(t){return _.error(t),!0}},clearMediaInfoArray:function(){R=[]},closeKeySession:function(e){P(),M.closeKeySession(e)},createKeySession:B,getKeySystems:function(){return b?b.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(e){return P(),b.getSupportedKeySystemMetadataFromContentProtection(e,T,L)},handleKeySystemFromManifest:function(){if(!R||0===R.length)return;let e=[];R.forEach(t=>{const n=b.getSupportedKeySystemMetadataFromContentProtection(t.contentProtection,T,L);n.length>0&&(0===e.length&&(e=n),x.push(n))}),e&&e.length>0&&O(e,!0)},initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");P(),R.push(e)},loadKeySession:z,removeKeySession:function(e){P(),M.removeKeySession(e)},reset:function(){y.off(v.INTERNAL_KEY_MESSAGE,H,S),P(),$(),G(null),D=null,A=!1,w=new Map,M&&(M.reset(),M=null),N.forEach(e=>clearTimeout(e)),N=[],R=[],x=[]},setKeySystems:function(e){b&&b.setKeySystems(e)},setMediaElement:G,setProtectionData:function(e){T=e,b.setProtectionData(e)},setRobustnessLevel:function(e){C=e},setServerCertificate:function(e){P(),M.setServerCertificate(e)},setSessionType:function(e){L=e},stop:function(){$(),M&&M.stop()},updateKeyStatusesMap:function(e){try{if(!e||!e.sessionToken||!e.parsedKeyStatuses)return;e.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const t=e.parsedKeyStatuses,n=p.default.parseUserAgent(),r=n&&n.browser&&n.browser.name&&"edge"===n.browser.name.toLowerCase();t.forEach(e=>{r&&D.uuid===i.default.PLAYREADY_UUID&&e.keyId&&16===e.keyId.byteLength&&function(e){const t=p.default.bufferSourceToDataView(e),n=t.getUint32(0,!0),r=t.getUint16(4,!0),i=t.getUint16(6,!0);t.setUint32(0,n,!1),t.setUint16(4,r,!1),t.setUint16(6,i,!1)}(e.keyId);const t=p.default.bufferSourceToHex(e.keyId).slice(0,32);t&&""!==t&&w.set(t,e.status)}),y.trigger(v.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:w})}catch(t){_.error(t)}}},_=s.getLogger(S),x=[],R=[],L="temporary",C="",k=null,I=null,w=new Map,y.on(v.INTERNAL_KEY_MESSAGE,H,S),S}v.__dashjs_factory_name="ProtectionController";var b=y.default.getClassFactory(v),E=class{constructor(e,t){this.keyID=e,this.key=t}},T=class{constructor(e,t){if(t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}toJWK(){let e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){let t={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(t)}this.type&&(n.type=this.type);let r=JSON.stringify(n);const i=r.length;let a=new ArrayBuffer(i),s=new Uint8Array(a);for(e=0;e<i;e++)s[e]=r.charCodeAt(e);return a}};const S=i.default.CLEARKEY_UUID,w=i.default.CLEARKEY_KEYSTEM_STRING,A="urn:uuid:"+S;function I(e){let t;const n=(e=e||{}).BASE64;return t={uuid:S,schemeIdURI:A,systemString:w,getInitData:function(e,t){try{let r=o.parseInitDataFromContentProtection(e,n);if(!r&&t){const e={kids:[function(e){try{let t=e.replace(/-/g,"");return t=btoa(t.match(/\w{2}/g).map(e=>String.fromCharCode(parseInt(e,16))).join("")),t.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(t){return null}}(t.cencDefaultKid)]};r=(new TextEncoder).encode(JSON.stringify(e))}return r}catch(r){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){let n=null;if(e){const r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[];for(let t=0;t<r.kids.length;t++){const n=r.kids[t],a=e.clearkeys&&e.clearkeys.hasOwnProperty(n)?e.clearkeys[n]:null;if(!a)throw new Error("DRM: ClearKey keyID ("+n+") is not known!");i.push(new E(n,a))}n=new T(i)}return n}},t}I.__dashjs_factory_name="KeySystemClearKey";var k=y.default.getSingletonFactory(I);const _=i.default.W3C_CLEARKEY_UUID,R=i.default.CLEARKEY_KEYSTEM_STRING,x="urn:uuid:"+_;function C(e){let t;const n=e.BASE64,r=e.debug.getLogger(t);return t={uuid:_,schemeIdURI:x,systemString:R,getInitData:function(e){return o.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){let n=null;if(e){const i=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),a=[];for(let t=0;t<i.kids.length;t++){const n=i.kids[t],r=e.clearkeys&&e.clearkeys.hasOwnProperty(n)?e.clearkeys[n]:null;if(!r)throw new Error("DRM: ClearKey keyID ("+n+") is not known!");a.push(new E(n,r))}n=new T(a),r.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}},t}C.__dashjs_factory_name="KeySystemW3CClearKey";var D=y.default.getSingletonFactory(C);const L=i.default.WIDEVINE_UUID,M=i.default.WIDEVINE_KEYSTEM_STRING,N="urn:uuid:"+L;function P(e){let t;const n=(e=e||{}).BASE64;return t={uuid:L,schemeIdURI:N,systemString:M,getInitData:function(e){return o.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},t}P.__dashjs_factory_name="KeySystemWidevine";var O=y.default.getSingletonFactory(P);const F=i.default.PLAYREADY_UUID,U=i.default.PLAYREADY_KEYSTEM_STRING,z="urn:uuid:"+F;function B(e){let t,n="utf-16";const r=(e=e||{}).BASE64,i=e.settings;function a(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return t={uuid:F,schemeIdURI:z,systemString:U,getInitData:function(e){const t=new Uint8Array([112,115,115,104,0,0,0,0]),n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let i,s,l,u,d,c=0,h=null;if(a(),!e)return null;if("pssh"in e&&e.pssh)return o.parseInitDataFromContentProtection(e,r);if("pro"in e&&e.pro)h=r.decodeArray(e.pro.__text);else{if(!("prheader"in e)||!e.prheader)return null;h=r.decodeArray(e.prheader.__text)}return i=h.length,s=4+t.length+n.length+4+i,l=new ArrayBuffer(s),u=new Uint8Array(l),d=new DataView(l),d.setUint32(c,s),c+=4,u.set(t,c),c+=t.length,u.set(n,c),c+=n.length,d.setUint32(c,i),c+=4,u.set(h,c),c+=i,u.buffer},getRequestHeadersFromMessage:function(e){let t,r;const a={},s=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===n&&e&&e.byteLength%2==1)return a["Content-Type"]="text/xml; charset=utf-8",a;const o="utf-16"===n?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,o),r=s.parseFromString(t,"application/xml");const l=r.getElementsByTagName("name"),u=r.getElementsByTagName("value");for(let n=0;n<l.length;n++)a[l[n].childNodes[0].nodeValue]=u[n].childNodes[0].nodeValue;return a.hasOwnProperty("Content")&&(a["Content-Type"]=a.Content,delete a.Content),a.hasOwnProperty("Content-Type")||(a["Content-Type"]="text/xml; charset=utf-8"),a},getLicenseRequestFromMessage:function(e){let t=null;const s=new DOMParser;if(i&&i.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===n&&e&&e.byteLength%2==1)return e;const o="utf-16"===n?new Uint16Array(e):new Uint8Array(e);a();const l=String.fromCharCode.apply(null,o),u=s.parseFromString(l,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return e;{const e=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;e&&(t=r.decode(e))}return t},getLicenseServerURLFromInitData:function(e){if(e){const t=new DataView(e),n=t.getUint16(4,!0);let r=6;const i=new DOMParser;for(let a=0;a<n;a++){const n=t.getUint16(r,!0);r+=2;const a=t.getUint16(r,!0);if(r+=2,1!==n){r+=a;continue}const s=e.slice(r,r+a),o=String.fromCharCode.apply(null,new Uint16Array(s)),l=i.parseFromString(o,"application/xml");if(l.getElementsByTagName("LA_URL")[0]){const e=l.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(e)return e}if(l.getElementsByTagName("LUI_URL")[0]){const e=l.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(e)return e}}}return null},getCDMData:function(e){let t,n,i,s;if(a(),!e)return null;for(t=[],s=0;s<e.length;++s)t.push(e.charCodeAt(s)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=r.encode(t),n='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),i=[],s=0;s<n.length;++s)i.push(n.charCodeAt(s)),i.push(0);return new Uint8Array(i).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');n=e}},t}B.__dashjs_factory_name="KeySystemPlayReady";var j=y.default.getSingletonFactory(B);function q(e){const t=(e=e||{}).BASE64,n={};let r;return n[i.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[i.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},r={getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,r){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}},r}q.__dashjs_factory_name="DRMToday";var G=y.default.getSingletonFactory(q);function H(){let e;const t="http://schemas.xmlsoap.org/soap/envelope/";function n(e){const t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function r(e){if(window.DOMParser){const r=n(e),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(t,"Envelope")[0]:null,s=a?a.getElementsByTagNameNS(t,"Body")[0]:null;if(s&&s.getElementsByTagNameNS(t,"Fault")[0])return null}return e}function i(e){let r="",i="",a="",s=-1,o=-1;if(window.DOMParser){const l=n(e),u=(new window.DOMParser).parseFromString(l,"text/xml"),d=u?u.getElementsByTagNameNS(t,"Envelope")[0]:null,c=d?d.getElementsByTagNameNS(t,"Body")[0]:null,h=c?c.getElementsByTagNameNS(t,"Fault")[0]:null,f=h?h.getElementsByTagName("detail")[0]:null,g=f?f.getElementsByTagName("Exception")[0]:null;let p=null;if(null===h)return l;p=h.getElementsByTagName("faultstring")[0].firstChild,r=p?p.nodeValue:null,null!==g&&(p=g.getElementsByTagName("StatusCode")[0],i=p?p.firstChild.nodeValue:null,p=g.getElementsByTagName("Message")[0],a=p?p.firstChild.nodeValue:null,s=a?a.lastIndexOf("[")+1:-1,o=a?a.indexOf("]"):-1,a=a?a.substring(s,o):"")}let l=`code: ${i}, name: ${r}`;return a&&(l+=`, message: ${a}`),l}return e={getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return r.call(this,e)},getErrorResponse:function(e){return i.call(this,e)}},e}H.__dashjs_factory_name="PlayReady";var V=y.default.getSingletonFactory(H);function K(){let e;return e={getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},e}K.__dashjs_factory_name="Widevine";var $=y.default.getSingletonFactory(K);function Y(){let e;return e={getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;let t=[];for(let n=0;n<e.keys.length;n++){let r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new E(i,a))}return new T(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},e}Y.__dashjs_factory_name="ClearKey";var W=y.default.getSingletonFactory(Y),X=class{constructor(e){this.ks=e.ks,this.keyId=e.keyId,this.initData=e.initData,this.protData=e.protData,this.cdmData=e.cdmData,this.sessionId=e.sessionId,this.sessionType=e.sessionType}};function Q(){let e,t,n,r,a,s,l,u,d=this.context;function c(e,t){return t&&e in t?t[e]:null}function h(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function f(e,t){return e&&e.sessionType?e.sessionType:t}return e={getKeySystemBySystemString:function(e){for(let t=0;t<r.length;t++)if(r[t].systemString===e)return r[t];return null},getKeySystems:function(){return r},getLicenseServerModelInstance:function(e,t,n){if(n===i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||n===i.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let r=null;return t&&t.hasOwnProperty("drmtoday")?r=G(d).getInstance({BASE64:a}):e.systemString===i.default.WIDEVINE_KEYSTEM_STRING?r=$(d).getInstance():e.systemString===i.default.PLAYREADY_KEYSTEM_STRING?r=V(d).getInstance():e.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(r=W(d).getInstance()),r},getSupportedKeySystemMetadataFromContentProtection:function(e,t,n){let i,a,s,l,u=[];if(!e||!e.length)return u;const d=o.findMp4ProtectionElement(e);for(s=0;s<r.length;s++){a=r[s];const o=c(a.systemString,t);for(l=0;l<e.length;l++)if(i=e[l],i.schemeIdUri.toLowerCase()===a.schemeIdURI){let e=a.getInitData(i,d);const t=new X({ks:r[s],keyId:i.keyId,initData:e,protData:o,cdmData:a.getCDMData(o?o.cdmData:null),sessionId:h(o,i),sessionType:f(o,n)});o?u.unshift(t):u.push(t)}}return u},getSupportedKeySystemMetadataFromSegmentPssh:function(e,t,n){let i,a,s=[],l=o.parsePSSHList(e);for(let o=0;o<r.length;++o){i=r[o],a=i.systemString;const e=c(a,t);i.uuid in l&&s.push({ks:i,initData:l[i.uuid],protData:e,cdmData:i.getCDMData(e?e.cdmData:null),sessionId:h(e),sessionType:f(e,n)})}return s},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){let n=new Uint8Array(e),r=new Uint8Array(t);for(let e=0;e<n.length;e++)if(n[e]!==r[e])return!1;return!0}return!1},initialize:function(){let e;r=[],e=j(d).getInstance({BASE64:a,settings:s}),r.push(e),e=O(d).getInstance({BASE64:a}),r.push(e),e=k(d).getInstance({BASE64:a}),r.push(e),l=e,e=D(d).getInstance({BASE64:a,debug:t}),r.push(e),u=e},isClearKey:function(e){return e===l||e===u},processClearKeyLicenseRequest:function(e,t,r){try{return e.getClearKeysFromProtectionData(t,r)}catch(i){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(t=r.debug,n=t.getLogger(e)),r.BASE64&&(a=r.BASE64),r.settings&&(s=r.settings))},setKeySystems:function(e){r=e},setProtectionData:function(e){for(var t,n,i=0;i<r.length;i++){var a=r[i];a.hasOwnProperty("init")&&a.init((t=a.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}}},e}Q.__dashjs_factory_name="ProtectionKeyController";var J=y.default.getSingletonFactory(Q),Z=n(445),ee=class{constructor(e,t){this.initData=e,this.initDataType=t}},te=class{constructor(e,t,n,r){this.sessionToken=e,this.message=t,this.defaultURL=n,this.messageType=r||i.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},ne=class{constructor(e,t){this.keySystem=e,this.ksConfiguration=t,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const re={};function ie(e){e=e||{};const t=this.context,n=e.eventBus,r=e.events,a=e.debug;let s,o,l,u,h,f,g,p;function m(e,t,i,a){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){const e="Insecure origins are not allowed";return n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:e}),void a({error:e})}const s=e[t].protData&&e[t].protData.systemStringPriority?e[t].protData.systemStringPriority:null,o=e[t].configs,l=e[t].ks;let u=l.systemString;var d,c;(d=s||(re[u]?re[u]:[u]),c=o,new Promise((e,t)=>{y(d,c,0,e,t)})).then(e=>{const t=e&&e.nativeMediaKeySystemAccessObject&&"function"==typeof e.nativeMediaKeySystemAccessObject.getConfiguration?e.nativeMediaKeySystemAccessObject.getConfiguration():null,a=new ne(l,t);a.selectedSystemString=e.selectedSystemString,a.nativeMediaKeySystemAccessObject=e.nativeMediaKeySystemAccessObject,n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:a}),i({data:a})}).catch(s=>{if(t+1<e.length)m(e,t+1,i,a);else{const e="Key system access denied! ";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:e+s.message}),a({error:e+s.message})}})}function y(e,t,n,r,i){const a=e[n];o.debug(`Requesting key system access for system string ${a}`),navigator.requestMediaKeySystemAccess(a,t).then(e=>{r({nativeMediaKeySystemAccessObject:e,selectedSystemString:a})}).catch(a=>{n+1<e.length?y(e,t,n+1,r,i):i(a)})}function v(e){if(!e||!e.session)return Promise.resolve;const t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function b(e){for(let t=0;t<f.length;t++)if(f[t]===e){f.splice(t,1);break}}function E(e,t){const a={session:e,keyId:t.keyId,normalizedKeyId:t&&t.keyId&&"string"==typeof t.keyId?t.keyId.replace(/-/g,"").toLowerCase():"",initData:t.initData,sessionId:t.sessionId,sessionType:t.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(e){switch(e.type){case"keystatuseschange":this._onKeyStatusesChange(e);break;case"message":this._onKeyMessage(e)}},_onKeyStatusesChange:function(e){n.trigger(r.KEY_STATUSES_CHANGED,{data:this});const t=[];e.target.keyStatuses.forEach(function(){t.push(T(arguments))}),n.trigger(r.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:t,sessionToken:a})},_onKeyMessage:function(e){let t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new te(this,t,void 0,e.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){let t=!1;return e.keyStatuses.forEach(function(){T(arguments).status===i.default.MEDIA_KEY_STATUSES.USABLE&&(t=!0)}),t}};return e.addEventListener("keystatuseschange",a),e.addEventListener("message",a),e.closed.then(()=>{b(a),o.debug("DRM: Session closed.  SessionID = "+a.getSessionId()),n.trigger(r.KEY_SESSION_CLOSED,{data:a.getSessionId()})}),f.push(a),a}function T(e){let t,n;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}return s={closeKeySession:function(e){v(e).catch(function(t){b(e),n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})})},createKeySession:function(e){if(!l||!h)throw new Error("Can not create sessions until you have selected a key system");const t=h.createSession(e.sessionType),a=E(t,e),s=l.systemString===i.default.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?i.default.INITIALIZATION_DATA_TYPE_KEYIDS:i.default.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(s,e.initData).then(function(){o.debug("DRM: Session created.  SessionID = "+a.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:a})}).catch(function(e){b(a),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c.default(d.default.KEY_SESSION_CREATED_ERROR_CODE,d.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},getAllInitData:function(){const e=[];for(let t=0;t<f.length;t++)f[t].initData&&e.push(f[t].initData);return e},getSessionTokens:function(){return f},loadKeySession:function(e){if(!l||!h)throw new Error("Can not load sessions until you have selected a key system");const t=e.sessionId;for(let n=0;n<f.length;n++)if(t===f[n].sessionId)return void o.warn("DRM: Ignoring session ID because we have already seen it!");const i=h.createSession(e.sessionType),a=E(i,e);a.hasTriggeredKeyStatusMapUpdate=!0,i.load(t).then(function(e){e?(o.debug("DRM: Session loaded.  SessionID = "+a.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:a})):(b(a),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c.default(d.default.KEY_SESSION_CREATED_ERROR_CODE,d.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){b(a),n.trigger(r.KEY_SESSION_CREATED,{data:null,error:new c.default(d.default.KEY_SESSION_CREATED_ERROR_CODE,d.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(e){e.session.remove().then(function(){o.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),n.trigger(r.KEY_SESSION_REMOVED,{data:e.getSessionId()})},function(t){n.trigger(r.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})})},requestKeySystemAccess:function(e){return new Promise((t,n)=>{m(e,0,t,n)})},reset:function(){const e=f.length;let t;if(0!==e){const i=function(e){b(e),0===f.length&&(u?(u.removeEventListener("encrypted",g),u.setMediaKeys(null).then(function(){n.trigger(r.TEARDOWN_COMPLETE)})):n.trigger(r.TEARDOWN_COMPLETE))};for(let n=0;n<e;n++)t=f[n],function(e){v(t),i(e)}(t)}else n.trigger(r.TEARDOWN_COMPLETE)},selectKeySystem:function(e){return new Promise((t,n)=>{e.nativeMediaKeySystemAccessObject.createMediaKeys().then(t=>(l=e.keySystem,h=t,u?u.setMediaKeys(h):Promise.resolve())).then(()=>{t(l)}).catch(function(){n({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(e){u!==e&&(u&&(u.removeEventListener("encrypted",g),u.setMediaKeys&&u.setMediaKeys(null)),u=e,u&&(u.addEventListener("encrypted",g),u.setMediaKeys&&h&&u.setMediaKeys(h)))},setServerCertificate:function(e){return new Promise((t,i)=>{h.setServerCertificate(e).then(function(){o.info("DRM: License server certificate successfully updated."),n.trigger(r.SERVER_CERTIFICATE_UPDATED),t()}).catch(e=>{i(e),n.trigger(r.SERVER_CERTIFICATE_UPDATED,{error:new c.default(d.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,d.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})})},stop:function(){let e;for(let t=0;t<f.length;t++)e=f[t],e.getUsable()||(v(e),b(e))},updateKeySession:function(e,t){const i=e.session;p.isClearKey(l)&&(t=t.toJWK()),i.update(t).then(()=>{n.trigger(r.KEY_SESSION_UPDATED)}).catch(function(t){n.trigger(r.KEY_ERROR,{error:new c.default(d.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})})}},o=a.getLogger(s),l=null,u=null,h=null,f=[],p=J(t).getInstance(),g={handleEvent:function(e){if("encrypted"===e.type&&e.initData){let t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new ee(t,e.initDataType)})}}},s}re[i.default.PLAYREADY_KEYSTEM_STRING]=[i.default.PLAYREADY_KEYSTEM_STRING,i.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],re[i.default.WIDEVINE_KEYSTEM_STRING]=[i.default.WIDEVINE_KEYSTEM_STRING],re[i.default.CLEARKEY_KEYSTEM_STRING]=[i.default.CLEARKEY_KEYSTEM_STRING],ie.__dashjs_factory_name="DefaultProtectionModel";var ae=y.default.getClassFactory(ie);function se(e){e=e||{};const t=this.context,n=e.eventBus,r=e.events,a=e.debug,s=e.api;let o,l,h,f,g,p,m,y,v;function b(){try{for(let e=0;e<m.length;e++)E(m[e]);h&&h.removeEventListener(s.needkey,y),n.trigger(r.TEARDOWN_COMPLETE)}catch(e){n.trigger(r.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function E(e){const t=e.session;t.removeEventListener(s.error,e),t.removeEventListener(s.message,e),t.removeEventListener(s.ready,e),t.removeEventListener(s.close,e);for(let n=0;n<m.length;n++)if(m[n]===e){m.splice(n,1);break}t[s.release]()}function T(){let e=null;const t=function(){h.removeEventListener("loadedmetadata",e),h[s.setMediaKeys](g),n.trigger(r.VIDEO_ELEMENT_SELECTED)};h.readyState>=1?t():(e=t.bind(this),h.addEventListener("loadedmetadata",e))}return o={getAllInitData:function(){const e=[];for(let t=0;t<m.length;t++)e.push(m[t].initData);return e},getSessionTokens:function(){return m},requestKeySystemAccess:function(e){return new Promise((t,i)=>{let a=!1;for(let o=0;o<e.length;o++){const i=e[o].ks.systemString,l=e[o].configs;let d=null,c=null;for(let e=0;e<l.length;e++){const o=l[e].audioCapabilities,h=l[e].videoCapabilities;if(o&&0!==o.length){d=[];for(let e=0;e<o.length;e++)window[s.MediaKeys].isTypeSupported(i,o[e].contentType)&&d.push(o[e])}if(h&&0!==h.length){c=[];for(let e=0;e<h.length;e++)window[s.MediaKeys].isTypeSupported(i,h[e].contentType)&&c.push(h[e])}if(!d&&!c||d&&0===d.length||c&&0===c.length)continue;a=!0;const f=new u(d,c),g=v.getKeySystemBySystemString(i),p=new ne(g,f);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:p}),t({data:p});break}}if(!a){const e="Key system access denied! -- No valid audio/video content configurations detected!";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:e}),i({error:e})}})},selectKeySystem:function(e){return new Promise((t,n)=>{try{g=e.mediaKeys=new window[s.MediaKeys](e.keySystem.systemString),f=e.keySystem,p=e,h&&T(),t(f)}catch(r){n({error:"Error selecting keys system ("+f.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(e){h!==e&&(h&&h.removeEventListener(s.needkey,y),h=e,h&&(h.addEventListener(s.needkey,y),g&&T()))},createKeySession:function(e){if(!f||!g||!p)throw new Error("Can not create sessions until you have selected a key system");let t=null;if(p.ksConfiguration.videoCapabilities&&p.ksConfiguration.videoCapabilities.length>0&&(t=p.ksConfiguration.videoCapabilities[0]),null===t&&p.ksConfiguration.audioCapabilities&&p.ksConfiguration.audioCapabilities.length>0&&(t=p.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");const i=t.contentType,a=g.createSession(i,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),o={session:a,keyId:(u=e).keyId,normalizedKeyId:u&&u.keyId&&"string"==typeof u.keyId?u.keyId.replace(/-/g,"").toLowerCase():"",initData:u.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(e){switch(e.type){case s.error:let t="KeyError";n.trigger(r.KEY_ERROR,{error:new c.default(d.default.MEDIA_KEYERR_CODE,t,this)});break;case s.message:let i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new te(this,i,e.destinationURL)});break;case s.ready:l.debug("DRM: Key added."),n.trigger(r.KEY_ADDED);break;case s.close:l.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),n.trigger(r.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}};var u;a.addEventListener(s.error,o),a.addEventListener(s.message,o),a.addEventListener(s.ready,o),a.addEventListener(s.close,o),m.push(o),l.debug("DRM: Session created.  SessionID = "+o.getSessionId()),n.trigger(r.KEY_SESSION_CREATED,{data:o})},updateKeySession:function(e,t){const i=e.session;v.isClearKey(f)?i.update(new Uint8Array(t.toJWK())):i.update(new Uint8Array(t)),n.trigger(r.KEY_SESSION_UPDATED)},closeKeySession:E,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:b,reset:b},l=a.getLogger(o),h=null,f=null,g=null,p=null,m=[],v=J(t).getInstance(),y={handleEvent:function(e){if(e.type===s.needkey&&e.initData){const t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new ee(t,i.default.INITIALIZATION_DATA_TYPE_CENC)})}}},o}se.__dashjs_factory_name="ProtectionModel_3Feb2014";var oe=y.default.getClassFactory(se);function le(e){e=e||{};const t=this.context,n=e.eventBus,r=e.events,a=e.debug,s=e.api,o=e.errHandler;let l,h,f,g,p,m,y,v,b;function E(){f&&w();for(let e=0;e<y.length;e++)T(y[e]);n.trigger(r.TEARDOWN_COMPLETE)}function T(e){try{f[s.cancelKeyRequest](g.systemString,e.sessionId)}catch(t){n.trigger(r.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function S(e,t){if(t&&e){const n=e.length;for(let r=0;r<n;r++)if(e[r].sessionId==t)return e[r];return null}return null}function w(){f.removeEventListener(s.keyerror,b),f.removeEventListener(s.needkey,b),f.removeEventListener(s.keymessage,b),f.removeEventListener(s.keyadded,b)}return l={getAllInitData:function(){const e=[];for(let t=0;t<m.length;t++)e.push(m[t].initData);for(let t=0;t<y.length;t++)e.push(y[t].initData);return e},getSessionTokens:function(){return y.concat(m)},requestKeySystemAccess:function(e){return new Promise((t,i)=>{let a=f;a||(a=document.createElement("video"));let s=!1;for(let o=0;o<e.length;o++){const i=e[o].ks.systemString,l=e[o].configs;let d=null,c=null;for(let e=0;e<l.length;e++){const o=l[e].videoCapabilities;if(o&&0!==o.length){c=[];for(let e=0;e<o.length;e++)""!==a.canPlayType(o[e].contentType,i)&&c.push(o[e])}if(!c||d||c&&0===c.length)continue;s=!0;const h=new u(d,c),f=p.getKeySystemBySystemString(i),g=new ne(f,h);n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{data:g}),t({data:g});break}}if(!s){const e="Key system access denied! -- No valid audio/video content configurations detected!";n.trigger(r.KEY_SYSTEM_ACCESS_COMPLETE,{error:e}),i({error:e})}})},selectKeySystem:function(e){return g=e.keySystem,Promise.resolve(g)},setMediaElement:function(e){if(f!==e){if(f){w();for(var t=0;t<y.length;t++)T(y[t]);y=[]}f=e,f&&(f.addEventListener(s.keyerror,b),f.addEventListener(s.needkey,b),f.addEventListener(s.keymessage,b),f.addEventListener(s.keyadded,b),n.trigger(r.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!g)throw new Error("Can not create sessions until you have selected a key system");if(v||0===y.length){const t={sessionId:null,keyId:e.keyId,normalizedKeyId:e&&e.keyId&&"string"==typeof e.keyId?e.keyId.replace(/-/g,"").toLowerCase():"",initData:e.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return m.push(t),f[s.generateKeyRequest](g.systemString,new Uint8Array(e.initData)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){const i=e.sessionId;if(p.isClearKey(g))for(let n=0;n<t.keyPairs.length;n++)f[s.addKey](g.systemString,t.keyPairs[n].key,t.keyPairs[n].keyID,i);else f[s.addKey](g.systemString,new Uint8Array(t),new Uint8Array(e.initData),i);n.trigger(r.KEY_SESSION_UPDATED)},closeKeySession:T,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:E,reset:E},h=a.getLogger(l),f=null,g=null,m=[],y=[],p=J(t).getInstance(),b={handleEvent:function(e){let t=null;switch(e.type){case s.needkey:let a=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(r.NEED_KEY,{key:new ee(a,i.default.INITIALIZATION_DATA_TYPE_CENC)});break;case s.keyerror:if(t=S(y,e.sessionId),t||(t=S(m,e.sessionId)),t){let i=d.default.MEDIA_KEYERR_CODE,a="";switch(e.errorCode.code){case 1:i=d.default.MEDIA_KEYERR_UNKNOWN_CODE,a+="MEDIA_KEYERR_UNKNOWN - "+d.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:i=d.default.MEDIA_KEYERR_CLIENT_CODE,a+="MEDIA_KEYERR_CLIENT - "+d.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:i=d.default.MEDIA_KEYERR_SERVICE_CODE,a+="MEDIA_KEYERR_SERVICE - "+d.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:i=d.default.MEDIA_KEYERR_OUTPUT_CODE,a+="MEDIA_KEYERR_OUTPUT - "+d.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:i=d.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,a+="MEDIA_KEYERR_HARDWARECHANGE - "+d.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:i=d.default.MEDIA_KEYERR_DOMAIN_CODE,a+="MEDIA_KEYERR_DOMAIN - "+d.default.MEDIA_KEYERR_DOMAIN_MESSAGE}a+="  System Code = "+e.systemCode,n.trigger(r.KEY_ERROR,{error:new c.default(i,a,t)})}else h.error("No session token found for key error");break;case s.keyadded:t=S(y,e.sessionId),t||(t=S(m,e.sessionId)),t?(h.debug("DRM: Key added."),n.trigger(r.KEY_ADDED,{data:t})):h.debug("No session token found for key added");break;case s.keymessage:if(v=null!==e.sessionId&&void 0!==e.sessionId,v?(t=S(y,e.sessionId),!t&&m.length>0&&(t=m.shift(),y.push(t),t.sessionId=e.sessionId,n.trigger(r.KEY_SESSION_CREATED,{data:t}))):m.length>0&&(t=m.shift(),y.push(t),0!==m.length&&o.error(new c.default(d.default.MEDIA_KEY_MESSAGE_ERROR_CODE,d.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){let i=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=i,n.trigger(r.INTERNAL_KEY_MESSAGE,{data:new te(t,i,e.defaultURL)})}else h.warn("No session token found for key message")}}},l}le.__dashjs_factory_name="ProtectionModel_01b";var ue=y.default.getClassFactory(le);const de=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],ce=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function he(){let e;const t=this.context;function n(e,t){for(let n=0;n<t.length;n++){const r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:function(r){let i=null;const a=J(t).getInstance();a.setConfig({debug:r.debug,BASE64:r.BASE64,settings:r.settings}),a.initialize();let s=function(r){const i=r.debug,a=i.getLogger(e),s=r.eventBus,o=r.errHandler,l=r.videoModel?r.videoModel.getElement():null;return l&&void 0===l.onencrypted||l&&void 0===l.mediaKeys?n(l,ce)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),oe(t).create({debug:i,eventBus:s,events:r.events,api:n(l,ce)})):n(l,de)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),ue(t).create({debug:i,eventBus:s,errHandler:o,events:r.events,api:n(l,de)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (DefaultProtectionModel"),ae(t).create({debug:i,eventBus:s,events:r.events}))}(r);return s&&(i=b(t).create({BASE64:r.BASE64,cmcdModel:r.cmcdModel,constants:r.constants,customParametersModel:r.customParametersModel,debug:r.debug,eventBus:r.eventBus,events:r.events,protectionKeyController:a,protectionModel:s,settings:r.settings}),r.capabilities.setEncryptedMediaSupported(!0)),i}},e}he.__dashjs_factory_name="Protection";const fe=dashjs.FactoryMaker.getClassFactory(he);fe.events=Z.default,fe.errors=d.default,dashjs.FactoryMaker.updateClassFactory(he.__dashjs_factory_name,fe);var ge=fe},445:function(e,t,n){n.r(t);var r=n(7252);class i extends r.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let a=new i;t.default=a},1923:function(e,t,n){n.r(t);var r=n(8748);class i extends r.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let a=new i;t.default=a},559:function(e,t,n){n.r(t),n.d(t,{supportsMediaSource:function(){return l}});var r=n(138),i=n(5212),a=n(2861),s=n(7393),o=n(649);function l(){let e="ManagedMediaSource"in window,t="WebKitMediaSource"in window,n="MediaSource"in window;return e||t||n}function u(){let e,t,n,r,u,d;const c=this.context,h=(0,s.default)(c).getInstance();function f(e,t){let n;t===i.default.VIDEO?n=function(e){const t={video:{}};return e?(e.width&&(t.video.width=e.width),e.height&&(t.video.height=e.height),e.framerate&&(t.video.framerate=parseFloat(e.framerate)),e.hdrMetadataType&&(t.video.hdrMetadataType=e.hdrMetadataType),e.colorGamut&&(t.video.colorGamut=e.colorGamut),e.transferFunction&&(t.video.transferFunction=e.transferFunction),t):t}(e):t===i.default.AUDIO&&(n=function(e){const t={audio:{}};return e.samplerate&&(t.audio.samplerate=e.samplerate),t}(e)),n[t].contentType=e.codec,n[t].bitrate=parseInt(e.bitrate),n.type="media-source";let r=e.codec;return e.width&&e.height&&(r+=';width="'+e.width+'";height="'+e.height+'"'),n.mediaSourceCodecString=r,s=n,l=t,(o=e)&&o.keySystemsMetadata&&0!==o.keySystemsMetadata.length?o.keySystemsMetadata.map(e=>{const t={...s};if(e.ks){t.keySystemConfiguration={},e.ks.systemString&&(t.keySystemConfiguration.keySystem=e.ks.systemString);let n="";e.ks.systemString===a.default.WIDEVINE_KEYSTEM_STRING&&(n=a.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const r=e.protData,s=r&&r.audioRobustness&&r.audioRobustness.length>0?r.audioRobustness:n,o=r&&r.videoRobustness&&r.videoRobustness.length>0?r.videoRobustness:n;l===i.default.AUDIO?t.keySystemConfiguration[l]={robustness:s}:l===i.default.VIDEO&&(t.keySystemConfiguration[l]={robustness:o})}return t}):[s];var s,o,l}function g(e){if(r&&0!==r.length&&e)return r.find(t=>{const n=p(e,t,i.default.AUDIO),r=p(e,t,i.default.VIDEO),a=p(e,t,"keySystemConfiguration");return n&&r&&a})}function p(e,t,n){return!e[n]&&!t[n]||!(!e[n]||!t[n])&&h.areEqual(e[n],t[n])}function m(e,t){return(e=e.filter(e=>!(e.schemeIdUri&&t.some(t=>t.schemeIdUri===e.schemeIdUri)))).push(...t),e}return e={areKeyIdsExpired:function(e){return!!(n&&e&&e.normalizedKeyIds&&0!==e.normalizedKeyIds.size)&&n.areKeyIdsExpired(e.normalizedKeyIds)},areKeyIdsUsable:function(e){return!(n&&e&&e.normalizedKeyIds&&0!==e.normalizedKeyIds.size)||n.areKeyIdsUsable(e.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(e,t){if(!e||!e.codec||!1===e.isSupported)return!1;const n=f(e,t).map(e=>g(e)).filter(e=>null!=e);return!(n&&n.length>0)||n.some(e=>e&&e.decodingInfo&&e.decodingInfo.supported)},isProtectionCompatible:function(e,t){return!t||!(!e.isEncrypted&&t.isEncrypted)},runCodecSupportCheck:function(e,n){if(n!==i.default.AUDIO&&n!==i.default.VIDEO)return Promise.resolve();const a=f(e,n);return s=e,o=n,t.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(s.codec&&o===i.default.AUDIO||o===i.default.VIDEO&&s.codec&&s.width&&s.height&&s.bitrate&&s.framerate)?function(e){return new Promise(t=>{if(!e||0===e.length)return void t();const n=e.map(e=>{return t=e,new Promise(e=>{g(t)?e():navigator.mediaCapabilities.decodingInfo(t).then(n=>{t.decodingInfo=n,r.push(t),e()}).catch(n=>{t.decodingInfo={supported:!1},r.push(t),d.error(n),e()})});var t});Promise.allSettled(n).then(()=>{t()}).catch(e=>{d.error(e),t()})})}(a):(function(e){if(!e||!e.length)return;const t=e[0];if(g(t))return;let n={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(t.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(t.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(t.mediaSourceCodecString))&&(n.supported=!0),t.decodingInfo=n,r.push(t)}(a),Promise.resolve());var s,o},setConfig:function(e){e&&(e.settings&&(t=e.settings),e.protectionController&&(n=e.protectionController))},setEncryptedMediaSupported:function(e){u=e},setProtectionController:function(e){n=e},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return u},supportsEssentialProperty:function(e){let n=t.get().streaming.capabilities.supportedEssentialProperties;t.get().streaming.capabilities.useMediaCapabilitiesApi&&t.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(n=m(n,[{schemeIdUri:i.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:i.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:i.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),t.get().streaming.capabilities.useMediaCapabilitiesApi&&t.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(n=m(n,[{schemeIdUri:i.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return e.inArray(n)}catch(r){return!0}},supportsMediaSource:l},u=!1,r=[],d=(0,o.default)(c).getInstance().getLogger(e),e}u.__dashjs_factory_name="Capabilities",t.default=r.default.getSingletonFactory(u)},7377:function(e,t,n){n.r(t);var r=n(138),i=n(656);function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){let n;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(let n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){let n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.default=r.default.getClassFactory(a)},7393:function(e,t,n){n.r(t);var r=n(138),i=n(7316);function a(){let e;return e={areEqual:function(e,t){return i(e,t)}},e}a.__dashjs_factory_name="ObjectUtils",t.default=r.default.getSingletonFactory(a)},656:function(e,t,n){n.r(t),n.d(t,{checkInteger:function(){return a},checkIsVideoOrAudioType:function(){return o},checkParameterType:function(){return i},checkRange:function(){return s}});var r=n(5212);function i(e,t){if(typeof e!==t)throw r.default.BAD_ARGUMENT_ERROR}function a(e){if(null===e||isNaN(e)||e%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function s(e,t,n){if(e<t||e>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function o(e){if("string"!=typeof e||e!==r.default.AUDIO&&e!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},1944:function(e,t,n){n.r(t),t.default=class{constructor(e,t,n){this.code=e||null,this.message=t||null,this.data=n||null}}},7568:function(e,t,n){n.r(t),n.d(t,{HTTPRequest:function(){return r},HTTPRequestTrace:function(){return i}});class r{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class i{constructor(){this.s=null,this.d=null,this.b=[]}}r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",r.DVB_REPORTING_TYPE="DVBReporting",r.LICENSE="license",r.CONTENT_STEERING_TYPE="ContentSteering",r.OTHER_TYPE="other"}},vl={};function bl(e){var t=vl[e];if(void 0!==t)return t.exports;var n=vl[e]={exports:{}};return yl[e].call(n.exports,n,n.exports,bl),n.exports}bl.amdO={},bl.d=function(e,t){for(var n in t)bl.o(t,n)&&!bl.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},bl.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),bl.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},bl.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var El={};bl.r(El),bl.d(El,{Constants:function(){return xl.default},Debug:function(){return Rl.default},MediaPlayer:function(){return Tl.MediaPlayer},MediaPlayerFactory:function(){return _l},MetricsReporting:function(){return Sl.default},Protection:function(){return wl.default},default:function(){return Dl},supportsMediaSource:function(){return Cl.supportsMediaSource}});var Tl=bl(5393),Sl=bl(4469),wl=bl(3888),Al=bl(255);let Il,kl=function(){const e="application/dash+xml";let t;function n(n,r,i){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;let a,s=n.id||n.name||"video element";if(!(r=r||[].slice.call(n.querySelectorAll("source")).filter(function(t){return t.type==e})[0])&&n.src)(r=document.createElement("source")).src=n.src;else if(!r&&!n.src)return null;return i=i||{},a=(0,Al.default)(i).create(),a.initialize(n,r.src,n.autoplay),t||(t=a.getDebug().getLogger()),t.debug("Converted "+s+" to dash.js player and added content: "+r.src),n._dashjs_player=a,a}function r(e){return/^VIDEO$/i.test(e.nodeName)?e:r(e.parentNode)}return{create:n,createAll:function(t,i){let a=[];t=t||"[data-dashjs-player]";let s=(i=i||document).querySelectorAll(t);for(let e=0;e<s.length;e++){let t=n(s[e],null);a.push(t)}let o=i.querySelectorAll('source[type="'+e+'"]');for(let e=0;e<o.length;e++){let t=n(r(o[e]),null);a.push(t)}return a}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?kl.createAll():Il=window.setInterval(function(){window.dashjs&&(window.clearInterval(Il),kl.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),kl.createAll()}));var _l=kl,Rl=bl(649),xl=bl(5212),Cl=bl(559);dashjs.Protection=wl.default,dashjs.MetricsReporting=Sl.default,dashjs.MediaPlayerFactory=_l,dashjs.Debug=Rl.default,dashjs.supportsMediaSource=Cl.supportsMediaSource,dashjs.Constants=xl.default;var Dl=dashjs,Ll=(El=El.default).Constants,Ml=El.Debug,Nl=El.MediaPlayer,Pl=El.MediaPlayerFactory,Ol=El.MetricsReporting,Fl=El.Protection,Ul=El.default,zl=El.supportsMediaSource;const Bl=Object.freeze(Object.defineProperty({__proto__:null,Constants:Ll,Debug:Ml,MediaPlayer:Nl,MediaPlayerFactory:Pl,MetricsReporting:Ol,Protection:Fl,default:Ul,supportsMediaSource:zl},Symbol.toStringTag,{value:"Module"}));var jl,ql,Gl={};
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/const Hl=t((jl||(jl=1,ql=Gl,function(){var t="undefined"!=typeof window?window:e,n={};for(var r in function(e,t,n){var r,i,a="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<n.length;++r){var i=n[r];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function l(e,t){if(t)e:{var n=o;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&s(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)i=Object.setPrototypeOf;else{var u;e:{var d={};try{d.__proto__={a:!0},u=d.a;break e}catch(xA){}u=!1}i=u?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var c=i;function h(e,t){if(e.prototype=a(t.prototype),e.prototype.constructor=e,c)c(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.Gm=t.prototype}function f(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function g(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:f(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function p(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function m(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function y(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function v(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function b(e,t){e.i={Wh:t,li:!0},e.g=e.m||e.j}function E(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function S(e,t,n){e.m=t,null!=n&&(e.j=n)}function w(e,t){e.m=0,e.j=t||0}function A(e,t,n){e.g=t,e.m=n||0}function I(e,t){return e.m=t||0,t=e.i.Wh,e.i=null,t}function k(e){e.B=[e.i],e.m=0,e.j=0}function _(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.li?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function R(e){this.g=new y,this.h=e}function x(e,t,n,r){try{var i=t.call(e.g.l,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.o=!1,i;var a=i.value}catch(s){return e.g.l=null,b(e.g,s),C(e)}return e.g.l=null,r.call(e.g,a),C(e)}function C(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,b(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.li)throw t.Wh;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function D(e){this.next=function(t){return v(e.g),e.g.l?t=x(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=C(e)),t},this.throw=function(t){return v(e.g),e.g.l?t=x(e,e.g.l.throw,t,e.g.u):(b(e.g,t),t=C(e)),t},this.return=function(t){return function(e,t){v(e.g);var n=e.g.l;return n?x(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),C(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(r,i){!function e(a){a.done?r(a.value):Promise.resolve(a.value).then(t,n).then(e,i)}(e.next())})}(new D(new R(e)))}function M(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return{gi:i,v:a}}return{gi:-1,v:void 0}}function O(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function F(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}l("Symbol",function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}}),l("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=o[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&s(r.prototype,e,{configurable:!0,writable:!0,value:function(){return m(f(this))}})}return e}),y.prototype.u=function(e){this.h=e},y.prototype.return=function(e){this.i={return:e},this.g=this.j},y.prototype.A=function(e){this.g=e},l("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var i=o.setTimeout;n.prototype.i=function(e){i(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.G),reject:e(this.l)}},t.prototype.G=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.I(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.F(e):this.m(e)}},t.prototype.F=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.H(),this.B()},t.prototype.H=function(){var e=this;i(function(){if(e.C()){var t=o.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.I=function(e){var t=this.j();e.Qe(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){a(n)}}:t}var i,a,s=new t(function(e,t){i=e,a=t});return this.Qe(r(e,i),r(n,a)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qe=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=g(e),a=i.next();!a.done;a=i.next())r(a.value).Qe(t,n)})},t.all=function(e){var n=g(e),i=n.next();return i.done?r([]):new t(function(e,t){function a(t){return function(n){s[t]=n,0==--o&&e(s)}}var s=[],o=0;do{s.push(void 0),o++,r(i.value).Qe(a(s.length-1),t),i=n.next()}while(!i.done)})},t}),l("WeakMap",function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=g(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!N(e,o)){var t=new n;s(e,o,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var o="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var l=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(i(e),!N(e,o))throw Error("WeakMap key fail: "+e);return e[o][this.g]=t,this},t.prototype.get=function(e){return r(e)&&N(e,o)?e[o][this.g]:void 0},t.prototype.has=function(e){return r(e)&&N(e,o)&&N(e[o],this.g)},t.prototype.delete=function(e){return!!(r(e)&&N(e,o)&&N(e[o],this.g))&&delete e[o][this.g]},t}),l("Map",function(e){function t(){var e={};return e.wc=e.next=e.head=e}function n(e,t){var n=e[1];return m(function(){if(n){for(;n.head!=e[1];)n=n.wc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++s,a.set(t,n)):n="p_"+t;var r=e[0][n];if(r&&N(e[0],n))for(e=0;e<r.length;e++){var i=r[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:r,index:e,entry:i}}return{id:n,list:r,index:-1,entry:void 0}}function i(e){if(this[0]={},this[1]=t(),this.size=0,e){e=g(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=r.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!r.next().done)}catch(a){return!1}}())return e;var a=new WeakMap;i.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],wc:this[1].wc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].wc.next=n.entry,this[1].wc=n.entry,this.size++),this},i.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.wc.next=e.entry.next,e.entry.next.wc=e.entry.wc,e.entry.head=null,this.size--,0))},i.prototype.clear=function(){this[0]={},this[1]=this[1].wc=t(),this.size=0},i.prototype.has=function(e){return!!r(this,e).entry},i.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},i.prototype.keys=function(){return n(this,function(e){return e.key})},i.prototype.values=function(){return n(this,function(e){return e.value})},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=0;return i}),l("Set",function(e){function t(e){if(this.g=new Map,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(g([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),i=r.next();return!i.done&&i.value[0]==t&&i.value[1]==t&&!(i=r.next()).done&&i.value[0]!=t&&4==i.value[0].x&&i.value[1]==i.value[0]&&r.next().done}catch(a){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(r){return e.call(t,r,r,n)})},t)}),l("Array.prototype.findIndex",function(e){return e||function(e,t){return P(this,e,t).gi}}),l("Array.prototype.values",function(e){return e||function(){return O(this,function(e,t){return t})}}),l("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var a=0;!(i=e.next()).done;)r.push(t.call(n,i.value,a++))}else for(i=e.length,a=0;a<i;a++)r.push(t.call(n,e[a],a));return r}}),l("Array.prototype.keys",function(e){return e||function(){return O(this,function(e){return e})}}),l("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),l("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for((t=t||0)<0&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),l("String.prototype.includes",function(e){return e||function(e,t){return-1!==F(this,e,"includes").indexOf(e,t||0)}}),l("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}}),l("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=g(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([t]);return!(!r.has(t)||r.has(n))&&(r.delete(t),r.add(n),!r.has(t)&&r.has(n))}catch(i){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),l("Array.prototype.find",function(e){return e||function(e,t){return P(this,e,t).v}}),l("String.prototype.startsWith",function(e){return e||function(e,t){var n=F(this,e,"startsWith"),r=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<r;)if(n[t++]!=e[a++])return!1;return a>=i}}),l("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push([t,e[t]]);return n}});var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)N(r,i)&&(e[i]=r[i])}return e};l("Object.assign",function(e){return e||U}),l("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),l("Array.prototype.entries",function(e){return e||function(){return O(this,function(e,t){return[e,t]})}}),l("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),l("String.prototype.repeat",function(e){return e||function(e){var t=F(this,null,"repeat");if(e<0||e>1342177279)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),l("Number.EPSILON",function(){return 2220446049250313e-31}),l("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),l("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&e!==1/0&&e!==-1/0}}),l("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)N(e,t)&&n.push(e[t]);return n}}),l("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),l("String.prototype.endsWith",function(e){return e||function(e,t){var n=F(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;r>0&&t>0;)if(n[--t]!=e[--r])return!1;return r<=0}}),l("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||e===1/0||e===-1/0||0===e)return e;var t=Math.floor(Math.abs(e));return e<0?-t:t}});var z=this||self;function B(e,t){e=e.split(".");var n,r=z;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function j(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function q(e){return e.h/(1-Math.pow(e.g,e.i))}function G(){this.h=new j(2),this.j=new j(5),this.g=0,this.i=128e3,this.l=16e3}function H(){}function V(){}function K(){}function $(e){var t=M.apply(1,arguments);W.has(e)||(W.add(e),K.apply(H,p(t)))}function Y(){}j.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},G.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},G.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},G.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(q(this.h),q(this.j))};var W=new Set;function X(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Q(e,t){(t=e.indexOf(t))>-1&&e.splice(t,1)}function J(e,t,n){if(n||(n=X),e.length!=t.length)return!1;t=t.slice();for(var r=(e=g(e)).next(),i={};!r.done;i={mi:void 0},r=e.next()){if(i.mi=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.mi,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function Z(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=X),e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function ee(){this.g=new Map}function te(){this.g=new ee}function ne(e,t,n,r){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=re;if(null==t){t=!1;try{var n={},r={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",r),Object.defineProperty(n,"capture",r),r=function(){},e.addEventListener("test",r,n),e.removeEventListener("test",r,n)}catch(i){t=!1}re=t}return t||!1}(e)?t:t.capture||!1}(e,r),this.target.addEventListener(t,n,this.g)}e.console&&((new Map).set(1,function(){}).set(2,function(){}).set(3,function(){}).set(4,function(){}).set(5,function(){}).set(6,function(){}),K=function(){},V=function(){}),(r=ee.prototype).push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},r.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},r.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(e){return e!=t});this.g.set(e,n),n.length||this.g.delete(e)}},r.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},r.size=function(){return this.g.size},r.keys=function(){return Array.from(this.g.keys())},(r=te.prototype).release=function(){this.Pa(),this.g=null},r.D=function(e,t,n,r){this.g&&(e=new ne(e,t,n,r),this.g.push(t,e))},r.Ba=function(e,t,n,r){var i=this;this.D(e,t,function r(a){i.Ma(e,t,r),n(a)},r)},r.Ma=function(e,t,n){if(this.g)for(var r=this.g.get(t)||[],i=(r=g(r)).next();!i.done;i=r.next())(i=i.value).target!=e||n!=i.listener&&n||(i.Ma(),this.g.remove(t,i))},r.Pa=function(){if(this.g){for(var e=[],t=g(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,p(n.value));for(t=(e=g(e)).next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},B("shaka.util.EventManager",te),te.prototype.removeAll=te.prototype.Pa,te.prototype.unlisten=te.prototype.Ma,te.prototype.listenOnce=te.prototype.Ba,te.prototype.listen=te.prototype.D,te.prototype.release=te.prototype.release,ne.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var re=void 0;function ie(e){this.h=e,this.g=void 0}
/*
         @license
         Shaka Player
         Copyright 2025 Google LLC
         SPDX-License-Identifier: Apache-2.0
        */
function ae(){return le.value()}B("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),ie.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var se=null,oe=null,le=new ie(function(){var e=void 0;return se&&(e=se()),!e&&oe&&(e=oe()),e});function ue(e,t){this.g=e,this.h=t}function de(e,t){var n=new ue(5,0),r=fe,i=r.g,a=n.h-i.h;((n.g-i.g||a)>0?r.i:r.h)(r.g,n,e,t)}function ce(e,t,n,r){K([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",r].join(" "))}function he(e,t,n,r){V([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",r].join(" "))}ue.prototype.toString=function(){return"v"+this.g+"."+this.h};var fe=null,ge=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
         @license
         Copyright 2008 The Closure Library Authors
         SPDX-License-Identifier: Apache-2.0
        */
/*
         @license
         Copyright 2006 The Closure Library Authors
         SPDX-License-Identifier: Apache-2.0
        */
function pe(e){var t;e instanceof pe?(me(this,e.bc),this.hd=e.hd,ye(this,e.Db),ve(this,e.Cd),this.Sb=e.Sb,be(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(ge))?(me(this,t[1]||"",!0),this.hd=Ee(t[2]||""),ye(this,t[3]||"",!0),ve(this,t[4]),this.Sb=Ee(t[5]||"",!0),be(this,t[6]||"",!0),this.Rc=Ee(t[7]||"")):this.g=new Re(null)}function me(e,t,n){e.bc=n?Ee(t,!0):t,e.bc&&(e.bc=e.bc.replace(/:$/,""))}function ye(e,t,n){e.Db=n?Ee(t,!0):t}function ve(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Cd=t}else e.Cd=null}function be(e,t,n){t instanceof Re?e.g=t:(n||(t=Te(t,ke)),e.g=new Re(t))}function Ee(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Te(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Se),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Se(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(r=pe.prototype).bc="",r.hd="",r.Db="",r.Cd=null,r.Sb="",r.Rc="",r.toString=function(){var e=[],t=this.bc;if(t&&e.push(Te(t,we,!0),":"),t=this.Db){e.push("//");var n=this.hd;n&&e.push(Te(n,we,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Cd)&&e.push(":",String(t))}return(t=this.Sb)&&(this.Db&&"/"!=t.charAt(0)&&e.push("/"),e.push(Te(t,"/"==t.charAt(0)?Ie:Ae,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",Te(t,_e)),e.join("")},r.resolve=function(e){var t=this.clone();"data"===t.bc&&(t=new pe);var n=!!e.bc;n?me(t,e.bc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Db,n?ye(t,e.Db):n=null!=e.Cd;var r=e.Sb;if(n)ve(t,e.Cd);else if(n=!!e.Sb){if("/"!=r.charAt(0))if(this.Db&&!this.Sb)r="/"+r;else{var i=t.Sb.lastIndexOf("/");-1!=i&&(r=t.Sb.substr(0,i+1)+r)}if(".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],s=0;s<r.length;){var o=r[s++];"."==o?i&&s==r.length&&a.push(""):".."==o?((a.length>1||1==a.length&&""!=a[0])&&a.pop(),i&&s==r.length&&a.push("")):(a.push(o),i=!0)}r=a.join("/")}}return n?t.Sb=r:n=""!==e.g.toString(),n?be(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},r.clone=function(){return new pe(this)};var we=/[#\/\?@]/g,Ae=/[#\?:]/g,Ie=/[#\?]/g,ke=/[#\?@]/g,_e=/#/g;function Re(e){this.g=e||null}function xe(e){if(!e.eb&&(e.eb=new Map,e.Sd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(r>=0){var a=t[n].substring(0,r);i=t[n].substring(r+1)}else a=t[n];a=decodeURIComponent(a),i=i||"",e.add(a,decodeURIComponent(i))}}function Ce(e){return xe(e),e.Sd}function De(){}function Le(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ne(e);t=Ne(t);for(var r=0;r<e.byteLength;r++)if(n[r]!=t[r])return!1;return!0}function Me(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Ne(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Pe(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function Oe(e,t,n){return Fe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Fe(e,t,n,r){var i=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in r&&(a=r.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/a;return new r(i,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,s))),Math.floor(Math.min(e+Math.max(n,0),s))-e)}function Ue(e,t,n){var r=M.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(i){this.stack=i.stack}}function ze(){}function Be(t){if(!t)return"";if(239==(t=Ne(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!ae().rh())return(t=(new TextDecoder).decode(t)).includes("")&&V('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",r=0;r<t.length;++r){var i=65533;if(128&t[r]?t.length>=r+2&&192==(224&t[r])&&128==(192&t[r+1])?(i=(31&t[r])<<6|63&t[r+1],r+=1):t.length>=r+3&&224==(240&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])?(i=(15&t[r])<<12|(63&t[r+1])<<6|63&t[r+2],r+=2):t.length>=r+4&&240==(241&t[r])&&128==(192&t[r+1])&&128==(192&t[r+2])&&128==(192&t[r+3])&&(i=(7&t[r])<<18|(63&t[r+1])<<12|(63&t[r+2])<<6|63&t[r+3],r+=3):i=t[r],i<=65535)n+=String.fromCharCode(i);else{var a=1023&(i-=65536);n+=String.fromCharCode(55296+(i>>10)),n+=String.fromCharCode(56320+a)}}return n}function je(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new Ue(2,2,2004);n=Math.floor(e.byteLength/2);var r=new Uint16Array(n);e=Oe(e);for(var i=0;i<n;i++)r[i]=e.getUint16(2*i,t);return Ve(r)}function qe(e){function t(e){return n.byteLength<=e||n[e]>=9&&n[e]<=126}if(!e)return"";var n=Ne(e);if(239==n[0]&&187==n[1]&&191==n[2])return Be(n);if(254==n[0]&&255==n[1])return je(n.subarray(2),!1);if(255==n[0]&&254==n[1])return je(n.subarray(2),!0);if(0==n[0]&&0==n[2])return je(e,!1);if(0==n[1]&&0==n[3])return je(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Be(e);throw new Ue(2,2,2003)}function Ge(t){if(e.TextEncoder&&!ae().rh()){var n=new TextEncoder;return Me(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t[r].charCodeAt(0);return Me(n)}function He(e,t){for(var n=new ArrayBuffer(2*e.length),r=new DataView(n),i=0;i<e.length;++i)r.setUint16(2*i,e.charCodeAt(i),t);return n}function Ve(e){return $e.value()(e)}function Ke(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return"#"==e[1]?(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))>=0&&e<=1114111?String.fromCodePoint(e):"":t[e]||"'"}):e||""}(r=Re.prototype).eb=null,r.Sd=null,r.add=function(e,t){xe(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Sd++,this},r.set=function(e,t){return xe(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},r.get=function(e){return xe(this),this.eb.get(e)||[]},r.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=g(this.eb.keys()),n=t.next();!n.done;n=t.next()){var r=n.value;n=encodeURIComponent(r),r=this.eb.get(r);for(var i=0;i<r.length;i++){var a=n;""!==r[i]&&(a+="="+encodeURIComponent(r[i])),e.push(a)}}return this.g=e.join("&")},r.clone=function(){var e=new Re;if(e.g=this.g,this.eb){for(var t=new Map,n=g(this.eb),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,i=i.next().value,t.set(r,i.concat())}e.eb=t,e.Sd=this.Sd}return e},B("shaka.util.BufferUtils",De),De.toDataView=Oe,De.toUint16=Pe,De.toUint8=Ne,De.toArrayBuffer=Me,De.equal=Le,Ue.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},B("shaka.util.Error",Ue),Ue.Severity={RECOVERABLE:1,CRITICAL:2},Ue.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ue.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},B("shaka.util.StringUtils",ze),ze.resetFromCharCode=function(){$e.g=void 0},ze.toUTF16=He,ze.toUTF8=Ge,ze.fromBytesAutoDetect=qe,ze.fromUTF16=je,ze.fromUTF8=Be;var $e=new ie(function(){function e(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(n){return!1}}for(var t={Oc:65536};t.Oc>0;(t={Oc:t.Oc}).Oc/=2)if(e(t.Oc))return function(e){return function(t){for(var n="",r=0;r<t.length;r+=e.Oc)n+=String.fromCharCode.apply(null,t.subarray(r,r+e.Oc));return n}}(t);return null});function Ye(){}function We(e){return e=Ve(Ne(e)),btoa(e)}function Xe(e,t){return t=null==t||t,e=We(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Qe(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}function Je(t){for(var n=t.length/2,r=new Uint8Array(n),i=0;i<n;i++)r[i]=e.parseInt(t.substr(2*i,2),16);return r}function Ze(e){var t=Ne(e);e="";for(var n=(t=g(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function et(){for(var e=M.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var r=n=0;r<e.length;++r){var i=e[r];ArrayBuffer.isView(i)&&1===i.BYTES_PER_ELEMENT?t.set(i,n):t.set(Ne(i),n),n+=i.byteLength}return t}function tt(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var r=new pe(e[0]);return t=new pe(t[0]),t=r.resolve(t),n&&be(t,n),[t.toString()]}t=t.map(function(e){return new pe(e)}),r=[];for(var i=(e=g(e)).next();!i.done;i=e.next()){i=new pe(i.value);for(var a=g(t),s=a.next();!s.done;s=a.next())s=i.resolve(s.value),n&&be(s,n),r.push(s.toString())}return r}function nt(e,t,n,r){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},r&&(e.keySystemUris=new Set([r])),e}function rt(t,n){n=void 0===n?"cenc":n;var r=[],i=[],a=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=Xe(Je(t),!1));var s=e;22!=s.length&&(s=Xe(Je(e),!1)),e={kty:"oct",kid:n,k:s},r.push(e),i.push(e.kid),a.push(t)}),t=JSON.stringify({keys:r});var s=JSON.stringify({kids:i});return s=[{initData:Ne(Ge(s)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:s,keyIds:new Set(a)}}function it(e,t){if(1==t.length)return t[0];if(null!=(e=at(e,t)))return e;throw new Ue(2,4,4025,t)}function at(e,t){for(var n=dt.get(e),r=(n=g(n)).next();!r.done;r=n.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next())if(a=a.value,r.test(a.trim()))return a.trim()}return e==ot?"":null}function st(e,t){for(var n=[],r=(e=g(e=dt.get(e))).next();!r.done;r=e.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next())a=a.value,r.test(a.trim())&&n.push(a.trim())}return n}B("shaka.util.Uint8ArrayUtils",Ye),Ye.concat=et,Ye.toHex=Ze,Ye.fromHex=Je,Ye.fromBase64=Qe,Ye.toBase64=Xe,Ye.toStandardBase64=We;var ot="text",lt={Aa:"video",ka:"audio",Na:ot,Uf:"image",ol:"application"},ut=1/15,dt=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ct(e,t,n,r){this.g=null,this.l=e,this.i=t,this.m=n,this.o=r,this.j=!1;e:{if("undefined"==typeof libDPIModule&&K("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){K("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,de("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(K("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||K(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function ht(e,t,n,r){"video"!==r.type||e.o&&!r.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",r.id,-n,!e.o)}function ft(e){e.g&&e.i.classList.add("shaka-hidden")}function gt(e){return!(!e||"undefined"==typeof LCEVCdec)&&"lvc1"==e.codecs}function pt(t){if(vt.has(t))return vt.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),vt.set(t,n),n)}function mt(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function yt(){var t=e.ManagedMediaSource||e.MediaSource;return!!(t&&t.prototype&&t.prototype.setLiveSeekableRange&&t.prototype.clearLiveSeekableRange)}ct.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},B("shaka.lcevc.Dec",ct),ct.prototype.release=ct.prototype.release;var vt=new Map;function bt(){}function Et(){}function Tt(){}function St(e){this.h=new Map,this.i=0,this.j=new Et,(e=At(e.toLowerCase()))&&(this.j=e()),this.g=new bt,(e=kt)&&(this.g=e(),this.h.set(this.i,this.g))}function wt(e,t){It.set(e,t)}function At(e){return It.get(e)}bt.prototype.extract=function(){},bt.prototype.decode=function(){return[]},bt.prototype.clear=function(){},bt.prototype.getStreams=function(){return[]},Et.prototype.init=function(){},Et.prototype.parse=function(){return[]},(r=Tt.prototype).init=function(){},r.xf=function(){},r.Nd=function(){},r.remove=function(){},r.Vf=function(){},B("shaka.media.IClosedCaptionParser",Tt),(r=St.prototype).init=function(e,t,n){if(t=void 0!==t&&t,-1!=(n=void 0===n?-1:n)&&this.i!=n){t=n;var r=this.h.get(t);this.h.set(this.i,this.g),r?this.g=r:((r=kt)&&(this.g=r()),this.h.set(t,this.g))}else t||this.Nd();this.j.init(e),-1!=n&&(this.i=n)},r.xf=function(e){for(var t=(e=g(e=this.j.parse(e))).next();!t.done;t=e.next()){var n=Ne((t=t.value).packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},r.Nd=function(){this.g.clear()},r.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=g(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var r=this.h.get(n);r&&r.clear(),this.h.delete(n)}},r.Vf=function(){return this.g.getStreams()},B("shaka.media.ClosedCaptionParser",St),St.findDecoder=function(){return kt},St.unregisterDecoder=function(){kt=null},St.registerDecoder=function(e){kt=e},St.findParser=At,St.unregisterParser=function(e){It.delete(e)},St.registerParser=wt;var It=new Map,kt=null;function _t(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Rt,this.scroll=xt}B("shaka.text.CueRegion",_t);var Rt=1;_t.units={PX:0,PERCENTAGE:Rt,LINES:2};var xt="";function Ct(e){this.h=e||"",this.g=0}function Dt(e){Lt(e,/[ \t]+/gm)}function Lt(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function Mt(e){return e.g==e.h.length?null:(e=Lt(e,/[^ \t\n]*/gm))?e[0]:null}function Nt(e){if(null==(e=Lt(e,Ot)))return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function Pt(e){return e?Nt(new Ct(e)):null}_t.scrollMode={NONE:xt,UP:"up"};var Ot=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Ft(){}function Ut(e){var t=new WeakSet;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||ArrayBuffer.isView(n))return n;if(t.has(n))return null;var r=Array.isArray(n);if(n.constructor!=Object&&!r)return null;t.add(n);var i,a=r?[]:{};for(i in n)a[i]=e(n[i]);return r&&(a.length=n.length),a}}(e)}function zt(e){var t,n={};for(t in e)n[t]=e[t];return n}function Bt(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=n.toString(),i=e[n];void 0!==i&&(i=Bt(i))&&t.push(r+":"+i)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for((n=Object.keys(e)).sort(),t=[],r=(n=g(n)).next();!r.done;r=n.next())i=r.value,r=JSON.stringify(i),void 0!==(i=e[i])&&(i=Bt(i))&&t.push(r+":"+i);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}
/*
         @license
         tXml
         Copyright 2015 Tobias Nickel
         SPDX-License-Identifier: MIT
        */
function jt(e,t){var n=void 0!==n&&n;return qt(e=qe(e),t,n)}function qt(e,t,n){return e=function(e,t){function n(a,s){s=void 0!==s&&s;for(var o=[];e[i];)if(60==e.charCodeAt(i)){if(47===e.charCodeAt(i+1)){s=i+2,i=e.indexOf(">",i);var l=(s=e.substring(s,i)).indexOf(a);if(-1==l){var u=a.indexOf(".");u>0&&(l=s.indexOf(a.substring(0,u)))}if(-1==l)throw a=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(a.length-1)+"\nColumn: "+(a[a.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}if(33===e.charCodeAt(i+1)){if(45==e.charCodeAt(i+2)){for(;-1!==i&&(62!==e.charCodeAt(i)||45!=e.charCodeAt(i-1)||45!=e.charCodeAt(i-2)||-1==i);)i=e.indexOf(">",i+1);-1===i&&(i=e.length)}else if(91===e.charCodeAt(i+2)&&91===e.charCodeAt(i+8)&&"cdata"===e.substr(i+3,5).toLowerCase()){-1==(l=e.indexOf("]]>",i))?(o.push(e.substr(i+9)),i=e.length):(o.push(e.substring(i+9,l)),i=l+3);continue}i++;continue}e:{u=s,i++;var d=r(),c={};for(l=[];62!==e.charCodeAt(i)&&e[i];){var h=e.charCodeAt(i);if(h>64&&h<91||h>96&&h<123){h=r();for(var f=e.charCodeAt(i);f&&39!==f&&34!==f&&!(f>64&&f<91||f>96&&f<123)&&62!==f;)i++,f=e.charCodeAt(i);var g=i+1;if(i=e.indexOf(e[i],g),g=e.slice(g,i),39===f||34===f){if(-1===i){if(u={tagName:d,attributes:c,children:l,parent:null},t)for(d=0;d<l.length;d++)"string"!=typeof l[d]&&(l[d].parent=u);l=u;break e}}else g=null,i--;if(h.startsWith("xmlns:")){f=g;var m=h.split(":")[1];vn.set(f,m),bn.set(m,f)}"tt"===d&&"xml:space"===h&&"preserve"===g&&(u=!0),c[h]=g}i++}for(47!==e.charCodeAt(i-1)?(i++,l=n(d,u)):i++,u={tagName:d,attributes:c,children:l,parent:null},d=l.length,c=0;c<d;c++)"string"!=typeof(h=l[c])?t&&(h.parent=u):c==d-1&&"\n"==h&&l.pop();l=u}if(o.push(l),"string"==typeof l)break;"?"===l.tagName[0]&&l.children&&(o.push.apply(o,p(l.children)),l.children=[])}else l=i,-2==(i=e.indexOf("<",i)-1)&&(i=e.length),l=e.slice(l,i+1),s?l.length>0&&o.push(l):(o.length&&1==l.length&&"\n"==l[0]||l.trim().length>0)&&o.push(l),i++;return o}function r(){for(var t=i;-1==="\r\n\t>/= ".indexOf(e[i])&&e[i];)i++;return e.slice(t,i)}var i=0;return n("")}(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find(function(e){return t.split(",").includes(e.tagName)}))?e:null}function Gt(e){return vn.has(e)?vn.get(e):""}function Ht(e){return"string"==typeof e}function Vt(e){var t=[];if(!e.children)return[];for(var n=(e=g(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function Kt(e,t){var n=[];if(!e.children)return[];for(var r=(e=g(e.children)).next();!r.done;r=e.next())(r=r.value).tagName===t&&n.push(r);return n}function $t(e){return"string"==typeof e?Ke(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:Ke(e)}function Yt(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=$t(e))&&(e=e.trim()),e):null}function Wt(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var r=(e=g(e.children)).next();!r.done;r=e.next())Wt(r.value,t,n);return n}function Xt(e,t){return 1!=(e=Kt(e,t)).length?null:e[0]}function Qt(e,t,n){return 1!=(e=en(e,t,n)).length?null:e[0]}function Jt(e,t,n,r){r=void 0===r?null:r;var i=null;return null!=(e=e.attributes[t])&&(i=n(e)),null==i?r:i}function Zt(e,t,n){return t=Gt(t),e.attributes[t+":"+n]||null}function en(e,t,n){var r=Gt(t);if(t=[],e.children)for(n=r?r+":"+n:n,r=(e=g(e.children)).next();!r.done;r=e.next())(r=r.value)&&r.tagName===n&&t.push(r);return t}function tn(e,t,n){for(var r=(t=g(t)).next();!r.done;r=t.next())if(r=Zt(e,r.value,n))return r;return null}function nn(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function rn(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function an(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function sn(e){return(e=Number(e))%1==0?e:null}function on(e){return(e=Number(e))%1==0&&e>0?e:null}function ln(e){return(e=Number(e))%1==0&&e>=0?e:null}function un(e){return e=Number(e),isNaN(e)?null:e}function dn(e){return!!e&&"true"===e.toLowerCase()}function cn(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function hn(e){for(var t=[],n=(e=g(e=Ke(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var r=(n=n.value).match(/^([\w]+)/);if(r){var i=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),o=n.match(/\[(\d+)\]/);t.push({name:r[0],id:i?i[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:o?Number(o[1])-1:null,Cc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Cc=n.slice(1))}return t}function fn(e,t){var n=hn(t.attributes.sel||"");if(n.length){var r=n[n.length-1],i=t.attributes.pos||null;null==(n=r.position)&&(null!==r.t&&(n=gn(e,"t",r.t)),null!==r.n&&(n=gn(e,"n",r.n))),null===n?n="prepend"===i?0:e.length:"prepend"===i?--n:"after"===i&&++n,i=t.tagName,(r=r.Cc)&&e[n]?pn(e[n],i,r,Yt(t)||""):("remove"!==i&&"replace"!==i||e.splice(n,1),"add"!==i&&"replace"!==i||e.splice.apply(e,[n,0].concat(p(t.children))))}}function gn(e,t,n){for(var r=0,i=(e=g(e)).next();!i.done;i=e.next()){if(Number(i.value.attributes[t])===n)return r;r++}return null}function pn(e,t,n,r){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=r)}function mn(e){var t="",n=e.tagName.split(":");for(var r in n.length>0&&(t=n[0],t=bn.has(t)?bn.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(r,e.attributes[r]);for(r=(e=g(e.children)).next();!r.done;r=e.next())n=void 0,n="string"==typeof(r=r.value)?new Text(r):mn(r),t.appendChild(n);return t}function yn(e){if(!e)return null;for(var t={tagName:e.tagName,attributes:zt(e.attributes),children:[],parent:null},n=(e=g(e.children)).next();!n.done;n=e.next())"string"==typeof(n=n.value)||((n=yn(n)).parent=t),t.children.push(n);return t}B("shaka.util.ObjectUtils",Ft),Ft.alphabeticalKeyOrderStringify=Bt,Ft.shallowCloneObject=zt,Ft.cloneObject=Ut;var vn=new Map,bn=new Map;function En(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new _t,this.position=null,this.positionAlign=_n,this.size=0,this.textAlign=Rn,this.direction=Ln,this.writingMode=Mn,this.lineInterpretation=Nn,this.line=null,this.lineHeight="",this.lineAlign=Pn,this.displayAlign=Cn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=zn,this.fontStyle=jn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function Tn(e,t){return(e=new En(e,t,"")).lineBreak=!0,e}function Sn(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!Z(e.nestedCues,t.nestedCues,Sn))return!1}else if("region"==n||"cellResolution"==n){for(var r in e[n])if(e[n][r]!=t[n][r])return!1}else if(Array.isArray(e[n])){if(!Z(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function wn(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&An(t);var r=n;n=[];for(var i=-1,a=0;a<r.length;a++)"<"===r[a]?i=a+1:">"===r[a]&&i>0&&((i=r.substr(i,a-i)).match(Vn)&&n.push(i),i=-1);for(a=(n=g(n)).next();!a.done;a=n.next())a=a.value,r=r.replace("<"+a+">",'<div time="'+a+'">'),r+="</div>";e:{a=r,i=[];var s=-1;n="",r=!1;for(var o=0;o<a.length;o++)if("/"===a[o]){var l=a.indexOf(">",o);if(-1===l){n=a;break e}if((l=a.substring(o+1,l))&&"v"==l){r=!0;var u=null;if(i.length&&(u=i[i.length-1]),u){if(u===l)n+="/"+l+">";else{if(!u.startsWith("v")){n+=a[o];continue}n+="/"+u+">"}o+=l.length+1}else n+=a[o]}else n+=a[o]}else"<"===a[o]?"v"!=a[s=o+1]&&(s=-1):">"===a[o]&&s>0&&(i.push(a.substr(s,o-s)),s=-1),n+=a[o];for(i=(a=g(i)).next();!i.done;i=a.next())s=(i=i.value).replace(" ",".voice-"),n=(n=n.replace("<"+i+">","<"+s+">")).replace("</"+i+">","</"+s+">"),r||(n+="</"+s+">")}n=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,r=RegExp(n.source);return e&&r.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(n),e.payload="",r="<span>"+n.replace(/\n/g,"<br />")+"</span>";try{var d=qt(r,"span")}catch(c){}if(d)if(1!=(d=d.children).length||d[0].tagName)for(n=(d=g(d)).next();!n.done;n=d.next())In(n.value,e,t);else e.payload=Ke(n);else e.payload=Ke(n)}else e.payload=Ke(n)}function An(e){for(var t=g(Object.entries(Fn)),n=t.next();!n.done;n=t.next()){var r=g(n.value);n=r.next().value,r=r.next().value;var i=new En(0,0,"");i.color=r,e.set("."+n,i)}for(n=(t=g(Object.entries(Un))).next();!n.done;n=t.next())n=(r=g(n.value)).next().value,r=r.next().value,(i=new En(0,0,"")).backgroundColor=r,e.set("."+n,i)}function In(e,t,n){var r=t.clone();if(r.nestedCues=[],r.payload="",r.rubyTag="",r.line=null,r.region=new _t,r.position=null,r.size=0,r.textAlign=Rn,e.tagName)for(var i=g(e.tagName.split(/(?=[ .])+/g)),a=i.next();!a.done;a=i.next()){var s=a=a.value;if(s.startsWith(".voice-")){var o=s.split("-").pop();s='v[voice="'+o+'"]',n.has(s)||(s="v[voice="+o+"]")}switch(n.has(s)&&(o=r,s=n.get(s))&&(o.backgroundColor=kn(s.backgroundColor,o.backgroundColor),o.color=kn(s.color,o.color),o.fontFamily=kn(s.fontFamily,o.fontFamily),o.fontSize=kn(s.fontSize,o.fontSize),o.textShadow=kn(s.textShadow,o.textShadow),o.fontWeight=s.fontWeight,o.fontStyle=s.fontStyle,o.opacity=s.opacity,o.rubyTag=s.rubyTag,o.textCombineUpright=s.textCombineUpright,o.wrapLine=s.wrapLine),a){case"br":return r=Tn(r.startTime,r.endTime),void t.nestedCues.push(r);case"b":r.fontWeight=Bn;break;case"i":r.fontStyle=qn;break;case"u":r.textDecoration.push(Hn);break;case"font":(a=e.attributes.color)&&(r.color=a);break;case"div":if(!(a=e.attributes.time))break;(a=Pt(a))&&(r.startTime=a);break;case"ruby":case"rp":case"rt":r.rubyTag=a}}if(i=e.children,Ht(e)||1==i.length&&Ht(i[0]))for(n=$t(e).split("\n"),e=!0,i=(n=g(n)).next();!i.done;i=n.next())i=i.value,e||(e=Tn(r.startTime,r.endTime),t.nestedCues.push(e)),i.length>0&&((e=r.clone()).payload=Ke(i),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(r),e=(t=g(i)).next();!e.done;e=t.next())In(e.value,r,n)}function kn(e,t){return e&&e.length>0?e:t}En.prototype.clone=function(){var e,t=new En(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},B("shaka.text.Cue",En),En.parseCuePayload=wn,En.equal=Sn,En.prototype.clone=En.prototype.clone;var _n="auto";En.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:_n};var Rn="center",xn={LEFT:"left",RIGHT:"right",CENTER:Rn,START:"start",END:"end"};En.textAlign=xn;var Cn="after",Dn={BEFORE:"before",CENTER:"center",AFTER:Cn};En.displayAlign=Dn;var Ln="ltr";En.direction={HORIZONTAL_LEFT_TO_RIGHT:Ln,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Mn="horizontal-tb";En.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Mn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Nn=0;En.lineInterpretation={LINE_NUMBER:Nn,PERCENTAGE:1};var Pn="start",On={CENTER:"center",START:Pn,END:"end"};En.lineAlign=On;var Fn={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};En.defaultTextColor=Fn;var Un={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};En.defaultTextBackgroundColor=Un;var zn=400,Bn=700;En.fontWeight={NORMAL:zn,BOLD:Bn};var jn="normal",qn="italic",Gn={NORMAL:jn,ITALIC:qn,OBLIQUE:"oblique"};En.fontStyle=Gn;var Hn="underline";En.textDecoration={UNDERLINE:Hn,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Vn=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Kn(){}function $n(e,t,n){Wn.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,yf:t})}function Yn(e,t){for(var n=e.toLowerCase().split(";")[0],r=g([Zn,Jn,Qn,Xn]),i=r.next();!i.done;i=r.next())if(i=Wn.get(n+"-"+i.value)){var a=i.yf(),s=a.isSupported(e,t);if(a.destroy(),s)return i.yf}return null}Kn.prototype.destroy=function(){},B("shaka.transmuxer.TransmuxerEngine",Kn),Kn.findTransmuxer=Yn,Kn.unregisterTransmuxer=function(e,t){Wn.delete(e.toLowerCase().split(";")[0]+"-"+t)},Kn.registerTransmuxer=$n,Kn.prototype.destroy=Kn.prototype.destroy;var Wn=new Map,Xn=1,Qn=2,Jn=3,Zn=4;function er(){}function tr(e,t){var n=e;return t&&!cr.includes(e)&&(n+='; codecs="'+t+'"'),n}function nr(e,t){return t&&(e+='; codecs="'+t+'"'),e}function rr(e,t,n){var r=tr(e,t);return Yn(t=nr(e,t))?(e=Yn(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?r.replace("video","audio"):r,n}function ir(e){return e.split(";")[0].split("/")[1]}function ar(e){var t=dr(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function sr(e){for(var t=[],n=(e=g(e.split(","))).next();!n.done;n=e.next())n=dr(n.value),t.push(n[0]);return t.sort().join(",")}function or(e){return e.split(";")[0]}function lr(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function ur(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function dr(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}Kn.PluginPriority={FALLBACK:Xn,PREFERRED_SECONDARY:Qn,PREFERRED:Jn,APPLICATION:Zn},B("shaka.util.MimeUtils",er),er.getFullTypeWithAllCodecs=nr,er.getFullType=tr,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var cr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function hr(e){this.i=null,this.l=e,this.C=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.F="",this.B=function(){},this.j=new Map}function fr(e,t){br.set(e,t)}function gr(e){return br.get(e)}function pr(e){return!!br.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!kt}function mr(e,t,n){e.F=t,(t=e.j.get(t))&&(t=t.filter(function(e){return e.endTime<=n})).length&&e.l.append(t)}function yr(e,t,n){t.startTime+=n,t.endTime+=n;for(var r=(t=g(t.nestedCues)).next();!r.done;r=t.next())yr(e,r.value,n)}function vr(e){for(var t=1/0,n=-1/0,r=g(e.j.values()),i=r.next();!i.done;i=r.next())for(var a=(i=g(i.value)).next();!a.done;a=i.next())a=a.value,t=Math.min(t,a.startTime),n=Math.max(n,a.endTime);t!==1/0&&n!==-1/0&&(e.g=null==e.g?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}hr.prototype.destroy=function(){return this.l=this.i=null,this.j.clear(),Promise.resolve()},hr.prototype.remove=function(e,t,n){n=void 0!==n&&n;var r=this;return L(function(i){return 1==i.g?E(i,Promise.resolve(),2):e>=t?i.return():(n&&function(e,t,n){for(var r=g(e.j.keys()),i=r.next();!i.done;i=r.next()){i=i.value;var a=e.j.get(i);a=a.filter(function(e){return e.startTime<t||e.endTime>=n}),e.j.set(i,a)}}(r,e,t),r.l&&r.l.remove(e,t)&&null!=r.g&&(t<=r.g||e>=r.h||(e<=r.g&&t>=r.h?r.g=r.h=null:e<=r.g&&t<r.h?r.g=t:e>r.g&&t>=r.h&&(r.h=e)),vr(r)),void T(i))})},B("shaka.text.TextEngine",hr),hr.prototype.destroy=hr.prototype.destroy,hr.findParser=gr,hr.unregisterParser=function(e){br.delete(e)},hr.registerParser=fr;var br=new Map;function Er(e){this.h=e,this.g=null}function Tr(e){this.h=e,this.g=null}function Sr(e,t){return e.concat(t)}function wr(){}function Ar(e){return null!=e}function Ir(e,t){return Promise.race([t,new Promise(function(t,n){new Tr(n).ia(e)})])}function kr(){}function _r(e,t){return e=Cr(e),t=Cr(t),e.split("-")[0]==t.split("-")[0]}function Rr(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function xr(e,t){return e=Cr(e),t=Cr(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function Cr(e){var t=(e=g(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=g(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Pr.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function Dr(e,t){return e=Cr(e),(t=Cr(t))==e?4:Rr(t,e)?3:xr(t,e)?2:Rr(e,t)?1:0}function Lr(e){var t=e.indexOf("-");return e=(e=t>=0?e.substring(0,t):e).toLowerCase(),Pr.get(e)||e}function Mr(e){return e.language?Cr(e.language):e.audio&&e.audio.language?Cr(e.audio.language):e.video&&e.video.language?Cr(e.video.language):"und"}function Nr(e,t){e=Cr(e);for(var n=new Set,r=(t=g(t)).next();!r.done;r=t.next())n.add(Cr(r.value));for(r=(t=g(n)).next();!r.done;r=t.next())if((r=r.value)==e)return r;for(r=(t=g(n)).next();!r.done;r=t.next())if(Rr(r=r.value,e))return r;for(r=(t=g(n)).next();!r.done;r=t.next())if(xr(r=r.value,e))return r;for(t=(n=g(n)).next();!t.done;t=n.next())if(Rr(e,t=t.value))return t;return null}Er.prototype.ia=function(t){var n=this;this.stop();var r=!0,i=null;return this.g=function(){e.clearTimeout(i),r=!1},i=e.setTimeout(function(){r&&n.h()},1e3*t),this},Er.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Tr.prototype.Jb=function(){return this.stop(),this.h(),this},Tr.prototype.ia=function(e){var t=this;return this.stop(),this.g=new Er(function(){t.h()}).ia(e),this},Tr.prototype.Ea=function(e){var t=this;return this.stop(),this.g=new Er(function(){t.g.ia(e),t.h()}).ia(e),this},Tr.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},B("shaka.util.Timer",Tr),Tr.prototype.stop=Tr.prototype.stop,Tr.prototype.tickEvery=Tr.prototype.Ea,Tr.prototype.tickAfter=Tr.prototype.ia,Tr.prototype.tickNow=Tr.prototype.Jb,B("shaka.util.LanguageUtils",kr),kr.findClosestLocale=Nr,kr.getLocaleForVariant=Mr,kr.getLocaleForText=function(e){return Cr(e.language||"und")},kr.getBase=Lr,kr.relatedness=Dr,kr.areSiblings=function(e,t){var n=Lr(e),r=Lr(t);return e!=n&&t!=r&&n==r},kr.normalize=Cr,kr.isSiblingOf=xr,kr.isParentOf=Rr,kr.areLanguageCompatible=_r,kr.areLocaleCompatible=function(e,t){return(e=Cr(e))==(t=Cr(t))};var Pr=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Or(){}function Fr(e,t,n,r,i){function a(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),e.roles&&(t+=e.roles.sort().join("_")),t}function s(e){var t=e.language+(e.channelsCount||0)+(e.audioSamplingRate||0)+e.roles.join(",")+e.label+e.groupId+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}if(i.length){for(var o=e.textStreams,l=(i=g(i)).next(),u={};!l.done;u={Bh:void 0},l=i.next())if(u.Bh=l.value,(l=o.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.Bh)&&!t.mimeType.startsWith(e.Bh))}}(u))).length){o=l;break}e.textStreams=o}if(o=e.variants,(t.length||n.length)&&(o=function(e,t,n){for(var r=(t=g(t)).next(),i={};!r.done;i={videoCodec:void 0},r=t.next())if(i.videoCodec=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(i)),r.length){e=r;break}for(n=g(n),t=n.next(),r={};!t.done;r={audioCodec:void 0},t=n.next())if(r.audioCodec=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(r)),t.length){e=t;break}return e}(o,t,n)),r.length){for(t=new ee,o=(n=g(o)).next();!o.done;o=n.next())o=o.value,t.push(String(o.video.width||0),o);var d=[];t.forEach(function(e,t){e=0;for(var n=[],i=(t=g(t)).next(),a={};!i.done;a={Tf:void 0},i=t.next())a.Tf=i.value,(i=r.filter(function(e){return function(t){return e.Tf.decodingInfos[0][t]}}(a)).length)>e?(e=i,n=[a.Tf]):i==e&&n.push(a.Tf);d.push.apply(d,p(n))}),o=d}for(n=new Set,t=new Set,i=(o=g(o)).next();!i.done;i=o.next())(i=i.value).audio&&n.add(i.audio),i.video&&t.add(i.video);o=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var c=[];for(n=new Map,i=(o=g(o)).next();!i.done;i=o.next()){if(l=s(i=i.value),(u=n.get(l)||[]).length){var h=u[u.length-1],f=ar(h.codecs),m=ar(i.codecs);f!=m||i.bandwidth&&h.bandwidth&&!(i.bandwidth>h.bandwidth)||(u.push(i),c.push(i.id))}else u.push(i),c.push(i.id);n.set(l,u)}var y={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};o=Array.from(t).sort(function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=ar(e.codecs),r=ar(t.codecs);if(n!=r)return(y[n]||1)-(y[r]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth}),t=mt();var v=[];for(n=new Map,i=(o=g(o)).next();!i.done;i=o.next()){if(l=a(i=i.value),(u=n.get(l)||[]).length){if(h=u[u.length-1],!t&&(f=ar(h.codecs))!==(m=ar(i.codecs)))continue;(f=ar(h.codecs))!=(m=ar(i.codecs))||i.bandwidth&&h.bandwidth&&!(i.bandwidth>h.bandwidth)||(u.push(i),v.push(i.id))}else u.push(i),v.push(i.id);n.set(l,u)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!c.includes(t.id)||e&&!v.includes(e.id))})}function Ur(e,t,n){function r(e,t,n){return e>=t&&e<=n}var i=e.video;if(i&&i.width&&i.height){var a=i.width,s=i.height;if(s>a&&(a=(s=g([s,a])).next().value,s=s.next().value),!r(a,t.minWidth,Math.min(t.maxWidth,n.width))||!r(s,t.minHeight,Math.min(t.maxHeight,n.height))||!r(i.width*i.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!r(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!r(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!r(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zr(e,t,n,r){return n=void 0===n?[]:n,r=void 0===r?{}:r,L(function(i){return 1==i.g?E(i,Br(e,t,t.offlineSessionIds.length>0,n,r),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return pr(e=tr(e.mimeType,e.codecs))})}(t),E(i,function(e){var t,n,r,i,a,s,o;return L(function(l){switch(l.g){case 1:t=[],n=g(e.imageStreams),r=n.next();case 2:if(r.done){l.A(4);break}if(i=r.value,"application/mp4"==(a=i.mimeType)&&"mjpg"==i.codecs&&(a="image/jpg"),di.has(a)){l.A(5);break}if(!(s=ci.get(a))){di.set(a,!1),l.A(5);break}return E(l,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(s),7);case 7:o=l.h,di.set(a,o);case 5:di.get(a)&&t.push(i),r=n.next(),l.A(2);break;case 4:e.imageStreams=t,T(l)}})}(t),0))})}function Br(e,t,n,r,i){var a,s;return L(function(o){if(1==o.g)return ae().Ui()&&function(e){for(var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set,r=(e=g(e)).next();!r.done;r=e.next())(r=r.value).video&&n.add(r.video);for(n=g(n),e=n.next();!e.done;e=n.next()){e=e.value;for(var i=(r=g(t)).next();!i.done;i=r.next()){var a=g(i.value);if(i=a.next().value,a=a.next().value,e.codecs.includes(i)){e.codecs=e.codecs.replace(i,a);break}}}}(t.variants),E(o,Gr(t.variants,n,!1,r),2);a=null,e&&(s=e.g)&&(a=s.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t,n){if(!e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)}))return!1;var r=ae(),i="Xbox"===r.Nb();r="MOBILE"===r.Ua()&&"GECKO"===r.Ha();var a=e.video,s=a&&a.width||0,o=a&&a.height||0;return!(i&&a&&(s>1920||o>1080)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(i=a&&a.dependencyStream)&&!gt(i)||(e=e.audio,r&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}(e,a,i);if(!t){var n=[];e.audio&&n.push(ai(e.audio)),e.video&&n.push(ai(e.video))}return t}),T(o)})}function jr(e,t){var n,r,i,a,s,o,l;return L(function(u){if(1==u.g){for(n=function(e,t){if(e){var n=zt(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},r=null,i=[],a=g(t),s=a.next(),o={};!s.done;o={cache:void 0,Pe:void 0},s=a.next())l=s.value,o.Pe=Bt(l),o.cache=li,o.cache.has(o.Pe)?r=n(r,o.cache.get(o.Pe)):i.push(qr(l).then(function(e){return function(t){for(var i=null,a=(t=g(t||[])).next();!a.done;a=t.next())i=n(i,a.value);i&&(e.cache.set(e.Pe,i),r=n(r,i))}}(o)));return E(u,Promise.all(i),2)}r&&e.decodingInfos.push(r),T(u)})}function qr(e){var t=[""];e.video&&(t=lr(e.video.contentType).split(","));var n=[""];e.audio&&(n=lr(e.audio.contentType).split(","));for(var r=[],i=(t=g(t)).next();!i.done;i=t.next()){i=i.value;for(var a=g(n),s=a.next(),o={};!s.done;o={Qc:void 0},s=a.next())s=s.value,o.Qc=Ut(e),e.video&&(o.Qc.video.contentType=tr(or(o.Qc.video.contentType),i)),e.audio&&(o.Qc.audio.contentType=tr(or(o.Qc.audio.contentType),s)),r.push(new Promise(function(e){return function(t,n){("MOBILE"==ae().Ua()?Ir(5,navigator.mediaCapabilities.decodingInfo(e.Qc)):navigator.mediaCapabilities.decodingInfo(e.Qc)).then(function(e){t(e)}).catch(n)}}(o)))}return Promise.all(r).catch(function(){return JSON.stringify(e),null})}function Gr(e,t,n,r){var i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T,S,w;return L(function(A){switch(A.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return A.return();i=g(r),a=i.next(),s={};case 2:if(a.done){A.A(4);break}s.Ci=a.value,o=!1,l=g(e),u=l.next();case 5:if(u.done){A.A(7);break}d=u.value,c=Hr(d,t,n).filter(function(e){return function(t){return((t=t[0]).keySystemConfiguration&&t.keySystemConfiguration.keySystem)===e.Ci}}(s)),h=g(c),f=h.next();case 8:if(f.done){A.A(10);break}return p=f.value,E(A,jr(d,p),9);case 9:f=h.next(),A.A(8);break;case 10:d.decodingInfos.some(function(e){return e.supported})&&(o=!0),u=l.next(),A.A(5);break;case 7:if(o)return A.return();s={Ci:void 0},a=i.next(),A.A(2);break;case 4:m=g(e),y=m.next();case 12:if(y.done){A.A(0);break}v=y.value,b=Hr(v,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!r.includes(e)}),T=g(b),S=T.next();case 15:if(S.done){y=m.next(),A.A(12);break}return w=S.value,E(A,jr(v,w),16);case 16:S=T.next(),A.A(15)}})}function Hr(e,t,n){var r=e.audio,i=e.video,a=[],s=[];if(i)for(var o=g(i.fullMimeTypes),l=o.next();!l.done;l=o.next()){var u=lr(l=l.value);if(u.includes(",")&&!r){var d=u.split(","),c=or(l);u=it("video",d),c=rr(c,d=Vr(d=it("audio",d),c),"audio"),s.push({contentType:c,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(u=Kr(u),l={contentType:rr(or(l),u,"video"),width:i.width||64,height:i.height||64,bitrate:i.bandwidth||e.bandwidth||1,framerate:i.frameRate||30},i.hdr)switch(i.hdr){case"PQ":l.transferFunction="pq";break;case"HLG":l.transferFunction="hlg"}i.colorGamut&&(l.colorGamut=i.colorGamut),a.push(l)}if(r)for(l=(o=g(r.fullMimeTypes)).next();!l.done;l=o.next())l=rr(l=or(u=l.value),u=Vr(lr(u),l),"audio"),s.push({contentType:l,channels:r.channelsCount||2,bitrate:r.bandwidth||e.bandwidth||1,samplerate:r.audioSamplingRate||1,spatialRendering:r.spatialAudio});for(o=[],0==a.length&&a.push(null),0==s.length&&s.push(null),l=(a=g(a)).next();!l.done;l=a.next())for(l=l.value,c=(u=g(s)).next();!c.done;c=u.next())c=c.value,d={type:n?"file":"media-source"},l&&(d.video=l),c&&(d.audio=c),o.push(d);if(!(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[o];for(e=[],n=new Map,a=(s=g(s)).next();!a.done;a=s.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],l=(a=g(n.keys())).next();!l.done;l=a.next()){for(l=l.value,c=n.get(l),u=new Map,d=(c=g(c)).next();!d.done;d=c.next()){var h=(d=d.value).videoRobustness+","+d.audioRobustness;u.get(h)||u.set(h,[]),u.get(h).push(d)}for(c=(u=g(u.values())).next();!c.done;c=u.next()){c=c.value,d=[];for(var f=(h=g(o)).next();!f.done;f=h.next()){f=Object.assign({},f.value);for(var p={keySystem:l,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},m=g(c),y=m.next();!y.done;y=m.next()){if((y=y.value).initData&&y.initData.length){for(var v=new Set,b=g(y.initData),E=b.next();!E.done;E=b.next())v.add(E.value.initDataType);p.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(p.distinctiveIdentifier="required"),y.persistentStateRequired&&(p.persistentState="required"),y.sessionType&&(p.sessionTypes=[y.sessionType]),r&&(p.audio?(y.encryptionScheme&&(p.audio.encryptionScheme=p.audio.encryptionScheme||y.encryptionScheme),p.audio.robustness=p.audio.robustness||y.audioRobustness):(p.audio={robustness:y.audioRobustness},y.encryptionScheme&&(p.audio.encryptionScheme=y.encryptionScheme)),""==p.audio.robustness&&delete p.audio.robustness),i&&(p.video?(y.encryptionScheme&&(p.video.encryptionScheme=p.video.encryptionScheme||y.encryptionScheme),p.video.robustness=p.video.robustness||y.videoRobustness):(p.video={robustness:y.videoRobustness},y.encryptionScheme&&(p.video.encryptionScheme=y.encryptionScheme)),""==p.video.robustness&&delete p.video.robustness)}f.keySystemConfiguration=p,d.push(f)}e.push(d)}}return e}function Vr(e,t){var n=ae();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Ha()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Ha()?"opus":"mp4"==ir(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.oe()?"ec-3":e}function Kr(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function $r(e){var t=e.audio,n=e.video,r=t?t.mimeType:null,i=n?n.mimeType:null,a=t?t.codecs:null,s=n?n.codecs:null,o=t?t.groupId:null,l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var u=[];t&&u.push(t.kind),n&&u.push(n.kind),u=u[0]||null;var d=new Set;if(t)for(var c=g(t.roles),h=c.next();!h.done;h=c.next())d.add(h.value);if(n)for(h=(c=g(n.roles)).next();!h.done;h=c.next())d.add(h.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:u,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:l,audioMimeType:r,videoMimeType:i,codecs:"",audioCodec:a,videoCodec:s,primary:e.primary,roles:Array.from(d),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(r=n.dependencyStream)&&(e.width=r.width||e.width,e.height=r.height||e.height,e.videoCodec=r.codecs||e.videoCodec,e.videoBandwidth&&r.bandwidth&&(e.videoBandwidth+=r.bandwidth)),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=i,i=s.split(",");try{e.videoCodec=it("video",i),e.audioCodec=it("audio",i)}catch(f){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,i=t.dependencyStream)&&(e.audioCodec=i.codecs||e.audioCodec,e.audioBandwidth&&i.bandwidth&&(e.audioBandwidth+=i.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function Yr(e){return{id:e.id,active:!1,type:ot,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Wr(e){var t=e.width||null,n=e.height||null,r=null;e.segmentIndex&&(r=Dl(e.segmentIndex));var i=e.tilesLayout;return r&&(i=r.tilesLayout||i),i&&null!=t&&(t/=Number(i.split("x")[0])),i&&null!=n&&(n/=Number(i.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:i||null,originalImageId:e.originalId}}function Xr(e){return e.__shaka_id||(e.__shaka_id=ui++),e.__shaka_id}function Qr(e){var t={id:Xr(e),active:"disabled"!=e.mode,type:ot,bandwidth:0,language:Cr(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function Jr(e,t){var n=e?e.language:null;if(n={id:Xr(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Cr(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function Zr(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function ei(e){return e.filter(function(e){return Zr(e)})}function ti(e,t,n,r){var i=e,a=e.filter(function(e){return e.primary});a.length&&(i=a);var s=i.length?i[0].language:"";if(i=i.filter(function(e){return e.language==s}),t){var o=Nr(Cr(t),e.map(function(e){return e.language}));o&&(i=e.filter(function(e){return Cr(e.language)==o}))}if(i=i.filter(function(e){return e.forced==r}),n){if((e=ni(i,n)).length)return e}else if((e=i.filter(function(e){return 0==e.roles.length})).length)return e;return(e=i.map(function(e){return e.roles}).reduce(Sr,[])).length?ni(i,e[0]):i}function ni(e,t){return e.filter(function(e){return e.roles.includes(t)})}function ri(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function ii(e,t){t.length&&(t=t.filter(function(t){return ar(e.codecs)==ar(t.codecs)}).sort(function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(t){return e.width==t.width&&e.height==t.height})))&&(e.trickModeVideo=t)}function ai(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function si(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var r=Cr(n.preferredTextLanguage);return t=Cr(t.language),2==n.autoShowText?_r(t,r):3==n.autoShowText?!!e&&(e=Cr(e.language),_r(t,r)&&!_r(e,t)):(K("Invalid autoShowText setting!"),!1)}function oi(e){for(var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n=(e=g(e)).next();!n.done;n=e.next()){var r={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:(n=n.value)?or(n):"",codecs:n?lr(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};r.fullMimeTypes.add(tr(r.mimeType,r.codecs)),n.startsWith("audio/")?(r.type="audio",t.audio=r):t.video=r}return t}B("shaka.util.StreamUtils",Or),Or.meetsRestrictions=Ur;var li=new Map,ui=0,di=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),ci=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function hi(){var t=this;this.H=null,this.B=!1,this.u=new G,this.j=new te,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(t.B&&t.g.useNetworkInformation){t.u=new G,t.g&&t.u.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.o=[],this.I=1,this.J=!1,this.h=this.m=this.g=this.C=null,this.l=new Tr(function(){if(t.B&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.H(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.F=e,"documentPictureInPicture"in e&&this.j.D(e.documentPictureInPicture,"enter",function(){t.F=e.documentPictureInPicture.window,t.l&&t.l.Jb(),t.j.Ba(t.F,"pagehide",function(){t.F=e,t.l&&t.l.Jb()})}),this.G=this.i=null}function fi(e,t){if(void 0===t||!t){if(!e.J){if(!((t=e.u).g>=t.i))return;e.J=!0,e.C-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}if(Date.now()-e.C<1e3*e.g.switchInterval)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.H(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function gi(e,t,n,r,i){if(e.G){var a=e.G.bi();a&&(n=n.filter(function(e){return!e.bandwidth||!a||e.bandwidth<=a}))}return t&&(n=n.filter(function(e){return Ur(e,t,{width:i,height:r})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(r=hi.prototype).stop=function(){this.H=null,this.B=!1,this.o=[],this.I=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.l&&this.l.stop(),this.G=this.i=null},r.release=function(){this.stop(),this.j.release(),this.l=null},r.init=function(e){this.H=e},r.chooseVariant=function(e){e=void 0!==e&&e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,t=this.F.screen.height*n,n*=this.F.screen.width),this.h&&this.g.restrictToElementSize){var r=this.g.ignoreDevicePixelRatio?1:this.F.devicePixelRatio,i=this.m.clientHeight,a=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(i=this.i.height,a=this.i.width),t=Math.min(t,i*r),n=Math.min(n,a*r)}if((i=this.o.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(i=this.o),r=i,e&&i.length!=this.o.length&&(r=this.o.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),e=gi(this,this.g.restrictions,r,1/0,1/0),t!=1/0||n!=1/0){for(e=function(e){for(var t=[],n=(e=g(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(e),i=(e=g(e)).next();!i.done;i=e.next())if((i=i.value).height>=t&&i.width>=n){t=i.height,n=i.width;break}e=gi(this,this.g.restrictions,r,t,n)}for(t=this.getBandwidthEstimate(),r.length&&!e.length&&(e=[(e=gi(this,null,r,1/0,1/0))[0]]),n=e[0]||null,r=0;r<e.length;r++){i=e[r];var s=isNaN(this.I)?1:Math.abs(this.I);a=s*i.bandwidth/this.g.bandwidthDowngradeTarget;for(var o={bandwidth:1/0},l=r+1;l<e.length;l++)if(i.bandwidth!=e[l].bandwidth){o=e[l];break}s=s*o.bandwidth/this.g.bandwidthUpgradeTarget,t>=a&&t<=s&&(n.bandwidth!=i.bandwidth||n.bandwidth==i.bandwidth&&n.video&&i.video&&(n.video.width<i.video.width||n.video.height<i.video.height))&&(n=i)}return this.C=Date.now(),n},r.enable=function(){this.B=!0},r.disable=function(){this.B=!1},r.segmentDownloaded=function(e,t,n,r){var i=e;this.g.removeLatencyFromFirstPacketTime&&r&&1===r.packetNumber&&r.timeToFirstByte&&(i=e-r.timeToFirstByte),i>=this.g.cacheLoadThreshold&&this.u.sample(i,t),n&&null!=this.C&&this.B&&fi(this)},r.trySuggestStreams=function(){this.B&&(this.C=Date.now(),fi(this,!0))},r.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.G?this.G.getBandwidthEstimate(e):e)},r.setVariants=function(e){return!J(e,this.o)&&(this.o=e,!0)},r.playbackRateChanged=function(e){this.I=e},r.setMediaElement=function(t){function n(){r.l.ia(pi)}var r=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.D(t,"enterpictureinpicture",function(e){e.pictureInPictureWindow&&(r.i=e.pictureInPictureWindow,r.j.D(r.i,"resize",n))}),this.j.D(t,"leavepictureinpicture",function(){r.i&&r.j.Ma(r.i,"resize",n),r.i=null})},r.setCmsdManager=function(e){this.G=e},r.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)},B("shaka.abr.SimpleAbrManager",hi),hi.prototype.configure=hi.prototype.configure,hi.prototype.setCmsdManager=hi.prototype.setCmsdManager,hi.prototype.setMediaElement=hi.prototype.setMediaElement,hi.prototype.playbackRateChanged=hi.prototype.playbackRateChanged,hi.prototype.setVariants=hi.prototype.setVariants,hi.prototype.getBandwidthEstimate=hi.prototype.getBandwidthEstimate,hi.prototype.trySuggestStreams=hi.prototype.trySuggestStreams,hi.prototype.segmentDownloaded=hi.prototype.segmentDownloaded,hi.prototype.disable=hi.prototype.disable,hi.prototype.enable=hi.prototype.enable,hi.prototype.chooseVariant=hi.prototype.chooseVariant,hi.prototype.init=hi.prototype.init,hi.prototype.release=hi.prototype.release,hi.prototype.stop=hi.prototype.stop;var pi=1;function mi(e,t){if(e===t||!e.length||!t.length)return!0;for(var n=(e=g(e)).next();!n.done;n=e.next()){if(Ei(n=n.value))return!0;for(var r=g(t),i=r.next();!i.done;i=r.next())if(i=i.value,n.keySystem===i.keySystem||Ei(i))return!0}return!1}function yi(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],r=(e=g(e)).next();!r.done;r=e.next()){r=r.value;for(var i=g(t),a=i.next();!a.done;a=i.next()){if(a=a.value,r.keySystem==a.keySystem){i=new Map;for(var s=g((r.initData||[]).concat(a.initData||[])),o=s.next();!o.done;o=s.next())o=o.value,i.set(o.keyId,o);i=Array.from(i.values()),s=r.keyIds&&a.keyIds?new Set([].concat(p(r.keyIds),p(a.keyIds))):r.keyIds||a.keyIds,n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||a.persistentStateRequired,videoRobustness:r.videoRobustness||a.videoRobustness,audioRobustness:r.audioRobustness||a.audioRobustness,serverCertificate:r.serverCertificate||a.serverCertificate,serverCertificateUri:r.serverCertificateUri||a.serverCertificateUri,initData:i,keyIds:s});break}Ei(r)?n.push(r):Ei(a)&&n.push(a)}}return n}function vi(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function bi(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function Ei(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}var Ti=new ie(function(){return Me(new Uint8Array([0]))}),Si=new Map;function wi(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Ai(e){var t,n;return L(function(r){if(1==r.g){if(e.g>=e.l){if(!e.i)throw new Ue(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?r.return():(n=e.h*(1+(2*Math.random()-1)*e.o),E(r,new Promise(function(e){new Tr(e).ia(n/1e3)}),2))}e.h*=e.m,T(r)})}function Ii(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function ki(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function _i(e,t){this.promise=e,this.i=t,this.g=null}function Ri(e){return new _i(Promise.reject(e),function(){return Promise.resolve()})}function xi(){var e=Promise.reject(new Ue(2,7,7001));return e.catch(function(){}),new _i(e,function(){return Promise.resolve()})}function Ci(e){return new _i(Promise.resolve(e),function(){return Promise.resolve()})}function Di(e){return new _i(e,function(){return e.catch(function(){})})}function Li(e){return new _i(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function Mi(t,n){if(n)if(n instanceof Map)for(var r=g(n.keys()),i=r.next();!i.done;i=r.next())i=i.value,Object.defineProperty(this,i,{value:n.get(i),writable:!0,enumerable:!0});else for(r in n)Object.defineProperty(this,r,{value:n[r],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ni(e){var t,n=new Mi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ki.prototype.resolve=function(){},ki.prototype.reject=function(){},_i.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},_i.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},_i.prototype.Xa=function(e,t){function n(n){return function(o){if(i.g&&n)a.reject(s);else{var l=n?e:t;l?r=function(e,t,n){try{var r=e(t);return r&&r.promise&&r.abort?(n.resolve(r.promise),function(){return r.abort()}):(n.resolve(r),function(){return Promise.resolve(r).then(function(){},function(){})})}catch(i){return n.reject(i),function(){return Promise.resolve()}}}(l,o,a):(n?a.resolve:a.reject)(o)}}}function r(){return a.reject(s),i.abort()}var i=this,a=new ki;a.catch(function(){});var s=new Ue(2,7,7001);return this.promise.then(n(!0),n(!1)),new _i(a,function(){return r()})},o.Object.defineProperties(_i.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),B("shaka.util.AbortableOperation",_i),_i.prototype.chain=_i.prototype.Xa,_i.prototype.finally=_i.prototype.finally,_i.all=Li,_i.prototype.abort=_i.prototype.abort,_i.notAbortable=Di,_i.completed=Ci,_i.aborted=xi,_i.failed=Ri,Mi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Mi.prototype.stopImmediatePropagation=function(){this.g=!0},Mi.prototype.stopPropagation=function(){},B("shaka.util.FakeEvent",Mi);var Pi={rl:"abrstatuschanged",ul:"adaptation",vl:"audiotrackchanged",wl:"audiotrackschanged",xl:"boundarycrossed",yl:"buffering",zl:"canupdatestarttime",Al:"complete",Bl:"currentitemchanged",Cl:"downloadcompleted",Dl:"downloadfailed",El:"downloadheadersreceived",Fl:"drmsessionupdate",Gl:"emsg",Ml:"itemsinserted",Nl:"itemsremoved",bm:"prft",Error:"error",Hl:"expirationupdated",Il:"firstquartile",Jl:"gapjumped",Ol:"keystatuschanged",Rl:"loaded",Sl:"loading",Ul:"manifestparsed",Vl:"manifestupdated",Wl:"mediaqualitychanged",Xl:"mediasourcerecovered",Yl:"metadataadded",Metadata:"metadata",Zl:"midpoint",$l:"nospatialvideoinfo",am:"onstatechange",dm:"ratechange",hm:"segmentappended",im:"sessiondata",jm:"spatialvideoinfo",lm:"stalldetected",nm:"started",om:"statechanged",pm:"streaming",qm:"textchanged",rm:"texttrackvisibility",sm:"thirdquartile",tm:"timelineregionadded",um:"timelineregionenter",vm:"timelineregionexit",wm:"trackschanged",ym:"unloading",Am:"variantchanged"};function Oi(){this.ab=new ee,this.Fe=this}function Fi(){this.g=[]}function Ui(e,t){e.g.push(t.finally(function(){Q(e.g,t)}))}function zi(e,t,n,r,i,a,s){Oi.call(this),this.i=null,this.j=!1,this.u=new Fi,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=r||null,this.F=i||null,this.H=a||null,this.G=s||null,this.l=new Map}function Bi(e,t,n,r){r=void 0!==r&&r,n=n||Yi;var i=Wi.get(e);(!i||n>=i.priority)&&Wi.set(e,{priority:n,yf:t,Fk:r})}function ji(e,t){for(var n=g(e.g),r=n.next();!r.done;r=n.next())t.g.add(r.value);for(n=(e=g(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function qi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Gi(e,t,n,r,i,a,s,o){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),a>0&&e.H&&e.H(t,r,n.uris[a],n.uris[a-1]);var l=new pe(n.uris[a]),u=l.bc,d=!1;u||(me(l,u=(u=location.protocol).slice(0,-1)),n.uris[a]=l.toString()),u=u.toLowerCase();var c=(u=Wi.get(u))?u.yf:null;if(!c)return Ri(new Ue(2,1,1e3,l));var h=u.Fk;(l=e.l.get(l.Db))&&(n.headers["common-access-token"]=l);var f,g=null,p=null,m=!1,y=!1;return Di(Ai(i)).Xa(function(){if(e.j)return xi();f=Date.now();var i=0;n.requestStartTime=Date.now();var s=c(n.uris[a],n,t,function(a,s,l){g&&g.stop(),p&&p.ia(u/1e3),e.o&&t==$i&&(i++,n.packetNumber=i,e.o(a,s,Hi(r),n,r),d=!0,o.g=l)},function(r){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(r,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!h)return s;var l=n.retryParameters.connectionTimeout;l&&(g=new Tr(function(){m=!0,s.abort()})).ia(l/1e3);var u=n.retryParameters.stallTimeout;return u&&(p=new Tr(function(){m=!0,s.abort()})),s}).Xa(function(r){g&&g.stop(),p&&p.stop(),null==r.timeMs&&(r.timeMs=Date.now()-f);var i=r.headers["common-access-token"];if(i){var a=new pe(r.uri);e.l.set(a.Db,i)}return i={response:r,fk:d},!y&&e.m&&e.m(r.headers,n,t),e.B&&e.B(n,r),i},function(l){if(g&&g.stop(),p&&p.stop(),e.C){var u=null,d=0;l instanceof Ue&&(u=l,1001==l.code&&(d=l.data[1])),e.C(n,u,d,m)}if(e.j)return xi();if(m&&(l=new Ue(1,1,1003,n.uris[a],t)),l instanceof Ue){if(7001==l.code)throw l;if(1010==l.code)throw s;if(1==l.severity){if((u=new Mi("retry",u=(new Map).set("error",l))).cancelable=!0,e.dispatchEvent(u),u.defaultPrevented)throw l;return a=(a+1)%n.uris.length,Gi(e,t,n,r,i,a,l,o)}}throw l})}function Hi(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}function Vi(){this.g=0}function Ki(e,t,n){_i.call(this,e,t),this.h=n}Oi.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Oi.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Oi.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Fe,e.currentTarget=this.Fe;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(r){}if(e.g)break}return e.defaultPrevented},Oi.prototype.release=function(){this.ab=null},Fi.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},h(zi,Oi),(r=zi.prototype).configure=function(e){this.i=e},r.Ik=function(e){this.g.add(e)},r.hl=function(e){this.g.delete(e)},r.oj=function(){this.g.clear()},r.Jk=function(e){this.h.add(e)},r.il=function(e){this.h.delete(e)},r.pj=function(){this.h.clear()},r.Qh=function(){this.l.clear()},r.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Oi.prototype.release.call(this),this.u.destroy()},r.request=function(e,t,n){var r=this,i=new Vi;if(this.j){var a=Promise.reject(new Ue(2,7,7001));return a.catch(function(){}),new Ki(a,function(){return Promise.resolve()},i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ut(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Ut(t.uris),a=function(e,t,n,r){function i(e){a=a.Xa(function(){return n.body&&(n.body=Me(n.body)),e(t,n,r)})}var a=Ci(void 0);e.F&&i(e.F);for(var s=(e=g(e.g)).next();!s.done;s=e.next())i(s.value);return a.Xa(void 0,function(e){if(e instanceof Ue&&7001==e.code)throw e;throw new Ue(2,1,1006,e)})}(this,e,t,n);var s=a.Xa(function(){return Gi(r,e,t,n,new wi(t.retryParameters,!1),0,null,i)}),o=s.Xa(function(t){return function(e,t,n,r){for(var i=Ci(void 0),a=(e=g(e.h)).next(),s={};!a.done;s={Ji:void 0},a=e.next())s.Ji=a.value,i=i.Xa(function(e){return function(){var i=n.response;return i.data&&(i.data=Me(i.data)),(0,e.Ji)(t,i,r)}}(s));return i.Xa(function(){return n},function(e){var t=2;if(e instanceof Ue){if(7001==e.code)throw e;t=e.severity}throw new Ue(t,1,1007,e)})}(r,e,t,n)}),l=Date.now(),u=0;a.promise.then(function(){u=Date.now()-l},function(){});var d=0;s.promise.then(function(){d=Date.now()},function(){});var c=o.Xa(function(i){var a=Date.now()-d,s=i.response;return s.timeMs+=u,s.timeMs+=a,i.fk||!r.o||s.fromCache||"HEAD"==t.method||e!=$i||r.o(s.timeMs,s.data.byteLength,Hi(n),t,n),r.G&&r.G(e,s,n),s},function(e){throw e&&(e.severity=2),e});return a=new Ki(c.promise,function(){return c.abort()},i),Ui(this.u,a),a},B("shaka.net.NetworkingEngine",zi),zi.prototype.request=zi.prototype.request,zi.prototype.destroy=zi.prototype.destroy,zi.makeRequest=qi,zi.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},zi.prototype.clearCommonAccessTokenMap=zi.prototype.Qh,zi.prototype.clearAllResponseFilters=zi.prototype.pj,zi.prototype.unregisterResponseFilter=zi.prototype.il,zi.prototype.registerResponseFilter=zi.prototype.Jk,zi.prototype.clearAllRequestFilters=zi.prototype.oj,zi.prototype.unregisterRequestFilter=zi.prototype.hl,zi.prototype.registerRequestFilter=zi.prototype.Ik,zi.unregisterScheme=function(e){Wi.delete(e)},zi.registerScheme=Bi,zi.prototype.configure=zi.prototype.configure,zi.NumBytesRemainingClass=Vi,h(Ki,_i),zi.PendingRequest=Ki;var $i=1;zi.RequestType={MANIFEST:0,SEGMENT:$i,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},zi.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var Yi=3;zi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Yi};var Wi=new Map;function Xi(e){this.g=!1,this.h=new ki,this.i=e}function Qi(e,t){if(e.g){if(t instanceof Ue&&7003==t.code)throw t;throw new Ue(2,7,7003,t)}}function Ji(e,t){for(var n=[],r=(e=g(e)).next();!r.done;r=e.next())n.push(t(r.value));return n}function Zi(e){for(var t=new Map,n=g(Object.keys(e)),r=n.next();!r.done;r=n.next())r=r.value,t.set(r,e[r]);return t}function ea(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function ta(e,t){this.h=Oe(e),this.i=t==ra,this.g=0}function na(){return new Ue(2,3,3e3)}Xi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(r=ta.prototype).Ia=function(){return this.g<this.h.byteLength},r.Oa=function(){return this.g},r.getLength=function(){return this.h.byteLength},r.Y=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(t){throw na()}},r.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(t){throw na()}},r.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(t){throw na()}},r.Zg=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(t){throw na()}},r.Dd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(n){throw na()}if(t>2097151)throw new Ue(2,3,3001);return this.g+=8,4294967296*t+e},r.Tb=function(e,t){if(this.g+e>this.h.byteLength)throw na();var n=Ne(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},r.skip=function(e){if(this.g+e>this.h.byteLength)throw na();this.g+=e},r.Ki=function(e){if(this.g<e)throw na();this.g-=e},r.seek=function(e){if(e<0||e>this.h.byteLength)throw na();this.g=e},r.Yc=function(){for(var e=this.g;this.Ia()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Ne(this.h,e,this.g-e),this.g+=1,Be(e)},B("shaka.util.DataViewReader",ta),ta.prototype.readTerminatedString=ta.prototype.Yc,ta.prototype.seek=ta.prototype.seek,ta.prototype.rewind=ta.prototype.Ki,ta.prototype.skip=ta.prototype.skip,ta.prototype.readBytes=ta.prototype.Tb,ta.prototype.readUint64=ta.prototype.Dd,ta.prototype.readInt32=ta.prototype.Zg,ta.prototype.readUint32=ta.prototype.U,ta.prototype.readUint16=ta.prototype.Ca,ta.prototype.readUint8=ta.prototype.Y,ta.prototype.getLength=ta.prototype.getLength,ta.prototype.getPosition=ta.prototype.Oa,ta.prototype.hasMoreData=ta.prototype.Ia;var ra=1;function ia(){this.i=new Map,this.h=new Map,this.g=!1}function aa(e){for(var t=ha(e);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function sa(e){for(var t=ha(e),n=e.reader.U(),r=0;r<n&&(e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);r++);}function oa(e){var t=ha(e);for(e.reader.skip(78);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function la(e){var t=ha(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Ia()&&!e.parser.g;)e.parser.zd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ua(e,t){return function(n){e(n.reader.Tb(n.reader.getLength()-n.reader.Oa(),t))}}function da(e){for(var t=0,n=(e=g(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ca(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function ha(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ta.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ra},(r=ia.prototype).box=function(e,t){return e=da(e),this.i.set(e,fa),this.h.set(e,t),this},r.S=function(e,t){return e=da(e),this.i.set(e,ga),this.h.set(e,t),this},r.stop=function(){this.g=!0},r.parse=function(e,t,n){for(e=new ta(e,0),this.g=!1;e.Ia()&&!this.g;)this.zd(0,e,t,n)},r.zd=function(e,t,n,r){var i=t.Oa();if(r&&i+8>t.getLength())this.g=!0;else{var a=t.U(),s=t.U(),o=ca(s),l=!1;switch(a){case 0:a=t.getLength()-i;break;case 1:if(r&&t.Oa()+8>t.getLength())return void(this.g=!0);a=t.Dd(),l=!0}var u=this.h.get(s);if(u){var d=null,c=null;if(this.i.get(s)==ga){if(r&&t.Oa()+4>t.getLength())return void(this.g=!0);d=(c=t.U())>>>24,c&=16777215}s=i+a,n&&s>t.getLength()&&(s=t.getLength()),r&&s>t.getLength()?this.g=!0:(s-=t.Oa(),u({name:o,parser:this,partialOkay:n||!1,stopOnPartial:r||!1,version:d,flags:c,reader:t=new ta(t=s>0?t.Tb(s,!1):new Uint8Array(0),0),size:a,start:i+e,has64BitSize:l}))}else t.skip(Math.min(i+a-t.Oa(),t.getLength()-t.Oa()))}},B("shaka.util.Mp4Parser",ia),ia.headerSize=ha,ia.typeToString=ca,ia.allData=ua,ia.audioSampleEntry=la,ia.visualSampleEntry=oa,ia.sampleDescription=sa,ia.children=aa,ia.prototype.parseNext=ia.prototype.zd,ia.prototype.parse=ia.prototype.parse,ia.prototype.stop=ia.prototype.stop,ia.prototype.fullBox=ia.prototype.S,ia.prototype.box=ia.prototype.box;var fa=0,ga=1;function pa(e){var t=this;this.g=[],this.h=[],this.data=[],(new ia).box("moov",aa).box("moof",aa).S("pssh",function(e){if(!(e.version>1)){var n=Ne(e.reader.h,-12,e.size);if(t.data.push(n),n=e.reader.Tb(16,!1),t.g.push(Ze(n)),e.version>0){n=e.reader.U();for(var r=0;r<n;r++){var i=e.reader.Tb(16,!1);i=Ze(i),t.h.push(i)}}}}).parse(e)}function ma(e,t,n,r){var i=e.length,a=12+t.length+4+i;r>0&&(a+=4+16*n.size);var s=new Uint8Array(a),o=Oe(s),l=0;if(o.setUint32(l,a),l+=4,o.setUint32(l,1886614376),l+=4,r<1?o.setUint32(l,0):o.setUint32(l,16777216),l+=4,s.set(t,l),l+=t.length,r>0)for(o.setUint32(l,n.size),l+=4,n=(t=g(n)).next();!n.done;n=t.next())n=Je(n.value),s.set(n,l),l+=n.length;return o.setUint32(l,i),s.set(e,l+4),s}function ya(e){var t=this;this.F=e,this.j=this.B=null,this.oa=this.T=!1,this.J=0,this.g=null,this.o=new te,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new ki,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.aa=new Map,this.ma=new Map,this.M=new Tr(function(){return function(e){var t=e.aa,n=e.ma;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.u(new Ue(2,6,6014)),e.F.vf(ea(n))}(t)}),this.R=!1,this.N=[],this.$=!1,this.G=new Tr(function(){!function(e){e.i.forEach(function(t,n){var r=t.Ug,i=n.expiration;isNaN(i)&&(i=1/0),i!=r&&(e.F.onExpirationUpdated(n.sessionId,i),t.Ug=i)})}(t)}),this.m.catch(function(){}),this.l=new Xi(function(){return function(e){return L(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,E(t,Da(e),2);case 2:if(!e.j){t.A(3);break}return S(t,4),E(t,e.j.setMediaKeys(null),6);case 6:A(t,5);break;case 4:I(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,T(t)}})}(t)}),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}function va(e,t,n,r){r=void 0===r||r,e.C=new Map;for(var i=(n=g(n)).next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});for(i=(n=g(e.h.persistentSessionsMetadata)).next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.R=e.C.size>0,ba(e,t,r)}function ba(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T;return L(function(S){if(1==S.g){for(Pa(e.h.clearKeys,t),r=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),i=Zi(e.h.servers),a=Zi(e.h.advanced||{}),!r&&n&&function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,i),s=new WeakSet,o=g(t),l=o.next();!l.done;l=o.next())for(u=l.value,d=La(u),c=g(d),h=c.next();!h.done;h=c.next())f=h.value,s.has(f)||(s.add(f),Na(f,i,a,e.h.keySystemsMapping));for(p=function(t,n){for(var r=[],i=(t=g(t)).next();!i.done;i=t.next()){var s,o=(i=i.value)[n]||a.has(i.keySystem)&&a.get(i.keySystem)[n]||"";if((s=""==o)&&(s=!!(s=i.keySystem)&&!!s.match(/^com\.widevine\.alpha/)),s&&("audioRobustness"==n?o=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(o=[e.h.defaultVideoRobustnessForWidevine])),"string"==typeof o)r.push(i);else if(Array.isArray(o))for(0===o.length&&(o=[""]),s=(o=g(o)).next();!s.done;s=o.next()){var l={};r.push(Object.assign({},i,(l[n]=s.value,l)))}}return r},m=new WeakSet,y=g(t),v=y.next();!v.done;v=y.next())(b=v.value).video&&!m.has(b.video)&&(b.video.drmInfos=p(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=p(b.video.drmInfos,"audioRobustness"),m.add(b.video)),b.audio&&!m.has(b.audio)&&(b.audio.drmInfos=p(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=p(b.audio.drmInfos,"audioRobustness"),m.add(b.audio));return E(S,Gr(t,e.R,e.O,e.h.preferredKeySystems),2)}return Qi(e.l),r||i.size>0?(T=Aa(e,t),S.return(r?T:T.catch(function(){}))):(e.T=!0,S.return(Promise.resolve()))})}function Ea(e){var t;return L(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.I){n.A(2);break}return E(n,e.I,3);case 3:return Qi(e.l),n.return();case 2:return S(n,4),e.I=e.j.setMediaKeys(e.B),E(n,e.I,6);case 6:A(n,5);break;case 4:t=I(n),e.u(new Ue(2,6,6003,t.message));case 5:Qi(e.l),T(n)}})}function Ta(e){var t,n,r,i;return L(function(a){if(1==a.g)return e.C.size?(e.C.forEach(function(t,n){_a(e,n,t)}),E(a,e.m,3)):a.A(2);if(2!=a.g){if((e.g&&e.g.keyIds||new Set([])).size>0&&function(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.aa.get(n.value))return!1;return!0}(e))return a.return(e.m);e.K=!1,e.m=new ki,e.m.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=g(t),r=n.next();!r.done;r=n.next())i=r.value,Sa(e,i.initDataType,i.initData);return Ma(e)&&e.m.resolve(),a.return(e.m)})}function Sa(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){for(var r=e.i.values(),i=(r=g(r)).next();!i.done;i=r.next())if(Le(n,i.value.initData))return;var a=!1;if(e.C.forEach(function(e){!a&&Le(n,e.initData)&&(a=!0)}),a)return}e.K=!0,e.i.size>0&&Ma(e)&&(e.m.resolve(),e.K=!1,e.m=new ki,e.m.catch(function(){})),function(e,t,n,r){try{var i=e.B.createSession(r)}catch(a){return void e.u(new Ue(2,6,6005,a.message))}e.o.D(i,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Ra(e,t)}),e.o.D(i,"keystatuseschange",function(t){return xa(e,t)}),e.i.set(i,{initData:n,initDataType:t,loaded:!1,Ug:1/0,Kb:null,type:r});try{n=e.h.initDataTransform(n,t,e.g)}catch(a){return t=a,a instanceof Ue||(t=new Ue(2,6,6016,a)),void e.u(t)}e.h.logLicenseExchange&&Xe(n),i.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;r<0&&(r+=4294967296),r="0x"+r.toString(16)}e.u(new Ue(2,6,6006,t.message,t,r))}})}(e,t,n,e.g.sessionType)}}function wa(e){return e=Ji(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function Aa(t,n){var r,i,a,s,o,l;return L(function(u){switch(u.g){case 1:if(i=function(e,t,n){for(var r=g(t),i=r.next();!i.done;i=r.next())for(var a=(i=g(La(i.value))).next();!a.done;a=i.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);if(1==n.size&&n.has(""))throw new Ue(2,6,6e3);(r=e.h.preferredKeySystems).length||1==(i=Zi(e.h.servers)).size&&(r=Array.from(i.keys()));var s=(i=g(r)).next();for(a={};!s.done;a={Di:void 0},s=i.next()){a.Di=s.value;for(var o=(s=g(t)).next();!o.done;o=s.next())if(o=o.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Di}}(a)))return o.keySystemAccess}for(i=g([!0,!1]),a=i.next();!a.done;a=i.next())for(a=a.value,s=g(t),o=s.next();!o.done;o=s.next())for(var l=(o=g(o.value.decodingInfos)).next();!l.done;l=o.next())if((l=l.value).supported&&l.keySystemAccess){var u=l.keySystemAccess.keySystem;if(!r.includes(u)){var d=n.get(u);for(!d&&e.h.keySystemsMapping[u]&&(d=n.get(e.h.keySystemsMapping[u])),d=(u=g(d)).next();!d.done;d=u.next())if(!!d.value.licenseServerUri==a)return l.keySystemAccess}}return null}(t,n,r=new Map),!i){if(!navigator.requestMediaKeySystemAccess)throw new Ue(2,6,6020);throw new Ue(2,6,6001)}Qi(t.l),S(u,2),i.getConfiguration();var d=a=t.h.keySystemsMapping[i.keySystem]||i.keySystem,c=r.get(a),h=[],f=[],m=[],y=[],v=[],b=new Set,T=new Set;!function(t,n,r,i,a,s,o,l){for(var u=[],d=(t=g(t)).next(),c={};!d.done;c={Ka:void 0},d=t.next()){if(c.Ka=d.value,n.includes(c.Ka.encryptionScheme)||n.push(c.Ka.encryptionScheme),"org.w3.clearkey"==c.Ka.keySystem&&c.Ka.licenseServerUri.startsWith("data:application/json;base64,")?u.includes(c.Ka.licenseServerUri)||u.push(c.Ka.licenseServerUri):r.includes(c.Ka.licenseServerUri)||r.push(c.Ka.licenseServerUri),a.includes(c.Ka.serverCertificateUri)||a.push(c.Ka.serverCertificateUri),c.Ka.serverCertificate&&(i.some(function(e){return function(t){return Le(t,e.Ka.serverCertificate)}}(c))||i.push(c.Ka.serverCertificate)),c.Ka.initData)for(var h=(d=g(c.Ka.initData)).next(),f={};!h.done;f={Lg:void 0},h=d.next())f.Lg=h.value,s.some(function(e){return function(t){var n=e.Lg;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Le(t.initData,n.initData)}}(f))||s.push(f.Lg);if(c.Ka.keyIds)for(h=(d=g(c.Ka.keyIds)).next();!h.done;h=d.next())o.add(h.value);if(c.Ka.keySystemUris&&l)for(d=(c=g(c.Ka.keySystemUris)).next();!d.done;d=c.next())l.add(d.value)}if(1==u.length)r.push(u[0]);else if(u.length>0){for(n=[],i=(u=g(u)).next();!i.done;i=u.next())i=e.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),n.push.apply(n,p(i.keys));u=JSON.stringify({keys:n}),r.push("data:application/json;base64,"+e.btoa(u))}}(c,h,f,y,m,v,b,T);var w=t.R?"persistent-license":"temporary";for(d={keySystem:d,encryptionScheme:h[0],licenseServerUri:f[0],distinctiveIdentifierRequired:c[0].distinctiveIdentifierRequired,persistentStateRequired:c[0].persistentStateRequired,sessionType:c[0].sessionType||w,audioRobustness:c[0].audioRobustness||"",videoRobustness:c[0].videoRobustness||"",serverCertificate:y[0],serverCertificateUri:m[0],initData:v,keyIds:b},T.size>0&&(d.keySystemUris=T),T=(c=g(c)).next();!T.done;T=c.next())(T=T.value).distinctiveIdentifierRequired&&(d.distinctiveIdentifierRequired=T.distinctiveIdentifierRequired),T.persistentStateRequired&&(d.persistentStateRequired=T.persistentStateRequired);if(t.g=d,!t.g.licenseServerUri)throw new Ue(2,6,6012,t.g.keySystem);return E(u,i.createMediaKeys(),4);case 4:if(s=u.h,Qi(t.l),t.B=s,""==t.h.minHdcpVersion||!("getStatusForPolicy"in t.B)){u.A(5);break}return S(u,6),E(u,t.B.getStatusForPolicy({minHdcpVersion:t.h.minHdcpVersion}),8);case 8:if("usable"!=u.h)throw new Ue(2,6,6018);Qi(t.l),A(u,5,2);break;case 6:if((o=I(u,2))instanceof Ue)throw o;throw new Ue(2,6,6019,o.message);case 5:return t.T=!0,t.G.Ea(t.h.updateExpirationTime),E(u,function(e){var t,n;return L(function(r){switch(r.g){case 1:if(!e.B||!e.g)return r.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){r.A(2);break}return t=qi([e.g.serverCertificateUri],e.h.retryParameters),S(r,3),E(r,e.F.tc.request(5,t,{isPreload:e.V()}).promise,5);case 5:n=r.h,e.g.serverCertificate=Ne(n.data),A(r,4);break;case 3:throw new Ue(2,6,6017,I(r));case 4:if(e.l.g)return r.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(S(r,6),E(r,e.B.setServerCertificate(e.g.serverCertificate),8)):r.return();case 8:A(r,0);break;case 6:throw new Ue(2,6,6004,I(r).message)}})}(t),9);case 9:Qi(t.l),A(u,0);break;case 2:if(l=I(u),Qi(t.l,l),t.g=null,l instanceof Ue)throw l;throw new Ue(2,6,6002,l.message)}})}function Ia(e){Ma(e)&&e.m.resolve()}function ka(e,t){new Tr(function(){t.loaded=!0,Ia(e)}).ia(Fa)}function _a(e,t,n){var r,i,a,s,o,l,u;return L(function(d){switch(d.g){case 1:try{r=e.B.createSession("persistent-license")}catch(c){return i=new Ue(2,6,6005,c.message),e.u(i),d.return(Promise.reject(i))}return e.o.D(r,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.$?e.N.push(t):Ra(e,t)}),e.o.D(r,"keystatuseschange",function(t){return xa(e,t)}),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Ug:1/0,Kb:null,type:"persistent-license"},e.i.set(r,a),S(d,2),E(d,r.load(t),4);case 4:return s=d.h,Qi(e.l),s||(e.i.delete(r),o=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Ue(o,6,6013)),a.loaded=!0),ka(e,a),Ia(e),d.return(r);case 2:l=I(d),Qi(e.l,l),e.i.delete(r),u=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Ue(u,6,6005,l.message)),a.loaded=!0,Ia(e);case 3:return d.return(Promise.resolve())}})}function Ra(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v;L(function(b){switch(b.g){case 1:if(n=t.target,e.h.logLicenseExchange&&Xe(t.message),r=e.i.get(n),i=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(i=a.individualizationServer),(s=qi([i],e.h.retryParameters)).body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,r&&(s.initData=r.initData,s.initDataType=r.initDataType),a&&a.headers)for(o in a.headers)s.headers[o]=a.headers[o];if("org.w3.clearkey"===e.g.keySystem){var w=s,k=e.g;try{var _=qe(w.body);if(_){var R=JSON.parse(_);R.type||(R.type=k.sessionType,w.body=Ge(JSON.stringify(R)))}}catch(x){}}if(vi(e.g.keySystem))if((w=je(s.body,!0,!0)).includes("PlayReadyKeyMessage")){for(_=(k=g(k=Wt(w=qt(w,"PlayReadyKeyMessage"),"HttpHeader"))).next();!_.done;_=k.next())_=Wt(R=_.value,"name")[0],R=Wt(R,"value")[0],s.headers[$t(_)]=$t(R);w=Wt(w,"Challenge")[0],s.body=Qe($t(w))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return l=Date.now(),S(b,2),d=e.F.tc.request(2,s,{isPreload:e.V()}),e.X.push(d),E(b,d.promise,4);case 4:u=b.h,Q(e.X,d),A(b,3);break;case 2:return c=I(b),e.l.g||(h={sessionId:n.sessionId,sessionType:r.type,initData:r.initData,initDataType:r.initDataType},f=new Ue(2,6,6007,c,h),1==e.i.size?(e.u(f),r&&r.Kb&&r.Kb.reject(f)):(r&&r.Kb&&r.Kb.reject(f),e.i.delete(n),Ma(e)&&(e.m.resolve(),e.M.ia(.1)))),b.return();case 3:return e.l.g?b.return():(e.J+=(Date.now()-l)/1e3,e.h.logLicenseExchange&&Xe(u.data),S(b,5),E(b,n.update(u.data),7));case 7:A(b,6);break;case 5:return m=(p=I(b))&&p.message||String(p),y=new Ue(2,6,6008,m),e.u(y),r&&r.Kb&&r.Kb.reject(y),b.return();case 6:if(e.l.g)return b.return();v=new Mi("drmsessionupdate"),e.F.onEvent(v),r&&(r.Kb&&r.Kb.resolve(),ka(e,r)),T(b)}})}function xa(e,t){t=t.target;var n=e.i.get(t),r=!1;t.keyStatuses.forEach(function(t,i){if("string"==typeof i){var a=i;i=t,t=a}if(a=ae(),vi(e.g.keySystem)&&16==i.byteLength&&a.gh()){var s=(a=Oe(i)).getUint32(0,!0),o=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,s,!1),a.setUint16(4,o,!1),a.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(r=!0),i=Ze(i).slice(0,32),e.aa.set(i,t)});var i=t.expiration-Date.now();(i<0||r&&i<1e3)&&n&&!n.Kb&&(e.i.delete(t),Ca(t)),Ma(e)&&(e.m.resolve(),e.M.ia(Ua))}function Ca(e){return L(function(t){return 1==t.g?(S(t,2),E(t,Ir(Oa,Promise.all([e.close().catch(function(){}),e.closed])),4)):2!=t.g?A(t,0):(I(t),void T(t))})}function Da(e){var t;return L(function(n){return t=Array.from(e.i.entries()),e.i.clear(),E(n,Promise.all(t.map(function(t){var n=(t=g(t)).next().value,r=t.next().value;return L(function(t){return 1==t.g?(S(t,2),e.oa||e.C.has(n.sessionId)||"persistent-license"!==r.type||e.h.persistentSessionOnlinePlayback?E(t,Ca(n),5):E(t,n.remove(),5)):2!=t.g?A(t,0):(I(t),void T(t))})})),0)})}function La(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Ma(e){return function(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function Na(t,n,r,i){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&n.get(a)&&(n=n.get(a),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(r=r.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=r.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=r.persistentStateRequired),t.serverCertificate||(t.serverCertificate=r.serverCertificate),r.sessionType&&(t.sessionType=r.sessionType),t.serverCertificateUri||(t.serverCertificateUri=r.serverCertificateUri)),i[a]&&(t.keySystem=i[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}function Pa(e,t){if(0!=(e=Zi(e)).size){e=rt(e);for(var n=(t=g(t)).next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}(r=ya.prototype).destroy=function(){return this.l.destroy()},r.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.T&&this.g&&this.G.Ea(this.h.updateExpirationTime)},r.fc=function(e){var t,n,r=this;return L(function(i){if(1==i.g)return r.j===e?i.return():r.B?(r.j=e,r.h.delayLicenseRequestUntilPlayed&&r.o.Ba(r.j,"play",function(){for(var e=g(r.N),t=e.next();!t.done;t=e.next())Ra(r,t.value);r.$=!0,r.N=[]}),r.j.remote?(r.o.D(r.j.remote,"connect",function(){return Da(r)}),r.o.D(r.j.remote,"connecting",function(){return Da(r)}),r.o.D(r.j.remote,"disconnect",function(){return Da(r)})):"webkitCurrentPlaybackTargetIsWireless"in r.j&&r.o.D(r.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Da(r)}),r.H=r.g&&r.g.initData.find(function(e){return e.initData.length>0})||null,t=r.g.keySystem,(n=ae().Rg(t))||!r.H&&"com.apple.fps"===r.g.keySystem&&!r.C.size?i.A(2):E(i,Ea(r),2)):(r.o.Ba(e,"encrypted",function(){r.u(new Ue(2,6,6010))}),i.return());Ta(r).catch(function(){}),!n&&(r.H||r.C.size||r.h.parseInbandPsshEnabled)||r.o.D(r.j,"encrypted",function(e){return function(e,t){return L(function(n){if(1==n.g)return E(n,Ea(e),2);Sa(e,t.initDataType,Ne(t.initData)),T(n)})}(r,e)}),T(i)})},r.Gg=function(){var e=this,t=this.i.keys();return t=Ji(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},r.Wd=function(){for(var e=1/0,t=this.i.keys(),n=(t=g(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},r.Xe=function(){return ea(this.ma)};var Oa=1,Fa=5,Ua=.5;function za(){this.g=qa,this.i=(new Map).set(qa,2).set(ja,1),this.h=0}function Ba(e,t){var n=e.g!==t;return e.g=t,n&&t===qa&&(e.h=Date.now()),n}var ja=0,qa=1;
/*
         @license
         Shaka Player
         Copyright 2023 Google LLC
         SPDX-License-Identifier: Apache-2.0
        */function Ga(e,t,n){this.g=e,this.i=t,this.h=n}function Ha(e,t){return L(function(n){if(1==n.g)return E(n,zr(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Fr(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(Zr))throw new Ue(2,4,4032);return n.return(Ka(e,t))})}function Va(e,t){var n=e.g.restrictions;e=e.i;for(var r=!1,i=(t=g(t.variants)).next();!i.done;i=t.next()){var a=(i=i.value).allowedByApplication;i.allowedByApplication=Ur(i,n,e),a!=i.allowedByApplication&&(r=!0)}return r}function Ka(e,t){var n=Va(e,t);if(t){var r=e.h?e.h.g:null;if(r&&e.h.B){for(var i=new Set,a=g(t.variants),s=a.next();!s.done;s=a.next())(s=s.value).audio&&i.add(s.audio),s.video&&i.add(s.video);for(a=(i=g(i)).next();!a.done;a=i.next())$a(e,r.keySystem,a.value)}Ya(e,t)}return n}function $a(e,t,n){for(var r=(n=g(n.drmInfos)).next();!r.done;r=n.next())if((r=r.value).keySystem==t)for(var i=(r=g(r.initData||[])).next();!i.done;i=r.next())i=i.value,Sa(e.h,i.initDataType,i.initData)}function Ya(e,t){e=e.h?e.h.Xe():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var r=!1,i=!1,a=new Set,s=new Set,o=new Set,l=(t=g(t.variants)).next();!l.done;l=t.next())(l=l.value).audio&&o.add(l.audio),l.video&&o.add(l.video),l.allowedByApplication?l.allowedByKeySystem&&(r=!0):i=!0;for(t=(o=g(o)).next();!t.done;t=o.next())if((t=t.value).keyIds.size)for(l=(t=g(t.keyIds)).next();!l.done;l=t.next()){l=l.value;var u=e[n?"00":l];u?Wa.includes(u)&&s.add(u):a.add(l)}if(!r)throw new Ue(2,4,4012,e={hasAppRestrictions:i,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(s)})}var Wa=["output-restricted","internal-error"];function Xa(){}function Qa(e,t){Za.set(e,t)}function Ja(e,t){if(t){var n=Za.get(t.toLowerCase());if(n)return n}throw new Ue(2,4,4e3,e,t)}B("shaka.media.ManifestParser",Xa),Xa.unregisterParserByMime=function(e){Za.delete(e)},Xa.registerParserByMime=Qa,Xa.registerParserByExtension=function(){de("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Xa.AccessibilityPurpose={zm:"visually impaired",Kl:"hard of hearing",gm:"spoken subtitles"};var Za=new Map;function es(e,t){var n=null,r=null,i=null,a=null,s=e.U();return 1&t&&(i=e.Dd()),2&t&&(a=e.U()),8&t&&(n=e.U()),16&t&&(r=e.U()),{trackId:s,Td:n,Ud:r,kj:i,Li:a}}function ts(e,t){return 1==t?{baseMediaDecodeTime:4294967296*(t=e.U())+(e=e.U())}:{baseMediaDecodeTime:e.U()}}function ns(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function rs(e,t,n){var r=e.U(),i=[],a=null;1&n&&(a=e.Zg()),4&n&&e.skip(4);for(var s=0;s<r;s++){var o={ih:null,sampleSize:null,Cf:null};256&n&&(o.ih=e.U()),512&n&&(o.sampleSize=e.U()),1024&n&&e.skip(4),2048&n&&(o.Cf=0==t?e.U():e.Zg()),i.push(o)}return{Fm:r,hh:i,mg:a}}function is(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.Ca()+e.Ca()/65536}}function as(e){return{codec:ca(e=e.U())}}function ss(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function os(e){return(e<10?"0":"")+e}function ls(e){this.g=e}function us(e){for(var t=[],n=g(e.g),r=n.next();!r.done;r=n.next()){var i=t,a=i.push,s=r.value;r=bs;var o=s.id+1,l=s.stream.width||0,u=s.stream.height||0;"audio"==s.type&&(u=l=0);var d=s.duration*s.timescale,c=Math.floor(d/(Es+1));switch(d=Math.floor(d%(Es+1)),o=bs("tkhd",o=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(ms(o,4)),[0,0,0,0],p(ms(c,4)),p(ms(d,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],p(ms(l,2)),[0,0],p(ms(u,2)),[0,0]))),l=bs,c=s.duration*s.timescale,u=Math.floor(c/(Es+1)),c=Math.floor(c%(Es+1)),d=(d=s.stream.language).charCodeAt(0)-96<<10|d.charCodeAt(1)-96<<5|d.charCodeAt(2)-96,u=bs("mdhd",u=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(ms(s.timescale,4)),p(ms(u,4)),p(ms(c,4)),p(ms(d,2)),[0,0]))),c=s,d=new Uint8Array([]),c.type){case"video":d=Ss.value();break;case"audio":d=ws.value()}c=bs("hdlr",d);e:{switch(s.type){case"video":s=bs("minf",bs("vmhd",Rs.value()),Ls.value(),ds(s));break e;case"audio":s=bs("minf",bs("smhd",xs.value()),Ls.value(),ds(s));break e}s=new Uint8Array([])}r=r("trak",o,s=l("mdia",u,c,s)),a.call(i,r)}for(t=et.apply(Ye,p(t)),n=bs,r=(a=e.g[0]).duration*a.timescale,i=Math.floor(r/(Es+1)),r=Math.floor(r%(Es+1)),i=bs("mvhd",i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(p(ms(a.timescale,4)),p(ms(i,4)),p(ms(r,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),r=[],l=(e=g(e.g)).next();!l.done;l=e.next())o=(s=r).push,l=bs("trex",l=new Uint8Array([0,0,0,0].concat(p(ms(l.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),o.call(s,l);if(e=bs("mvex",e=et.apply(Ye,p(r))),r=[],a.encrypted){for(s=(a=g(a.stream.drmInfos)).next();!s.done;s=a.next())if((s=s.value).initData)for(o=(s=g(s.initData)).next();!o.done;o=s.next())r.push(o.value.initData);a=et.apply(Ye,p(r))}else a=new Uint8Array([]);return e=n("moov",i,t,e,a),t=Ds.value(),(n=new Uint8Array(t.byteLength+e.byteLength)).set(t),n.set(e,t.byteLength),n}function ds(e){var t=bs,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=ae().oe()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var r=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,r=e.stream.height||0,e.Ra.byteLength>0)var i=bs("avcC",e.Ra);else{i=bs;for(var a=7,s=[],o=[],l=0,u=0,d=0,c=0;c<e.Bb.length;c++){var h=ys(e.Bb[c]);switch(31&h[0]){case 7:s.push(h),a+=h.length+2;break;case 8:o.push(h),a+=h.length+2}}for(s.length>0&&(l=s[0][1],d=s[0][2],u=s[0][3]),c=0,(a=new Uint8Array(a))[c++]=1,a[c++]=l,a[c++]=d,a[c++]=u,a[c++]=255,a[c++]=224|s.length,l=0;l<s.length;l++)a[c++]=(65280&s[l].length)>>8,a[c++]=255&s[l].length,a.set(s[l],c),c+=s[l].length;for(a[c++]=o.length,s=0;s<o.length;s++)a[c++]=(65280&o[s].length)>>8,a[c++]=255&o[s].length,a.set(o[s],c),c+=o[s].length;i=i("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(ms(n,2)),p(ms(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="avc1",o=cs(e),s=new Uint8Array([]),e.encrypted&&(s=fs(e.stream,e.codecs),r="encv"),r=bs(r,n,i,o,s)}else e.codecs.includes("hvc1")&&(r=e.stream.width||0,i=e.stream.height||0,n=new Uint8Array([]),e.Ra.byteLength>0&&(n=bs("hvcC",e.Ra)),r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(p(ms(r,2)),p(ms(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="hvc1",o=cs(e),s=new Uint8Array([]),e.encrypted&&(s=fs(e.stream,e.codecs),i="encv"),r=bs(i,r,n,o,s));break;case"audio":"mp3"==n?e=bs(".mp3",hs(e)):"ac-3"==n?(n=bs("dac3",e.Ga),r="ac-3",i=new Uint8Array([]),e.encrypted&&(i=fs(e.stream,e.codecs),r="enca"),e=bs(r,hs(e),n,i)):"ec-3"==n?(n=bs("dec3",e.Ga),r="ec-3",i=new Uint8Array([]),e.encrypted&&(i=fs(e.stream,e.codecs),r="enca"),e=bs(r,hs(e),n,i)):"opus"==n?(n=bs("dOps",e.Ga),r="Opus",i=new Uint8Array([]),e.encrypted&&(i=fs(e.stream,e.codecs),r="enca"),e=bs(r,hs(e),n,i)):(e.Ga.byteLength>0?n=bs("esds",e.Ga):(n=bs,r=e.id+1,i=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,l=it("audio",e.codecs.split(",")),o=(u={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[s],"mp4a.40.5"!==l&&"mp4a.40.29"!==l||(o=u[2*s]),s=parseInt(l.split(".").pop(),10),n=n("esds",r=new Uint8Array([0,0,0,0,3,25].concat(p(ms(r,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|o>>>1,o<<7|i<<3,6,1,2])))),r="mp4a",i=new Uint8Array([]),e.encrypted&&(i=fs(e.stream,e.codecs),r="enca"),e=bs(r,hs(e),n,i)),r=e}return t("stbl",e=bs("stsd",Cs.value(),r),bs("stts",As.value()),bs("stsc",Is.value()),bs("stsz",_s.value()),bs("stco",ks.value()))}function cs(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return bs("pasp",e=new Uint8Array([].concat(p(ms(e.Za,4)),p(ms(t,4)))))}function hs(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(p(ms(e.stream.audioSamplingRate||44100,2)),[0,0]))}function fs(e,t){var n=bs;t=bs("frma",t=new Uint8Array([].concat(p(ms(vs(t.split(".")[0]),4)))));var r="cenc",i=e.drmInfos[0];i&&i.encryptionScheme&&(r=i.encryptionScheme),r=bs("schm",r=new Uint8Array([0,0,0,0].concat(p(ms(vs(r),4)),[0,1,0,0]))),i=bs;for(var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=(e=g(e.drmInfos)).next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size)for(var o=(s=g(s.keyIds)).next();!o.done;o=s.next())a=ys(o.value);return n("sinf",t,r,i("schi",a=bs("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),a)))}function gs(e){for(var t=[],n=(e=g(e.g)).next();!n.done;n=e.next()){n=n.value;var r,i=t.push,a=i.apply,s=bs,o=new Uint8Array([0,0,0,0].concat(p(ms(n.data?n.data.sequenceNumber:0,4))));o=bs("mfhd",o);var l=n.data?n.data.zb:[],u=new Uint8Array(4+l.length);for(r=0;r<l.length;r++){var d=l[r].flags;u[r+4]=d.hb<<4|d.mb<<2|d.jb}var c=(l=bs("sdtp",u)).length+32+20+8+16+8+8;u=bs,r=bs("tfhd",r=new Uint8Array([0,0,0,58].concat(p(ms(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),d=n.data?n.data.baseMediaDecodeTime:0;var h=Math.floor(d%(Es+1));d=bs("tfdt",d=new Uint8Array([1,0,0,0].concat(p(ms(Math.floor(d/(Es+1)),4)),p(ms(h,4)))));var f=c,m=12+16*(h=(c=n.data?n.data.zb:[]).length),y=new Uint8Array(m);for(f+=8+m,y.set(["video"===n.type?1:0,0,15,1].concat(p(ms(h,4)),p(ms(f,4))),0),f=0;f<h;f++){var v=c[f];m=ms(v.duration,4);var b=ms(v.size,4),E=v.flags;v=ms(v.sb,4),y.set([].concat(p(m),p(b),[E.xb<<2|E.hb,E.mb<<6|E.jb<<4|E.yb,61440&E.gb,15&E.gb],p(v)),12+16*f)}s=s("moof",o,l=u("traf",r,d,c=bs("trun",y),l)),a.call(i,t,[s,ps(n)])}return et.apply(Ye,p(t))}function ps(e){return e=(e.data?e.data.zb:[]).map(function(e){return e.data}),bs("mdat",e=et.apply(Ye,p(e)))}function ms(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function ys(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function vs(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function bs(e){var t=M.apply(1,arguments),n=Ts.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Ts.set(e,n));for(var r=8,i=t.length-1;i>=0;i--)r+=t[i].byteLength;for((i=new Uint8Array(r))[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=255&r,i.set(n,4),n=0,r=8;n<t.length;n++)i.set(t[n],r),r+=t[n].byteLength;return i}B("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});var Es=4294967295,Ts=new Map,Ss=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),ws=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),As=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Is=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),ks=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),_s=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),Rs=new ie(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),xs=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Cs=new ie(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),Ds=new ie(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]);return bs("ftyp",e,new Uint8Array([0,0,0,1]),e,t)}),Ls=new ie(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=bs("dref",e),bs("dinf",e)});function Ms(e){function t(e){s.push(e),aa(e)}var n,r,i,a,s=[];if((new ia).box("moof",t).box("traf",t).S("tfhd",function(e){n=e,i=es(e.reader,e.flags)}).S("trun",function(e){r=e,a=rs(e.reader,e.version,e.flags)}).parse(e),i&&2!==i.Li){var o=n.start+ha(n)+4+(null!==i.kj?8:0),l=Oe(e);if(null!==i.Li)l.setUint32(o,2);else{Ps(e,n.start,n.size+4);var u=l.getUint32(n.start+8);l.setUint32(n.start+8,2|u),a&&null!==a.mg&&l.setInt32(r.start+ha(r)+4,a.mg+4),u=e.subarray(0,o),l=e.subarray(o),(e=new Uint8Array(e.byteLength+4)).set(u),u=[];for(var d=3;d>=0;d--)u.push(2>>8*d&255);for(e.set(new Uint8Array(u),o),e.set(l,o+4),l=(o=g(s)).next();!l.done;l=o.next())Ps(e,(l=l.value).start,l.size+4)}}return e}function Ns(e,t,n,r,i,a){var s=fs(e,r.name),o=t.subarray(r.start,r.start+r.size);for((e=new Uint8Array(r.size+s.byteLength)).set(o,0),Oe(e).setUint32(4,a),e.set(s,r.size),Ps(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),r=ae().df()?r.start:r.start+r.size,s=t.subarray(r),a.set(t.subarray(0,r)),a.set(e,r),a.set(s,r+e.byteLength),i=(t=g(i)).next();!i.done;i=t.next())Ps(a,(i=i.value).start,i.size+e.byteLength);return e=Oe(a,n.start),n=ha(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function Ps(e,t,n){0!=(t=(e=Oe(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function Os(e,t,n,r,i,a,s,o){this.P=e,this.startByte=t,this.endByte=n,this.xd=void 0===r?null:r,this.timescale=void 0===i?null:i,this.h=void 0===a?null:a,this.aesKey=void 0===s?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==o&&o}function Fs(e,t){return e===t||(e&&t?e.Ic()==t.Ic()&&e.Gc()==t.Gc()&&Z(e.P().sort(),t.P().sort())&&Le(e.Yb(),t.Yb()):e==t)}function Us(e,t,n,r,i,a,s,o,l,u,d,c,h,f,p,m){for(u=void 0===u?[]:u,f=void 0===f?js:f,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=r,this.endByte=i,this.ba=a,this.timestampOffset=s,this.appendWindowStart=o,this.appendWindowEnd=l,this.g=u,this.tilesLayout=void 0===d?"":d,this.B=void 0===c?null:c,this.h=void 0===h?null:h,this.status=f,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=void 0===p?null:p,this.thumbnailSprite=null,this.i=-1,this.m=void 0!==m&&m,this.ee=this.Xc=!1,t=(e=g(this.g)).next();!t.done;t=e.next())t.value.ri();this.m&&this.g.length&&this.g[this.g.length-1].pi(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}function zs(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=(e=g(e.g)).next();!e.done;e=e.next()){zs(e.value);break}return null}function Bs(e,t){e.ba=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())Bs(n.value,t)}Os.prototype.Ic=function(){return this.startByte},Os.prototype.Gc=function(){return this.endByte},Os.prototype.pe=function(e){this.h=e},Os.prototype.Yb=function(){return this.h},B("shaka.media.InitSegmentReference",Os),Os.prototype.getEndByte=Os.prototype.Gc,Os.prototype.getStartByte=Os.prototype.Ic,(r=Us.prototype).P=function(){return this.C()},r.getStartTime=function(){return this.startTime},r.Ej=function(){return this.endTime},r.Ic=function(){return this.startByte},r.Gc=function(){return this.endByte},r.$j=function(){return this.tilesLayout},r.Zj=function(){return this.B},r.Jc=function(){return this.status},r.xk=function(){this.status=qs},r.Qg=function(){this.preload=!0},r.isPreload=function(){return this.preload},r.wd=function(){this.l=!1},r.kk=function(){return this.l},r.ri=function(){this.Xc=!0},r.nk=function(){return this.Xc},r.pi=function(){this.ee=!0},r.lk=function(){return this.ee},r.oi=function(){this.o=!0},r.gk=function(){return this.o},r.If=function(e){this.thumbnailSprite=e},r.Xj=function(){return this.thumbnailSprite},r.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},r.yh=function(e){null==this.h?V("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},r.pe=function(e,t){this.u=e,this.F=void 0!==t&&t},r.Yb=function(e){var t=this.u;return(void 0===e||e)&&this.F&&(this.u=null),t},B("shaka.media.SegmentReference",Us),Us.prototype.getSegmentData=Us.prototype.Yb,Us.prototype.setSegmentData=Us.prototype.pe,Us.prototype.syncAgainst=Us.prototype.yh,Us.prototype.offset=Us.prototype.offset,Us.prototype.getThumbnailSprite=Us.prototype.Xj,Us.prototype.setThumbnailSprite=Us.prototype.If,Us.prototype.hasByterangeOptimization=Us.prototype.gk,Us.prototype.markAsByterangeOptimization=Us.prototype.oi,Us.prototype.isLastPartial=Us.prototype.lk,Us.prototype.markAsLastPartial=Us.prototype.pi,Us.prototype.isPartial=Us.prototype.nk,Us.prototype.markAsPartial=Us.prototype.ri,Us.prototype.isIndependent=Us.prototype.kk,Us.prototype.markAsNonIndependent=Us.prototype.wd,Us.prototype.isPreload=Us.prototype.isPreload,Us.prototype.markAsPreload=Us.prototype.Qg,Us.prototype.markAsUnavailable=Us.prototype.xk,Us.prototype.getStatus=Us.prototype.Jc,Us.prototype.getTileDuration=Us.prototype.Zj,Us.prototype.getTilesLayout=Us.prototype.$j,Us.prototype.getEndByte=Us.prototype.Gc,Us.prototype.getStartByte=Us.prototype.Ic,Us.prototype.getEndTime=Us.prototype.Ej,Us.prototype.getStartTime=Us.prototype.getStartTime,Us.prototype.getUris=Us.prototype.P;var js=0,qs=1;function Gs(e){return 1==e.length&&e.end(0)-e.start(0)<1e-4}function Hs(e){return!e||Gs(e)?null:1==e.length&&e.start(0)<0?0:e.length?e.start(0):null}function Vs(e){return!e||Gs(e)?null:e.length?e.end(e.length-1):null}function Ks(e,t){return!(!e||!e.length||Gs(e)||t>e.end(e.length-1))&&t>=e.start(0)}function $s(e,t){if(!e||!e.length||Gs(e))return 0;for(var n=0,r=(e=g(Ys(e))).next();!r.done;r=e.next()){var i=r.value;r=i.start,(i=i.end)>t&&(n+=i-Math.max(r,t))}return n}function Ys(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Ws(){}function Xs(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function Qs(e){for(var t=!1,n=e.getElementsByTagName("source"),r=n.length-1;r>=0;--r)e.removeChild(n[r]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function Js(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Zs(){return to||(eo||(eo=new Tr(function(){to=null})),(to=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(to=document.createElement("video")),eo.ia(1),to)}Us.Status={ql:js,xm:qs,Tl:2},B("shaka.util.Dom",Ws),Ws.removeAllChildren=Js,Ws.clearSourceFromVideo=Qs;var eo=null,to=null;
/*
         @license
         Shaka Player
         Copyright 2022 Google LLC
         SPDX-License-Identifier: Apache-2.0
        */function no(){}function ro(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function io(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function ao(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function so(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(e.size<2||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var r=Be(Ne(e.data,1,n)),i=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return null;var s,o=Be(Ne(e.data,3+n,a));return s="--\x3e"===r?Be(Ne(e.data,4+n+a)):Me(e.data.subarray(4+n+a)),t.mimeType=r,t.pictureType=i,t.description=o,t.data=s,t}return"TXXX"===e.type||"WXXX"===e.type?e.size<2||3!==e.data[0]||-1===(r=e.data.subarray(1).indexOf(0))?null:(n=Be(Ne(e.data,1,r)),e=Be(Ne(e.data,2+r)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?e.size<2||-1===(n=e.data.indexOf(0))?null:(n=Be(Ne(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Me(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?e.size<2||3!==e.data[0]?null:(e=Be(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Be(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Me(e.data),t):null}function oo(e){for(var t=0,n=[];ro(e,t);){var r=ao(e,t+6);for(e[t+5]>>6&1&&(t+=10),r=(t+=10)+r;t+10<r;){var i=e.subarray(t),a=ao(i,4);(a=so(i={type:String.fromCharCode(i[0],i[1],i[2],i[3]),size:a,data:i.subarray(10,10+a)}))&&n.push(a),t+=i.size+10}io(e,t)&&(t+=10)}return n}function lo(e,t){for(var n=t=void 0===t?0:t,r=0;ro(e,t);)e[t+5]>>6&1&&(r+=10),r+=10,r+=ao(e,t+6),io(e,t+10)&&(r+=10),t+=r;return r>0?e.subarray(n,n+r):new Uint8Array([])}function uo(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function co(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,r=0;r<e.byteLength;r++)r>=2&&3==e[r]&&0==e[r-1]&&0==e[r-2]||(t[n]=e[r],n++);this.j=Ne(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function ho(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),r=Math.min(4,e.i);0!==r&&(n.set(e.j.subarray(t,t+r)),e.h=new ta(n,0).U(),e.g=8*r,e.i-=r)}function fo(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,ho(e)}e.h<<=t,e.g-=t}function go(e,t){var n=Math.min(e.g,t),r=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&ho(e),(n=t-n)>0?r<<n|go(e,n):r}function po(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return ho(e),t+po(e)}function mo(e){fo(e,1+po(e))}function yo(e){return go(e,po(e)+1)-1}function vo(e){return 1&(e=yo(e))?1+e>>>1:-1*(e>>>1)}function bo(e){return 1===go(e,1)}function Eo(e){return go(e,8)}function To(e,t){for(var n=8,r=8,i=0;i<t;i++)0!==r&&(r=(n+(r=vo(e))+256)%256),n=0===r?n:r}function So(e){return Eo(e),yo(e),yo(e)}function wo(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}function Ao(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var r=t[7];if(192&r){var i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=i),n.pts=ko(i,e.u),e.u=n.pts,n.dts=n.pts,64&r&&(r=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.o&&(e.o=r),n.dts=n.pts!=i?ko(r,e.o):r),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Io(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(Math.abs(1/(t-e)*9e4)):null}function ko(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e}function _o(e){return!(Ro(e)<0)}function Ro(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}B("shaka.util.Id3Utils",no),no.getID3Data=lo,no.getID3Frames=oo,B("shaka.util.ExpGolomb",co),(r=wo.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},r.Gf=function(e){null!=this.B&&this.B!=e&&(this.o=this.u=null),this.B=e},r.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Ro(e)),n=e.length-(e.length+t)%188,r=!1,i=t;i<n;i+=188)if(71==e[i]){var a=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2];if((48&e[i+3])>>4>1){var o=i+5+e[i+4];if(o==i+188)continue}else o=i+4;switch(s){case 0:a&&(o+=e[o]+1),this.I=(31&e[o+10])<<8|e[o+11];break;case 17:case 8191:break;case this.I:a&&(o+=e[o]+1),s={audio:-1,video:-1,bf:-1,audioCodec:"",videoCodec:""};var l=o+3+((15&(a=e)[o+1])<<8|a[o+2])-4;for(o+=12+((15&a[o+10])<<8|a[o+11]);o<l;){var u=(31&a[o+1])<<8|a[o+2],d=(15&a[o+3])<<8|a[o+4];switch(a[o]){case 6:if(d>0)for(var c=o+5,h=d;h>2;){var f=a[c+1]+2;switch(a[c]){case 5:var g=Ve(a.subarray(c+2,c+f));-1==s.audio&&"Opus"===g?(s.audio=u,s.audioCodec="opus"):-1==s.video&&"AV01"===g&&(s.video=u,s.videoCodec="av1");break;case 106:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 122:-1==s.audio&&(s.audio=u,s.audioCodec="ec3");break;case 124:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 127:"opus"==s.audioCodec&&(g=null,128===a[c+2]&&(g=a[c+3]),null!=g&&(this.H={channelCount:15&g?15&g:2,nj:g,sampleRate:48e3}))}c+=f,h-=f}break;case 15:-1==s.audio&&(s.audio=u,s.audioCodec="aac");break;case 17:-1==s.audio&&(s.audio=u,s.audioCodec="aac-loas");break;case 21:-1==s.bf&&(s.bf=u);break;case 27:-1==s.video&&(s.video=u,s.videoCodec="avc");break;case 3:case 4:-1==s.audio&&(s.audio=u,s.audioCodec="mp3");break;case 36:-1==s.video&&(s.video=u,s.videoCodec="hvc");break;case 129:-1==s.audio&&(s.audio=u,s.audioCodec="ac3");break;case 132:case 135:-1==s.audio&&(s.audio=u,s.audioCodec="ec3")}o+=d+5}-1!=(a=s).video&&(this.K=a.video,this.m=a.videoCodec),-1!=a.audio&&(this.F=a.audio,this.C=a.audioCodec),-1!=a.bf&&(this.G=a.bf),r&&!this.J&&(r=!1,i=t-188),this.J=!0;break;case this.K:o=e.subarray(o,i+188),a?this.j.push([o]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(o);break;case this.F:o=e.subarray(o,i+188),a?this.i.push([o]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(o);break;case this.G:o=e.subarray(o,i+188),a?this.l.push([o]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(o);break;default:r=!0}}return this},r.Ek=function(e){return de("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Wg(e,{ge:null,state:null})},r.Wg=function(e,t){var n=e.pts?e.pts/9e4:null,r=(e=e.data).byteLength,i=1;"hvc"==this.m&&(i=2);var a=t.state||0,s=a,o=0,l=[],u=-1,d=0;for(-1==a&&(u=0,d="hvc"==this.m?e[0]>>1&63:31&e[0],a=0,o=1);o<r;){var c=e[o++];a?1===a?a=c?0:2:c?1==c?(c=o-a-1,u>=0?l.push({data:e.subarray(u+i,c),fullData:e.subarray(u,c),type:d,time:n,state:null}):(a=l.length?l[l.length-1]:t.ge)&&(s&&o<=4-s&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-s),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-s)),c>0&&(c=e.subarray(0,c),a.data=et(a.data,c),a.fullData=et(a.fullData,c),a.state=0)),o<r?(d="hvc"==this.m?e[o]>>1&63:31&e[o],u=o,a=0):a=-1):a=0:a=3:a=c?0:1}return u>=0&&a>=0&&l.push({data:e.subarray(u+i,r),fullData:e.subarray(u,r),type:d,time:n,state:a}),!l.length&&t.ge&&(n=l.length?l[l.length-1]:t.ge)&&(n.data=et(n.data,e),n.fullData=et(n.fullData,e)),t.state=a,l},r.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())(n=Ao(this,n=et.apply(Ye,p(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:oo(n.data),dts:n.dts,pts:n.pts});return e},r.ub=function(){if(this.i.length&&!this.h.length)for(var e=g(this.i),t=e.next();!t.done;t=e.next()){var n=et.apply(Ye,p(t.value)),r=Ao(this,n);t=this.h.length?this.h[this.h.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!t||t.pts!=r.pts&&t.dts!=r.dts)?this.h.push(r):this.h.length&&(n=r?r.data:n)&&((t=this.h.pop()).data=et(t.data,n),this.h.push(t))}return this.h},r.ud=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=g(this.j),n=t.next();!n.done;n=t.next()){var r=et.apply(Ye,p(n.value)),i=Ao(this,r);n=this.g.length?this.g[this.g.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!n||n.pts!=i.pts&&n.dts!=i.dts)?this.g.push(i):this.g.length&&(r=i?i.data:r)&&((n=this.g.pop()).data=et(n.data,r),this.g.push(n))}if(e){for(t={ge:null,state:null},n=[],i=(r=g(this.g)).next();!i.done;i=r.next())(i=i.value).nalus=this.Wg(i,t),i.nalus.length&&(n.push(i),t.ge=i.nalus[i.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},r.getStartTime=function(e){if("audio"==e){e=null;var t=this.ub();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.ud(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},r.Vd=function(){return{audio:this.C,video:this.m}},r.$e=function(){for(var e=[],t=g(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,p(n.value.nalus));return e},r.dk=function(){de("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Jg();return{height:e.height,width:e.width}},r.Jg=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.$e();if(!n.length)return t;if(!(n=n.find(function(e){return 33==e.type})))return t;var r=new co(n.fullData,!0);Eo(r),Eo(r),go(r,4);var i=go(r,3);bo(r);var a=go(r,2),s=go(r,1),o=go(r,5),l=go(r,32);n=Eo(r);for(var u=Eo(r),d=Eo(r),c=Eo(r),h=Eo(r),f=Eo(r),g=Eo(r),p=[],m=[],y=0;y<i;y++)p.push(bo(r)),m.push(bo(r));if(i>0)for(y=i;y<8;y++)go(r,2);for(y=0;y<i;y++)p[y]&&go(r,88),m[y]&&Eo(r);yo(r),3==(i=yo(r))&&go(r,1),p=yo(r),m=yo(r);var v=y=0,b=0,E=0;return bo(r)&&(y+=yo(r),v+=yo(r),b+=yo(r),E+=yo(r)),t.width=String(p-(y+v)*(1===i||2===i?2:1)),t.height=String(m-(b+E)*(1===i?2:1)),r=function(e){for(var t=0,n=0;n<32;n++)t|=(e>>n&1)<<31-n;return t>>>0}(l),s=1==s?"H":"L",a="hvc1."+["","A","B","C"][a]+o,a+="."+r.toString(16).toUpperCase(),a+="."+s+g,f&&(a+="."+f.toString(16).toUpperCase()),h&&(a+="."+h.toString(16).toUpperCase()),c&&(a+="."+c.toString(16).toUpperCase()),d&&(a+="."+d.toString(16).toUpperCase()),u&&(a+="."+u.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=Io(e),t}(this):function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.$e();if(!n.length)return t;if(!(n=n.find(function(e){return 7==e.type})))return t;var r=Eo(n=new co(n.data)),i=Eo(n),a=Eo(n);if(mo(n),xo.includes(r)){var s=yo(n);if(3===s&&fo(n,1),mo(n),mo(n),fo(n,1),bo(n)){s=3!==s?8:12;for(var o=0;o<s;o++)bo(n)&&To(n,o<6?16:64)}}if(mo(n),0===(s=yo(n)))yo(n);else if(1===s)for(fo(n,1),mo(n),mo(n),s=yo(n),o=0;o<s;o++)mo(n);mo(n),fo(n,1),s=yo(n),o=yo(n);var l=go(n,1);0===l&&fo(n,1),fo(n,1);var u=0,d=0,c=0,h=0;return bo(n)&&(u=yo(n),d=yo(n),c=yo(n),h=yo(n)),t.height=String((2-l)*(o+1)*16-2*c-2*h),t.width=String(16*(s+1)-2*u-2*d),t.codec="avc1."+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=Io(e),t}(this)},B("shaka.util.TsParser",wo),wo.syncOffset=Ro,wo.probe=_o,wo.prototype.getVideoInfo=wo.prototype.Jg,wo.prototype.getVideoResolution=wo.prototype.dk,wo.prototype.getVideoNalus=wo.prototype.$e,wo.prototype.getCodecs=wo.prototype.Vd,wo.prototype.getStartTime=wo.prototype.getStartTime,wo.prototype.getVideoData=wo.prototype.ud,wo.prototype.getAudioData=wo.prototype.ub,wo.prototype.getMetadata=wo.prototype.getMetadata,wo.prototype.parseNalus=wo.prototype.Wg,wo.prototype.parseAvcNalus=wo.prototype.Ek,wo.prototype.parse=wo.prototype.parse,wo.prototype.setDiscontinuitySequence=wo.prototype.Gf,wo.prototype.clearData=wo.prototype.clearData,wo.Timescale=9e4;var xo=[100,110,122,244,44,83,86,118,128,138,139,134];function Co(e,t,n,r,i){var a=this;this.g=e,this.O=n,this.B=r,this.aa=t,this.l=new Map,this.G=new Map,this.Sa=new Map,this.h=null,this.Fa=!1,this.C=i||null,this.o=new Map,this.u=new te,this.j=new Map,this.J=null,this.M=new ki,this.Da="",this.ob=!1,this.ya=!0,this.N=!1,this.F=this.R=null,this.i=Do(this,this.M),this.ab=this.H=!1,this.K=new Xi(function(){return function(e){var t,n,r,i,a,s,o,l,u,d,c,h,f;return L(function(p){if(1==p.g){for(t=[],n=g(e.o),r=n.next();!r.done;r=n.next())for(i=r.value,a=g(i),s=a.next().value,o=a.next().value,l=o[0],u=s,e.o.set(u,o.slice(0,1)),l&&t.push(l.p.catch(wr)),d=g(o.slice(1)),c=d.next();!c.done;c=d.next())c.value.p.reject(new Ue(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),E(p,Promise.all(t),2)}for(h=g(e.j.values()),f=h.next();!f.done;f=h.next())f.value.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.F=null,e.B=null,e.i=null,e.h=null,e.aa=null,e.l.clear(),e.Sa.clear(),e.j.clear(),e.J=null,e.o.clear(),e.C=null,e.$.clear(),e.O=null,T(p)})}(a)}),this.I=!1,this.X="UNKNOWN",this.ib=this.kb=!1,this.Ta=new ki,this.m=!1,this.xa=null,this.$=new Map,this.oa=this.T=this.va=this.V=null,this.ma=new ki,this.g.remote&&(this.N="disconnected"!=this.g.remote.state,this.u.D(this.g.remote,"connect",function(){a.N="disconnected"!=a.g.remote.state}),this.u.D(this.g.remote,"connecting",function(){a.N="disconnected"!=a.g.remote.state}),this.u.D(this.g.remote,"disconnect",function(){a.N="disconnected"!=a.g.remote.state}))}function Do(t,n){if(t.ya=!0,e.ManagedMediaSource){t.F||(t.g.disableRemotePlayback=!0);var r=new ManagedMediaSource;t.u.D(r,"startstreaming",function(){t.ya=!0}),t.u.D(r,"endstreaming",function(){t.ya=!1})}else r=new MediaSource;return t.u.Ba(r,"sourceopen",function(){URL.revokeObjectURL(t.Da),n.resolve()}),t.u.Ba(t.g,"playing",function(){t.ob=!0}),t.Da=nl(r),t.B.useSourceElements?(t.g.removeAttribute("src"),t.R&&t.g.removeChild(t.R),t.F&&t.g.removeChild(t.F),t.R=Xs(t.Da),t.g.appendChild(t.R),t.F&&t.g.appendChild(t.F),t.g.load()):t.g.src=t.Da,r}function Lo(e,t,n,r){"audio"==t&&r&&(r=Vr(r,n.mimeType));var i=tr(n.mimeType,r);if(t==ot)No(e,i,e.I,n.external);else{var a=e.B.forceTransmux;(!pt(i)||!e.I&&cr.includes(i))&&(a=!0);var s=nr(n.mimeType,r);if(a){if(a=at("audio",(r||"").split(",")),r=at("video",(r||"").split(",")),a&&r)return e.m=!0,Lo(e,"audio",n,a),void Lo(e,"video",n,r);(r=Yn(s))&&(i=r(),e.j.set(t,i),i=i.convertCodecs(t,s))}s=i+e.B.addExtraFeaturesToSourceBuffer(i),Qi(e.K);try{var o=e.i.addSourceBuffer(s)}catch(l){throw new Ue(2,3,3015,l,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.I&&(o.mode=rl),e.u.D(o,"error",function(){var n=e.o.get(t)[0];n.p.reject(new Ue(2,3,3014,e.g.error?e.g.error.code:0,n.uri))}),e.u.D(o,"updateend",function(){return Yo(e,t)}),e.l.set(t,o),e.G.set(t,i),e.Sa.set(t,!!n.drmInfos.length)}}function Mo(e){return e.ya&&!e.N&&!e.H}function No(e,t,n,r){e.h||(e.h=new hr(e.aa),e.h&&(e.h.B=e.B.modifyCueCallback));var i=e.h;r=r||e.Fa,e=e.X,"application/cea-608"==t||"application/cea-708"==t?i.i=null:(i.i=br.get(t)(),i.i.setSequenceMode?i.i.setSequenceMode(n):de("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),i.i.setManifestType?i.i.setManifestType(e):de("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),i.C=r)}function Po(e){return!(e.H||e.i&&"ended"!=e.i.readyState)}function Oo(e){return!(e.H||e.i&&"closed"!=e.i.readyState)}function Fo(e,t){return e.l.size?t==ot?e.h.g:Hs(zo(e,t)):null}function Uo(e,t){return e.l.size?t==ot?e.h.h:Vs(zo(e,t)):null}function zo(e,t){if(e.H||e.N)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function Bo(e,t,n,r,i,a,s,o,l,u,d){var c,h,f,m,y,v,b,S,w,A,I,k,_,R,x,C,D,M,N;return s=void 0!==s&&s,o=void 0!==o&&o,l=void 0!==l&&l,u=void 0!==u&&u,L(function(P){switch(P.g){case 1:if(t!=(c=lt).Na){P.A(2);break}if("HLS"!=e.X){P.A(3);break}return E(P,e.Ta,4);case 4:h=P.h,e.h.u=h;case 3:return E(P,function(e,t,n,r,i){var a,s,o,l,u,d,c;return L(function(h){if(1==h.g)return E(h,Promise.resolve(),2);if(!e.i||!e.l)return h.return();if(null==n||null==r)return e.i.parseInit(Ne(t)),h.return();for(a=e.C?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:r,vttOffset:a},o=e.i.parseMedia(Ne(t),s,i,[]),l=g(o),u=l.next();!u.done;u=l.next())d=u.value,e.B(d,i||null,s);c=o.filter(function(t){return t.startTime>=e.m&&t.startTime<e.o}),e.l.append(c),null==e.g&&(e.g=Math.max(n,e.m)),e.h=Math.min(r,e.o),T(h)})}(e.h,n,r?r.startTime:null,r?r.endTime:null,r?r.P()[0]:null),5);case 5:return P.return();case 2:if(u||!e.m){P.A(6);break}return E(P,Bo(e,c.ka,n,r,i,a,s,o,l,!0),7);case 7:return E(P,Bo(e,c.Aa,n,r,i,a,s,o,l,!0),8);case 8:return P.return();case 6:if(!e.l.has(t))return P.return();if(f=e.l.get(t).timestampOffset,m=e.G.get(t),e.j.has(t)&&(m=e.j.get(t).getOriginalMimeType()),r&&(y=function(e,t,n,r,i,a,s){s=void 0!==s&&s;var o=null,l=[],u=Ne(n);if(cr.includes(a))(n=oo(u)).length&&r&&((s=n.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&"number"==typeof s.data&&(o=Math.round(s.data)/1e3),e.O.onMetadata([{cueTime:r.startTime,data:u,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime));else if(a.includes("/mp4")&&r&&r.ba){u=new ia;var d=null!=i.emsgSchemeIdUris&&i.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;d&&u.S("emsg",function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.Yc(),s=t.reader.Yc(),o=t.reader.U(),l=t.reader.U(),u=t.reader.U(),d=t.reader.U(),c=r.startTime+l/o;else o=t.reader.U(),l=(c=t.reader.Dd()/o+r.timestampOffset)-r.startTime,u=t.reader.U(),d=t.reader.U(),a=t.reader.Yc(),s=t.reader.Yc();t=t.reader.Tb(t.reader.getLength()-t.reader.Oa(),!0),(n&&n.includes(a)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.O.Dk():(n=c+u/o,e.O.Bk({startTime:c,endTime:n,schemeIdUri:a,value:s,timescale:o,presentationTimeDelta:l,eventDuration:u,id:d,messageData:t}),("https://aomedia.org/emsg/ID3"==a||"https://developer.apple.com/streaming/emsg-id3"==a)&&(o=oo(t)).length&&e.O.onMetadata([{cueTime:c,data:t,frames:o,dts:c,pts:c}],0,n)))});var c=r.ba.timescale;t=c&&!isNaN(c);var h=0,f=!1;t&&u.S("prft",function(t){var n=t.reader,r=t.version;n.U(),t=1e3*(t=n.U())+n.U()/4294967296*1e3,0===r?n=n.U():(r=n.U(),n=4294967296*r+(n=n.U())),t=uo(t),n=new Mi("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/c*1e3)})),e.O.onEvent(n)}).box("moof",aa).box("traf",aa).S("tfdt",function(e){f||(h=ts(e.reader,e.version).baseMediaDecodeTime/c,f=!0,d||e.parser.stop())}),(d||t)&&u.parse(n,!1,s),f&&0==r.timestampOffset&&(o=h)}else a.includes("/mp4")||a.includes("/webm")||!_o(u)||(e.$.has(t)||e.$.set(t,new wo),(l=e.$.get(t)).clearData(),l.Gf(r.i),l.parse(u),null!=(u=l.getStartTime(t))&&(o=u),l=l.getMetadata());return{timestamp:o,metadata:l}}(e,t,n,r,i,m,l),v=y.timestamp,b=y.metadata,null!=v&&(null==e.V&&t==c.Aa&&(e.V=v,e.va=r.startTime,null!=e.T&&(S=0,e.va==e.oa&&(S=e.V-e.T),e.ma.resolve(S))),null==e.T&&t==c.ka&&(e.T=v,e.oa=r.startTime,null!=e.V&&(w=0,e.va==e.oa&&(w=e.V-e.T),e.ma.resolve(w))),A=v,I=cr,!e.I&&I.includes(e.G.get(t))&&(A=0),k=r.startTime-A,(Math.abs(f-k)>=.001||s||o)&&(!l||k>0||!f)&&(f=k,e.ib&&(Wo(e,t,function(){return Vo(e,t)},null),Wo(e,t,function(){return Ko(e,t,f)},null))),(t==c.Aa||!e.l.has(c.Aa))&&e.Ta.resolve(f)),b.length)&&e.O.onMetadata(b,f,r?r.endTime:null),a&&t==c.Aa&&(e.h||No(e,"application/cea-608",e.I,!1),e.J||(_=m.split(";",1)[0],e.J=new St(_)),r?(R=e.J.xf(n)).length&&function(e,t,n){for(var r=new Map,i=(t=g(t)).next();!i.done;i=t.next()){var a=i.value;i=a.stream,a=a.cue,r.has(i)||r.set(i,[]),yr(e,a,n),a.startTime>=e.m&&a.startTime<e.o&&(r.get(i).push(a),i==e.F&&e.l.append([a]))}for(t=(n=g(r.keys())).next();!t.done;t=n.next())for(t=t.value,e.j.has(t)||e.j.set(t,[]),a=(i=g(r.get(t))).next();!a.done;a=i.next())a=a.value,e.j.get(t).push(a);vr(e)}(e.h,R,f):e.J.init(n,o,d)),!e.j.has(t)){P.A(9);break}return E(P,e.j.get(t).transmux(n,i,r,e.i.duration,t),10);case 10:x=P.h,ArrayBuffer.isView(x)?n=x:(null!=(C=x).init&&(D=C.init,Wo(e,t,function(){e.C&&ht(e.C,D,f,i),e.l.get(t).appendBuffer(D)},r?r.P()[0]:null)),n=C.data);case 9:if(n=function(e,t,n,r,i){if("mp4"!=ir(e.G.get(i)))return n;var a=null===r,s=e.Sa.get(i),o=e.O.Jj(),l=!1;r&&r.ba&&(l=r.ba.encrypted),r=r?r.P()[0]:null;var u=ae();return e.B.correctEc3Enca&&a&&"audio"===i&&(n=function(e){e=Ne(e);var t=null;return(new ia).box("moov",aa).box("trak",aa).box("mdia",aa).box("minf",aa).box("stbl",aa).S("stsd",sa).box("enca",function(e){return t=e.reader.h,la(e)}).box("sinf",aa).box("frma",function(e){e.parser.stop(),"ec-3"===as(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)}).parse(e),e}(n)),e.B.insertFakeEncryptionInInit&&s&&u.Ed(o,i)&&(a?n=function(e,t,n){function r(e){c.push({box:e,wi:1701733217})}function i(e){c.push({box:e,wi:1701733238})}function a(e){u=!0,e.parser.stop()}function s(e){d.push(e),aa(e)}var o,l=t=Ne(t),u=!1,d=[],c=[];if((new ia).box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).S("stsd",function(e){o=e,d.push(e),sa(e)}).S("encv",a).S("enca",a).S("dvav",i).S("dva1",i).S("dvh1",i).S("dvhe",i).S("dvc1",i).S("dvi1",i).S("hev1",i).S("hvc1",i).S("avc1",i).S("avc3",i).S("ac-3",r).S("ec-3",r).S("ac-4",r).S("Opus",r).S("fLaC",r).S("mp4a",r).parse(t),u)return t;if(0==c.length||!o)throw Ze(t),new Ue(2,3,3019,n);c.reverse();for(var h=(n=g(c)).next();!h.done;h=n.next())h=h.value,l=Ns(e,l,o,h.box,d,h.wi);return ae().Gi()?((e=new Uint8Array(t.byteLength+l.byteLength)).set(l),e.set(t,l.byteLength),e):l}(t,n,r):!l&&u.Hi(i)&&(n=function(e){e=Ne(e);var t=[];(new ia).box("mdat",function(e){t.push(e)}).parse(e);for(var n=[],r=0;r<t.length;r++){var i=t[r-1],a=t[r];n.push(Ms(e.subarray(i?i.start+i.size:0,a.start+a.size)))}return et.apply(Ye,p(n))}(n))),a&&u.oe()&&(n=function(e){function t(e){r.push({start:e.start,size:e.size}),aa(e)}var n=Ne(e),r=[];return(new ia).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(e){r.push({start:e.start,size:e.size});for(var t=Oe(n,e.start),i=0;i<e.size-3;i++){var a=t.getUint32(i);1633889587==a?t.setUint32(i,1700998451):1684103987==a&&t.setUint32(i,1684366131)}}).parse(n),n}(n)),n}(e,i,n,r,t),!r||!e.I||t==c.Na){P.A(11);break}if(!s&&!o){P.A(11);break}if(M=r.startTime,"HLS"!=e.X||e.m||t!=c.ka||!e.l.has(c.Aa)){P.A(13);break}return E(P,e.ma,14);case 14:N=P.h,Math.abs(N)>.15&&(M-=N);case 13:Wo(e,t,function(){return Vo(e,t)},null),Wo(e,t,function(){return Ko(e,t,M)},null);case 11:return E(P,Wo(e,t,function(){var r=n;e.C&&ht(e.C,r,f,i),e.l.get(t).appendBuffer(r)},r?r.P()[0]:null),15);case 15:T(P)}})}function jo(e,t){var n;return L(function(r){return 1==r.g?t==(n=lt).Na?e.h?E(r,e.h.remove(0,1/0),0):r.return():t===n.Aa&&e.J&&e.h?E(r,e.h.remove(0,1/0,!0),4):r.A(4):6!=r.g?E(r,Wo(e,t,function(){return Ho(e,t,0,e.i.duration)},null),6):e.m?E(r,Wo(e,n.ka,function(){return Ho(e,n.ka,0,e.i.duration)},null),0):r.A(0)})}function qo(e,t,n,r,i,a,s,o,l){var u,d;return L(function(c){return 1==c.g?t==(u=lt).Na?(a||(e.h.u=n),function(e,t,n){e.m=t,e.o=n}(e.h,r,i),c.return()):(d=[],E(c,function(e,t,n,r,i){var a,s,o,l,u,d;return L(function(c){return 1==c.g?(a=lt,s=tl(e,t,n,r,i),o=s.type,l=s.dc,u=s.rf,(d=i.get(a.ka))&&(e.m=d.isAudioMuxedInVideo),o==il?(e.j.has(t)&&!l?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&l?e.j.set(t,l):l&&(e.j.has(t)&&e.j.get(t).transmux!==l.transmux?(e.j.get(t).destroy(),e.j.set(t,l)):l.destroy()),c.return(!1)):o==sl?E(c,function(e,t,n,r){return Wo(e,t,function(){if(t!==ot){if(e.G.get(t),mt()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),r&&e.j.set(t,r);var i=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(i),e.G.set(t,n)}Yo(e,t)}},null)}(e,t,u,l),3):o!=al?c.A(3):(l&&l.destroy(),E(c,Zo(e,i),3))):c.return(!0)})}(e,t,s,o,l),2)):(c.h||(d.push(Wo(e,t,function(){return Vo(e,t)},null)),e.m&&d.push(Wo(e,u.ka,function(){return Vo(e,u.ka)},null))),a||(d.push(Wo(e,t,function(){return Ko(e,t,n)},null)),e.m&&d.push(Wo(e,u.ka,function(){return Ko(e,u.ka,n)},null))),0==r&&i==1/0||(d.push(Wo(e,t,function(){return $o(e,t,r,i)},null)),e.m&&d.push(Wo(e,u.ka,function(){return $o(e,u.ka,r,i)},null))),d.length?E(c,Promise.all(d),0):c.A(0))})}function Go(e){L(function(t){return e.K.g||e.g.error||e.N||e.H||Po(e)||Oo(e)?t.return():E(t,Xo(e,function(){Po(e)||Oo(e)||e.i.clearLiveSeekableRange()}),0)})}function Ho(e,t,n,r){if(r<=n)Yo(e,t);else{if(e.C){var i=e.C;"video"===t&&i.g&&i.g.flushBuffer(n,r)}e.l.get(t).remove(n,r)}}function Vo(e,t){var n=e.l.get(t),r=n.appendWindowStart,i=n.appendWindowEnd;n.abort(),n.appendWindowStart=r,n.appendWindowEnd=i,Yo(e,t)}function Ko(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Yo(e,t)}function $o(e,t,n,r){var i=e.l.get(t);i.appendWindowEnd===r&&i.appendWindowStart===n||(i.appendWindowStart=0,i.appendWindowEnd=r,i.appendWindowStart=n),Yo(e,t)}function Yo(e,t){if(e.H||e.K.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),Qo(e,t))}function Wo(e,t,n,r){return Qi(e.K),n={start:n,p:new ki,uri:r},e.o.get(t).push(n),1==e.o.get(t).length&&Jo(e,t),n.p}function Xo(e,t){var n,r,i,a,s,o,l,u,d,c,h;return L(function(f){switch(f.g){case 1:for(Qi(e.K),n=[],r=Array.from(e.l.keys()),i=g(r),a=i.next(),s={};!a.done;s={ready:void 0},a=i.next())o=a.value,s.ready=new ki,l={start:function(e){return function(){return e.ready.resolve()}}(s),p:s.ready,uri:null},(u=e.o.get(o)).push(l),n.push(s.ready),1==u.length&&l.start();return S(f,2),E(f,Promise.all(n),4);case 4:A(f,3);break;case 2:throw I(f);case 3:return S(f,5,6),E(f,t(),6);case 6:for(k(f),d=g(r),c=d.next();!c.done;c=d.next())h=c.value,Qo(e,h);_(f,0);break;case 5:throw new Ue(2,3,3015,I(f),e.g.error||"No error in the media element",null)}})}function Qo(e,t){e.o.get(t).shift(),Jo(e,t)}function Jo(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(r){"QuotaExceededError"==r.name?n.p.reject(new Ue(2,3,3017,t)):Mo(e)?n.p.reject(new Ue(2,3,3015,r,e.g.error||"No error in the media element",n.uri)):n.p.reject(new Ue(2,3,3024,t)),Qo(e,t)}}function Zo(e,t){return Xo(e,function(){return function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T,S;return L(function(A){if(1==A.g){if(e.H||e.N)return A.return();for(n=lt,e.H=!0,e.m=!1,r=e.g.currentTime,i=e.g.autoplay,e.g.paused||(e.ab=!0),e.ob&&(e.g.autoplay=!1),w(A,2),e.u.Pa(),a=g(e.j.values()),s=a.next();!s.done;s=a.next())s.value.destroy();for(o=g(e.l.values()),l=o.next();!l.done;l=o.next()){u=l.value;try{e.i.removeSourceBuffer(u)}catch(I){}}return e.j.clear(),e.l.clear(),d=e.i.duration,e.M=new ki,e.i=Do(e,e.M),E(A,e.M,4)}if(2!=A.g){for(!isNaN(d)&&d?e.i.duration=d:!isNaN(e.xa)&&e.xa&&(e.i.duration=e.xa),c=new ki,h=e.i.sourceBuffers,f=t.size,p=0,m=function(){++p===f&&(c.resolve(),e.u.Ma(h,"addsourcebuffer",m))},e.u.D(h,"addsourcebuffer",m),y=g(t.keys()),v=y.next();!v.done;v=y.next())b=v.value,T=t.get(b),Lo(e,b,T,T.codecs);return(S=t.get(n.ka))&&S.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.ka)&&e.o.set(n.ka,[]),e.g.currentTime=r,E(A,c,2)}return k(A),e.H=!1,Qi(e.K),e.u.Ba(e.g,"canplaythrough",function(){e.K.g||(e.g.autoplay=i,e.ab&&(e.ab=!1,e.g.play()))}),_(A,0)})}(e,t)})}function el(e,t,n,r){var i=!1,a=at("audio",(r||"").split(",")),s=at("video",(r||"").split(",")),o=s;"audio"==t&&(o=a),o||(o=r),r=tr(n,o);var l=or(e.G.get(t)),u=e.B.forceTransmux;if(!pt(r)||!e.I&&cr.includes(r)?u=!0:u||n==l||(u=!ae().Jf()&&cr.includes(n)),u&&(n=Yn(e=nr(n,o)))){var d=n();a&&s&&(i=!0),r=d.convertCodecs(t,e)}return t=ar(lr(r)),{dc:d,fl:i,Nh:or(r),codec:t,mimeType:r}}function tl(e,t,n,r,i){if(t==ot)return{type:il,rf:n,dc:null};var a=ar(lr(e.G.get(t))),s=or(e.G.get(t)),o=el(e,t,n,r),l=o.dc,u=o.fl,d=o.Nh,c=o.codec;o=o.mimeType;var h=!0;return u&&e.G.has("audio")&&(n=el(e,"audio",n,r),r=ar(lr(e.G.get("audio"))),h=or(e.G.get("audio")),h=r==n.codec&&h==n.Nh,n.dc&&n.dc.destroy()),a===c&&s===d&&h?{type:il,rf:o,dc:l}:(a=!0,(e.m&&!i.has("audio")||u&&l&&!e.j.has(t))&&(a=!1),a&&"smooth"===e.B.codecSwitchingStrategy&&mt()?{type:sl,rf:o,dc:l}:(l&&l.destroy(),{type:al,rf:o,dc:null}))}(r=Co.prototype).destroy=function(){return this.K.destroy()},r.init=function(e,t,n,r){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,r=void 0!==r&&r;var i,a,s,o,l,u,d=this;return L(function(c){if(1==c.g)return i=lt,E(c,d.M,2);if(3!=c.g)return Po(d)||Oo(d)?(V("Expected MediaSource to be open during init(); reopening the media source."),d.M=new ki,d.i=Do(d,d.M),E(c,d.M,3)):c.A(3);for(d.I=t,d.X=n,d.kb=r,d.ib=!d.I&&"HLS"==d.X&&!d.kb,d.$.clear(),d.V=null,d.va=null,d.T=null,d.oa=null,d.ma=new ki,a=g(e.keys()),s=a.next();!s.done;s=a.next())o=s.value,l=e.get(o),Lo(d,o,l,l.codecs),d.m?(d.o.set(i.ka,[]),d.o.set(i.Aa,[])):d.o.set(o,[]);(u=e.get(i.ka))&&u.isAudioMuxedInVideo&&(d.m=!0),T(c)})},r.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},r.Fc=function(){var e={total:this.H?[]:Ys(this.g.buffered),audio:Ys(zo(this,"audio")),video:Ys(zo(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},r.remove=function(e,t,n,r){var i,a,s=this;return L(function(o){return 1==o.g?(e==(i=lt).Aa&&s.J&&(s.J.remove(r),a=s.h.g||0,s.h.remove(a,n,!0)),e==i.Na?E(o,s.h.remove(t,n),0):n>t?E(o,Wo(s,e,function(){return Ho(s,e,t,n)},null),5):o.A(0)):s.m?E(o,Wo(s,i.ka,function(){return Ho(s,i.ka,t,n)},null),0):o.A(0)})},r.flush=function(e){var t,n=this;return L(function(r){return 1==r.g?e==(t=lt).Na?r.return():E(r,Wo(n,e,function(){n.g.currentTime-=.001,Yo(n,e)},null),2):n.m?E(r,Wo(n,t.ka,function(){var e=t.ka;n.g.currentTime-=.001,Yo(n,e)},null),0):r.A(0)})},r.endOfStream=function(e){var t=this;return L(function(n){return E(n,Xo(t,function(){Po(t)||Oo(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},r.Ab=function(e){var t=this;return L(function(n){return E(n,Xo(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=g(t.l.keys()),r=n.next();!r.done;r=n.next()){r=r.value;var i={start:function(){},p:new ki,uri:null};t.o.get(r).unshift(i)}t.i.duration=e,t.xa=e}),0)})},r.getDuration=function(){return this.i.duration};var nl=e.URL.createObjectURL,rl="sequence",il="none",al="reset",sl="changeType";function ol(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=void 0===n||n,this.H=0,this.o=!1,this.m=e}function ll(e,t,n,r){var i=this;this.u=r,this.g=e,this.F=t,this.h=n,this.j=new te,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=function(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new dl(new cl(e.g),t,function(){return L(function(t){if(1==t.g)return Ys(e.g.buffered).length?n?(e.g.currentTime+=n,t.A(2)):E(t,e.g.play(),3):t.return();if(2!=t.g){if(!e.g)return t.return();e.g.pause(),e.g.play()}e.H++,e.u(new Mi("stalldetected")),T(t)})})}(this),this.B=!1,this.j.D(e,"waiting",function(){return ul(i)}),this.i=new Tr(function(){ul(i)}).Ea(this.h.gapJumpTimerTime)}function ul(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){var n=(t=e.o).h,r=hl(n),i=n.g.currentTime,a=Date.now()/1e3;t.g==i&&t.m==r||(t.l=a,t.g=i,t.m=r,t.i=!1),(r=(i=a-t.l)>=t.o&&r&&!t.i)&&(t.j&&t.j(t.g,i),t.i=!0,t.g=n.g.currentTime),t=!r}t&&(t=e.g.currentTime,r=function(e,t,n){return e&&e.length&&!Gs(e)&&(e=Ys(e).findIndex(function(e,r,i){return e.start>t&&(0==r||i[r-1].end-t<=n)}))>=0?e:null}(n=e.g.buffered,t,e.h.gapDetectionThreshold),null==r||0==r&&!e.B||(i=n.start(r),(a=e.h.gapPadding)&&(i=Math.ceil(100*(i+a))/100),i>=e.F.Gb()||i-t<.001||(0!=r&&n.end(r-1),function(e,t){e.C=!0,e.j.Ba(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}(e,i),t==e.l&&(e.l=i),e.G++,e.u(new Mi("gapjumped")))))}}}function dl(e,t,n){this.h=e,this.m=hl(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}function cl(e){var t=this;this.g=e,this.h=new te,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function hl(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=g(Ys(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function fl(e,t,n,r){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?r():(t=gl.value().get(t),n.Ba(e,t,r))}(r=ol.prototype).getDuration=function(){return this.l},r.Mj=function(){return this.h},r.Qi=function(e){this.i=e},r.Ab=function(e){this.l=e},r.Sj=function(){return this.i},r.Pi=function(e){this.B=e},r.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},r.Hf=function(e){this.u=e},r.Ze=function(){return this.u},r.nh=function(e){this.F=e},r.Dj=function(){return this.F},r.Ai=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var r=e[e.length-1].end+t;this.tf(e[0].start+t),this.h=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.h),this.g=Math.max(this.g,r),null!=this.i&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},r.ie=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,r=(Date.now()+this.B)/1e3,i=(e=g(e)).next();!i.done;i=e.next())r<(i=i.value).startTime||(t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.h=Math.max(this.h,i.endTime-i.startTime));this.tf(t),this.g=Math.max(this.g,n),null!=this.i&&this.G&&!this.o&&(this.i=r-this.g-this.h)}},r.zi=function(e,t){this.tf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},r.Nj=function(){return this.g},r.lf=function(){this.o=!0},r.pk=function(){return this.o},r.oh=function(e){this.m=e},r.Ij=function(){return this.m},r.tf=function(e){null==this.j?this.j=e:this.J||(this.j=Math.min(this.j,e))},r.Sg=function(e){this.h=Math.max(this.h,e)},r.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},r.W=function(){return this.l==1/0&&!this.C},r.Vc=function(){return this.l!=1/0&&!this.C},r.Hb=function(){return Math.max(this.I,this.Hc()-this.u)},r.Si=function(e){this.I=e},r.Hc=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},r.Xd=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Hc()-this.u+e,this.Gb()))},r.Xb=function(){return this.Xd(0)},r.Gb=function(){return Math.max(0,this.Hc()-(this.W()||this.Vc()?this.F:0))},r.ej=function(){return!(null==this.i||null!=this.g&&this.G)},r.Oi=function(e){this.H=e},r.yj=function(){return this.H},B("shaka.media.PresentationTimeline",ol),ol.prototype.getAvailabilityTimeOffset=ol.prototype.yj,ol.prototype.setAvailabilityTimeOffset=ol.prototype.Oi,ol.prototype.usingPresentationStartTime=ol.prototype.ej,ol.prototype.getSeekRangeEnd=ol.prototype.Gb,ol.prototype.getSeekRangeStart=ol.prototype.Xb,ol.prototype.getSafeSeekRangeStart=ol.prototype.Xd,ol.prototype.getSegmentAvailabilityEnd=ol.prototype.Hc,ol.prototype.setUserSeekStart=ol.prototype.Si,ol.prototype.getSegmentAvailabilityStart=ol.prototype.Hb,ol.prototype.isInProgress=ol.prototype.Vc,ol.prototype.isLive=ol.prototype.W,ol.prototype.offset=ol.prototype.offset,ol.prototype.notifyMaxSegmentDuration=ol.prototype.Sg,ol.prototype.notifyMinSegmentStartTime=ol.prototype.tf,ol.prototype.getInitialProgramDateTime=ol.prototype.Ij,ol.prototype.setInitialProgramDateTime=ol.prototype.oh,ol.prototype.isStartTimeLocked=ol.prototype.pk,ol.prototype.lockStartTime=ol.prototype.lf,ol.prototype.getMaxSegmentEndTime=ol.prototype.Nj,ol.prototype.notifyPeriodDuration=ol.prototype.zi,ol.prototype.notifySegments=ol.prototype.ie,ol.prototype.notifyTimeRange=ol.prototype.Ai,ol.prototype.getDelay=ol.prototype.Dj,ol.prototype.setDelay=ol.prototype.nh,ol.prototype.getSegmentAvailabilityDuration=ol.prototype.Ze,ol.prototype.setSegmentAvailabilityDuration=ol.prototype.Hf,ol.prototype.setStatic=ol.prototype.cd,ol.prototype.setClockOffset=ol.prototype.Pi,ol.prototype.getPresentationStartTime=ol.prototype.Sj,ol.prototype.setDuration=ol.prototype.Ab,ol.prototype.setPresentationStartTime=ol.prototype.Qi,ol.prototype.getMaxSegmentDuration=ol.prototype.Mj,ol.prototype.getDuration=ol.prototype.getDuration,ll.prototype.release=function(){this.j&&(this.j.release(),this.j=null),null!=this.i&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},ll.prototype.wf=function(){this.B=!0,this.i&&this.i.Ea(this.h.gapJumpTimerTime),ul(this)},dl.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},cl.prototype.release=function(){this.h&&this.h.release(),this.h=null};var gl=new ie(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function pl(e,t,n,r){var i=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==i.l&&(i.l=r()),i.l},this.o=!1,this.h=new te,this.i=new El(e),fl(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){vl(i,i.j())})}function ml(e){return e.o?e.g.currentTime:e.j()}function yl(e,t){e.g.readyState>0?Tl(e.i,t):fl(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){vl(e,e.j())})}function vl(e,t){Math.abs(e.g.currentTime-t)<.001?bl(e):(e.h.Ba(e.g,"seeking",function(){bl(e)}),Tl(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function bl(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function El(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Tr(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Tl(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Ea(.1)}function Sl(e){this.g=e,this.i=!1,this.h=null,this.j=new te}function wl(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Al(e,t){return(e=e.g.seekable).length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Il(e,t,n,r,i,a){var s=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=i,this.o=null,this.i=new ll(e,t.presentationTimeline,n,a),this.j=new pl(e,function(){e:{var e=s.i;e.m=!0,e.B=!1,e.i&&e.i.Ea(e.h.gapJumpTimerTime),ul(e);var t=ml(s.j);if(e=Rl(s,t),!yt()&&Math.abs(e-t)>.001){t=!1;var n=ae().Mi();if(n){var r=Date.now()/1e3;(!s.o||s.o<r-n)&&(s.o=r,t=!0)}else t=!0;if(t){yl(s.j,e),e=void 0;break e}}s.u(),e=void 0}return e},function(e){var t=s.i;t.g.seeking&&!t.m&&(t.m=!0,t.l=e),t.i&&t.i.Ea(t.h.gapJumpTimerTime),ul(t)},function(){return kl(s,r)}),this.m=new Tr(function(){if(0!=s.h.readyState&&!s.h.paused){var e=ml(s.j),t=s.g.Xb(),n=s.g.Gb();n-t<3&&(t=n-3),e<t&&(e=Rl(s,e),s.h.currentTime=e)}})}function kl(e,t){return null==t?t=e.g.getDuration()<1/0?e.g.Xb():e.g.Gb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Gb()+t),_l(e,xl(e,t))}function _l(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Rl(e,t){var n=e.l.rebufferingGoal,r=e.l.safeSeekOffset,i=e.g.Xb(),a=e.g.Gb(),s=e.g.getDuration();a-i<3&&(i=a-3);var o=e.g.Xd(n),l=e.g.Xd(r);return n=e.g.Xd(n+r),t>=s?_l(e,t):t>a?a-e.l.safeSeekEndOffset:t<i?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:Ks(e.h.buffered,l)?l:n:t>=o||Ks(e.h.buffered,t)?t:n}function xl(e,t){var n=e.g.Xb();return t<n?n:t>(e=e.g.Gb())?e:t}function Cl(e){this.g=e,this.m=null,this.i=0,this.o=!1}function Dl(e){return e.g[0]||null}function Ll(e,t,n){return new Cl([e=new Us(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Ml(e,t,n,r){this.i=e,this.h=t,this.g=n,this.reverse=r}function Nl(){Cl.call(this,[]),this.h=[]}function Pl(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Ye(),this.h=new Tr(function(){t.g.ui(.25*t.i)})}function Ol(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{return void(e.g.Ye()!=t&&e.g.ph(t))}catch(n){}e.h.Ea(.25),0!=e.g.Ye()&&e.g.ph(0)}function Fl(e){var t=this;this.j=e,this.h=new te,this.g=new Set,this.i=new Tr(function(){Ul(t,!1)}).Jb(),e.paused||this.i.Ea(.25),this.h.D(e,"playing",function(){t.i.Jb().Ea(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}function Ul(e,t){for(var n=e.j.currentTime,r=(e=g(e.g)).next();!r.done;r=e.next())r.value.j(n,t)}function zl(e){Oi.call(this),this.g=new Map,this.h=e}function Bl(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function jl(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function ql(e){Oi.call(this),this.h=new Map,this.i=e,this.g=null}function Gl(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new Mi("regionadd",new Map([["region",t]])),e.dispatchEvent(t),function(e){e.g||(e.g=new Tr(function(){for(var t=e.i(),n=g(e.h),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,(i=i.next().value).endTime<t.start&&(e.h.delete(r),r=new Mi("regionremove",new Map([["region",i]])),e.dispatchEvent(r))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Ea(2))}(e))}function Hl(e,t,n,r,i){this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=r,this.u=i||function(e,t){return!(t.fastSwitching&&e.Xc&&e.ee)}}function Vl(e,t){e.l=t;for(var n=(e=g(e.g.values())).next();!n.done;n=e.next())n.value.g=t}function Kl(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.h||(e.h=e.i.segmentIndex.Vb(t,!0,e.o)),!e.h)return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value);){var r=!0;if(n.isPreload()&&null!=n.endByte&&(r=!1),2==n.Jc()&&(r=!1),n.Yb(!1)&&(r=!1),r&&n.ba&&t.push($l(e,n.ba)),r&&!e.g.has(n)&&(r=new Zl(e.l),t.push(eu(r,n,e.i)),e.g.set(n,r)),!e.u(n,e.i))break}return Xl(e),Promise.all(t)}function $l(e,t){if(!e.i.segmentIndex||t.Yb()||Array.from(e.j.keys()).some(function(e){return Fs(e,t)}))return Promise.resolve();var n=new Zl(e.l),r=eu(n,t,e.i);return e.j.set(t,n),r}function Yl(e,t){for(var n=(t=g(t.keys())).next();!n.done;n=t.next())(n=n.value)&&Jl(e,n)}function Wl(e){Yl(e,e.g),Yl(e,e.j),e.h=null}function Xl(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=g(e.j.keys()),r=n.next(),i={};!r.done;i={Mg:void 0},r=n.next())i.Mg=r.value,t.some(function(e){return function(t){return Fs(t.ba,e.Mg)}}(i))||Jl(e,i.Mg)}function Ql(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var r=n.pop();r&&Jl(e,r)}Xl(e)}function Jl(e,t){var n=e.g;t instanceof Os&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function Zl(e){this.g=e,this.je=this.wh=null}function eu(e,t,n){var r=new Uint8Array(0);return e.je=e.g(t,n,function(t){return L(function(n){if(1==n.g)return r=r.byteLength>0?et(r,t):t,e.wh?E(n,e.wh(r),3):n.A(0);r=new Uint8Array(0),T(n)})}),e.je.promise.catch(function(e){return e instanceof Ue&&7001==e.code?Promise.resolve():Promise.reject(e)})}function tu(e){var t=or(e);return{type:t.split("/")[0],mimeType:t,codecs:e=lr(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ve:null,colorGamut:null,frameRate:null}}function nu(e,t,n){function r(e){s=e.name;var t=e.reader;t.skip(24);var n=t.Ca(),r=t.Ca();t.skip(50),f=String(n),h=String(r),e.reader.Ia()&&aa(e)}function i(e){var t=is(e.reader);p=t.channelCount,m=t.sampleRate,a(e.name)}function a(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":l.push(e+".42E01E"),d=!0;break;case"hev1":case"hvc1":l.push(e+".1.6.L93.90"),d=!0;break;case"dvh1":case"dvhe":l.push(e+".05.04"),d=!0;break;case"vp09":l.push(e+".00.10.08"),d=!0;break;case"av01":l.push(e+".0.01M.08"),d=!0;break;case"mp4a":o.push("mp4a.40.2"),u=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":o.push(e),u=!0;break;case"apac":o.push("apac.31.00"),u=!0}}var s,o=[],l=[],u=!1,d=!1,c=null,h=null,f=null,p=null,m=null,y=null,v=null;if((new ia).box("moov",aa).box("trak",aa).box("mdia",aa).S("mdhd",function(e){c=ns(e.reader,e.version).language}).box("minf",aa).box("stbl",aa).S("stsd",sa).box("mp4a",function(e){var t=is(e.reader);p=t.channelCount,m=t.sampleRate,e.reader.Ia()?aa(e):a(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,r="mp4a";e.Ia();){t=e.Y();for(var i=e.Y();128&i;)i=e.Y();if(3==t)e.Ca(),128&(i=e.Y())&&e.Ca(),64&i&&e.skip(e.Y()),32&i&&e.Ca();else if(4==t)n=e.Y(),e.skip(12);else if(5==t)break}n&&(r+="."+ss(n),5==t&&e.Ia()&&(31==(n=(248&(t=e.Y()))>>3)&&e.Ia()&&(n=32+((7&t)<<3)+((224&e.Y())>>5)),r+="."+n)),o.push(r),u=!0}).box("ac-3",i).box("ec-3",i).box("ac-4",i).box("Opus",i).box("fLaC",i).box("apac",i).box("avc1",r).box("avc3",r).box("hev1",r).box("hvc1",r).box("dva1",r).box("dvav",r).box("dvh1",r).box("dvhe",r).box("vp09",r).box("av01",r).box("avcC",function(e){var t=s||"";switch(s){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+ss(e.Y())+ss(e.Y())+ss(e.Y()),l.push(e),d=!0}).box("hvcC",function(e){var t=s||"";switch(s){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var r=["","A","B","C"][(e=n.Y())>>6],i=31&e,a=n.U(),o=(32&e)>>5?"H":"L";e=[n.Y(),n.Y(),n.Y(),n.Y(),n.Y(),n.Y()],n=n.Y();for(var u=0,c=0;c<32&&(u|=1&a,31!=c);c++)u<<=1,a>>=1;for(t=t+"."+r+i+"."+ss(u,!0),t+="."+o+n,r="",i=e.length;i--;)((o=e[i])||r)&&(r="."+o.toString(16).toUpperCase()+r);t+=r,l.push(t),d=!0}).box("dvcC",function(e){var t=s||"";switch(s){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+os(e>>1&127)+"."+os(e<<5&32|n>>3&31)),d=!0}).box("dvvC",function(e){var t=s||"";switch(s){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.Y(),n=n.Y(),l.push(t+"."+os(e>>1&127)+"."+os(e<<5&32|n>>3&31)),d=!0}).S("vpcC",function(e){var t=s||"",n=e.reader;e=n.Y();var r=n.Y();n=n.Y()>>4&15,l.push(t+"."+os(e)+"."+os(r)+"."+os(n)),d=!0}).box("av1C",function(e){var t=s||"";"dav1"===s&&(t="av01");var n=e.reader;n.skip(1);var r=(e=n.Y())>>>5,i=(64&(n=n.Y()))>>6;l.push(t+"."+r+"."+os(31&e)+(n>>>7?"H":"M")+"."+os(2===r&&i?(32&n)>>5?12:10:i?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+os(1)+"."+os(1)+"."+os(1)+".0"),d=!0}).box("enca",la).box("encv",oa).box("sinf",aa).box("frma",function(e){a(e=as(e.reader).codec)}).box("colr",function(e){l=l.map(function(t){if(t.startsWith("av01.")){var n=e.reader,r=n.Oa(),i=n.Tb(4,!1),a=String.fromCharCode(i[0]);if(a+=String.fromCharCode(i[1]),a+=String.fromCharCode(i[2]),"nclx"===(a+=String.fromCharCode(i[3]))){i=n.Ca(),a=n.Ca();var s=n.Ca(),o=n.Y()>>7,l=t.split(".");10==l.length&&(l[6]=os(i),l[7]=os(a),l[8]=os(s),l[9]=String(o),t=l.join("."))}n.seek(r)}return t});var t=function(e){var t=null,n=null,r=e.Tb(4,!1),i=String.fromCharCode(r[0]);if(i+=String.fromCharCode(r[1]),i+=String.fromCharCode(r[2]),"nclx"===(i+=String.fromCharCode(r[3]))){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(r=e.Ca(),e.Ca(),r){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ve:n}}(e.reader),n=t.colorGamut;y=t.ve,v=n}).parse(e||t,!0,!0),!o.length&&!l.length)return null;var b=u&&!d,E=new Map;if(d&&!n){n=new St("video/mp4"),e&&n.init(e);try{n.xf(t);for(var T=g(n.Vf()),S=T.next();!S.done;S=T.next()){var w=S.value;E.set(w,w)}}catch(A){}n.Nd()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:ru(o.concat(l)).join(", "),language:c,height:h,width:f,channelCount:p,sampleRate:m,closedCaptions:E,ve:y,colorGamut:v,frameRate:null}}function ru(e){for(var t=new Set,n=[],r=(e=g(e)).next();!r.done;r=e.next()){var i=sr(r=r.value);t.has(i)||(n.push(r),t.add(i))}return t=st("audio",n),r=st("video",n),e=st(ot,n),r=function(e){if(e.length<=1)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?pt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(r),t=t.concat(r).concat(e),n.length&&!t.length?n:t}function iu(t,n,r){var i,a,s,o,l;return L(function(u){if(1==u.g)return(i=n).cryptoKey?u.A(2):E(u,i.fetchKey(),3);if(!(a=i.iv))for(a=Ne(new ArrayBuffer(16)),s=i.firstMediaSequenceNumber+r,o=a.byteLength-1;o>=0;o--)a[o]=255&s,s>>=8;return l="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:a}:{name:"AES-CTR",counter:a,length:64},u.return(e.crypto.subtle.decrypt(l,i.cryptoKey,t))})}function au(e,t,n,r,i){return e=qi(e,r,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function su(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.M=new Map,this.C=1,this.B=this.o=null,this.V=0,this.h=new Map,this.N=!1,this.X=null,this.F=!1,this.l=new Xi(function(){return function(e){var t,n,r,i,a,s;return L(function(o){if(1==o.g){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=g(e.h.values()),r=n.next();!r.done;r=n.next())ku(i=r.value),t.push(_u(i)),i.ha&&(Wl(i.ha),i.ha=null);for(a=g(e.m.values()),s=a.next();!s.done;s=a.next())Wl(s.value);return E(o,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,T(o)})}(n)}),this.R=Date.now()/1e3,this.m=new Map,this.T={projection:null,hfov:null},this.aa=0,this.$=1/0,this.H=null,this.O=[],this.u=new Tr(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var e=n.j.presentationTimeline.Xb(),t=n.j.presentationTimeline.Gb();t-e>1?function(e,t,n){L(function(r){return e.K.g||e.g.error||e.N||e.H||Po(e)||Oo(e)?r.return():E(r,Xo(e,function(){Po(e)||Oo(e)||e.i.setLiveSeekableRange(t,n)}),0)})}(n.g.Z,e,t):Go(n.g.Z)}else Go(n.g.Z),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new Tr(function(){var e=n.g.video;!e.ended&&n.I&&(n.J=!0,e.currentTime=n.I,n.I=null)}),this.G=new te}function ou(e,t){for(var n=e.g.Ob()<0,r=g(e.h.values()),i=r.next();!i.done;i=r.next())(i=i.value).ua&&i.ua.Id(n),i.ha&&i.ha.Id(n);for(i=(r=g(e.m.values())).next();!i.done;i=r.next())i.value.Id(n);(n=e.h.get("video"))&&(r=n.stream)&&(t?(t=r.trickModeVideo)&&!n.Mc&&(du(e,t,!1,0,!1),n.Mc=r):(t=n.Mc)&&(n.Mc=null,du(e,t,!0,0,!1)))}function lu(e,t,n,r,i,a){n=void 0!==n&&n,r=void 0===r?0:r,i=void 0!==i&&i,a=void 0!==a&&a,e.o=t,e.N&&(t.video&&du(e,t.video,n,r,i,a),t.audio&&du(e,t.audio,n,r,i,a))}function uu(e,t){L(function(n){if(1==n.g)return e.H=null,e.B=t,e.N?t.segmentIndex?n.A(2):E(n,t.createSegmentIndex(),2):n.return();du(e,t,!0,0,!1),T(n)})}function du(e,t,n,r,i,a){var s=e.h.get(t.type);s||t.type!=ot?s&&(s.Mc&&(t.trickModeVideo?(s.Mc=t,t=t.trickModeVideo):s.Mc=null),s.stream!=t||i)&&(e.m.has(t)?s.ha=e.m.get(t):s.ha&&function(e,t){t&&t!==e.i&&(Wl(e),e.i=t)}(s.ha,t),t.type==ot&&s.stream!=t&&(i=tr(t.mimeType,t.codecs),No(e.g.Z,i,e.j.sequenceMode,t.external)),!e.m.has(s.stream)&&s.stream.closeSegmentIndex&&(s.Ja?(i="("+s.type+":"+s.stream.id+")",e.M.has(i)||e.M.set(i,s.stream.closeSegmentIndex)):s.stream.closeSegmentIndex()),i=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.ua=null,s.cg=!!a,t.dependencyStream?s.Ec=fu(e,t.dependencyStream):s.Ec=null,Lu(e),i&&(s.pb=null,s.qc=null,s.nc=null,t.isAudioMuxedInVideo&&(t=null,"video"===s.type?t=e.h.get("audio"):"audio"===s.type&&(t=e.h.get("video")),t&&(_u(t).catch(function(){}),t.pb=null,t.qc=null,t.nc=null,hu(e,t),cu(e,t).catch(function(t){e.g&&e.g.onError(t)})))),n?s.Ub?s.Kd=!0:s.Ja?(s.ec=!0,s.ld=r,s.Kd=!0):(ku(s),Au(e,s,!0,r).catch(function(t){e.g&&e.g.onError(t)})):s.Ja||s.qb||Iu(e,s,0),cu(e,s).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,r,i,a,s;L(function(o){switch(o.g){case 1:return n=lt,e.V++,r=e.V,S(o,2),E(o,jo(e.g.Z,n.Na),4);case 4:A(o,3);break;case 2:i=I(o),e.g&&e.g.onError(i);case 3:a=tr(t.mimeType,t.codecs),No(e.g.Z,a,e.j.sequenceMode,t.external),(e.g.Z.aa.isTextVisible()||e.i.alwaysStreamText)&&e.V==r&&(s=fu(e,t),e.h.set(n.Na,s),Iu(e,s,0)),T(o)}})}(e,t)}function cu(e,t){var n,r,i;return L(function(a){if(1==a.g)return t.Va?(n=t.stream,r=t.Va,n.segmentIndex?a.A(2):E(a,n.createSegmentIndex(),2)):a.return();if(4!=a.g)return!(i=n.dependencyStream)||i.segmentIndex?a.A(4):E(a,i.createSegmentIndex(),4);if(t.Va!=r||t.stream!=n)return a.return();var s=e.g.lc(),o=Uo(e.g.Z,t.type),l=t.stream.segmentIndex.find(t.La?t.La.endTime:s),u=null==l?null:t.stream.segmentIndex.get(l);l=u?zs(u):null,u&&!l&&(l=(u.endTime-u.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),l?((u=u.ba)&&(l+=(u.endByte?u.endByte+1-u.startByte:null)||0),s=8*l/(u=e.g.getBandwidthEstimate())<(o||0)-s-e.i.rebufferingGoal||t.Va.h.g>l):s=!0,s&&t.Va.abort(),T(a)})}function hu(e,t){t.Ub||t.ec||(t.Ja?(t.ec=!0,t.ld=0):null==Fo(e.g.Z,t.type)?null==t.qb&&Iu(e,t,0):(ku(t),Au(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function fu(e,t){var n={stream:t,type:t.type,ua:null,ha:gu(e,t),La:null,pb:null,kf:null,qc:null,nc:null,hf:null,jf:null,Mc:null,endOfStream:!1,Ja:!1,qb:null,ec:!1,ld:0,Kd:!1,Ub:!1,bd:!0,cg:!1,ah:!1,Zd:!1,Va:null,Ec:null};return t.dependencyStream&&(n.Ec=fu(e,t.dependencyStream)),n}function gu(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===ot&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===ot&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ha)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new Hl(e.i.segmentPrefetchLimit,t,function(t,n,r){return wu(t,n,r||null,e.i.retryParameters,e.g.tc)},e.g.Ob()<0,e.g.al):null}function pu(t,n){var r,i,a,s,o,l,u,d,c;return L(function(h){switch(h.g){case 1:if(Qi(t.l),r=lt,n.Ja||null==n.qb||n.Ub)return h.return();if(n.qb=null,!n.ec){h.A(2);break}return E(h,Au(t,n,n.Kd,n.ld),3);case 3:return h.return();case 2:if(function(e,t){for(var n=g(e.M.entries()),r=n.next();!r.done;r=n.next()){var i=g(r.value);r=i.next().value,i=i.next().value,r.includes(t.type)&&(i(),e.M.delete(r))}}(t,n),n.stream.segmentIndex){h.A(4);break}return i=n.stream,S(h,5),E(h,n.stream.createSegmentIndex(),7);case 7:A(h,6);break;case 5:return a=I(h),E(h,Ru(t,n,a),8);case 8:return h.return();case 6:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.Ja||n.qb||Iu(t,n,0),h.return();case 4:if(!n.Ec){h.A(9);break}if(n.Ec.stream.segmentIndex){h.A(9);break}return S(h,11),E(h,n.Ec.stream.createSegmentIndex(),13);case 13:A(h,9);break;case 11:I(h);case 9:S(h,14),s=function(t,n){if(Tu(n))return function(e,t){var n=Uo(e,"video")||0;mr(e.h,t,n)}(t.g.Z,n.stream.originalId||""),null;if(n.type==ot&&function(e){e.h&&mr(e.h,"",0)}(t.g.Z),n.stream.isAudioMuxedInVideo&&"audio"==n.type)return null;if(n.type!=ot&&Oo(t.g.Z))return Cu(t,!0),null;var r=t.i.updateIntervalSeconds/Math.max(1,Math.abs(t.g.Ob()));if(!Mo(t.g.Z)&&n.type!=ot)return r/2;var i=t.g.lc();if("audio"===n.type)for(var a=g(t.m.keys()),s=a.next();!s.done;s=a.next())(s=t.m.get(s.value)).Ya(i,!0),Kl(s,i);a=n.La?n.La.endTime:i;var o=function(e,t,n){return t==ot?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):$s(e=zo(e,t),n)}(t.g.Z,n.type,i);s=Math.max(1,Math.max(t.i.rebufferingGoal,t.i.bufferingGoal)*t.C);var l=t.j.presentationTimeline.getDuration()-a,u=Uo(t.g.Z,n.type);if(l<1e-6&&u)return n.endOfStream=!0,"video"==n.type&&(t=t.h.get(ot))&&Tu(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,o>=s)return r/2;if(l=!n.ua,!(u=mu(t,n,i,u)))return r;o=n.pb;var d=u.ba;o&&d&&Fs(d,o)&&(o.g=d.g),o=!1,l&&n.cg&&(o=!0,n.cg=!1),l=1/0;for(var c=(d=g(d=Array.from(t.h.values()))).next();!c.done;c=d.next())Tu(c=c.value)||c.ua&&!c.ua.current()||(l=Math.min(l,c.La?c.La.endTime:i));return a>=l+t.j.presentationTimeline.h?r:(n.ha&&n.ua&&!t.m.has(n.stream)&&(n.ha.Ya(u.startTime+.001),Kl(n.ha,u.startTime).catch(function(){})),Du(t)&&function(e,t,n){if(t.type===ot)return!1;var r=t.pb;if(!r)return!1;var i=n.ba;if(n=r.g!==i.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(r.encrypted||i.encrypted||(n=!1),r.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&r.encrypted==i.encrypted&&(n=!1),"keep"===e.i.crossBoundaryStrategy&&r.mimeType&&i.mimeType){var a=ar(lr(r.mimeType)),s=ar(lr(r.mimeType));r.mimeType==i.mimeType&&a==s&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,Cu(e,!0).then(function(){var t=(new Map).set("oldEncrypted",r.encrypted).set("newEncrypted",i.encrypted);e.g.onEvent(new Mi("boundarycrossed",t))})),n}(t,n,u)||(function(t,n,r,i,a){var s,o,l,u,d,c,h,f,p,m,y,v,b,w,k,_;return L(function(R){switch(R.g){case 1:if(s=lt,o=n.stream,l=n.ua,n.Ja=!0,S(R,2),2==i.Jc())throw new Ue(1,1,1011);return E(R,function(e,t,n,r){var i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T;return L(function(w){switch(w.g){case 1:if(i=lt,a=null==t.La,s=[],o=Math.max(0,Math.max(n.appendWindowStart,e.aa)-.1),l=Math.min(n.appendWindowEnd,e.$)+.1,u=n.codecs||t.stream.codecs,d=sr(u),c=or(n.mimeType||t.stream.mimeType),(h=n.timestampOffset)==t.kf&&o==t.qc&&l==t.nc&&d==t.hf&&c==t.jf){w.A(2);break}if(f=t.hf&&t.jf&&function(e,t,n,r,i){return(e=tl(e,t,n,r,i)).dc&&e.dc.destroy(),e.type==al}(e.g.Z,t.type,c,u,Nu(e)),!f){w.A(3);break}if(p=null,t.type===i.Aa?p=e.h.get(i.ka):t.type===i.ka&&(p=e.h.get(i.Aa)),!p){w.A(3);break}return E(w,_u(p).catch(function(){}),5);case 5:p.pb=null,p.qc=null,p.nc=null,hu(e,p);case 3:return E(w,vu(e,t,h,o,l,n,d,c),2);case 2:return Fs(n.ba,t.pb)||(t.pb=n.ba,n.l&&n.ba&&(m=Su(e,t,n.ba),y=function(){var a,s,o,l,u,d,c,h,f,p,y;return L(function(v){switch(v.g){case 1:return S(v,2),E(v,m,4);case 4:return a=v.h,Qi(e.l),s=null,o=new Map,l={projection:null,hfov:null},t.stream&&(u=t.stream.videoLayout)&&((d=u.split("/")).includes("PROJ-RECT")?l.projection="rect":d.includes("PROJ-EQUI")?l.projection="equi":d.includes("PROJ-HEQU")?l.projection="hequ":d.includes("PROJ-PRIM")?l.projection="prim":d.includes("PROJ-AIV")&&(l.projection="hequ")),(c=new ia).box("moov",aa).box("trak",aa).box("mdia",aa).S("mdhd",function(e){s=ns(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.Yc()){case"soun":o.set(i.ka,s);break;case"vide":o.set(i.Aa,s)}s=null}),t.type!==i.Aa||l.projection||c.box("minf",aa).box("stbl",aa).S("stsd",sa).box("encv",oa).box("avc1",oa).box("avc3",oa).box("hev1",oa).box("hvc1",oa).box("dvav",oa).box("dva1",oa).box("dvh1",oa).box("dvhe",oa).box("dvc1",oa).box("dvi1",oa).box("vexu",aa).box("proj",aa).S("prji",function(e){e=e.reader.Yc(),l.projection=e}).box("hfov",function(e){e=e.reader.U()/1e3,l.hfov=e}),c.parse(a,!0,!0),t.type===i.Aa&&function(e,t){if(e.T.projection!=t.projection||e.T.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new Mi("spatialvideoinfo",n)}else n=new Mi("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.T=t}}(e,l),o.has(t.type)?n.ba.timescale=o.get(t.type):null!=s&&(n.ba.timescale=s),(h=t.stream.segmentIndex)instanceof Nl&&(f=function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())if(null!=(n=n.value).find(t))return n.Te();return-1}(h,n.startTime)),p=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,E(v,e.g.Oh(t.type,a),5);case 5:return E(v,Bo(e.g.Z,t.type,a,null,t.stream,p,t.bd,r,!1,!1,f),6);case 6:A(v,0);break;case 2:throw y=I(v),t.pb=null,y}})},v=n.startTime,a&&null!=(b=Uo(e.g.Z,t.type))&&(v=b),e.g.Ck(v,n.ba),s.push(y()))),T=t.La?t.La.i:-1,n.i!=T&&s.push(function(e,t,n){var r,i;return L(function(a){return 1==a.g?t==(r=lt).Na?a.return():(t==r.Aa&&(e.Ta=new ki),!e.I||(i=Uo(e,t))&&Math.abs(i-n)<.15?a.return():(Wo(e,t,function(){return Vo(e,t)},null),e.m&&Wo(e,r.ka,function(){return Vo(e,r.ka)},null),E(a,Wo(e,t,function(){return Ko(e,t,n)},null),2))):e.m?E(a,Wo(e,r.ka,function(){return Ko(e,r.ka,n)},null),0):a.A(0)})}(e.g.Z,t.type,n.startTime)),E(w,Promise.all(s),0)}})}(t,n,i,a),4);case 4:return Qi(t.l),t.F?R.return():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,d=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&d&&u&&("HLS"!=t.j.type||i.o)?(h=new Uint8Array(0),p=f=!1,y=function(e){var s,l,u;return L(function(d){switch(d.g){case 1:if(f)return d.return();if(p=!0,Qi(t.l),t.F)return d.return();if(S(d,2),h=et(h,e),s=!1,l=0,(new ia).box("mdat",function(e){l=e.size+e.start,s=!0}).parse(h,!1,!0),!s){d.A(4);break}return u=h.subarray(0,l),h=h.subarray(l),E(d,bu(t,n,r,o,i,u,!0,a),5);case 5:n.ha&&n.ua&&Kl(n.ha,i.startTime,!0);case 4:A(d,0);break;case 2:m=I(d),T(d)}})},E(R,Su(t,n,i,y),9)):E(R,Su(t,n,i),7));case 7:return c=R.h,Qi(t.l),t.F?R.return():(Qi(t.l),n.ec?(n.Ja=!1,Iu(t,n,0),R.return()):E(R,bu(t,n,r,o,i,c,!1,a),6));case 9:if(v=R.h,m)throw m;if(p){R.A(10);break}return f=!0,Qi(t.l),t.F?R.return():n.ec?(n.Ja=!1,Iu(t,n,0),R.return()):E(R,bu(t,n,r,o,i,v,!1,a),10);case 10:n.ha&&n.ua&&Kl(n.ha,i.startTime,!0);case 6:if(Qi(t.l),t.F)return R.return();n.La=i,l.next(),n.Ja=!1,n.ah=!1,b=t.g.Z.Fc(),w=b[n.type],JSON.stringify(w),n.ec||(k=null,n.type===s.Aa?k=t.h.get(s.ka):n.type===s.ka&&(k=t.h.get(s.Aa)),k&&k.type==s.ka?t.g.wf(i,n.stream,k.stream.isAudioMuxedInVideo):t.g.wf(i,n.stream,n.stream.codecs.includes(","))),ku(n),Iu(t,n,0),A(R,0);break;case 2:if(_=I(R),Qi(t.l,_),t.F)return R.return();if(n.Ja=!1,7001==_.code)n.Ja=!1,ku(n),Iu(t,n,0),R.A(0);else{if(n.type!=s.Na||!t.i.ignoreTextStreamFailures)return 3017==_.code?E(R,function(e,t,n){var r,i,a,s,o;return L(function(l){switch(l.g){case 1:if(Array.from(e.h.values()).some(function(e){return e!=t&&e.ah})){l.A(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return r=xu(e,n),e.g.disableStream(t.stream,r)||Iu(e,t,4),l.return();if((i=Math.round(100*e.C))>20){e.C-=.2,l.A(3);break}if(i>4){e.C-=.04,l.A(3);break}if(a=xu(e,n),!e.g.disableStream(t.stream,a)){t.Zd=!0,e.F=!0,e.g.onError(n),l.A(5);break}return e.C=1,s=e.g.lc(),E(l,Eu(e,t,s),5);case 5:return l.return();case 3:return t.ah=!0,o=e.g.lc(),E(l,Eu(e,t,o),2);case 2:Iu(e,t,4),T(l)}})}(t,n,_),0):(n.Zd=!0,1==_.category&&n.ha&&Jl(n.ha,i),_.severity=2,E(R,Ru(t,n,_),0));t.h.delete(s.Na),R.A(0)}}})}(t,n,i,u,o).catch(function(){}),n.Ec&&yu(t,n.Ec,i,s)),null)}(t,n),null!=s&&(Iu(t,n,s),n.Zd=!1),A(h,15);break;case 14:return o=I(h),E(h,Ru(t,n,o),16);case 16:return h.return();case 15:if(n.type===r.Na)return h.return();if(l=[],n.stream&&!n.stream.isAudioMuxedInVideo&&l.push(n),u=n.type===r.ka?r.Aa:r.ka,(d=t.h.get(u))&&d.stream&&!d.stream.isAudioMuxedInVideo&&l.push(d),!t.N||!l.every(function(e){return e.endOfStream})){h.A(0);break}return E(h,t.g.Z.endOfStream(),18);case 18:Qi(t.l),0!=(c=t.g.Z.getDuration())&&c<t.j.presentationTimeline.getDuration()&&t.j.presentationTimeline.Ab(c),T(h)}})}function mu(e,t,n,r){if(t.ua)return(n=t.ua.current())&&t.La&&Math.abs(t.La.startTime-n.startTime)<.001&&(n=t.ua.next().value),n;if(t.La||r)return n=t.La?t.La.endTime:r,e=e.g.Ob()<0,t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),t.ua&&t.ua.next().value;r=e.j.sequenceMode||Du(e)?0:e.i.inaccurateManifestTolerance;var i=Math.max(n-r,0);e=e.g.Ob()<0;var a=null;return r&&(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(i,!1,e)),a=t.ua&&t.ua.next().value),a||(t.stream.segmentIndex&&(t.ua=t.stream.segmentIndex.Vb(n,!1,e)),a=t.ua&&t.ua.next().value),a}function yu(e,t,n,r){var i,a,s,o,l,u,d,c,h,f;return L(function(g){switch(g.g){case 1:for(i=t.stream,o=(s=(a=i.segmentIndex)&&a.Vb(n))&&s.next().value;o&&e.O.includes(o.startTime);)o=s&&s.next().value;if(!o){g.A(0);break}if(!(l=o.ba)||Fs(l,t.pb)){g.A(3);break}return t.pb=l,S(g,4),E(g,Su(e,t,l),6);case 6:u=g.h;var m=e.g.Z;m.C&&ht(m.C,u,0,i),e.O=[],A(g,3);break;case 4:throw d=I(g),t.pb=null,d;case 3:if(t.La&&t.La==o){g.A(0);break}return t.La=o,S(g,8),E(g,Su(e,t,o),10);case 10:c=g.h,(m=e.g.Z).C&&ht(m.C,c,0,i),e.O.push(o.startTime),A(g,9);break;case 8:throw h=I(g),t.La=null,h;case 9:if(f=Math.max.apply(Math,[0].concat(p(e.O))),e.g.lc()+r>f)return E(g,yu(e,t,o.startTime,r),0);g.A(0)}})}function vu(e,t,n,r,i,a,s,o){var l,u,d,c,h;return L(function(f){switch(f.g){case 1:if(l=lt,u=Nu(e),S(f,2),t.qc=r,t.nc=i,s&&(t.hf=s),o&&(t.jf=o),t.kf=n,d=e.j.sequenceMode||"HLS"==e.j.type,c=null,t.type===l.Aa?c=e.h.get(l.ka):t.type===l.ka&&(c=e.h.get(l.Aa)),!(c&&c.stream&&c.stream.isAudioMuxedInVideo)){f.A(4);break}return E(f,qo(e.g.Z,c.type,n,r,i,d,c.stream.mimeType,c.stream.codecs,u),4);case 4:return E(f,qo(e.g.Z,t.type,n,r,i,d,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,u),6);case 6:A(f,0);break;case 2:throw h=I(f),t.qc=null,t.nc=null,t.hf=null,t.jf=null,t.kf=null,h}})}function bu(e,t,n,r,i,a,s,o){var l,u,d,c;return s=void 0!==s&&s,o=void 0!==o&&o,L(function(h){switch(h.g){case 1:return l=r.closedCaptions&&r.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(u="video/mp4"==r.mimeType||"audio/mp4"==r.mimeType,d=null,i.ba&&(d=i.ba.timescale),u&&d&&"video"===r.type&&"DASH"==e.j.type&&(new ia).box("moof",aa).box("traf",aa).S("tfdt",function(n){var r,a,s,o,l;return L(function(u){return r=ts(n.reader,n.version),(a=r.baseMediaDecodeTime)?(s=-a/d,(Number(t.kf)||0)<s?(o=t.qc,l=t.nc,E(u,vu(e,t,s,o,l,i),0)):u.A(0)):u.return()})}).parse(a,!1,s)),E(h,Eu(e,t,n),2);case 2:return Qi(e.l),c=t.bd,t.bd=!1,E(h,e.g.Oh(t.type,a),3);case 3:return E(h,Bo(e.g.Z,t.type,a,i,r,l,c,o,s),4);case 4:Qi(e.l),T(h)}})}function Eu(e,t,n){var r,i,a,s,o,l,u,d,c;return L(function(h){return 1==h.g?((r=t.stream.segmentIndex)instanceof Nl&&(r.Ya(e.j.presentationTimeline.Hb()),i=[],function(e,t){for(var n=(e=g(e.h)).next();!n.done;n=e.next())t(n.value)}(r,function(e){i.push(e.Te())})),a=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),null==(s=Fo(e.g.Z,t.type))?(e.H==t&&(e.H=null),h.return()):(o=n-s,l=e.i.evictionGoal,u=e.j.presentationTimeline.Xb(),d=e.j.presentationTimeline.Gb(),c=o-a,d-u>l&&(c=Math.max(o-a,u-l-s)),c<=l?h.return():E(h,e.g.Z.remove(t.type,s,s+c,i),2))):4!=h.g?(Qi(e.l),e.H?E(h,Eu(e,e.H,n),4):h.A(0)):(Qi(e.l),void T(h))})}function Tu(e){return e&&e.type==ot&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Su(e,t,n,r){var i,a,s,o,l;return L(function(u){switch(u.g){case 1:if(i=n.Yb())return u.return(i);if(a=null,t.ha){var d=t.ha,c=d.g;n instanceof Os&&(c=d.j),c.has(n)?(d=c.get(n),r&&(d.wh=r),a=d.je):a=null}return a||(a=wu(n,t.stream,r||null,e.i.retryParameters,e.g.tc)),s=0,t.ua&&(s=t.ua.h),t.Va=a,E(u,a.promise,2);case 2:if(o=u.h,t.Va=null,l=o.data,!n.aesKey){u.A(3);break}return E(u,iu(l,n.aesKey,s),4);case 4:l=u.h;case 3:return u.return(l)}})}function wu(e,t,n,r,i,a){a=void 0!==a&&a;var s=e instanceof Us?e:void 0,o=s?1:0;return(e=au(e.P(),e.startByte,e.endByte,r,n)).contentType=t.type,i.request($i,e,{type:o,stream:t,segment:s,isPreload:a})}function Au(e,t,n,r){var i,a;return L(function(s){return 1==s.g?(t.ec=!1,t.Kd=!1,t.ld=0,t.Ub=!0,t.La=null,t.ua=null,t.ha&&!e.m.has(t.stream)&&Wl(t.ha),r?(i=e.g.lc(),a=e.g.Z.getDuration(),E(s,e.g.Z.remove(t.type,i+r,a),3)):E(s,jo(e.g.Z,t.type),4)):3!=s.g?(Qi(e.l),n?E(s,e.g.Z.flush(t.type),3):s.A(3)):(Qi(e.l),t.Ub=!1,t.endOfStream=!1,t.Ja||t.qb||Iu(e,t,0),void T(s))})}function Iu(e,t,n){var r=t.type;(r!=ot||e.h.has(r))&&(t.qb=new Er(function(){var n;return L(function(r){return 1==r.g?(S(r,2),E(r,pu(e,t),4)):2!=r.g?A(r,0):(n=I(r),e.g&&e.g.onError(n),void T(r))})}).ia(n))}function ku(e){null!=e.qb&&(e.qb.stop(),e.qb=null)}function _u(e){return L(function(t){return e.Va?E(t,e.Va.abort(),0):t.A(0)})}function Ru(e,t,n){var r;return L(function(i){if(1==i.g)return 3024==n.code?(t.Ja=!1,ku(t),Iu(e,t,0),i.return()):E(i,Ai(e.X),2);if(Qi(e.l),1===n.category&&1003!=n.code){if(t.Mc)return ou(e,!1),i.return();r=xu(e,n),n.handled=e.g.disableStream(t.stream,r),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),T(i)})}function xu(e,t){return 0===e.i.maxDisabledTime&&1011==t.code?1:e.i.maxDisabledTime}function Cu(e,t){var n,r,i,a,s,o;return t=void 0!==t&&t,L(function(l){if(1==l.g){if(n=Date.now()/1e3,r=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<r)return l.return(!1);e.R=n}return i=lt,(a=e.h.get(i.ka))&&(ku(a),a.Va&&(a.Va.abort(),a.Va=null),a.pb=null,a.qc=null,a.nc=null,a.Ja=!1,a.ec=!1,a.ld=0,a.Kd=!1,a.Ub=!1,a.ua&&a.ua.eh()),(s=e.h.get(i.Aa))&&(ku(s),s.Va&&(s.Va.abort(),s.Va=null),s.pb=null,s.qc=null,s.nc=null,s.Ja=!1,s.ec=!1,s.ld=0,s.Kd=!1,s.Ub=!1,s.ua&&s.ua.eh()),o=e.g.video.paused,E(l,Zo(e.g.Z,Nu(e)),2)}return!s||s.Ub||s.Ja||s.qb||Iu(e,s,0),!a||a.Ub||a.Ja||a.qb||Iu(e,a,0),o||e.g.video.play(),l.return(!0)})}function Du(e){if("keep"!==e.i.crossBoundaryStrategy)return!0;var t=ae();if(mt()&&t.Pc()){if(!t.Jf())for(n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==lt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,n=(t=g(n.fullMimeTypes)).next();!n.done;n=t.next())e.add(ir(n.value));return e.size>1}}else for(var n=(t=g(e.h.keys())).next();!n.done;n=t.next())if((n=e.h.get(n.value)).type!==lt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0;return!1}function Lu(e){e.G.Pa(),Du(e)&&(e.G.D(e.g.video,"waiting",function(){return Mu(e)}),e.G.D(e.g.video,"timeupdate",function(){return Mu(e)}))}function Mu(e){if(Du(e)){e.K.stop();var t=e.g.lc(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.pb)&&null!==n.g&&((t=n.g-t)<0||t>1||(e.I=n.g+.1,e.K.ia(t)))}}function Nu(e,t){function n(t){if(t.fullMimeTypes&&t.fullMimeTypes.size>1&&e.h.has(t.type)){var n=e.h.get(t.type),r=Uo(e.g.Z,n.type),i=e.g.lc();(n=mu(e,n,i,r))&&n.codecs&&n.mimeType&&(t.codecs=n.codecs,t.mimeType=n.mimeType)}}t=void 0!==t&&t;var r=new Map,i=e.o.audio;return i&&(n(i),r.set("audio",i)),(i=e.o.video)&&(n(i),r.set("video",i)),t&&e.B&&r.set(ot,e.B),r}function Pu(){}function Ou(e,t,n,r,i){var a,s=i in r,o=s?n.constructor==Object&&0==Object.keys(r).length:n.constructor==Object&&0==Object.keys(n).length,l=s||o,u=!0;for(a in t){var d=i+"."+a,c=s?r[i]:n[a];l||a in n?void 0===t[a]?void 0===c||l?delete e[a]:e[a]=Ut(c):o?e[a]=t[a]:c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ut(c)),d=Ou(e[a],t[a],c,r,d),u=u&&d):typeof t[a]!=typeof c||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=c.constructor?(V("Invalid config, wrong type for "+d),u=!1):"function"==typeof n[a]&&n[a].length!=t[a].length?(K("Unexpected number of arguments for "+d),e[a]=t[a]):e[a]=Array.isArray(e[a])?t[a].slice():t[a]:(V("Invalid config, unrecognized key "+d),u=!1)}return u}function Fu(e,t){for(var n={},r=n,i=0,a=0;!((i=e.indexOf(".",i))<0);)0!=i&&"\\"==e[i-1]||(r[a=e.substring(a,i).replace(/\\\./g,".")]={},r=r[a],a=i+1),i+=1;return r[e.substring(a).replace(/\\\./g,".")]=t,n}function Uu(e,t){return e&&t}function zu(e,t){function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}return e=function e(t,r){return Object.keys(t).reduce(function(i,a){var s=t[a];return r.hasOwnProperty(a)?s instanceof HTMLElement&&r[a]instanceof HTMLElement?s.isEqualNode(r[a])||(i[a]=s):n(s)&&n(r[a])?(s=e(s,r[a]),(Object.keys(s).length>0||!n(s))&&(i[a]=s)):Array.isArray(s)&&Array.isArray(r[a])?J(s,r[a])||(i[a]=s):Number.isNaN(s)&&Number.isNaN(r[a])||s!==r[a]&&(i[a]=s):i[a]=s,i},{})}(e,t),function e(t){for(var r=g(Object.keys(t)),i=r.next();!i.done;i=r.next())if(!(t[i=i.value]instanceof HTMLElement))if(n(t[i])&&0===Object.keys(t[i]).length)delete t[i];else{var a=t[i];Array.isArray(a)&&0===a.length||"function"==typeof t[i]?delete t[i]:n(t[i])&&(e(t[i]),0===Object.keys(t[i]).length&&delete t[i])}}(e),e}function Bu(){}function ju(e){return new pe(e=qe(e)).Db}function qu(e,t,n){function r(e){Oe(a).setUint32(s,e.byteLength,!0),s+=4,a.set(Ne(e),s),s+=e.byteLength}if(!n||!n.byteLength)throw new Ue(2,6,6015);var i;i="string"==typeof t?He(t,!0):t,e=He(e=qe(e),!0);var a=new Uint8Array(12+e.byteLength+i.byteLength+n.byteLength),s=0;return r(e),r(i),r(n),a}function Gu(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=qe(e).split("skd://").pop(),t))}function Hu(e,t){2===e&&(e=t.drmInfo)&&bi(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function Vu(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=(e=g(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n)}function Ku(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return sr(e)}),t=t.codecs.split(",").map(function(e){return sr(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function $u(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=g(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function Yu(){this.h=this.g=null}function Wu(e,t){return e.filter(function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)}).sort(function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0})}function Xu(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}function Qu(){}function Ju(){var t=1/0,n=ae();navigator.connection&&navigator.connection.saveData&&(t=360);var r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,r){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=r.serverCertificate,t=qu(t,r=ju(t),n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";mt()&&n.Pc()&&(i="smooth");var a={trackSelectionCallback:function(e){return L(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return L(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?E(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return Uu([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:r,manifest:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:td,manifestPreprocessorTXml:nd,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:td,manifestPreprocessorTXml:nd,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Uu([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(e){return Uu([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return Uu([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:a,abrFactory:function(){return new hi},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Yu,[null].concat(p(M.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return a.trackSelectionCallback=function(e){return L(function(t){return t.return(function(e,t,n){var r=n;"AUTO"==r&&(n=e.some(function(e){return!(!e.hdr||"HLG"!=e.hdr)}),r=ae().sd(n));var i=e.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=r)});n=[];var a=Nr(t,i.map(function(e){return e.language}));a&&(n=i.filter(function(e){return Cr(e.language)==a})),0==n.length&&(n=i.filter(function(e){return e.primary})),0==n.length&&(i.map(function(e){return e.language}),n=i);var s=n.filter(function(e){return e.height&&e.height<=480});for(s.length&&(s.sort(function(e,t){return t.height-e.height}),n=s.filter(function(e){return e.height==s[0].height})),t=[],n.length&&(i=Math.floor(n.length/2),n.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(n[i])),e=g(e),n=e.next();!n.done;n=e.next())(n=n.value).type!=ot&&"image"!=n.type||t.push(n);return t}(e,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},n.Wa(s)}function Zu(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function ed(e,t,n){var r={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Ou(e,t,n||Ju(),r,"")}function td(e){return Uu([e],e)}function nd(e){return Uu([e],e)}function rd(){this.g=null,this.h=[]}function id(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var r=(e=g(e.h)).next();!r.done;r=e.next())n+=(r=r.value).state==t?r.duration:0;return n}function ad(){this.i=this.h=null,this.g=[]}function sd(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function od(){this.C=this.X=NaN,this.l="",this.j=this.ni=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.T=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new rd,this.h=new ad}function ld(e,t,n){e.X=t,e.C=n}function ud(e,t){e.j=isNaN(e.j)?t:e.j+t}function dd(e){for(var t=e.X,n=e.C,r=e.l,i=e.B,a=e.O,s=e.R,o=e.N,l=e.V,u=e.T,d=e.u,c=e.i,h=e.G,f=e.J,p=e.m,m=id(e.g,"playing"),y=id(e.g,"paused"),v=id(e.g,"buffering"),b=e.o,E=e.F,T=e.K,S=e.ni,w=e.j,A=e.M,I=e.I,k=e.H,_=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],r=g(e.h),i=r.next();!i.done;i=r.next())n.push(t(i.value));return e.g&&n.push(t(e.g)),n}(e.g),R=[],x=(e=g(e.h.g)).next();!x.done;x=e.next())x=x.value,R.push({timestamp:x.timestamp,id:x.id,type:x.type,fromAdaptation:x.fromAdaptation,bandwidth:x.bandwidth});return{width:t,height:n,currentCodecs:r,streamBandwidth:i,decodedFrames:a,droppedFrames:s,corruptedFrames:o,stallsDetected:l,gapsJumped:u,estimatedBandwidth:d,completionPercent:c,loadLatency:h,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:m,pauseTime:y,bufferingTime:v,licenseTime:b,liveLatency:E,maxSegmentDuration:T,manifestSizeBytes:S,bytesDownloaded:w,nonFatalErrorCount:A,manifestPeriodCount:I,manifestGapCount:k,stateHistory:_,switchHistory:R}}function cd(e,t,n,r){Oi.call(this),this.N=e,this.V=t,this.Da=r.networkingEngine,this.m=n,this.C=null,this.ya=0,this.Sa=r.md,this.G=r.vk,this.Ta=r.wk,this.g=r.config,this.l=this.H=this.h=null,this.oa=!1,this.I=r.Hk,this.va=!1,this.i=null,this.aa=!1,this.u=null,this.M=new Map,this.xa=!1,this.Fa=r.Gk,this.X=new od,this.ma=new ki,this.B=new ki,this.O=null,this.j=!1,this.$=r.ij,this.T=this.o=null,this.R=!1,this.K=[],this.J=[],this.F=!0}function hd(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function fd(e,t){if(e.O=t,e.R=!0,e.K)for(var n=(t=g(e.K)).next();!n.done;n=t.next())(n=n.value)();e.K=null}function gd(e){if(e.j)throw new Ue(2,7,7003)}function pd(e,t){e.dispatchEvent(new Mi("onstatechange",(new Map).set("state",t)))}function md(e,t){var n,r,i;return L(function(a){switch(a.g){case 1:return!e.h||e.i?a.return():(pd(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Sa(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.F}),n=ei(e.h.variants),r=!0,e.h&&e.h.presentationTimeline&&(r=e.h.presentationTimeline.W()),E(a,va(e.i,n,e.h.offlineSessionIds,r),2));case 2:if(gd(e),!t){a.A(3);break}return E(a,e.i.fc(t),4);case 4:gd(e);case 3:return E(a,Ha(e.G,e.h),5);case 5:if(!a.h){a.A(0);break}return i=new Mi("trackschanged",void 0),E(a,Promise.resolve(),7);case 7:e.dispatchEvent(i),T(a)}})}function yd(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=ei(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function vd(e,t,n){var r,i,a,s,o;return L(function(l){return 1==l.g?(r=e.g.streaming.segmentPrefetchLimit||2,i=new Hl(r,t,function(t,n,r){return wu(t,n,r||null,e.g.streaming.retryParameters,e.Da,e.F)},!1),e.M.set(t.id,i),t.segmentIndex?l.A(2):E(l,t.createSegmentIndex(),2)):(a="number"==typeof e.m?e.m:0,s=t.segmentIndex.Vb(a),o=null,s&&((o=s.current())||(o=s.next().value)),o||(o=Dl(t.segmentIndex)),o?n?o.ba?E(l,$l(i,o.ba),0):l.A(0):E(l,Kl(i,o.startTime),0):l.A(0))})}function bd(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function Ed(e,t){Oi.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:wd,Uc:function(e,t){return Td(n,"enter",e,t)}},{kd:Sd,jd:wd,Uc:function(e,t){return Td(n,"enter",e,t)}},{kd:Ad,jd:wd,Uc:function(e,t){return Td(n,"enter",e,t)}},{kd:wd,jd:Sd,Uc:function(e,t){return Td(n,"exit",e,t)}},{kd:wd,jd:Ad,Uc:function(e,t){return Td(n,"exit",e,t)}},{kd:Sd,jd:Ad,Uc:function(e,t){t?Td(n,"skip",e,t):(Td(n,"enter",e,t),Td(n,"exit",e,t))}},{kd:Ad,jd:Sd,Uc:function(e,t){return Td(n,"skip",e,t)}}],this.h=new te,this.h.D(this.i,"regionremove",function(e){n.g.delete(e.region)})}function Td(e,t,n,r){t=new Mi(t,new Map([["region",n],["seeking",r]])),e.dispatchEvent(t)}pl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},El.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(r=Sl.prototype).ready=function(){var e=this;fl(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){!function(){if(null==e.h||0==e.h&&e.g.duration!=1/0)e.i=!0;else{var t=e.g.currentTime,n=null;if("number"==typeof e.h)n=e.h;else if(e.h instanceof Date){var r=wl(e);null!==r&&(n=e.h.getTime()/1e3-r,n=Al(e,n))}null==n?e.i=!0:(n<0&&(n=Math.max(0,t+n)),t!=n?(e.j.Ba(e.g,"seeking",function(){e.i=!0}),e.g.currentTime=n):e.i=!0)}}()})},r.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},r.Wf=function(e){this.h=this.i?this.h:e},r.He=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=Al(this,e=e.getTime()/1e3-(wl(this)||0))),e||0},r.Ih=function(){return 0},r.Gh=function(){return 0},r.Hh=function(){return!1},r.xi=function(){},r.ki=function(){var e=Vs(this.g.buffered);return null!=e&&e>=this.g.duration-1},(r=Il.prototype).ready=function(){this.m.Ea(.25)},r.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},r.Wf=function(e){yl(this.j,kl(this,e))},r.He=function(){var e=ml(this.j);return this.h.readyState>0&&!this.h.paused?xl(this,e):e},r.Ih=function(){return this.i.H},r.Gh=function(){return this.i.G},r.Hh=function(){return this.i.C},r.xi=function(){this.i.wf()},r.ki=function(){if(this.g.W()){var e=this.g.Hc(),t=Vs(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},(r=Cl.prototype).getNumReferences=function(){return this.g.length},r.getNumEvicted=function(){return this.i},r.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},r.yk=function(){this.o=!0},r.Fb=function(e){for(var t=g(this.g),n=t.next();!n.done;n=t.next())e(n.value)},r.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var r=this.g[n],i=n<t?this.g[n+1].startTime:r.endTime;if(e>=r.startTime&&e<i)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},r.get=function(e){return 0==this.g.length||(e-=this.i)<0||e>=this.g.length?null:this.g[e]},r.offset=function(e){if(!this.o)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},r.nf=function(e){if(!this.o&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,p(e))}},r.fe=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.nf(e),this.Ya(t)},r.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.i+=t-this.g.length}},r.pd=function(e,t,n){if(n=void 0!==n&&n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&((t=new Us((e=this.g[this.g.length-1]).startTime,t,e.C,e.startByte,e.endByte,e.ba,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},r.Nf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new Tr(function(){var e=t();e?n.g.push.apply(n.g,p(e)):(n.m.stop(),n.m=null)}),this.m.Ea(e))},Cl.prototype[Symbol.iterator]=function(){return this.Vb(0)},Cl.prototype.Vb=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var r=this.find(e);if(null==r)return null;var i=this.get(r);n?r++:r--;var a=-1;if(i&&i.g.length>0)for(var s=i.g.length-1;s>=0;--s){var o=i.g[s];if(e>=o.startTime&&e<o.endTime){if(!t){for(;s&&!o.l;)s--,o=i.g[s];if(!o.l)return V("No independent partial segment found!"),null}n?r--:r++,a=s-1;break}}return new Ml(this,r,a,n)},Cl.prototype.Te=function(){return-1},B("shaka.media.SegmentIndex",Cl),Cl.forSingleSegment=Ll,Cl.prototype.getIteratorForTime=Cl.prototype.Vb,Cl.prototype.updateEvery=Cl.prototype.Nf,Cl.prototype.fit=Cl.prototype.pd,Cl.prototype.evict=Cl.prototype.Ya,Cl.prototype.mergeAndEvict=Cl.prototype.fe,Cl.prototype.offset=Cl.prototype.offset,Cl.prototype.get=Cl.prototype.get,Cl.prototype.find=Cl.prototype.find,Cl.prototype.markImmutable=Cl.prototype.yk,Cl.prototype.release=Cl.prototype.release,Cl.prototype.getNumEvicted=Cl.prototype.getNumEvicted,Cl.prototype.getNumReferences=Cl.prototype.getNumReferences,(r=Ml.prototype).Id=function(e){this.reverse=e},r.tj=function(){return this.h},r.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},r.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},r.eh=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},B("shaka.media.SegmentIterator",Ml),Ml.prototype.resetToLastIndependent=Ml.prototype.eh,Ml.prototype.next=Ml.prototype.next,Ml.prototype.current=Ml.prototype.current,Ml.prototype.currentPosition=Ml.prototype.tj,Ml.prototype.setReverse=Ml.prototype.Id,h(Nl,Cl),(r=Nl.prototype).clone=function(){var e=new Nl;return e.h=this.h.slice(),e.i=this.i,e},r.release=function(){this.h=[]},r.Fb=function(e){for(var t=g(this.h),n=t.next();!n.done;n=t.next())n.value.Fb(e)},r.find=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){var i=(r=r.value).find(e);if(null!=i)return i+t;t+=r.getNumEvicted()+r.getNumReferences()}return null},r.get=function(e){for(var t=this.i,n=g(this.h),r=n.next();!r.done;r=n.next()){var i=(r=r.value).get(e-t);if(i)return i;i=r.getNumReferences(),t+=r.getNumEvicted()+i}return null},r.offset=function(){},r.nf=function(){},r.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),0==t.getNumReferences()&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},r.fe=function(){},r.pd=function(){},r.Nf=function(){},B("shaka.media.MetaSegmentIndex",Nl),Nl.prototype.updateEvery=Nl.prototype.Nf,Nl.prototype.fit=Nl.prototype.pd,Nl.prototype.mergeAndEvict=Nl.prototype.fe,Nl.prototype.evict=Nl.prototype.Ya,Nl.prototype.merge=Nl.prototype.nf,Nl.prototype.offset=Nl.prototype.offset,Nl.prototype.get=Nl.prototype.get,Nl.prototype.find=Nl.prototype.find,Nl.prototype.forEachTopLevelReference=Nl.prototype.Fb,Nl.prototype.release=Nl.prototype.release,Pl.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},Pl.prototype.set=function(e){this.i=e,Ol(this)},Pl.prototype.Tc=function(){return this.g.Tc()},Fl.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},h(zl,Oi),zl.prototype.release=function(){this.g.clear(),Oi.prototype.release.call(this)},zl.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){var r=(n=n.value).lg;e:{for(var i=n.me,a=i.length-1;a>=0;a--){var s=i[a];if(s.position<=e){i=s.xd;break e}}i=null}a=i&&!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width),s=i&&r&&i.label&&r.label&&r.label!==i.label;var o=i&&r&&i.language&&r.language&&r.language!==i.language;r=i&&r&&i.roles&&r.roles&&!Z(r.roles,i.roles),(s||o||r)&&Bl(this,e,i.contentType)&&(n.lg=i,r=new Mi("audiotrackchange",new Map([["quality",i],["position",e]])),this.dispatchEvent(r)),a&&Bl(this,e,i.contentType)&&(n.lg=i,JSON.stringify(i),n=new Mi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},h(ql,Oi),ql.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Oi.prototype.release.call(this)},Hl.prototype.Ya=function(e,t){t=void 0!==t&&t;for(var n=g(this.g.keys()),r=n.next();!r.done;r=n.next())e>(r=r.value).endTime&&Jl(this,r);t&&Xl(this)},Hl.prototype.Id=function(e){this.o=e,this.h&&this.h.Id(e)},Zl.prototype.abort=function(){this.je&&this.je.abort()},B("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"}),(r=su.prototype).destroy=function(){return this.l.destroy()},r.configure=function(e){if(this.i=e,this.X=new wi({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ha&&(Wl(t.ha),t.ha=null);for(var n=(t=g(this.m.keys())).next();!n.done;n=t.next())n=n.value,Wl(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(ot))&&t.ha&&(Wl(t.ha),t.ha=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ha&&(Wl(t.ha),t.ha=null),n=(t=g(this.h.keys())).next();!n.done;n=t.next())(n=this.h.get(n.value)).ha?(Ql(n.ha,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Wl(n.ha),n.ha=null)):e.segmentPrefetchLimit>0&&(n.ha=gu(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,r=g(e.j.variants),i=r.next(),a={};!i.done;a={Mb:void 0},i=r.next())if(a.Mb=i.value,a.Mb.audio)if(e.m.has(a.Mb.audio)){if(Ql(i=e.m.get(a.Mb.audio),t),!(t>0&&n.some(function(e){return function(t){return _r(e.Mb.audio.language,t)}}(a)))){var s=e.h.get(a.Mb.audio.type);i!==(s&&s.ha)&&Wl(i),e.m.delete(a.Mb.audio)}}else t<=0||!n.some(function(e){return function(t){return _r(e.Mb.audio.language,t)}}(a))||!(i=gu(e,a.Mb.audio))||(a.Mb.audio.segmentIndex||a.Mb.audio.createSegmentIndex(),e.m.set(a.Mb.audio,i))}(this)},r.start=function(e){var t=this;return L(function(n){if(1==n.g)return E(n,function(e,t){var n,r,i,a,s,o,l;return L(function(u){if(1==u.g){if(!e.o)throw new Ue(2,5,5006);return n=Nu(e,!0),E(u,e.g.Z.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Qi(e.l),e.updateDuration(),r=g(n.keys()),i=r.next();!i.done;i=r.next())a=i.value,s=n.get(a),e.h.has(a)||(o=fu(e,s),t.has(s.id)&&(Vl(l=t.get(s.id),function(t,n,r){return wu(t,n,r||null,e.i.retryParameters,e.g.tc)}),o.ha=l),e.h.set(a,o),Iu(e,o,0));Lu(e),T(u)})}(t,e||new Map),2);Qi(t.l),t.N=!0,T(n)})},r.bd=function(){if(this.g){for(var e=this.g.lc(),t=g(this.h.keys()),n=t.next();!n.done;n=t.next()){var r,i=n.value;if(n=this.h.get(i),(r=!this.J)&&(r=this.g.Z,r=!(r=i==ot?null!=(r=r.h).g&&null!=r.h&&e>=r.g&&e<r.h:Ks(r=zo(r,i),e))),r){if(this.R=0,n.ha&&(n.ha.h=null),"audio"===n.type)for(var a=(r=g(this.m.values())).next();!a.done;a=r.next())a.value.h=null;n.ua=null,(null!=Uo(this.g.Z,i)||n.Ja)&&hu(this,n),n.Va&&(n.Va.abort(),n.Va=null),i===ot&&(i=this.g.Z).J&&i.J.Nd(),n.bd=!0}!this.J||n.Ub||n.Ja||n.qb||Iu(this,n,0)}Du(this)&&Mu(this)}},r.updateDuration=function(){var e=yt(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Go(this.g.Z)),this.g.Z.Ab(t)):e?(this.u&&this.u.Ea(.5),this.g.Z.Ab(1/0)):this.g.Z.Ab(4294967296)},B("shaka.util.ConfigUtils",Pu),Pu.getDifferenceFromConfigObjects=zu,Pu.convertToConfigObject=Fu,Pu.mergeConfigObjects=Ou,B("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),B("shaka.drm.FairPlay",Bu),Bu.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&bi(e.keySystem)){try{var n=Be(t.data)}catch(i){return}if(e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var r=JSON.parse(n);r.ckc&&(n=r.ckc,e=!0),r.CkcMessage&&(n=r.CkcMessage,e=!0),r.License&&(n=r.License,e=!0)}catch(i){}e&&(t.data=Me(Qe(n)))}},Bu.muxFairPlayRequest=function(e,t){Hu(e,t)},Bu.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&bi(n.keySystem)&&Hu(e,t)}},Bu.conaxFairPlayRequest=function(e,t){Hu(e,t)},Bu.ezdrmFairPlayRequest=function(e,t){Hu(e,t)},Bu.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&bi(e.keySystem)&&(e=Xe(e=Ne(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ge("spc="+e))},Bu.muxInitDataTransform=function(e,t,n){return Gu(e,t,n)},Bu.expressplayInitDataTransform=function(e,t,n){return Gu(e,t,n)},Bu.conaxInitDataTransform=function(t,n,r){if("skd"!==n)return t;n=r.serverCertificate,r=qe(t).split("skd://").pop().split("?").shift(),r=e.atob(r);var i=new ArrayBuffer(2*r.length);i=Pe(i);for(var a=0,s=r.length;a<s;a++)i[a]=r.charCodeAt(a);return qu(t,i,n)},Bu.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,qu(e,n=qe(e).split(";").pop(),t))},Bu.verimatrixInitDataTransform=function(e,t,n){return Gu(e,t,n)},Bu.initDataTransform=qu,Bu.defaultGetContentId=ju,Bu.isFairPlaySupported=function(){var e;return L(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},S(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(I(t),t.return(!1))})},Vu.prototype.add=function(e,t){var n,r=this.h;if(t=void 0===t||t,!(n=!!r.audio!=!!e.audio||!!r.video!=!!e.video||r.language!=e.language)&&(n=r.audio&&e.audio)){n=r.audio;var i=e.audio;n=!(!((!n.channelsCount||!i.channelsCount||n.channelsCount>2||i.channelsCount>2)&&n.channelsCount!=i.channelsCount||n.spatialAudio!==i.spatialAudio||t&&!Ku(n,i))&&$u(n.roles,i.roles)&&n.groupId===i.groupId)}return!n&&(n=r.video&&e.video)&&(r=r.video,n=e.video,n=!((!t||Ku(r,n))&&$u(r.roles,n.roles))),!n&&(this.g.add(e),!0)},Vu.prototype.values=function(){return this.g.values()},B("shaka.media.AdaptationSet",Vu),Yu.prototype.configure=function(e){this.g=e},Yu.prototype.getConfiguration=function(){return this.g},Yu.prototype.create=function(e){var t;if(this.g.language){var n=function(e,t){var n=Nr(t=Cr(t),e.map(function(e){return Mr(e)}));return n?e.filter(function(e){return n==Mr(e)}):[]}(e,this.g.language);n.length&&(t=n)}t||(t=(t=e.filter(function(e){return e.primary})).length?t:e),e=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(t,this.g.role),e.length&&(t=e),e=function(e,t){return e.filter(function(e){return!!e.video&&(t?e.video.roles.includes(t):0==e.video.roles.length)})}(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=function(e,t){if("AUTO"==t){var n=e.some(function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)});t=ae().sd(n)}return e.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==t})}(t,this.g.hdrLevel),e.length&&(t=e));var r=[this.g.channelCount,this.g.preferredAudioChannelCount];if((e=r.filter(function(e,t){return e&&r.indexOf(e)===t})).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Wu(t,n.value)).length){t=n;break}this.g.audioLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(t,this.g.videoLabel),e.length&&(t=e)),e=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(t,this.g.spatialAudio),e.length&&(t=e);var i=[this.g.audioCodec,this.g.activeAudioCodec].concat(p(this.g.preferredAudioCodecs));if((e=i.filter(function(e,t){return e&&i.indexOf(e)===t})).length)for(n=(e=g(e)).next();!n.done;n=e.next())if((n=Xu(t,n.value)).length){t=n;break}return this.h=new Vu(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&mt()))},Yu.prototype.getLastAdaptationSet=function(){return this.h},B("shaka.util.PlayerConfiguration",Qu),Qu.mergeConfigObjects=ed,Qu.createDefaultForLL=Zu,Qu.createDefault=Ju,h(cd,Oi),(r=cd.prototype).getStartTime=function(){return this.m},r.rd=function(){return this.N},r.Hg=function(){return this.h},r.getStats=function(){return this.X},r.Rj=function(){return this.o?$r(this.o):null},r.Qj=function(){return this.T?Yr(this.T):null},r.start=function(){var t,n=this;L(function(r){switch(r.g){case 1:return E(r,Promise.resolve(),2);case 2:return S(r,3),E(r,function(e){var t,n,r,i,a;return L(function(s){switch(s.g){case 1:if(pd(e,"manifest-parser"),e.l||(e.H=Ja(e.N,e.V),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,pd(e,"manifest"),e.h){s.A(2);break}return E(s,e.l.start(e.N,e.Ta),3);case 3:return e.h=s.h,bd(e.h),E(s,function(e){var t,n,r,i,a;return L(function(s){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:e.g.preferredAudioChannelCount,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),1!=e.h.variants.length&&"HLS"!=e.h.type)return s.A(0);if(!(t=yd(e)))return s.A(0);for(n=[],r=g([t.video,t.audio]),i=r.next();!i.done;i=r.next())(a=i.value)&&!a.segmentIndex&&n.push(a.createSegmentIndex());return n.length>0?E(s,Promise.all(n),0):s.A(0)})}(e),2);case 2:return e.ma.resolve(),n=new Mi("manifestparsed",void 0),E(s,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),0==e.h.variants.length)throw new Ue(2,4,4036);if(bd(e.h),!Va(e.G,e.h)){s.A(6);break}return r=new Mi("trackschanged",void 0),E(s,Promise.resolve(),7);case 7:gd(e),e.dispatchEvent(r);case 6:i=Date.now()/1e3,a=i-t,e.X.J=a,T(s)}})}(n),5);case 5:if(gd(n),"webkit"===e.shakaMediaKeysPolyfill){r.A(6);break}return E(r,md(n),7);case 7:gd(n);case 6:if(!n.$){r.A(8);break}return E(r,function(e){var t,n,r,i,a;return L(function(s){return!e.o&&(t=yd(e))&&(e.o=t),e.o?(n=e.h.presentationTimeline.W(),r=[],(i=e.o).video&&r.push(vd(e,i.video,n)),i.audio&&r.push(vd(e,i.audio,n)),(a=ti(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&si(i.audio,a,e.g)&&(r.push(vd(e,a,n)),e.T=a),E(s,Promise.all(r),0)):s.A(0)})}(n),9);case 9:gd(n);case 8:if(!n.$||!n.i){r.A(10);break}return E(r,function(e){return L(function(t){return 1==t.g?e.K?E(t,e.m,3):t.A(0):E(t,Promise.all(e.X.map(function(e){return e.promise})),0)})}(n.i),11);case 11:gd(n);case 10:n.B.resolve(),A(r,0);break;case 3:(t=I(r))instanceof Ue&&(7001==t.code||7003==t.code)||n.B.reject(t),T(r)}})},r.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Oi.prototype.dispatchEvent.call(this,e)},r.onError=function(e){2===e.severity&&(this.B.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new Mi("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},r.configure=function(e,t){e=Fu(e,t),ed(this.g,e)},r.getConfiguration=function(){return Ut(this.g)},r.ll=function(){return this.B},r.destroy=function(){var e,t,n=this;return L(function(r){if(1==r.g)return n.j=!0,!n.l||n.oa?r.A(2):E(r,n.l.stop(),2);if(4!=r.g)return n.u&&n.u.release(),n.I&&!n.va&&n.I.release(),!n.i||n.aa?r.A(4):E(r,n.i.destroy(),4);if(n.M.size>0&&!n.xa)for(e=g(n.M.values()),t=e.next();!t.done;t=e.next())Wl(t.value);T(r)})},B("shaka.media.PreloadManager",cd),cd.prototype.destroy=cd.prototype.destroy,cd.prototype.waitForFinish=cd.prototype.ll,cd.prototype.getPrefetchedTextTrack=cd.prototype.Qj,cd.prototype.getPrefetchedVariantTrack=cd.prototype.Rj,h(Ed,Oi),Ed.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Oi.prototype.release.call(this)},Ed.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=g(this.i.h.values()),r=n.next();!r.done;r=n.next()){r=r.value;var i=this.g.get(r),a=e<r.startTime?Sd:e>r.endTime?Ad:wd;this.g.set(r,a);for(var s=g(this.m),o=s.next();!o.done;o=s.next())(o=o.value).kd==i&&o.jd==a&&o.Uc(r,t)}}};var Sd=1,wd=2,Ad=3;function Id(e,t,n){var r,i,a,s,o,l,u;return L(function(d){switch(d.g){case 1:return r=kd(e),(i=_d.get(r))?d.return(i):(a=0,s=qi([e],n),S(d,2),s.method="HEAD",E(d,t.request(a,s).promise,4));case 4:o=d.h,i=o.headers["content-type"],A(d,3);break;case 2:if(!(l=I(d))||1002!=l.code&&1001!=l.code){d.A(3);break}return s.method="GET",E(d,t.request(a,s).promise,6);case 6:u=d.h,i=u.headers["content-type"];case 3:return d.return(i?i.toLowerCase().split(";").shift():"")}})}function kd(e){return 1==(e=new pe(e).Sb.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}
/*
        		 @license
        		 Copyright 2013 Ali Al Dallal
        
        		 Licensed under the MIT license.
        
        		 Permission is hereby granted, free of charge, to any person obtaining a copy
        		 of this software and associated documentation files (the "Software"), to deal
        		 in the Software without restriction, including without limitation the rights
        		 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        		 copies of the Software, and to permit persons to whom the Software is
        		 furnished to do so, subject to the following conditions:
        
        		 The above copyright notice and this permission notice shall be included in
        		 all copies or substantial portions of the Software.
        
        		 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        		 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        		 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        		 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        		 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        		 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        		 SOFTWARE.
        		*/
for(var _d=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),Rd={ach:"Lwo",ady:"",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Ti",ar:"","ar-AR":"","ar-MA":"","ar-SA":" ()","ay-BO":"Aymar aru",az:"Azrbaycan dili","az-AZ":"Azrbaycan dili","be-BY":"",bg:"","bg-BG":"",bn:"","bn-IN":" ()","bn-BD":"()","bs-BA":"Bosanski",ca:"Catal","ca-ES":"Catal",cak:"Maya Kaqchikel","ck-US":" (tsalagi)",cs:"etina","cs-CZ":"etina",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (sterreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbina",el:"","el-GR":"",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Espaol","es-AR":"Espaol (Argentine)","es-419":"Espaol (Latinoamrica)","es-CL":"Espaol (Chile)","es-CO":"Espaol (Colombia)","es-EC":"Espaol (Ecuador)","es-ES":"Espaol (Espaa)","es-LA":"Espaol (Latinoamrica)","es-NI":"Espaol (Nicaragua)","es-MX":"Espaol (Mxico)","es-US":"Espaol (Estados Unidos)","es-VE":"Espaol (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"","fa-IR":"","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Froyskt",fr:"Franais","fr-CA":"Franais (Canada)","fr-FR":"Franais (France)","fr-BE":"Franais (Belgique)","fr-CH":"Franais (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avae'","gu-IN":"","gx-GR":" ",he:"","he-IL":"",hi:"","hi-IN":"",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbina",ht:"Kreyl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"slenska","is-IS":"slenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"","ja-JP":"","jv-ID":"Basa Jawa","ka-GE":"","kk-KZ":"",km:"","km-KH":"",kab:"Taqbaylit",kn:"","kn-IN":" (India)",ko:"","ko-KR":" ()",ku:"Kurd","ku-TR":"Kurd",la:"Latin","la-VA":"Latin",lb:"Ltzebuergesch","li-NL":"Lmbrgs",lt:"Lietuvi","lt-LT":"Lietuvi",lv:"Latvieu","lv-LV":"Latvieu",mai:", ","mg-MG":"Malagasy",mk:"","mk-MK":" ()",ml:"","ml-IN":"","mn-MN":"",mr:"","mr-IN":"",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"",nb:"Norsk (bokml)","nb-NO":"Norsk (bokml)",ne:"","ne-NP":"",nl:"Nederlands","nl-BE":"Nederlands (Belgi)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"",pa:"","pa-IN":" ( )",pl:"Polski","pl-PL":"Polski","ps-AF":"",pt:"Portugus","pt-BR":"Portugus (Brasil)","pt-PT":"Portugus (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Romn","ro-RO":"Romn",ru:"","ru-RU":"","sa-IN":"","se-NO":"Davvismegiella","si-LK":"",sk:"Slovenina","sk-SK":"Slovenina (Slovakia)",sl:"Slovenina","sl-SI":"Slovenina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"","sr-RS":" (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"","ta-IN":"",te:"","te-IN":"",tg:" ","tg-TJ":"",th:"","th-TH":" ()",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Trke","tr-TR":"Trke","tt-RU":"",uk:"","uk-UA":"",ur:"","ur-PK":"",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Ting Vit","vi-VN":"Ting Vit","xh-ZA":"isiXhosa",yi:"","yi-DE":" (German)",zh:"","zh-HANS":"","zh-HANT":"","zh-CN":"","zh-HK":"","zh-SG":"","zh-TW":"","zu-ZA":"isiZulu"},xd=g(Object.keys(Rd)),Cd=xd.next();!Cd.done;Cd=xd.next()){var Dd=Cd.value;Rd[Dd.toLowerCase()]=Rd[Dd]}function Ld(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return Ld(t,e)}).join("");if(!e.payload)return e.payload;var n=[],r=e.fontWeight>=Bn,i=e.fontStyle==qn,a=e.textDecoration.includes(Hn);return r&&n.push(["b"]),i&&n.push(["i"]),a&&n.push(["u"]),""==(i=e.color)&&t&&(i=t.color),r="",(i=Md(i))&&(r+="."+i),""==(i=e.backgroundColor)&&t&&(i=t.backgroundColor),(t=Md(i))&&(r+=".bg_"+t),r&&n.push(["c",r]),n.reduceRight(function(e,t){var n=g(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function Md(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Nd(e,t){for(var n=[],r=(e=g(Pd(e))).next();!r.done;r=e.next())if((r=r.value).isContainer)n.push.apply(n,p(Nd(r.nestedCues,r)));else{var i=r.clone();i.nestedCues=[],i.payload=Ld(r,t),n.push(i)}return n}function Pd(e){for(var t=[],n=(e=g(e)).next(),r={};!n.done;r={ig:void 0},n=e.next())r.ig=n.value,t.some(function(e){return function(t){return Sn(e.ig,t)}}(r))||t.push(r.ig);return t}function Od(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(r){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function Fd(e,t){var n=Nd(t),r=[];t=e.cues?Array.from(e.cues):[];for(var i=(n=g(n)).next(),a={};!i.done;a={vd:void 0},i=n.next())a.vd=i.value,!t.some(function(e){return function(t){return t.startTime==e.vd.startTime&&t.endTime==e.vd.endTime&&t.text==e.vd.payload}}(a))&&a.vd.payload&&(i=Od(a.vd))&&r.push(i);for(n=(t=g(t=r.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?r.indexOf(t)-r.indexOf(e):r.indexOf(e)-r.indexOf(t)}))).next();!n.done;n=t.next())e.addCue(n.value)}function Ud(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var r=0;r<e.cues.length;){var i=e.cues[r];t(i)?e.removeCue(i):r++}n&&(e.mode="disabled")}function zd(e){var t=this;this.i=e,this.l=new te,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var e=g(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){for(var e=new Map,n=t.i.Kc(),r=(n=g(n)).next();!r.done;r=n.next()){if(r=r.value,t.h.has(r.id)){var i=t.h.get(r.id);r.active||"disabled"===i.track.mode||(i.track.mode="disabled"),t.h.delete(r.id)}else{(i=t.j.ownerDocument.createElement("track")).kind=Bd(r);var a=i,s=void 0;if(r.label)s=r.label;else if(r.language)if(r.language in Rd)s=Rd[r.language];else{var o=Lr(r.language);o in Rd&&(s=Rd[o]+" ("+r.language+")")}s||(s=r.originalTextId,r.language&&r.language!==r.originalTextId&&(s+=" ("+r.language+")")),a.label=s,r.language in Rd&&(i.srclang=r.language),i.src="data:,WEBVTT",i.track.mode="disabled",t.j.appendChild(i)}e.set(r.id,i),r.active&&(t.g=r.id)}for(r=(n=g(t.h.values())).next();!r.done;r=n.next())r.value.remove();t.g>-1&&(e.has(t.g)?"disabled"===(n=e.get(t.g).track).mode&&(n.mode=t.u?"showing":"hidden"):t.g=-1),t.h=e},this.B=function(){if(!t.o){var e=t.j;t.o=new Tr(function(){if(t.o=null,t.j===e){var n=-1,r=!1;if(t.h.has(t.g)){var i=t.h.get(t.g);"showing"===i.track.mode?(n=t.g,r=!0):"hidden"===i.track.mode&&(n=t.g)}if(!r)for(i=(r=g(t.h)).next();!i.done;i=r.next()){var a=g(i.value);if(i=a.next().value,"showing"===(a=a.next().value).track.mode){n=i;break}n<0&&"hidden"===a.track.mode&&(n=i)}for(i=(r=g(t.h)).next();!i.done;i=r.next())i=(a=g(i.value)).next().value,a=a.next().value,i!==n&&"disabled"!==a.track.mode&&(a.track.mode="disabled");t.g!==n&&(t.g=n,n>-1&&t.i.kh({id:n})),t.i.qh(n>-1&&"showing"===t.h.get(n).track.mode)}}).ia(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}function Bd(e){var t=ae();return e.forced&&"WEBKIT"===t.Ha()?"forced":"caption"===e.kind||e.roles&&e.roles.some(function(e){return e.includes("transcribes-spoken-dialog")})&&e.roles.some(function(e){return e.includes("describes-music-and-sound")})?"captions":"subtitles"}function jd(e,t){for(de("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,t=(e=g(Array.from(this.h.textTracks))).next();!t.done;t=e.next())"metadata"!==(t=t.value).kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function qd(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function Gd(){}function Hd(t,n){var r=this;this.m=!1,this.h=[],this.j=t,this.o=n,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new Tr(function(){r.j.paused||Yd(r)}),Vd(this),this.l=new Map,this.i=new te,this.i.D(document,"fullscreenchange",function(){Yd(r,!0)}),this.i.D(this.j,"seeking",function(){Yd(r,!0)}),this.i.D(this.j,"ratechange",function(){Vd(r)}),this.i.D(this.j,"resize",function(){var e=r.j,t=e.videoWidth;e=e.videoHeight,r.u=t&&e?t/e:null}),this.F=null,"ResizeObserver"in e&&(this.F=new ResizeObserver(function(){Yd(r,!0)}),this.F.observe(this.g)),this.G=new Map}function Vd(e){e.B&&(e.h.length?e.B.Ea((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Kd(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function $d(e,t,n,r,i){for(var a=!1,s=[],o=[],l=(t=g(t)).next();!l.done;l=t.next()){l=l.value,i.push(l);var u=e.l.get(l),d=l.startTime<=r&&l.endTime>r,c=u?u.gj:null;u&&(s.push(u.kg),u.$c&&s.push(u.$c),d||(a=!0,e.l.delete(l),u=null)),d&&(o.push(l),u?Kd(e,c)||(a=!0):(Wd(e,l,i),c=(u=e.l.get(l)).gj,a=!0)),l.nestedCues.length>0&&c&&$d(e,l.nestedCues,c,r,i),i.pop()}if(a){for(i=(r=g(s)).next();!i.done;i=r.next())(i=i.value).parentElement&&i.parentElement.removeChild(i);for(o.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),r=(o=g(o)).next();!r.done;r=o.next())(r=e.l.get(r.value)).$c?(r.$c.contains(n)&&r.$c.removeChild(n),n.appendChild(r.$c),r.$c.appendChild(r.kg)):n.appendChild(r.kg)}}function Yd(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){for(var r=(t=g(e.G.values())).next();!r.done;r=t.next())Js(r.value);Js(e.g),e.l.clear(),e.G.clear()}e.m&&$d(e,e.h,e.g,n,[])}}function Wd(e,t,n){var r=n.length>1,i=r?"span":"div";t.lineBreak&&(i="br"),t.rubyTag&&(i=t.rubyTag),r=!r&&t.nestedCues.length>0;var a=document.createElement(i);if("br"!=i&&function(e,t,n,r,i){var a=t.style,s=0==n.nestedCues.length,o=r.length>1;a.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,function(e){return"".repeat(e.length)});if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=Xd(n.linePadding,n,e.o),a.paddingRight=Xd(n.linePadding,n,e.o),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),i||((t=function(e,t){for(var n=e.length-1;n>=0;n--){var r=t(e[n]);if(r||0===r)return r}return null}(r,function(e){return e.backgroundColor}))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.setAttribute("translate","no"),u.textContent=l)}o&&!r[r.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(a.width="100%",a.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(a.width="100%",a.alignItems="end"),a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),s||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,(1!==(r=e.C?e.C.fontScaleFactor:1)||n.fontSize)&&(a.fontSize=Xd(n.fontSize||"1em",n,e.o,r)),null!=(r=n.line)&&((s=n.lineInterpretation)==Nn&&(s=1,o=16,e.u&&e.u<1&&(o=32),r=r<0?100+r/o*100:r/o*100),1==s&&(a.position="absolute",n.writingMode==Mn?(a.width="100%",n.lineAlign==Pn?a.top=r+"%":"end"==n.lineAlign&&(a.bottom=100-r+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==Pn?a.left=r+"%":"end"==n.lineAlign&&(a.right=100-r+"%")):(a.height="100%",n.lineAlign==Pn?a.right=r+"%":"end"==n.lineAlign&&(a.left=100-r+"%")))),a.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==_n?n:"left"===e||"start"===e&&t===Ln||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===Ln?"line-right":"center"}(n),"line-left"==e?(a.cssFloat="left",null!==n.position&&(a.position="absolute",n.writingMode==Mn?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):"line-right"==e?(a.cssFloat="right",null!==n.position&&(a.position="absolute",n.writingMode==Mn?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(a.position="absolute",n.writingMode==Mn?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%",n.size&&(a.transform="translateX(-50%)")),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Mn?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,r),n=null,t.region&&t.region.id){var s=t.region,o=e.u===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==Rt?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==Rt?"%":"px"),e.G.has(n))n=e.G.get(n);else{i=document.createElement("span");var l=s.heightUnits==Rt?"%":"px",u=s.widthUnits==Rt?"%":"px",d=s.viewportAnchorUnits==Rt?"%":"px";i.id="shaka-text-region---"+n,i.classList.add("shaka-text-region"),i.style.position="absolute";var c=s.height,h=s.width;2===s.heightUnits&&(c=5.33*s.height,l="%"),2===s.widthUnits&&(h=s.width*o,u="%"),i.style.height=c+l,i.style.width=h+u,2===s.viewportAnchorUnits?(o=s.viewportAnchorY/75*100,l=s.viewportAnchorX/(e.u===4/3?160:210)*100,o-=s.regionAnchorY*c/100,l-=s.regionAnchorX*h/100,i.style.top=o+"%",i.style.left=l+"%"):(i.style.top=s.viewportAnchorY-s.regionAnchorY*c/100+d,i.style.left=s.viewportAnchorX-s.regionAnchorX*h/100+d),0!==s.heightUnits&&0!==s.widthUnits&&0!==s.viewportAnchorUnits&&(s=Math.max(0,Math.min(100-(parseInt(i.style.width.slice(0,-1),10)||0),parseInt(i.style.left.slice(0,-1),10)||0)),i.style.top=Math.max(0,Math.min(100-(parseInt(i.style.height.slice(0,-1),10)||0),parseInt(i.style.top.slice(0,-1),10)||0))+"%",i.style.left=s+"%"),i.style.display="flex",i.style.flexDirection="column",i.style.alignItems="center",i.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.G.set(n,i),n=i}}i=a,r&&((i=document.createElement("span")).classList.add("shaka-text-wrapper"),i.style.backgroundColor=t.backgroundColor,i.style.lineHeight="normal",a.appendChild(i)),e.l.set(t,{kg:a,gj:i,$c:n})}function Xd(e,t,n,r){r=void 0===r?1:r;var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;switch(e=i.unit,r*=i.value,e){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return r+e}}function Qd(e,t){this.g=t,this.j=e,this.F=new Map,this.l=void 0,this.C=!1,this.J=!0,this.o=this.I=!1,this.B=this.u=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.m={},this.i=new te,this.G=[],this.h=null}function Jd(e){if(e.G)for(var t=g(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Zd(e){return(e=e.g.targets)?e.filter(function(e){return e.mode===Bc&&e.enabled}):[]}function ec(e){return(e=e.g.targets)?e.filter(function(e){return e.mode===zc&&!0===e.enabled}):[]}function tc(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.l,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.j.getBandwidthEstimate()/1e3}}function nc(e,t,n){if(n=void 0===n?{}:n,t=dc(e,t=Object.assign({e:t,ts:Date.now()},n),Bc),n=e.g.targets,!(e.g.version<Tc)&&n){var r=Zd(e);n=Array.from(new Set([].concat(p(xc),p(Lc))));for(var i=(r=g(r)).next();!i.done;i=r.next()){var a=ac((i=i.value).includeKeys||[],n);a.includes(Oc)||a.push(Oc),a=sc(t,a);var s=i.events||[],o=a.e,l=a.sta;o&&(!Mc.includes(o)||!("ps"!==o||l&&Nc.includes(l))||s&&s.length>0&&!s.includes(o))||ic(e,a,i)}}}function rc(e,t,n){if(e.g.enabled){n=dc(e,n,Uc);var r=oc({mode:Uc,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.m[r]||(e.m[r]={request:1,response:1}),n.sn=e.m[r].request++,function(e,t,n){if(n)e=hc(e),Object.keys(e).length&&Object.assign(t.headers,e);else{var r=cc(e);r&&(t.uris=t.uris.map(function(e){return fc(e,r)}))}}(n=sc(n,r=ac(r=e.g.includeKeys||[],e.g.version==Tc?Array.from(new Set([].concat(p(xc),p(Cc)))):Rc)),t,e.g.useHeaders)}}function ic(e,t,n,r){var i={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},a=n.url;if(n.useHeaders){if(t=hc(t),!Object.keys(t).length)return;r&&Object.assign(r.headers,t),r=qi([a],i),Object.assign(r.headers,t)}else{if(!(t=cc(t)))return;a=fc(a,t),r&&(r.uri=a),r=qi([a],i)}e.j.Wb().request(9,r)}function ac(e,t){if(!e||0===e.length)return t;for(var n=g(e),r=n.next();!r.done;r=n.next())t.includes(r.value);return e.filter(function(e){return t.includes(e)})}function sc(e,t){return Object.keys(e).reduce(function(n,r){return t.includes(r)&&(n[r]=e[r]),n},{})}function oc(e){var t=Object.keys(e).sort().reduce(function(t,n){return"enabled"!==n&&(t[n]=e[n]),t},{});return JSON.stringify(t)}function lc(e,t){if(!(t=e.j.Fc()[t]).length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function uc(e,t,n){var r=t.segment,i=0;r&&(i=r.endTime-r.startTime),(i={d:1e3*i,st:e.j.W()?wc:Sc}).ot=function(e){if(0===e.type)return vc;if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?yc:mc;if("audio"==t)return pc;if("text"==t)return"application/mp4"===e.mimeType?Ec:bc}}(t);var a=i.ot===mc||i.ot===pc||i.ot===yc||i.ot===Ec;if(t=t.stream){var s=e.j.Ob();if(a&&(i.bl=function(e,t){if(!(t=e.j.Fc()[t]).length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(e,t.type),i.ot!==Ec)){var o=lc(e,t.type);i.dl=s?o/Math.abs(s):o}if(t.bandwidth&&(i.br=t.bandwidth/1e3),t.segmentIndex&&r){if((s=t.segmentIndex.Vb(r.endTime,!0,s<0))&&(s=s.next().value)&&s!=r){if(n&&!Z(r.P(),s.P())){var l=s.P()[0];o=new URL(l);var u=new URL(n);if(o.origin!==u.origin)n=l;else{n=o.pathname.split("/").slice(1),l=u.pathname.split("/").slice(1,-1),u=Math.min(n.length,l.length);for(var d=0;d<u&&n[d]===l[d];d++)n.shift(),l.shift();for(;l.length;)l.shift(),n.unshift("..");n=n.join("/")+o.search+o.hash}i.nor=n}!s.startByte&&!s.endByte||r.startByte==s.startByte&&r.endByte==s.endByte||(n=s.startByte+"-",s.endByte&&(n+=s.endByte),i.nrr=n)}s=e.j.Ob()||1,n=lc(e,t.type)||500,r=(t=t.bandwidth)?t*(r.endTime-r.startTime)/1e3/(n/s/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(r)||(i.rtp=r)}}return a&&i.ot!==Ec&&(i.tb=function(e,t){var n=e.j.mc();if(!n.length)return NaN;e=n[0];for(var r=(n=g(n)).next();!r.done;r=n.next())"variant"===(r=r.value).type&&r.bandwidth>e.bandwidth&&(e=r);switch(t){case mc:return e.videoBandwidth||NaN;case pc:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),i}function dc(e,t,n){Object.assign(t,tc(e)),t.pr=e.j.Ob();var r=t.ot===mc||t.ot===yc;return e.I&&r&&(t.bs=!0,t.su=!0,e.I=!1),null==t.su&&(t.su=e.J),e.j.W()&&(r=Eh(e.j),t.ltc=r||void 0),document.hidden&&(t.bg=!0),null==(r=e.B&&e.u?e.B-(e.H||e.u):void 0)||e.K[n]||(t.msd=r,e.K[n]=!0),t}function cc(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function r(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var i=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n,ttfb:n,ttlb:n},s=Object.keys(e||{}).sort(),o=(s=g(s)).next();!o.done;o=s.next()){var l=e[o=o.value];if(r(l)&&("v"!==o||1!==l)&&("pr"!=o||1!==l)){var u,d=a[o];d&&(l=d(l)),u="string"==(d=typeof l)&&"ot"!==o&&"sf"!==o&&"st"!==o?o+"="+JSON.stringify(l):"boolean"===d?o:"symbol"===d?o+"="+l.description:o+"="+l,i.push(u)}}return i.join(",")}function hc(e){for(var t=Object.keys(e),n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3},s=(t=g(t)).next();!s.done;s=t.next())i[null!=a[s=s.value]?a[s]:1][s]=e[s];for(e=0;e<i.length;e++)(a=cc(i[e]))&&(n["CMCD-"+r[e]]=a);return n}function fc(e,t){return!t||e.includes("offline:")?e:((e=new pe(e)).g.set("CMCD",t),e.toString())}(r=zd.prototype).configure=function(){},r.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&Ud(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e}),!0)},r.append=function(e){this.h.has(this.g)&&Fd(this.h.get(this.g).track,e)},r.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},r.isTextVisible=function(){return this.u},r.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter(function(e){return["captions","subtitles","forced"].includes(e.kind)}),e){e=null;for(var n=(t=g(t)).next();!n.done;n=t.next()){if("showing"===(n=n.value).mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(t=(e=g(t)).next();!t.done;t=e.next())"showing"===(t=t.value).mode&&(t.mode="hidden")},r.setTextLanguage=function(){},r.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.Ba(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())},B("shaka.text.NativeTextDisplayer",zd),zd.prototype.enableTextDisplayer=zd.prototype.enableTextDisplayer,zd.prototype.setTextLanguage=zd.prototype.setTextLanguage,zd.prototype.setTextVisibility=zd.prototype.setTextVisibility,zd.prototype.isTextVisible=zd.prototype.isTextVisible,zd.prototype.destroy=zd.prototype.destroy,zd.prototype.append=zd.prototype.append,zd.prototype.remove=zd.prototype.remove,zd.prototype.configure=zd.prototype.configure,(r=jd.prototype).configure=function(){},r.remove=function(e,t){return!!this.g&&(Ud(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},r.append=function(e){this.g&&Fd(this.g,e)},r.destroy=function(){return this.g&&(Ud(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},r.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},r.setTextVisibility=function(e){e&&!this.g&&qd(this),this.g&&(this.g.mode=e?"showing":"hidden")},r.setTextLanguage=function(){},r.enableTextDisplayer=function(){qd(this)},B("shaka.text.SimpleTextDisplayer",jd),jd.prototype.enableTextDisplayer=jd.prototype.enableTextDisplayer,jd.prototype.setTextLanguage=jd.prototype.setTextLanguage,jd.prototype.setTextVisibility=jd.prototype.setTextVisibility,jd.prototype.isTextVisible=jd.prototype.isTextVisible,jd.prototype.destroy=jd.prototype.destroy,jd.prototype.append=jd.prototype.append,jd.prototype.remove=jd.prototype.remove,jd.prototype.configure=jd.prototype.configure,(r=Gd.prototype).configure=function(){},r.remove=function(){},r.append=function(){},r.destroy=function(){},r.isTextVisible=function(){return!1},r.setTextVisibility=function(){},r.setTextLanguage=function(){},r.enableTextDisplayer=function(){},B("shaka.text.StubTextDisplayer",Gd),Gd.prototype.enableTextDisplayer=Gd.prototype.enableTextDisplayer,Gd.prototype.setTextLanguage=Gd.prototype.setTextLanguage,Gd.prototype.setTextVisibility=Gd.prototype.setTextVisibility,Gd.prototype.isTextVisible=Gd.prototype.isTextVisible,Gd.prototype.destroy=Gd.prototype.destroy,Gd.prototype.append=Gd.prototype.append,Gd.prototype.remove=Gd.prototype.remove,Gd.prototype.configure=Gd.prototype.configure,(r=Hd.prototype).configure=function(e){this.C=e,Vd(this),Yd(this,!0)},r.append=function(e){for(var t=[].concat(p(this.h)),n=(e=g(Pd(e))).next(),r={};!n.done;r={jg:void 0},n=e.next())r.jg=n.value,t.some(function(e){return function(t){return Sn(t,e.jg)}}(r))||this.h.push(r.jg);this.h.length&&Vd(this),Yd(this)},r.destroy=function(){return this.g?(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null),Promise.resolve()):Promise.resolve()},r.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Yd(this,n>this.h.length),this.h.length||Vd(this),!0},r.isTextVisible=function(){return this.m},r.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Yd(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},r.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},r.enableTextDisplayer=function(){},B("shaka.text.UITextDisplayer",Hd),Hd.prototype.enableTextDisplayer=Hd.prototype.enableTextDisplayer,Hd.prototype.setTextLanguage=Hd.prototype.setTextLanguage,Hd.prototype.setTextVisibility=Hd.prototype.setTextVisibility,Hd.prototype.isTextVisible=Hd.prototype.isTextVisible,Hd.prototype.remove=Hd.prototype.remove,Hd.prototype.destroy=Hd.prototype.destroy,Hd.prototype.append=Hd.prototype.append,Hd.prototype.configure=Hd.prototype.configure,B("shaka.text.WebVttGenerator",function(){}),Qd.prototype.setMediaElement=function(t){this.h=t,function(t){t.i.D(t.h,"playing",function(){t.B||(t.B=Date.now()),nc(t,"ps",{dd:"p"})}),t.i.D(t.h,"volumechange",function(){nc(t,t.h.muted?"m":"um")}),t.i.D(t.h,"play",function(){t.u||(t.u=Date.now(),nc(t,"ps",{dd:"s"}))}),t.i.D(t.h,"pause",function(){nc(t,"ps",{dd:"a"})}),t.i.D(t.j,"buffering",function(){nc(t,"ps",{dd:"w"})}),t.i.D(t.h,"seeking",function(){return nc(t,"ps",{dd:"k"})}),t.i.D(document,"fullscreenchange",function(){nc(t,document.fullscreenElement?"pe":"pc")});var n=t.h;(n.webkitPresentationMode||n.webkitSupportsFullscreen)&&t.i.D(n,"webkitpresentationmodechanged",function(){n.webkitPresentationMode?nc(t,"inline"!==n.webkitPresentationMode?"pe":"pc"):n.webkitSupportsFullscreen&&nc(t,n.webkitDisplayingFullscreen?"pe":"pc")}),t.i.D(t.h,"enterpictureinpicture",function(){nc(t,"pe")}),t.i.D(t.h,"leavepictureinpicture",function(){nc(t,"pc")}),"documentPictureInPicture"in e&&t.i.D(e.documentPictureInPicture,"enter",function(e){nc(t,"pe"),t.i.Ba(e.window,"pagehide",function(){nc(t,"pc")})}),t.i.D(document,"visibilitychange",function(){document.hidden?nc(t,"b",{bg:!0}):nc(t,"b")}),t.i.D(t.j,"complete",function(){nc(t,"ps",{dd:"e"})})}(this)},Qd.prototype.configure=function(e){this.g=e,function(e){Jd(e);for(var t=Zd(e),n=(t=g(t)).next();!n.done;n=t.next())if(void 0===(n=n.value.timeInterval)&&(n=Pc),n>=1){var r=new Tr(function(){return nc(e,Fc)});r.Ea(n),e.G.push(r)}}(this)};var gc="m",pc="a",mc="v",yc="av",vc="i",bc="c",Ec="tt",Tc=2,Sc="v",wc="l",Ac="d",Ic="ld",kc="h",_c="lh";B("shaka.util.CmcdManager.StreamingFormat",{DASH:Ac,Pl:Ic,HLS:kc,Ql:_c,fm:"s",OTHER:"o"});var Rc="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),xc="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),Cc="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),Dc="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),Lc=["e","sta"],Mc="ps e t c b m um pe pc".split(" "),Nc="spawkrfeqd".split(""),Pc=10,Oc="ts",Fc="t",Uc="request",zc="response",Bc="event";function jc(e){this.h=e,this.g=null}function qc(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}(r=jc.prototype).configure=function(e){this.h=e},r.bi=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(Hc)?1e3*this.g.get(Hc):null},r.$h=function(){return this.h.enabled&&this.g&&this.g.has(Gc)?1e3*this.g.get(Gc):null},r.Tj=function(){return this.h.enabled&&this.g&&this.g.has(Vc)?this.g.get(Vc):null},r.Uj=function(){return this.h.enabled&&this.g&&this.g.has(Kc)?this.g.get(Kc):null},r.getBandwidthEstimate=function(e){var t=this.$h();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e},B("shaka.util.CmsdManager",jc),jc.prototype.getBandwidthEstimate=jc.prototype.getBandwidthEstimate,jc.prototype.getRoundTripTime=jc.prototype.Uj,jc.prototype.getResponseDelay=jc.prototype.Tj,jc.prototype.getEstimatedThroughput=jc.prototype.$h,jc.prototype.getMaxBitrate=jc.prototype.bi;var Gc="etp",Hc="mb",Vc="rd",Kc="rtt";function $c(){this.g=null,this.h=[]}function Yc(e,t){return L(function(n){if(1==n.g)return e.g?E(n,new Promise(function(t){return e.h.push(t)}),2):n.A(2);e.g=t,T(n)})}function Wc(t,n,r){n=void 0===n?null:n,Oi.call(this);var i=this;this.m=ef,this.h=null,this.xe=n,this.$=!1,this.Ie=new te,this.ye=new te,this.j=new te,this.ac=new te,this.yc=new te,this.G=this.H=this.F=this.J=null,this.Je=0,this.ma=new $c,this.O=this.aa=this.X=this.i=this.xc=this.I=this.l=this.ue=this.T=this.Kh=this.va=this.M=this.ib=this.ya=this.we=this.R=this.Fa=this.N=this.ob=null,this.Sa=!1,this.Ce=this.o=null,this.Be=1e9,this.Ge=[],this.uc=new Map,this.kb=[],this.Xf=-1,this.g=Ah(this),this.Zf={streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}},this.V=null,this.Ke=-1,this.Zb=null,this.xa={width:1/0,height:1/0},this.Ae=new Ga(this.g,this.xa,null),this.Ee=[],this.B=null,this.K=this.g.adaptationSetCriteriaFactory(),this.K.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Fd=this.g.preferredTextLanguage,this.Md=this.g.preferredTextRole,this.Ld=this.g.preferForcedSubs,this.ze=[],r&&r(this),this.M=new Qd(this,this.g.cmcd),this.va=new jc(this.g.cmsd),this.J=dh(this),this.Jd=this.oa=this.Da=this.C=null,this.ag=!1,this.Yf=[],this.$f=new Tr(function(){return L(function(e){return 1==e.g?i.oa?E(e,i.fc(i.Jd,!0),3):e.A(0):4!=e.g?E(e,i.load(i.oa),4):(i.ag?i.Jd.pause():i.Jd.play(),i.oa=null,i.ag=!1,void T(e))})}),sf&&(this.C=sf(),this.C.configure(this.g.ads),this.yc.D(this.C,"ad-content-pause-requested",function(e){var t;return L(function(n){if(1==n.g)return i.$f.stop(),i.oa?n.A(0):(i.Jd=i.h,i.ag=i.be(),t=e.saveLivePosition||!1,E(n,i.Uh(!0,t),3));i.oa=n.h,T(n)})}),this.yc.D(this.C,"ad-content-resume-requested",function(e){if(e=e.offset||0,i.oa){var t=i.oa;t.m&&e&&("number"==typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}i.$f.ia(.1)}),this.yc.D(this.C,"ad-content-attach-requested",function(){return L(function(e){return i.h||!i.Jd?e.A(0):E(e,i.fc(i.Jd,!0),0)})})),of&&(this.Da=of(this),this.Da.configure(this.g.queue)),this.Ie.D(e,"online",function(){Hh(i),i.fh()}),this.De=new Tr(function(){for(var e=Date.now()/1e3,t=!1,n=!0,r=g(i.i.variants),a=r.next();!a.done;a=r.next())(a=a.value).disabledUntilTime>0&&a.disabledUntilTime<=e&&(a.disabledUntilTime=0,t=!0),a.disabledUntilTime>0&&(n=!1);n&&i.De.stop(),t&&Lh(i,!1,void 0,!1,!1)}),this.Ta=null,t&&(de("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.fc(t,!0)),this.u=null}function Xc(e){null!=e.T&&(ft(e.T),e.T.release(),e.T=null)}function Qc(e,t){return new Mi(e,t)}function Jc(e,t){af.set(e,t)}function Zc(e,t){e.dispatchEvent(Qc("onstatechange",(new Map).set("state",t)))}function eh(e,t){var n;return L(function(r){return 1==r.g?(n=++e.Je,E(r,Yc(e.ma,t),2)):n!=e.Je?(e.ma.release(),r.return(!0)):r.return(!1)})}function th(e,t){var n,r,i;return t=void 0!==t&&t,L(function(a){if(1==a.g)return n=null,e.i&&e.I&&e.xc&&e.X&&e.g?(r=e.h.currentTime,e.W()&&!t&&(r=null),E(a,rh(e,e.X,r,e.aa,e.g,!0,!1),3)):a.A(2);if(2!=a.g){n=a.h,e.Ee.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(i=e.l?e.l.o:null)&&(n.o=i);var s=n,o=e.I,l=e.xc;s.h=e.i,s.l=o,s.H=l,n.C=e.K,n.start(),e.i=null,e.I=null,e.xc=null,e.o=null,e.Ce=null}return a.return(n)})}function nh(e,t,n,r,i,a){var s,o,l;return i=void 0!==i&&i,L(function(u){return 1==u.g?r?u.A(2):E(u,ih(e,t),3):(2!=u.g&&(r=u.h),function(e,t){if(!Wy(ae()))return!0;if(t){if(""==(e.h||Zs()).canPlayType(t))return!1;if(!Wy(ae())||!Za.has(t))return!0;if(ur(t))return"WEBKIT"===ae().Ha()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}(e,r)?u.return(null):(s=a||e.g,o=!1,i&&e.h&&"AUDIO"===e.h.nodeName&&(o=!0),l=rh(e,t,n,r||null,s,!i,o),l=i?l.then(function(e){return e.F=!1,e}):l.then(function(t){return e.Ee.push(t),t}),u.return(l)))})}function rh(e,t,n,r,i,a,s){var o,l,u,d,c,h,f,p,m,y,v,b;return a=void 0===a||a,s=void 0!==s&&s,L(function(S){return 1==S.g?(o=null,l=Ut(i),s&&(l.manifest.disableVideo=!0),u=function(){return o.R&&o.j?null:o},d=function(){return u()?u().getConfiguration():e.g},e.xa.width!=1/0||e.xa.height!=1/0||e.g.ignoreHardwareResolution?S.A(2):E(S,ae().jc(),3)):(2!=S.g&&(c=S.h,e.xa.width=c.width,e.xa.height=c.height),h=new Ga(l,e.xa,null),f={networkingEngine:e.J,filter:function(e){var t;return L(function(n){return 1==n.g?E(n,Ha(h,e),2):4!=n.g?n.h?(t=Qc("trackschanged"),E(n,Promise.resolve(),4)):n.A(0):(o.dispatchEvent(t),void T(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,r=g(t.textStreams),i=r.next();!i.done;i=r.next())"application/cea-608"!=(i=i.value).mimeType&&"application/cea-708"!=i.mimeType||n.add(i.originalId);for(r=g(t.variants),i=r.next();!i.done;i=r.next())if((i=i.value.video)&&i.closedCaptions)for(var a=g(i.closedCaptions.keys()),s=a.next();!s.done;s=a.next())if(s=s.value,!n.has(s)){var o=s.startsWith("CC")?"application/cea-608":"application/cea-708",l=new Nl,u=i.closedCaptions.get(s);o={id:e.Be++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:o,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:u,originalLanguage:u,label:null,type:ot,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([tr(o,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(o),n.add(s)}}(e,t)},onTimelineRegionAdded:function(e){Gl(o.I,e)},onEvent:function(e){return o.dispatchEvent(e)},onError:function(e){return o.onError(e)},isLowLatencyMode:function(){return d().streaming.lowLatencyMode},updateDuration:function(){e.l&&o.R&&e.l.updateDuration()},newDrmInfo:function(e){var t=o.i,n=t?t.g:null;n&&t.B&&$a(h,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.W());o.dispatchEvent(Qc("manifestupdated",t)),hd(o,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(t,n,r,i){var a=t;"com.apple.hls.interstitial"!=t&&"com.apple.hls.overlay"!=t||(a="com.apple.quicktime.HLS",t={startTime:n,endTime:r,values:i},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,t)),t=(i=g(i)).next();for(var s={};!t.done;s={Yg:void 0},t=i.next())s.Yg=t.value,"ID"!=s.Yg.name&&hd(o,!1,function(t){return function(){uh(e,n,r,a,t.Yg)}}(s))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},(p=new ql(function(){return e.Qa()})).addEventListener("regionadd",function(t){var n=t.region;Kh(e,"timelineregionadded",n,o),hd(o,!1,function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))})}),m=null,l.streaming.observeQualityChanges&&((m=new zl(function(){return e.Fc()})).addEventListener("qualitychange",function(t){$h(e,t.quality,t.position)}),m.addEventListener("audiotrackchange",function(t){$h(e,t.quality,t.position,!0)})),y=!0,v={tc:e.J,onError:function(e){return o.onError(e)},vf:function(t){hd(o,!0,function(){e.F&&function(e,t){var n=Qc("keystatuschanged");e.dispatchEvent(n);var r=Object.keys(t);1==r.length&&""==r[0]&&(r=["00"],t={"00":t[""]});var i=1==r.length&&"00"==r[0];if(n=!1,r.length){r=e.keySystem();for(var a=Zi(e.g.drm.clearKeys),s=function(n,r){n.allowedByKeySystem=!0;for(var a=(r=g(r)).next();!a.done;a=r.next())a=a.value,((a=t[i?"00":a])||e.F.H)&&(n.allowedByKeySystem=n.allowedByKeySystem&&!!a&&!Wa.includes(a))},o=g(e.i.variants),l=o.next();!l.done;l=o.next())for(var u=ri(l=l.value),d=(u=g(u)).next();!d.done;d=u.next()){d=d.value;var c=l.allowedByKeySystem;if(d.keyIds.size)if(d.drmInfos.length&&!a.size&&"HLS"==e.i.type)for(var h=g(d.drmInfos),f=h.next();!f.done;f=h.next())(f=f.value).keySystem==r&&(f.keyIds.size?s(l,f.keyIds):s(l,d.keyIds));else s(l,d.keyIds);c!=l.allowedByKeySystem&&(n=!0)}}n&&(Oh(e),!Ch(e))||(n=e.l.o)&&!n.allowedByKeySystem&&Lh(e)}(e,t)})},onExpirationUpdated:function(e,t){var n=Qc("expirationupdated");o.dispatchEvent(n),(n=o.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){o.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-o.ya,(e.B||o.getStats()).m=t,e.T&&ft(e.T))}},b=dh(e,u),ji(e.J,b),o=new cd(t,r,n,{config:l,wk:f,Hk:p,Gk:m,md:function(){return e.md(v)},vk:h,networkingEngine:b,ij:a}),S.return(o))})}function ih(e,t){var n,r;return L(function(i){return 1==i.g?(n=e.g.manifest.retryParameters,E(i,Id(t,e.J,n),2)):("application/x-mpegurl"==(r=i.h)&&"WEBKIT"===ae().Ha()&&(r="application/vnd.apple.mpegurl"),"video/quicktime"==r&&"CHROMIUM"===ae().Ha()&&(r="video/mp4"),i.return(r))})}function ah(e,t){var n=e.g.textDisplayFactory;e.Jh!==n||void 0!==t&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):de("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||de("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.$),e.H&&function(e,t){e.aa=t,e.h&&(e.h.l=t)}(e.H,e.u),e.Jh=n,e.l&&function(e){var t=e.h.get(ot);t&&du(e,t.stream,!0,0,!0)}(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function sh(e){var t,n,r;return L(function(i){if(1==i.g)return ae(),Zc(e,"media-source"),e.g.mediaSource.useSourceElements&&Qs(e.h),ah(e),t=function(e,t,n,r,i){return new Co(e,t,n,i,r)}(e.h,e.u,{Jj:function(){return e.keySystem()},onMetadata:function(t,n,r){for(var i=(t=g(t)).next();!i.done;i=t.next())if((i=i.value).data&&"number"==typeof i.cueTime&&i.frames){var a=i.cueTime+n,s=r;s&&a>s&&(s=a);for(var o=g(i.frames),l=o.next();!l.done;l=o.next())uh(e,a,s,"org.id3",l.value);e.C&&e.C.onHlsTimedMetadata(i,a)}},Bk:function(t){e.ib&&Gl(e.ib,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Dk:function(){e.I&&e.I.update&&e.I.update()}},e.T,e.g.mediaSource),n=e.g.manifest,r=n.segmentRelativeVttTiming,t.Fa=r,E(i,t.M,2);e.H=t,T(i)})}function oh(e,t,n){function r(){return _h(e)}if(e.j.D(t,"playing",r),e.j.D(t,"pause",r),e.j.D(t,"ended",r),e.j.D(t,"ratechange",function(){var t=e.h.playbackRate;0!=t&&(e.N&&(e.N.set(t),e.m==tf&&e.o.playbackRateChanged(t),kh(e,t)),t=Qc("ratechange"),e.dispatchEvent(t))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&"connected"==t.remote.state&&Bh(e),Oh(e)}),e.j.D(t.remote,"connecting",function(){return Oh(e)}),e.j.D(t.remote,"disconnect",function(){return L(function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?E(n,Cu(e.l),3):n.A(2);2!=n.g&&Bh(e),Oh(e),T(n)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Oh(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Oh(e)}),e.j.D(t.audioTracks,"change",function(){return Oh(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Oh(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Oh(e)}),e.j.D(t.videoTracks,"change",function(){return Oh(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.xe&&ah(e,!0)}),t.textTracks){var i=function(){e.m===nf&&e.u instanceof zd&&Bh(e),Oh(e)};e.j.D(t.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var n=g(t.activeCues),r=n.next();!r.done;r=n.next())r=r.value,uh(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){n=[];for(var i=(r=g(t.cues)).next(),a={};!i.done;a={Dc:void 0},i=r.next())a.Dc=i.value,"com.apple.quicktime.HLS"==a.Dc.type&&null!=a.Dc.startTime&&((i=n.find(function(e){return function(t){return t.startTime==e.Dc.startTime&&t.endTime==e.Dc.endTime}}(a)))||(i={startTime:a.Dc.startTime,endTime:a.Dc.endTime,values:[]},n.push(i)),i.values.push(a.Dc.value));for(r=(n=g(n)).next();!r.done;r=n.next())(r=r.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.C&&(r.values.push({key:"CUE",description:"",data:0!=r.startTime||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}});var n=new Tr(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=g(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Jb().ia(.5);e.ze.push(function(){n.stop()})}}(e,t);break;case"chapters":!function(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new Tr(function(){t.mode="hidden"}).Jb().ia(.5);e.ze.push(function(){n.stop()})}}(e,t);break;default:i()}}),e.j.D(t.textTracks,"removetrack",i),e.j.D(t.textTracks,"change",i)}"none"!=t.preload&&e.j.Ba(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function lh(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Qc(n,t))}function uh(e,t,n,r,i){e.ya&&((t={schemeIdUri:r,startTime:t,endTime:n||1/0,id:"",payload:i}).id=JSON.stringify(t),Gl(e.ya,t))}function dh(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function r(e){t()?hd(t(),!0,e):e()}t||(t=function(){return null});var i=new zi(function(t,n,i,a,s){r(function(){e.o&&e.o.segmentDownloaded(t,n,i,a,s)})},function(t,i,a){n(Qc("downloadheadersreceived",i=(new Map).set("headers",t).set("request",i).set("requestType",a))),r(function(){if(e.va){var n=e.va;if(n.h.enabled){var r=t["cmsd-static"];if(r)try{var i=new Map,a=r.split(",");for(r=0;r<a.length;r++){var s=a[r].split("=");i.set(s[0],qc(s[1]))}}catch(c){}if(i=t["cmsd-dynamic"]){e:{try{var o=new Map,l=i.split(";");for(i=1;i<l.length;i++){var u=l[i].split("=");o.set(u[0],qc(u[1]))}var d=o;break e}catch(c){d=null;break e}d=void 0}d&&(n.g=d)}}}})},function(e,t){n(Qc("downloadcompleted",e=(new Map).set("request",e).set("response",t)))},function(e,t,r,i){n(Qc("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",r).set("aborted",i)))},function(t,n,i){r(function(){if(e.M){var r=e.M,a=i;if(a=void 0===a?{}:a,r.g.enabled)if("HEAD"===n.method)rc(r,n,{});else switch(t){case 0:try{if(r.g.enabled){if(a.type){e:{switch(a.type){case 4:var s=r.o?Ic:Ac;break e;case 3:case 2:s=r.o?_c:kc;break e;case 5:s="s";break e}s=void 0}r.l=s}rc(r,n,{ot:gc,su:!r.C})}}catch(l){$("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",l)}break;case $i:try{if(r.g.enabled){var o=uc(r,a,n.uris[0]);o.ts=Date.now(),r.F.set(n,o.ts),rc(r,n,o)}}catch(l){$("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",l)}break;case 2:case 5:case 6:rc(r,n,{ot:"k"});break;case 4:rc(r,n,{ot:"o"})}}})},function(n,r,i,a){(n=t()?t().l:e.I)&&n.banLocation&&n.banLocation(a)},function(n,r,i){if(r.data){var a=r.data.byteLength,s=t()?t().getStats():e.B;if(s&&(ud(s,a),0===n&&(s.ni=a)),i=void 0===i?{}:i,0!==ec(a=e.M).length&&n===$i)try{var o=uc(a,i,r.uri);r.originalRequest&&null!=r.originalRequest.timeToFirstByte&&(o.ttfb=r.originalRequest.timeToFirstByte),null!=r.timeMs&&(o.ttlb=r.timeMs);var l=r.originalUri||r.uri;if(l.includes("CMCD="))try{var u=new URL(l);u.searchParams.delete("CMCD");var d=u.toString()}catch(T){d=l}else d=l;o.url=d,a.F.has(r.originalRequest)?(o.ts=a.F.get(r.originalRequest),a.F.delete(r.originalRequest)):o.ts||(o.ts=Date.now());var c=ec(a);if(0!==c.length){var h=a.g.version==Tc?Array.from(new Set([].concat(p(xc),p(Dc)))):Rc;o.rc=r.status||0;var f=dc(a,o,zc);r.headers&&r.headers["CMSD-Static"]&&(f.cmsds=btoa(r.headers["CMSD-Static"])),r.headers&&r.headers["CMSD-Dynamic"]&&(f.cmsdd=btoa(r.headers["CMSD-Dynamic"]));for(var m=g(c),y=m.next();!y.done;y=m.next()){var v=y.value,b=ac(v.includeKeys||[],h),E=oc(v);a.m[E]||(a.m[E]={request:1,response:1}),f.sn=a.m[E].response++,ic(a,sc(f,b),v,r)}}}catch(T){$("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",T)}}});return i.configure(e.g.networking),i}function ch(e,t,n){e.R=new za,Ba(e.R,ja),hh(e),Ih(e),e.Fa=new Tr(function(){fh(e)}),e.g.streaming.rebufferingGoal&&e.Fa.Ea(.25),e.j.D(t,"waiting",function(){return fh(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return fh(e,"canplaythrough")}),e.j.D(t,"playing",function(){return fh(e,"playing")}),e.j.D(t,"seeked",function(){return fh(e,"seeked")}),n&&(e.j.D(t,"stalled",function(){return fh(e,"stalled")}),e.j.D(t,"progress",function(){return fh(e,"progress")}),e.j.D(t,"timeupdate",function(){return fh(e,"timeupdate")}))}function hh(e){var t=e.g.streaming.rebufferingGoal;e.R.i.set(qa,Math.min(.5,t/2)).set(ja,t)}function fh(e,t){if(e.g.streaming.rebufferingGoal){t=!!e.H&&Po(e.H),t=e.be()||t||e.G.ki();var n=$s(e.h.buffered,e.h.currentTime),r=e.R,i=r.i.get(r.g);Ba(r,t||n>=i&&n>0?qa:ja)&&Ih(e)}else if(t){switch(n=void 0,t){case"seeking":case"waiting":n=ja;break;case"canplaythrough":case"playing":case"seeked":n=qa}void 0!==n&&Ba(e.R,n)&&Ih(e)}}function gh(e,t){if(e.Ae=new Ga(e.g,e.xa,e.F),e.I){var n=Ut(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Zh&&Ka(e.Ae,e.i)&&Oh(e)}catch(i){Vh(e,i)}e.o&&Ch(e),!(n=e.l.o)||n.allowedByApplication&&n.allowedByKeySystem||Lh(e)}if(e.J&&e.J.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Fa=e.g.manifest.segmentRelativeVttTiming),e.u&&ah(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),qh(e)),e.R&&hh(e),e.Fa&&(e.g.streaming.rebufferingGoal?e.Fa.Ea(.25):e.Fa.stop()),e.i&&Wh(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.M&&e.M.configure(e.g.cmcd),e.va&&e.va.configure(e.g.cmsd),e.Da&&e.Da.configure(e.g.queue),e.m==tf&&e.K.getConfiguration){n=e.K.getConfiguration();var r=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,r=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,r=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,r=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,r=!0),r&&(e.K.configure(n),Lh(e))}}function ph(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function mh(e,t){var n,r;return L(function(i){return 1==i.g?e.m!=tf&&e.m!=nf?i.return(null):(n=e.Ge,e.i&&(n=e.i.imageStreams),(r=n[0])?(null!=t&&(r=n.find(function(e){return e.id==t})),r?r.segmentIndex?i.A(2):E(i,r.createSegmentIndex(),2):i.return(null)):i.return(null)):i.return(r)})}function yh(e,t,n,r){var i=t.width||0,a=t.height||0,s=i/r.columns,o=a/r.rows,l=r.columns*r.rows,u=e.j-e.startTime;u=e.B||u/l;var d=e.startTime,c=0,h=0;return l>1&&(h=Math.floor((n-e.startTime)/u),d=e.startTime+h*u,c=h%r.columns*s,h=Math.floor(h/r.columns)*o),r=!1,(n=e.thumbnailSprite)&&(r=!0,o=n.height,c=n.positionX,h=n.positionY,s=n.width),{segment:e,imageHeight:a,imageWidth:i,height:o,positionX:c,positionY:h,startTime:d,duration:u,uris:e.P(),startByte:e.Ic(),endByte:e.Gc(),width:s,sprite:r,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function vh(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));for(var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},r=[],i=Array.from(t.activeCues||[]),a=(i=g(i)).next();!a.done;a=i.next()){if((a=a.value).endTime===1/0||a.endTime<a.startTime)a=null;else{var s=new En(a.startTime,a.endTime,a.text);s.line="number"==typeof a.line?a.line:null,a.lineAlign&&(s.lineAlign=a.lineAlign),s.lineInterpretation=a.snapToLines?Nn:1,s.position="number"==typeof a.position?a.position:null,a.positionAlign&&(s.positionAlign=a.positionAlign),s.size=a.size,s.textAlign=a.align,"lr"===a.vertical?s.writingMode="vertical-lr":"rl"===a.vertical&&(s.writingMode="vertical-rl"),a.region&&(s.region.id=a.region.id,s.region.height=a.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=a.region.regionAnchorX,s.region.regionAnchorY=a.region.regionAnchorY,s.region.scroll=a.region.scroll,s.region.viewportAnchorX=a.region.viewportAnchorX,s.region.viewportAnchorY=a.region.viewportAnchorY,s.region.viewportAnchorUnits=Rt,s.region.width=a.region.width,s.region.widthUnits=Rt),wn(s),a=s}a&&((s=e.g.mediaSource.modifyCueCallback)&&s(a,null,n),r.push(a))}e.u.append(r)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}function bh(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Eh(e){if(!e.h||!e.h.currentTime)return null;var t=e.di();return t?Math.floor(Date.now()-(t.getTime()+1e3*e.h.currentTime)):null}function Th(e,t){var n;return L(function(r){switch(r.g){case 1:return S(r,2),E(r,Id(t,e.J,e.g.streaming.retryParameters),4);case 4:n=r.h,A(r,3);break;case 2:I(r);case 3:if(n)return r.return(n);throw new Ue(1,2,2011,t)}})}function Sh(e,t,n,r){var i,a,s;return L(function(o){if(1==o.g){i=$i,(a=qi([t],r)).method="GET";var l=e.M;try{l.g.enabled&&rc(l,a,{ot:bc,su:!0})}catch(u){$("CMCD_TEXT_ERROR","Could not generate text CMCD data.",u)}return E(o,n.request(i,a).promise,2)}return s=o.h,o.return(s.data)})}function wh(e,t,n,r){var i=gr(n);if(i)return n=i(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Ne(t),function(e,t){function n(e){for(var n=e,r=g(t),i=r.next();!i.done;i=r.next())(i=i.value).end&&i.start<e&&(n+=i.end-i.start);return((e=Math.floor(n/3600))<10?"0":"")+e+":"+((r=Math.floor(n/60%60))<10?"0":"")+r+":"+((i=Math.floor(n%60))<10?"0":"")+i+"."+((n=Math.floor(1e3*n%1e3))<100?n<10?"00":"0":"")+n}var r=Nd(e);e="WEBVTT\n\n";for(var i=(r=g(r)).next();!i.done;i=r.next())e+=n((i=i.value).startTime)+" --\x3e "+n(i.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case Rn:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(i)+"\n",e+=i.payload+"\n\n";return e}(t=n.parseMedia(t,e,null,[]),r);throw new Ue(2,2,2014,n)}function Ah(e){var t=Ju();return t.streaming.failureCallback=function(t){if(e.W()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.fh(n))}},t.textDisplayFactory=function(){if(e.xe){var t=e.h;t=!(t.webkitDisplayingFullscreen||t.webkitPresentationMode&&"inline"!=t.webkitPresentationMode)}else t=!1;return t?new Hd(e.h,e.xe):"track"in document.createElement("track")?new zd(e):new Gd},t}function Ih(e){var t=e.Ng();if(e.B&&e.R&&e.G){if(0==e.g.streaming.rebufferingGoal){var n=e.N;n.j=!1,Ol(n)}else(n=e.N).j=t,Ol(n);if(e.M&&(n=e.M,t||n.C||(n.C=!0),n.C&&t&&(n.I=!0,nc(n,"ps",{dd:"r"})),n.J=t),_h(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ke<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Ke*i,n-r))}}t=(new Map).set("buffering",t),e.dispatchEvent(Qc("buffering",t))}function kh(e,t){e.ac.Pa(),e.ac.D(e.h,"timeupdate",function(){var n=e.h.currentTime,r=e.Qa(),i=e.W(),a=i?e.g.streaming.safeSeekOffset:0;t>0?(!i||t>=1)&&Math.floor(n)>=Math.floor(r.end)&&e.Pd():Math.floor(n)<=Math.floor(r.start+a)&&e.Pd()})}function _h(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==ja?n="buffering":e.be()?n="ended":e.h.paused&&(n="paused");var r=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:r,duration:0},t=!0;else{var i=Date.now()/1e3;t.g.duration=i-t.g.timestamp,t.g.state==r?t=!1:(t.h.push(t.g),t.g={timestamp:i,state:r,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Qc("statechanged",n)))}}function Rh(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var r=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,i=e.Zh();i<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=r&&e.se(r,!1):1==i&&t!==e.N.Tc()&&e.Pd()}if(n&&(n=e.Qa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){r=e.g.streaming.liveSync.targetLatencyTolerance,i=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,o=s+r,l=Math.max(0,s-r),u=e.g.streaming.liveSync.maxPlaybackRate,d=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?o=e.i.serviceDescription.targetLatency+r:null!=e.i.serviceDescription.maxLatency&&(o=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?l=Math.max(0,e.i.serviceDescription.targetLatency-r):null!=e.i.serviceDescription.minLatency&&(l=e.i.serviceDescription.minLatency),u=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,d=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||"number"!=typeof s||(e.V=s);var c=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;i&&e.Zb&&null!==e.V&&"number"==typeof s&&e.Ke<c&&Date.now()-e.Zb>1e3*a&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(s-a)/2,a+r),e.Zb=Date.now()),i&&null!==e.V&&(o=e.V+r,l=e.V-r),s=n.end-e.h.currentTime,r=0,e.m==nf&&(i=e.h.buffered).length>0&&(r=i.end(i.length-1),r=Math.max(u,r-n.end)),n=e.g.streaming.liveSync.panicMode,i=1e3*e.g.streaming.liveSync.panicThreshold,a=Date.now()-e.R.h,n&&!d&&(d=e.g.streaming.liveSync.minPlaybackRate),n&&d&&a<=i?t!=d&&e.se(d,!1):null!=o&&u&&s-r>o?(t!=u&&e.se(u,!1),e.Zb=null):null!=l&&d&&s-r<l?(t!=d&&e.se(d,!1),e.Zb=null):t!==e.N.Tc()&&(e.Pd(),e.Zb=Date.now())}}function xh(e){if(e.h){var t=function(t,n){var r=void 0===r?Number.EPSILON:r;if(t===n)r=!0;else{var i=Math.abs(t-n);r=i<=r||r!==Number.EPSILON&&Math.abs(i-r)<=Number.EPSILON}return!!((r||n>t)&&e.Xf<t)&&(e.Xf=t,!0)},n=e.Qa();if(n=(n=n.end-n.start)>0?e.h.currentTime/n:0,!isNaN(n)){if(t(0,n*=100))var r=Qc("started");else t(25,n)?r=Qc("firstquartile"):t(50,n)?r=Qc("midpoint"):t(75,n)?r=Qc("thirdquartile"):((t(100,n)||n>100)&&(r=Qc("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.be()&&e.h.pause());r&&e.dispatchEvent(r)}}}function Ch(e){try{Ya(e.Ae,e.i)}catch(n){return Vh(e,n),!1}var t=ei(e.i.variants);return t=e.K.create(t),"boolean"!=typeof(e=e.o.setVariants(Array.from(t.values())))||e}function Dh(e,t){if(t=void 0!==t&&t,Ch(e)){if(!e.g.abr.enabled){var n=e.K;if("function"!=typeof n.getLastAdaptationSet&&(de("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),n.getLastAdaptationSet=function(){return null}),(n=n.getLastAdaptationSet())&&(n=Array.from(n.values())).length){var r=e.l.o;if(r&&r.video&&(n=n.find(function(e){return e.video==r.video})))return n}}return e.o.chooseVariant(t)}return null}function Lh(e,t,n,r,i){t=void 0===t||t,n=void 0===n?0:n,r=void 0!==r&&r,i=void 0===i||i;var a=Dh(e);a&&Mh(e,a,i,t,n,r)}function Mh(e,t,n,r,i,a){a=void 0!==a&&a;var s=e.l.o;if(t==s)r&&lu(e.l,t,r,i,!0);else{var o=e.B.h;if(o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),lu(e.l,t,r,i,a,n),r=null,s&&(r=$r(s)),(s=$r(t)).active=!0,e.T&&(i=e.T,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,o=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.ai()){case"DASH":o=1;break;case"HLS":o=0}i.g&&(i.g.setLevelSwitching(t.id,!0),i.g.setContainerFormat(a),i.j||i.g.setStreamingFormat(o))}n?Xh(e,n=Qc("adaptation",n=(new Map).set("oldTrack",r).set("newTrack",s))):Fh(e,r,s),Uh(e,r,s)}}function Nh(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var r=Ph(e);Fh(e,n=Jr(n,r),t=Jr(t,r)),Uh(e,n,t)}}function Ph(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(e){return e.selected}):null}function Oh(e){Xh(e,Qc("trackschanged")),zh(e)}function Fh(e,t,n){Xh(e,t=Qc("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function Uh(e,t,n){var r=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(r=!0),r&&zh(e)}function zh(e){Xh(e,Qc("audiotrackschanged"))}function Bh(e){Xh(e,Qc("textchanged"))}function jh(e){Xh(e,Qc("texttrackvisibility"))}function qh(e){e.g.abr.enabled||Hh(e),Xh(e,Qc("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function Gh(e){var t=e.Kc().find(function(e){return e.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Hh(e,t){if(t=void 0===t||t,e.m==tf){e.De.stop();for(var n=g(e.i.variants),r=n.next();!r.done;r=n.next())r.value.disabledUntilTime=0;t&&Ch(e)}}function Vh(e,t){var n,r,i,a;return L(function(s){switch(s.g){case 1:if(e.m==Zh)return s.return();if(1===t.severity&&e.B.M++,n=!0,!(e.Sa&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){s.A(2);break}return"WEBKIT"===ae().Ha()&&3016==t.code?s.return():(S(s,3),E(s,Cu(e.l),5));case 5:r=s.h,n=!r,r&&(i=Qc("mediasourcerecovered"),e.dispatchEvent(i)),A(s,2);break;case 3:I(s),n=!0;case 2:if(!n)return s.return();2===t.severity&&Hh(e,!1),a=Qc("error",(new Map).set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),T(s)}})}function Kh(e,t,n,r){r=void 0===r?e:r,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),r.dispatchEvent(Qc(t,e))}function $h(e,t,n,r){r=void 0!==r&&r,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Qc(r?"audiotrackchanged":"mediaqualitychanged",t))}function Yh(e,t){if(t=void 0===t||t,!e.h.error)return t?new Ue(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new Ue(2,3,3016,n,t,e.h.error.message)):null}function Wh(e,t,n){t>0&&(e.W()||e.Si(t)),n<(t=e.getDuration())&&(e.W()||e.Ab(n))}function Xh(e,t){L(function(n){if(1==n.g)return E(n,Promise.resolve(),2);e.m!=Zh&&e.dispatchEvent(t),T(n)})}function Qh(e){for(var t=new Set,n=(e=g(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(Cr(n.language)):t.add("und");return t}function Jh(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var i=e[r],a="und",s=[];i.language&&(a=Cr(i.language)),(s="variant"==i.type?i.audioRoles:i.roles)&&s.length||(s=[""]),t.has(a)||t.set(a,new Set);for(var o=(s=g(s)).next();!o.done;o=s.next())o=o.value,t.get(a).add(o),i.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(o,i.label))}var l=[];return t.forEach(function(e,t){for(var r=(e=g(e)).next();!r.done;r=e.next()){r=r.value;var i=null;n.has(t)&&n.get(t).has(r)&&(i=n.get(t).get(r)),l.push({language:t,role:r,label:i})}}),l}$c.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null},h(Wc,Oi),(r=Wc.prototype).destroy=function(){var e,t=this;return L(function(n){switch(n.g){case 1:return t.m==Zh?n.return():(Xc(t),e=t.detach(),t.m=Zh,E(n,e,2));case 2:return E(n,t.ng(),3);case 3:if(t.Ie&&(t.Ie.release(),t.Ie=null),t.ye&&(t.ye.release(),t.ye=null),t.j&&(t.j.release(),t.j=null),t.ac&&(t.ac.release(),t.ac=null),t.yc&&(t.yc.release(),t.yc=null),t.Ce=null,t.g=null,t.B=null,t.xe=null,t.M=null,t.va=null,!t.J){n.A(4);break}return E(n,t.J.destroy(),5);case 5:t.J=null;case 4:t.o&&(t.o.release(),t.o=null),t.Da&&(t.Da.destroy(),t.Da=null),Oi.prototype.release.call(t),T(n)}})},r.fc=function(e,t){t=void 0===t||t;var n,r,i,a=this;return L(function(s){switch(s.g){case 1:if(a.m==Zh)throw new Ue(2,7,7e3);if(n=a.h&&a.h==e,!a.h||a.h==e){s.A(2);break}return E(s,a.detach(),2);case 2:return E(s,eh(a,"attach"),4);case 4:if(s.h)return s.return();if(S(s,5,6),n||(Zc(a,"attach"),r=function(){var e=Yh(a,!1);e&&Vh(a,e)},a.ye.D(e,"error",r),a.h=e,a.M&&a.M.setMediaElement(e)),ae(),!t||!Wy()||a.H){s.A(6);break}return E(s,sh(a),6);case 6:k(s),a.ma.release(),_(s,0);break;case 5:return i=I(s),E(s,a.detach(),10);case 10:throw i}})},r.jj=function(e){this.Kh=e},r.detach=function(e){e=void 0!==e&&e;var t=this;return L(function(n){if(1==n.g){if(t.m==Zh)throw new Ue(2,7,7e3);return E(n,t.Bc(!1,e),2)}if(3!=n.g)return E(n,eh(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.ye.Pa(),t.h=null),Zc(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ma.release()}T(n)})},r.Bc=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b=this;return L(function(T){switch(T.g){case 1:return b.m!=Zh&&(b.m=ef),E(T,eh(b,"unload"),2);case 2:return T.h?T.return():(w(T,3),b.Sa=!1,Zc(b,"unload"),Xc(b),r=b.ze.map(function(e){return e()}),b.ze=[],E(T,Promise.all(r),5));case 5:if(b.dispatchEvent(Qc("unloading")),b.we&&(b.we.release(),b.we=null),b.ya&&(b.ya.release(),b.ya=null),b.ib&&(b.ib.release(),b.ib=null),b.h&&(b.j.Pa(),b.ac.Pa()),b.De.stop(),b.ob&&(b.ob.release(),b.ob=null),b.Fa&&(b.Fa.stop(),b.Fa=null),!b.I){T.A(6);break}return E(T,b.I.stop(),7);case 7:b.I=null,b.xc=null;case 6:if(b.o&&b.o.stop(),!b.l){T.A(8);break}return E(T,b.l.destroy(),9);case 9:b.l=null;case 8:if(b.N&&(b.N.release(),b.N=null),b.G&&(b.G.release(),b.G=null),"webkit"!==e.shakaMediaKeysPolyfill||!b.F){T.A(10);break}return E(T,b.F.destroy(),11);case 11:b.F=null;case 10:if(!b.H){T.A(12);break}return E(T,b.H.destroy(),13);case 13:b.H=null;case 12:if(b.C&&!n&&b.C.onAssetUnload(),b.oa&&!n&&(b.oa.destroy(),b.oa=null),n||b.$f.stop(),b.M&&function(e){e.F.clear(),e.C=!1,e.J=!0,e.I=!1,e.o=!1,e.u=0,e.B=0,e.H=0,e.K={request:!1,response:!1,event:!1},Jd(e),e.m={},e.h=null,e.i.Pa()}(b.M),b.va&&(b.va.g=null),!b.u){T.A(14);break}return E(T,b.u.destroy(),15);case 15:b.u=null;case 14:if(b.$=!1,b.h){for(i=g(b.Yf),a=i.next();!a.done;a=i.next())(s=a.value).src.startsWith("blob:")&&URL.revokeObjectURL(s.src),s.remove();b.Yf=[],Qs(b.h)&&b.h.load()}if(!b.F){T.A(16);break}return E(T,b.F.destroy(),17);case 17:b.F=null;case 16:if(b.Ta&&b.X!=b.Ta.rd()&&(b.Ta.j||b.Ta.destroy(),b.Ta=null),b.X=null,b.aa=null,b.R=null,b.i){for(o=g(b.i.variants),l=o.next();!l.done;l=o.next())for(u=l.value,d=g([u.audio,u.video]),c=d.next();!c.done;c=d.next())(h=c.value)&&h.segmentIndex&&h.segmentIndex.release();for(f=g(b.i.textStreams),p=f.next();!p.done;p=f.next())(m=p.value).segmentIndex&&m.segmentIndex.release()}for(b.g&&b.g.streaming.clearDecodingCache&&(li.clear(),Si.clear()),b.i=null,b.B=new od,b.Jh=null,b.Zb=null,b.V=null,b.Ke=-1,b.Ge=[],y=g(b.uc.values()),v=y.next();!v.done;v=y.next())v.value.stop();b.uc.clear(),b.kb=[],b.Xf=-1,b.J&&b.J.Qh(),Ih(b);case 3:k(T),b.ma.release(),_(T,4);break;case 4:if(ae(),t&&Wy()&&!b.H&&b.h)return E(T,sh(b),0);T.A(0)}})},r.kl=function(e){this.O=e},r.load=function(t,n,r){n=void 0===n?null:n;var i,a,s,o,l,u,d,c,h,f,p,m,y,v,b=this;return L(function(A){switch(A.g){case 1:if(b.m==Zh)throw new Ue(2,7,7e3);if(i=null,a="",t instanceof cd){if(t.j)throw new Ue(2,7,7006);a=(i=t).rd()||""}else a=t||"";return E(A,Yc(b.ma,"load"),2);case 2:if(b.ma.release(),!b.h)throw new Ue(2,7,7002);if(!b.X){A.A(3);break}return b.X=a,E(A,b.Bc(!1),3);case 3:if(s=++b.Je,o=function(){return L(function(e){if(1==e.g)return b.Je==s?e.A(0):i?E(e,i.destroy(),3):e.A(3);throw new Ue(2,7,7e3)})},l=function(e,t){return L(function(n){switch(n.g){case 1:return w(n,2),E(n,Yc(b.ma,t),4);case 4:return E(n,o(),5);case 5:return E(n,e(),6);case 6:return E(n,o(),7);case 7:i&&b.g&&(i.g=b.g);case 2:k(n),b.ma.release(),_(n,0)}})},S(A,5,6),null==n&&i&&(n=i.getStartTime()),b.O=n,b.Sa=!1,b.dispatchEvent(Qc("loading")),i){r=i.V,A.A(8);break}if(r){A.A(8);break}return E(A,l(function(){return L(function(e){if(1==e.g)return E(e,ih(b,a),2);r=e.h,T(e)})},"guessMimeType_"),8);case 8:if(u=!!i,i){fd(i,b),b.B=i.getStats(),A.A(11);break}return E(A,nh(b,a,n,r,!0,b.g),12);case 12:(i=A.h)?(i.F=!1,fd(i,b),b.B=i.getStats(),i.start(),i.B.catch(function(){})):b.B=new od;case 11:return d=!i,c=Date.now()/1e3,b.B=i?i.getStats():new od,b.X=a,b.aa=r||null,Ih(b),h=function(){var e=b.h?b.h.buffered:null;return{start:Hs(e)||0,end:Vs(e)||0}},b.ya=new ql(h),b.ya.addEventListener("regionadd",function(e){lh(b,e.region,"metadataadded")}),d?E(A,l(function(){return L(function(e){return E(e,function(e,t){var n,r,i;return L(function(a){return 1==a.g?(n=Date.now()/1e3,r=!0,e.F=e.md({tc:e.J,onError:function(t){Vh(e,t)},vf:function(){},onExpirationUpdated:function(){var t=Qc("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&r&&(r=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),i=oi([t]),e.F.O=!0,E(a,va(e.F,[i],[]),2)):E(a,e.F.fc(e.h),0)})}(b,r),0)})},"initializeSrcEqualsDrmInner_"),23):(b.ib=new ql(h),E(A,l(function(){return L(function(e){if(1==e.g)return E(e,Promise.race([i.ma,i.B]),2);b.xc=i.H;var t=i;t.oa=!0,b.I=t.l,b.i=i.Hg(),T(e)})},"waitForFinish"),15));case 15:if(b.H){A.A(16);break}return E(A,l(function(){return L(function(e){return E(e,sh(b),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return b.i&&b.i.textStreams.length&&(b.u.enableTextDisplayer?b.u.enableTextDisplayer():de("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),E(A,l(function(){return L(function(e){return E(e,i.B,0)})},"waitForFinish"),18);case 18:if(b.g=i.getConfiguration(),b.Ae=i.G,b.I&&b.I.setMediaElement&&b.h&&b.I.setMediaElement(b.h),b.we=function(e){return e.va=!0,e.I}(i),b.ue=i.Fa,(f=i.C)&&(b.K=f),u&&b.h&&"AUDIO"===b.h.nodeName&&(function(e){for(var t=g(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(b),b.configure("manifest.disableVideo",!0)),i.i){A.A(19);break}return E(A,l(function(){return L(function(e){return E(e,md(i,b.h),0)})},"drmEngine_.init"),19);case 19:return b.F=function(e){return e.aa=!0,e.i}(i),E(A,l(function(){return L(function(e){return E(e,b.F.fc(b.h),0)})},"drmEngine_.attach"),21);case 21:return p=b.g.abrFactory,b.o&&b.Ce==p||(b.Ce=p,b.o&&b.o.release(),b.o=p(),"function"!=typeof b.o.setMediaElement&&(de("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),b.o.setMediaElement=function(){}),"function"!=typeof b.o.setCmsdManager&&(de("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),b.o.setCmsdManager=function(){}),"function"!=typeof b.o.trySuggestStreams&&(de("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),b.o.trySuggestStreams=function(){}),b.o.configure(b.g.abr)),m=function(e){return e.xa=!0,e.M}(i),y=i.o,E(A,l(function(){return L(function(t){return E(t,function(t,n,r,i){var a,s,o,l,u,d,c,h,f,p,m,y,v,b,S,w,A,I,k,_,R,x,C,D,M,N,P;return L(function(O){switch(O.g){case 1:Zc(t,"load"),a=t.h,t.N=new Pl({Ye:function(){return a.playbackRate},Tc:function(){return a.defaultPlaybackRate},ph:function(e){a.playbackRate=e},ui:function(e){a.currentTime+=e}}),oh(t,a,n),"onchange"in e.screen&&t.j.D(e.screen,"change",function(){if(t.K.getConfiguration){var e=t.K.getConfiguration();"AUTO"==e.hdrLevel?Ch(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.hdrLevel="AUTO",t.K.configure(e),Ch(t))}}),s=!1,o=g(t.i.variants);for(l=o.next();!l.done;l=o.next())u=l.value,(d=u.video&&u.video.dependencyStream)&&(s=gt(d));!function(e,t,n){n||t.lcevc.enabled?(Xc(e),null==e.T&&(e.T=new ct(e.h,e.Kh,t.lcevc,n),e.H&&(e.H.C=e.T))):Xc(e)}(t,t.g,s),t.Fd=t.g.preferredTextLanguage,t.Md=t.g.preferredTextRole,t.Ld=t.g.preferForcedSubs,Wh(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.o.init(function(e,n,r){t.i&&t.l&&e!=t.l.o&&Mh(t,e,!0,void 0!==n&&n,void 0===r?0:r)}),t.o.setMediaElement(a),t.o.setCmsdManager(t.va),t.l=function(e){return new su(e.i,{lc:function(){return e.G?e.G.He():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Ob:function(){return e.Ob()},video:e.h,Z:e.H,tc:e.J,onError:function(t){return Vh(e,t)},onEvent:function(t){return e.dispatchEvent(t)},wf:function(t,n,r){var i=t.startTime,a=t.endTime,s=n.type;if(s!=ot){if(e.G){e.G.xi();var o=Fo(e.H,s);!e.W()&&e.h.paused&&!e.h.seeking&&null!=o&&o>0&&e.G.He()<o&&e.G.Wf(o)}fh(e)}r=(new Map).set("start",i).set("end",a).set("contentType",s).set("isMuxed",r),e.dispatchEvent(Qc("segmentappended",r)),e.o&&n.fastSwitching&&t.Xc&&t.ee&&e.o.trySuggestStreams()},Ck:function(t,n){(n=n.xd)&&e.ue&&function(e,t,n){var r=function(e,t){var n=e.g.get(t);return n||(n={me:[],lg:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,r=e[e.length-1].end,i=t.me;t.me=i.filter(function(e,t){return!(e.position<=n&&t+1<i.length&&i[t+1].position<=n||e.position>=r)})}else t.me=[]}(e,r),e={xd:t,position:n},(t=(r=r.me).findIndex(function(e){return e.position>=n}))>=0?r.splice(t,r[t].position==n?1:0,e):r.push(e)}(e.ue,n,t)},Oh:function(t,n){var r=e.F;if(r.h.parseInbandPsshEnabled&&!r.H&&["audio","video"].includes(t)){t=new pa(Ne(n)),n=0;for(var i=g(t.data),a=i.next();!a.done;a=i.next())n+=a.value.length;if(0==n)r=Promise.resolve();else{for(n=new Uint8Array(n),i=0,a=(t=g(t.data)).next();!a.done;a=t.next())a=a.value,n.set(a,i),i+=a.length;Sa(r,"cenc",n),r=r.m}}else r=Promise.resolve();return r},disableStream:function(t,n){return e.disableStream(t,n)},al:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.ee)}})}(t),t.l.configure(t.g.streaming),t.m=tf,t.dispatchEvent(Qc("streaming")),c=r;case 2:for((f=t.l.o)||c||(c=Dh(t,!0)),p=[],m=g([(h=f||c).video,h.audio]),y=m.next();!y.done;y=m.next())(v=y.value)&&!v.segmentIndex&&(p.push(v.createSegmentIndex()),v.dependencyStream&&p.push(v.dependencyStream.createSegmentIndex()));if(!(p.length>0)){O.A(4);break}return E(O,Promise.all(p),4);case 4:if(!h||0!=h.disabledUntilTime){O.A(2);break}if(t.I&&t.I.onInitialVariantChosen&&t.I.onInitialVariantChosen(h),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.Zf):K("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.M&&(function(e,t){e.o=t,e.o?e.l==Ac?e.l=Ic:e.l==kc&&(e.l=_c):e.l==Ic?e.l=Ac:e.l==_c&&(e.l=kc)}(t.M,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),function(e,t){if(e.g&&e.g.enabled&&(nc(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}(t.M,1e3*n)),Wh(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),function(e,t,n){e.j.presentationTimeline.W()||(e.aa=t,e.$=n)}(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.Sa=!0,t.dispatchEvent(Qc("canupdatestarttime")),b=function(e){t.G=function(e,t){return new Il(e.h,e.i,e.g.streaming,t,function(){e.ob&&Ul(e.ob,!e.G.Hh()),e.l&&e.l.bd(),e.R&&fh(e,"seeking")},function(t){return e.dispatchEvent(t)})}(t,e),t.ob=function(e,t){var n=e.W()||"number"==typeof t&&t>0;(t=new Ed(e.we,n)).addEventListener("enter",function(t){Kh(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){Kh(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(Kh(e,"timelineregionenter",n),Kh(e,"timelineregionexit",n))});var r=new Ed(e.ya,n);r.addEventListener("enter",function(t){lh(e,t.region,"metadata")}),(n=new Ed(e.ib,n)).addEventListener("enter",function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent(Qc("emsg",t))});var i=new Fl(e.h);return i.g.add(t),i.g.add(r),i.g.add(n),e.ue&&i.g.add(e.ue),i}(t,e),ch(t,a,!1)},t.g.streaming.startAtSegmentBoundary||(null==(S=t.O)&&t.i.startTime&&(S=t.i.startTime),b(S)),f){O.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){O.A(8);break}return w=t.i.presentationTimeline,t.O instanceof Date&&(I=w.m||w.i,null!=(k=t.O.getTime()/1e3-I)&&(A=k)),null==A&&(A="number"==typeof t.O?t.O:t.h.currentTime),null==t.O&&t.i.startTime&&(A=t.i.startTime),_=w.Xb(),R=w.Gb(),A<_?A=_:A>R&&(A=R),E(O,function(e,t){var n,r,i,a,s;return L(function(o){return 1==o.g?(n=e.audio,r=e.video,i=function(e,t){var n,r,i;return L(function(a){return 1==a.g?e?e.segmentIndex?a.A(2):E(a,e.createSegmentIndex(),2):a.return(null):(r=(n=e.segmentIndex.Vb(t))?n.next().value:null)?(i=r.startTime,a.return(i)):a.return(null)})},E(o,i(n,t),2)):3!=o.g?(a=o.h,E(o,i(r,t),3)):null!=(s=o.h)&&null!=a?o.return(Math.max(s,a)):null!=s?o.return(s):null!=a?o.return(a):o.return(t)})}(c,A),9);case 9:x=O.h,b(x);case 8:Mh(t,c,!0,!1,0);case 7:return t.G.ready(),t.Kc().find(function(e){return e.active})||((C=ti(t.i.textStreams,t.Fd,t.Md,t.Ld)[0]||null)&&sd(t.B.h,C,!0),c&&(C?(si(c.audio,C,t.g)&&(t.$=!0),t.$&&t.u.setTextVisibility(!0)):(t.$=!1,t.u.setTextVisibility(!1)),jh(t)),C&&(t.g.streaming.alwaysStreamText||t.Og())&&(uu(t.l,C),Gh(t))),E(O,t.l.start(i),10);case 10:t.g.abr.enabled&&(t.o.enable(),qh(t)),Oh(t),t.i.variants.some(function(e){return e.primary}),((D=t.W())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(M=function(){return Rh(t)},t.j.D(a,"timeupdate",M)),D||(N=function(){return xh(t)},t.j.D(a,"timeupdate",N),xh(t),t.i.nextUrl&&(t.g.streaming.preloadNextUrlWindow>0&&(P=function(){var e;return L(function(n){if(1==n.g)return e=t.Qa().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Ma(a,"timeupdate",P),E(n,t.preload(t.i.nextUrl),4)):n.A(0);t.Ta=n.h,T(n)})},t.j.D(a,"timeupdate",P)),t.j.D(a,"ended",function(){t.load(t.Ta||t.i.nextUrl)}))),t.C&&t.C.onManifestUpdated(D),T(O)}})}(b,c,y,m),0)})},"loadInner_"),22);case 22:!function(e){if(e.J)for(var t=g(e.J),n=t.next();!n.done;n=t.next())(n=n.value)();e.J=null}(i),b.aa&&ae().aj()&&ur(b.aa)&&function(t,n,r){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.F&&t.g.removeChild(t.F),t.F=Xs(n,r),t.g.appendChild(t.F),t.g.disableRemotePlayback=!1)}(b.H,b.X,b.aa),A.A(14);break;case 23:return E(A,l(function(){return L(function(e){return E(e,function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,p;return L(function(m){switch(m.g){case 1:if(Zc(e,"src-equals"),r=e.h,e.G=new Sl(r),i=!1,e.ze.push(function(){i=!0}),e.dispatchEvent(Qc("canupdatestarttime")),null!=e.O&&e.G.Wf(e.O),e.ob=function(e,t){(t=new Ed(e.ya,t instanceof Date||t>0)).addEventListener("enter",function(t){lh(e,t.region,"metadata")});var n=new Fl(e.h);return n.g.add(t),n}(e,e.O||0),e.N=new Pl({Ye:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},ph:function(e){r.playbackRate=e},ui:function(e){r.currentTime+=e}}),ch(e,r,!0),r.textTracks&&(ah(e),a=function(t){if(!(e.u instanceof zd)){var n=bh(e).find(function(e){return"disabled"!==e.mode});n&&(n.mode=t?"showing":"hidden"),e.u instanceof jd&&(n=function(e){return Array.from(e.h.textTracks).find(function(e){return"Shaka Player TextTrack"==e.label})}(e))&&(n.mode=!t&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(r,"enterpictureinpicture",function(){return a(!0)}),e.j.D(r,"leavepictureinpicture",function(){return a(!1)}),r.remote?(e.j.D(r.remote,"connect",function(){return a(!1)}),e.j.D(r.remote,"connecting",function(){return a(!1)}),e.j.D(r.remote,"disconnect",function(){return a(!1)})):"webkitCurrentPlaybackTargetIsWireless"in r&&e.j.D(r,"webkitcurrentplaybacktargetiswirelesschanged",function(){return a(!1)}),((s=r).webkitPresentationMode||s.webkitSupportsFullscreen)&&e.j.D(s,"webkitpresentationmodechanged",function(){s.webkitPresentationMode?a("inline"!==s.webkitPresentationMode):s.webkitSupportsFullscreen&&a(s.webkitDisplayingFullscreen)})),oh(e,r,t),o=function(e,t,n){try{if(!e.g.enabled)return t;var r=tc(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var i=pc;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":i=yc;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":i=gc;break e}i=void 0}return r.ot=i,r.su=!0,fc(t,cc(r))}catch(s){return $("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}(e.M,e.X,n),!o.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(o+="#t=",e.g.playRangeStart>0&&(o+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(o+=","+e.g.playRangeEnd)),!e.H){m.A(2);break}return E(m,e.H.destroy(),3);case 3:e.H=null;case 2:return Qs(r),r.src=o,"TV"==(l=ae()).Ua()&&r.load(),"none"!=r.preload&&!r.autoplay&&ur(n)&&"WEBKIT"===l.Ha()&&r.load(),e.m=nf,e.dispatchEvent(Qc("streaming")),u=new ki,fl(r,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.G.ready(),e.aa&&ur(e.aa)||u.resolve()}),d=function(){return new Promise(function(t){var n=new Tr(t);e.j.D(r.textTracks,"change",function(){return n.ia(.5)}),n.ia(.5)})},fl(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var t,n,r,a,s;return L(function(o){if(1==o.g)return E(o,d(),2);if(i)return o.return();if(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Ni(t,e.g.preferredAudioRole)}(e),(t=bh(e)).some(function(e){return"showing"===e.mode})&&(e.$=!0,e.u.setTextVisibility(!0)),!(e.u instanceof zd))for(t.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():de("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,r=g(t),a=r.next();!a.done;a=r.next())"disabled"!==(s=a.value).mode&&(n?(s.mode="disabled",K("Found more than one enabled text track, disabling it",s)):(vh(e,s),n=!0));!function(e){var t=e.g.preferredTextLanguage;""!=t&&e.jh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),e.aa&&ur(e.aa)&&u.resolve(),T(o)})}),r.error?u.reject(Yh(e)):"none"==r.preload&&(K('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),u.resolve()),e.j.Ba(r,"error",function(){u.reject(Yh(e))}),E(m,Ir(e.g.streaming.loadTimeout,u),4);case 4:((c=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(h=function(){return Rh(e)},e.j.D(r,"timeupdate",h)),c||(f=function(){return xh(e)},e.j.D(r,"timeupdate",f),xh(e)),e.C&&(e.C.onManifestUpdated(c),c&&(p=e.Qa().end,e.j.D(r,"progress",function(){var t=e.Qa().end;p!=t&&(e.C.onManifestUpdated(e.W()),p=t)}))),e.Sa=!0,T(m)}})}(b,c,r),0)})},"srcEqualsInner_"),14);case 14:b.dispatchEvent(Qc("loaded"));case 6:if(k(A),!i){A.A(25);break}return E(A,i.destroy(),25);case 25:b.Ta=null,_(A,0);break;case 5:if(!(v=I(A))||7e3==v.code){A.A(27);break}return E(A,b.Bc(!1),27);case 27:throw v}})},r.dj=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,r=this;return L(function(i){return 1==i.g?E(i,th(r),2):3!=i.g?(n=i.h,E(i,r.Bc(e,t),3)):i.return(n)})},r.Uh=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,r=this;return L(function(i){return 1==i.g?E(i,th(r,t),2):3!=i.g?(n=i.h,E(i,r.detach(e),3)):i.return(n)})},r.preload=function(e,t,n,r){t=void 0===t?null:t;var i,a,s=this;return L(function(o){return 1==o.g?(ed(i=Ah(s),r||s.g,Ah(s)),E(o,nh(s,e,t,n,!1,i),2)):((a=o.h)?a.start():Vh(s,new Ue(2,7,7005)),o.return(a))})},r.ng=function(){var e,t,n,r,i=this;return L(function(a){for(e=[],t=g(i.Ee),n=t.next();!n.done;n=t.next())(r=n.value).j||e.push(r.destroy());return i.Ee=[],E(a,Promise.all(e),0)})},r.Lk=function(){for(var e=this.ma;e.g;)e.release()},r.md=function(e){return new ya(e)},r.configure=function(e,t){var n=this.getConfiguration();if(2==arguments.length&&"string"==typeof e&&(e=Fu(e,t)),"preferredVariantRole"in e&&(de("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(de("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(de("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){de("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var r=ae();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===r.Ha(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(de("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),r=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=r),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){r=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-r)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=r+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(de("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(de("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(de("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(de("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(de("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(de("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(de("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(de("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){de("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var a=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return a},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(de("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(de("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(de("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(de("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(de("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(de("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(de("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(de("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(de("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(de("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var s in r=!1,e.drm.advanced){var o=e.drm.advanced[s];i=o.videoRobustness,o=o.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[i],r=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[o],r=!0)}r&&de("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(de("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(de("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(de("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),s=ed(this.g,e,Ah(this)),gh(this,n),s},r.sj=function(e){this.Zf=e},r.getConfiguration=function(){var e=Ah(this);return ed(e,this.g,Ah(this)),e},r.Cj=function(){return this.Zf},r.ci=function(){return ed(Ah(this),this.g,Ah(this)),zu(this.g,Ah(this))},r.Zh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.Qa().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},r.Ii=function(){var e,t=this.getConfiguration();for(e in this.g)delete this.g[e];ed(this.g,Ah(this),Ah(this)),gh(this,t)},r.Kj=function(){return this.m},r.ai=function(){return this.i?this.i.type:null},r.Oj=function(){return this.h},r.Wb=function(){return this.J},r.rd=function(){return this.X},r.Yh=function(){return this.C?this.C:null},r.ei=function(){return this.Da?this.Da:null},r.W=function(){return this.i&&!this.wa()?this.i.presentationTimeline.W():!(!this.h||!this.h.src&&!this.wa())&&this.h.duration==1/0},r.Vc=function(){return!!this.i&&this.i.presentationTimeline.Vc()},r.hk=function(){if(this.i&&!this.wa()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.wa())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},r.qk=function(){if(this.i&&!this.wa()){var e=this.i.variants;return!(!e.length||(e=e[0]).audio||!e.video||e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.wa()||!this.h.audioTracks)&&0==this.h.audioTracks.length},r.Qa=function(){if(this.i&&!this.wa()){if(!this.Sa&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Xb(),end:e.Gb()}}if(this.h&&(this.h.src||this.wa())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return{start:t,end:e=Math.min(e.end(e.length-1),n)}}return{start:0,end:0}},r.ek=function(){this.W()&&(this.h.currentTime=this.Qa().end)},r.ik=function(){return this.Sa},r.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},r.drmInfo=function(){return this.F?this.F.g:null},r.Wd=function(){return this.F?this.F.Wd():1/0},r.Gg=function(){return this.F?this.F.Gg():[]},r.Xe=function(){return this.F?this.F.Xe():{}},r.Ng=function(){return this.R?this.R.g==ja:!!this.X},r.Ob=function(){return this.h?this.N?this.N.i:1:0},r.Fh=function(e){this.m==tf&&this.l&&ou(this.l,e)},r.se=function(e,t){t=void 0===t||t,0==e?K("A trick play rate of 0 is unsupported!"):(this.N.set(e),this.m==tf&&(this.o.playbackRateChanged(e),this.Fh(t&&1!=e)),kh(this,e))},r.Pd=function(){var e=this.N.Tc();this.m==nf&&this.N.set(e),this.m==tf&&(this.N.set(e),this.o.playbackRateChanged(e),this.Fh(!1)),this.ac.Pa()},r.mc=function(){if(this.i&&!this.wa()){for(var e=this.l?this.l.o:null,t=[],n=0,r=g(this.i.variants),i=r.next();!i.done;i=r.next())if(Zr(i=i.value)){var a=$r(i);a.active=i==e,a.active||1==n||null==e||i.video!=e.video||i.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var s=Ph(this);return(e=Array.from(this.h.audioTracks)).length?e.map(function(e){return Jr(e,s)}):s?[Jr(null,s)]:[]}return[]},r.Kc=function(){if(this.i){if(this.wa())return[];for(var e=this.l?this.l.B:null,t=[],n=g(this.i.textStreams),r=n.next();!r.done;r=n.next()){var i=Yr(r=r.value);i.active=r==e,t.push(i)}return t}return this.h&&this.h.src&&this.h.textTracks?bh(this).map(function(e){return Qr(e)}):[]},r.Hj=function(){var e=this.Ge;return this.i&&(e=this.i.imageStreams),e.map(function(e){return Wr(e)})},r.vj=function(e){var t,n,r=this;return L(function(i){return 1==i.g?E(i,mh(r,e),2):(t=i.h)?(n=[],t.segmentIndex.Fb(function(e){var r=ph(e.tilesLayout||t.tilesLayout);if(r)for(var i=r.rows*r.columns,a=e.j-e.startTime,s=0;s<i;s++){var o=yh(e,t,e.startTime+a*s/i,r);n.push(o)}}),t.closeSegmentIndex&&t.closeSegmentIndex(),i.return(n)):i.return(null)})},r.Yj=function(e,t){var n,r,i,a,s,o=this;return L(function(l){return 1==l.g?E(l,mh(o,e),2):(n=l.h)?(n.closeSegmentIndex&&(o.uc.has(n)||(r=new Tr(function(){n.closeSegmentIndex(),o.uc.delete(n)}),o.uc.set(n,r)),o.uc.get(n).ia(5)),null==(i=n.segmentIndex.find(t))?l.return(null):(a=n.segmentIndex.get(i),(s=ph(a.tilesLayout||n.tilesLayout))?l.return(yh(a,n,t,s)):l.return(null))):l.return(null)})},r.kh=function(e){var t,n=this;this.i&&this.G&&((t=n.i.textStreams.find(function(t){return t.id==e.id}))&&t!=n.l.B&&(sd(n.B.h,t,!1),uu(n.l,t),Bh(n),Gh(n),n.Fd=t.language),!this.wa())||function(){if(n.h&&n.h.textTracks){var t=bh(n),r=t.find(function(t){return Xr(t)===e.id});if(r){if(n.u instanceof zd)for(var i=(t=g(t)).next();!i.done;i=t.next()){var a=(i=i.value)===r?n.$?"showing":"hidden":"disabled";i.mode!==a&&(i.mode=a)}else(t=t.find(function(e){return"disabled"!==e.mode}))!==r&&(t&&(t.mode="disabled",n.j.Ma(t,"cuechange"),n.u.remove(0,1/0)),r&&vh(n,r));Bh(n),Gh(n)}}}()},r.Ff=function(e,t,n){var r=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.G&&(function(){var i=r.i.variants.find(function(t){return t.id==e.id});if(i&&Zr(i)){var a=r.l.o;r.g.abr.enabled&&(a.video!=i.video||a.audio&&i.audio&&a.audio.language==i.audio.language&&a.audio.channelsCount==i.audio.channelsCount&&a.audio.label==i.audio.label)&&K("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.wa()?Mh(r,i,!1,!1,0):Mh(r,i,!1,t||!1,n||0),r.K.configure({language:i.language,role:i.audio&&i.audio.roles&&i.audio.roles[0]||"",videoRole:i.video&&i.video.roles&&i.video.roles[0]||"",channelCount:i.audio&&i.audio.channelsCount?i.audio.channelsCount:0,hdrLevel:i.video&&i.video.hdr?i.video.hdr:"",spatialAudio:!(!i.audio||!i.audio.spatialAudio)&&i.audio.spatialAudio,videoLayout:i.video&&i.video.videoLayout?i.video.videoLayout:"",audioLabel:i.audio&&i.audio.label?i.audio.label:"",videoLabel:i.video&&i.video.label?i.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:i.audio&&i.audio.codecs?i.audio.codecs:"",activeAudioCodec:a.audio&&a.audio.codecs?a.audio.codecs:"",activeAudioChannelCount:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Ch(r)}}(),!this.wa())||function(){if(e.originalAudioId&&r.h&&r.h.audioTracks)for(var t=Array.from(r.h.audioTracks),n=(t=g(t)).next();!n.done;n=t.next())if(Xr(n=n.value)==e.id){Nh(r,n);break}}()},r.Tk=function(e,t){var n,r=this;t=void 0===t?0:t,this.i&&this.G&&((n=r.K.getConfiguration()).audioCodec=e.codecs||"",n.audioLabel=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,r.K.configure(n),Lh(r,!0,t,!1,!1),!this.wa())||function(){if(r.h&&r.h.audioTracks){for(var t=Cr(e.language),n=Array.from(r.h.audioTracks),i=null,a=(n=g(n)).next();!a.done;a=n.next()){var s=(a=a.value).language||"und";if(a.label==e.label&&Cr(s)==t&&a.kind==e.roles[0]){i=a;break}}i&&Nh(r,i)}}()},r.getAudioTracks=function(){if(this.i&&!this.wa()){var e=this.mc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e;if(this.m!=tf||this.wa()||(n=e.filter(function(e){return e.originalVideoId===t.originalVideoId&&(e.audioCodec||cr.includes(e.audioMimeType||""))})),!n.length)return[];e=new Map;for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).originalAudioId;i||null==r.audioId||(i=String(r.audioId)),!i&&r.codecs.includes(",")&&r.audioCodec&&(i="muxed-in-video"),i&&(i+=[r.language,r.label,r.channelsCount,r.spatialAudio].join("_"),e.set(i,{active:r.active,language:r.language,label:r.label,mimeType:r.audioMimeType,codecs:r.audioCodec,primary:r.primary,roles:r.audioRoles||[],accessibilityPurpose:r.accessibilityPurpose,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,originalLanguage:r.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){var t=e.language;return t={active:e.enabled,language:Cr(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t}):[]},r.Vk=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var r=this.mc();if(r.length){var i=r.find(function(e){return e.active});i&&(r=r.find(function(t){return t.audioId===i.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs&&Z(t.videoRoles,e.roles)&&t.videoLabel==e.label}))&&!r.active&&this.Ff(r,t,n)}},r.getVideoTracks=function(){if(this.m==nf||this.wa())return[];var e=this.mc();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e.filter(function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec});if(!n.length)return[];e=new Map;for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).originalVideoId;i||null==r.videoId||(i=String(r.videoId)),i&&e.set(i,{active:r.active,bandwidth:r.videoBandwidth||r.bandwidth,width:r.width,height:r.height,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,mimeType:r.videoMimeType,codecs:r.videoCodec,roles:r.videoRoles||[],label:r.videoLabel})}return Array.from(e.values())},r.xj=function(){return Jh(this.mc())},r.Wj=function(){return Jh(this.Kc())},r.wj=function(){return Array.from(Qh(this.mc()))},r.Vj=function(){return Array.from(Qh(this.Kc()))},r.Ni=function(e,t,n,r,i,a,s){var o=this;n=void 0===n?0:n,r=void 0===r?0:r,i=void 0===i?"":i,a=void 0!==a&&a,s=void 0===s?"":s,this.i&&this.G&&(function(){function l(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var u=o.l.o;o.K=o.g.adaptationSetCriteriaFactory(),o.K.configure({language:e,role:t||"",videoRole:u.video&&u.video.roles&&u.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:a||!1,videoLayout:"",audioLabel:s||"",videoLabel:"",codecSwitchingStrategy:o.g.mediaSource.codecSwitchingStrategy,audioCodec:i||"",activeAudioCodec:u.audio&&u.audio.codecs?u.audio.codecs:"",activeAudioChannelCount:u.audio&&u.audio.channelsCount?u.audio.channelsCount:0,preferredAudioCodecs:o.g.preferredAudioCodecs,preferredAudioChannelCount:o.g.preferredAudioChannelCount});for(var d=o.K.create(o.i.variants),c=null,h=(d=g(d.values())).next();!h.done;h=d.next())Zr(h=h.value)&&(!c||l(c,u)>l(h,u))&&(c=h);c!=u&&(c?(u=$r(c),o.Ff(u,!0,r||0)):Lh(o))}(),!this.wa())||function(){if(o.h&&o.h.audioTracks){var n=ti(o.mc(),e,t||"",!1)[0];n&&o.Ff(n)}}()},r.jh=function(e,t,n){var r,i=this;n=void 0!==n&&n,this.i&&this.G&&(function(){i.Fd=e,i.Md=t||"",i.Ld=n||!1;var r=ti(i.i.textStreams,i.Fd,i.Md,i.Ld)[0]||null;r&&r!=i.l.B&&(sd(i.B.h,r,!1),i.g.streaming.alwaysStreamText||i.Og())&&(uu(i.l,r),Bh(i),Gh(i))}(),!this.wa())||(r=ti(i.Kc(),e,t||"",n||!1)[0])&&i.kh(r)},r.Uk=function(e,t,n){var r=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.G&&(function(){for(var i=null,a=g(r.i.variants),s=a.next();!s.done;s=a.next())if((s=s.value).audio.label==e){i=s;break}null!=i&&(r.K=r.g.adaptationSetCriteriaFactory(),r.K.configure({language:i.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Lh(r,t,n))}(),!this.wa())||function(){if(r.h&&r.h.audioTracks){for(var t=Array.from(r.h.audioTracks),n=null,i=(t=g(t)).next();!i.done;i=t.next())(i=i.value).label==e&&(n=i);n&&Nh(r,n)}}()},r.Og=function(){var e=this.$;return this.u?this.u.isTextVisible():e},r.Bj=function(){return this.kb.map(function(e){return Yr(e)})},r.zj=function(e){if(de("getChapters","Please use an getChaptersAsync."),!this.kb.length)return[];var t=Cr(e);if(!(e=this.kb.filter(function(e){return Cr(e.language)==t})).length)return[];for(var n=[],r=new Set,i=(e=g(e)).next();!i.done;i=e.next())(i=i.value).segmentIndex&&i.segmentIndex.Fb(function(e){var t=e.P()[0],i=e.startTime+"-"+e.endTime+"-"+t;e={id:i,title:t,startTime:e.startTime,endTime:e.endTime},r.has(i)||(n.push(e),r.add(i))});return n},r.Aj=function(e){var t,n,r,i,a,s,o,l=this;return L(function(u){switch(u.g){case 1:if(!l.kb.length)return u.return([]);if(t=Cr(e),!(n=l.kb.filter(function(e){return Cr(e.language)==t})).length)return u.return([]);r=[],i=new Set,a=g(n),s=a.next();case 2:if(s.done){u.A(4);break}if((o=s.value).segmentIndex){u.A(5);break}return E(u,o.createSegmentIndex(),5);case 5:o.segmentIndex.Fb(function(e){var t=e.P()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},i.has(n)||(r.push(e),i.add(n))}),s=a.next(),u.A(2);break;case 4:return u.return(r)}})},r.qh=function(e){e=!!e,this.$!=e&&(this.$=e,this.m==tf?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=ti(this.i.textStreams,this.Fd,this.Md,this.Ld)).length>0&&(uu(this.l,e[0]),Bh(this),Gh(this)):function(e){var t=e.h.get(ot);t&&(ku(t),_u(t).catch(function(){}),e.H=e.h.get(ot),e.h.delete(ot),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),jh(this))},r.Pj=function(){if(this.G)var e=this.G.He();else{if(null==this.O)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.wa()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},r.di=function(){if(this.i&&!this.wa()){var e=this.i.presentationTimeline;return null===(e=e.m||e.i)?null:new Date(1e3*e)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},r.Ze=function(){return this.W()&&this.i?this.i.presentationTimeline.Ze():null},r.Fc=function(){if(this.m==tf)return this.H.Fc();var e={total:[],audio:[],video:[],text:[]};return this.m==nf&&(e.total=Ys(this.h.buffered)),e},r.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},r.getStats=function(){if(this.m!=tf&&this.m!=nf)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};_h(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||function(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}(this.B,Math.round(100*t)),this.G&&(this.B.T=this.G.Gh(),this.B.V=this.G.Ih()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),function(e,t,n){e.R=t,e.O=n}(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?function(e){return e.J?e.J:NaN}(this.F):NaN,ld(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&null!=(e=Eh(this))&&(this.B.F=e/1e3),t=this.mc().find(function(e){return e.active}),e=this.Kc().find(function(e){return e.active}),t){if(t.bandwidth){var n=this.N?this.N.i:1,r=n*t.bandwidth;e&&e.bandwidth&&(r+=n*e.bandwidth),this.B.B=r}t.width&&t.height&&ld(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=tf||this.wa()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==nf&&ud(this.B,NaN),dd(this.B)},r.Od=function(e,t,n,r,i,a,s){s=void 0!==s&&s;var o,l,u,d,c,h,f,g,p,m,y=this;return L(function(v){switch(v.g){case 1:if(y.m!=tf&&y.m!=nf)throw new Ue(1,7,7004);if("subtitles"!=n&&"captions"!=n&&K("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),r){v.A(2);break}return E(v,Th(y,e),3);case 3:r=v.h;case 2:if(o=[],y.C&&(o=y.C.getCuePoints()),y.m!=nf){v.A(4);break}return l=ae(),s&&"WEBKIT"===l.Ha()&&(n="forced"),E(v,function(e,t,n,r,i,a,s){var o,l,u,d;return L(function(c){if(1==c.g)return"text/vtt"!=i||s.length?E(c,Sh(e,t,e.J,e.g.streaming.retryParameters),3):c.A(2);2!=c.g&&(o=c.h,l=wh(e,o,i,s),u=new Blob([l],{type:"text/vtt"}),t=nl(u),i="text/vtt"),d=document.createElement("track");e:{var h=e.M,f=t;try{if(!h.g.enabled){var g=f;break e}var p=tc(h);p.ot=bc,p.su=!0,g=fc(f,cc(p));break e}catch(m){$("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",m),g=f;break e}g=void 0}return d.src=g,d.label=a,d.kind=r,d.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(d),e.Yf.push(d),c.return(d)})}(y,e,t,n,r,a||"",o),5);case 5:if((u=v.h).track)return Oh(y),Bh(y),v.return(Qr(u.track));throw new Ue(1,2,2012);case 4:if(d=lt,c=y.Qa(),h=c.end-c.start,y.i&&(h=y.i.presentationTimeline.getDuration()),h==1/0)throw new Ue(1,4,4033);if(!o.length){v.A(6);break}return E(v,Sh(y,e,y.J,y.g.streaming.retryParameters),7);case 7:f=v.h,g=wh(y,f,r,o),p=new Blob([g],{type:"text/vtt"}),e=nl(p),r="text/vtt";case 6:if(m={id:y.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ll(0,h,[e]),mimeType:r||"",codecs:i||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:d.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([tr(r||"",i||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!pr(tr(m.mimeType,m.codecs)))throw new Ue(2,2,2014,r);return y.i.textStreams.push(m),Oh(y),Bh(y),v.return(Yr(m))}})},r.Me=function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T,S=this;return L(function(w){switch(w.g){case 1:if(S.m!=tf&&S.m!=nf)throw new Ue(1,7,7004);if(t){w.A(2);break}return E(w,Th(S,e),3);case 3:t=w.h;case 2:if("text/vtt"!=t)throw new Ue(1,2,2017,e);if(n=lt,r=S.Qa(),i=r.end-r.start,S.i&&(i=S.i.presentationTimeline.getDuration()),i==1/0)throw new Ue(1,4,4045);return E(w,Sh(S,e,S.J,S.g.streaming.retryParameters),4);case 4:if(a=w.h,!(s=gr(t)))throw new Ue(2,2,2014,t);for(o=s(),l={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},u=Ne(a),d=o.parseMedia(u,l,e,[]),c=[],h=g(d),f=h.next(),p={};!f.done;p={Sf:void 0,nd:void 0},f=h.next())p.nd=f.value,p.Sf=null,m=function(t){return function(){return null==t.Sf&&(t.Sf=tt([e],[t.nd.payload])),t.Sf||[]}}(p),y=new Us(p.nd.startTime,p.nd.endTime,m,0,null,null,0,0,1/0),p.nd.payload.includes("#xywh")&&4===(v=p.nd.payload.split("#xywh=")[1].split(",")).length&&y.If({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)}),c.push(y);if(b=t,!c.length){w.A(5);break}return E(w,Id(c[0].P()[0],S.J,S.g.manifest.retryParameters),6);case 6:b=w.h;case 5:return T={id:S.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Cl(c),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.Uf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([tr(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},S.m==nf?S.Ge.push(T):S.i.imageStreams.push(T),Oh(S),w.return(Wr(T))}})},r.Le=function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b=this;return L(function(T){switch(T.g){case 1:if(b.m!=tf&&b.m!=nf)throw new Ue(1,7,7004);if(n){T.A(2);break}return E(T,Th(b,e),3);case 3:n=T.h;case 2:if(r=lt,i=b.Qa(),a=i.end-i.start,b.i&&(a=b.i.presentationTimeline.getDuration()),a==1/0)throw new Ue(1,4,4055);return E(T,Sh(b,e,b.J,b.g.streaming.retryParameters),4);case 4:if(s=T.h,!(o=gr(n)))throw new Ue(2,2,2014,n);for(l=o(),u={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},d=Ne(s),c=l.parseMedia(d,u,e,[]),h=[],f=g(c),p=f.next(),m={};!p.done;m={Ue:void 0},p=f.next())m.Ue=p.value,y=new Us(m.Ue.startTime,m.Ue.endTime,function(e){return function(){return[e.Ue.payload]}}(m),0,null,null,0,0,1/0),h.push(y);return v={id:b.Be++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Cl(h),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([tr("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.kb.push(v),Oh(b),T.return(Yr(v))}})},r.$k=function(e,t){this.xa.width=e,this.xa.height=t},r.fh=function(e){if(this.m==tf){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.F)t=!1;else{for(var n=g(t.h.values()),r=n.next();!r.done;r=n.next())!(r=r.value).Zd||r.Ja||r.qb||(r.Zd=!1,Iu(t,r,e));t=!0}}else t=!1;return t},r.Hg=function(){return K("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},r.Lj=function(){return this.xc},r.Fj=function(){var e={video:null,audio:null,text:null};if(this.m!=tf)return e;for(var t=this.l.o,n=this.h.currentTime,r=(t=g([t.video,t.audio,this.l.B])).next();!r.done;r=t.next())if((r=r.value)&&r.segmentIndex){var i=r.segmentIndex.find(n);i={codecs:(i=r.segmentIndex.get(i)).codecs||r.codecs,mimeType:i.mimeType||r.mimeType,bandwidth:i.bandwidth||r.bandwidth},"video"==r.type?(i.width=r.width,i.height=r.height,e.video=i):"audio"==r.type?e.audio=i:r.type==ot&&(e.text=i)}return e},r.Ti=function(e){this.xe=e},r.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Zh||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=!1,r=!1,i=g(this.i.variants),a=i.next();!a.done;a=i.next()){var s=(a=a.value)[e.type];s&&(s.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(r=!0))}return!(!n&&r||(this.De.Ea(1),Lh(this,!1,t=this.Fc().video.reduce(function(e,t){return e+t.end-t.start},0),!0,!1),0))}return!1},r.addFont=function(t,n){return function(t,n){var r,i,a,s;return L(function(o){if(1==o.g)return"fonts"in document&&"FontFace"in e?E(o,document.fonts.ready,2):o.return();if(!("entries"in document.fonts))return o.return();for(r=g(function(e){for(var t=[],n=(e=e.entries()).next();!1===n.done;)t.push(n.value),n=e.next();return t}(document.fonts)),i=r.next();!i.done;i=r.next())if((a=i.value).family===t&&"swap"===a.display)return o.return();s=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(s),T(o)})}(t,n)},r.wa=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},r.be=function(){return!(this.h&&!this.h.ended)||this.Sa&&!this.W()&&this.h.currentTime>=this.Qa().end},B("shaka.Player",Wc),Wc.prototype.isEnded=Wc.prototype.be,Wc.prototype.isRemotePlayback=Wc.prototype.wa,Wc.prototype.addFont=Wc.prototype.addFont,Wc.prototype.setVideoContainer=Wc.prototype.Ti,Wc.prototype.getFetchedPlaybackInfo=Wc.prototype.Fj,Wc.prototype.getManifestParserFactory=Wc.prototype.Lj,Wc.prototype.getManifest=Wc.prototype.Hg,Wc.prototype.retryStreaming=Wc.prototype.fh,Wc.prototype.setMaxHardwareResolution=Wc.prototype.$k,Wc.prototype.addChaptersTrack=Wc.prototype.Le,Wc.prototype.addThumbnailsTrack=Wc.prototype.Me,Wc.prototype.addTextTrackAsync=Wc.prototype.Od,Wc.prototype.getStats=Wc.prototype.getStats,Wc.prototype.getBufferedInfo=Wc.prototype.Fc,Wc.prototype.getSegmentAvailabilityDuration=Wc.prototype.Ze,Wc.prototype.getPresentationStartTimeAsDate=Wc.prototype.di,Wc.prototype.getPlayheadTimeAsDate=Wc.prototype.Pj,Wc.prototype.setTextTrackVisibility=Wc.prototype.qh,Wc.prototype.getChaptersAsync=Wc.prototype.Aj,Wc.prototype.getChapters=Wc.prototype.zj,Wc.prototype.getChaptersTracks=Wc.prototype.Bj,Wc.prototype.isTextTrackVisible=Wc.prototype.Og,Wc.prototype.selectVariantsByLabel=Wc.prototype.Uk,Wc.prototype.selectTextLanguage=Wc.prototype.jh,Wc.prototype.selectAudioLanguage=Wc.prototype.Ni,Wc.prototype.getTextLanguages=Wc.prototype.Vj,Wc.prototype.getAudioLanguages=Wc.prototype.wj,Wc.prototype.getTextLanguagesAndRoles=Wc.prototype.Wj,Wc.prototype.getAudioLanguagesAndRoles=Wc.prototype.xj,Wc.prototype.getVideoTracks=Wc.prototype.getVideoTracks,Wc.prototype.selectVideoTrack=Wc.prototype.Vk,Wc.prototype.getAudioTracks=Wc.prototype.getAudioTracks,Wc.prototype.selectAudioTrack=Wc.prototype.Tk,Wc.prototype.selectVariantTrack=Wc.prototype.Ff,Wc.prototype.selectTextTrack=Wc.prototype.kh,Wc.prototype.getThumbnails=Wc.prototype.Yj,Wc.prototype.getAllThumbnails=Wc.prototype.vj,Wc.prototype.getImageTracks=Wc.prototype.Hj,Wc.prototype.getTextTracks=Wc.prototype.Kc,Wc.prototype.getVariantTracks=Wc.prototype.mc,Wc.prototype.cancelTrickPlay=Wc.prototype.Pd,Wc.prototype.trickPlay=Wc.prototype.se,Wc.prototype.useTrickPlayTrackIfAvailable=Wc.prototype.Fh,Wc.prototype.getPlaybackRate=Wc.prototype.Ob,Wc.prototype.isBuffering=Wc.prototype.Ng,Wc.prototype.getKeyStatuses=Wc.prototype.Xe,Wc.prototype.getActiveSessionsMetadata=Wc.prototype.Gg,Wc.prototype.getExpiration=Wc.prototype.Wd,Wc.prototype.drmInfo=Wc.prototype.drmInfo,Wc.prototype.keySystem=Wc.prototype.keySystem,Wc.prototype.isFullyLoaded=Wc.prototype.ik,Wc.prototype.goToLive=Wc.prototype.ek,Wc.prototype.seekRange=Wc.prototype.Qa,Wc.prototype.isVideoOnly=Wc.prototype.qk,Wc.prototype.isAudioOnly=Wc.prototype.hk,Wc.prototype.isInProgress=Wc.prototype.Vc,Wc.prototype.isLive=Wc.prototype.W,Wc.prototype.getQueueManager=Wc.prototype.ei,Wc.prototype.getAdManager=Wc.prototype.Yh,Wc.prototype.getAssetUri=Wc.prototype.rd,Wc.prototype.getNetworkingEngine=Wc.prototype.Wb,Wc.prototype.getMediaElement=Wc.prototype.Oj,Wc.prototype.getManifestType=Wc.prototype.ai,Wc.prototype.getLoadMode=Wc.prototype.Kj,Wc.prototype.resetConfiguration=Wc.prototype.Ii,Wc.prototype.getBufferFullness=Wc.prototype.Zh,Wc.prototype.getNonDefaultConfiguration=Wc.prototype.ci,Wc.prototype.getConfigurationForLowLatency=Wc.prototype.Cj,Wc.prototype.getConfiguration=Wc.prototype.getConfiguration,Wc.prototype.configurationForLowLatency=Wc.prototype.sj,Wc.prototype.configure=Wc.prototype.configure,Wc.prototype.releaseAllMutexes=Wc.prototype.Lk,Wc.prototype.destroyAllPreloads=Wc.prototype.ng,Wc.prototype.preload=Wc.prototype.preload,Wc.prototype.detachAndSavePreload=Wc.prototype.Uh,Wc.prototype.unloadAndSavePreload=Wc.prototype.dj,Wc.prototype.load=Wc.prototype.load,Wc.prototype.updateStartTime=Wc.prototype.kl,Wc.prototype.unload=Wc.prototype.Bc,Wc.prototype.detach=Wc.prototype.detach,Wc.prototype.attachCanvas=Wc.prototype.jj,Wc.prototype.attach=Wc.prototype.fc,Wc.probeSupport=function(t){var n,r,i,a,s;return t=void 0===t||t,L(function(o){switch(o.g){case 1:if(n={},!t){o.A(2);break}return E(o,function(){var t,n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,w,k,_,R,x,C,D,M,N,P,O;return L(function(F){if(1==F.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},r=g(t),i=r.next();!i.done;i=r.next())a=i.value,n[a]=null;return F.return(n)}for(s="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),l={"com.widevine.alpha":o=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.widevine.alpha.experiment":o,"com.microsoft.playready.recommendation":["150","2000","3000"]},u={videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},d=[null,"cenc","cbcs"],c=new Map,h=ae(),f=function(e,t,n){var r,i,a,o,l,u,d,f,p,m,y,v;return L(function(b){switch(b.g){case 1:return S(b,2),E(b,t.createMediaKeys(),5);case 5:r=b.h;case 4:A(b,3);break;case 2:return I(b),b.return();case 3:if(a=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),h.ti()&&(a=!1),o=t.getConfiguration().videoCapabilities,l=t.getConfiguration().audioCapabilities,u={persistentState:a,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},c.get(e)?u=c.get(e):c.set(e,u),(d=o[0].encryptionScheme)&&!u.encryptionSchemes.includes(d)&&u.encryptionSchemes.push(d),(f=o[0].robustness)&&!u.videoRobustnessLevels.includes(f)&&u.videoRobustnessLevels.push(f),(p=l[0].robustness)&&!u.audioRobustnessLevels.includes(p)&&u.audioRobustnessLevels.push(p),!n||!("getStatusForPolicy"in r)){b.A(0);break}m=g(s),y=m.next();case 7:if(y.done){b.A(0);break}if(v=y.value,u.minHdcpVersions.includes(v)){b.A(8);break}return E(b,r.getStatusForPolicy({minHdcpVersion:v}),10);case 10:if("usable"!=b.h){b.A(0);break}u.minHdcpVersions.includes(v)||u.minHdcpVersions.push(v);case 8:y=m.next(),b.A(7)}})},p=function(e,t,n,r,i){var a,s,o,l,d,c,h,p,m,y;return i=void 0!==i&&i,L(function(v){switch(v.g){case 1:for(S(v,2),a=Ut(u),s=g(a.videoCapabilities),o=s.next();!o.done;o=s.next())(l=o.value).encryptionScheme=t,l.robustness=n;for(d=g(a.audioCapabilities),c=d.next();!c.done;c=d.next())(h=c.value).encryptionScheme=t,h.robustness=r;return(p=Ut(a)).persistentState="required",p.sessionTypes=["persistent-license"],m=[p,a],"MOBILE"==ae().Ua()?E(v,Ir(5,navigator.requestMediaKeySystemAccess(e,m)),7):E(v,navigator.requestMediaKeySystemAccess(e,m),6);case 6:y=v.h,v.A(5);break;case 7:y=v.h;case 5:return E(v,f(e,y,i),8);case 8:A(v,0);break;case 2:I(v),T(v)}})},m=g(t),y=m.next();!y.done;y=m.next())v=y.value,c.set(v,null);for(b=function(e){return"WEBKIT"!==ae().Ha()||"org.w3.clearkey"!==e},w=[],k=g(t),_=k.next();!_.done;_=k.next())if(R=_.value,b(R)){for(x=!0,C=g(d),D=C.next();!D.done;D=C.next())M=D.value,w.push(p(R,M,"","",x)),x=!1;for(N=g(l[R]||[]),P=N.next();!P.done;P=N.next())O=P.value,w.push(p(R,null,O,"")),w.push(p(R,null,"",O))}return E(F,Promise.all(w),2)}return F.return(ea(c))})}(),3);case 3:n=o.h;case 2:return r=function(){var e={};if(ae(),Wy())for(var t=g(Za.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(n=(t=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!n.done;n=t.next())e[n=n.value]=Wy()?Za.has(n):""!=Zs().canPlayType(n);return e}(),i=function(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(p(cr)),t={};ae();for(var n=(e=g(e)).next();!n.done;n=e.next()){if(pr(n=n.value))t[n]=!0;else if(Wy()){var r=or(n);r=tr(r,Vr(lr(n),r)),t[n]=pt(r)||!!Yn(r)}else t[n]=""!=Zs().canPlayType(n);t[r=n.split(";")[0]]=t[r]||t[n]}return t}(),E(o,ae().jc(),4);case 4:return a=o.h,s={manifest:r,media:i,drm:n,hardwareResolution:a},af.forEach(function(e,t){s[t]=e()}),o.return(s)}})},Wc.isBrowserSupported=function(){return e.Promise||K("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")||(ae(),!Wy()&&""==Zs().canPlayType("application/x-mpegurl")))},Wc.setQueueManagerFactory=function(e){of=e},Wc.setAdManagerFactory=function(e){sf=e},Wc.registerSupportPlugin=Jc,Wc.prototype.destroy=Wc.prototype.destroy;var Zh=0,ef=1,tf=2,nf=3;Wc.LoadMode={DESTROYED:Zh,NOT_LOADED:ef,MEDIA_SOURCE:tf,SRC_EQUALS:nf},Wc.version="v4.16.4";var rf=["4","16"];fe=new function(e){this.g=e,this.i=ce,this.h=he}(new ue(Number(rf[0]),Number(rf[1])));var af=new Map,sf=null,of=null;function lf(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function uf(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function df(e,t,n){var r=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new te,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){r.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){r.i=!1})}function cf(){}function hf(e,t){for(var n=[],r=(e=g(Kt(e,"Ad"))).next();!r.done;r=e.next())if((r=Xt(r.value,"InLine"))&&(r=Xt(r,"Creatives")))for(var i=(r=g(Kt(r,"Creative"))).next();!i.done;i=r.next()){var a=Xt(i=i.value,"Linear");if(a&&ff(n,t,a),i=Xt(i,"NonLinearAds"))for(var s=(i=g(i=Kt(i,"NonLinear"))).next();!s.done;s=i.next())e:{a=n;var o=t,l=s.value,u=Xt(l,"StaticResource");if(u)s=u.attributes.creativeType;else{if(!(u=Xt(l,"HTMLResource")))break e;s="text/html"}if(u=Yt(u)){"text/html"===s&&(u="data:text/html;charset=UTF-8,"+encodeURIComponent(u));var d=Jt(l,"width",sn)||Jt(l,"expandedWidth",sn),c=Jt(l,"height",sn)||Jt(l,"expandedHeight",sn);if(d||c){var h=null,f=Xt(l,"NonLinearClickThrough");f&&(f=Yt(f))&&(h=f),f=null,(l=l.attributes.minSuggestedDuration)&&(f=Pt(l)),l=0,null!=o&&(l=o),a.push({id:null,groupId:null,startTime:l,endTime:null,uri:u,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:f,once:!0,pre:null==o,post:o==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:d||0,y:c||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:h})}}}}return n}function ff(e,t,n){var r=0;null!=t&&(r=t);var i=null;n.attributes.skipoffset&&(i=Pt(n.attributes.skipoffset),isNaN(i)&&(i=null));var a=Xt(n,"MediaFiles");if(a){var s=null;for((n=Xt(n,"VideoClicks"))&&(n=Xt(n,"ClickThrough"))&&(n=Yt(n))&&(s=n),a=n=Kt(a,"MediaFile"),(n=n.filter(function(e){return"streaming"==e.attributes.delivery})).length&&(a=n),n=(a=g(a=a.sort(function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)}))).next();!n.done;n=a.next())if(!(n=n.value).attributes.apiFramework){var o=Yt(n);if(o){e.push({id:null,groupId:null,startTime:r,endTime:null,uri:o,mimeType:n.attributes.type||null,isSkippable:null!=i,skipOffset:i,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:s});break}}}}function gf(t,n,r,i,a){var s=this;this.u=t,this.i=n,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=a,this.j=null,this.h=new te,google.ima.settings.setLocale(r),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.4"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new Mi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.H))),t.o.customPlayheadTracker){var r={currentTime:t.i.currentTime};t.g=n.getAdsManager(r,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.D(t.i,"timeupdate",function(){t.i.duration&&(r.currentTime=t.i.currentTime)}),t.h.D(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.C);t.l(new Mi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var a=(i=g(i)).next();!a.done;a=i.next())n.push({start:a.value,end:null});t.l(new Mi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new Mi(n,t))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){pf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){mf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(t){mf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){yf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){yf(e,t)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.D(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),"ResizeObserver"in e?(t.B=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.B.observe(t.i)):t.h.D(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.G||t.o.skipPlayDetection?t.g.start():t.h.Ba(t.i,"play",function(){t.G=!0,t.g.start()})}catch(s){yf(t,null)}}(s,t)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){pf(s,e)}),this.h.D(this.i,"ended",function(){s.m.contentComplete()}),this.h.Ba(this.i,"play",function(){s.G=!0})}function pf(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new Mi("ad-error",t)),yf(e,null),e.l(new Mi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function mf(e,t){var n=t.getAd();n?(e.j=new df(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Mi("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new Mi("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):K("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function yf(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Mi("ad-content-resume-requested")),e.l(new Mi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function vf(e,t,n,r,i,a){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=r,this.m=i,this.u=a,this.C=t.overlay}function bf(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function Ef(e,t,n,r){var i=this;this.M=null,this.m=e,this.C=t,this.g=n,this.G=null,this.u=!0,this.h=this.g,this.va=r,this.ma=new Set,this.T=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new Wc,Cf(this),this.I=new te,this.j=new te,this.J=!1,this.$=this.o=this.B=this.l=null,this.aa=!1,this.O=-1,this.X=function(){if(!i.J&&i.l&&!i.C.wa()){i.l=i.g.currentTime;var e=If(i);e&&kf(i,e,1,1,Date.now())}},this.V=function(){if(!(i.J||i.l||i.C.wa())){i.l=i.g.currentTime;var e=If(i,!0);e||(e=If(i)),e&&kf(i,e,1,1,Date.now())}},this.oa=function(){if(!i.J&&i.l&&!i.C.wa()){var e=i.g.currentTime;i.B&&!i.B.pre&&!i.B.post&&e<(i.B.endTime||i.B.startTime)&&(i.B=null)}},this.R=new Tr(this.X),this.N=new Tr(function(){var e,t,n,r,a,s,o,l,u,d,c;return L(function(h){switch(h.g){case 1:if(!i.H.size||null==i.l){h.A(0);break}if((e=i.C.m)==Zh||e==ef)return h.return();t=!1,n=Array.from(i.H),r=i.C.Qa(),a=g(n),s=a.next();case 3:if(s.done){h.A(5);break}if((o=s.value)==i.B){h.A(4);break}if(l=o.endTime||o.startTime,!(r.start-l>=1)){(u=o.startTime-i.l)>0&&u<=10&&(!i.F.has(o)&&Lf(o)&&i.F.set(o,i.i.preload(o.uri,null,o.mimeType||void 0)),Nf(i,o)),h.A(4);break}if(!i.F.has(o)){h.A(7);break}return E(h,i.F.get(o),8);case 8:(d=h.h)&&d.destroy(),i.F.delete(o);case 7:Pf(i,o),c=o.id||JSON.stringify(o),i.T.has(c)&&i.T.delete(c),i.H.delete(o),Tf(i),o.overlay||(t=!0);case 4:s=a.next(),h.A(3);break;case 5:t&&xf(i),T(h)}})}),this.configure(this.C.getConfiguration().ads)}function Tf(e){e.aa&&!e.H.size&&(e.I.Ma(e.g,"playing",e.V),e.I.Ma(e.g,"timeupdate",e.V),e.I.Ma(e.g,"seeked",e.oa),e.I.Ma(e.g,"ended",e.X),-1!=e.O&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.R&&e.R.stop(),e.N&&e.N.stop(),e.aa=!1)}function Sf(e){if(e.m&&e.M){var t=e.M.supportsMultipleMediaElements,n=e.g;(n.webkitPresentationMode&&"inline"!==n.webkitPresentationMode||n.webkitDisplayingFullscreen)&&(t=!1),e.u==t&&(e.u=!t,e.u?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||((t=document.createElement(e.g.tagName)).autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.u=!0}function wf(e,t){var n,r,i;L(function(a){if(1==a.g){if(n=null,(r=t.values.find(function(e){return"ID"==e.key}))&&(n=r.data),n){if(e.ma.has(n))return a.return();e.ma.add(n)}return Cf(e),i=[],t&&t.values.find(function(e){return"X-OVERLAY-ID"==e.key})?(i=function(e){var t=[];if(!e)return t;var n=e.values.find(function(e){return"X-ASSET-URI"==e.key});if(!n)return t;if(!(n=n.data))return t;var r=null,i=e.values.find(function(e){return"X-OVERLAY-ID"==e.key});i&&(r=i.data),i=null==r?Math.floor(10*e.startTime)/10:e.startTime;var a=e.endTime;e.endTime&&e.endTime!=1/0&&"number"==typeof e.endTime&&(a=null==r?Math.floor(10*e.endTime)/10:e.endTime);var s=!1,o=!1,l=!1,u=e.values.find(function(e){return"CUE"==e.key});u&&(l=u.data,s=l.includes("ONCE"),o=l.includes("PRE"),l=l.includes("POST")),u=null;var d=e.values.find(function(e){return"X-ASSET-MIMETYPE"==e.key});d&&(u=d.data),d=!1;var c=e.values.find(function(e){return"X-LOOP"==e.key});c&&(d="YES"==c.data),c=1;var h=e.values.find(function(e){return"X-DEPTH"==e.key});h&&(c=parseFloat(h.data),isNaN(c)&&(c=1)),h=null;var f=e.values.find(function(e){return"X-BACKGROUND"==e.key});f&&(h=f.data),f=1920;var g=1080,p=e.values.find(function(e){return"X-VIEWPORT"==e.key});if(p){if(2!=(g=p.data.split("x")).length)return t;f=parseFloat(g[0]),g=parseFloat(g[1])}if(f={viewport:{x:f,y:g},topLeft:{x:0,y:0},size:{x:f,y:g}},g=e.values.find(function(e){return"X-OVERLAY-POSITION"==e.key})){if(2!=(g=g.data.split("x")).length)return t;f.topLeft.x=parseFloat(g[0]),f.topLeft.y=parseFloat(g[1])}if(g=e.values.find(function(e){return"X-OVERLAY-SIZE"==e.key})){if(2!=(g=g.data.split("x")).length)return t;f.size.x=parseFloat(g[0]),f.size.y=parseFloat(g[1])}if(g=null,(p=e.values.find(function(e){return"X-SQUEEZECURRENT"==e.key}))&&(g=parseFloat(p.data),isNaN(g)&&(g=1),g={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*g,y:1080*g}},e=e.values.find(function(e){return"X-SQUEEZECURRENT-POSITION"==e.key}))){if(2!=(e=e.data.split("x")).length)return t;g.topLeft.x=parseFloat(e[0]),g.topLeft.y=parseFloat(e[1])}return t.push({id:r,groupId:null,startTime:i,endTime:a,uri:n,mimeType:u,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:s,pre:o,post:l,timelineRange:!0,loop:d,overlay:f,displayOnBackground:-1==c,currentVideo:g,background:h,clickThroughUrl:null}),t}(t),a.A(2)):E(a,function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,g,p,m,y,v,b,T,w,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H,V,K,$;return L(function(L){switch(L.g){case 1:if(n=[],!t)return L.return(n);if(r=t.values.find(function(e){return"X-ASSET-URI"==e.key}),i=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!r&&!i)return L.return(n);if(a=null,(s=t.values.find(function(e){return"ID"==e.key}))&&(a=s.data),o=null==a?Math.floor(10*t.startTime)/10:t.startTime,(l=t.endTime)&&t.endTime!=1/0&&"number"==typeof t.endTime&&(l=null==a?Math.floor(10*t.endTime)/10:t.endTime),u=t.values.find(function(e){return"X-RESTRICT"==e.key}),c=d=!0,u&&u.data&&(h=u.data,d=!h.includes("SKIP"),c=!h.includes("JUMP")),f=d?0:null,(g=t.values.find(function(e){return"X-ENABLE-SKIP-AFTER"==e.key}))&&(p=g.data,f=parseFloat(p),isNaN(f)&&(f=d?0:null)),m=null,(y=t.values.find(function(e){return"X-ENABLE-SKIP-FOR"==e.key}))&&(v=y.data,m=parseFloat(v),isNaN(f)&&(m=null)),b=null,(T=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(w=T.data,b=parseFloat(w),isNaN(b)&&(b=null)),k=null,(_=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(R=_.data,k=parseFloat(R),isNaN(k)&&(k=null)),D=C=x=!1,(M=t.values.find(function(e){return"CUE"==e.key}))&&(N=M.data,x=N.includes("ONCE"),C=N.includes("PRE"),D=N.includes("POST")),P=!1,(O=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(F=O.data,P=F.includes("RANGE")):!T&&e.C.W()&&(P=!C&&!D),r){if(!(U=r.data))return L.return(n);n.push({id:a,groupId:null,startTime:o,endTime:l,uri:U,mimeType:null,isSkippable:d,skipOffset:f,skipFor:m,canJump:c,resumeOffset:b,playoutLimit:k,once:x,pre:C,post:D,timelineRange:P,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),L.A(2);break}if(!i){L.A(2);break}return(z=i.data)?(S(L,4),E(L,Df(e,z,{type:11}),6)):L.return(n);case 6:for(B=L.h,j=Be(B),q=JSON.parse(j),(G=q["SKIP-CONTROL"])&&("number"==typeof(H=G["ENABLE-SKIP-AFTER"])&&(f=parseFloat(H),isNaN(H)&&(f=d?0:null)),"number"==typeof(V=G["ENABLE-SKIP-FOR"])&&(m=parseFloat(V),isNaN(V)&&(m=null))),K=0;K<q.ASSETS.length;K++)($=q.ASSETS[K]).URI&&n.push({id:a+"_shaka_asset_"+K,groupId:a,startTime:o,endTime:l,uri:$.URI,mimeType:null,isSkippable:d,skipOffset:f,skipFor:m,canJump:c,resumeOffset:b,playoutLimit:k,once:x,pre:C,post:D,timelineRange:P,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});A(L,2);break;case 4:I(L);case 2:return L.return(n)}})}(e,t),3)}2!=a.g&&(i=a.h),i.length?Af(e,i):K("Unsupported HLS interstitial",t),T(a)})}function Af(e,t){var n,r,i,a,s,o,l,u;L(function(d){switch(d.g){case 1:n=!1,r=g(t),i=r.next();case 2:if(i.done){d.A(4);break}if(!(a=i.value).uri){K("Missing URL in interstitial",a),d.A(3);break}if(a.mimeType){d.A(5);break}return S(d,6),s=e.i.Wb(),E(d,Id(a.uri,s,e.C.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=d.h,A(d,5);break;case 6:I(d);case 5:if(o=a.id||JSON.stringify(a),e.T.has(o)){d.A(3);break}a.loop&&!a.overlay&&K("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.T.add(o),e.H.add(a),l=!1,a.pre&&null==e.l?l=!0:0!=a.startTime||a.canJump?null!=e.l&&(u=a.startTime-e.l)>0&&u<=10&&(l=!0):l=!0,l&&(!e.F.has(a)&&Lf(a)&&e.F.set(a,e.i.preload(a.uri,null,a.mimeType||void 0)),Nf(e,a));case 3:i=r.next(),d.A(2);break;case 4:n&&xf(e),function(e){if(!e.aa&&e.H.size){if(e.I.D(e.g,"playing",e.V),e.I.D(e.g,"timeupdate",e.V),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.X),"requestVideoFrameCallback"in e.g&&!Mf()){var t=e.g,n=function(){-1!=e.O&&(e.X(),-1!=e.O&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.R.Ea(.025);e.N&&e.N.Ea(1),e.aa=!0}}(e),T(d)}})}function If(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var r=0,i=null;if(e.H.size&&null!=e.l){var a=e.g.ended,s=Array.from(e.H).sort(function(e,t){return t.startTime-e.startTime}),o=s;for(o=t?s.filter(function(e){return e.pre}):a?s.filter(function(e){return e.post}):s.filter(function(e){return!e.pre&&!e.post}),o=(s=g(o)).next();!o.done;o=s.next()){o=o.value;var l=!1;if(t)l=o.pre;else if(a)l=o.post;else if(!o.pre&&!o.post){var u=e.l-Math.round(1e3*o.startTime)/1e3,d=1;e.M.allowStartInMiddleOfInterstitial&&o.endTime&&o.endTime!=1/0&&(d=o.endTime-o.startTime),(u>0||0==u&&0==e.l)&&(u<=d||!o.canJump)&&(l=!(null==n&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=o.startTime))}l&&(!e.B||o.startTime>=e.B.startTime)&&(r==(n||0)?i=o:i&&!o.canJump&&Math.round(1e3*o.startTime)/1e3-Math.round(1e3*i.startTime)/1e3>.001&&(i=o,r=0),r++)}}return i}function kf(t,n,r,i,a,s){s=void 0===s?0:s,t.B=n,Sf(t),t.u||!t.m||t.h.parentElement||t.m.appendChild(t.h),1==i&&1==r&&(r=Array.from(t.H).filter(function(e){return n.pre?e.pre==n.pre:n.post?e.post==n.post:Math.abs(e.startTime-n.startTime)<.001}).length),n.once&&(s++,t.H.delete(n),Tf(t),n.overlay||xf(t)),n.mimeType&&(n.mimeType.startsWith("image/")||"text/html"===n.mimeType)?n.overlay?function(t,n,r,i,a){function s(){t.o&&(t.o.stop(),t.o=null),t.m.removeChild(u),Rf(t,n),Of(t,"ad-stopped"),t.j.Pa();var e=If(t,n.pre,i-a);e?kf(t,e,r,++i,Date.now(),a):t.J=!1}t.J=!0;var o=n.overlay,l="text/html"==n.mimeType?"iframe":"img",u=document.createElement(l);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",_f(t,n);var d=new bf(n,r,i);Of(t,"ad-impression"),Of(t,"ad-started",(new Map).set("ad",d)),"iframe"==l?u.src=n.uri:(u.src=n.uri,u.onerror=function(e){Of(t,"ad-error",(new Map).set("originalEvent",e)),s()}),d=o.viewport;var c=o.topLeft;o=o.size,0==d.x&&0==d.y?(u.width=n.overlay.size.x,u.height=n.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",n.overlay.size.y||"iframe"!=l||(u.style.height="auto")):(u.style.height=o.y/d.y*100+"%",u.style.left=c.x/d.x*100+"%",u.style.top=c.y/d.y*100+"%",u.style.width=o.x/d.x*100+"%"),t.m.appendChild(u);var h=Date.now();t.o&&t.o.stop(),t.o=new Tr(function(){n.playoutLimit&&(Date.now()-h)/1e3>n.playoutLimit||n.endTime&&t.g.currentTime>n.endTime?(Of(t,"ad-complete"),s()):t.g.currentTime<n.startTime&&(Of(t,"ad-skipped"),s())}),n.playoutLimit&&!n.endTime?t.o.ia(n.playoutLimit):n.endTime&&t.o.Ea(.025),t.j.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&(t.o&&t.o.stop(),Of(t,"ad-skipped"),s())}),n.clickThroughUrl&&t.j.D(u,"click",function(){n.clickThroughUrl&&e.open(n.clickThroughUrl,"_blank")})}(t,n,r,i,s):K("Unsupported interstitial",n):t.u&&n.overlay?K("Unsupported interstitial",n):function(t,n,r,i,a,s){var o,l,u,d,c,h,f,g,p,m,y,v,b,w,k,_,R,x,C,D,M;L(function(N){switch(N.g){case 1:if(o=Date.now(),t.J=!0,l=!1,u=function(){if(!t.u&&!n.overlay&&null==n.resumeOffset)if(n.timelineRange&&n.endTime&&n.endTime!=1/0)t.g.currentTime!=n.endTime&&(t.g.currentTime=n.endTime);else{var e=Date.now();t.g.currentTime+=(e-a)/1e3,a=e}},d=function(e){var o,l;return L(function(d){if(1==d.g){if(u(),o=If(t,n.pre,i-s),e&&n.groupId)for(;o&&o.groupId==n.groupId;)i++,o=If(t,n.pre,i-s);return t.o&&(!n.groupId||o&&o.groupId!=n.groupId)&&(t.o.stop(),t.o=null),Rf(t,n),o&&!o.overlay?d.A(2):(n.post&&(t.l=null,t.B=null),t.u?E(d,t.i.detach(),4):E(d,t.i.Bc(),4))}2!=d.g&&(t.u&&(null==(l=n.resumeOffset)&&(l=n.timelineRange&&n.endTime&&n.endTime!=1/0?n.endTime-(t.l||0):(Date.now()-a)/1e3),Of(t,"ad-content-resume-requested",(new Map).set("offset",l))),Of(t,"ad-stopped"),t.j.Pa(),t.J=!1,t.u?xf(t):(t.h.style.display="none",u(),t.g.ended||t.g.play())),Sf(t),o&&(Of(t,"ad-stopped"),t.j.Pa(),kf(t,o,r,++i,a,s)),T(d)})},c=function(e){return L(function(n){return l?n.return():(l=!0,Of(t,"ad-error",(new Map).set("originalEvent",e)),E(n,d(!1),0))})},h=function(){return L(function(e){if(1==e.g)return l?e.return():(l=!0,E(e,d(!1),2));Of(t,"ad-complete"),T(e)})},t.$=function(){return L(function(e){return l?e.return():(l=!0,Of(t,"ad-skipped"),E(e,d(!0),0))})},f=new vf(t.h,n,t.$,r,i,!t.u),t.u||(f.setMuted(t.g.muted),f.setVolume(t.g.volume)),Of(t,"ad-started",(new Map).set("ad",f)),(g=f.canSkipNow())&&Of(t,"ad-skip-state-changed"),t.j.Ba(t.i,"error",c),t.j.D(t.h,"timeupdate",function(){if(t.h.duration){var e=f.canSkipNow();g!=e&&f.getRemainingTime()>0&&f.getDuration()>0&&Of(t,"ad-skip-state-changed"),g=e,!t.u&&!n.overlay&&null==n.resumeOffset&&n.timelineRange&&n.endTime&&n.endTime!=1/0&&t.g.currentTime!=n.endTime&&t.C.Qa().end>=n.endTime&&(t.g.currentTime=n.endTime)}}),t.j.Ba(t.i,"firstquartile",function(){u(),Of(t,"ad-first-quartile")}),t.j.Ba(t.i,"midpoint",function(){u(),Of(t,"ad-midpoint")}),t.j.Ba(t.i,"thirdquartile",function(){u(),Of(t,"ad-third-quartile")}),t.j.Ba(t.i,"complete",h),t.j.D(t.h,"play",function(){Of(t,"ad-resumed")}),t.j.D(t.h,"pause",function(){var e=t.i.getConfiguration();t.h.currentTime>=e.playRangeEnd?h():Of(t,"ad-paused")}),t.j.D(t.h,"volumechange",function(){t.h.muted?Of(t,"ad-muted"):Of(t,"ad-volume-changed")}),n.clickThroughUrl&&(p=t.m||t.h,t.j.D(p,"click",function(){n.clickThroughUrl&&(f.isPaused()||f.pause(),e.open(n.clickThroughUrl,"_blank"))})),!t.u||1!=i){N.A(2);break}return Of(t,"ad-content-pause-requested",(new Map).set("saveLivePosition",!0)),m=new ki,y=function(e){return L(function(n){if(1==n.g)return"detach"!=e.state?n.A(0):Mf()?E(n,new Promise(function(e){return new Tr(e).ia(.1)}),3):n.A(3);m.resolve(),t.j.Ma(t.C,"onstatechange",y),T(n)})},t.j.D(t.C,"onstatechange",y),E(N,m,2);case 2:return _f(t,n),t.u||(t.h.style.display="",n.overlay?(t.h.loop=n.loop,v=n.overlay.viewport,b=n.overlay.topLeft,w=n.overlay.size,t.h.style.height=w.y/v.y*100+"%",t.h.style.left=b.x/v.x*100+"%",t.h.style.top=b.y/v.y*100+"%",t.h.style.width=w.x/v.x*100+"%"):(t.g.pause(),null!=n.resumeOffset&&0!=n.resumeOffset&&(t.g.currentTime+=n.resumeOffset),t.h.loop=!1,t.h.style.height="100%",t.h.style.left="0",t.h.style.top="0",t.h.style.width="100%")),S(N,4),Cf(t),n.startTime&&n.endTime&&n.endTime!=1/0&&n.startTime!=n.endTime&&(k=n.endTime-n.startTime)>0&&t.i.configure("playRangeEnd",k),n.playoutLimit&&!t.o&&(t.o=new Tr(function(){t.$()}).ia(n.playoutLimit),t.i.configure("playRangeEnd",n.playoutLimit)),E(N,t.i.fc(t.h),6);case 6:return _=null,t.M.allowStartInMiddleOfInterstitial&&null!=t.l&&(R=t.l-n.startTime,Math.abs(R)>.25&&(_=R)),t.F.has(n)?E(N,t.F.get(n),10):E(N,t.i.load(n.uri,_,n.mimeType||void 0),8);case 10:return x=N.h,t.F.delete(n),E(N,x?t.i.load(x):t.i.load(n.uri,_,n.mimeType||void 0),8);case 8:n.overlay&&t.g.paused?t.h.pause():t.h.play(),C=(Date.now()-o)/1e3,Of(t,"ads-loaded",(new Map).set("loadTime",C)),t.u&&t.g.play(),n.overlay&&(n.pre||n.post||t.C.W()&&!(n.startTime>0)||(D=function(){var e=t.g.currentTime-n.startTime;Math.abs(e-t.h.currentTime)>.1&&(t.h.currentTime=e)},t.j.Ba(t.h,"playing",D),t.j.D(t.g,"seeking",D)),t.j.D(t.g,"seeked",function(){var e=t.g.currentTime;(e<n.startTime||n.endTime&&e>n.endTime)&&t.$()})),A(N,0);break;case 4:if(M=I(N),!t.J)return N.return();c(M),T(N)}})}(t,n,r,i,a,s)}function _f(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var r=!0,i=[],a=n.topLeft.x/n.viewport.x*100;a>0&&a<=100&&(i.push("translateX("+a+"%)"),r=!1),(a=n.topLeft.y/n.viewport.y*100)>0&&a<=100&&(i.push("translateY("+a+"%)"),r=!1),(a=n.size.x/n.viewport.x)<1&&i.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,a<1&&i.push("scaleY("+n+")"),i.length&&(e.g.style.transform=i.join(" ")),r&&(e.g.style.transition="transform 250ms")}e.m&&(t.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",t.background&&(e.m.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Rf(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!t||t.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function xf(e){for(var t=[],n=g(e.H),r=n.next(),i={};!r.done;i={Ac:void 0},r=n.next())(r=r.value).overlay||(i.Ac={start:r.startTime,end:null},r.pre?(i.Ac.start=0,i.Ac.end=null):r.post?(i.Ac.start=-1,i.Ac.end=null):r.timelineRange&&(i.Ac.end=r.endTime),t.find(function(e){return function(t){return e.Ac.start==t.start&&e.Ac.end==t.end}}(i))||t.push(i.Ac));Of(e,"ad-cue-points-changed",(new Map).set("cuepoints",t))}function Cf(e){e.i.configure(e.C.ci()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),ji(e.C.Wb(),e.i.Wb())}function Df(e,t,n){var r,i;return L(function(a){return 1==a.g?(r=qi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),E(a,e.C.Wb().request(7,r,n).promise,2)):(i=a.h,a.return(i.data))})}function Lf(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function Mf(){var e=ae().Ua();return"TV"==e||"CONSOLE"==e||"CAST"==e}function Nf(e,t){if(!(e.K.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},r=[];if(t.background){var i=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);i&&r.push(n(i[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&r.push(n(t.uri)),e.K.set(t,r)}}function Pf(e,t){if(e.K.has(t)){for(var n=e.K.get(t),r=(n=g(n)).next();!r.done;r=n.next())(r=r.value).parentNode.removeChild(r);e.K.delete(t)}}function Of(e,t,n){e.va(new Mi(t,n))}function Ff(e,t,n,r,i){this.h=e,this.j=Pt(this.h.skipOffset),this.g=i,this.i=t,this.l=n,this.o=r,this.m=!1}function Uf(e,t,n,r){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=r,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new te}function zf(e,t){var n,r,i,a,s,o,l,u;L(function(d){return 1==d.g?t.staticResource?(n=Bf(t),e.G.get(n)?d.return():(r={type:9},i=qi([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.K.request(7,i,r),S(d,2),e.G.set(n,[]),E(d,a.promise,4))):d.return():2!=d.g?(s=d.h,o=Be(s.data),l=JSON.parse(o),u=l.apps,e.G.set(n,u),A(d,0)):(I(d),e.G.delete(n),void T(d))})}function Bf(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function jf(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,r,i=g(e.j),a=i.next();!a.done;a=i.next())for(var s=g((a=a.value).ads),o=s.next();!o.done;o=s.next())if(o=o.value,r){if(o.startTimeInSeconds<t&&o.startTimeInSeconds>r.startTimeInSeconds+r.durationInSeconds){r=o,n=a;break}}else o.startTimeInSeconds<t&&(r=o,n=a);n&&r&&!e.N.includes(r.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function qf(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var r=e.F,i=r.startTimeInSeconds+.5*r.durationInSeconds,a=r.startTimeInSeconds+.75*r.durationInSeconds;t>=r.startTimeInSeconds+.25*r.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),Vf(e,"firstQuartile")):t>=i&&!e.u.includes("midpoint")?(e.u.push("midpoint"),Vf(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),Vf(e,"thirdQuartile")),r=e.g.getRemainingTime(),i=e.g.getDuration(),e.g.canSkipNow()&&r>0&&i>0&&Vf(e,"skipStateChanged"),i>0&&(r<=0||r>i)&&Gf(e)}if(!e.g||!e.g.isLinear()){e:for(r=g(e.j),i=r.next();!i.done&&(i=i.value,!e.g||!e.g.isLinear());i=r.next())for(a=0;a<i.ads.length;a++){var s=i.ads[a],o=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&o>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=o;break e}Gf(e),e.M=i,e.g=new Ff(s,a+1,i.ads.length,!0,e.h),e.F=s,0===a&&Vf(e,"breakStart"),Hf(e);break}}if(!e.g)for(i=(r=g(e.j)).next();!i.done&&(i=i.value,!e.g);i=r.next())for(a=0;a<i.nonLinearAdsList.length;a++)if((s=i.nonLinearAdsList[a]).nonLinearAdList.length){o=i.startTimeInSeconds;var l=e.G.get(Bf(s.nonLinearAdList[0]));if(o<=t&&l&&l.length){Gf(e),o=e;for(var u=(l=g(l)).next();!u.done;u=l.next())if((u=u.value).data.source.length){var d=document.createElement("img");d.src=u.data.source[0].url,d.style.top=(u.placeholder.top||0)+"%",d.style.height=100-(u.placeholder.top||0)+"%",d.style.left=(u.placeholder.left||0)+"%",d.style.maxWidth=100-(u.placeholder.left||0)+"%",d.style.objectFit="contain",d.style.position="absolute",o.C.appendChild(d)}e.M=i,e.g=new Ff(s,a+1,i.ads.length,!1,e.h),e.F=s,0===a&&Vf(e,"breakStart"),Hf(e);break}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function Gf(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;Vf(e,void 0!==t&&t?"skip":"complete");for(var n=(t=g(e.m)).next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&Vf(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Hf(e){var t=!1;e.h.paused?t=!0:(Vf(e,"impression"),Vf(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&Vf(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||Vf(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(Vf(e,"impression"),Vf(e,"start"),t=!1):Vf(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){Vf(e,"pause")}});for(var n=g(e.m),r=n.next();!r.done;r=n.next())r=r.value,e.o.D(r.target,r.type,r.listener)}function Vf(e,t){var n=e.F.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var r={type:10},i=(n=g(n.beaconUrls)).next();!i.done;i=n.next())(i=i.value)&&""!=i&&((i=qi([i],Ii())).method="POST",e.K.request(7,i,r));switch(t){case"impression":e.i(new Mi("ad-impression"));break;case"start":e.i(new Mi("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new Mi("ad-muted"));break;case"unmute":e.i(new Mi("ad-volume-changed"));break;case"resume":e.i(new Mi("ad-resumed"));break;case"pause":e.i(new Mi("ad-paused"));break;case"firstQuartile":e.i(new Mi("ad-first-quartile"));break;case"midpoint":e.i(new Mi("ad-midpoint"));break;case"thirdQuartile":e.i(new Mi("ad-third-quartile"));break;case"complete":e.i(new Mi("ad-complete")),e.i(new Mi("ad-stopped"));break;case"skip":e.i(new Mi("ad-skipped")),e.i(new Mi("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Mi("ad-skip-state-changed"))}}function Kf(e,t){this.g=e,this.i=null,this.h=t}function $f(e,t,n,r){var i=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=r,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new te,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Mi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new Mi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}})}(i,e)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){i.C.length?i.j.resolve(i.C):i.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),i.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),i.m=new Kf(e,i.l),i.B&&(i.m.i=i.B),i.i(new Mi("ad-started",(new Map).set("ad",i.m))),i.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){i.u.removeAttribute("ad-active");var e=i.l.currentTime;i.o&&i.o>e&&(i.l.currentTime=i.o,i.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){i.B=e.getStreamData().adProgressData,i.m&&(i.m.i=i.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){i.i(new Mi("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){i.i(new Mi("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){i.i(new Mi("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){i.i(new Mi("ad-complete")),i.i(new Mi("ad-stopped")),i.u.removeAttribute("ad-active"),i.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){i.i(new Mi("ad-skipped")),i.i(new Mi("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=g(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});i.F=e,i.i(new Mi("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function Yf(){Oi.call(this),this.h=this.i=this.j=this.g=null,this.m=new lf,this.o=navigator.language,this.l=null}function Wf(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function Xf(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof Mi){var n={};for(r in t)(e=t[r])&&"object"==typeof e?"detail"==r&&(n[r]=e):r in Event||(n[r]=e);return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(e=(n=g(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())r.add(e.value);for(n={},e=(r=g(r)).next();!e.done;e=r.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=g(Ys(t))).next();!n.done;n=t.next())e=(n=n.value).end,r.start.push(n.start),r.end.push(e);t=r}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return t}})}function Qf(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}(r=df.prototype).needsSkipUI=function(){return!1},r.isClientRendering=function(){return!0},r.hasCustomClick=function(){return!0},r.isUsingAnotherMediaElement=function(){return!0},r.getDuration=function(){return this.g.getDuration()},r.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},r.getRemainingTime=function(){return this.h.getRemainingTime()},r.isPaused=function(){return this.i},r.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},r.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return this.h.getAdSkippableState()},r.skip=function(){return this.h.skip()},r.pause=function(){return this.h.pause()},r.play=function(){return this.h.resume()},r.getVolume=function(){return this.h.getVolume()},r.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},r.isMuted=function(){return 0==this.h.getVolume()},r.isLinear=function(){return this.g.isLinear()},r.resize=function(e,t){this.h.resize(e,t)},r.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},r.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},r.getTitle=function(){return this.g.getTitle()},r.getDescription=function(){return this.g.getDescription()},r.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},r.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},r.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},r.getVastAdId=function(){return""},r.getAdId=function(){return this.g.getAdId()},r.getCreativeAdId=function(){return this.g.getCreativeAdId()},r.getAdvertiserName=function(){return this.g.getAdvertiserName()},r.getMediaUrl=function(){return this.g.getMediaUrl()},r.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},r.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},r.release=function(){this.h=this.g=null},B("shaka.ads.ClientSideAd",df),df.prototype.release=df.prototype.release,df.prototype.getPodIndex=df.prototype.getPodIndex,df.prototype.getTimeOffset=df.prototype.getTimeOffset,df.prototype.getMediaUrl=df.prototype.getMediaUrl,df.prototype.getAdvertiserName=df.prototype.getAdvertiserName,df.prototype.getCreativeAdId=df.prototype.getCreativeAdId,df.prototype.getAdId=df.prototype.getAdId,df.prototype.getVastAdId=df.prototype.getVastAdId,df.prototype.getVastMediaWidth=df.prototype.getVastMediaWidth,df.prototype.getVastMediaHeight=df.prototype.getVastMediaHeight,df.prototype.getVastMediaBitrate=df.prototype.getVastMediaBitrate,df.prototype.getDescription=df.prototype.getDescription,df.prototype.getTitle=df.prototype.getTitle,df.prototype.getPositionInSequence=df.prototype.getPositionInSequence,df.prototype.getSequenceLength=df.prototype.getSequenceLength,df.prototype.setMuted=df.prototype.setMuted,df.prototype.resize=df.prototype.resize,df.prototype.isLinear=df.prototype.isLinear,df.prototype.isMuted=df.prototype.isMuted,df.prototype.setVolume=df.prototype.setVolume,df.prototype.getVolume=df.prototype.getVolume,df.prototype.play=df.prototype.play,df.prototype.pause=df.prototype.pause,df.prototype.skip=df.prototype.skip,df.prototype.canSkipNow=df.prototype.canSkipNow,df.prototype.getTimeUntilSkippable=df.prototype.getTimeUntilSkippable,df.prototype.isSkippable=df.prototype.isSkippable,df.prototype.isPaused=df.prototype.isPaused,df.prototype.getRemainingTime=df.prototype.getRemainingTime,df.prototype.getMinSuggestedDuration=df.prototype.getMinSuggestedDuration,df.prototype.getDuration=df.prototype.getDuration,df.prototype.isUsingAnotherMediaElement=df.prototype.isUsingAnotherMediaElement,df.prototype.hasCustomClick=df.prototype.hasCustomClick,df.prototype.isClientRendering=df.prototype.isClientRendering,df.prototype.needsSkipUI=df.prototype.needsSkipUI,B("shaka.ads.Utils",cf),cf.ADS_LOADED="ads-loaded",cf.AD_STARTED="ad-started",cf.AD_FIRST_QUARTILE="ad-first-quartile",cf.AD_MIDPOINT="ad-midpoint",cf.AD_THIRD_QUARTILE="ad-third-quartile",cf.AD_COMPLETE="ad-complete",cf.AD_STOPPED="ad-stopped",cf.AD_SKIPPED="ad-skipped",cf.AD_VOLUME_CHANGED="ad-volume-changed",cf.AD_MUTED="ad-muted",cf.AD_PAUSED="ad-paused",cf.AD_RESUMED="ad-resumed",cf.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",cf.CUEPOINTS_CHANGED="ad-cue-points-changed",cf.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",cf.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",cf.AD_CLICKED="ad-clicked",cf.AD_PROGRESS="ad-progress",cf.AD_BUFFERING="ad-buffering",cf.AD_IMPRESSION="ad-impression",cf.AD_DURATION_CHANGED="ad-duration-changed",cf.AD_CLOSED="ad-closed",cf.AD_LOADED="ad-loaded",cf.ALL_ADS_COMPLETED="all-ads-completed",cf.AD_LINEAR_CHANGED="ad-linear-changed",cf.AD_METADATA="ad-metadata",cf.AD_RECOVERABLE_ERROR="ad-recoverable-error",cf.AD_ERROR="ad-error",cf.AD_BREAK_READY="ad-break-ready",cf.AD_INTERACTION="ad-interaction",cf.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",cf.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",cf.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",gf.prototype.configure=function(e){this.o=e},gf.prototype.stop=function(){this.g&&this.g.stop(),this.u&&Js(this.u)},gf.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()},(r=vf.prototype).needsSkipUI=function(){return!0},r.isClientRendering=function(){return!0},r.hasCustomClick=function(){return null!=this.h.clickThroughUrl},r.isUsingAnotherMediaElement=function(){return this.u},r.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},r.getMinSuggestedDuration=function(){return this.getDuration()},r.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},r.isPaused=function(){return this.g.paused},r.isSkippable=function(){return this.i&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},r.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},r.canSkipNow=function(){return this.i&&0==this.getTimeUntilSkippable()},r.skip=function(){this.canSkipNow()&&this.B()},r.pause=function(){return this.g.pause()},r.play=function(){return this.g.play()},r.getVolume=function(){return this.g.volume},r.setVolume=function(e){this.g.volume=e},r.isMuted=function(){return this.g.muted},r.isLinear=function(){return null==this.C},r.resize=function(){},r.setMuted=function(e){this.g.muted=e},r.getSequenceLength=function(){return this.o},r.getPositionInSequence=function(){return this.m},r.getTitle=function(){return""},r.getDescription=function(){return""},r.getVastMediaBitrate=function(){return 0},r.getVastMediaHeight=function(){return 0},r.getVastMediaWidth=function(){return 0},r.getVastAdId=function(){return""},r.getAdId=function(){return this.h.id||""},r.getCreativeAdId=function(){return""},r.getAdvertiserName=function(){return""},r.getMediaUrl=function(){return this.h.uri},r.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},r.getPodIndex=function(){return 0},r.release=function(){this.g=null},B("shaka.ads.InterstitialAd",vf),vf.prototype.release=vf.prototype.release,vf.prototype.getPodIndex=vf.prototype.getPodIndex,vf.prototype.getTimeOffset=vf.prototype.getTimeOffset,vf.prototype.getMediaUrl=vf.prototype.getMediaUrl,vf.prototype.getAdvertiserName=vf.prototype.getAdvertiserName,vf.prototype.getCreativeAdId=vf.prototype.getCreativeAdId,vf.prototype.getAdId=vf.prototype.getAdId,vf.prototype.getVastAdId=vf.prototype.getVastAdId,vf.prototype.getVastMediaWidth=vf.prototype.getVastMediaWidth,vf.prototype.getVastMediaHeight=vf.prototype.getVastMediaHeight,vf.prototype.getVastMediaBitrate=vf.prototype.getVastMediaBitrate,vf.prototype.getDescription=vf.prototype.getDescription,vf.prototype.getTitle=vf.prototype.getTitle,vf.prototype.getPositionInSequence=vf.prototype.getPositionInSequence,vf.prototype.getSequenceLength=vf.prototype.getSequenceLength,vf.prototype.setMuted=vf.prototype.setMuted,vf.prototype.resize=vf.prototype.resize,vf.prototype.isLinear=vf.prototype.isLinear,vf.prototype.isMuted=vf.prototype.isMuted,vf.prototype.setVolume=vf.prototype.setVolume,vf.prototype.getVolume=vf.prototype.getVolume,vf.prototype.play=vf.prototype.play,vf.prototype.pause=vf.prototype.pause,vf.prototype.skip=vf.prototype.skip,vf.prototype.canSkipNow=vf.prototype.canSkipNow,vf.prototype.getTimeUntilSkippable=vf.prototype.getTimeUntilSkippable,vf.prototype.isSkippable=vf.prototype.isSkippable,vf.prototype.isPaused=vf.prototype.isPaused,vf.prototype.getRemainingTime=vf.prototype.getRemainingTime,vf.prototype.getMinSuggestedDuration=vf.prototype.getMinSuggestedDuration,vf.prototype.getDuration=vf.prototype.getDuration,vf.prototype.isUsingAnotherMediaElement=vf.prototype.isUsingAnotherMediaElement,vf.prototype.hasCustomClick=vf.prototype.hasCustomClick,vf.prototype.isClientRendering=vf.prototype.isClientRendering,vf.prototype.needsSkipUI=vf.prototype.needsSkipUI,(r=bf.prototype).needsSkipUI=function(){return!0},r.isClientRendering=function(){return!0},r.hasCustomClick=function(){return null!=this.g.clickThroughUrl},r.isUsingAnotherMediaElement=function(){return!1},r.getDuration=function(){return-1},r.getMinSuggestedDuration=function(){return this.getDuration()},r.getRemainingTime=function(){return-1},r.isPaused=function(){return!1},r.isSkippable=function(){return!1},r.getTimeUntilSkippable=function(){return 0},r.canSkipNow=function(){return!1},r.skip=function(){},r.pause=function(){},r.play=function(){},r.getVolume=function(){return 1},r.setVolume=function(){},r.isMuted=function(){return!1},r.isLinear=function(){return this.i},r.resize=function(){},r.setMuted=function(){},r.getSequenceLength=function(){return this.j},r.getPositionInSequence=function(){return this.h},r.getTitle=function(){return""},r.getDescription=function(){return""},r.getVastMediaBitrate=function(){return 0},r.getVastMediaHeight=function(){return 0},r.getVastMediaWidth=function(){return 0},r.getVastAdId=function(){return""},r.getAdId=function(){return this.g.id||""},r.getCreativeAdId=function(){return""},r.getAdvertiserName=function(){return""},r.getMediaUrl=function(){return this.g.uri},r.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},r.getPodIndex=function(){return 0},r.release=function(){},B("shaka.ads.InterstitialStaticAd",bf),bf.prototype.release=bf.prototype.release,bf.prototype.getPodIndex=bf.prototype.getPodIndex,bf.prototype.getTimeOffset=bf.prototype.getTimeOffset,bf.prototype.getMediaUrl=bf.prototype.getMediaUrl,bf.prototype.getAdvertiserName=bf.prototype.getAdvertiserName,bf.prototype.getCreativeAdId=bf.prototype.getCreativeAdId,bf.prototype.getAdId=bf.prototype.getAdId,bf.prototype.getVastAdId=bf.prototype.getVastAdId,bf.prototype.getVastMediaWidth=bf.prototype.getVastMediaWidth,bf.prototype.getVastMediaHeight=bf.prototype.getVastMediaHeight,bf.prototype.getVastMediaBitrate=bf.prototype.getVastMediaBitrate,bf.prototype.getDescription=bf.prototype.getDescription,bf.prototype.getTitle=bf.prototype.getTitle,bf.prototype.getPositionInSequence=bf.prototype.getPositionInSequence,bf.prototype.getSequenceLength=bf.prototype.getSequenceLength,bf.prototype.setMuted=bf.prototype.setMuted,bf.prototype.resize=bf.prototype.resize,bf.prototype.isLinear=bf.prototype.isLinear,bf.prototype.isMuted=bf.prototype.isMuted,bf.prototype.setVolume=bf.prototype.setVolume,bf.prototype.getVolume=bf.prototype.getVolume,bf.prototype.play=bf.prototype.play,bf.prototype.pause=bf.prototype.pause,bf.prototype.skip=bf.prototype.skip,bf.prototype.canSkipNow=bf.prototype.canSkipNow,bf.prototype.getTimeUntilSkippable=bf.prototype.getTimeUntilSkippable,bf.prototype.isSkippable=bf.prototype.isSkippable,bf.prototype.isPaused=bf.prototype.isPaused,bf.prototype.getRemainingTime=bf.prototype.getRemainingTime,bf.prototype.getMinSuggestedDuration=bf.prototype.getMinSuggestedDuration,bf.prototype.getDuration=bf.prototype.getDuration,bf.prototype.isUsingAnotherMediaElement=bf.prototype.isUsingAnotherMediaElement,bf.prototype.hasCustomClick=bf.prototype.hasCustomClick,bf.prototype.isClientRendering=bf.prototype.isClientRendering,bf.prototype.needsSkipUI=bf.prototype.needsSkipUI,(r=Ef.prototype).configure=function(e){this.M=e,Sf(this)},r.stop=function(){if(this.j&&this.j.Pa(),this.ma.clear(),this.T.clear(),this.H.clear(),this.i.ng(),this.F.size)for(var e=Array.from(this.F.values()),t=(e=g(e)).next();!t.done;t=e.next())(t=t.value)&&t.then(function(e){e&&e.destroy()});if(this.F.clear(),this.K.size)for(t=(e=g(e=Array.from(this.K.keys()))).next();!t.done;t=e.next())Pf(this,t.value);this.K.clear(),this.i.detach(),this.J=!1,this.B=this.l=null,this.u=!0,this.h=this.g,this.G=null,Rf(this),Tf(this),this.m&&Js(this.m),this.o&&(this.o.stop(),this.o=null)},r.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.R&&(this.R.stop(),this.R=null),this.N&&(this.N.stop(),this.N=null),this.i.destroy()},r.td=function(){return this.i},r.addAdUrlInterstitial=function(e){var t,n,r,i,a,s,o,l,u,d=this;return L(function(c){if(1==c.g)return E(c,Df(d,e,t={type:12}),2);if(3!=c.g){if(n=c.h,!(r=jt(n,"VAST,vmap:VMAP")))throw new Ue(2,10,10007);if(i=[],"VAST"==r.tagName)return i=hf(r,d.l),c.A(3);if("vmap:VMAP"!=r.tagName)return c.A(3);for(a=function(e){var n,r;return L(function(a){if(1==a.g)return E(a,Df(d,e.uri,t),2);if(n=a.h,!(r=jt(n,"VAST")))throw new Ue(2,10,10007);i.push.apply(i,p(hf(r,e.time))),T(a)})},s=[],o=g(function(e){for(var t=[],n=(e=g(Kt(e,"vmap:AdBreak"))).next();!n.done;n=e.next()){var r=n.value,i=r.attributes.timeOffset;i&&(n=null,n="start"==i?null:"end"==i?1/0:Pt(i),(r=Xt(r,"vmap:AdSource"))&&(r=Xt(r,"vmap:AdTagURI"))&&(r=$t(r))&&t.push({time:n,uri:r}))}return t}(r)),l=o.next();!l.done;l=o.next())u=l.value,s.push(a(u));return s.length?E(c,Promise.all(s),3):c.A(3)}Af(d,i),T(c)})},(r=Ff.prototype).needsSkipUI=function(){return!0},r.isClientRendering=function(){return!1},r.hasCustomClick=function(){return!1},r.isUsingAnotherMediaElement=function(){return!1},r.getDuration=function(){return this.h.durationInSeconds},r.getMinSuggestedDuration=function(){return this.getDuration()},r.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},r.isPaused=function(){return this.g.paused},r.isSkippable=function(){return"number"==typeof this.j},r.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},r.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},r.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},r.pause=function(){return this.g.pause()},r.play=function(){return this.g.play()},r.getVolume=function(){return this.g.volume},r.setVolume=function(e){this.g.volume=e},r.isMuted=function(){return this.g.muted},r.isLinear=function(){return this.o},r.resize=function(){},r.setMuted=function(e){this.g.muted=e},r.getSequenceLength=function(){return this.l?this.l:1},r.getPositionInSequence=function(){return this.i?this.i:1},r.getTitle=function(){return this.h.adTitle},r.getDescription=function(){return""},r.getVastMediaBitrate=function(){return 0},r.getVastMediaHeight=function(){return 0},r.getVastMediaWidth=function(){return 0},r.getVastAdId=function(){return this.h.vastAdId||""},r.getAdId=function(){return this.h.adId},r.getCreativeAdId=function(){return this.h.creativeId},r.getAdvertiserName=function(){return""},r.getMediaUrl=function(){return null},r.getTimeOffset=function(){return 0},r.getPodIndex=function(){return 0},r.release=function(){this.l=this.i=this.g=this.h=null},B("shaka.ads.MediaTailorAd",Ff),Ff.prototype.release=Ff.prototype.release,Ff.prototype.getPodIndex=Ff.prototype.getPodIndex,Ff.prototype.getTimeOffset=Ff.prototype.getTimeOffset,Ff.prototype.getMediaUrl=Ff.prototype.getMediaUrl,Ff.prototype.getAdvertiserName=Ff.prototype.getAdvertiserName,Ff.prototype.getCreativeAdId=Ff.prototype.getCreativeAdId,Ff.prototype.getAdId=Ff.prototype.getAdId,Ff.prototype.getVastAdId=Ff.prototype.getVastAdId,Ff.prototype.getVastMediaWidth=Ff.prototype.getVastMediaWidth,Ff.prototype.getVastMediaHeight=Ff.prototype.getVastMediaHeight,Ff.prototype.getVastMediaBitrate=Ff.prototype.getVastMediaBitrate,Ff.prototype.getDescription=Ff.prototype.getDescription,Ff.prototype.getTitle=Ff.prototype.getTitle,Ff.prototype.getPositionInSequence=Ff.prototype.getPositionInSequence,Ff.prototype.getSequenceLength=Ff.prototype.getSequenceLength,Ff.prototype.setMuted=Ff.prototype.setMuted,Ff.prototype.resize=Ff.prototype.resize,Ff.prototype.isLinear=Ff.prototype.isLinear,Ff.prototype.isMuted=Ff.prototype.isMuted,Ff.prototype.setVolume=Ff.prototype.setVolume,Ff.prototype.getVolume=Ff.prototype.getVolume,Ff.prototype.play=Ff.prototype.play,Ff.prototype.pause=Ff.prototype.pause,Ff.prototype.skip=Ff.prototype.skip,Ff.prototype.canSkipNow=Ff.prototype.canSkipNow,Ff.prototype.getTimeUntilSkippable=Ff.prototype.getTimeUntilSkippable,Ff.prototype.isSkippable=Ff.prototype.isSkippable,Ff.prototype.isPaused=Ff.prototype.isPaused,Ff.prototype.getRemainingTime=Ff.prototype.getRemainingTime,Ff.prototype.getMinSuggestedDuration=Ff.prototype.getMinSuggestedDuration,Ff.prototype.getDuration=Ff.prototype.getDuration,Ff.prototype.isUsingAnotherMediaElement=Ff.prototype.isUsingAnotherMediaElement,Ff.prototype.hasCustomClick=Ff.prototype.hasCustomClick,Ff.prototype.isClientRendering=Ff.prototype.isClientRendering,Ff.prototype.needsSkipUI=Ff.prototype.needsSkipUI,Uf.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);Gf(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Uf.prototype.release=function(){this.stop(),this.o&&this.o.release()},Uf.prototype.onManifestUpdated=function(e){this.J=e,""!=this.H&&(function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b;L(function(w){if(1==w.g)return r={type:8},i=qi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.K.request(7,i,r),S(w,2),E(w,a.promise,4);if(2!=w.g){if(s=w.h,o=[],l=Be(s.data),(u=JSON.parse(l)).avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(u.avails)){for(e.j=u.avails,d=g(e.j),c=d.next();!c.done;c=d.next())for(h=c.value,f=g(h.nonLinearAdsList),p=f.next();!p.done;p=f.next())for(m=p.value,y=g(m.nonLinearAdList),v=y.next();!v.done;v=y.next())b=v.value,zf(e,b);o=e.getCuePoints(),e.i(new Mi("ad-cue-points-changed",(new Map).set("cuepoints",o)))}}else e.j.length&&e.i(new Mi("ad-cue-points-changed",(new Map).set("cuepoints",o))),Gf(e),e.j=[];return n&&(e.J||o.length>0)&&function(e){qf(e),e.J||(jf(e),e.o.D(e.h,"seeked",function(){jf(e)}),e.o.D(e.h,"ended",function(){Gf(e)})),e.o.D(e.h,"timeupdate",function(){qf(e)})}(e),A(w,0)}I(w),T(w)})}(this,this.H,this.O),this.O=!1)},Uf.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next())for(var r=(n=g(n.value.ads)).next();!r.done;r=n.next())r=r.value,e.push({start:r.startTimeInSeconds,end:r.startTimeInSeconds+r.durationInSeconds});return e},(r=Kf.prototype).needsSkipUI=function(){return!0},r.isClientRendering=function(){return!1},r.hasCustomClick=function(){return!0},r.isUsingAnotherMediaElement=function(){return!1},r.getDuration=function(){return this.i?this.i.duration:-1},r.getMinSuggestedDuration=function(){return this.getDuration()},r.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},r.isPaused=function(){return this.h.paused},r.isSkippable=function(){return this.g.isSkippable()},r.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},r.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},r.skip=function(){this.h.currentTime+=this.getRemainingTime()},r.pause=function(){return this.h.pause()},r.play=function(){return this.h.play()},r.getVolume=function(){return this.h.volume},r.setVolume=function(e){this.h.volume=e},r.isMuted=function(){return this.h.muted},r.isLinear=function(){return!0},r.resize=function(){},r.setMuted=function(e){this.h.muted=e},r.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},r.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},r.getTitle=function(){return this.g.getTitle()},r.getDescription=function(){return this.g.getDescription()},r.getVastMediaBitrate=function(){return 0},r.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},r.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},r.getVastAdId=function(){return""},r.getAdId=function(){return this.g.getAdId()},r.getCreativeAdId=function(){return this.g.getCreativeAdId()},r.getAdvertiserName=function(){return this.g.getAdvertiserName()},r.getMediaUrl=function(){return null},r.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},r.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},r.release=function(){this.h=this.i=this.g=null},B("shaka.ads.ServerSideAd",Kf),Kf.prototype.release=Kf.prototype.release,Kf.prototype.getPodIndex=Kf.prototype.getPodIndex,Kf.prototype.getTimeOffset=Kf.prototype.getTimeOffset,Kf.prototype.getMediaUrl=Kf.prototype.getMediaUrl,Kf.prototype.getAdvertiserName=Kf.prototype.getAdvertiserName,Kf.prototype.getCreativeAdId=Kf.prototype.getCreativeAdId,Kf.prototype.getAdId=Kf.prototype.getAdId,Kf.prototype.getVastAdId=Kf.prototype.getVastAdId,Kf.prototype.getVastMediaWidth=Kf.prototype.getVastMediaWidth,Kf.prototype.getVastMediaHeight=Kf.prototype.getVastMediaHeight,Kf.prototype.getVastMediaBitrate=Kf.prototype.getVastMediaBitrate,Kf.prototype.getDescription=Kf.prototype.getDescription,Kf.prototype.getTitle=Kf.prototype.getTitle,Kf.prototype.getPositionInSequence=Kf.prototype.getPositionInSequence,Kf.prototype.getSequenceLength=Kf.prototype.getSequenceLength,Kf.prototype.setMuted=Kf.prototype.setMuted,Kf.prototype.resize=Kf.prototype.resize,Kf.prototype.isLinear=Kf.prototype.isLinear,Kf.prototype.isMuted=Kf.prototype.isMuted,Kf.prototype.setVolume=Kf.prototype.setVolume,Kf.prototype.getVolume=Kf.prototype.getVolume,Kf.prototype.play=Kf.prototype.play,Kf.prototype.pause=Kf.prototype.pause,Kf.prototype.skip=Kf.prototype.skip,Kf.prototype.canSkipNow=Kf.prototype.canSkipNow,Kf.prototype.getTimeUntilSkippable=Kf.prototype.getTimeUntilSkippable,Kf.prototype.isSkippable=Kf.prototype.isSkippable,Kf.prototype.isPaused=Kf.prototype.isPaused,Kf.prototype.getRemainingTime=Kf.prototype.getRemainingTime,Kf.prototype.getMinSuggestedDuration=Kf.prototype.getMinSuggestedDuration,Kf.prototype.getDuration=Kf.prototype.getDuration,Kf.prototype.isUsingAnotherMediaElement=Kf.prototype.isUsingAnotherMediaElement,Kf.prototype.hasCustomClick=Kf.prototype.hasCustomClick,Kf.prototype.isClientRendering=Kf.prototype.isClientRendering,Kf.prototype.needsSkipUI=Kf.prototype.needsSkipUI,(r=$f.prototype).configure=function(){},r.stop=function(){this.C="",this.o=null,this.F=[]},r.release=function(){this.stop(),this.h&&this.h.release()},r.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},r.getCuePoints=function(){return this.F},h(Yf,Oi),(r=Yf.prototype).setLocale=function(e){this.o=e},r.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},r.initInterstitial=function(e,t,n){var r=this;this.g&&this.g.release(),this.g=new Ef(e,t,n,function(e){return Wf(r,e)}),this.g.configure(this.l)},r.initClientSide=function(t,n,r){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Ue(2,10,1e4);this.j&&this.j.release(),this.j=new gf(t,n,this.o,r,function(e){return Wf(i,e)}),this.j.configure(this.l)},r.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Oi.prototype.release.call(this)},r.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Mi("ad-stopped")),this.dispatchEvent(new Mi("ad-content-attach-requested")),this.m=new lf},r.requestClientSideAds=function(e){if(!this.j)throw new Ue(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},r.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Ue(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},r.initMediaTailor=function(e,t,n){var r=this;this.i&&this.i.release(),this.i=new Uf(e,t,n,function(e){return Wf(r,e)})},r.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Ue(1,10,10005);var r=this.i;return n=void 0===n?"":n,r.l?e=Promise.reject(new Ue(1,10,10004)):(r.l=new ki,function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,g;L(function(p){if(1==p.g)return r={type:7},(i=qi([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(a=JSON.stringify(n),i.body=Ge(a)),s=e.K.request(7,i,r),S(p,2),E(p,s.promise,4);if(2!=p.g){if(o=p.h,l=Be(o.data),!(u=JSON.parse(l)).manifestUrl||!u.trackingUrl)throw Error("Insufficient data from MediaTailor.");return d=new pe(t),c=new pe(u.trackingUrl),e.H=d.resolve(c).toString(),h=Date.now()/1e3,f=h-e.R,e.i(new Mi("ads-loaded",(new Map).set("loadTime",f))),g=new pe(u.manifestUrl),e.l.resolve(d.resolve(g).toString()),e.l=null,A(p,0)}if(I(p),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,p.return();e.l.resolve(e.I),e.l=null,T(p)})}(r,e,t),r.I=n||"",r.R=Date.now()/1e3,e=r.l),e},r.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Ue(1,10,10005);var t=this.i;t.H=e,t.i(new Mi("ads-loaded",(new Map).set("loadTime",0)))},r.initServerSide=function(t,n){var r=this;if(!e.google||!google.ima||!google.ima.dai)throw new Ue(2,10,10002);this.h&&this.h.release(),this.h=new $f(t,n,this.o,function(e){return Wf(r,e)}),this.h.configure(this.l)},r.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new Ue(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.4",(n=this.h).j?e=Promise.reject(new Ue(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new ki,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},r.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new Ue(1,10,10003);(e.mpt||e.mpv)&&K('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.4",this.h.g.replaceAdTagParameters(e)},r.getServerSideCuePoints=function(){return de("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},r.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},r.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:uf(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},r.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},r.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},r.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},r.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},r.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&wf(this.g,n))},r.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var r=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==r||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==r){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,r="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||r)){for(var i,a=n.startTime,s=n.endTime,o=null,l=0,u=g(n.eventNode.children),d=u.next();!d.done;d=u.next())if("AlternativeMPD"==(d=d.value).tagName){if(d=d.attributes.uri){i=d;break}}else if("InsertPresentation"==d.tagName||"ReplacePresentation"==d.tagName){var c=d.attributes.url;if(c){i=Ke(c),(u=Jt(d,"maxDuration",sn))&&(o=u/n.timescale),(u=Jt(d,"returnOffset",sn))&&(l=u/n.timescale),t&&l&&(s=a+l);break}}i&&Af(e,[{id:n.id,groupId:null,startTime:a,endTime:s,uri:i,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:r?l:null,playoutLimit:o,once:!1,pre:!1,post:!1,timelineRange:t&&!r,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else("urn:mpeg:dash:event:2012"==r||"urn:scte:dash:scte214-events"==r)&&n.eventNode&&Xt(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n=Xt(t.eventNode,"OverlayEvent"),r=n.attributes.uri,i=n.attributes.mimeType,a="true"==n.attributes.loop,s=Jt(n,"z",sn);if(r&&0!=s){var o=null,l=Xt(n,"Background");if(l){var u=l.attributes.uri;o=u?"center / contain no-repeat url('"+u+"')":Yt(l)}l=1920,u=1080;var d=Xt(n,"Viewport");if(d){if(null==(l=Jt(d,"x",sn)))return;if(null==(u=Jt(d,"y",sn)))return}var c={viewport:{x:l,y:u},topLeft:{x:0,y:0},size:{x:l,y:u}},h=Xt(n,"Overlay");if(d&&h){var f=Xt(h,"TopLeft"),g=Xt(h,"Size");if(f&&g){if(null==(h=Jt(f,"x",sn)))return;if(null==(f=Jt(f,"y",sn)))return;var p=Jt(g,"x",sn);if(null==p)return;if(null==(g=Jt(g,"y",sn)))return;c.topLeft.x=h,c.topLeft.y=f,c.size.x=p,c.size.y=g}}if(h=null,n=Xt(n,"Squeeze"),d&&n&&(g=Xt(n,"TopLeft"),n=Xt(n,"Size"),g&&n)){if(null==(d=Jt(g,"x",sn)))return;if(null==(h=Jt(g,"y",sn)))return;if(null==(g=Jt(n,"x",sn)))return;if(null==(n=Jt(n,"y",sn)))return;h={viewport:{x:l,y:u},topLeft:{x:d,y:h},size:{x:g,y:n}}}Af(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:r,mimeType:i,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:c,displayOnBackground:-1==s,currentVideo:h,background:o,clickThroughUrl:null}])}}(this.g,n))}},r.addCustomInterstitial=function(e){if(!this.g)throw new Ue(1,10,10006);Af(this.g,[e])},r.addAdUrlInterstitial=function(e){if(!this.g)throw new Ue(1,10,10006);return this.g.addAdUrlInterstitial(e)},r.getInterstitialPlayer=function(){if(!this.g)throw new Ue(1,10,10006);return this.g.td()},B("shaka.ads.AdManager",Yf),Yf.prototype.getInterstitialPlayer=Yf.prototype.getInterstitialPlayer,Yf.prototype.addAdUrlInterstitial=Yf.prototype.addAdUrlInterstitial,Yf.prototype.addCustomInterstitial=Yf.prototype.addCustomInterstitial,Yf.prototype.onDASHInterstitialMetadata=Yf.prototype.onDASHInterstitialMetadata,Yf.prototype.onHLSInterstitialMetadata=Yf.prototype.onHLSInterstitialMetadata,Yf.prototype.onCueMetadataChange=Yf.prototype.onCueMetadataChange,Yf.prototype.onHlsTimedMetadata=Yf.prototype.onHlsTimedMetadata,Yf.prototype.onDashTimedMetadata=Yf.prototype.onDashTimedMetadata,Yf.prototype.onManifestUpdated=Yf.prototype.onManifestUpdated,Yf.prototype.getStats=Yf.prototype.getStats,Yf.prototype.getCuePoints=Yf.prototype.getCuePoints,Yf.prototype.getServerSideCuePoints=Yf.prototype.getServerSideCuePoints,Yf.prototype.replaceServerSideAdTagParameters=Yf.prototype.replaceServerSideAdTagParameters,Yf.prototype.requestServerSideStream=Yf.prototype.requestServerSideStream,Yf.prototype.initServerSide=Yf.prototype.initServerSide,Yf.prototype.addMediaTailorTrackingUrl=Yf.prototype.addMediaTailorTrackingUrl,Yf.prototype.requestMediaTailorStream=Yf.prototype.requestMediaTailorStream,Yf.prototype.initMediaTailor=Yf.prototype.initMediaTailor,Yf.prototype.updateClientSideAdsRenderingSettings=Yf.prototype.updateClientSideAdsRenderingSettings,Yf.prototype.requestClientSideAds=Yf.prototype.requestClientSideAds,Yf.prototype.onAssetUnload=Yf.prototype.onAssetUnload,Yf.prototype.release=Yf.prototype.release,Yf.prototype.initClientSide=Yf.prototype.initClientSide,Yf.prototype.initInterstitial=Yf.prototype.initInterstitial,Yf.prototype.configure=Yf.prototype.configure,Yf.prototype.setLocale=Yf.prototype.setLocale,Yf.ADS_LOADED="ads-loaded",Yf.AD_STARTED="ad-started",Yf.AD_FIRST_QUARTILE="ad-first-quartile",Yf.AD_MIDPOINT="ad-midpoint",Yf.AD_THIRD_QUARTILE="ad-third-quartile",Yf.AD_COMPLETE="ad-complete",Yf.AD_STOPPED="ad-stopped",Yf.AD_SKIPPED="ad-skipped",Yf.AD_VOLUME_CHANGED="ad-volume-changed",Yf.AD_MUTED="ad-muted",Yf.AD_PAUSED="ad-paused",Yf.AD_RESUMED="ad-resumed",Yf.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Yf.CUEPOINTS_CHANGED="ad-cue-points-changed",Yf.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Yf.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Yf.AD_CLICKED="ad-clicked",Yf.AD_PROGRESS="ad-progress",Yf.AD_BUFFERING="ad-buffering",Yf.AD_IMPRESSION="ad-impression",Yf.AD_DURATION_CHANGED="ad-duration-changed",Yf.AD_CLOSED="ad-closed",Yf.AD_LOADED="ad-loaded",Yf.ALL_ADS_COMPLETED="all-ads-completed",Yf.AD_LINEAR_CHANGED="ad-linear-changed",Yf.AD_METADATA="ad-metadata",Yf.AD_RECOVERABLE_ERROR="ad-recoverable-error",Yf.AD_ERROR="ad-error",Yf.AD_BREAK_READY="ad-break-ready",Yf.AD_INTERACTION="ad-interaction",Yf.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Yf.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Yf.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",sf=function(){return new Yf};var Jf="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Zf="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),eg=["loop","playbackRate"],tg=["pause","play"],ng=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1),rg=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),ig=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),ag=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],sg=[["isTextTrackVisible","setTextTrackVisibility"]],og="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),lg="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function ug(e,t,n,r,i,a,s){var o=this;this.H=e,this.K=s,this.l=new Tr(t),this.M=n,this.u=!1,this.B=r,this.G=i,this.N=a,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return fg(o)},this.F=function(e,t){switch((e=Qf(t)).type){case"event":var n=e.targetName,r=Ni(e.event);o.B(n,r);break;case"update":for(r in n=e.update)for(var i in e=o.g[r]||{},n[r])e[i]=n[r][i];o.u&&(o.M(),o.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,t=e.res,e=o.h.get(i),o.h.delete(i),e)if(r){for(n in i=new Ue(r.severity,r.category,r.code),r)i[n]=r[n];e.reject(i)}else e.resolve(t)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,Eg.add(this)}function dg(e,t){var n=e.N();vg=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),fg(e),pg(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function cg(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Ue(2,8,n,t))}function hg(e){var t=vg;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function fg(e){var t=!!vg&&"connected"==vg.status;if(e.i&&!t){for(var n in e.G(),e.g)e.g[n]={};gg(e)}e.i=t,e.J=t?vg.receiver.friendlyName:"",e.l.Jb()}function gg(e){if(e.h)for(var t=g(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var r=e.h.get(n);e.h.delete(n),r.reject(new Ue(1,7,7e3))}}function pg(e,t){t=Xf(t);var n=vg;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Y)}catch(r){throw t=new Ue(2,8,8005,r),n=new Mi("error",(new Map).set("detail",t)),e.B("player",n),e.qd(),t}}(r=ug.prototype).destroy=function(){return Eg.delete(this),gg(this),vg&&hg(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},r.wb=function(){return this.i},r.$g=function(){return this.J},r.init=function(){if(this.H.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var t=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=g(Eg),n=t.next();!n.done;n=t.next()){var r=e;(n=n.value).j=new ki,n.u=!0,dg(n,r)}},function(e){for(var t=g(Eg),n=t.next();!n.done;n=t.next())n=n.value,yg="available"==e,n.l.Jb()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),yg&&this.l.ia(mg),(t=vg)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new ki,this.u=!0,dg(this,t)):vg=null}else e.__onGCastApiAvailable!==Tg&&(bg=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Tg)},r.mh=function(e){this.o=e,this.i&&pg(this,{type:"appData",appData:this.o})},r.cast=function(){var e=this;return L(function(t){if(!e.m)throw new Ue(1,8,8e3);if(!yg)throw new Ue(1,8,8001);if(e.i)throw new Ue(1,8,8002);return e.j=new ki,chrome.cast.requestSession(function(t){return dg(e,t)},function(t){return cg(e,t)}),E(t,e.j,0)})},r.qd=function(){if(this.i){if(gg(this),vg){hg(this);try{vg.stop(function(){},function(){})}catch(xA){}vg=null}fg(this)}},r.get=function(e,t){var n=this;if("video"==e){if(tg.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(p(M.apply(0,arguments))))}}else if("player"==e){if(ig.has(t)&&!this.get("player","isLive")())return function(){};if(og.includes(t))return function(){return n.Fi.apply(n,[e,t].concat(p(M.apply(0,arguments))))};if(lg.includes(t))return function(){return n.Mk.apply(n,[e,t].concat(p(M.apply(0,arguments))))};if(ng.has(t)||rg.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},r.set=function(e,t,n){this.g[e][t]=n,pg(this,{type:"set",targetName:e,property:t,value:n})},r.Fi=function(e,t){pg(this,{type:"call",targetName:e,methodName:t,args:M.apply(2,arguments)})},r.Mk=function(e,t){var n=M.apply(2,arguments),r=new ki,i=this.I.toString();this.I++,this.h.set(i,r);try{pg(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:i})}catch(a){r.reject(a)}return r};var mg=.02,yg=!1,vg=null,bg=null,Eg=new Set;function Tg(t){if(bg?e.__onGCastApiAvailable=bg:delete e.__onGCastApiAvailable,bg=null,t)for(var n=g(Eg),r=n.next();!r.done;r=n.next())r.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Sg(t,n,r,i){i=void 0!==i&&i,Oi.call(this);var a=this;this.i=t,this.h=n,this.l=this.o=this.m=this.u=this.j=null,this.I=r,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,e.chrome?(this.g=new ug(r,function(){return Ig(a)},function(){return kg(a)},function(e,t){return Cg(a,e,t)},function(){return _g(a)},function(){return Ag(a)},i),function(e){e.g.init(),e.l=new te;for(var t=g(Jf),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(t){e.g.wb()||(t=Ni(t),e.m.dispatchEvent(t))});for(var r in Pi)e.l.D(e.h,Pi[r],function(t){e.g.wb()||e.o.dispatchEvent(t)});for(var i in e.j={},t={},e.i)(t={ce:t.ce}).ce=i,Object.defineProperty(e.j,t.ce,{configurable:!1,enumerable:!0,get:function(t){return function(){return Rg(e,t.ce)}}(t),set:function(t){return function(n){var r=t.ce;e.g.wb()?e.g.set("video",r,n):e.i[r]=n}}(t)});e.u={},wg(e,function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return xg(e,t)}})}),function(e){var t=new Map;wg(e,function(n,r){t.has(r)?(r=t.get(r),n.length<r.length?e.G.set(n,r):e.G.set(r,n)):t.set(r,n)})}(e),e.m=new Oi,e.m.Fe=e.j,e.o=new Oi,e.o.Fe=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.wb()||Dg(e)})}(this)):(this.j=this.i,this.u=this.h)}function wg(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!a.has(e)}var r,i=e.h,a=new Set;for(r in i)n(r)&&(a.add(r),t(r,i[r]));for(e=Object.getPrototypeOf(i),r=Object.getPrototypeOf({});e&&e!=r;){for(var s=g(Object.getOwnPropertyNames(e)),o=s.next();!o.done;o=s.next())n(o=o.value)&&(a.add(o),t(o,i[o]));e=Object.getPrototypeOf(e)}}function Ag(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=g(eg),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.i[r];for(e.i.ended||(t.startTime=e.i.currentTime),r=(n=g(ag)).next();!r.done;r=n.next()){var i=r.value;r=i[1],i=e.h[i[0]](),t.player[r]=i}for(r=(n=g(sg)).next();!r.done;r=n.next())r=(i=r.value)[1],i=e.h[i[0]](),t.playerAfterLoad[r]=i;return t}function Ig(e){var t=new Mi("caststatuschanged");e.dispatchEvent(t)}function kg(e){var t=new Mi(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function _g(e){for(var t=g(ag),n=t.next();!n.done;n=t.next()){var r=n.value;n=r[1],r=e.g.get("player",r[0])(),e.h[n](r)}var i=e.F,a=e.C,s=e.B;Dg(e);var o=e.g.get("player","getAssetUri")();r=e.g.get("video","ended"),t=Promise.resolve();var l,u=e.i.autoplay;n=null,r||(n=e.g.get("video","currentTime")),(r=e.g.get("player","getTextTracks")())&&r.length&&(l=r.find(function(e){return e.active}));var d=e.g.get("player","isTextTrackVisible")();o&&(e.i.autoplay=!1,t=e.h.load(o,n));var c={};for(r=(n=g(eg)).next();!r.done;r=n.next())r=r.value,c[r]=e.g.get("video",r);t.then(function(){if(e.i){for(var t=g(i),n=t.next();!n.done;n=t.next()){var r;n=n.value,(r=e.td()).Me.apply(r,p(n))}for(r=(t=g(a)).next();!r.done;r=t.next()){var h;r=r.value,(h=e.td()).Od.apply(h,p(r))}for(t=(h=g(s)).next();!t.done;t=h.next()){var f;t=t.value,(f=e.td()).Le.apply(f,p(t))}for(h=(f=g(eg)).next();!h.done;h=f.next())h=h.value,e.i[h]=c[h];for(h=(f=g(sg)).next();!h.done;h=f.next())h=(t=h.value)[1],t=e.g.get("player",t[0])(),e.h[h](t);e.h.qh(d),l&&e.h.jh(l.language,l.roles,l.forced),e.i.autoplay=u,o&&e.i.play()}},function(t){t=new Mi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function Rg(e,t){if("addEventListener"==t)return function(t,n,r){return e.m.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.m.removeEventListener(t,n,r)};if(e.g.wb()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.wb()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function xg(e,t,n){if(n=void 0!==n&&n,e.G.has(t)&&(t=e.G.get(t)),"addEventListener"==t)return function(t,n,r){return e.o.addEventListener(t,n,r)};if("removeEventListener"==t)return function(t,n,r){return e.o.removeEventListener(t,n,r)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Wb()};if("getDrmEngine"==t)return function(){return e.h.F};if("getAdManager"==t)return function(){return e.h.Yh()};if("getQueueManager"==t)return function(){return e.h.ei()};if("setVideoContainer"==t)return function(t){return e.h.Ti(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=M.apply(0,arguments);return e.F.push(n),xg(e,t,!0).apply(null,p(n))};if("addTextTrackAsync"==t)return function(){var n=M.apply(0,arguments);return e.C.push(n),xg(e,t,!0).apply(null,p(n))};if("addChaptersTrack"==t)return function(){var n=M.apply(0,arguments);return e.B.push(n),xg(e,t,!0).apply(null,p(n))}}if(e.g.wb()){if("getManifest"==t||"drmInfo"==t)return function(){return K(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return K(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return K(t+"() does not work while casting!"),[]}}return e.g.wb()&&0==Object.keys(e.g.g.video).length&&(ng.has(t)||rg.has(t))||!e.g.wb()?e.h[t].bind(e.h):e.g.get("player",t)}function Cg(e,t,n){e.g.wb()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&Dg(e),e.o.dispatchEvent(n)))}function Dg(e){e.F=[],e.C=[],e.B=[]}function Lg(e,t,n,r){Oi.call(this);var i=this;this.h=e,this.g=t,this.j=new te,this.I={video:e,player:t},this.G=n||function(){},this.J=r||function(e){return e},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new Tr(function(){Og(i)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Mg(e)},t.onSenderDisconnected=function(){return Mg(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Bg(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Bg(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return function(e,t){var n=Qf(t.data);switch(n.type){case"PLAY":e.h.play(),jg(e);break;case"PAUSE":e.h.pause(),jg(e);break;case"SEEK":t=n.currentTime;var r=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),r&&"PLAYBACK_START"==r?(e.h.play(),jg(e)):r&&"PLAYBACK_PAUSE"==r&&(e.h.pause(),jg(e));break;case"STOP":e.g.Bc().then(function(){e.g&&jg(e)});break;case"GET_STATUS":Ug(e,Number(n.requestId));break;case"VOLUME":t=(r=n.volume).level,r=r.muted;var i=e.h.volume,a=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=r&&(e.h.muted=r),i==e.h.volume&&a==e.h.muted||jg(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,r=n.currentTime,i=e.J(t.contentId),a=n.autoplay||!0,e.G(t.customData),a&&(e.h.autoplay=!0),e.g.load(i,r).then(function(){e.g&&Ug(e)}).catch(function(t){var r="LOAD_FAILED";7==t.category&&7e3==t.code&&(r="LOAD_CANCELLED"),Bg(e,{requestId:Number(n.requestId),type:r},e.u)});break;default:Bg(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=Qf(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,m,y,v,b,w,k,_,R;L(function(x){switch(x.g){case 1:for(r in t.player)i=t.player[r],e.g[r](i);return e.G(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,S(x,5),E(x,e.g.load(t.manifest,t.startTime),7)):E(x,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(s=g(t.addThumbnailsTrackCalls),o=s.next();!o.done;o=s.next())l=o.value,e.g.Me.apply(e.g,p(l));if(t.addTextTrackAsyncCalls)for(u=g(t.addTextTrackAsyncCalls),d=u.next();!d.done;d=u.next())c=d.value,e.g.Od.apply(e.g,p(c));if(t.addChaptersTrackCalls)for(h=g(t.addChaptersTrackCalls),f=h.next();!f.done;f=h.next())m=f.value,e.g.Le.apply(e.g,p(m));A(x,3);break;case 5:return y=I(x),v=(new Map).set("detail",y),b=new Mi("error",v),e.g&&e.g.dispatchEvent(b),x.return();case 3:if(!e.g)return x.return();for(w in t.video)k=t.video[w],e.h[w]=k;for(_ in t.playerAfterLoad)R=t.playerAfterLoad[_],e.g[_](R);e.h.autoplay=a,t.manifest&&(e.h.play(),jg(e)),T(x)}})}(e,n.initState,n.appData),Og(e);break;case"appData":e.G(n.appData);break;case"set":var r=n.targetName,i=n.property;if(n=n.value,"video"==r){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==i){t.setSystemVolumeLevel(n);break}if("muted"==i){t.setSystemVolumeMuted(n);break}}e.I[r][i]=n;break;case"call":(r=e.I[n.targetName])[n.methodName].apply(r,n.args);break;case"asyncCall":r=n.targetName,i=n.methodName,"player"==r&&"load"==i&&(e.m=0,e.C=!1);var a=n.id,s=t.senderId;n=(t=e.I[r])[i].apply(t,n.args),"player"==r&&"load"==i&&(n=n.then(function(){e.B=!0})),n.then(function(t){return zg(e,s,a,null,t)},function(t){return zg(e,s,a,t,null)})}}(e,t)},t.start();for(var n=(t=g(Jf)).next();!n.done;n=t.next())e.j.D(e.h,n.value,function(t){return Pg(e,"video",t)});for(var r in Pi)e.j.D(e.g,Pi[r],function(t){return Pg(e,"player",t)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,Ng(e)}),e.j.D(e.h,"playing",function(){e.o=!1,Ng(e)}),e.j.D(e.h,"pause",function(){Ng(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,Ng(e)}),e.j.D(e.h,"ended",function(){new Tr(function(){e.h&&e.h.ended&&(e.o=!0,Ng(e))}).ia(Gg)})}(this)}function Mg(e){e.m=0,e.B=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Ng(e)}function Ng(e){var t;L(function(n){return 1==n.g?E(n,Promise.resolve(),2):e.g?(t=new Mi("caststatuschanged"),e.dispatchEvent(t),Fg(e)||jg(e),void T(n)):n.return()})}function Pg(e,t,n){e.g&&(Og(e),Bg(e,{type:"event",targetName:t,event:n},e.l))}function Og(e){e.F.ia(qg);for(var t={video:{},player:{}},n=g(Zf),r=n.next();!r.done;r=n.next())r=r.value,t.video[r]=e.h[r];e.g.W()&&ig.forEach(function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())}),ng.forEach(function(n,r){e.m%n==0&&(t.player[r]=e.g[r]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Bg(e,{type:"update",update:t},e.l),rg.forEach(function(t,n){e.m%t==0&&((t={player:{}}).player[n]=e.g[n](),Bg(e,{type:"update",update:t},e.l))}),e.C&&(e.m+=1),Fg(e)}function Fg(e){return!(!e.B||!e.h.duration&&!e.g.W()||(Ug(e),e.B=!1,0))}function Ug(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),jg(e,void 0===t?0:t,n)}function zg(e,t,n,r,i){e.g&&Bg(e,{type:"asyncComplete",id:n,error:r,res:i},e.l,t)}function Bg(e,t,n,r){e.H&&(e=Xf(t),r?n.getCastChannel(r).send(e):n.broadcast(e))}function jg(e,t,n){n=void 0===n?null:n;var r={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?Hg:e.g.Ng()?Kg:e.h.paused?$g:Vg,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(r.media=n),Bg(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[r]},e.u)}h(Sg,Oi),(r=Sg.prototype).destroy=function(e){return this.g&&void 0!==e&&e&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Oi.prototype.release.call(this),Promise.all(e)},r.ck=function(){return this.j},r.td=function(){return this.u},r.lj=function(){return!!this.g&&this.g.m&&yg},r.wb=function(){return!!this.g&&this.g.wb()},r.$g=function(){return this.g?this.g.$g():""},r.cast=function(){var e=this;return L(function(t){return 1==t.g?e.g?E(t,e.g.cast(),2):t.return():e.h?E(t,e.h.Bc(),0):t.return()})},r.mh=function(e){this.g&&this.g.mh(e)},r.cl=function(){var e;this.g&&(e=this.g).i&&chrome.cast.requestSession(function(t){return dg(e,t)},function(t){return cg(e,t)})},r.qd=function(){this.g&&this.g.qd()},r.mj=function(e,t){t=void 0!==t&&t;var n=this;return L(function(r){if(1==r.g)return e==n.I&&t==n.H?r.return():(n.I=e,n.H=t,n.g?(n.g.qd(),E(r,n.g.destroy(),2)):r.return());n.g=null,n.g=new ug(e,function(){return Ig(n)},function(){return kg(n)},function(e,t){return Cg(n,e,t)},function(){return _g(n)},function(){return Ag(n)},t),n.g.init(),T(r)})},B("shaka.cast.CastProxy",Sg),Sg.prototype.changeReceiverId=Sg.prototype.mj,Sg.prototype.forceDisconnect=Sg.prototype.qd,Sg.prototype.suggestDisconnect=Sg.prototype.cl,Sg.prototype.setAppData=Sg.prototype.mh,Sg.prototype.cast=Sg.prototype.cast,Sg.prototype.receiverName=Sg.prototype.$g,Sg.prototype.isCasting=Sg.prototype.wb,Sg.prototype.canCast=Sg.prototype.lj,Sg.prototype.getPlayer=Sg.prototype.td,Sg.prototype.getVideo=Sg.prototype.ck,Sg.prototype.destroy=Sg.prototype.destroy,h(Lg,Oi),(r=Lg.prototype).isConnected=function(){return this.H},r.jk=function(){return this.o},r.Yk=function(e){this.i=e},r.qj=function(){this.i=null},r.Zk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},r.Xk=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},r.Wk=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},r.destroy=function(){var e,t=this;return L(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.g&&(e.push(t.g.destroy()),t.g=null),t.F&&(t.F.stop(),t.F=null),t.h=null,t.I=null,t.G=null,t.H=!1,t.o=!0,t.l=null,t.u=null,Oi.prototype.release.call(t),E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)})},B("shaka.cast.CastReceiver",Lg),Lg.prototype.destroy=Lg.prototype.destroy,Lg.prototype.setContentArtist=Lg.prototype.Wk,Lg.prototype.setContentImage=Lg.prototype.Xk,Lg.prototype.setContentTitle=Lg.prototype.Zk,Lg.prototype.clearContentMetadata=Lg.prototype.qj,Lg.prototype.setContentMetadata=Lg.prototype.Yk,Lg.prototype.isIdle=Lg.prototype.jk,Lg.prototype.isConnected=Lg.prototype.isConnected;var qg=.5,Gg=5,Hg="IDLE",Vg="PLAYING",Kg="BUFFERING",$g="PAUSED";function Yg(e,t,n,r,i){if(r>=i)return null;for(var a=-1,s=-1,o=0;o<n.length;o++)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){a=o;break}for(o=n.length-1;o>=0;o--)if(n[o].some(function(e){return null!=e&&""!=e.g.trim()})){s=o;break}if(-1===a||-1===s)return null;for(var l=o=!1,u="white",d="black",c=Wg(r,i,o,l,u,d);a<=s;a++){for(var h=n[a],f=-1,g=-1,p=0;p<h.length;p++)if(null!=h[p]&&""!==h[p].g.trim()){f=p;break}for(p=h.length-1;p>=0;p--)if(null!=h[p]&&""!==h[p].g.trim()){g=p;break}if(-1===f||-1===g)h=Xg(r,i),e.nestedCues.push(h);else{for(;f<=g;f++)if(p=h[f]){var m=p.l,y=p.i,v=p.j,b=p.h;m==o&&y==l&&v==u&&b==d||(c.payload&&e.nestedCues.push(c),c=Wg(r,i,m,y,v,b),o=m,l=y,u=v,d=b),c.payload+=p.g}else c.payload+=" ";c.payload&&e.nestedCues.push(c),a!==s&&(c=Xg(r,i),e.nestedCues.push(c)),c=Wg(r,i,o,l,u,d)}}return e.nestedCues.length?{cue:e,stream:t}:null}function Wg(e,t,n,r,i,a){return e=new En(e,t,""),n&&e.textDecoration.push(Hn),r&&(e.fontStyle=qn),e.color=i,e.backgroundColor=a,e}function Xg(e,t){return(e=new En(e,t,"")).lineBreak=!0,e}function Qg(e,t,n,r,i){this.g=e,this.l=t,this.i=n,this.h=r,this.j=i}function Jg(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,ep(this)}function Zg(e,t,n){var r="CC"+(1+(e.F<<1|e.C)),i=new En(t,n,"");i.lineInterpretation=1;var a=lp.get(e.g);return a&&(i.line=a),null!=e.u&&null!=e.B&&(i.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=Yg(i,r,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(a=lp.get(e.g+3-t.cue.nestedCues.length))&&(i.line=a),t}function ep(e){rp(e,0,15),e.g=1}function tp(e,t,n){if(!(n<32||n>127)){var r="";switch(t){case 0:r=ip.has(n)?ip.get(n):String.fromCharCode(n);break;case 1:r=ap.get(n);break;case 2:e.i[e.g].pop(),r=sp.get(n);break;case 3:e.i[e.g].pop(),r=op.get(n)}r&&e.i[e.g].push(new Qg(r,e.m,e.j,e.o,e.l))}}function np(e,t,n,r){if(!(n<0||t<0))if(t>=n)for(--r;r>=0;r--)e.i[t+r]=e.i[n+r].map(function(e){return e});else for(var i=0;i<r;i++)e.i[t+i]=e.i[n+i].map(function(e){return e})}function rp(e,t,n){for(var r=0;r<=n;r++)e.i[t+r]=[]}var ip=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),ap=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),sp=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),op=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),lp=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function up(e,t){this.h=0,this.o=new Jg(e,t),this.i=new Jg(e,t),this.g=this.j=new Jg(e,t),this.l=0,this.m=null}function dp(e,t,n){e.g=e.i;var r=e.g,i=null;return 3!==e.h&&4!==e.h&&(i=Zg(r,e.l,n),(n=e.i).g=n.h>0?n.h:0,rp(n,0,15),(n=e.j).g=n.h>0?n.h:0,rp(n,0,15),r.g=15),e.h=3,r.h=t,i}function cp(e){e.h=1,e.g=e.j,e.g.h=0}function hp(e){$("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var fp="black green blue cyan red yellow magenta black".split(" "),gp="white green blue cyan red yellow magenta white_italics".split(" ");function pp(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",mp(this)}function mp(e){e.i=[];for(var t=0;t<16;t++)e.i.push(yp())}function yp(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function vp(e,t){bp(e)&&(e.i[e.h][e.g]=new Qg(t,e.F,e.B,e.u,e.C),e.g++)}function bp(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}function Ep(e,t,n){var r=new En(e.j,t,"");r.textAlign=0===e.G?"left":1===e.G?"right":Rn;var i=r.region;switch(e.J&&(i.id+="svc"+e.J),i.id+="win"+e.N,i.height=e.o,i.width=e.m,i.heightUnits=2,i.widthUnits=2,i.viewportAnchorX=e.I,i.viewportAnchorY=e.M,i.viewportAnchorUnits=e.K?Rt:2,e.H){case 0:i.regionAnchorX=0,i.regionAnchorY=0;break;case 1:i.regionAnchorX=50,i.regionAnchorY=0;break;case 2:i.regionAnchorX=100,i.regionAnchorY=0;break;case 3:i.regionAnchorX=0,i.regionAnchorY=50;break;case 4:i.regionAnchorX=50,i.regionAnchorY=50;break;case 5:i.regionAnchorX=100,i.regionAnchorY=50;break;case 6:i.regionAnchorX=0,i.regionAnchorY=100;break;case 7:i.regionAnchorX=50,i.regionAnchorY=100;break;case 8:i.regionAnchorX=100,i.regionAnchorY=100}return(n=Yg(r,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function Tp(){this.i=[],this.h=null,this.g=0}function Sp(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new wp(e.h)),e.h=null,e.g=0))}function wp(e){this.g=0,this.h=e}function Ap(e){if(!e.Ia())throw new Ue(2,2,3e3);return e.h[e.g++]}function Ip(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function kp(e,t,n,r){if(!e.g)return[];if(24==n)return n=Ap(t).value,r=Ap(t).value,n=[n,r].map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join(""),vp(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var i=null;switch(n){case 8:!bp(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(i=Ep(t,r,e.i)),t.h+1>=t.o?function(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=yp()}(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(i=Ep(t,r,e.i)),t.i[t.h]=yp(),t.g=0;break;case 12:t.isVisible()&&(i=Ep(t,r,e.i)),mp(t),t.h=0,t.g=0}return i?[i]:[]}function _p(e,t,n,r){if(n>=128&&n<=135)r=7&n,e.h[r]&&(e.g=e.h[r]);else{if(136===n){n=Ap(t).value,t=[];for(var i=(n=g(Rp(e,n))).next();!i.done;i=n.next()){if((i=e.h[i.value]).isVisible()){var a=Ep(i,r,e.i);a&&t.push(a)}mp(i)}return t}if(137===n)for(n=(t=g(Rp(e,t=Ap(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=r),n.display();else{if(138===n){for(n=Ap(t).value,t=null,i=(n=g(Rp(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()&&(t=Ep(i,r,e.i)),i.l=!1;return t?[t]:[]}if(139===n){for(n=Ap(t).value,t=null,i=(n=g(Rp(e,n))).next();!i.done;i=n.next())(i=e.h[i.value]).isVisible()?t=Ep(i,r,e.i):i.j=r,i.l=!i.l;return t?[t]:[]}if(140===n)return xp(e,t=Ap(t).value,r);if(143===n)return r=xp(e,255,r),Cp(e),r;if(144===n)t.skip(1),r=Ap(t).value,e.g&&(e.g.B=(128&r)>0,e.g.F=(64&r)>0);else if(145===n)r=Ap(t).value,n=Ap(t).value,t.skip(1),e.g&&(t=Dp((48&n)>>4,(12&n)>>2,3&n),e.g.C=Dp((48&r)>>4,(12&r)>>2,3&r),e.g.u=t);else if(146===n)r=Ap(t).value,t=Ap(t).value,e.g&&((e=e.g).h=15&r,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),r=Ap(t).value,t.skip(1),e.g&&(e.g.G=3&r);else if(n>=152&&n<=159){n=(15&n)-8,(i=null!==e.h[n])||((a=new pp(n,e.i)).j=r,e.h[n]=a),r=Ap(t).value,a=Ap(t).value;var s=Ap(t).value,o=Ap(t).value,l=Ap(t).value;t=Ap(t).value,i&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),(t=e.h[n]).l=(32&r)>0,t.M=127&a,t.I=s,t.H=(240&o)>>4,t.K=(128&a)>0,t.o=1+(15&o),t.m=1+(63&l),e.g=e.h[n]}}}return[]}function Rp(e,t){for(var n=[],r=0;r<8;r++)!(1&~t)&&e.h[r]&&n.push(r),t>>=1;return n}function xp(e,t,n){for(var r=[],i=(t=g(Rp(e,t))).next();!i.done;i=t.next()){i=i.value;var a=e.h[i];a.isVisible()&&(a=Ep(a,n,e.i))&&r.push(a),e.h[i]=null}return r}function Cp(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Dp(e,t,n){var r={0:0,1:0,2:1,3:1};return Mp[(e=r[e])<<2|(t=r[t])<<1|(n=r[n])]}pp.prototype.isVisible=function(){return this.l},pp.prototype.display=function(){this.l=!0},wp.prototype.Ia=function(){return this.g<this.h.length},wp.prototype.Oa=function(){return this.g},wp.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ue(2,2,3e3);this.g+=e},wp.prototype.Ki=function(e){if(this.g-e<0)throw new Ue(2,2,3e3);this.g-=e};var Lp=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),Mp="black blue green cyan red magenta yellow white".split(" ");function Np(){this.h=[],this.g=[],this.i=new Tp,this.l=0,this.m=new Map([["CC1",new up(0,0)],["CC2",new up(0,1)],["CC3",new up(1,0)],["CC4",new up(1,1)]]),this.u=this.o=0,this.j=new Map,this.C=!0,this.B=new Set,Pp(this)}function Pp(e){e.o=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,ep(n.i),ep(n.j),ep(n.o);e.C=!0}function Op(e,t){var n=t.type;if(16==(112&t.Cb)){var r=t.Cb>>3&1;0===n?e.o=r:e.u=r}if(r="CC"+(1+(n<<1|(n?e.u:e.o))),n=e.m.get(r),255===t.Cb&&255===t.hc||!t.Cb&&!t.hc||!Up(t.Cb)||!Up(t.hc))return++e.l>=45&&Pp(e),null;e.l=0,t.Cb&=127,t.hc&=127;var i=t.Cb;if(i>=1&&i<=15||!t.Cb&&!t.hc)return null;if(i=null,16==(112&t.Cb))e:{if(e.B.add(r),r=t.Cb,e=t.hc,n.m===(r<<8|e))n.m=null;else if(n.m=r<<8|e,16==(240&r)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|e>>5&1],r="white",i=!1;var a=null,s=e>95?e-96:e-64;s<=13?r=gp[Math.floor(s/2)]:s<=15?i=!0:a=Math.floor((s-16)/2),e=!(1&~e),4!==n.h&&(s=n.g,3===n.h&&t!==s.g&&(np(s,n=1+t-s.h,1+s.g-s.h,s.h),rp(s,0,n-1),rp(s,t+1,15-t)),s.g=t,s.m=e,s.j=i,s.l=r,s.u=a,s.o="black")}else if(17==(247&r)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",tp(n.g,0,32),r=!1,"white_italics"===(t=gp[(14&e)>>1])&&(t="white",r=!0),n.g.m=!(1&~e),n.g.j=r,n.g.l=t;else if(16==(247&r)&&32==(240&e)||23==(247&r)&&45==(255&e))t="black",!(7&r)&&(t=fp[(14&e)>>1]),n.g.o=t;else if(17==(247&r)&&48==(240&e))tp(n.g,1,e);else if(18==(246&r)&&32==(224&e))tp(n.g,1&r?3:2,e);else{if(20==(246&r)&&32==(240&e)){switch(e=t.pts,r=null,t.hc){case 32:cp(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:r=dp(n,2,e);break;case 38:r=dp(n,3,e);break;case 39:r=dp(n,4,e);break;case 40:tp(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:ep(n.o),hp(n);break;case 43:hp(n);break;case 44:t=n.i,r=null,4!==n.h&&(r=Zg(t,n.l,e)),rp(t,0,15);break;case 45:t=n.g,3!==n.h?r=null:(r=Zg(t,n.l,e),np(t,(i=t.g-t.h+1)-1,i,t.h),rp(t,0,i-1),rp(t,t.g,15-t.g),n.l=e);break;case 46:rp(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=Zg(n.i,n.l,e)),r=n.j,n.j=n.i,n.i=r,cp(n),n.l=e,r=t}i=r;break e}(23==r||31==r)&&e>=33&&e<=35&&(n.g.B=e-32)}i=null}else e=t.hc,tp(n.g,0,t.Cb),tp(n.g,0,e);return i}function Fp(e,t){var n=[];try{for(;t.Ia();){var r=Ap(t).value,i=(224&r)>>5,a=31&r;if(7===i&&0!=a&&(i=63&Ap(t).value),0!=i){e.B.add("svc"+i),e.j.has(i)||e.j.set(i,new Ip(i));for(var s=e.j.get(i),o=t.Oa();t.Oa()-o<a;){i=s;var l=t,u=Ap(l),d=u.value,c=u.pts;if(16===d&&(d=d<<16|Ap(l).value),d>=0&&d<=31)var h=kp(i,l,d,c);else if(d>=128&&d<=159)h=_p(i,l,d,c);else{if(d>=4096&&d<=4127)i=l,(l=255&d)>=8&&l<=15?i.skip(1):l>=16&&l<=23?i.skip(2):l>=24&&l<=31&&i.skip(3);else if(d>=4224&&d<=4255)i=l,(l=255&d)>=128&&l<=135?i.skip(4):l>=136&&l<=143&&i.skip(5);else if(d>=32&&d<=127)l=d,i.g&&vp(i.g,127===l?"":String.fromCharCode(l));else if(d>=160&&d<=255)i.g&&vp(i.g,String.fromCharCode(d));else if(d>=4128&&d<=4223){if(l=255&d,i.g)if(Lp.has(l)){var f=Lp.get(l);vp(i.g,f)}else vp(i.g,"_")}else d>=4256&&d<=4351&&i.g&&vp(i.g,160!=(255&d)?"_":"[CC]");h=[]}n.push.apply(n,p(h))}}}}catch(g){if(!(g instanceof Ue&&3e3===g.code))throw g;$("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function Up(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function zp(e){for(var t=[],n=e,r=e=0;r<n.length;)2==e&&3==n[r]?(e=0,(n=[].concat(p(n))).splice(r,1),n=new Uint8Array(n)):0==n[r]?e++:e=0,r++;for(e=n,r=0;r<e.length;){for(n=0;255==e[r];)n+=255,r++;n+=e[r++];for(var i=0;255==e[r];)i+=255,r++;i+=e[r++],4==n&&t.push(e.subarray(r,r+i)),r+=i}return t}function Bp(){this.j=new Map,this.i=this.h=0,this.g=qp}function jp(e,t,n,r,i,a,s,o,l){var u=0,d=a,c=o.map(function(e){return e.hh});for((c=[].concat.apply([],p(c))).length&&(d=c[0].sampleSize||a),t.skip(s+o[0].mg);t.Ia();){s=t.U();var h=t.Y(),f=null;switch(f=!1,o=1,e.g){case Gp:f=6==(f=31&h);break;case Hp:o=2,t.skip(1),f=39==(f=h>>1&63)||40==f;break;case Vp:o=2,t.skip(1),f=23==(f=h>>1&63)||24==f;break;default:return}if(f)for(h=0,u<c.length&&(h=c[u].Cf||0),h=(n+h)/r,f=(o=g(zp(o=t.Tb(s-o,!1)))).next();!f.done;f=o.next())l.push({packet:f.value,pts:h});else try{t.skip(s-o)}catch(m){break}0==(d-=s+4)&&(n=u<c.length?n+(c[u].ih||i):n+i,d=++u<c.length&&c[u].sampleSize||a)}}Np.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,Pp(this);for(var t=(e=g(this.j.values())).next();!t.done;t=e.next())Cp(t.value)},Np.prototype.extract=function(e,t){if(this.C){for(var n=g(this.m.values()),r=n.next();!r.done;r=n.next())r.value.l=t;this.C=!1}if(!((e=new ta(e,0)).getLength()<8)&&181===e.Y()&&49===e.Ca()&&1195456820===e.U()&&3===e.Y()&&64&(n=e.Y()))for(n&=31,e.skip(1),r=0;r<n;r++){var i=e.Y(),a=(4&i)>>2,s=e.Y(),o=e.Y();a&&(0==(i&=3)||1===i?this.h.push({pts:t,type:i,Cb:s,hc:o,order:this.h.length}):(this.g.push({pts:t,type:i,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:o,order:this.g.length})))}},Np.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),r=n.next();!r.done;r=n.next())(r=Op(this,r.value))&&t.push(r);for(r=(n=g(this.g)).next();!r.done;r=n.next())Sp(this.i,r.value);for(r=(n=g(this.i.i)).next();!r.done;r=n.next())r=Fp(this,r.value),t.push.apply(t,p(r));return this.i.i=[],this.h=[],this.g=[],t},Np.prototype.getStreams=function(){return Array.from(this.B)},B("shaka.cea.CeaDecoder",Np),kt=function(){return new Np},Bp.prototype.init=function(e){function t(e){e=e.name,Kp.has(e)&&(n.g=Kp.get(e))}var n=this,r=[],i=[];if((new ia).box("moov",aa).box("mvex",aa).S("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.U(),t=t.U(),n.h=e,n.i=t}).box("trak",aa).S("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.U();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Ca(),t.Ca(),t.Ca(),t.Ca(),r.push(n)}).box("mdia",aa).S("mdhd",function(e){e=ns(e.reader,e.version),i.push(e.timescale)}).box("minf",aa).box("stbl",aa).S("stsd",sa).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",oa).box("sinf",aa).box("frma",function(e){e=as(e.reader).codec,Kp.has(e)&&(n.g=Kp.get(e))}).parse(e,!0,!0),!r.length||!i.length||r.length!=i.length)throw new Ue(2,2,2010);this.g==qp&&K("Unable to determine bitstream format for CEA parsing!"),r.forEach(function(e,t){n.j.set(e,i[t])})},Bp.prototype.parse=function(e){var t=this;if(this.g==qp)return[];var n=[],r=0,i=[];return(new ia).box("moof",function(e){r=e.start,i=[],aa(e)}).box("traf",function(e){i.push({baseMediaDecodeTime:null,Td:t.h,Ud:t.i,Bi:[],timescale:9e4}),aa(e)}).S("trun",function(e){var t=i[i.length-1];e=rs(e.reader,e.version,e.flags),t.Bi.push(e)}).S("tfhd",function(e){var n=i[i.length-1];e=es(e.reader,e.flags),n.Td=e.Td||t.h,n.Ud=e.Ud||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).S("tfdt",function(e){var t=i[i.length-1];e=ts(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var a=r-e.start-8,s=e.reader.Oa(),o=g(i),l=o.next();!l.done;l=o.next())null===(l=l.value).baseMediaDecodeTime?K("Unable to find base media decode time for CEA captions!"):(e.reader.seek(s),jp(t,e.reader,l.baseMediaDecodeTime,l.timescale,l.Td,l.Ud,a,l.Bi,n))}).parse(e,!1,!0),n},B("shaka.cea.Mp4CeaParser",Bp);var qp=0,Gp=1,Hp=2,Vp=3,Kp=(new Map).set("avc1",Gp).set("avc3",Gp).set("dvav",Gp).set("dva1",Gp).set("hev1",Hp).set("hvc1",Hp).set("dvh1",Hp).set("dvhe",Hp).set("vvc1",Vp).set("vvi1",Vp).set("dvc1",Vp).set("dvi1",Vp);function $p(){this.g=null}function Yp(e){return(e=function(e){var t=0,n=Oe(e),r=n.getUint32(t,!0);if(r!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){r=n.getUint16(e,!0),e+=2;var i=n.getUint16(e,!0);if(e+=2,1&i||i+e>n.byteLength){n=[];break e}var a=Ne(n,e,i);t.push({type:r,value:a}),e+=i}n=t}return n}(e=Qe($t(e))).filter(function(e){return e.type===Xp})[0])&&(e=qt(e=je(e.value,!0),"WRMHEADER"))?e:null}function Wp(e){try{var t=Yp(e);if(t)e:{for(var n=g(Wt(t,"DATA")),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.children)for(var a=g(i.children),s=a.next();!s.done;s=a.next()){var o=s.value;if("LA_URL"==o.tagName){var l=$t(o);break e}}}l=""}else l="";return l}catch(u){return""}}wt("video/mp4",function(){return new Bp}),$p.prototype.init=function(){},$p.prototype.parse=function(e){this.g?this.g.clearData():this.g=new wo;var t=[];if(!_o(e=Ne(e)))return t;var n=(e=this.g.parse(e)).Vd(),r=e.$e();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(r=(n=g(r)).next();!r.done;r=n.next())if(r=r.value,e.includes(r.type)&&null!=r.time)for(var i=g(zp(r.data)),a=i.next();!a.done;a=i.next())t.push({packet:a.value,pts:r.time});return t},B("shaka.cea.TsCeaParser",$p),wt("video/mp2t",function(){return new $p});var Xp=1;function Qp(){this.g=new Map}function Jp(t,n,r,i){var a=function(e,t){for(var n=[],r=(t=g(t)).next();!r.done;r=t.next())(r=em(e,r.value))&&n.push(r);return n}(t,n),s=null;t=[];var o=[];n=null;var l=new Set(a.map(function(e){return e.keyId}));l.delete(null);var u="cenc";if(l.size>1)throw new Ue(2,4,4010);if(!r){if((o=a.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Gd})).length>1)throw new Ue(2,4,4050);o.length&&(n=function(t){if(!e.crypto||!e.crypto.subtle)throw K("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ue(2,4,4042);var n=Qt(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Ue(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new Ue(2,4,4051);if(!(n=Qt(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new Ue(2,4,4051);if(t=n.attributes.IV,n=Ke(n.attributes.keyUriTemplate),!t||!n)throw new Ue(2,4,4051);if(16!=(t=Je(t.substr(2))).byteLength)throw new Ue(2,4,4048);return{rk:n,iv:t}}(o[0])),(o=a.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd}))&&o.encryptionScheme&&(u=o.encryptionScheme),(o=a.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Gd?(s=e.init||s,!1):"urn:mpeg:dash:sea:2012"!=e.Gd})).length&&(t=function(e,t,n,r,i){for(var a=[],s=(n=g(n)).next();!s.done;s=n.next()){var o=r[(s=s.value).Gd];if(o){var l;if((l=Qt(s.node,"urn:microsoft:playready","pro"))&&$t(l)){l=Qe(l=$t(l));var u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);l=[{initData:ma(l,u,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else l=null;if(u=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===s.Gd){u=s;var d=i;if(0==d.size)u=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);u=[{initData:ma(new Uint8Array([]),c,d,1),initDataType:"cenc",keyId:u.keyId}]}}l=nt(o,t,s.init||e||l||u),(o=tm.get(o))&&(l.licenseServerUri=o(s)),(s=Qt(s.node,"https://dashif.org/CPS","Certurl"))&&(s=$t(s))||(s=""),l.serverCertificateUri=s,a.push(l)}}return a}(s,u,o,i,l),0==t.length&&(t=[nt("",u,s)]))}if(a.length&&!n&&(r||!o.length))for(t=[],i=(r=g(Object.values(i))).next();!i.done;i=r.next())"org.w3.clearkey"!=(i=i.value)&&t.push(nt(i,u,s));if(l=Array.from(l)[0]||null)for(r=(u=g(t)).next();!r.done;r=u.next())for(i=(r=g(r.value.initData)).next();!i.done;i=r.next())i.value.keyId=l;return{Sh:l,Cm:s,drmInfos:t,dg:n,Xh:!0}}function Zp(e){var t=Qt(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=$t(t)))return t;if((t=Qt(e.node,"urn:microsoft:playready","pro"))&&$t(t))return Wp(t);if((e=Qt(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=$t(e))){t=Qe(e),e=8;var n=(t=Oe(t)).getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),Wp(e=qt("<pro>"+(e=We(e=Ne(t,e+4)))+"</pro>"))}return""}function em(e,t){var n=t.attributes.schemeIdUri,r=Zt(t,"urn:mpeg:cenc:2013","default_KID"),i=en(t,"urn:mpeg:cenc:2013","pssh").map(Yt),a=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),r&&(r=r.replace(/-/g,"").toLowerCase()).includes(" "))throw new Ue(2,4,4009);var s=[];try{s=i.map(function(t){if(!e.g.has(t)){var n=Qe(t);e.g.set(t,n)}return{initDataType:"cenc",initData:e.g.get(t),keyId:null}})}catch(o){throw new Ue(2,4,4007)}return{node:t,Gd:n,keyId:r,init:s.length>0?s:null,encryptionScheme:a}}Qp.prototype.release=function(){this.g.clear()};var tm=(new Map).set("com.apple.fps",function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new Ue(2,4,4054);return(t=Qt(t.node,"https://dashif.org/CPS","Laurl"))&&(t=$t(t))?t:""}).set("com.widevine.alpha",function(e){var t=Qt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=$t(t))?t:(e=Qt(e.node,"urn:microsoft","laurl"))&&Ke(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",Zp).set("com.microsoft.playready.recommendation",Zp).set("com.microsoft.playready.software",Zp).set("com.microsoft.playready.hardware",Zp).set("org.w3.clearkey",function(e){var t=Qt(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=$t(t))?t:(e=Qt(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=$t(e))?e:""});function nm(t,n,r,i,a,s){var o=(new Map).set("RepresentationID",n).set("Number",r).set("SubNumber",i).set("Bandwidth",a).set("Time",s);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,r,i){if("$$"==t)return"$";var a=o.get(n);if(null==a)return t;switch("RepresentationID"==n&&r&&(r=void 0),"Time"==n&&"bigint"!=typeof a&&(Math.abs(a-Math.round(a))>=.2&&K("Calculated $Time$ values must be close to integers"),a=Math.round(a)),i){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return r=e.parseInt(r,10)||1,Array(Math.max(0,r-t.length)+1).join("0")+t})}function rm(e,t){var n=am(e,t,"timescale"),r=1;n&&(r=on(n)||1);var i=(n=on((n=am(e,t,"duration"))||""))?n/r:null,a=am(e,t,"startNumber"),s=Number(am(e,t,"presentationTimeOffset"))||0,o=ln(a||"");if(null!=a&&null!=o||(o=1),a=null,t=sm(e,t,"SegmentTimeline")){t=Kt(t,"S"),a=r,e=e.na.duration||1/0;for(var l=o,u=[],d=-s,c=0;c<t.length;++c){var h=t[c],f=t[c+1],g=Jt(h,"t",ln),p=Jt(h,"d",ln),m=Jt(h,"r",sn);if(h=Jt(h,"k",sn)||0,null!=g&&(g-=s),p){if(g=null!=g?g:d,(m=m||0)<0)if(f){if(null==(f=Jt(f,"t",ln)))break;if(g>=f)break;m=Math.ceil((f-g)/p)-1}else{if(e==1/0)break;if(g/a>=e)break;m=Math.ceil((e*a-g)/p)-1}for(u.length>0&&g!=d&&(u[u.length-1].end=g/a),f=0;f<=m;++f)d=g+p,u.push({start:g/a,end:d/a,Eh:g,vc:h,Sk:u.length+l}),g=d}}a=u}return{timescale:r,Mf:n,fb:i,qe:o,Ib:s/r||0,gd:s,timeline:a}}function im(e,t){return[t(e.L),t(e.qa),t(e.sa)].filter(Ar)}function am(e,t,n){t=im(e,t),e=null;for(var r=(t=g(t)).next();!r.done&&!(e=r.value.attributes[n]);r=t.next());return e}function sm(e,t,n){t=im(e,t),e=null;for(var r=(t=g(t)).next();!r.done&&!(e=Xt(r.value,n));r=t.next());return e}function om(e,t,n,r,i,a){if(a=void 0===a?0:a,Zt(e,"http://www.w3.org/1999/xlink","href")){var s=function(e,t,n,r,i,a){for(var s=Zt(e,"http://www.w3.org/1999/xlink","href"),o=Zt(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=g(Object.keys(e.attributes)),u=l.next();!u.done;u=l.next()){var d=(u=u.value).split(":"),c=Gt("http://www.w3.org/1999/xlink");d[0]==c&&delete e.attributes[u]}if(a>=5)return Ri(new Ue(2,4,4028));if("onLoad"!=o)return Ri(new Ue(2,4,4027));var h=tt([r],[s]);return i.request(0,qi(h,t)).Xa(function(r){if(!(r=jt(r.data,e.tagName)))return Ri(new Ue(2,4,4001,s));for(e.children=[];r.children.length;){var o=r.children.shift();e.children.push(o)}for(var l=(o=g(Object.keys(r.attributes))).next();!l.done;l=o.next())l=l.value,e.attributes[l]=r.attributes[l];return om(e,t,n,h[0],i,a+1)})}(e,t,n,r,i,a);return n&&(s=s.Xa(void 0,function(){return om(e,t,n,r,i,a)})),s}s=[];for(var o=g(Vt(e)),l=o.next(),u={};!l.done;u={Qd:void 0},l=o.next())u.Qd=l.value,"urn:mpeg:dash:resolve-to-zero:2013"==Zt(u.Qd,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Qd}}(u)):"SegmentTimeline"!=u.Qd.tagName&&s.push(om(u.Qd,t,n,r,i,a));return Li(s).Xa(function(){return e})}function lm(e,t,n,r,i,a,s){var o,l=(new ia).S("sidx",function(e){o=function(e,t,n,r,i,a,s){var o=[];s.reader.skip(4);var l=s.reader.U();if(0==l)throw new Ue(2,3,3005);if(0==s.version)var u=s.reader.U(),d=s.reader.U();else u=s.reader.Dd(),d=s.reader.Dd();s.reader.skip(2);var c=s.reader.Ca();for(e=e+s.size+d,d=0;d<c;d++){var h=s.reader.U(),f=(2147483648&h)>>>31;h&=2147483647;var g=s.reader.U();if(s.reader.skip(4),1==f)throw new Ue(2,3,3006);o.push(new Us(u/l+n,(u+g)/l+n,function(){return a},e,e+h-1,t,n,r,i)),u+=g,e+=h}return s.parser.stop(),o}(t,r,i,a,s,n,e)});if(e&&l.parse(e),o)return o;throw new Ue(2,3,3004)}function um(e){this.h=Oe(e),this.g=new ta(this.h,0)}function dm(e){var t=cm(e);if(t.length>7)throw new Ue(2,3,3002);for(var n=0,r=(t=g(t)).next();!r.done;r=t.next())n=256*n+r.value;t=cm(e);e:{for(var i=(r=g(hm)).next();!i.done;i=r.next())if(Le(t,new Uint8Array(i.value))){r=!0;break e}r=!1}if(r)t=e.h.byteLength-e.g.Oa();else{if(8==t.length&&224&t[1])throw new Ue(2,3,3001);for(i=r=0;i<t.length;i++){var a=t[i];r=0==i?a&(1<<8-t.length)-1:256*r+a}t=r}return t=e.g.Oa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Oa(),r=Oe(e.h,e.g.Oa(),t),e.g.skip(t),new fm(n,r)}function cm(e){var t=e.g.Oa(),n=e.g.Y();if(0==n)throw new Ue(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ne(e.h,t,n)}um.prototype.Ia=function(){return this.g.Ia()};var hm=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function fm(e,t){this.id=e,this.g=t}function gm(e){if(e.g.byteLength>8)throw new Ue(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ue(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function pm(e){var t=new um(e.g);if(179!=(e=dm(t)).id)throw new Ue(2,3,3013);if(e=gm(e),183!=(t=dm(t)).id)throw new Ue(2,3,3012);t=new um(t.g);for(var n=0;t.Ia();){var r=dm(t);if(241==r.id){n=gm(r);break}}return{jl:e,Kk:n}}function mm(e,t,n){if(!(t=sm(e,t,"Initialization")))return null;var r=e.L.cb(),i=t.attributes.sourceURL;i&&(r=tt(r,[Ke(i)],e.Lb())),i=0;var a=null;return(t=Jt(t,"range",an))&&(i=t.start,a=t.end),(n=new Os(function(){return r},i,a,Sm(e),null,null,n,e.qa.encrypted)).codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.ef&&(n.g=e.na.start+e.na.duration),n}function ym(e,t,n){var r=Number(am(e,bm,"presentationTimeOffset"))||0,i=am(e,bm,"timescale"),a=1;i&&(a=on(i)||1);var s=r/a||0,o=mm(e,bm,n);!function(e,t){if(Tm(e,t),!Em(e))throw new Ue(2,4,4002)}(e,o);var l=zt(e);return{endTime:-1,timeline:-1,Sc:function(){var e=sm(l,bm,"RepresentationIndex"),n=l.L.cb();return e&&(e=Ke(e.attributes.sourceURL))&&(n=tt(n,[e],l.Lb())),e=Em(l),vm(l,t,o,n,e.start,e.end,s)},timescale:a}}function vm(e,t,n,r,i,a,s){var o,l,u,d,c,h,f,p,m,y,v,b,T,S,w,A,I,k;return L(function(_){if(1==_.g)return o=e.presentationTimeline,l=!e.Eb||!e.na.ef,u=e.na.start,d=e.na.duration,c=e.L.mimeType.split("/")[1],f=null,p=[(h=t)(r,i,a,!1),"webm"==c?h(n.P(),n.startByte,n.endByte,!0):null],h=null,E(_,Promise.all(p),2);if(m=_.h,y=m[0],v=m[1]||null,T=u-s,S=u,w=d?u+d:1/0,"mp4"==c)var R=lm(y,i,r,n,T,S,w);else{R=y;var x=new um(v);if(440786851!=dm(x).id)throw new Ue(2,3,3008);var C=dm(x);if(408125543!=C.id)throw new Ue(2,3,3009);x=C.g.byteOffset,C=new um(C.g);for(var D=null;C.Ia();){var L=dm(C);if(357149030==L.id){D=L;break}}if(!D)throw new Ue(2,3,3010);for(D=new um(D.g),L=1e6,C=null;D.Ia();){var M=dm(D);if(2807729==M.id)L=gm(M);else if(17545==M.id)if(4==M.g.byteLength)C=M.g.getFloat32(0);else{if(8!=M.g.byteLength)throw new Ue(2,3,3003);C=M.g.getFloat64(0)}}if(null==C)throw new Ue(2,3,3011);if(C*=D=L/1e9,475249515!=(R=dm(new um(R))).id)throw new Ue(2,3,3007);R=function(e,t,n,r,i,a,s,o,l){function u(){return i}var d=[];e=new um(e.g);for(var c=null,h=null;e.Ia();){var f=dm(e);if(187==f.id){var g=pm(f);g&&(f=n*g.jl,g=t+g.Kk,null!=c&&d.push(new Us(c+s,f+s,u,h,g-1,a,s,o,l)),c=f,h=g)}}return null!=c&&d.push(new Us(c+s,r+s,u,h,null,a,s,o,l)),d}(R,x,D,C,r,n,T,S,w)}for(A=g(b=R),I=A.next();!I.done;I=A.next())(k=I.value).codecs=e.L.codecs,k.mimeType=e.L.mimeType,k.bandwidth=e.bandwidth;return o.ie(b),f=new Cl(b),l&&f.pd(S,w,!0),_.return(f)})}function bm(e){return e.Hd}function Em(e){var t=sm(e,bm,"RepresentationIndex");return e=an((e=am(e,bm,"indexRange"))||""),t&&(e=Jt(t,"range",an,e)),e}function Tm(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=ot&&"mp4"!=n&&"webm"!=n)throw new Ue(2,4,4006);if("webm"==n&&!t)throw new Ue(2,4,4005)}function Sm(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.uf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function wm(e,t,n){var r=mm(e,Am,n),i=function(e){var t=function(e){return[e.L.zc,e.qa.zc,e.sa.zc].filter(Ar).map(function(e){return Kt(e,"SegmentURL")}).reduce(function(e,t){return e.length>0?e:t}).map(function(t){return t.attributes.indexRange&&!e.Kg&&(e.Kg=!0),{zk:Ke(t.attributes.media),start:(t=Jt(t,"mediaRange",an,{start:0,end:null})).start,end:t.end}})}(e),n=(e=rm(e,Am)).qe;0==n&&(n=1);var r=0;return e.fb?r=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(r=e.timeline[0].start),{fb:e.fb,startTime:r,qe:n,Ib:e.Ib,timescale:e.timescale,timeline:e.timeline,yd:t}}(e);if(!i.fb&&!i.timeline&&i.yd.length>1)throw new Ue(2,4,4002);if(!i.fb&&!e.na.duration&&!i.timeline&&1==i.yd.length)throw new Ue(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Ue(2,4,4002);var a=null,s=null;e.sa.id&&e.L.id&&(s=t.get(e.sa.id+","+e.L.id))&&(a=s.segmentIndex);var o=function(e,t,n,r,i,a,s,o,l,u){var d=r.yd.length;r.timeline&&r.timeline.length!=r.yd.length&&(d=Math.min(r.timeline.length,r.yd.length));for(var c=e-r.Ib,h=t?e+t:1/0,f=[],g=r.startTime,p={},m=0;m<d;p={Of:void 0,Df:void 0},m++){p.Df=r.yd[m];var y=g;g=void 0,g=null!=r.fb?y+r.fb:r.timeline?r.timeline[m].end:y+t,p.Of=null,(p=new Us(e+y,e+g,function(e){return function(){return null==e.Of&&(e.Of=tt(n(),[e.Df.zk],u())),e.Of}}(p),p.Df.start,p.Df.end,i,c,e,h,[],"",null,null,js,a)).codecs=o,p.mimeType=s,p.bandwidth=l,f.push(p)}return f}(e.na.start,e.na.duration,e.L.cb,i,r,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Lb);return t=!a,a?a.fe(o,e.presentationTimeline.Hb()):a=new Cl(o),e.presentationTimeline.ie(o),e.Eb&&e.na.ef||a.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),s&&(s.segmentIndex=a),{endTime:-1,timeline:-1,Sc:function(){return a&&0!=a.getNumReferences()||a.nf(o),Promise.resolve(a)},timescale:i.timescale}}function Am(e){return e.zc}function Im(t,n,r,i,a,s,o,l,u,d){u||t.L.cf||(t.L.cf=am(t,km,"initialization"));var c=t.L.cf?function(e,t){var n=e.L.cf;if(n||(n=am(e,km,"initialization")),!n)return null;n=Ke(n);var r=e.L.originalId,i=e.bandwidth||null,a=e.L.cb,s=e.Lb;return t=new Os(function(){var e=nm(n,r,null,null,i,null);return tt(a(),[e],s())},0,null,Sm(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.ef&&(t.g=e.na.start+e.na.duration),t}(t,o):null,h=function(e){var t=rm(e,km),n=am(e,km,"media"),r=am(e,km,"index"),i=am(e,km,"k"),a=0;return i&&(a=parseInt(i,10)),{Mf:t.Mf,fb:t.fb,timescale:t.timescale,qe:t.qe,Ib:t.Ib,gd:t.gd,timeline:t.timeline,$b:n&&Ke(n),ae:r,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Ak:a}}(t);!function(e){var t=e.ae?1:0;if(t+=e.timeline?1:0,0==(t+=e.fb?1:0))throw new Ue(2,4,4002);if(1!=t&&(e.ae&&(e.timeline=null),e.Mf=null,e.fb=null),!e.ae&&!e.$b)throw new Ue(2,4,4002)}(h);var f=zt(t);if(h.ae)return Tm(t,c),{endTime:-1,timeline:-1,Sc:function(){var e=nm(h.ae,f.L.originalId,null,null,f.bandwidth||null,null);return e=tt(f.L.cb(),[e]),vm(f,n,c,e,0,null,h.Ib)},timescale:h.timescale};if(h.fb)return i||"image"===t.qa.contentType||"text"===t.qa.contentType||(i=t.na.start,d=t.sa.id,r=t.na.duration,d=(d=null!=d&&s.get(d)||r)?i+d:1/0,t.presentationTimeline.Sg(h.fb),t.presentationTimeline.zi(i,d)),{endTime:-1,timeline:-1,Sc:function(){return function(t,n,r,i,a,s,o,l){function u(r){var a=r-v,o=a*y,u=n.Mf,d=a*u;"BigInt"in e&&d>Number.MAX_SAFE_INTEGER&&(d=BigInt(a)*BigInt(u)),a=(o+=f)+y,u=Math.min(a,c());var h=[],g=n.Ak;if(g)for(var p=(u-o)/g,m={},I=0;I<g;m={Wi:void 0},I++){var k=o+p*I,_=k+p;m.Wi=I,(m=new Us(k,_,function(e){return function(){var t=nm(b,T,r,e.Wi,E,d);return tt(S(),[t],w())}}(m),0,null,i,A,f,c(),[],"",null,null,js,s)).codecs=t.L.codecs,m.mimeType=t.L.mimeType,0==l?I>0&&m.wd():I%l!=0&&m.wd(),h.push(m)}return(o=new Us(o,u,function(){if(g)return[];var e=nm(b,T,r,null,E,d);return tt(S(),[e],w())},0,null,i,A,f,c(),h,"",null,null,js,s,h.length>0)).codecs=t.L.codecs,o.mimeType=t.L.mimeType,o.bandwidth=t.bandwidth,o.j=a,o}function d(){var e=[Math.max(h.Hb(),f),Math.min(h.Hc(),c())].map(function(e){return e-f});return e=[Math.ceil(e[0]/y),Math.ceil(e[1]/y)-1],t.L.rb&&e[1]++,e.map(function(e){return e+v})}function c(){var e=null!=p&&a.get(p)||m;return e?f+e:1/0}var h=t.presentationTimeline,f=t.na.start,p=t.sa.id,m=t.na.duration,y=n.fb,v=n.qe,b=n.$b,E=t.bandwidth||null,T=t.L.originalId,S=t.L.cb,w=t.Lb,A=f-n.Ib,I=d();r=t.Eb?Math.max(I[0],I[1]-r+1):I[0],o=o||I[1],I=[];for(var k=r;k<=o;++k){var _=u(k);I.push(_)}var R=new Cl(I);if(I=h.Hc()<c(),k=h.W(),I||k){var x=Math.max(r,o+1);r=y,t.L.rb&&(r=.1),R.Nf(r,function(){var e=h.Hb();R.Ya(e);var t=g(d());t.next(),t=t.next().value;for(var n=[];x<=t;){var r=u(x);n.push(r),x++}return e>c()&&!n.length?null:n})}return Promise.resolve(R)}(f,h,a,c,s,o,l,t.L.Ef)},timescale:h.timescale};var p=null;i=i=null,t.sa.id&&t.L.id&&(i=t.sa.id+","+t.L.id,i=r.get(i))&&(p=i.segmentIndex);var m=t.na.start,y=t.na.duration?m+t.na.duration:1/0;if(p)Rm(d=p,h,m,y,c,t.Eb),d.Ya(t.presentationTimeline.Hb());else{if(r=0,u=-1,null!=t.sa.id&&null!=t.L.id){var v=d.get(t.sa.id);if(v)u=v.timeline;else for(v=(d=g(d.values())).next();!v.done;v=d.next()){if(v=v.value,Math.abs(h.Ib-v.endTime)<=ut&&v.bh.includes(t.L.id)){u=v.timeline;break}v.timeline>=r&&(r=v.timeline+1)}}-1==u&&(u=r),p=new _m(t.Eb,h,t.L.originalId,t.bandwidth,t.L.cb,t.Lb,m,y,c,o,t.L.Ef,u)}return h.timeline&&"image"!==t.qa.contentType&&"text"!==t.qa.contentType&&t.presentationTimeline.Ai(p.h?p.h.timeline:[],m),i&&t.Eb&&(i.segmentIndex=p),i=(i=(i=h.timeline)&&i[i.length-1])?i.end+h.Ib:-1,d=-1,p instanceof _m&&(d=p.Te()),{endTime:i,timeline:d,Sc:function(){return p instanceof _m&&0==p.getNumReferences()&&Rm(p,h,m,y,c,t.Eb),Promise.resolve(p)},timescale:h.timescale}}function km(e){return e.Nc}function _m(e,t,n,r,i,a,s,o,l,u,d,c){Cl.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=r,this.G=i,this.J=a,this.j=s,this.l=o,this.u=l,this.B=u,this.I=d,this.K=c,xm(this)}function Rm(e,t,n,r,i,a){if(function(e,t){if(e.u!==t){e.u=t;for(var n=(e=g(e.g)).next();!n.done;n=e.next())(n=n.value)&&Bs(n,t)}}(e,i),e.F=a,e.h){if(e.h.gd!==t.gd&&(e.h.timeline=t.timeline,e.h.gd=t.gd,e.h.Ib=t.Ib),e.h.$b!==t.$b&&(e.h.$b=t.$b),(n=e.h.timeline).length){var s=n[n.length-1];t=t.timeline.filter(function(e){return e.end>s.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,p(t)),e.l!==r&&(e.l=r)}else e.h=t,e.j=n,e.l=r;xm(e)}function xm(e){if(e.h&&!e.o){for(var t=[],n=g(e.h.timeline),r=n.next();!r.done;r=n.next())(r=r.value).start>=e.l||r.end<=0||t.push(r);e.h.timeline=t,e.Ya(e.j)}}function Cm(e,t,n,r,i,a,s,o){return e=nm(e,t,n,a,r||null,i),tt(s(),[e],o()).map(function(e){return e.toString()})}function Dm(e){this.o=null,this.B=e,this.H=new Fi,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function Lm(e,t){var n,r,i,a,s,o,l;return L(function(u){return 1==u.g?(n=tt(e.i,[Mm(e,t)]),r=qi(n,e.o.retryParameters),i=e.B.networkingEngine.request(8,r),Ui(e.H,i),S(u,2),E(u,i.promise,4)):2!=u.g?(a=u.h,s=Be(a.data),1==(o=JSON.parse(s)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var r=t["RELOAD-URI"]||n;e.g=new Tr(function(){Lm(e,r)}),(n=t.TTL)&&(e.F=n),e.g.ia(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}(e,o,a.uri),A(u,0)):(l=I(u))&&7001==l.code?u.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new Tr(function(){Lm(e,t)}),e.g.ia(e.F),void T(u))})}function Mm(e,t){if(!e.m.length)return t;t=new pe(t);var n=e.C||e.m[0],r=Math.round(e.B.getBandwidthEstimate()),i=t.g;return"DASH"==e.u?(i.add("_DASH_pathway",n),i.add("_DASH_throughput",String(r))):"HLS"==e.u&&(i.add("_HLS_pathway",n),i.add("_HLS_throughput",String(r))),Ce(i)&&be(t,i),t.toString()}function Nm(e,t,n,r){var i=e.l.get(t);i||(i=new Map),i.set(n,r),e.l.set(t,i)}function Pm(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var r=[],i=g(e.m),a=i.next(),s={};!a.done;s={Bd:void 0},a=i.next())if(s.Bd=a.value,a=t.get(s.Bd))r.push({Xg:s.Bd,location:a});else if(a=e.G.find(function(e){return function(t){return t.Ll==e.Bd}}(s))){var o=t.get(a["BASE-ID"]);o&&(a["URI-REPLACEMENT"].hj?(ye(o=new pe(o),a["URI-REPLACEMENT"].hj),r.push({Xg:s.Bd,location:o.toString()})):r.push({Xg:s.Bd,location:o}))}for(i=Date.now(),a=(s=g(e.j.keys())).next();!a.done;a=s.next())a=a.value,i>(o=e.j.get(a))&&e.j.delete(a);if((r=r.filter(function(t){for(var n=g(e.j.keys()),r=n.next();!r.done;r=n.next())if(r.value.includes(new pe(t.location).Db))return!1;return!0})).length&&(e.C=r[0].Xg),!(r=r.map(function(e){return e.location})).length&&e.h)for(s=(i=g(e.h.split(","))).next();!s.done;s=i.next())(s=t.get(s.value))&&(e.C=e.h,r.push(s));if(!r.length)for(i=(t=g(t.values())).next();!i.done;i=t.next())r.push(i.value);return n?r:tt(e.i,r)}function Om(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}function Fm(e,t){for(var n=[],r=[],i=[],a=[],s=(e=g(e)).next();!s.done;s=e.next()){var o=s.value;s=new Map(o.audioStreams.map(function(e){return[dy(e),e]}));var l=new Map(o.videoStreams.map(function(e){return[uy(e),e]})),u=new Map(o.textStreams.map(function(e){return[cy(e),e]}));if(o=new Map(o.imageStreams.map(function(e){return[hy(e),e]})),t){var d=iy(ot);u.set(cy(d),d),d=iy("image"),o.set(hy(d),d)}n.push(s),r.push(l),i.push(u),a.push(o)}return{Mh:n,fj:r,bj:i,ji:a}}function Um(e){var t,n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,T,S,w,A,I,k,_,R,x,C,D;return L(function(L){switch(L.g){case 1:if(t=lt,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ka}).map(function(e){return[dy(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Aa}).map(function(e){return[uy(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Na}).map(function(e){return[cy(e),e]}))}),a=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Uf}).map(function(e){return[hy(e),e]}))}),s=g(i),o=s.next();!o.done;o=s.next())l=o.value,u=ry(t.Na),l.set(cy(u),u);for(d=g(a),c=d.next();!c.done;c=d.next())h=c.value,f=ry(t.Uf),h.set(hy(f),f);return E(L,zm(p=new Om,[],n,0,Hm,Km,0),2);case 2:return m=L.h,E(L,zm(p,[],r,0,Hm,Km,0),3);case 3:return y=L.h,E(L,zm(p,[],i,0,Hm,Km,0),4);case 4:return v=L.h,E(L,zm(p,[],a,0,Hm,Km,0),5);case 5:if(b=L.h,T=0,y.length&&m.length)for(I=g(m),k=I.next();!k.done;k=I.next())for(_=k.value,R=g(y),x=R.next();!x.done;x=R.next())C=x.value,D=T++,C.variantIds.push(D),_.variantIds.push(D);else for(S=y.concat(m),w=g(S),A=w.next();!A.done;A=w.next())A.value.variantIds=[T++];return L.return(y.concat(m).concat(v).concat(b))}})}function zm(e,t,n,r,i,a,s){var o,l,u,d,c,h,f,p,m,y,v,b,T,S,w,A,I,k;return L(function(_){switch(_.g){case 1:for(o=[],l=0;l<n.length;l++)l>=r?o.push(new Set(n[l].values())):o.push(new Set);u=g(t),d=u.next();case 2:if(d.done){_.A(4);break}return c=d.value,E(_,function(e,t,n,r,i,a,s){return L(function(o){return 1==o.g?($m(e,n,t,s>0),t.matchedStreams?t.segmentIndex?E(o,Bm(t,r+s),2):o.A(2):o.return(!1)):(qm(t,r,i,a,s),o.return(!0))})}(e,c,n,r,a,o,s),5);case 5:if(!_.h)throw new Ue(2,4,4037);d=u.next(),_.A(2);break;case 4:for(h=g(o),f=h.next();!f.done;f=h.next())for(p=f.value,m=g(p),y=m.next();!y.done;y=m.next())v=y.value,(b=jm(e,t,v,n,i,a,o))&&t.push(b);for(T=g(o),S=T.next();!S.done;S=T.next())for(w=S.value,A=g(w),I=A.next(),k={};!I.done;k={sh:void 0},I=A.next())if(k.sh=I.value,!ly(k.sh)&&t.some(function(e){return function(t){return Xm(e.sh,t)}}(k)))throw new Ue(2,4,4037);return _.return(t)}})}function Bm(e,t){var n,r,i,a,s,o;return L(function(l){if(1==l.g){for(n=[],r=e.matchedStreams,i=t;i<r.length;i++)a=r[i],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return E(l,Promise.all(n),2)}if(e.segmentIndex instanceof Nl)for(s=t;s<r.length;s++)(o=r[s]).segmentIndex&&e.segmentIndex.h.push(o.segmentIndex);T(l)})}function jm(e,t,n,r,i,a,s){if(ly(n))return null;var o=i(n);return $m(e,r,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return L(function(e){return o.segmentIndex?e.A(0):(o.segmentIndex=new Nl,E(e,Bm(o,0),0))})},o.closeSegmentIndex=function(){if(o.segmentIndex&&(o.segmentIndex.release(),o.segmentIndex=null),o.matchedStreams)for(var e=g(o.matchedStreams),n=e.next();!n.done;n=e.next()){var r;if(r=(n=n.value).segmentIndex){e:{for(var i=(r=g(t)).next();!i.done;i=r.next())if((i=i.value)!==o&&i.segmentIndex&&i.matchedStreams&&i.matchedStreams.includes(n)){r=!0;break e}r=!1}r=!r}r&&(n.segmentIndex.release(),n.segmentIndex=null)}}),o.matchedStreams&&o.matchedStreams.length?(qm(o,0,a,s,0),o):null}function qm(e,t,n,r,i){var a=e.matchedStreams;for(t+=i;t<a.length;t++){var s=a[t];n(e,s);var o=!0;if("audio"==e.type&&0==Dr(e.language,s.language)&&(o=!1),o&&((o=r[t-i])&&o.delete(s),s.fullMimeTypes))for(o=(s=g(s.fullMimeTypes.values())).next();!o.done;o=s.next())e.fullMimeTypes.add(o.value)}}function Gm(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function Hm(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function Vm(e,t){function n(e,t){e||(e=[]);for(var n=(t=g(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var r=g(t.keyIds),i=r.next();!i.done;i=r.next())e.keyIds.add(i.value);if(null==e.originalId?e.originalId=t.originalId:(r=t.originalId||"")&&!e.originalId.endsWith(r)&&(e.originalId+=","+r),r=yi(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new Ue(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=(r=g(t.closedCaptions)).next();!i.done;i=r.next()){var a=g(i.value);i=a.next().value,a=a.next().value,e.closedCaptions.set(i,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Gm(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new Nl,n=g(e.trickModeVideo.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),Vm(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),Vm(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Gm(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new Nl,n=g(e.dependencyStream.matchedStreams),r=n.next();!r.done;r=n.next())t.h.push(r.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),Vm(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),Vm(e.dependencyStream,t))}function Km(e,t){var n=e.roles;n||(n=[]);for(var r=g(t.roles),i=r.next();!i.done;i=r.next())i=i.value,n.includes(i)||n.push(i);for(e.roles=n,r=(n=g(t.keyIds)).next();!r.done;r=n.next())e.keyIds.add(r.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,p(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=g(t.closedCaptions)).next();!n.done;n=t.next())n=(r=g(n.value)).next().value,r=r.next().value,e.closedCaptions.set(n,r)}function $m(e,t,n,r){r=void 0!==r&&r?n.matchedStreams:[];for(var i=(t=g(t)).next();!i.done;i=t.next()){if(!(i=Ym(e,i.value,n)))return;r.push(i)}n.matchedStreams=r}function Ym(e,t,n){var r={audio:dy,video:uy,text:cy,image:hy}[n.type],i=null,a=r(n);if(t.has(a))i=t.get(a);else{a={audio:function(e,t){return Xm(e,t)},video:function(e,t){return Xm(e,t)},text:Qm,image:Jm}[n.type];for(var s={audio:Zm,video:ey,text:ty,image:ny}[n.type],o=g(t.values()),l=o.next();!l.done;l=o.next())!a(n,l=l.value)||n.fastSwitching!=l.fastSwitching||i&&!s(n,i,l)||(i=l)}return e.o&&!ly(i)&&t.delete(r(i)),i}function Wm(e,t){return e.mimeType==t.mimeType&&gy(e.codecs)===gy(t.codecs)}function Xm(e,t){return!(e.drmInfos&&!mi(e.drmInfos,t.drmInfos))}function Qm(e,t){return!t.language||e.forced===t.forced&&0!=Dr(e.language,t.language)&&t.kind==e.kind}function Jm(){return!0}function Zm(e,t,n){var r=sy(e,t,n);if(r===py)return!0;if(r===yy)return!1;r=Dr(e.language,t.language);var i=Dr(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(i.length<r.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((r=ay(e.channelsCount,t.channelsCount,n.channelsCount))==py||r!=yy&&((r=ay(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==py||r!=yy&&!(!e.bandwidth||oy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)))}function ey(e,t,n){var r=sy(e,t,n);if(r===py)return!0;if(r===yy)return!1;if((r=ay(e.width*e.height,t.width*t.height,n.width*n.height))==py)return!0;if(r==yy)return!1;if(e.frameRate){if((r=ay(e.frameRate,t.frameRate,n.frameRate))==py)return!0;if(r==yy)return!1}return!(!e.bandwidth||oy(e.bandwidth,t.bandwidth,n.bandwidth)!=py)}function ty(e,t,n){var r=Dr(e.language,t.language),i=Dr(e.language,n.language);if(i>r)return!0;if(i<r)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(r=t.roles.filter(function(t){return e.roles.includes(t)}),(i=n.roles.filter(function(t){return e.roles.includes(t)})).length>r.length)return!0;if(i.length<r.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function ny(e,t,n){return ay(e.width*e.height,t.width*t.height,n.width*n.height)==py}function ry(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function iy(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Cl([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function ay(e,t,n){if(t==e&&e!=n)return yy;if(n==e&&e!=t)return py;if(t>e){if(n<=e||n-e<t-e)return py;if(n-e>t-e)return yy}else{if(n>e)return yy;if(e-n<e-t)return py;if(e-n>e-t)return yy}return my}function sy(e,t,n){var r=e.mimeType===t.mimeType&&e.codecs===t.codecs,i=e.mimeType===n.mimeType&&e.codecs===n.codecs;return r&&!i?yy:!r&&i?py:(t=Wm(e,t),e=Wm(e,n),t&&!e?yy:!t&&e?py:my)}function oy(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?py:t<e?yy:my}function ly(e){switch(e.type){case ot:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function uy(e){return fy([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function dy(e){return fy([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function cy(e){return fy([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function hy(e){return fy([e.width,e.codecs,e.mimeType])}function fy(e){return JSON.stringify(e)}function gy(e){if(!vy.has(e)){var t=ar(e);vy.set(e,t)}return vy.get(e)}h(_m,Cl),(r=_m.prototype).getNumReferences=function(){return this.h?this.h.timeline.length:0},r.release=function(){Cl.prototype.release.call(this),this.h=null},r.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,r=0;r<n.length&&n[r].end+this.j<=e;r+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},r.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,r=0;r<t.length;r++){var i=t[r],a=i.start+this.j;if(i=r<n?t[r+1].start+this.j:this.l===1/0?i.end+this.j:this.l,e>=a&&e<i)return r+this.i}return null},r.get=function(e){var t=this;if((e-=this.i)<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var r=(n=this.h.timeline[e]).Sk,i=n.Eh+this.h.gd,a=this.j-this.h.Ib,s=this.j+n.end,o=s;e===this.getNumReferences()-1&&this.l!==1/0&&(o=this.F&&Math.abs(o-this.l)>.1?Math.min(o,this.l):this.l);var l=this.h.codecs,u=this.h.mimeType,d=this.h.bandwidth,c=[],h=!1;if(n.vc&&this.h&&this.h.$b&&(h=this.h.$b.includes("$SubNumber$")),h){h=(n.end-n.start)/n.vc;for(var f={},g=0;g<n.vc;f={Pf:void 0,Xi:void 0},g++){var p=n.start+h*g,m=p+h;f.Xi=g,f.Pf=null,(f=new Us(this.j+p,this.j+m,function(e){return function(){return t.h?(null==e.Pf&&(e.Pf=Cm(t.h.$b,t.H,r,t.C,i,e.Xi,t.G,t.J)),e.Pf):[]}}(f),0,null,this.u,a,this.j,this.l,[],"",null,null,js,this.B)).codecs=l,f.mimeType=u,f.bandwidth=d,0==this.I?g>0&&f.wd():g%this.I!=0&&f.wd(),c.push(f)}}(n=new Us(this.j+n.start,o,function(){return c.length>0||!t.h?[]:Cm(t.h.$b,t.H,r,t.C,i,null,t.G,t.J)},0,null,this.u,a,this.j,this.l,c,"",null,null,js,this.B,c.length>0)).codecs=l,n.mimeType=u,n.j=s,n.bandwidth=d,this.g[e]=n}return n},r.Fb=function(e){xm(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},r.Te=function(){return this.K},Dm.prototype.configure=function(e){this.o=e},Dm.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.H.destroy()},Dm.prototype.setManifestType=function(e){this.u=e},Dm.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(r=Om.prototype).release=function(){for(var e=g(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},r.bk=function(){return this.l},r.Ig=function(){return this.j.slice()},r.Gj=function(){return this.i},r.Th=function(e,t){if(e){if("audio"==e.type)for(var n=g(this.h),r=n.next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});else if("video"==e.type)for(r=(n=g(this.g)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e}),r.trickModeVideo&&(r.trickModeVideo.matchedStreams=r.trickModeVideo.matchedStreams.filter(function(t){return t!==e})),r.dependencyStream&&(r.dependencyStream.matchedStreams=r.dependencyStream.matchedStreams.filter(function(t){return t!==e}));else if(e.type==ot)for(r=(n=g(this.j)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});else if("image"==e.type)for(r=(n=g(this.i)).next();!r.done;r=n.next())(r=r.value).matchedStreams=r.matchedStreams.filter(function(t){return t!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},r.hg=function(e,t,n){n=void 0!==n&&n;var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,S,w,A,I,k,_,R,x,C,D,M,N,P,O,F,U,z=this;return L(function(L){if(1==L.g){if(r=lt,!t&&1==e.length)return i=Fm(e,!1),a=i.Mh,s=i.fj,o=i.bj,l=i.ji,z.h=Array.from(a[0].values()),z.g=Array.from(s[0].values()),z.j=Array.from(o[0].values()),z.i=Array.from(l[0].values()),L.A(2);for(u=n?z.m.size:0,d=-1,c=0;c<e.length;c++)h=e[c],z.m.has(h.id)||(z.m.add(h.id),-1==d&&(d=c));return-1==d?L.return():(f=Fm(e,!0),p=f.Mh,m=f.fj,y=f.bj,v=f.ji,E(L,Promise.all([zm(z,z.h,p,d,Gm,Vm,u),zm(z,z.g,m,d,Gm,Vm,u),zm(z,z.j,y,d,Gm,Vm,u),zm(z,z.i,v,d,Gm,Vm,u)]),2))}if(b=0,S=[],z.g.length&&z.h.length)for(x=g(z.h),C=x.next();!C.done;C=x.next())for(D=C.value,M=g(z.g),N=M.next();!N.done;N=M.next())P=N.value,O=yi(D.drmInfos,P.drmInfos),D.drmInfos.length&&P.drmInfos.length&&!O.length||(F=(D.bandwidth||0)+(P.bandwidth||0),D.dependencyStream&&(F+=D.dependencyStream.bandwidth||0),P.dependencyStream&&(F+=P.dependencyStream.bandwidth||0),U=b++,S.push({id:U,language:D.language,disabledUntilTime:0,primary:D.primary,audio:D,video:P,bandwidth:F,drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(w=z.g.length?z.g:z.h,A=g(w),I=A.next();!I.done;I=A.next())k=I.value,_=b++,R=k.bandwidth||0,k.dependencyStream&&(R+=k.dependencyStream.bandwidth||0),S.push({id:_,language:k.language,disabledUntilTime:0,primary:k.primary,audio:k.type==r.ka?k:null,video:k.type==r.Aa?k:null,bandwidth:R,drmInfos:k.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});z.l=S,T(L)})},r.Ri=function(e){this.o=e},B("shaka.util.PeriodCombiner",Om),Om.prototype.setUseStreamOnce=Om.prototype.Ri,Om.prototype.combinePeriods=Om.prototype.hg,Om.prototype.deleteStream=Om.prototype.Th,Om.prototype.getImageStreams=Om.prototype.Gj,Om.prototype.getTextStreams=Om.prototype.Ig,Om.prototype.getVariants=Om.prototype.bk;var py=1,my=0,yy=-1,vy=new Map;function by(e,t){try{return function(e,t){var n=new DOMParser,r=Ey.value()(e);e=null;try{e=n.parseFromString(r,"text/xml")}catch(i){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(qe(e),t)}catch(n){return null}}var Ey=new ie(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function Ty(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Fa=1,this.H=[],this.l={qf:"",type:"",profiles:[],sc:null,rb:0,cb:null,le:0},this.u=new Map,this.C=new Map,this.o=new Map,this.F=new Map,this.ya=new Map,this.m=new Om,this.K=0,this.Da=new j(5),this.M=new Tr(function(){e.J&&!e.g.continueLoadingWhenPaused&&(e.I.Ma(e.J,"timeupdate"),e.J.paused)?e.I.Ba(e.J,"timeupdate",function(){return Oy(e)}):Oy(e)}),this.R=new Fi,this.O=null,this.G=[],this.aa=1/0,this.va=!1,this.i=null,this.N=0,this.T=!1,this.I=new te,this.J=null,this.V=!1,this.$="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.xa=new Qp}function Sy(e){var t,n,r,i,a,s,o,l,u,d,c;return L(function(h){return 1==h.g?(t=4,n="MPD",r=function(e){var t=e.l.le;if(!e.l.qf||!t||!e.H.length)return[];var n=Date.now()/1e3,r=e.H.filter(function(e){return!(e=ln(e.attributes.ttl))||t+e>n}).map(Yt).filter(Ar);return r.length?tt(e.B,r):[]}(e),i=e.B,r.length?(i=r,n="Patch",t=6):e.B.length>1&&e.i&&(a=Pm(e.i,"Location",!0)).length&&(i=a),s=qi(i,e.g.retryParameters),o=Date.now(),E(h,Gy(e,s,0,{type:t}),2)):3!=h.g?(l=h.h,e.j?(l.uri&&l.uri!=l.originalUri&&!e.B.includes(l.uri)&&e.B.unshift(l.uri),u=new pe(l.uri),e.$=u.g.toString(),E(h,function(e,t,n,r){var i,a,s,o,l,u,d,c;return L(function(h){if(1==h.g){if(i=t,(a=e.g.dash.manifestPreprocessor)!=td){if(de("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(s=by(i,r)))throw new Ue(2,4,4001,n);a(s),i=Ge(s.outerHTML)}if(!(o=jt(i,r)))throw new Ue(2,4,4001,n);return(l=e.g.dash.manifestPreprocessorTXml)!=nd&&l(o),"Patch"===r?h.return(function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,m,y,v,b,S,w,A,I,k,_,R,x;return L(function(C){if(1==C.g){if(n=t.attributes.mpdId,r=Jt(t,"originalPublishTime",nn),!n||n!==e.l.qf||r!==e.l.le)throw e.H=[],new Ue(1,4,4052);for(i=[],a=[],s=new Set,o=g(Vt(t)),l=o.next();!l.done;l=o.next())if(u=l.value,d=hn(u.attributes.sel||""),c=d[d.length-1],h=Yt(u)||"","MPD"===c.name)if("mediaPresentationDuration"===c.Cc){var D=rn(Yt(u)||"");if(null!=D){e.l.sc=D;for(var L=g(e.u.values()),M=L.next();!M.done;M=L.next())M.value.sc=D}}else if("type"===c.Cc){for(e.h.presentationTimeline.cd("static"==h),e.l.type=h,L=(D=g(e.u.values())).next();!L.done;L=D.next())L.value.Eb="dynamic"==h;"static"==h&&(e.K=-1)}else"publishTime"===c.Cc?e.l.le=nn(h)||0:null===c.Cc&&"add"===u.tagName&&a.push(u);else if("PatchLocation"===c.name)fn(e.H,u);else if("Period"===c.name)"add"===u.tagName?a.push(u):"remove"===u.tagName&&c.id&&ky(e,c.id);else if("SegmentTemplate"===c.name){if((D=(L=hn(u.attributes.sel||""))[L.length-1]).Cc){L=_y(e,L),M=Yt(u)||"";for(var N=g(L),P=N.next();!P.done;P=N.next())pn((P=e.u.get(P.value)).L.Nc,u.tagName,D.Cc,M);D=L}else D=[];for(f=g(D),m=f.next();!m.done;m=f.next())y=m.value,s.add(y)}else if("SegmentTimeline"===c.name||"S"===c.name){for(D=hn(u.attributes.sel||""),M=(L=g(D=_y(e,D))).next();!M.done;M=L.next())fn(N=Kt(M=sm(M=e.u.get(M.value),km,"SegmentTimeline"),"S"),u),M.children=N;for(v=g(D),b=v.next();!b.done;b=v.next())S=b.value,s.add(S)}for(w=g(s),A=w.next();!A.done;A=w.next())I=A.value,Ry(e,I);for(k=g(a),_=k.next();!_.done;_=k.next())R=_.value,i.push.apply(i,p(Iy(e,R)));return i.length?(e.h.periodCount+=i.length,e.h.gapCount=e.N,E(C,Ay(e,i,!0),2)):C.A(2)}"static"==e.l.type&&(x=e.l.sc,e.h.presentationTimeline.Ab(x||1/0)),T(C)})}(e,o)):e.g.dash.disableXlinkProcessing?h.return(wy(e,o,n)):(u=e.g.dash.xlinkFailGracefully,d=om(o,e.g.retryParameters,u,n,e.j.networkingEngine),Ui(e.R,d),E(h,d.promise,2))}return c=h.h,h.return(wy(e,c,n))})}(e,l.data,l.uri,n),3)):h.return(0)):(d=Date.now(),c=(d-o)/1e3,e.Da.sample(1,c),e.ma.clear(),h.return(c))})}function wy(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,m,y,v,b,w,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H,V,$,Y,W,X,Q,J,Z,ee,te,ne,re,ie,ae,se,oe,le,ue,de,ce;return L(function(he){switch(he.g){case 1:for(e.i&&e.i.l.clear(),r=[n],i=[],a=new Map,s=Kt(t,"Location"),o=g(s),l=o.next();!l.done;l=o.next())u=l.value,d=u.attributes.serviceLocation,(c=Yt(u))&&(h=tt(r,[c])[0],d&&(e.i?Nm(e.i,"Location",d,h):a.set(d,h)),i.push(h));if(e.i?(f=Pm(e.i,"Location",!0)).length>0&&(r=e.B=f):i.length&&(r=e.B=i),e.l.qf=t.attributes.id||"",e.l.le=Jt(t,"publishTime",nn)||0,e.H=Kt(t,"PatchLocation"),m=Promise.resolve(),(y=Xt(t,"ContentSteering"))&&e.j)for(v=y.attributes.defaultServiceLocation,e.i?(e.i.i=r,e.i.h=v):(e.i=new Dm(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=r,e.i.h=v,(b=Yt(y))&&(Jt(y,"queryBeforeStart",dn,!1)?m=Lm(e.i,b):Lm(e.i,b))),w=g(a.keys()),k=w.next();!k.done;k=w.next())_=k.value,R=a.get(_),Nm(e.i,"Location",_,R);if(x=Kt(t,"BaseURL"),C=!1,e.i)for(D=g(x),M=D.next();!M.done;M=D.next())N=M.value,P=N.attributes.serviceLocation,O=Yt(N),P&&O&&(Nm(e.i,"BaseURL",P,O),C=!0);if(e.X.splice(0),C&&e.i||(F=x.map(Yt),e.X.push.apply(e.X,p(tt(r,F)))),U=e.i,z=e.X,B=function(){return U&&C?Pm(U,"BaseURL"):z.slice()},e.l.cb=B,j=0,x&&x.length&&(j=Jt(x[0],"availabilityTimeOffset",un)||0),e.l.rb=j,e.K=Jt(t,"minimumUpdatePeriod",rn,-1),q=Jt(t,"availabilityStartTime",nn),G=Jt(t,"timeShiftBufferDepth",rn),H=e.g.dash.ignoreSuggestedPresentationDelay,V=null,H||(V=Jt(t,"suggestedPresentationDelay",rn)),$=e.g.dash.ignoreMaxSegmentDuration,Y=null,$||(Y=Jt(t,"maxSegmentDuration",rn)),W=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&"static"==W),e.l.type=W,e.h)for(X=e.h.presentationTimeline,Q=X.Hb(),J=g(e.o.values()),Z=J.next();!Z.done;Z=J.next())(ee=Z.value).segmentIndex&&ee.segmentIndex.Ya(Q);else te=e.g.dash.ignoreMinBufferTime,ne=0,te||(ne=Jt(t,"minBufferTime",rn)||0),re=null!=V?Math.min(V,G||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(1.5*ne,G||1/0),X=new ol(q,re,e.g.dash.autoCorrectDrift);return X.cd("static"==W),X.W()&&!isNaN(e.g.availabilityWindowOverride)&&(G=e.g.availabilityWindowOverride),null==G&&(G=1/0),X.Hf(G),ie=t.attributes.profiles||"",e.l.profiles=ie.split(","),ae={Eb:"static"!=W,presentationTimeline:X,sa:null,na:null,qa:null,L:null,bandwidth:0,Kg:!1,rb:j,sc:null,profiles:ie.split(","),roles:null,Lb:function(){return""}},E(he,m,2);case 2:return e.N=0,se=Dy(e,ae,B,t,!1),oe=se.duration,le=se.periods,("static"!=W||e.V)&&se.Vh||X.Ab(oe||1/0),e.T&&e.va&&X.Oi(e.aa),X.Sg(Y||1),e.T&&e.va&&(ue=null!=V?V:e.g.defaultPresentationDelay,X.nh(ue)),e.h?(e.h.periodCount=le.length,e.h.gapCount=e.N,E(he,Ay(e,le,!1),4)):E(he,e.m.hg(le,ae.Eb),6);case 6:if(e.h={presentationTimeline:X,variants:e.m.l,textStreams:e.m.Ig(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:xy(t),nextUrl:Cy(t),periodCount:le.length,gapCount:e.N,isLowLatency:e.T,startTime:null},!X.ej()){he.A(7);break}return de=Kt(t,"UTCTiming"),E(he,function(e,t,n){var r,i,a,s,o,l,u,d;return L(function(c){switch(c.g){case 1:r=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),i=e.g.dash.clockSyncUri,!r.length&&i&&r.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),a=g(r),s=a.next();case 2:if(s.done){c.A(4);break}switch(o=s.value,S(c,5),l=o.scheme,u=o.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return c.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return c.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(u),c.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":K("NTP UTCTiming scheme is not supported");break;default:K("Unrecognized scheme in UTCTiming element",l)}c.A(9);break;case 7:return E(c,zy(e,t,u,"HEAD"),10);case 10:return c.return(c.h);case 8:return E(c,zy(e,t,u,"GET"),11);case 11:return c.return(c.h);case 9:A(c,3);break;case 5:I(c);case 3:s=a.next(),c.A(2);break;case 4:return K("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),c.return(0)}})}(e,B,de),8);case 8:if(ce=he.h,!e.j)return he.return();X.Pi(ce);case 7:X.lf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),function(e){for(var t=Array.from(e.F.keys()).filter(function(t){return!e.G.includes(t)}),n=(t=g(t)).next();!n.done;n=t.next()){n=n.value;for(var r=!0,i=g(e.F.get(n)),a=i.next();!a.done;a=i.next()){a=a.value;var s=e.o.get(a);s&&(s.segmentIndex&&0!=s.segmentIndex.getNumReferences()?r=!1:(e.m&&e.m.Th(s,n),e.o.delete(a)))}r&&e.F.delete(n)}}(e),function(e,t){t=new Set(t.map(function(e){return e.id}));for(var n=g(e.C.keys()),r=n.next();!r.done;r=n.next())r=r.value,t.has(r)||e.C.delete(r)}(e,le),T(he)}})}function Ay(e,t,n){var r;return L(function(i){if(1==i.g)return E(i,e.m.hg(t,!0,n),2);e.h.variants=e.m.l,(r=e.m.Ig()).length>0&&(e.h.textStreams=r),e.h.imageStreams=e.m.i,e.j.filter(e.h),T(i)})}function Iy(e,t){return Dy(e,{Eb:"dynamic"==e.l.type,presentationTimeline:e.h.presentationTimeline,sa:null,na:null,qa:null,L:null,bandwidth:0,Kg:!1,rb:e.l.rb,profiles:e.l.profiles,sc:e.l.sc,roles:null,Lb:function(){return""}},e.l.cb,t,!0).periods}function ky(e,t){e.h.periodCount--;for(var n=g(e.u.keys()),r=n.next();!r.done;r=n.next())(r=r.value).startsWith(t)&&(sm(e.u.get(r),km,"SegmentTimeline").children=[],Ry(e,r),e.u.delete(r));e.G=e.G.filter(function(e){return e!==t})}function _y(e,t){for(var n="",r="",i=-1,a="",s=(t=g(t)).next();!s.done;s=t.next())"Period"===(s=s.value).name?n=s.id:"AdaptationSet"===s.name?(r=s.id,null!==s.position&&(i=s.position)):"Representation"===s.name&&(a=s.id);if(t=[],a)t.push(n+","+a);else if(r)for(i=g(e.u.values()),e=i.next();!e.done;e=i.next())(e=e.value).sa.id===n&&e.qa.id===r&&e.L.id&&t.push(n+","+e.L.id);else if(i>-1)for(r=g(e.u.values()),e=r.next();!e.done;e=r.next())(e=e.value).sa.id===n&&e.qa.position===i&&e.L.id&&t.push(n+","+e.L.id);return t}function Ry(e,t){var n=e.u.get(t),r=e.o.get(t);r.segmentIndex&&r.segmentIndex.Ya(e.h.presentationTimeline.Hb());try{var i=Im(n,function(t,n,r,i){return jy(e,t,n,r,i)},e.o,!0,e.g.dash.initialSegmentLimit,e.ya,n.L.aesKey,null,!0,e.C);r.createSegmentIndex=function(){return L(function(e){if(1==e.g)return r.segmentIndex?e.A(0):E(e,i.Sc(),3);r.segmentIndex=e.h,T(e)})}}catch(a){if((t=n.L.contentType)!=ot&&"application"!=t&&"image"!=t||4002!=a.code)throw a}}function xy(e){var t=Xt(e,"ServiceDescription");if(!t)return null;if(e=Xt(t,"Latency"),t=Xt(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function Cy(e){if(!(e=Kt(e,"SupplementalProperty")).length)return null;for(var t=(e=g(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function Dy(e,t,n,r,i){var a=t.sc;a||(a=Jt(r,"mediaPresentationDuration",rn),e.l.sc=a);var s=0;e.h&&e.h.presentationTimeline&&e.V&&(s=e.h.presentationTimeline.Xb());var o=[],l=s;r=Kt(r,"Period");for(var u=0;u<r.length;u++){var d=r[u],c=r[u+1],h=Jt(d,"start",rn,l),f=d.attributes.id,p=Jt(d,"duration",rn);h=0==u&&0==h&&e.V?s:h;var m=null;if(c){var y=Jt(c,"start",rn);null!=y&&(m=y-h+s)}else null!=a&&(m=a-h+s);if(y=ut,m&&p&&Math.abs(m-p)>y&&m>p&&e.N++,null==m&&(m=p),!(null!==e.O&&null!==f&&null!==h&&h<e.O)||e.G.includes(f)||u+1==r.length){if(null!==h&&(null===e.O||h>e.O)&&(e.O=h),l=Ly(e,t,n,{start:h,duration:m,node:d,ef:null==m||!c}),o.push(l),t.sa.id&&m&&e.ya.set(t.sa.id,m),null==m){l=null;break}l=h+m}}if(i)for(n=(t=g(o)).next();!n.done;n=t.next())n=n.value.id,e.G.includes(n)||e.G.push(n);else e.G=o.map(function(e){return e.id});return null!=a?{periods:o,duration:a+s,Vh:!1}:{periods:o,duration:l,Vh:!0}}function Ly(e,t,n,r){t.sa=Uy(e,r.node,null,n),t.na=r,t.sa.rb=t.rb,t.sa.id||(t.sa.id="__shaka_period_"+r.start);var i=Kt(r.node,"EventStream");n=t.presentationTimeline.Hb();for(var a=(i=g(i)).next();!a.done;a=i.next())By(e,r.start,r.duration,a.value,n);for(i=(n=g(n=Kt(r.node,"SupplementalProperty"))).next();!i.done;i=n.next())"urn:mpeg:dash:urlparam:2014"==(i=i.value).attributes.schemeIdUri&&(i=Py(e,i))&&(t.Lb=i);if(n=Kt(r.node,"AdaptationSet").map(function(n,r){return Ny(e,t,r,n)}).filter(Ar),t.Eb){i=[];for(var s=(a=g(n)).next();!s.done;s=a.next())for(var o=(s=g(s.value.Ok)).next();!o.done;o=s.next())i.push(o.value);if(i.length!=new Set(i).size)throw new Ue(2,4,4018)}for(i=new Map,s=(a=g(n)).next();!s.done;s=a.next())for(o=(s=g(s.value.uj)).next();!o.done;o=s.next()){var l=g(o.value);o=l.next().value,l=l.next().value,i.set(o,l)}if(i.size)for(a=null,o=(s=g(n)).next();!o.done;o=s.next()){l=[];for(var u=g((o=o.value).streams),d=u.next(),c={};!d.done;c={uh:void 0},d=u.next())if(c.uh=d.value,i.has(c.uh.originalId)){a||(a=Kt(r.node,"AdaptationSet").map(function(n,r){return Ny(e,t,r,n)}).filter(Ar));for(var h=(d=g(a)).next();!h.done;h=d.next())(h=h.value.streams.find(function(e){return function(t){return t.originalId==e.uh.originalId}}(c)))&&(h.dependencyStream=i.get(h.originalId),h.originalId+=h.dependencyStream.originalId,l.push(h))}l.length&&o.streams.push.apply(o.streams,p(l))}if(r=n.filter(function(e){return!e.Dh}),n=n.filter(function(e){return e.Dh}),!e.g.disableIFrames)for(i=(n=g(n)).next();!i.done;i=n.next())for(a=(i=i.value).Dh.split(" "),o=(s=g(r)).next();!o.done;o=s.next())if(o=o.value,a.includes(o.id))for(l=(o=g(o.streams)).next();!l.done;l=o.next())ii(l.value,i.streams);if(n=My(e.g.disableAudio,r,"audio"),i=My(e.g.disableVideo,r,"video"),a=My(e.g.disableText,r,ot),r=My(e.g.disableThumbnails,r,"image"),0===i.length&&0===n.length)throw new Ue(2,4,4004);return{id:t.sa.id,audioStreams:n,videoStreams:i,textStreams:a,imageStreams:r}}function My(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,p(t.streams)),e},[])}function Ny(t,n,r,i){function a(e){var r=e.attributes["dvb:fontFamily"];e=e.attributes["dvb:url"],r&&e&&(e=tt(n.qa.cb(),[e],n.Lb()),t.j.addFont(r,e[0]))}function s(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function o(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.qa=Uy(t,i,n.sa,null),n.qa.position=r;var l=!1,u=(r=Kt(i,"Role")).map(function(e){return e.attributes.value}).filter(Ar),d=void 0,c=n.qa.contentType==ot;c&&(d="subtitle");for(var h=(r=g(r)).next();!h.done;h=r.next()){var f=(h=h.value).attributes.schemeIdUri;if(null==f||"urn:mpeg:dash:role:2011"==f)switch(h=h.attributes.value,h){case"main":l=!0;break;case"caption":case"subtitle":d=h}}var m=Kt(i,"EssentialProperty");r=null;var y=!1;h=null,f=!1;for(var v=(m=g(m)).next();!v.done;v=m.next()){var b=(v=v.value).attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==b)r=v.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==b)var S=o(parseInt(v.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==b)var w=s(parseInt(v.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?y=!0:"urn:dvb:dash:fontdownload:2014"==b?a(v):"urn:mpeg:dash:urlparam:2014"==b&&(h=Py(t,v))||(f=!0))}if(f)return null;var A=null;for(m=(f=g(f=Kt(i,"SupplementalProperty"))).next();!m.done;m=f.next())"http://dashif.org/guidelines/last-segment-number"==(v=(m=m.value).attributes.schemeIdUri)?A=parseInt(m.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==v?S=o(parseInt(m.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==v?w=s(parseInt(m.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==v?a(m):"urn:mpeg:dash:urlparam:2014"==v&&(h=Py(t,m));h&&(n.Lb=h),h=Kt(i,"Accessibility");var I,k=new Map;for(f=(h=g(h)).next();!f.done;f=h.next())if(f=(m=f.value).attributes.schemeIdUri,m=m.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=f||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=f||t.g.disableText)"urn:mpeg:dash:role:2011"==f?null!=m&&(u.push(m),"captions"==m&&(d="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==f&&("1"==m?I="visually impaired":"2"==m?I="hard of hearing":"9"==m&&(I="spoken subtitles"));else if(f=1,null!=m)for(v=(m=g(m.split(";"))).next();!v.done;v=m.next()){b=v.value;var _=v=void 0;b.includes("=")?(v="svc"+(b=b.split("="))[0],_=b[1].split(",")[0].split(":").pop()):(v="svc"+f,f++,_=b),k.set(v,Cr(_))}else k.set("svc1","und");else if(f=1,null!=m)for(b=(v=g(m=m.split(";"))).next();!b.done;b=v.next()){_=b.value;var R=b=void 0;_.includes("=")?(b=(_=_.split("="))[0].startsWith("CC")?_[0]:"CC"+_[0],R=_[1]||"und"):(b="CC"+f,2==m.length?f+=2:f++,R=_),k.set(b,Cr(R))}else k.set("CC1","und");h=Kt(i,"ContentProtection");var x=Jp(t.xa,h,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI);n.qa.encrypted=h.length>0;var C=Cr(n.qa.language||"und"),D=n.qa.label,M=new Map;if(i=Kt(i,"Representation"),!t.g.ignoreSupplementalCodecs){for(h=[],m=(f=g(i)).next();!m.done;m=f.next())(m=Zt(v=m.value,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&((v=Ut(v)).attributes.codecs=m.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),h.push(v));i.push.apply(i,p(h))}if(h=i.map(function(r){var i=function(t,n,r,i,a,s,o,l,u,d,c,h){n.L=Uy(t,d,n.qa,null);var f=n.L.id;if(t.aa=Math.min(t.aa,n.L.rb),t.T=t.aa>0,!function(e){var t=e.Hd?1:0;return t+=e.zc?1:0,0==(t+=e.Nc?1:0)?e.contentType==ot||"application"==e.contentType:(1!=t&&(e.Hd&&(e.zc=null),e.Nc=null),!0)}(n.L))return null;var g=n.na.start;n.bandwidth=Jt(d,"bandwidth",on)||0,n.roles=l;var p=Kt(d,"SupplementalProperty"),m=Kt(d,"EssentialProperty"),y=Kt(d,"ContentProtection");d=null;var v,b,S=m.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri});(S||(S=p.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri})))&&(d=Py(t,S)),d&&(n.Lb=d),S=n.L.contentType,d=S==ot||"application"==S,S="image"==S,y.length&&(n.qa.encrypted=!0);try{var w=void 0;if(r.dg){var A=n.L.cb,I=n.Lb,k=qi(tt(A(),[r.dg.rk],I()),t.g.retryParameters);w={bitsKey:128,blockCipherMode:"CBC",iv:r.dg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,r,i;return L(function(a){if(1==a.g)return E(a,Gy(t,k,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new Ue(2,4,4049);return r={name:"AES-CBC"},i=w,E(a,e.crypto.subtle.importKey("raw",n.data,r,!0,["decrypt"]),3)}i.cryptoKey=a.h,w.fetchKey=void 0,T(a)})}}}if(n.L.aesKey=w,A=function(e,n,r,i){return jy(t,e,n,r,i)},n.L.Hd)var _=ym(n,A,w);else if(n.L.zc)_=wm(n,t.o,w);else if(n.L.Nc)_=Im(n,A,t.o,!!t.h,t.g.dash.initialSegmentLimit,t.ya,w,h,!1,t.C);else{var R=n.na.duration||0,x=n.L.cb,C=n.L.mimeType,D=n.L.codecs;_={endTime:-1,timeline:-1,Sc:function(){var e=Ll(g,R,x());return e.Fb(function(e){e.mimeType=C,e.codecs=D}),Promise.resolve(e)},timescale:1}}}catch(N){if((d||S)&&4002==N.code)return null;throw N}if(h=function(e,t,n,r,i){var a=Jp(e,t,r,i);if(n.Xh)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==a.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=a.drmInfos),n.Xh=!1;else if(a.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(e){return a.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==n.drmInfos.length))throw new Ue(2,4,4008);return a.Sh||n.Sh}(t.xa,y,r,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),h=new Set(h?[h]:[]),y=!1,p.some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(y=!0),p=!1,d&&(p=l.includes("forced_subtitle")||l.includes("forced-subtitle")),S&&((m=m.find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(v=m.attributes.value),!v))return null;d=n.L.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(d.includes("hvc1.2.4.L153.B0")||d.includes("hev1.2.4.L153.B0"))&&(b="PQ"),m=n.L.id?n.sa.id+","+n.L.id:"",t.H.length&&f&&t.u.set(n.sa.id+","+f,function(e){function t(e){return e?((e=zt(e)).Hd=null,e.zc=null,e.Nc=yn(e.Nc),e.zf=null,e):null}return(e=zt(e)).sa=t(e.sa),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=zt(e.na),e.na.node=null),e}(n)),n.L.zf&&function(e,t,n,r){if(!e.ma.has(t)){e.ma.add(t);var i,a=Jt(t,"presentationTime",ln)||0,s=Xt(t,"UTCTiming");(i=s&&s.attributes.schemeIdUri)&&(i=!("urn:mpeg:dash:utc:http-ntp:2014"===(s=s.attributes.schemeIdUri)||"urn:mpeg:dash:utc:ntp:2014"===s||"urn:mpeg:dash:utc:sntp:2014"===s)),t=i?1e3*(Jt(t,"wallClockTime",nn)||0):uo(t=Jt(t,"wallClockTime",ln)||0),a=(n=new Date(t-a/n.timescale*1e3)).getTime()/1e3,isNaN(a)||(r.o||r.oh(a),r=new Mi("prft",r=(new Map).set("detail",{wallClockTime:t,programStartDate:n})),e.j.onEvent(r))}}(t,n.L.zf,_,n.presentationTimeline),-1!=_.endTime&&null!=n.sa.id&&null!=n.L.id&&((f=t.C.get(n.sa.id))?(f.endTime=_.endTime,f.bh.includes(n.L.id)||f.bh.push(n.L.id),t.C.set(n.sa.id,f)):t.C.set(n.sa.id,{endTime:_.endTime,timeline:_.timeline,bh:[n.L.id]}));var M=m&&t.o.has(m)?t.o.get(m):{id:t.Fa++,originalId:n.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){M.segmentIndex&&(M.segmentIndex.release(),M.segmentIndex=null)},segmentIndex:null,mimeType:n.L.mimeType,codecs:d,frameRate:n.L.frameRate,pixelAspectRatio:n.L.pixelAspectRatio,bandwidth:n.bandwidth,width:n.L.width,height:n.L.height,kind:i,encrypted:r.drmInfos.length>0,drmInfos:r.drmInfos,keyIds:h,language:a,originalLanguage:n.qa.language,label:s,type:n.qa.contentType,primary:o,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.L.emsgSchemeIdUris,roles:l,forced:p,channelsCount:n.L.uf,audioSamplingRate:n.L.audioSamplingRate,spatialAudio:y,closedCaptions:u,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:v,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([tr(n.L.mimeType,n.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return M.createSegmentIndex=function(){var e;return L(function(t){if(1==t.g)return M.segmentIndex?t.A(0):(e=M,E(t,_.Sc(),3));e.segmentIndex=t.h,T(t)})},m&&n.Eb&&!t.o.has(m)&&(n=n.sa.id||"",t.F.has(n)||t.F.set(n,[]),t.o.set(m,M),t.F.get(n).push(m)),M}(t,n,x,d,C,D,l,u,k,r,I,A);return i&&(i.hdr=i.hdr||S,i.colorGamut=i.colorGamut||w,i.fastSwitching=y,r=r.attributes.dependencyId)?(i.baseOriginalId=r,M.set(r,i),null):i}).filter(function(e){return!!e}),0==h.length&&0==M.size){if(r="image"==n.qa.contentType,t.g.dash.ignoreEmptyAdaptationSet||c||r)return null;throw new Ue(2,4,4003)}if(!n.qa.contentType||"application"==n.qa.contentType)for(n.qa.contentType=qy(h[0].mimeType,h[0].codecs),f=(c=g(h)).next();!f.done;f=c.next())f.value.type=n.qa.contentType;for(c=n.qa.id||"__fake__"+t.Fa++,m=(f=g(h)).next();!m.done;m=f.next()){for(m=m.value,b=(v=g(x.drmInfos)).next();!b.done;b=v.next())(b=b.value).keyIds=b.keyIds&&m.keyIds?new Set([].concat(p(b.keyIds),p(m.keyIds))):b.keyIds||m.keyIds;t.g.enableAudioGroups&&(m.groupId=c)}return i=i.map(function(e){return e.attributes.supplementalId||e.attributes.id}).filter(Ar),{id:c,contentType:n.qa.contentType,language:C,Dm:l,streams:h,drmInfos:x.drmInfos,Dh:r,Ok:i,uj:M}}function Py(e,t){if((t=Qt(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Jt(t,"useMPDUrlQuery",dn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.$:n.split("&").map(function(t){if("$querypart$"==t)return e.$;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var r=new Re(e.$).get(n);if(r.length)return n+"="+r[0]}return t}).join("&")}}return null}function Oy(e){var t,n;return L(function(r){switch(r.g){case 1:return t=0,S(r,2),E(r,Sy(e),4);case 4:t=r.h,A(r,3);break;case 2:if(n=I(r),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),r.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return r.return();e.j.onManifestUpdated(),Fy(e,t),T(r)}})}function Fy(e,t){if(!(e.K<0)){var n=e.K;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.M.ia(Math.max(n-t,q(e.Da)))}}function Uy(e,t,n,r){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,uf:null,audioSamplingRate:null,rb:0,Ef:1,encrypted:!1},r=r||n.cb;var i,a=t.attributes.id,s=t.attributes.supplementalId,o=Kt(t,"BaseURL"),l=!1;if(e.i)for(var u=g(o),d=u.next();!d.done;d=u.next()){var c=d.value;d=c.attributes.serviceLocation,c=Yt(c),d&&c&&(Nm(e.i,a,d,c),l=!0)}l&&e.i||(i=o.map(Yt));var h=e.i;e=t.attributes.contentType||n.contentType,u=t.attributes.mimeType||n.mimeType,d=ru([t.attributes.codecs||n.codecs]).join(","),c=Jt(t,"frameRate",cn)||n.frameRate;var f=t.attributes.sar||n.pixelAspectRatio,p=function(e,t){t=t.slice();for(var n=(e=g(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(Kt(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Kt(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=g(e)).next();!t.done;t=e.next()){var n=(t=t.value).attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(t,10)))continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],!(t=parseInt(t,16)))continue;for(var r=0,i=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),!(t=parseInt(t,16)))continue;for(i=r=0;i<n.length;i++)t&1<<i&&(r+=n[i]);if(r)return r;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}(m)||n.uf;var y=Jt(t,"audioSamplingRate",ln)||n.audioSamplingRate;e||(e=qy(u,d));var v=Xt(t,"SegmentBase"),b=Xt(t,"SegmentTemplate"),E=v&&Jt(v,"availabilityTimeOffset",un)||0,T=b&&Jt(b,"availabilityTimeOffset",un)||0,S=o&&o.length&&Jt(o[0],"availabilityTimeOffset",un)||0;E=n.rb+S+E+T,T=null,(S=Xt(t,"SegmentSequenceProperties"))&&(S=Jt(S,"cadence",on))&&(T=S),S=t.attributes.label;var w=Kt(t,"Label");return w&&w.length&&$t(w=w[0])&&(S=$t(w)),{cb:function(){return tt(r(),o.length?h&&l?Pm(h,a):i||[]:[])},Hd:v||n.Hd,zc:Xt(t,"SegmentList")||n.zc,Nc:b||n.Nc,zf:Xt(t,"ProducerReferenceTime")||n.zf,width:Jt(t,"width",ln)||n.width,height:Jt(t,"height",ln)||n.height,contentType:e,mimeType:u,codecs:d,frameRate:c,pixelAspectRatio:f,emsgSchemeIdUris:p,id:s||a,originalId:a,language:t.attributes.lang,uf:m,audioSamplingRate:y,rb:E,cf:null,Ef:T||n.Ef,label:S||null,encrypted:!1}}function zy(e,t,n,r){var i,a,s,o,l,u,d;return L(function(c){if(1==c.g)return i=[Ke(n)],a=tt(t(),i),(s=qi(a,e.g.retryParameters)).method=r,o=e.j.networkingEngine.request(4,s,{isPreload:e.oa()}),Ui(e.R,o),E(c,o.promise,2);if(l=c.h,"HEAD"==r){if(!l.headers||!l.headers.date)return c.return(0);u=l.headers.date}else u=Be(l.data);return d=Date.parse(u),isNaN(d)?c.return(0):c.return(d-Date.now())})}function By(e,t,n,r,i){for(var a=r.attributes.schemeIdUri||"",s=r.attributes.value||"",o=Jt(r,"timescale",ln)||1,l=Jt(r,"presentationTimeOffset",ln)||0,u=(r=g(Kt(r,"Event"))).next();!u.done;u=r.next()){var d=Jt(u=u.value,"presentationTime",ln)||0,c=Jt(u,"duration",ln)||0;c=(d=Math.max((d-l)/o+t,t))+c/o,null!=n&&(d=Math.min(d,t+n),c=Math.min(c,t+n)),c<i||(u={schemeIdUri:a,value:s,startTime:d,endTime:c,id:u.attributes.id||"",timescale:o,eventElement:mn(u),eventNode:yn(u)},e.j.onTimelineRegionAdded(u))}}function jy(e,t,n,r,i){var a,s,o,l;return L(function(u){return 1==u.g?(a=$i,s=i?0:1,o=au(t,n,r,e.g.retryParameters),E(u,Gy(e,o,a,{type:s}),2)):(l=u.h,u.return(l.data))})}function qy(e,t){return pr(t=tr(e,t))?ot:e.split("/")[0]}function Gy(e,t,n,r){return r||(r={}),r.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,r),Ui(e.R,t),t.promise}function Hy(){}(r=Ty.prototype).configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.M.Jb(),this.i&&this.i.configure(this.g),this.m&&this.m.Ri(this.g.dash.useStreamOnceInPeriodFlattening)},r.start=function(e,t){var n,r=this;return L(function(i){if(1==i.g)return r.va=t.isLowLatencyMode(),r.B=[e],r.j=t,E(i,Sy(r),2);if(n=i.h,r.j&&Fy(r,n),!r.j)throw new Ue(2,7,7001);return i.return(r.h)})},r.stop=function(){for(var e=g(this.o.values()),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.F.clear(),this.u.clear(),this.C.clear(),this.l={qf:"",type:"",profiles:[],sc:null,rb:0,cb:null,le:0},this.m=null,null!=this.M&&(this.M.stop(),this.M=null),this.i&&this.i.destroy(),this.I&&(this.I.release(),this.I=null),this.ma.clear(),this.xa.release(),this.R.destroy()},r.update=function(){var e,t=this;return L(function(n){return 1==n.g?(S(n,2),E(n,Sy(t),4)):2!=n.g?A(n,0):(e=I(n),t.j&&e?(t.j.onError(e),void T(n)):n.return())})},r.onExpirationUpdated=function(){},r.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Hc();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.K=t.endTime-e,Fy(this,0))}}},r.banLocation=function(e){this.i&&this.i.banLocation(e)},r.setMediaElement=function(e){this.J=e},B("shaka.dash.DashParser",Ty),Qa("application/dash+xml",function(){return new Ty}),Qa("video/vnd.mpeg.dash.mpd",function(){return new Ty}),B("shaka.dependencies",Hy),Hy.has=function(e){return $y.has(e)},Hy.add=function(e,t){if(!Ky[e])throw Error(e+" is not supported");e==Vy?de("mux.js","mux.js is no longer used in Shaka Player."):$y.set(e,function(){return t})};var Vy="muxjs",Ky={Em:Vy,ISOBoxer:"ISOBoxer"};Hy.Allowed=Ky;var $y=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function Yy(){this.j=new ie(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new ie(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function Wy(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function Xy(){Yy.call(this),this.g=new ie(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new ie(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}function Qy(){if(!Jy())throw Error("Not a Chromecast device!");Yy.call(this),this.h=new ie(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new ie(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return(e=e.toLowerCase()).includes("android")?Zy:e.includes("fuchsia")?ev:tv})}function Jy(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}(r=Yy.prototype).cc=function(){return!!navigator.mediaCapabilities},r.Ua=function(){return this.j.value()},r.Ha=function(){return this.l.value()},r.Ed=function(){return!1},r.Gi=function(){return!1},r.df=function(){return!1},r.Hi=function(){return!1},r.oe=function(){return!1},r.fd=function(){return!0},r.Pc=function(){return!0},r.re=function(){return!0},r.Mi=function(){return 0},r.jc=function(){return Promise.resolve({width:1/0,height:1/0})},r.Ui=function(){return!1},r.rh=function(){return!1},r.Wa=function(e){var t=this.Ua();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},r.xh=function(){return!!e.indexedDB},r.Ei=function(){return[]},r.sd=function(t){return void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"},r.aj=function(){return!1},r.si=function(){return!1},r.gh=function(){return!1},r.Kf=function(){return!0},r.ti=function(){return!1},r.$i=function(){return!0},r.ed=function(){return!1},r.Rg=function(e){return"com.apple.fps"===e},r.Jf=function(){return!0},r.toString=function(){return"Device: "+this.Nb()+" v"+this.za()+"; Type: "+this.Ua()},h(Xy,Yy),(r=Xy.prototype).za=function(){return this.g.value()},r.Nb=function(){return"Apple Browser"},r.Ua=function(){return this.h.value()},r.Ha=function(){return"WEBKIT"},r.cc=function(){return!1},r.Ed=function(e,t){return"audio"===t},r.df=function(){return!0},r.Hi=function(e){return"audio"===e},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},r.aj=function(){return!0},r.Jf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(se=function(){return new Xy}),h(Qy,Yy),(r=Qy.prototype).za=function(){return this.h.value()},r.Nb=function(){return"Chromecast with "+this.g.value()},r.Ua=function(){return"CAST"},r.Ha=function(){return"CHROMIUM"},r.cc=function(){return Yy.prototype.cc.call(this)&&this.g.value()!==tv},r.Pc=function(){return this.g.value()!==tv},r.Mi=function(){switch(this.g.value()){case Zy:return 0;case ev:return 3;default:return 1}},r.jc=function(){var t,n,r,i;return L(function(a){switch(a.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},S(a,2),!(r=t)){a.A(4);break}return E(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:r=a.h;case 4:if(r){n.width=3840,n.height=2160,a.A(6);break}if(!(i=t)){a.A(7);break}return E(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=a.h;case 7:i&&(n.width=1920,n.height=1080);case 6:A(a,3);break;case 2:V("Failed to check canDisplayType:",I(a));case 3:return a.return(n)}})},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},r.xh=function(){return!1},r.ed=function(){return!0};var Zy="Android",ev="Fuchsia",tv="Linux";function nv(){Yy.call(this);var e=this;this.i=new ie(function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null}),this.g=new ie(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new ie(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")}),this.u=new ie(function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()}),this.o=new ie(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new ie(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase():!!navigator.userAgent.includes("Android")})}function rv(){Yy.apply(this,arguments)}function iv(){Yy.call(this),this.g=new ie(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}function av(){Yy.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function sv(){Yy.apply(this,arguments)}function ov(){Yy.call(this),this.i=new ie(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new ie(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new ie(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}function lv(){Yy.call(this);var e=this;this.h=function(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(t){t=JSON.parse(t),e.g=t.rj["tv.model.supportHDR"]||t.rj["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({Bm:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){K("WebOS: getConfigs call failed",n)}}if(Jy()&&(se=function(){return new Qy}),h(nv,Yy),(r=nv.prototype).za=function(){return this.i.value()},r.Nb=function(){return this.g.value()},r.Ed=function(e){return!!vi(e)&&"Edge"===this.g.value()&&this.h.value()},r.Gi=function(){return"Edge"===this.g.value()&&this.h.value()},r.df=function(){return"Edge"===this.g.value()&&this.h.value()},r.Pc=function(){return this.u.value()},r.Wa=function(e){if(Yy.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},r.gh=function(){return"Edge"===this.g.value()||this.o.value()},r.ed=function(){if("GECKO"===this.Ha()){var e=this.za();return null!==e?e>=100:Yy.prototype.ed.call(this)}return Yy.prototype.ed.call(this)},r.Rg=function(e){return"GECKO"===this.Ha()?e.startsWith("com.microsoft.playready.recommendation"):Yy.prototype.Rg.call(this,e)},oe=function(){return new nv},h(rv,Yy),(r=rv.prototype).za=function(){return null},r.Nb=function(){return"Hisense"},r.Ua=function(){return"TV"},r.cc=function(){return!1},r.jc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(r){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(se=function(){return new rv}),h(iv,Yy),(r=iv.prototype).Nb=function(){return"PlayStation"},r.Ua=function(){return"CONSOLE"},r.Ha=function(){return"WEBKIT"},r.za=function(){return this.g.value()},r.cc=function(){return!1},r.fd=function(){return!1},r.Pc=function(){return!1},r.rh=function(){return 4===this.za()},r.jc=function(){var t,n,r,i;return L(function(a){switch(a.g){case 1:return t={width:1920,height:1080},n=!1,S(a,2),E(a,e.msdk.device.getDisplayInfo(),4);case 4:r=a.h,n="4K"===r.resolution,A(a,3);break;case 2:return I(a),S(a,5),E(a,e.msdk.device.getDisplayInfoImmediate(),7);case 7:i=a.h,n="4K"===i.resolution,A(a,3);break;case 5:K("PlayStation: Failed to get the display info:",I(a));case 3:return n&&(t.width=3840,t.height=2160),a.return(t)}})},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),4===this.za()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},r.gh=function(){return 4===this.za()},r.Kf=function(){return 4!==this.za()},navigator.userAgent.includes("PlayStation")&&(se=function(){return new iv}),h(av,Yy),(r=av.prototype).za=function(){return this.g},r.Nb=function(){return"Tizen"},r.Ha=function(){return"CHROMIUM"},r.Ua=function(){return"TV"},r.Ed=function(){return!0},r.oe=function(){return 3===this.za()},r.cc=function(){return!1},r.fd=function(){var e=this.za();return null!==e?e>=4:Yy.prototype.fd.call(this)},r.Pc=function(){return!1},r.re=function(){return this.g&&this.h?5===this.g?this.h>=5:this.g>5:Yy.prototype.re.call(this)},r.jc=function(){var t=e.devicePixelRatio;t={width:e.screen.width*t>1920?3840:1920,height:e.screen.height*t>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();t.width=n.width,t.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(r){K("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.za(),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},r.Ei=function(){var e=[];return null!==this.g&&this.g<5&&e.push("opus"),e},r.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch(t){return Yy.prototype.sd.call(this,e)}return"SDR"},r.si=function(){return!0},r.ti=function(){return 3===this.za()},navigator.userAgent.includes("Tizen")&&(se=function(){return new av}),h(sv,Yy),sv.prototype.za=function(){return null},sv.prototype.Nb=function(){return"Vizio"},sv.prototype.Ua=function(){return"TV"},sv.prototype.cc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(se=function(){return new sv}),h(ov,Yy),(r=ov.prototype).za=function(){return this.g.value()},r.Nb=function(){return"WebKit STB"},r.Ua=function(){return"TV"},r.Ha=function(){return"WEBKIT"},r.cc=function(){return!1},r.fd=function(){var e=this.g.value();return null===e||e>=15},r.Ed=function(){return this.h.value()},r.jc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},r.Kf=function(){return!this.i.value()},r.Jf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(se=function(){return new ov}),h(lv,Yy),(r=lv.prototype).za=function(){return this.h},r.Nb=function(){return"WebOS"},r.Ua=function(){return"TV"},r.Ha=function(){return"CHROMIUM"},r.cc=function(){return!1},r.fd=function(){var e=this.za();return null!==e?e>3:Yy.prototype.fd.call(this)},r.Pc=function(){var e=this.za();return null!==e?e>6:Yy.prototype.Pc.call(this)},r.re=function(){var e=this.za();return null!==e?e>3:Yy.prototype.re.call(this)},r.jc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(r){K("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),3===this.za()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},r.sd=function(e){return null==this.g?(K("WebOS: getConfigs call haven't finished"),Yy.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"},r.$i=function(){return!1},r.ed=function(){var e=this.za();return null!==e?e>=6:Yy.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var uv=new lv;se=function(){return uv}}function dv(){Yy.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function cv(){var e=null;try{e="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(t){}return e}function hv(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function fv(e,t,n,r){this.id=e,this.name=t,this.attributes=n,this.value=void 0===r?null:r}function gv(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function pv(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function mv(e,t,n){return(e=pv(e,t))?e.value:n||null}function yv(e,t){if(!(e=pv(e,t)))throw new Ue(2,4,4023,t);return e.value}function vv(e,t,n){n=void 0===n?[]:n,this.ea=t,this.g=e,this.vc=n}function bv(e,t){this.name=e,this.value=t}function Ev(e,t){return e.filter(function(e){return e.name==t})}function Tv(e,t){return e.filter(function(e){return yv(e,"TYPE")==t})}function Sv(e,t){for(var n=(e=g(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function wv(e,t,n){return n=void 0===n?0:n,(e=Sv(e,t))?Number(e.value):n}function Av(e,t,n){return t?Iv(e,[t],n):[]}function Iv(e,t,n){if(!t.length)return[];var r=t;return n&&n.size&&(r=t.map(function(e){return kv(e,n)})),tt(e,r)}function kv(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=(r=r.value).slice(2,r.length-1),a=t.get(i);if(!a)throw new Ue(2,4,4039,i);e=e.replace(r,a)}return e}function _v(){this.g=0}function Rv(e,t){var n=(t=(t=Be(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!Dv.test(n[0]))throw new Ue(2,4,4015);t=0;for(var r=!1,i=[],a=!0,s=0;s<n.length;s++){var o=n[s],l=n[s+1];if(o.startsWith("#")&&!o.startsWith("#EXT")||a)a=!1;else{if(o=xv(e,o),r||(Nv.has(o.name)?(t=1,r=!0):"EXT-X-STREAM-INF"==o.name||"EXT-X-MEDIA"==o.name?r=!0:Pv.has(o.name)&&(t=1,r=!0)),Pv.has(o.name)){if(1!=t)throw new Ue(2,4,4017);a=e,e=Array(Math.max(100,Math.floor((n.length-s)/2))),r=0,o=[];var u=[];for(l=null;s<n.length;s++){var d=n[s];d.startsWith("#EXT")?(d=xv(a,d),Nv.has(d.name)?i.push(d):"EXT-X-MAP"==d.name?l=d:"EXT-X-PART"==d.name?u.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==mv(d,"TYPE")?u.push(d):"MAP"==mv(d,"TYPE")&&(d.name="EXT-X-MAP",l=d):o.push(d)):d.startsWith("#")&&!d.startsWith("#EXT")||(d=d.trim(),l&&o.push(l),o=new vv(d,o,u),r<e.length?e[r++]=o:(e.push(o),r++),o=[],u=[])}return u.length&&(l&&o.push(l),n=new vv("",o,u),r<e.length?e[r++]=n:(e.push(n),r++)),new hv(t,i,r<e.length?e.slice(0,r):e)}i.push(o),"EXT-X-STREAM-INF"==o.name&&(o.attributes.push(new bv("URI",l)),a=!0)}}return new hv(t,i)}function xv(e,t){e=e.g++;var n=t.match(Cv);if(!n)throw new Ue(2,4,4016,t);t=n[1];var r,i,a=n[2];if(n=[],a)for(a=new Ct(a),Lv.lastIndex=0,(i=Lt(a,Lv))&&(r=i[1]),Mv.lastIndex=0,i=Lt(a,Mv);i;)n.push(new bv(i[1],i[2]||i[3])),Dt(a),i=Lt(a,Mv);return new fv(e,t,n,r)}h(dv,Yy),(r=dv.prototype).za=function(){return this.h},r.Nb=function(){return"Xbox"},r.Ua=function(){return"CONSOLE"},r.Ha=function(){return this.g?"EDGE":"CHROMIUM"},r.Ed=function(){return!0},r.df=function(){return!0},r.Ui=function(){return this.g},r.jc=function(){var e={width:1920,height:1080},t=cv();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,r=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===r.maybe);t===r.probably&&(e.width=3840,e.height=2160)}catch(i){K("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},r.Wa=function(e){return Yy.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},r.xh=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==cv())&&(se=function(){return new dv}),fv.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),n.length>0&&(t+=":"+n.join(",")),t};var Cv=/^#(EXT[^:]*)(?::(.*))?$/,Dv=/^#EXTM3U($|[ \t\n])/m,Lv=/^([^,=]+)(?:,|$)/g,Mv=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,Nv=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),Pv=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function Ov(){}function Fv(e,t){try{var n=Uv(e);return Ci({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(r){return Ri(r)}}function Uv(t){var n=t.split(":");if(n.length<2||"data"!=n[0])throw new Ue(2,1,1004,t);if((n=n.slice(1).join(":").split(",")).length<2)throw new Ue(2,1,1004,t);var r=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=r.split(";"),r=n[0];var i=!1;return n.length>1&&"base64"==n[n.length-1]&&(i=!0,n.pop()),{data:i?Qe(t):Ge(t),contentType:r}}function zv(){var t=this;this.g=this.h=null,this.G=1,this.B=new Map,this.M=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(ot,new Map),this.C.set("image",new Map),this.uc=(new Map).set("com.apple.streamingkeydelivery",function(n,r,i){return function(t,n,r,i){var a,s,o,l,u;return L(function(d){if(1==d.g){if("video/mp2t"==r)throw new Ue(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Ue(2,4,4041);if(a=yv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(a))return d.return(null);s="cenc","SAMPLE-AES"==a&&(s="cbcs"),o=yv(n,"URI"),l=nt("com.apple.fps",s,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],o);var c=new pe(o).Db.replace(/-/g,"").toLowerCase();return(u=32===c.length&&/^[0-9a-f]+$/.test(c)?c:null)||!i?d.A(2):E(d,Rb(t,i),3)}return 2!=d.g&&(u=d.h),u&&l.keyIds.add(u),d.return(l)})}(t,n,r,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(e){var n=yv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var i=yv(e,"URI");n=Uv(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),r=nt("com.widevine.alpha",r,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=mv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e}).set("com.microsoft.playready",function(e){var t=yv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=nt("com.microsoft.playready",n,[{initDataType:"cenc",initData:t=ma(e=Ne((e=Uv((e=yv(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]),(e=qt(["<PLAYREADY>",Xe(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=Wp(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(e){var n=yv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var r="cenc";"SAMPLE-AES"==n&&(r="cbcs");var i=yv(e,"URI");n=Uv(i.split("?")[0]),i=i.split("?")[0],t.I.has(i)||(n=Ne(n.data),t.I.set(i,n)),r=nt("com.huawei.wiseplay",r,[{initDataType:"cenc",initData:t.I.get(i)}]),(e=mv(e,"KEYID"))&&r.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(r)}else e=Promise.resolve(null);return e}),this.ob=new Set,this.i=new Map,this.l=null,this.H="",this.Ta=new _v,this.N=-1,this.ma=1/0,this.aa=this.yc=this.kb=!1,this.F=new Tr(function(){t.X&&!t.g.continueLoadingWhenPaused&&(t.V.Ma(t.X,"timeupdate"),t.X.paused)?t.V.Ba(t.X,"timeupdate",function(){return Sb(t)}):Sb(t)}),this.Fa=Ob,this.m=null,this.ib=0,this.o=1/0,this.ab=this.Sa=this.T=0,this.$=new Fi,this.J=new Map,this.K=new Map,this.Da=new Map,this.va=new Map,this.O=new Map,this.xa=new Map,this.ya=new Map,this.xc=this.oa=!1,this.Zb=new j(5),this.j=null,this.R=!0,this.V=new te,this.u=this.X=null,this.ac=function(){return!1},this.I=new Map}function Bv(e,t){return wb(e)?e.C.get(t.type):t.mf}function jv(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,m,y,v,b,w,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H;return L(function(L){switch(L.g){case 1:if(t.stream.isAudioMuxedInVideo)return L.return();for(n=[],r=g(t.P()),i=r.next();!i.done;i=r.next())a=i.value,s=new pe(a),o=s.g,t.Re&&(t.Qb>=0&&o.add("_HLS_msn",String(t.Qb)),t.Rb>=0&&o.add("_HLS_part",String(t.Rb))),t.Se&&o.add("_HLS_skip","YES"),Ce(o)&&be(s,Ee(o.toString())),n.push(s.toString());return S(L,2),E(L,Tb(e,n,!0).promise,4);case 4:l=L.h,A(L,3);break;case 2:throw u=I(L),e.h&&e.h.disableStream(t.stream),u;case 3:if(!t.stream.segmentIndex)return L.return();if(1!=(d=Rv(e.Ta,l.data)).type)throw new Ue(2,4,4017);return(c=l.uri)==l.originalUri||t.P().includes(c)||t.Af.push(c),h=Ev(d.ea,"EXT-X-DEFINE"),f=Kv(e,h,c),m=t.stream,y=Bv(e,t),E(L,ob(e,d,m.mimeType,t.P,f),5);case 5:for(v=L.h,b=v.keyIds,w=v.drmInfos,k=v.encrypted,_=v.Lh,m.encrypted||!k||_||(m.encrypted=!0),function(e,t){return e.size===t.size&&[].concat(p(e)).every(function(e){return t.has(e)})}(m.keyIds,b)||(m.keyIds=b,m.drmInfos=w,e.h.newDrmInfo(m)),R=mb(e,d,y,f,t.P,t.type),x=R.segments,(C=R.bandwidth)&&(m.bandwidth=C),D=jl(m),M=g(x),N=M.next();!N.done;N=M.next())(P=N.value).ba&&(P.ba.xd=D);m.segmentIndex.fe(x,e.l.Hb()),x.length&&(O=wv(d.ea,"EXT-X-MEDIA-SEQUENCE",0),U=(F=Sv(d.ea,"EXT-X-SKIP"))?Number(mv(F,"SKIPPED-SEGMENTS")):0,z=ab(O,x),B=z.Qb,j=z.Rb,t.Qb=B+U,t.Rb=j,q=y.get(O),m.segmentIndex.Ya(q)),(G=Dl(m.segmentIndex))&&(t.Wc=G.startTime,H=x[x.length-1],t.Lc=H.endTime),Sv(d.ea,"EXT-X-ENDLIST")&&(t.Yd=!0),db(e,d),pb(e,d.ea,m.type,f,t.P),T(L)}})}function qv(e,t,n){n=void 0!==n&&n;for(var r=-1==e.N,i=g(t),a=i.next();!a.done;a=i.next()){var s=(a=a.value).stream.segmentIndex,o=Bv(e,a);if(s=Dl(s))for(var l=(o=g(o)).next();!l.done;l=o.next()){var u=(l=g(l.value)).next().value;if(l.next().value==s.startTime){r&&(e.N=Math.max(e.N,u)),a.og=u;break}}}if(!(e.N<0))for(r=(t=g(t)).next();!r.done;r=t.next())(rb(e,(r=r.value).type)||n)&&(i=r.stream.segmentIndex)&&(a=e.N-r.og)>0&&(i.g.splice(0,a),i=Dl(i))&&(i=-i.startTime,r.stream.segmentIndex.offset(i),Gv(e,r,i))}function Gv(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Lc+=n;for(var r=g(e=Bv(e,t)),i=r.next();!i.done;i=r.next()){var a=g(i.value);i=a.next().value,a=a.next().value,e.set(i,a+n)}t.P()}}function Hv(e,t,n){var r,i,a,s,o;return L(function(l){switch(l.g){case 1:return t?(r=$i,i=au(t.P(),t.Ic(),t.Gc(),e.g.retryParameters),E(l,Ib(e,i,r,{type:t instanceof Us?1:0}).promise,2)):l.return({mimeType:null,data:null});case 2:if(a=l.h,s=a.data,!t.aesKey){l.A(3);break}return E(l,iu(s,t.aesKey,n),4);case 4:s=l.h;case 3:return t instanceof Us?t.pe(s,!0):t.pe(s),(o=a.headers["content-type"])&&(o=o.split(";")[0].toLowerCase()),l.return({mimeType:o,data:s})}})}function Vv(e){if(wb(e)){if(e.Fa==Ub){for(var t=1/0,n=1/0,r=g(e.i.values()),i=r.next();!i.done;i=r.next())(i=i.value).stream.segmentIndex&&"text"!=i.stream.type&&!i.stream.isAudioMuxedInVideo&&(t=Math.min(t,i.Lc),n=Math.min(n,i.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Hf(t)}}else e.l.Ab(eb(e));if(!e.l.o)for(n=(t=g(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=Dl(n.stream.segmentIndex))&&n.h&&e.l.oh(n.h);e.l.lf()}function Kv(e,t,n){n=new pe(n).g;for(var r=new Map,i=(t=g(t)).next();!i.done;i=t.next()){var a=i.value,s=mv(a,"NAME"),o=mv(a,"VALUE");i=mv(a,"QUERYPARAM"),a=mv(a,"IMPORT"),s&&o&&(r.has(s)||r.set(s,o)),i&&(s=n.get(i)[0])&&!r.has(s)&&r.set(i,s),a&&(i=e.B.get(a))&&r.set(a,i)}return r}function $v(e){var t=new Set([tr(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Fb(function(n){n.mimeType&&t.add(tr(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function Yv(e,t,n){for(var r={audio:[],video:[]},i=new Map,a=[],s=!1,o=!1,l=g(t),u=l.next();!u.done;u=l.next()){var d=u.value;u=mv(d,"AUDIO");var c=mv(d,"VIDEO"),h=u||c;h&&(a.includes(h)||a.push(h),(d=mv(d,"PATHWAY-ID"))&&i.set(h,d),u?s=!0:c&&(o=!0))}a.length&&n.length&&function(e,t,n){for(var r={},i=(t=g(t=t.filter(function(e){var t=mv(e,"URI")||"";return"SUBTITLES"!=(e=mv(e,"TYPE"))&&(""!=t||"AUDIO"==e)}))).next();!i.done;i=t.next()){var a=gv(i=i.value,!e.j);r[a]?r[a].push(i):r[a]=[i]}for(var s in r)Qv(e,r[s],n,!1)}(e,n=n.filter(function(e){return a.includes(yv(e,"GROUP-ID"))}),i),n=(i=a.sort().join(","))&&e.M.has(i)?e.M.get(i):[],s?r.audio.push.apply(r.audio,p(n)):o&&r.video.push.apply(r.video,p(n)),o=!1;var f=t.map(function(e){return yv(e,"URI")});return s=r.audio.find(function(e){return e&&e.P().find(function(e){return f.includes(e)})}),l=at("video",n=Wv(e,t[0])),(u=at("audio",n))&&!l?(s="audio",o=r.audio.length>0&&!r.audio.some(function(e){return e.stream.isAudioMuxedInVideo})):!r.audio.length&&!r.video.length&&u&&l?(s="video",n=[[l,u].join()]):r.audio.length&&s?(s="audio",o=!0):s=r.video.length&&!r.audio.length?"audio":"video",o||(t=function(e,t,n,r){for(var i=e.G++,a=[],s=g(t),o=s.next();!o.done;o=s.next()){var l=o.value;o=yv(l,"URI"),l=mv(l,"PATHWAY-ID"),e.j&&l&&Nm(e.j,i,l,o),a.push(o)}if(s=a.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);o=a.join(",");e:{if(t=mv(t[0],"CLOSED-CAPTIONS"),"video"==r){if(e.g.disableText){e.R=!1,t=null;break e}if(t){if("NONE"!=t){t=e.J.get(t);break e}e.R=!1}else if(!t&&e.J.size)for(t=(t=g(e.J.keys())).next();!t.done;t=t.next()){t=e.J.get(t.value);break e}}t=null}return n=it(r,n),r=Zv(e,i,a,n,r,null,!1,o,null,t,null,!1,null,!1),e.i.set(s,r),r}(e,t,n,s),i&&e.g.enableAudioGroups&&(t.stream.groupId=i),"audio"==t.stream.type&&"audio"===s&&r.audio.some(function(e){return e.stream.isAudioMuxedInVideo})&&(e=r.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),r[t.stream.type]=[t]),r}function Wv(e,t){return t=mv(t,"CODECS")||"",e.aa=t.length>0,e.aa||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),ru(t.split(/\s*,\s*/))}function Xv(e,t,n,r,i,a,s,o,l,u,d,c){for(var h=g(n),f=h.next();!f.done;f=h.next())Eb(f.value.stream,i,a,s,o,l,null);for(i=e.g.disableVideo,n.length&&!i||(n=[null]),i&&(t=t.filter(function(e){return!e.stream.isAudioMuxedInVideo})),i=e.g.disableAudio,t.length&&!i||(t=[null]),i=[],a=(t=g(t)).next();!a.done;a=t.next())for(a=a.value,o=(s=g(n)).next();!o.done;o=s.next()){var p=o.value;(o=a?a.stream:null)&&(o.drmInfos=u,o.keyIds=d),(l=p?p.stream:null)&&(l.drmInfos=u,l.keyIds=d,e.g.disableIFrames||ii(l,c)),l&&!o&&(l.bandwidth=r),!l&&o&&(o.bandwidth=r),h=a?a.stream.drmInfos:null,f=p?p.stream.drmInfos:null,p=p?p.P().sort().join(","):"";var m=a?a.P().sort().join(","):"",y=[];o&&o.codecs&&y.push(o.codecs),l&&l.codecs&&y.push(l.codecs),p=[p,m,y.sort()].join("-"),o&&l&&!mi(h,f)||e.ob.has(p)||(o={id:e.G++,language:o?o.language:"und",disabledUntilTime:0,primary:!!o&&o.primary||!!l&&l.primary,audio:o,video:l,bandwidth:r,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},i.push(o),e.ob.add(p))}return i}function Qv(e,t,n,r){r=void 0===r||r;for(var i=[],a=[],s=new Map,o=g(t),l=o.next(),u={};!l.done;u={ii:void 0},l=o.next())l=l.value,u.ii=++e.G,u=function(e){return function(){return"shaka://hls-muxed"+e.ii}}(u),u=r?yv(l,"URI"):mv(l,"URI")||u(),l=yv(l,"GROUP-ID"),i.push(u),a.push(l),s.set(l,u);if(r=a.sort().join(","),l=t[0],t="",o=function(e){return"subtitles"==(e=yv(e,"TYPE").toLowerCase())&&(e=ot),e}(l),o==ot)t=mv(l,"CODECS")||"";else for(u=(a=g(a)).next();!u.done;u=a.next())if(u=u.value,e.K.has(u)){t=e.K.get(u);break}if(a=i.sort().join(","),e.i.has(a))return e.i.get(a);if(u=e.G++,e.j)for(var d=(s=g(s)).next();!d.done;d=s.next()){var c=g(d.value);d=c.next().value,c=c.next().value,(d=n.get(d))&&Nm(e.j,u,d,c)}n=mv(l,"LANGUAGE"),s=mv(l,"NAME"),d="YES"==mv(l,"DEFAULT"),c="audio"==o?function(e){return(e=mv(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}(l):null;var h="audio"==o&&function(e){return!!(e=mv(e,"CHANNELS"))&&2==(e=e.split("/")).length&&("JOC"===e[1]||e[1].includes("ATMOS"))}(l),f=mv(l,"CHARACTERISTICS"),p="YES"==mv(l,"FORCED");return l="audio"==o?function(e){return(e=mv(e,"SAMPLE-RATE"))?parseInt(e,10):null}(l):null,(i=Zv(e,u,i,t,o,n,d,s,c,null,f,p,l,h)).stream&&e.g.enableAudioGroups&&(i.stream.groupId=r),e.M.has(r)?e.M.get(r).push(i):e.M.set(r,[i]),e.i.set(a,i),i}function Jv(e,t){var n="video",r=yv(t,"URI"),i=mv(t,"CODECS")||"";if("mjpg"==i&&(n="image"),e.i.has(r))return e.i.get(r);var a=mv(t,"LANGUAGE"),s=mv(t,"NAME"),o=mv(t,"CHARACTERISTICS");return n=Zv(e,e.G++,[r],i,n,a,!1,s,null,null,o,!1,null,!1),a=g((i=mv(t,"RESOLUTION"))?i.split("x"):[null,null]),i=a.next().value,a=a.next().value,n.stream.width=Number(i)||void 0,n.stream.height=Number(a)||void 0,(t=mv(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(r,n),n}function Zv(e,t,n,r,i,a,s,o,l,u,d,c,h,f){function p(t){var n,p,v,w,k,_,R,x,C,D,M,N,P,O,F,U,z,B;return L(function(L){switch(L.g){case 1:return n=lt,S(L,2),E(L,t.promise,4);case 4:if(p=L.h,t.aborted)return L.return();if((v=p.uri)!=p.originalUri&&(b.P().includes(v)||b.Af.push(v)),1!=(w=Rv(e.Ta,p.data)).type)throw new Ue(2,4,4017);return k=Ev(w.ea,"EXT-X-DEFINE"),_=Kv(e,k,v),R=!1,(!e.aa&&e.g.hls.disableCodecGuessing||e.R&&i==n.Aa&&!e.g.hls.disableClosedCaptionsDetection)&&w.segments.length>0&&(e.R=!1,R=!0),x=!e.aa&&e.g.hls.disableCodecGuessing,C=wb(e),E(L,ib(e,0,_,w,m,r,i,a,s,o,l,u,d,c,h,f,void 0,R,x),5);case 5:if(D=L.h,t.aborted)return L.return();M=D.stream,ub(e,w),wb(e)&&!C&&cb(e,w),b.Wc=D.Wc,b.Lc=D.Lc,b.Se=D.Se,b.Re=D.Re,b.Yd=D.Yd,b.mf=D.mf,b.Qb=D.Qb,b.Rb=D.Rb,y.segmentIndex=M.segmentIndex,y.encrypted=M.encrypted,y.drmInfos=M.drmInfos,y.keyIds=M.keyIds,y.mimeType=M.mimeType,y.bandwidth=y.bandwidth||M.bandwidth,y.codecs=y.codecs||M.codecs,y.closedCaptions=y.closedCaptions||M.closedCaptions,y.width=y.width||M.width,y.height=y.height||M.height,y.hdr=y.hdr||M.hdr,y.colorGamut=y.colorGamut||M.colorGamut,y.frameRate=y.frameRate||M.frameRate,"und"==y.language&&"und"!=M.language&&(y.language=M.language),y.language=y.language||M.language,y.channelsCount=y.channelsCount||M.channelsCount,y.audioSamplingRate=y.audioSamplingRate||M.audioSamplingRate,$v(y),y.drmInfos.length&&e.h.newDrmInfo(y),N=!1,(!u&&y.closedCaptions||u&&y.closedCaptions&&u.size!=y.closedCaptions.size)&&(N=!0),e.m&&N&&e.h.makeTextStreamsForClosedCaptions(e.m),i==n.Na&&(P=Dl(M.segmentIndex))&&P.ba&&(y.mimeType="application/mp4",$v(y)),O=jl(y),y.segmentIndex.Fb(function(e){e.ba&&(e.ba.xd=O)}),function(e){if(!e.m)return!1;for(var t=[],n=[],r=(e=g(e.m.variants)).next();!r.done;r=e.next())(r=r.value).video&&t.push(r.video),r.audio&&n.push(r.audio);return!(t.length>0&&!t.some(function(e){return e.segmentIndex})||n.length>0&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.yc?nb(e,[b]):(e.yc=!0,F=Array.from(e.i.values()),U=F.filter(function(e){return e.stream.segmentIndex}),nb(e,U),Vv(e),(z=e.o)>0&&e.F.ia(z))),pb(e,w.ea,y.type,_,m),e.m&&(e.m.startTime=e.u),A(L,0);break;case 2:if(B=I(L),y.closeSegmentIndex(),7001===B.code)return L.return();if(!e.h.disableStream(y))throw B;T(L)}})}function m(){return e.j&&n.length>1?Pm(e.j,t):b.Af.concat(Iv([e.H],n,e.B))}var y=sb(e,r,i,a,s,o,l,u,d,c,h,f);n.some(function(e){return e.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",$v(y));var v,b={stream:y,type:i,Af:[],Wc:0,Lc:0,mf:new Map,Se:!1,Re:!1,Yd:!1,og:-1,Qb:-1,Rb:-1,P:m},w=null;return y.createSegmentIndex=function(){return w||(y.isAudioMuxedInVideo?(y.segmentIndex=new Cl([]),Promise.resolve()):(v=Tb(e,b.P(),!0),w=new Promise(function(e){e(p(v))})))},y.closeSegmentIndex=function(){w&&!y.segmentIndex&&v.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),w=null},b}function eb(e){for(var t=1/0,n=(e=g(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Lc));return t}function tb(e,t){for(var n=[],r=(t=g(t)).next();!r.done;r=t.next())(r=r.value).segmentIndex&&r.segmentIndex.Fb(function(e){n.push(e)});e.l.ie(n)}function nb(e,t){if(!wb(e))for(var n=eb(e),r=g(t),i=r.next();!i.done;i=r.next())i.value.stream.segmentIndex.pd(0,n);tb(e,t.map(function(e){return e.stream})),n=(r=Array.from(e.i.values()).filter(function(e){return e.stream.segmentIndex})).some(function(e){return"audio"==e.stream.type}),i=r.some(function(e){return"video"==e.stream.type}),r=wb(e)&&!e.kb,n=!wb(e)&&e.kb&&!(n&&i),e.g.hls.ignoreManifestProgramDateTime||r||n?qv(e,t,r):(function(e,t){if(e.ma==1/0)for(var n=(t=g(t)).next();!n.done;n=t.next())null!=(n=Dl(n.value.stream.segmentIndex))&&null!=n.h&&(e.ma=Math.min(e.ma,n.h));if((t=e.ma)!=1/0)for(var r=(n=g(e.i.values())).next();!r.done;r=n.next())if(!rb(e,(r=r.value).type)){var i=r.stream.segmentIndex;if(null!=i){var a=Dl(i);if(a)if(null==a.h)V("Missing EXT-X-PROGRAM-DATE-TIME for stream",r.P(),"Expect AV sync issues!");else for(Gv(e,r,a.h-t-a.startTime),i=(r=g(i)).next();!i.done;i=r.next())i.value.yh(t)}}}(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&qv(e,t))}function rb(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function ib(e,t,n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b){var T,w,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H,V,K,$,Y,W,X,Q,J,Z;return v=void 0===v||v,b=void 0===b||b,L(function(t){switch(t.g){case 1:if(T=r.segments||[],w=T.every(function(e){return!!Sv(e.ea,"EXT-X-GAP")}),!T.length||w)throw new Ue(2,4,4053);if(function(e,t){var n=Sv(t.ea,"EXT-X-PLAYLIST-TYPE");t=Sv(t.ea,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,Ab(e,t?Ob:n?Ub:Fb)}(e,r),wb(e)&&db(e,r),k=wb(e)?e.C.get(s):new Map,_=mb(e,r,k,n,i,s),R=_.segments,x=_.bandwidth,P=N=M=D=C=null,!(R.length>0&&v)){t.A(2);break}return E(t,function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v;return L(function(b){if(1==b.g)return n=tu(e.g.hls.mediaPlaylistFullMimeType),t.length?(r=bb(e,t),i=r.segment,a=r.segmentIndex,s=i.P(),(o=kd(s[0]))&&(l=xb.get(o))?b.return(tu(l)):E(b,Promise.all([Hv(e,i.ba,0),Hv(e,i,a)]),2)):b.return(n);if(u=b.h,d=u[1].mimeType,c=u[0].data,h=u[1].data,f="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),p=["audio/mp4","video/mp4","video/iso.segment"],!(m=i.ba||p.includes(d))&&_o(Ne(h))){var T=h,S=e.g.disableAudio,w=e.g.disableVideo,A=e.g.disableText,I=Ne(T),k=(new wo).parse(I),_=k.Vd();I=k.Jg();var R=[],x=!1,C=!1;if(!S)switch(_.audio){case"aac":case"aac-loas":k.ub().length&&(R.push("mp4a.40.2"),x=!0);break;case"mp3":k.ub().length&&(R.push("mp4a.40.34"),x=!0);break;case"ac3":k.ub().length&&(R.push("ac-3"),x=!0);break;case"ec3":k.ub().length&&(R.push("ec-3"),x=!0);break;case"opus":k.ub().length&&(R.push("opus"),x=!0)}if(!w)switch(_.video){case"avc":I.codec?R.push(I.codec):R.push("avc1.42E01E"),C=!0;break;case"hvc":I.codec?R.push(I.codec):R.push("hvc1.1.6.L93.90"),C=!0;break;case"av1":R.push("av01.0.01M.08"),C=!0}if(R.length){if(S=x&&!C,w=new Map,C&&!A){for((A=new St("video/mp2t")).xf(T),C=(T=g(A.Vf())).next();!C.done;C=T.next())C=C.value,w.set(C,C);A.Nd()}I={type:S?"audio":"video",mimeType:"video/mp2t",codecs:R.join(", "),language:null,height:I.height,width:I.width,channelCount:null,sampleRate:null,closedCaptions:w,ve:null,colorGamut:null,frameRate:I.frameRate}}else I=null;if(y=I)return b.return(y)}else if((m||f.includes(o))&&(v=nu(c,h,e.g.disableText)))return b.return(v);return d?b.return(tu(d)):b.return(n)})}(e,R),3);case 3:O=t.h,s!=O.type&&wb(e)&&(e.C.set(O.type,e.C.get(s)),e.C.set(s,new Map)),s=O.type,o=O.language,d=O.channelCount,p=O.sampleRate,e.g.disableText||(c=O.closedCaptions),D=O.height,C=O.width,M=O.ve,N=O.colorGamut,P=O.frameRate,b&&(y=O.mimeType,a=O.codecs);case 2:if(y){t.A(4);break}return E(t,function(e,t,n,r){var i,a,s,o,l,u,d,c,h,f,g,p,m;return L(function(y){switch(y.g){case 1:return i=$i,a=bb(e,r),2==(s=a.segment).status?y.return(vb(t)):(l=s.P(),(u=kd(l[0]))&&(d=Nb.get(t),(c=d.get(u))||(c=xb.get(u)))?y.return(c):(o=yb(t,n))?y.return(o):(f=1,g=qi(l,e.g.retryParameters),S(y,2),g.method="HEAD",E(y,Ib(e,g,i,{type:f}).promise,4)));case 4:p=y.h,h=p.headers["content-type"],A(y,3);break;case 2:if(!(m=I(y))||1002!=m.code&&1001!=m.code){y.A(3);break}return g.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(g.headers.Range="bytes=0-0"),E(y,Ib(e,g,i,{type:f}).promise,6);case 6:p=y.h,h=p.headers["content-type"];case 3:if(!h){y.A(7);break}if("application/octet-stream"!=(o=h.toLowerCase().split(";")[0])){y.A(8);break}if(p.data.byteLength){y.A(9);break}return g.method="GET",E(y,Ib(e,g,i,{type:f}).promise,10);case 10:p=y.h;case 9:_o(Ne(p.data))&&(o="video/mp2t");case 8:if("application/octet-stream"!=o)return y.return(o);case 7:return y.return(vb(t))}})}(e,s,a,R),5);case 5:y=t.h,s!=ot||a||"application/mp4"!=y||!R[0]||R[0].ba||(y="text/vtt");case 4:return E(t,ob(e,r,y,i,n),6);case 6:if(F=t.h,U=F.drmInfos,z=F.keyIds,B=F.encrypted,j=F.Lh,B&&!U.length&&!j)throw new Ue(2,4,4026);return(q=sb(e,a,s,o,l,u,d,c,h,f,p,m)).encrypted=B&&!j,q.drmInfos=U,q.keyIds=z,q.mimeType=y,x&&(q.bandwidth=x),$v(q),"video"==s&&(C||D||M||N)&&Eb(q,C,D,P,M,null,N),wb(e)&&db(e,r),G=R[0].startTime,H=R[R.length-1],V=H.endTime,K=new Cl(R),q.segmentIndex=K,Y=!!($=Sv(r.ea,"EXT-X-SERVER-CONTROL"))&&null!=pv($,"CAN-SKIP-UNTIL"),W=!!$&&null!=pv($,"CAN-BLOCK-RELOAD"),X=wv(r.ea,"EXT-X-MEDIA-SEQUENCE",0),Q=ab(X,R),J=Q.Qb,Z=Q.Rb,t.return({stream:q,type:s,Af:[],P:i,Wc:G,Lc:V,Se:Y,Re:W,Yd:!1,og:-1,Qb:J,Rb:Z,mf:k})}})}function ab(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Qb:++e,Rb:n};var r=(t=t[t.length-1]).g;return t.g.length?(n=r.length-1,r[r.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.o&&(n=0),{Qb:e,Rb:n})}function sb(e,t,n,r,i,a,s,o,l,u,d,c){var h=yb(n,t)||vb(n),f=[];if(l)for(var p=(l=g(l.split(","))).next();!p.done;p=l.next())f.push(p.value);return l=void 0,p=null,n==ot?l=f.includes("public.accessibility.transcribes-spoken-dialog")&&f.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":f.includes("public.accessibility.describes-video")&&(p="visually impaired"),f.length||"subtitle"!==l||f.push("subtitle"),$v(e={id:e.G++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:h,codecs:t,kind:n==ot?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Cr(r||"und"),originalLanguage:r,label:a,type:n,primary:i,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:f,forced:u,channelsCount:s,audioSamplingRate:d,spatialAudio:c,closedCaptions:o,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:p,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}),e}function ob(e,t,n,r,i){var a,s,o,l,u,d,c,h,f,p,m,y,v,b,T,S,w,A,I,k,_,R,x,C,D,M,N,P,O;return L(function(L){switch(L.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments)for(s=g(t.segments),o=s.next();!o.done;o=s.next())if(l=o.value,u=Ev(l.ea,"EXT-X-KEY"),d=null,u.length)for(d=hb(e,t,l.ea,r,i),c=g(u),h=c.next();!h.done;h=c.next())f=h.value,a.set(f,d);m=p=!1,y=[],v=new Set,b=g(a),T=b.next();case 2:if(T.done){L.A(4);break}if(S=T.value,w=g(S),A=w.next().value,I=w.next().value,_=I,"NONE"==(R=yv(k=A,"METHOD"))){L.A(3);break}if(p=!0,x=mv(k,"KEYFORMAT")||"identity",C=null,kb(R)){m=!0,L.A(3);break}if("identity"==x)return E(L,_b(e,k,n,r,_,i),11);if(!(D=e.uc.get(x))){M=null,L.A(9);break}return E(L,D(k,n,_),10);case 10:M=L.h;case 9:C=M,L.A(6);break;case 11:C=L.h;case 6:if(C){if(C.keyIds)for(N=g(C.keyIds),P=N.next();!P.done;P=N.next())O=P.value,v.add(O);y.push(C)}case 3:T=b.next(),L.A(2);break;case 4:return L.return({drmInfos:y,keyIds:v,encrypted:p,Lh:m})}})}function lb(t,n,r,i,a){if(!e.crypto||!e.crypto.subtle)throw K("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Ue(2,4,4042);var s=0,o=mv(n,"IV","");if(o){var l=Je(o.substr(2));if(16!=l.byteLength)throw new Ue(2,4,4048)}else s=wv(r.ea,"EXT-X-MEDIA-SEQUENCE",0);var u=Av(i(),yv(n,"URI"),a),d=u.sort().join("");if(r=n.toString()+"-"+s+"-"+d,!t.va.has(r)){var c={bitsKey:128,blockCipherMode:"CBC",iv:l,firstMediaSequenceNumber:s};switch(yv(n,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var n,r,i,a;return L(function(s){if(1==s.g)return t.O.has(d)||(n=qi(u,t.g.retryParameters),r=Ib(t,n,6).promise,t.O.set(d,r)),E(s,t.O.get(d),2);if(3!=s.g){if(!(i=s.h).data||i.data.byteLength!=c.bitsKey/8)throw new Ue(2,4,4049);return a={name:"CTR"==c.blockCipherMode?"AES-CTR":"AES-CBC",length:c.bitsKey},E(s,e.crypto.subtle.importKey("raw",i.data,a,!0,["decrypt"]),3)}c.cryptoKey=s.h,c.fetchKey=void 0,T(s)})},t.va.set(r,c)}return t.va.get(r)}function ub(e,t){null==e.u&&(t=Sv(t.ea,"EXT-X-START"))&&(e.u=Number(yv(t,"TIME-OFFSET")))}function db(e,t){var n=1/0,r=t.segments;if(r.length)for(var i=r.length-1;i>=0;){var a=Sv(r[i].ea,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}i--}if(!(r=Sv(t.ea,"EXT-X-TARGETDURATION")))throw new Ue(2,4,4024,"EXT-X-TARGETDURATION");r=Number(r.value),(i=Sv(t.ea,"EXT-X-PART-INF"))&&(e.T=Number(yv(i,"PART-TARGET"))),t=Sv(t.ea,"EXT-X-SERVER-CONTROL"),e.oa&&e.T?(e.o=e.xc?5*e.T<=n?Math.min(e.T,e.o):Math.min(n,e.o):Math.min(e.T,e.o),e.ab=t?Number(yv(t,"PART-HOLD-BACK")):0):(e.o=Math.min(n,e.o),n=t?pv(t,"HOLD-BACK"):null,e.Sa=n?Number(n.value):0),e.ib=Math.max(r,e.ib)}function cb(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.ab)n=e.ab;else if(e.Sa)n=e.Sa;else for(var r=t.segments.length,i=r-Math.min(r,e.g.hls.liveSegmentsDelay);i<r;i++){var a=Sv(t.segments[i].ea,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.ib}e.u&&e.u<0&&(n=Math.min(-e.u,n),e.u+=n),e.l.Qi(0),e.l.nh(n),e.l.cd(!1)}function hb(e,t,n,r,i){var a=Sv(n,"EXT-X-MAP");if(!a)return null;var s=yv(a,"URI"),o=Av(r(),s,i);if(s=[o.toString(),mv(a,"BYTERANGE","")].join("-"),!e.Da.has(s)){for(var l=void 0,u=null,d=!1,c=(n=g(n)).next();!c.done;c=n.next())"EXT-X-KEY"==(c=c.value).name?kb(d=yv(c,"METHOD"))&&c.id<a.id?(d=!1,l=lb(e,c,t,r,i)):d="NONE"!=d:"EXT-X-BYTERANGE"==c.name&&c.id<a.id&&(u=c);t=function(e,t,n,r,i){var a=0,s=null;return!(t=mv(t,"BYTERANGE"))&&n&&(t=n.value),t&&(a=t.split("@"),s=Number(a[0]),a=Number(a[1]),s=a+s-1,r&&(n=s+1-a)%16&&(s+=16-n%16)),new Os(function(){return e},a,s,null,null,null,r,i)}(o,a,u,l,d),e.Da.set(s,t)}return e.Da.get(s)}function fb(t,n,r,i,a,s,o,l,u,d){var c=i.ea,h=Sv(c,"EXTINF"),f=0,p=0,m=null;i.vc.length&&(t.m.isLowLatency=!0);var y=null;if(r&&r.h)y=r.h+r.endTime-r.startTime;else if(!t.g.hls.ignoreManifestProgramDateTime){var v=Sv(c,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(y=nn(v.value),t.kb=!0)}var b=js;if(Sv(c,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!h){if(0==i.vc.length)throw new Ue(2,4,4024,"EXTINF");if(!t.oa)return null}var E=[];v=!1;var T=null,S=!1,w=!1;if(t.oa&&i.vc.length){f=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var A=y,I={},k=0;k<i.vc.length;I={Qf:void 0,ke:void 0},k++){var _=i.vc[k],R=0==k?r:E[E.length-1],x=0==k?a:R.endTime,C=Number(mv(_,"DURATION"))||t.T;if(C){var D=x+C,L=0,M=null;if("EXT-X-PRELOAD-HINT"==_.name?(L=(L=mv(_,"BYTERANGE-START"))?Number(L):0,(R=mv(_,"BYTERANGE-LENGTH"))?M=L+Number(R)-1:L&&(M=Number.MAX_SAFE_INTEGER)):(L=(M=g(gb(R,L=mv(_,"BYTERANGE")))).next().value,M=M.next().value),I.ke=mv(_,"URI"),I.ke){R=js,"YES"==mv(_,"GAP")&&(t.m.gapCount++,R=2,S=!0),I.Qf=null;var N=function(e){return function(){return null==e.Qf&&(e.Qf=Av(l(),e.ke,s)),e.Qf}}(I);f&&L>=0&&null!=M&&(T=N,v=!0),x=new Us(x,D,N,L,M,n,0,0,1/0,[],"",null,A,R,d),"EXT-X-PRELOAD-HINT"==_.name&&(x.Qg(),w=!0),"YES"!=mv(_,"INDEPENDENT")&&k>0&&x.wd(),(_=u)||(E.length&&E[0].mimeType?_=E[0].mimeType:I.ke&&(I=kd(I.ke),_=Nb.get(o).get(I)||null)),_&&(x.mimeType=_,Pb.has(_)&&(x.ba=null)),E.push(x),A&&(A+=C)}}}}if(h){if(0==(h=Number(h.value.split(",")[0])))return null;f=a+h}else{if(!E.length)return null;f=E[E.length-1].endTime}v&&(S||0!=E[0].startByte?(v=!1,T=null):E=[]),(h=Sv(c,"EXT-X-BYTERANGE"))?(p=(m=g(gb(r,h.value))).next().value,m=m.next().value):E.length&&(p=E[0].startByte,m=E[E.length-1].endByte),r="",h=null,"image"==o&&(r="1x1",o=Sv(c,"EXT-X-TILES"))&&(r=yv(o,"LAYOUT"),(o=mv(o,"DURATION"))&&(h=Number(o)));var P=null;return n=new Us(a,f,function(){return T?T():(null==P&&(P=Av(l(),i.g,s)),P||[])},p,m,n,0,0,1/0,E,r,h,y,b,d,E.length>0&&!!i.g),u&&(n.mimeType=u,Pb.has(u)&&(n.ba=null)),v&&(t.xc=!0,n.oi(),w&&n.Qg()),n}function gb(e,t){var n=0,r=null;return t&&(n=t.split("@"),t=Number(n[0]),r=(n=n[1]?Number(n[1]):e.endByte+1)+t-1),[n,r]}function pb(e,t,n,r,i){if("video"==n||"audio"==n){var a=e.l.m;if(a&&!rb(e,n))for(t=(t=Ev(t,"EXT-X-DATERANGE")).filter(function(e){return null!=pv(e,"START-DATE")}).sort(function(e,t){return(e=yv(e,"START-DATE"))<(t=yv(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var s=t[n];try{var o=nn(yv(s,"START-DATE"));if(!isNaN(o)){var l=Math.max(0,o-a),u=null,d=mv(s,"END-DATE");if(d){var c=nn(d);if(!isNaN(c)&&(u=c-a)<0)continue}if(null==u){var h=mv(s,"DURATION")||mv(s,"PLANNED-DURATION");if(h){var f=parseFloat(h);if(isNaN(f)||(u=l+f),o-a+f<0)continue}}var p=mv(s,"CLASS")||"com.apple.quicktime.HLS",m="YES"==mv(s,"END-ON-NEXT");if(null==u&&m){for(var y=n+1;y<t.length;y++)if(p==(mv(t[y],"CLASS")||"com.apple.quicktime.HLS")){var v=nn(yv(t[y],"START-DATE"));if(!isNaN(v)&&v&&v>o){u=Math.max(0,v-a);break}}if(null==u)continue}y=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var b=[],E=g(s.attributes),T=E.next();!T.done;T=E.next()){var S=T.value;if(!y.includes(S.name)){var w=kv(S.value,r);"X-ASSET-URI"!=S.name&&"X-ASSET-LIST"!=S.name||(w=Av(i(),S.value,r)[0]),b.push({key:S.name,description:"",data:w,mimeType:null,pictureType:null})}}b.length>1&&e.h.onMetadata(p,l,u,b)}}catch(A){}}}}function mb(e,t,n,r,i,a){function s(e){if(!(e=kd(e)))return null;var t=Nb.get(a).get(e);return t||(t=xb.get(e)),t}var o=t.segments,l=null,u=null,d=null,c=null,h=void 0,f=wv(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),p=wv(t.ea,"EXT-X-MEDIA-SEQUENCE",0),m=Sv(t.ea,"EXT-X-SKIP"),y=m?Number(mv(m,"SKIPPED-SEGMENTS")):0,v=p+y,b=0;wb(e)&&n.has(v)&&(b=n.get(v)),0===b&&e.Fa==Ub&&n.size>0&&!n.has(v)&&null!=e.l.i&&(b=e.l.Hb());var E=[],T=null;m=[];for(var S=0;S<o.length;S++){var w=o[S];(v=Sv(w.ea,"EXT-X-MAP"))&&v.id!==u&&(l=hb(e,t,w.ea,i,r),u=v.id);var A="";(v=w.g)&&(A=kd(v)),A!==c&&(d=s(v),c=A),A=0==S?b:T.endTime,v=p+y+S,Sv(w.ea,"EXT-X-DISCONTINUITY")&&(f++,T&&T.ba&&(T.ba.g=A));for(var I=g(w.ea),k=I.next();!k.done;k=I.next())"EXT-X-KEY"==(k=k.value).name&&(h=kb(yv(k,"METHOD"))?lb(e,k,t,i,r):void 0);if(n.set(v,A),A=fb(e,l,T,w,A,r,a,i,d,h)){if((T=wv(w.ea,"EXT-X-BITRATE"))?(m.push({bitrate:T,duration:A.endTime-A.startTime}),A.bandwidth=T):A.endByte?(w=zs(A))&&(w=8*w/(T=A.endTime-A.startTime)/1e3,m.push({bitrate:w,duration:T}),A.bandwidth=w):m.length&&((T=m.pop()).duration+=A.endTime-A.startTime,m.push(T),A.bandwidth=T.bitrate),A.bandwidth)for(w=(T=g(A.g)).next();!w.done;w=T.next())w.value.bandwidth=A.bandwidth;T=A,A.i=f,rb(e,a)&&null!=e.N&&v<e.N||E.push(A)}}if(t=void 0,m.length&&(t=m.reduce(function(e,t){return e+t.duration},0),t=Math.round(m.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),m=E.some(function(e){return null!=e.h}))for(n={},r=0;r<E.length;n={We:void 0,Ve:void 0,Oe:void 0,Zc:void 0,Ne:void 0},r++)if(n.Zc=E[r],null==n.Zc.h)for(n.Ve=0,n.We=r,i=function(e){return function(){var t=E[e.We];if(t){if(null!=t.h)return t.h+e.Ve;e.Ve-=t.endTime-t.startTime,e.We+=1}return null}}(n),n.Ne=0,n.Oe=r,o=function(e){return function(){var t=E[e.Oe];if(t){if(t!=e.Zc&&(e.Ne+=t.endTime-t.startTime),null!=t.h)return t.h+e.Ne;--e.Oe}return null}}(n);null==n.Zc.h;)n.Zc.h=o(),null==n.Zc.h&&(n.Zc.h=i());if(m)for(r=(n=g(E)).next();!r.done;r=n.next())for(r=(i=r.value).h,o=(i=g(i.g)).next();!o.done;o=i.next())(o=o.value).h=r,r+=o.endTime-o.startTime;if(n=e.ma,m&&n!=1/0&&!rb(e,a))for(m=(e=g(E)).next();!m.done;m=e.next())m.value.yh(n);return{segments:E,bandwidth:t}}function yb(e,t){if(e==ot){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function vb(e){return e==ot?"text/vtt":Nb.get(e).get("mp4")}function bb(e,t){for(var n=t[e=wb(e)?Math.trunc((t.length-1)/2):0];2==n.Jc()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function Eb(e,t,n,r,i,a,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(r)||void 0,e.hdr=i||void 0,e.videoLayout=a||void 0,e.colorGamut=s||void 0)}function Tb(e,t,n){return Ib(e,qi(t,e.g.retryParameters),0,{type:n?2:3})}function Sb(e){var t,n,r,i,a,s;return L(function(o){switch(o.g){case 1:return e.h?(S(o,2),t=Date.now(),E(o,e.update(),4)):o.return();case 4:n=Date.now(),wb(e)&&(r=(n-t)/1e3,e.Zb.sample(1,r),i=e.g.updatePeriod>0?e.g.updatePeriod:e.o,a=Math.max(0,i-q(e.Zb)),e.F.ia(a)),A(o,3);break;case 2:if(s=I(o),!e.h)return o.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),o.return();s.severity=1,e.h.onError(s),e.F.ia(.1);case 3:if(!e.h)return o.return();e.h.onManifestUpdated(),T(o)}})}function wb(e){return e.Fa!=Ob}function Ab(e,t){e.Fa=t,e.l&&e.l.cd(!wb(e)),wb(e)||e.F.stop()}function Ib(e,t,n,r){if(!e.$)throw new Ue(2,7,7001);return r||(r={}),r.isPreload=e.ac(),t=e.h.networkingEngine.request(n,t,r),Ui(e.$,t),t}function kb(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function _b(t,n,r,i,a,s){var o,l,u,d,c,h,f,g,p,m,y;return L(function(v){switch(v.g){case 1:if("video/mp2t"==r)throw new Ue(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Ue(2,4,4041);if(o=yv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(o))return v.return(null);if((l=Av(i(),yv(n,"URI"),s))[0].startsWith("data:text/plain;base64,")){u=Ze(Qe(l[0].split("data:text/plain;base64,").pop())),v.A(2);break}return d=l.sort().join(""),t.xa.has(d)||(c=qi(l,t.g.retryParameters),h=Ib(t,c,6).promise,t.xa.set(d,h)),E(v,t.xa.get(d),3);case 3:f=v.h,u=Ze(f.data);case 2:if(g="00000000000000000000000000000000",!a){v.A(4);break}return E(v,Rb(t,a),5);case 5:(p=v.h)&&(g=p);case 4:return(m=new Map).set(g,u),y="cenc","SAMPLE-AES"==o&&(y="cbcs"),v.return(rt(m,y))}})}function Rb(e,t){var n,r,i;return L(function(a){return 1==a.g?(n=null,e.ya.has(t)?(n=e.ya.get(t),a.A(2)):(r=au(t.P(),t.Ic(),t.Gc(),e.g.retryParameters),E(a,Ib(e,r,$i,{type:0}).promise,3))):(2!=a.g&&(i=a.h,t.pe(i.data),n=function(e){var t=null;return(new ia).box("moov",aa).box("trak",aa).box("mdia",aa).box("minf",aa).box("stbl",aa).S("stsd",sa).box("encv",oa).box("enca",la).box("sinf",aa).box("schi",aa).S("tenc",function(e){(e=e.reader).Y(),e.Y(),e.Y(),e.Y(),e=e.Tb(16,!1),t=Ze(e)}).parse(e,!0),t}(i.data),e.ya.set(t,n)),a.return(n))})}B("shaka.net.DataUriPlugin",Ov),Ov.parse=Fv,Bi("data",Fv),(r=zv.prototype).configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.ac=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.W()&&this.F.Jb()},r.start=function(e,t){var n,r=this;return L(function(i){return 1==i.g?(r.h=t,r.oa=t.isLowLatencyMode(),E(i,Tb(r,[e]).promise,2)):3!=i.g?(n=i.h,r.H=n.uri,E(i,function(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,m,y,v,b,w,A,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H,V,K,$,Y,W,X,J;return L(function(Z){switch(Z.g){case 1:return n=lt,r=Rv(e.Ta,t),i=Ev(r.ea,"EXT-X-DEFINE"),a=[],s=[],o=[],e.l=new ol(null,0),e.l.cd(!0),l=function(){return[e.H]},u=null,d=new Map,1==r.type?(e.R=!1,B=Ev(r.ea,"EXT-X-DEFINE"),d=Kv(e,B,e.H),u=n.Aa,j="",q=new Map,E(Z,ib(e,e.G++,d,r,l,"",u,j,!0,"Media Playlist",null,q,null,!1,null,!1),7)):(function(e,t){for(var n=new pe(e.H).g,r=(t=g(t)).next();!r.done;r=t.next()){var i=r.value;r=mv(i,"NAME");var a=mv(i,"VALUE");i=mv(i,"QUERYPARAM"),r&&a&&(e.B.has(r)||e.B.set(r,a)),i&&(r=n.get(i)[0])&&!e.B.has(r)&&e.B.set(i,r)}}(e,i),c=Ev(r.ea,"EXT-X-MEDIA"),h=Ev(r.ea,"EXT-X-STREAM-INF"),f=Ev(r.ea,"EXT-X-IMAGE-STREAM-INF"),m=Ev(r.ea,"EXT-X-I-FRAME-STREAM-INF"),y=Ev(r.ea,"EXT-X-SESSION-KEY"),v=Ev(r.ea,"EXT-X-SESSION-DATA"),b=Ev(r.ea,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=mv(r,"DATA-ID");n=mv(r,"URI");var a=mv(r,"LANGUAGE");r=mv(r,"VALUE"),i=(new Map).set("id",i),n&&i.set("uri",Av([e.H],n,e.B)[0]),a&&i.set("language",a),r&&i.set("value",r),n=new Mi("sessiondata",i),e.h&&e.h.onEvent(n)}}(e,v),E(Z,function(e,t){var n,r,i,a,s,o;return L(function(l){if(!e.h||!e.g)return l.return();for(r=g(t),i=r.next();!i.done;i=r.next())if(a=i.value,s=mv(a,"PATHWAY-ID"),o=mv(a,"SERVER-URI"),s&&o){e.j=new Dm(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=s,n=Lm(e.j,o);break}return E(l,n,0)})}(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(w=[],A=g(h),k=A.next(),_={};!k.done;_={Yi:void 0},k=A.next())R=k.value,(x=mv(R,"SUPPLEMENTAL-CODECS"))&&(_.Yi=x.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),C=R.attributes.map(function(e){return function(t){var n=t.name,r=t.value;return"CODECS"==n&&(r=e.Yi.join(","),(t=t.value.split(",")).length>1&&(t=at("audio",t))&&(r+=","+t)),new bv(n,r)}}(_)),w.push(new fv(R.id,R.name,C,null)));for(h.push.apply(h,p(w)),D=[],M=g(m),N=M.next(),P={};!N.done;P={Zi:void 0},N=M.next())O=N.value,(F=mv(O,"SUPPLEMENTAL-CODECS"))&&(P.Zi=F.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),U=O.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Zi.join(",")),new bv(n,t)}}(P)),D.push(new fv(O.id,O.name,U,null)));m.push.apply(m,p(D))}return function(e,t){for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=mv(r,"AUDIO");n=mv(r,"VIDEO");var a=mv(r,"SUBTITLES");if(r=Wv(e,r),a){var s=at(ot,r);e.K.set(a,s),Q(r,s)}i&&((a=at("audio",r))||(a=e.g.hls.defaultAudioCodec),e.K.set(i,a)),n&&((i=at("video",r))||(i=e.g.hls.defaultVideoCodec),e.K.set(n,i))}}(e,h),function(e,t){t=Tv(t,"CLOSED-CAPTIONS"),e.R=0==t.length;for(var n=(t=g(t)).next();!n.done;n=t.next()){var r=n.value,i=mv(r,"LANGUAGE");n=Cr(i||"und"),i||(i=mv(r,"NAME"))&&(n=i),i=yv(r,"GROUP-ID"),r=yv(r,"INSTREAM-ID").replace("SERVICE","svc"),e.J.get(i)||e.J.set(i,new Map),e.J.get(i).set(r,n)}}(e,c),z=function(e,t){return t.map(function(t){return"video"!==(t=Jv(e,t)).stream.type?null:t.stream}).filter(function(e){return e})}(e,m),E(Z,function(e,t,n,r,i,a,s){var o,l,u,d,c,h,f,m,y,v,b,T,S,w,A,I,k,_,R,x,C,D,M,N,P,O,F,U,z,B,j,q,G,H,V,K;return L(function(L){switch(L.g){case 1:if(o=[],l=new Set,e.g.ignoreDrmInfo||!(n.length>0)){L.A(2);break}u=g(n),d=u.next();case 3:if(d.done){L.A(2);break}if(c=d.value,h=yv(c,"METHOD"),f=mv(c,"KEYFORMAT")||"identity",m=null,"NONE"==h){L.A(4);break}if(kb(h)){y=Av(i(),yv(c,"URI"),a),v=y.sort().join(""),e.O.has(v)||(b=qi(y,e.g.retryParameters),T=Ib(e,b,6).promise,e.O.set(v,T)),L.A(4);break}if("identity"==f)return E(L,_b(e,c,"",i,null,a),12);if(!(S=e.uc.get(f))){w=null,L.A(10);break}return E(L,S(c,"",null),11);case 11:w=L.h;case 10:m=w,L.A(6);break;case 12:m=L.h;case 6:if(m){if(m.keyIds)for(A=g(m.keyIds),I=A.next();!I.done;I=A.next())k=I.value,l.add(k);o.push(m)}case 4:d=u.next(),L.A(3);break;case 2:for(_={},R=g(t),x=R.next();!x.done;x=R.next())C=x.value,D=gv(C,!e.j),_[D]?_[D].push(C):_[D]=[C];for(N in M=[],_)P=_[N],O=P[0],F=mv(O,"FRAME-RATE"),U=Number(mv(O,"AVERAGE-BANDWIDTH"))||Number(yv(O,"BANDWIDTH")),z=mv(O,"RESOLUTION"),B=g(z?z.split("x"):[null,null]),j=B.next().value,q=B.next().value,G=mv(O,"VIDEO-RANGE"),(H=mv(O,"REQ-VIDEO-LAYOUT"))&&H.includes(",")&&(V=H.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),H=V[0]),H=H||"CH-MONO",K=Yv(e,P,r),M.push.apply(M,p(Xv(e,K.audio,K.video,U,j,q,F,G,H,o,l,s)));return L.return(M.filter(function(e){return null!=e}))}})}(e,h,y,c,l,e.B,z),5);case 5:return a=Z.h,s=function(e,t){var n=Tv(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return Qv(e,[t],new Map).stream}catch(o){if(e.g.hls.ignoreTextStreamFailures)return null;throw o}});for(var r=(n=g(n)).next();!r.done;r=n.next()){var i=yv(r.value,"GROUP-ID");if((r=e.K.get(i))&&(i=e.M.get(i)))for(var a=(i=g(i)).next();!a.done;a=i.next())(a=a.value).stream.codecs=r,a.stream.mimeType=yb(ot,r)||vb(ot),$v(a.stream)}return t.filter(function(e){return e})}(e,c),E(Z,function(e,t,n){var r,i;return L(function(a){return 1==a.g?(r=t.map(function(t){var n,r;return L(function(i){if(1==i.g)return e.g.disableThumbnails?i.return(null):(S(i,2),E(i,function(e,t){var n,r,i,a,s,o,l,u,d,c;return L(function(h){return 1==h.g?(n=yv(t,"URI"),r=mv(t,"CODECS","jpeg")||"",e.i.has(n)?h.return(e.i.get(n)):(i=mv(t,"LANGUAGE"),a=mv(t,"NAME"),s=mv(t,"CHARACTERISTICS"),o=Zv(e,e.G++,[n],r,"image",i,!1,a,null,null,s,!1,null,!1),(l=mv(t,"RESOLUTION"))?E(h,o.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(u=Dl(o.stream.segmentIndex),(d=u.tilesLayout)&&(o.stream.width=Number(l.split("x")[0])*Number(d.split("x")[0]),o.stream.height=Number(l.split("x")[1])*Number(d.split("x")[1])),o.stream.closeSegmentIndex()),(c=mv(t,"BANDWIDTH"))&&(o.stream.bandwidth=Number(c)),e.i.set(n,o),h.return(o))})}(e,t),4));if(2!=i.g)return n=i.h,i.return(n.stream);if(r=I(i),e.g.hls.ignoreImageStreamFailures)return i.return(null);throw r})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=Jv(e,t);return"image"!==n.stream.type?null:n.stream}catch(l){if(e.g.hls.ignoreImageStreamFailures)return null;throw l}})),E(a,Promise.all(r),2)):(i=a.h,a.return(i.filter(function(e){return e})))})}(e,f,m),6);case 6:o=Z.h,Z.A(3);break;case 7:G=Z.h,e.i.set(e.H,G),G.stream&&(H=jl(G.stream),G.stream.segmentIndex.Fb(function(e){e.ba&&(e.ba.xd=H)})),u=G.stream.type,V=!0,(e.g.disableAudio&&"audio"==G.type||e.g.disableVideo&&"video"==G.type&&!G.stream.codecs.includes(","))&&(V=!1),V&&a.push({id:0,language:Cr(j||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==G.type?G.stream:null,video:"video"==G.type?G.stream:null,bandwidth:G.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Ue(2,7,7001);if(ub(e,r),1==r.type&&(wb(e)&&(cb(e,r),K=e.o,e.F.ia(K)),$=Array.from(e.i.values()),nb(e,$),Vv(e),pb(e,r.ea,u,d,l)),e.m={presentationTimeline:e.l,variants:a,textStreams:s,imageStreams:o,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.aa||!e.g.hls.disableCodecGuessing){Z.A(8);break}for(Y=[],W=g(e.m.variants),X=W.next();!X.done;X=W.next())(J=X.value).audio&&""===J.audio.codecs&&Y.push(J.audio.createSegmentIndex()),J.video&&""===J.video.codecs&&Y.push(J.video.createSegmentIndex());return E(Z,Promise.all(Y),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),T(Z)}})}(r,n.data),3)):i.return(r.m)})},r.stop=function(){this.F&&(this.F.stop(),this.F=null);var e=[];return this.$&&(e.push(this.$.destroy()),this.$=null),this.g=this.h=null,this.ob.clear(),this.m=null,this.i.clear(),this.M.clear(),this.K.clear(),this.B.clear(),this.Da.clear(),this.va.clear(),this.O.clear(),this.xa.clear(),this.ya.clear(),this.I.clear(),this.j&&this.j.destroy(),this.V&&(this.V.release(),this.V=null),Promise.all(e)},r.update=function(){var e,t,n,r,i,a,s,o,l,u,d=this;return L(function(c){if(1==c.g){if(!wb(d))return c.return();for(e=[],t=Array.from(d.i.values()),d.o=1/0,d.m.gapCount=0,n=t.filter(function(e){return!e.stream.isAudioMuxedInVideo&&e.stream.segmentIndex}),r=g(n),i=r.next();!i.done;i=r.next())a=i.value,e.push(jv(d,a));return E(c,Promise.all(e),2)}for(tb(d,n.map(function(e){return e.stream})),s=n.some(function(e){return 0==e.Yd}),n.length&&!s&&(Ab(d,Ob),Vv(d)),s&&Vv(d),o=g(n),l=o.next();!l.done;l=o.next())(u=l.value).stream.isAudioMuxedInVideo||!u.stream.segmentIndex||Dl(u.stream.segmentIndex)||d.h.disableStream(u.stream);T(c)})},r.onExpirationUpdated=function(){},r.onInitialVariantChosen=function(){},r.banLocation=function(e){this.j&&this.j.banLocation(e)},r.setMediaElement=function(e){this.X=e},B("shaka.hls.HlsParser",zv);var xb=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),Cb=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Db=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),Lb=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Mb=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Nb=(new Map).set("audio",Cb).set("video",Db).set("text",Lb).set("image",Mb),Pb=new Set(["video/mp2t"].concat(p(cr))),Ob="VOD",Fb="EVENT",Ub="LIVE";function zb(e){return Wp(e)}Qa("application/x-mpegurl",function(){return new zv}),Qa("application/vnd.apple.mpegurl",function(){return new zv});var Bb=(new Map).set("com.microsoft.playready",zb).set("com.microsoft.playready.recommendation",zb).set("com.microsoft.playready.software",zb).set("com.microsoft.playready.hardware",zb);function jb(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new j(5),this.o=new Tr(function(){!function(e){var t;L(function(n){switch(n.g){case 1:return S(n,2),E(n,qb(e),4);case 4:A(n,3);break;case 2:t=I(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();T(n)}})}(e)}),this.C=new Fi,this.m=new Map,this.B=function(){return!1}}function qb(e){var t,n,r,i,a,s,o;return L(function(l){if(1==l.g)return t=qi(e.l,e.g.retryParameters),n=e.h.networkingEngine,r=Date.now(),i=n.request(0,t,{type:5,isPreload:e.B()}),Ui(e.C,i),E(l,i.promise,2);if(a=l.h,!e.h)return l.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var u=a.uri,d=a.data,c=e.g.mss.manifestPreprocessor;if(c!=td){if(de("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(d=by(d,"SmoothStreamingMedia")))throw new Ue(2,4,4046,u);c(d),d=Ge(d.outerHTML)}var h=jt(d,"SmoothStreamingMedia");if(!h)throw new Ue(2,4,4046,u);if((u=e.g.mss.manifestPreprocessorTXml)!=nd&&u(h),e.i||(e.i=new ol(null,0)),u=Jt(h,"IsLive",dn,!1))throw new Ue(2,4,4047);e.i.cd(!u),c=Jt(h,"TimeScale",ln,1e7),d=Jt(h,"DVRWindowLength",ln),u&&(0===d||isNaN(d))&&(d=1/0);var f,m=Jt(h,"CanSeek",dn,!1);for(0===d&&m&&(d=1/0),m=null,d&&d>0&&(m=d/c),u&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),null==m&&(m=1/0),e.i.Hf(m),d=Jt(h,"Duration",ln,1/0),u||e.i.Ab(d/c),u={variants:[],textStreams:[],timescale:c,duration:d/c},m=Kt(h,"Protection"),c=e.g.mss.keySystemsBySystemId,d=[],f=(m=g(m)).next();!f.done;f=m.next())d=d.concat(Kt(f.value,"ProtectionHeader"));if(d.length){for(m=[],f=0;f<d.length;f++){var y=d[f],v=y.attributes.SystemID.toLowerCase(),b=c[v];if(b){var S;e:{if(S=Yp(y))for(var w=(S=g(Wt(S,"DATA"))).next();!w.done;w=S.next())if(w=Xt(w.value,"KID")){S=Qe($t(w)),S=Ze(S=new Uint8Array([S[3],S[2],S[1],S[0],S[5],S[4],S[7],S[6]].concat(p(S.slice(8)))));break e}S=null}v=nt(b,"cenc",v=[{initData:ma(w=Qe($t(y)),v=Je(v.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:S}]),S&&v.keyIds.add(S),(b=Bb.get(b))&&(v.licenseServerUri=b(y)),m.push(v)}}c=m}else c=[];for(f=c,m=[],c=[],d=[],y=(h=g(h=Kt(h,"StreamIndex"))).next();!y.done;y=h.next()){b=Kt(y=y.value,"QualityLevel"),v=u.timescale,S=u.duration,w=Kt(y,"c");for(var A=[],I=0,k=0;k<w.length;++k){var _=w[k],R=w[k+1],x=Jt(_,"t",ln),C=Jt(_,"d",ln);if(_=Jt(_,"r",sn),!C)break;if(x=null!=x?x:I,(_=_||0)&&_--,_<0)if(R){if(null==(R=Jt(R,"t",ln)))break;if(x>=R)break;_=Math.ceil((R-x)/C)-1}else{if(S==1/0)break;if(x/v>=S)break;_=Math.ceil((S*v-x)/C)-1}for(R=0;R<=_;++R)I=x+C,A.push({start:x/v,end:I/v,Eh:x}),x=I}for(v=A,S=(b=g(b)).next();!S.done;S=b.next())(S=Gb(e,y,S.value,v,f,u))&&("audio"!=S.type||e.g.disableAudio?"video"!=S.type||e.g.disableVideo?S.type!=ot||e.g.disableText||d.push(S):c.push(S):m.push(S))}for(h=[],f=(m=g(m.length>0?m:[null])).next();!f.done;f=m.next())for(f=f.value,A=(y=g(c.length>0?c:[null])).next();!A.done;A=y.next())v=(b=h).push,S=e,w=f,A=A.value,k=0,w&&w.bandwidth&&w.bandwidth>0&&(k+=w.bandwidth),A&&A.bandwidth&&A.bandwidth>0&&(k+=A.bandwidth),S={id:S.u++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!A&&A.primary,audio:w,video:A,bandwidth:k,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v.call(b,S);u.variants=h,u.textStreams=d,e.j?(e.j.variants=u.variants,e.j.textStreams=u.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:u.variants,textStreams:u.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.lf()),Promise.resolve(),s=Date.now(),o=(s-r)/1e3,e.F.sample(1,o),T(l)})}function Gb(e,t,n,r,i,a){var s=t.attributes.Type;if("audio"!==s&&"video"!==s&&"text"!==s)return K("Ignoring unrecognized type:",s),null;var o=t.attributes.Language,l=e.u++,u=Jt(n,"Bitrate",on),d=Jt(n,"MaxWidth",on),c=Jt(n,"MaxHeight",on),h=Jt(n,"Channels",on),f=Jt(n,"SamplingRate",on),p=a.duration;r.length&&(p=r[r.length-1].end-r[0].start);var m=e.i.getDuration();e.i.Ab(Math.min(p,m)),(m=t.attributes.Name)&&(m+=n.attributes.Index),m||(m=String(l));var y={id:l,originalId:m,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:u||0,width:d||void 0,height:c||void 0,kind:"",encrypted:i.length>0,drmInfos:i,keyIds:new Set,language:Cr(o||"und"),originalLanguage:o,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:h,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:p,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((i=t.attributes.Subtype)&&((i=Vb.get(i))&&y.roles.push(i),"main"===i&&(y.primary=!0)),null!==(i=n.attributes.FourCC)&&""!==i||(i=t.attributes.FourCC),!i)if("audio"===s)i="AAC";else if("video"===s)return K('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!Hb.includes(i.toUpperCase()))return K("Codec not supported:",i),null;switch(n=function(e,t,n,r){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=r.channelsCount||2,e=r.audioSamplingRate||44100;var i={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return r=i[e],"AACH"===n?(n=new Uint8Array(4),e=i[2*e],n[0]=40|r>>1,n[1]=r<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|r>>1,n[1]=r<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,s,i,y),y.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return K("Quality unsupported without CodecPrivateData",s),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(i,n);break;case"video":if(!n)return K("Quality unsupported without CodecPrivateData",s),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":y.type=ot,y.mimeType="application/mp4",("TTML"===i||"DFXP"===i)&&(y.codecs="stpp")}return y.fullMimeTypes.add(tr(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var n=e.m.get(y.id);else n=[],"video"==y.type&&(n=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=us(new ls([n={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Bb:n,Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:null,stream:y}])),e.m.set(y.id,n);return n=function(e,t,n,r,i){var a=r.attributes.Url.replace("{bitrate}",String(n.bandwidth));r=[];for(var s=(i=g(i)).next(),o={};!s.done;o={Lf:void 0},s=i.next())o.Lf=s.value,r.push(new Us(o.Lf.start,o.Lf.end,function(t){return function(){return tt(e.l,[a.replace("{start time}",String(t.Lf.Eh))])}}(o),0,null,t,0,0,n.mssPrivateData.duration));return r}(e,new Os(function(){return[]},0,null,jl(y),y.mssPrivateData.timescale,n,null,y.encrypted),y,t,r),y.segmentIndex=new Cl(n),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}(r=jb.prototype).configure=function(e,t){this.g=e,t&&(this.B=t)},r.start=function(e,t){var n=this;return L(function(r){if(1==r.g)return n.l=[e],n.h=t,E(r,qb(n),2);if(!n.h)throw new Ue(2,7,7001);return r.return(n.j)})},r.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.o&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},r.update=function(){var e,t=this;return L(function(n){return 1==n.g?(S(n,2),E(n,qb(t),4)):2!=n.g?A(n,0):(e=I(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())})},r.onExpirationUpdated=function(){},r.onInitialVariantChosen=function(){},r.banLocation=function(){},r.setMediaElement=function(){},B("shaka.mss.MssParser",jb);var Hb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Vb=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function Kb(e,t,n,r,i,a,s){if(n>=200&&n<=299&&202!=n||304==n)return{uri:i||r,originalUri:r,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=qe(t)}catch(o){}throw new Ue(401==n||403==n?2:1,1,1001,r,n,a,e,s,i||r)}function $b(){}function Yb(e,t,n,r,i,a){var s=new Zb;try{Zi(t.headers).forEach(function(e,t){s.append(t,e)})}catch(d){return Ri(new Ue(1,1,1002,e,d,n))}var o=new Qb,l={Ph:!1,cj:!1};if(e=function(e,t,n,r,i,a,s,o,l){var u,d,c,h,f,g,p,m,y,v,b,w,k,_;return L(function(R){switch(R.g){case 1:return u=Xb,d=Jb,h=new ArrayBuffer(0),g=f=0,p={},m=Date.now(),S(R,2),E(R,u(e,r),4);case 4:if(c=R.h,p=function(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}(c.headers),s(p),"HEAD"==r.method){R.A(5);break}return v=(y=c.headers.get("Content-Length"))?parseInt(y,10):0,c.body?(b=c.clone().body.getReader(),new d({start:function(e){function t(){var n,r,i,s;return L(function(u){switch(u.g){case 1:return S(u,2),E(u,b.read(),4);case 4:n=u.h,A(u,3);break;case 2:return I(u),u.return();case 3:if(n.done){u.A(5);break}if(f+=n.value.byteLength,!o){u.A(5);break}return E(u,o(n.value),5);case 5:r=Date.now(),i=f-g,(r-m>100&&i>=l||n.done)&&(s=n.done?0:v-f,a(r-m,i,s),g=f,m=r),n.done?e.close():(e.enqueue(n.value),t()),T(u)}})}t()}}),E(R,c.arrayBuffer(),8)):E(R,c.arrayBuffer(),9);case 8:h=R.h,R.A(5);break;case 9:h=R.h,w=Date.now(),a(w-m,h.byteLength,0);case 5:t.headers.Range&&2==(k=t.headers.Range.replace("bytes=","").split("-").filter(function(e){return e}).map(function(e){return parseInt(e,10)})).length&&h.byteLength!=k[1]-k[0]+1&&K("Payload length does not match range requested bytes",t,c),A(R,3);break;case 2:if(_=I(R),i.Ph)throw new Ue(1,1,7001,e,n);if(i.cj)throw new Ue(1,1,1003,e,n);throw new Ue(1,1,1002,e,_,n);case 3:return R.return(Kb(p,h,c.status,e,c.url,t,n))}})}(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},l,r,i,t.streamDataCallback,a.minBytesForProgressEvents||0),e=new _i(e,function(){return l.Ph=!0,o.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var u=new Tr(function(){l.cj=!0,o.abort()});u.ia(t/1e3),e.finally(function(){u.stop()})}return e}function Wb(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(xA){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}Qa("application/vnd.ms-sstr+xml",function(){return new jb}),B("shaka.net.HttpFetchPlugin",$b),$b.isSupported=Wb,$b.parse=Yb;var Xb=e.fetch,Qb=e.AbortController,Jb=e.ReadableStream,Zb=e.Headers;function eE(){}function tE(e,t,n,r,i,a){var s=new nE,o=Date.now(),l=0;return new _i(new Promise(function(u,d){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials;var c={};for(var h in s.onabort=function(){d(new Ue(1,1,7001,e,n))},s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e=s.getAllResponseHeaders().trim().split("\r\n"),t={},n=(e=g(e)).next();!n.done;n=e.next())t[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");i(c=t)}},s.onload=function(i){var a=s.response;try{r(Date.now()-o,i.loaded-l,0);var h=Kb(c,a,s.status,e,s.responseURL,t,n);u(h)}catch(f){d(f)}},s.onerror=function(t){d(new Ue(1,1,1002,e,t,n))},s.ontimeout=function(){d(new Ue(1,1,1003,e,n))},s.onprogress=function(e){var t=Date.now(),n=a.minBytesForProgressEvents||0,i=e.loaded-l;(t-o>100&&i>=n||e.lengthComputable&&e.loaded==e.total)&&(r(t-o,i,4==s.readyState?0:e.total-e.loaded),l=e.loaded,o=t)},t.headers)try{s.setRequestHeader(h.toLowerCase(),t.headers[h])}catch(f){throw new Ue(1,1,1002,e,f,n)}s.send(t.body)}),function(){return s.abort(),Promise.resolve()})}Wb()&&(Bi("http",Yb,2,!0),Bi("https",Yb,2,!0),Bi("blob",Yb,2,!0)),B("shaka.net.HttpXHRPlugin",eE),eE.parse=tE;var nE=e.XMLHttpRequest;function rE(e,t,n,r,i){this.g=e,this.i=t,this.groupId=n,this.h=r,this.j=i}function iE(e){var t=e.Yb(!1);return t?Xe(t):e.P().map(function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function aE(e,t){return au(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function sE(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function oE(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function lE(e){return 0==e.i?0:e.j/e.i}function uE(e){var t=this;this.u=e,this.i=new Map,this.h=new Xi(function(){return dE(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new sE,this.l=!1}function dE(e){e.l=!0;var t=e.j.map(function(e){return e()});return e.j=[],Promise.all(t)}function cE(e,t,n,r,i,a){Qi(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new Ue(2,9,7001);if(i){var t=Ne(n);for(var s in(t=new pa(t)).data){var o=Number(s);e.m(t.data[o],t.g[o])}}return e.g.close(r,n.byteLength),e.o(lE(e.g),e.g.g),a(n)});e.i.set(t,s)}function hE(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new ki,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function fE(e,t){return new Promise(function(n,r){var i=e.h.openCursor();i.onerror=r,i.onsuccess=function(){var e;return L(function(r){if(1==r.g)return null==i.result?(n(),r.return()):(e=i.result,E(r,t(e.key,e.value,e),2));e.continue(),T(r)})}})}function gE(e){this.h=e,this.g=[]}function pE(e,t){return mE(e,t,"readwrite")}function mE(e,t,n){var r=new hE(n=e.h.transaction([t],n),t);return e.g.push(r),r.promise().then(function(){Q(e.g,r)},function(){Q(e.g,r)}),r}function yE(e,t,n){this.h=new gE(e),this.i=t,this.g=n}function vE(e){return Promise.reject(new Ue(2,9,9011,"Cannot add new value to "+e))}function bE(e,t,n,r){t=(e=pE(e.h,t)).store();for(var i=(n=g(n)).next(),a={};!i.done;a={Pg:void 0},i=n.next())a.Pg=i.value,t.delete(a.Pg).onsuccess=function(e){return function(){return r(e.Pg)}}(a);return e.promise()}function EE(e,t,n){var r,i,a,s,o,l,u;return L(function(d){if(1==d.g){for(r=mE(e.h,t,"readonly"),i=r.store(),a={},s=[],o=g(n),l=o.next(),u={};!l.done;u={Bf:void 0,gf:void 0},l=o.next())u.gf=l.value,u.Bf=i.get(u.gf),u.Bf.onsuccess=function(e){return function(){null==e.Bf.result&&s.push(e.gf),a[e.gf]=e.Bf.result}}(u);return E(d,r.promise(),2)}if(s.length)throw new Ue(2,9,9012,"Could not find values for "+s);return d.return(n.map(function(e){return a[e]}))})}function TE(e){this.g=new gE(e)}function SE(){this.g=new Map}function wE(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){e.hasFixedKeySpace()||t||(t={path:{Pb:n,bb:r},bb:e})})}),t)return t;throw new Ue(2,9,9013,"Could not find a cell that supports add-operations")}function AE(e,t,n){if(!(e=e.g.get(t)))throw new Ue(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Ue(2,9,9013,"Could not find cell with name "+n);return t}function IE(e,t){kE.set(e,t)}Bi("http",tE,1,!0),Bi("https",tE,1,!0),Bi("blob",tE,1,!0),sE.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},uE.prototype.destroy=function(){return this.h.destroy()},uE.prototype.queue=function(e,t,n,r,i){var a=this;Qi(this.h);var s=(this.i.get(e)||Promise.resolve()).then(function(){var e,s,o,l,u,d,c;return L(function(h){if(1==h.g)return E(h,function(e,t){var n,r,i,a;return L(function(s){return 1==s.g?(n=$i,r=e.u.request(n,t),i=function(){return r.abort()},e.j.push(i),E(s,r.promise,2)):(a=s.h,Q(e.j,i),s.return(a.data))})}(a,t),2);if(e=h.h,a.h.g)throw new Ue(2,9,7001);if(r)for(l in s=Ne(e),(o=new pa(s)).data)u=Number(l),d=o.data[u],c=o.g[u],a.m(d,c);return a.g.close(n,e.byteLength),a.o(lE(a.g),a.g.g),h.return(i(e))})});return this.i.set(e,s),s},hE.prototype.abort=function(){var e=this;return L(function(t){if(1==t.g){try{e.i.abort()}catch(n){}return S(t,2),E(t,e.g,4)}if(2!=t.g)return A(t,0);I(t),T(t)})},hE.prototype.store=function(){return this.h},hE.prototype.promise=function(){return this.g},gE.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(r=yE.prototype).destroy=function(){return this.h.destroy()},r.hasFixedKeySpace=function(){return!0},r.addSegments=function(){return vE(this.i)},r.removeSegments=function(e,t){return bE(this,this.i,e,t)},r.getSegments=function(e){var t,n=this;return L(function(r){return 1==r.g?E(r,EE(n,n.i,e),2):(t=r.h,r.return(t.map(function(e){return n.Rh(e)})))})},r.addManifests=function(){return vE(this.g)},r.updateManifest=function(){return Promise.reject(new Ue(2,9,9016,"Cannot modify values in "+this.g))},r.updateManifestExpiration=function(e,t){var n=pE(this.h,this.g),r=n.store();return r.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,r.put(n,e))},n.promise()},r.removeManifests=function(e,t){return bE(this,this.g,e,t)},r.getManifests=function(e){var t,n=this;return L(function(r){return 1==r.g?E(r,EE(n,n.g,e),2):(t=r.h,r.return(Promise.all(t.map(function(e){return n.Rd(e)}))))})},r.getAllManifests=function(){var e,t,n=this;return L(function(r){return 1==r.g?(e=mE(n.h,n.g,"readonly"),t=new Map,E(r,fE(e,function(e,r){var i;return L(function(a){if(1==a.g)return E(a,n.Rd(r),2);i=a.h,t.set(e,i),T(a)})}),2)):3!=r.g?E(r,e.promise(),3):r.return(t)})},r.Rh=function(e){return e},r.Rd=function(e){return Promise.resolve(e)},r.add=function(e,t){var n,r,i,a,s,o,l,u=this;return L(function(d){if(1==d.g){for(n=pE(u.h,e),r=n.store(),i=[],a=g(t),s=a.next(),o={};!s.done;o={dh:void 0},s=a.next())l=s.value,o.dh=r.add(l),o.dh.onsuccess=function(e){return function(){i.push(e.dh.result)}}(o);return E(d,n.promise(),2)}return d.return(i)})},TE.prototype.destroy=function(){return this.g.destroy()},TE.prototype.getAll=function(){var e,t,n=this;return L(function(r){return 1==r.g?(e=mE(n.g,"session-ids","readonly"),t=[],E(r,fE(e,function(e,n){t.push(n)}),2)):3!=r.g?E(r,e.promise(),3):r.return(t)})},TE.prototype.add=function(e){for(var t=pE(this.g,"session-ids"),n=t.store(),r=(e=g(e)).next();!r.done;r=e.next())n.add(r.value);return t.promise()},TE.prototype.remove=function(e){var t,n=this;return L(function(r){return 1==r.g?E(r,fE(t=pE(n.g,"session-ids"),function(t,n,r){e.includes(n.sessionId)&&r.delete()}),2):E(r,t.promise(),0)})},SE.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},SE.prototype.init=function(){var e=this;kE.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=g(this.g.values()),r=n.next();!r.done;r=n.next())t.push(r.value.init());return Promise.all(t)},B("shaka.offline.StorageMuxer",SE),SE.unregister=function(e){kE.delete(e)},SE.register=IE,SE.prototype.destroy=SE.prototype.destroy;var kE=new Map;function _E(){yE.apply(this,arguments)}function RE(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=g(t),r=n.next();!r.done;r=n.next())r.value.variantIds=[];for(r=(n=g(e)).next();!r.done;r=n.next())r.value.variantIds=[];if(n=0,e.length&&!t.length){r=n++;for(var i=g(e),a=i.next();!a.done;a=i.next())a.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=(i=g(t)).next();!a.done;a=i.next())a.value.variantIds.push(r);if(e.length&&t.length)for(r=(t=g(t)).next();!r.done;r=t.next())for(r=r.value,a=(i=g(e)).next();!a.done;a=i.next()){a=a.value;var s=n++;r.variantIds.push(s),a.variantIds.push(s)}}}(e);for(var n=g(e.streams),r=n.next();!r.done;r=n.next());return e.streams.map(function(n){return function(e,t,n){var r=e.initSegmentUri?xE(e.initSegmentUri):null,i=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:r,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=xE(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:r,appendWindowStart:t,appendWindowEnd:a,timestampOffset:i,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}(n,e.startTime,t)})}function xE(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ue(2,9,9004,"Could not parse uri "+e)}function CE(){yE.apply(this,arguments)}function DE(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(r){return{startTime:t+r.startTime,endTime:t+r.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:r.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function LE(){yE.apply(this,arguments)}function ME(){this.m=this.j=this.i=this.h=this.g=this.l=null}h(_E,yE),_E.prototype.updateManifestExpiration=function(e,t){var n,r,i,a=this;return L(function(s){return n=pE(a.h,a.g),r=n.store(),i=new ki,r.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,r.put(n),i.resolve()):i.reject(new Ue(2,9,9012,"Could not find values for "+e))},E(s,Promise.all([n.promise(),i]),0)})},_E.prototype.Rd=function(e){var t,n,r,i,a,s;return L(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n)r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime,a=RE(e.periods[n],i),t.push(a);return E(o,Um(t),2)}return s=o.h,o.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},_E.prototype.Rh=function(e){return{data:e.data}},h(CE,yE),CE.prototype.Rd=function(e){var t,n,r,i,a,s;return L(function(o){if(1==o.g){for(t=[],n=0;n<e.periods.length;++n){r=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,i=r-e.periods[n].startTime;for(var l=e.periods[n],u=[],d=g(l.streams),c=d.next();!c.done;c=d.next())0!=(c=c.value).variantIds.length&&u.push(DE(c,l.startTime,l.startTime+i));a=u,t.push(a)}return E(o,Um(t),2)}return s=o.h,o.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})},h(LE,yE),(r=LE.prototype).hasFixedKeySpace=function(){return!1},r.addSegments=function(e){return this.add(this.i,e)},r.addManifests=function(e){return this.add(this.g,e)},r.updateManifest=function(e,t){return function(e,t,n){var r=(e=pE(e.h,e.g)).store();return r.get(t).onsuccess=function(){r.put(n,t)},e.promise()}(this,e,t)},r.Rd=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(r=ME.prototype).init=function(){var t=this,n=new ki,r=!1,i=new Tr(function(){r=!0,n.reject(new Ue(2,9,9017))});i.ia(NE);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!r){i.stop();var e=a.result;t.l=e;var s=e.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new _E(e,"segment","manifest"):null,t.g=s,s=(s=e.objectStoreNames).contains("manifest-v2")&&s.contains("segment-v2")?new CE(e,"segment-v2","manifest-v2"):null,t.h=s,s=(s=e.objectStoreNames).contains("manifest-v3")&&s.contains("segment-v3")?new CE(e,"segment-v3","manifest-v3"):null,t.i=s,s=(s=e.objectStoreNames).contains("manifest-v5")&&s.contains("segment-v5")?new LE(e,"segment-v5","manifest-v5"):null,t.j=s,e=e.objectStoreNames.contains("session-ids")?new TE(e):null,t.m=e,n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=g(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){r||(i.stop(),n.reject(new Ue(2,9,9001,a.error)),e.preventDefault())},n},r.destroy=function(){var e=this;return L(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}})},r.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},r.getEmeSessionCell=function(){return this.m},r.erase=function(){var t=this;return L(function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return E(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return E(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return E(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return E(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),E(n,function(){var t=new ki,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ue(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,E(n,t.init(),0)}})};var NE=5;function PE(e,t,n,r){this.g=e,this.i=t,this.h=n,this.l=r,this.j=["offline:",e,"/",t,"/",n,"/",r].join("")}function OE(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var r=e[3];return r&&null!=t?new PE(t,n,r,Number(e[4])):null}function FE(e,t){this.h=e,this.g=t}function UE(e,t){var n=new ol(null,0);n.Ab(t.duration);var r=t.streams.filter(function(e){return"audio"==e.type}),i=t.streams.filter(function(e){return"video"==e.type});r=function(e,t,n,r){for(var i=new Set,a=g(t),s=a.next();!s.done;s=a.next())for(var o=(s=g(s.value.variantIds)).next();!o.done;o=s.next())i.add(o.value);for(a=g(n),s=a.next();!s.done;s=a.next())for(s=g(s.value.variantIds),o=s.next();!o.done;o=s.next())i.add(o.value);for(a=new Map,i=g(i),s=i.next();!s.done;s=i.next())s=s.value,a.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),i=t.next();!i.done;i=t.next())for(s=i.value,i=zE(e,s,r),s=g(s.variantIds),o=s.next();!o.done;o=s.next())(o=a.get(o.value)).language=i.language,o.primary=o.primary||i.primary,o.audio=i;for(n=g(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=zE(e,i,r),i=g(i.variantIds),s=i.next();!s.done;s=i.next())(s=a.get(s.value)).primary=s.primary||t.primary,s.video=t;return a}(e,r,i,n),i=t.streams.filter(function(e){return e.type==ot}).map(function(t){return zE(e,t,n)});var a=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return zE(e,t,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=g(r.values()),l=o.next();!l.done;l=o.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=s),l.video&&l.video.encrypted&&(l.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(r.values()),textStreams:i,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function zE(e,t,n){var r=t.segments.map(function(n){return function(e,t,n){var r=new PE("segment",e.h,e.g,t.dataKey);return e=new Us(t.startTime,t.endTime,function(){return[r.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new PE("segment",e.h,e.g,t);return new Os(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.If(t.thumbnailSprite),e}(e,n,t)});return n.ie(r),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Cl(r),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([tr(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function BE(){this.g=null}function jE(){}function qE(e,t){var n=OE(e);return e=n&&"manifest"==n.g?Ci(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t}):n&&"segment"==n.g?function(e,t,n){var r=new SE;return Ci(void 0).Xa(function(){return r.init()}).Xa(function(){return AE(r,t.Pb(),t.bb())}).Xa(function(e){return e.getSegments([t.key()])}).Xa(function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}}).finally(function(){return r.destroy()})}(n.key(),n,t):Ri(new Ue(2,1,9004,e)),e}function GE(e,t,n){var r,i,a,s,o,l;return L(function(u){switch(u.g){case 1:r=[];for(var d=[],c=g(n),h=c.next();!h.done;h=c.next()){h=h.value;for(var f=!1,p=g(d),m=p.next();!m.done;m=p.next())if(HE((m=m.value).info,h)){m.sessionIds.push(h.sessionId),f=!0;break}f||d.push({info:h,sessionIds:[h.sessionId]})}i=g(d),a=i.next();case 2:if(a.done){u.A(4);break}return s=a.value,o=function(e,t,n){var r,i;return L(function(a){switch(a.g){case 1:return r=new ya({tc:t,onError:function(){},vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),S(a,2),r.configure(e),E(a,function(e,t,n,r,i,a){var s,o,l,u,d;return L(function(c){return 1==c.g?(s=[],a.length&&s.push(a[0].contentType),i.length&&s.push(i[0].contentType),o=function(e){return(e=nt(t,e,null)).licenseServerUri=n,e.serverCertificate=r,e.persistentStateRequired=!0,e.sessionType="persistent-license",e},(l=oi(s)).video&&(u=o(a[0].encryptionScheme||""),l.video.drmInfos.push(u)),l.audio&&(d=o(i[0].encryptionScheme||""),l.audio.drmInfos.push(d)),E(c,Gr([l],!0,e.O,[]),2)):(Qi(e.l),c.return(Aa(e,[l])))})}(r,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(a,3);break;case 2:return I(a),E(a,r.destroy(),5);case 5:return a.return([]);case 3:return i=[],E(a,Promise.all(n.sessionIds.map(function(e){return L(function(t){return 1==t.g?(S(t,2),E(t,function(e,t){var n,r,i;return L(function(a){return 1==a.g?E(a,_a(e,t,{initData:null,initDataType:null}),2):3!=a.g?(n=a.h)?(r=[],(i=e.i.get(n))&&(i.Kb=new ki,r.push(i.Kb)),r.push(n.remove()),E(a,Promise.all(r),3)):a.return():(e.i.delete(n),void T(a))})}(r,e),4)):2!=t.g?(i.push(e),A(t,0)):(I(t),void T(t))})})),6);case 6:return E(a,r.destroy(),7);case 7:return a.return(i)}})}(e,t,s),E(u,o,5);case 5:l=u.h,r=r.concat(l),a=i.next(),u.A(2);break;case 4:return u.return(r)}})}function HE(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&J(e.audioCapabilities,t.audioCapabilities,n)&&J(e.videoCapabilities,t.videoCapabilities,n)}function VE(e,t){var n=UE(new FE(e.Pb(),e.bb()),t),r=t.appMetadata||{};return n=KE(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:r,isIncomplete:t.isIncomplete||!1}}function KE(e){for(var t=[],n=ei(e.variants),r=(n=g(n)).next();!r.done;r=n.next())t.push($r(r.value));for(n=(e=g(e.textStreams)).next();!n.done;n=e.next())t.push(Yr(n.value));return t}function $E(){this.g=new Map}function YE(e,t){var n=t.audio,r=t.video;if(n&&!r&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&r&&e.g.set(r.id,r.bandwidth||t.bandwidth),n&&r){var i=n.bandwidth||393216,a=r.bandwidth||t.bandwidth-i;a<=0&&(a=t.bandwidth),e.g.set(n.id,i),e.g.set(r.id,a)}}function WE(e,t){e.g.set(t.id,t.bandwidth||2048)}function XE(e,t){return null==(e=e.g.get(t))&&(e=0),e}function QE(e){var t=this;if(e&&e.constructor!=Wc)throw new Ue(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Wb()):(this.h=Ju(),this.g=new zi,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new Xi(function(){var e,r,i,a,s;return L(function(o){switch(o.g){case 1:return E(o,Promise.all(t.l.map(function(e){return dE(e)})),2);case 2:for(e=function(){},r=[],i=g(t.i),a=i.next();!a.done;a=i.next())s=a.value,r.push(s.then(e,e));return E(o,Promise.all(r),3);case 3:if(!n){o.A(4);break}return E(o,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(o)}})}),this.m=1e9}function JE(){if(Wy(ae()))e:{for(var e=g(kE.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function ZE(e){var t,n,r;return L(function(i){switch(i.g){case 1:return E(i,(t=new SE).init(),2);case 2:return E(i,wE(t),3);case 3:return n=i.h,r=new PE("manifest",n.path.Pb,n.path.bb,e),E(i,t.destroy(),4);case 4:return E(i,(new QE).remove(r.toString()),0)}})}function eT(e,t,n,r,i,a){var s,o,l,u,d,c,h,f,p,m,y;return L(function(v){switch(v.g){case 1:for(s=!1,S(v,2),o=!0,l=g(n.streams),u=l.next();!u.done;u=l.next())for(d=u.value,c=g(d.segments),h=c.next();!h.done;h=c.next())f=h.value,null!=(p=f.pendingSegmentRefId?r[f.pendingSegmentRefId]:null)&&(f.dataKey=p,f.pendingSegmentRefId=void 0),null!=(p=f.pendingInitSegmentRefId?r[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=p,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(o=!1),f.pendingInitSegmentRefId&&(o=!1);return n.size+=i,o&&(n.isIncomplete=!1),E(v,e.updateManifest(t,n),4);case 4:s=!0,a(),A(v,0);break;case 2:return m=I(v),E(v,ZE(t),5);case 5:if(s){v.A(6);break}return y=Object.values(r),E(v,e.removeSegments(y,function(){}),6);case 6:throw m}})}function tT(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function nT(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function rT(e,t,n,r){if(t.expiration=n.Wd(),n=wa(n),t.sessionIds=r?n:[],tT(e)&&r&&!n.length)throw new Ue(2,9,9007)}function iT(e,t){for(var n=[],r=g(e.streams),i=r.next();!i.done;i=r.next())i=i.value,t&&"video"==i.type?n.push({contentType:tr(i.mimeType,i.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=i.type||n.push({contentType:tr(i.mimeType,i.codecs),robustness:e.drmInfo.audioRobustness});return n}function aT(e,t,n){return L(function(r){return E(r,function(e,t,n,r){var i,a,s;return L(function(o){return 1==o.g?r.drmInfo?(i=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ue(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=r.sessionIds.map(function(e){return{sessionId:e,keySystem:r.drmInfo.keySystem,licenseUri:r.drmInfo.licenseServerUri,serverCertificate:r.drmInfo.serverCertificate,audioCapabilities:iT(r,!1),videoCapabilities:iT(r,!0)}}),E(o,GE(t,e,a),2)):o.return():3!=o.g?(s=o.h,E(o,i.remove(s),3)):E(o,i.add(a.filter(function(e){return!s.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function sT(e,t,n){function r(){}var i=function(e){for(var t=new Set,n=(e=g(e.streams)).next();!n.done;n=e.next())for(var r=(n=g(n.value.segments)).next();!r.done;r=n.next())null!=(r=r.value).initSegmentKey&&t.add(r.initSegmentKey),t.add(r.dataKey);return Array.from(t)}(n);return VE(t,n),Promise.all([e.removeSegments(i,r),e.removeManifests([t.key()],r)])}function oT(e,t){var n;return L(function(r){switch(r.g){case 1:return S(r,2),E(r,Id(t,e.g,e.h.streaming.retryParameters),4);case 4:n=r.h,A(r,3);break;case 2:I(r);case 3:if(n)return r.return(n);throw new Ue(1,2,2011,t)}})}function lT(e,t,n,r,i,a){var s={id:r.id,originalId:r.originalId,groupId:r.groupId,primary:r.primary,type:r.type,mimeType:r.mimeType,codecs:r.codecs,frameRate:r.frameRate,pixelAspectRatio:r.pixelAspectRatio,hdr:r.hdr,colorGamut:r.colorGamut,videoLayout:r.videoLayout,kind:r.kind,language:r.language,originalLanguage:r.originalLanguage,label:r.label,width:r.width||null,height:r.height||null,encrypted:r.encrypted,keyIds:r.keyIds,segments:[],variantIds:[],roles:r.roles,forced:r.forced,channelsCount:r.channelsCount,audioSamplingRate:r.audioSamplingRate,spatialAudio:r.spatialAudio,closedCaptions:r.closedCaptions,tilesLayout:r.tilesLayout,mssPrivateData:r.mssPrivateData,external:r.external,fastSwitching:r.fastSwitching,isAudioMuxedInVideo:r.isAudioMuxedInVideo},o=i.offline.numberOfParallelDownloads,l=0===o?r.id:0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var r=e.segmentIndex.get(t);r;)n(r,t),r=e.segmentIndex.get(++t)}(r,n.presentationTimeline.Hb(),function(n,i){var u=iE(n),d=void 0;if(!a.has(u)){var c=n.endTime-n.startTime;c=XE(t,r.id)*c,c=oE(e.g,c),a.set(u,new rE(n,c,l,!1,i))}n.ba&&(d=iE(n.ba),a.has(d)||(c=.5*XE(t,r.id),c=oE(e.g,c),a.set(d,new rE(n.ba,c,l,!0,i)))),s.segments.push({pendingInitSegmentRefId:d,initSegmentKey:d?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:u,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==o&&(l=(l+1)%o)}),s}function uT(e){if(e.j.g)throw new Ue(2,9,7001)}function dT(){if(!JE())throw new Ue(2,9,9e3)}function cT(e,t){return L(function(n){return 1==n.g?(e.i.push(t),w(n,2),E(n,t,4)):2!=n.g?n.return(n.h):(k(n),Q(e.i,t),_(n,0))})}function hT(e){for(var t=new Set,n=g(e.variants),r=n.next();!r.done;r=n.next())(r=r.value).audio&&t.add(r.audio),r.video&&t.add(r.video);for(r=(n=g(e.textStreams)).next();!r.done;r=n.next())t.add(r.value);for(n=(e=g(e.imageStreams)).next();!n.done;n=e.next())t.add(n.value);return t}B("shaka.offline.indexeddb.StorageMechanismOpenTimeout",NE),IE("idb",function(){return ae().xh()?new ME:null}),PE.prototype.Pb=function(){return this.i},PE.prototype.bb=function(){return this.h},PE.prototype.key=function(){return this.l},PE.prototype.toString=function(){return this.j},(r=BE.prototype).configure=function(){},r.start=function(e,t){var n,r,i,a,s,o,l=this;return L(function(u){switch(u.g){case 1:if(n=OE(e),l.g=n,null==n||"manifest"!=n.g)throw new Ue(2,1,9004,e);return r=new SE,w(u,2),E(u,r.init(),4);case 4:return E(u,AE(r,n.Pb(),n.bb()),5);case 5:return E(u,u.h.getManifests([n.key()]),6);case 6:return i=u.h,a=i[0],s=new FE(n.Pb(),n.bb()),o=UE(s,a),t.makeTextStreamsForClosedCaptions(o),u.return(o);case 2:return k(u),E(u,r.destroy(),7);case 7:_(u,0)}})},r.stop=function(){return Promise.resolve()},r.update=function(){},r.onExpirationUpdated=function(e,t){var n,r,i,a,s,o,l,u=this;return L(function(d){switch(d.g){case 1:return n=u.g,r=new SE,S(d,2,3),E(d,r.init(),5);case 5:return E(d,AE(r,n.Pb(),n.bb()),6);case 6:return E(d,(i=d.h).getManifests([n.key()]),7);case 7:if(a=d.h,s=a[0],o=s.sessionIds.includes(e),l=null==s.expiration||s.expiration>t,!o||!l){d.A(3);break}return E(d,i.updateManifestExpiration(n.key(),t),3);case 3:return k(d),E(d,r.destroy(),10);case 10:_(d,0);break;case 2:I(d),d.A(3)}})},r.onInitialVariantChosen=function(){},r.banLocation=function(){},r.setMediaElement=function(){},Qa("application/x-offline-manifest",function(){return new BE}),B("shaka.offline.OfflineScheme",jE),jE.plugin=qE,Bi("offline",qE),(r=QE.prototype).destroy=function(){return this.j.destroy()},r.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Fu(e,t)),ed(this.h,e)},r.getConfiguration=function(){var e=Ju();return ed(e,this.h,Ju()),e},r.Wb=function(){return this.g},r.store=function(e,t,n,r,i){var a=this,s=this.getConfiguration(),o=new uE(this.g);return this.l.push(o),t=function(e,t,n,r,i,a,s,o){var l,u,d,c,h,f,p,m,y,v,b,w,R,x,C,D,M,N,P,O,F,U,z;return L(function(B){switch(B.g){case 1:return dT(),u=l=null,d=new SE,f=h=c=null,S(B,2,3),E(B,a(),5);case 5:return l=B.h,E(B,function(e,t,n,r){var i,a,s,o,l;return L(function(u){if(1==u.g)return i=null,a=e.g,s={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){i=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return r.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(r.manifest),uT(e),E(u,n.start(t,s),2);if(3!=u.g)return o=u.h,uT(e),l=hT(o),E(u,Promise.all(Ji(l,function(e){return e.createSegmentIndex()})),3);if(uT(e),i)throw i;return u.return(o)})}(e,t,l,s),6);case 6:if(p=B.h,uT(e),p.presentationTimeline.W()||p.presentationTimeline.Vc())throw new Ue(2,9,9005,t);m=g(r),y=m.next();case 7:if(y.done){B.A(9);break}return v=y.value,E(B,function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f,p,m,y,v;return L(function(b){switch(b.g){case 1:return E(b,oT(e,t),2);case 2:if("text/vtt"!=(r=b.h))throw new Ue(1,2,2017,t);return E(b,function(e,t,n){var r,i,a;return L(function(s){return 1==s.g?(r=$i,(i=qi([e],n)).method="GET",E(s,t.request(r,i).promise,2)):(a=s.h,s.return(a.data))})}(t,e.g,e.h.streaming.retryParameters),3);case 3:if(i=b.h,!(a=gr(r)))throw new Ue(2,2,2014,r);for(s=a(),o={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},l=Ne(i),u=s.parseMedia(l,o,t,[]),d=[],c=g(u),h=c.next(),f={};!h.done;f={Rf:void 0,od:void 0},h=c.next())f.od=h.value,f.Rf=null,p=function(e){return function(){return null==e.Rf&&(e.Rf=tt([t],[e.od.payload])),e.Rf||[]}}(f),m=new Us(f.od.startTime,f.od.endTime,p,0,null,null,0,0,1/0),f.od.payload.includes("#xywh")&&4===(y=f.od.payload.split("#xywh=")[1].split(",")).length&&m.If({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)}),d.push(m);if(v=r,!d.length){b.A(4);break}return E(b,Id(d[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:v=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Cl(d),mimeType:v||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([tr(v||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}(e,v,p),10);case 10:b=B.h,p.imageStreams.push(b),uT(e),y=m.next(),B.A(7);break;case 9:w=g(i),R=w.next();case 11:return R.done?(Pa(s.drm.clearKeys,p.variants),D=p.variants.some(function(e){if(e.audio)for(var t=g(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(t=(e=g(e.video.drmInfos)).next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1}),M=s.offline.usePersistentLicense,D&&(M=!1),E(B,e.md(p,function(e){f=f||e},s,M),15)):(x=R.value,E(B,function(e,t,n,r,i,a,s){var o;return L(function(l){if(1==l.g)return a?l.A(2):E(l,oT(e,n),3);if(2!=l.g&&(a=l.h),o={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ll(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:s||"",kind:i,encrypted:!1,drmInfos:[],keyIds:new Set,language:r,originalLanguage:r,label:null,type:ot,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([tr(a||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!pr(tr(o.mimeType,o.codecs)))throw new Ue(2,2,2014,a);return l.return(o)})}(e,p,x.uri,x.language,x.kind,x.mime,x.codecs),14));case 14:C=B.h,p.textStreams.push(C),uT(e),R=w.next(),B.A(11);break;case 15:if(u=B.h,uT(e),f)throw f;return E(B,function(e,t,n,r){var i,a,s,o,l,u,d,c,h,f,p,m,y,v,b,w,k,_,R,x,C,D,M,N,P,O,F,U,z;return L(function(L){switch(L.g){case 1:return i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return Ur(e,t,n)})}(e,n.restrictions,i),E(L,Br(t,e,r,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],s=n.preferredDecodingAttributes,o=n.preferredVideoCodecs,l=n.preferredAudioCodecs,u=n.preferredTextFormats,Fr(e,o,l,s,u),d=g(e.variants),c=d.next();!c.done;c=d.next())h=c.value,a.push($r(h));for(f=g(e.textStreams),p=f.next();!p.done;p=f.next())m=p.value,a.push(Yr(m));for(y=g(e.imageStreams),v=y.next();!v.done;v=y.next())b=v.value,a.push(Wr(b));return E(L,n.offline.trackSelectionCallback(a),3);case 3:for(w=L.h,k=e.presentationTimeline.getDuration(),_=0,R=g(w),x=R.next();!x.done;x=R.next())C=x.value,D=C.bandwidth*k/8,_+=D;return S(L,4),E(L,n.offline.downloadSizeCallback(_),6);case 6:if(!L.h)throw new Ue(2,9,9014);A(L,5);break;case 4:if((M=I(L))instanceof Ue)throw M;throw new Ue(2,9,9015);case 5:for(N=new Set,P=new Set,O=new Set,F=g(w),U=F.next();!U.done;U=F.next())"variant"==(z=U.value).type&&N.add(z.id),"text"==z.type&&P.add(z.id),"image"==z.type&&O.add(z.id);e.variants=e.variants.filter(function(e){return N.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return P.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return O.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=g(t),r=n.next();!r.done;r=n.next())for(var i=(r=g(t)).next();!i.done;i=r.next());for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),r=n.next();!r.done;r=n.next());}(e),T(L)}})}(p,u,s,M),16);case 16:return E(B,d.init(),17);case 17:return uT(e),E(B,wE(d),18);case 18:return c=B.h,uT(e),N=function(e,t,n,r,i,a,s){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=KE(t),appMetadata:n,isIncomplete:!1}}(n,t,r),l=i.offline.progressCallback;!function(e,t,n){e.o=t,e.m=n}(a,function(e,t){o.size=t,l(o,e)},function(t,n){u&&s&&d==n&&Sa(e,"cenc",t)});var u=tT(t)&&!nT(t),d=null;u&&(d=fT.get(e.g.keySystem));for(var c=new $E,h=g(t.textStreams),f=h.next();!f.done;f=h.next())c.g.set(f.value.id,52);for(h=g(t.imageStreams),f=h.next();!f.done;f=h.next())WE(c,f.value);for(h=g(t.variants),f=h.next();!f.done;f=h.next())YE(c,f.value);return a=function(e,t,n,r){for(var i=new Map,a=hT(n),s=new Map,o=(a=g(a)).next();!o.done;o=a.next()){var l=lT(e,t,n,o=o.value,r,i);s.set(o.id,l)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Ch:Array.from(i.values())}}(a,c,t,i),i=a.streams,a=a.Ch,(c=e.g)&&s&&(c.initData=[]),{tk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.Wd(),streams:i,sessionIds:s?wa(e):[],drmInfo:c,appMetadata:r,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Ch:a}}(u,p,t,n,s,o,M),P=N.tk,O=N.Ch,E(B,c.bb.addManifests([P]),19);case 19:if(F=B.h,uT(e),h=F[0],uT(e),f)throw f;return E(B,function(e,t,n,r,i,a,s,o,l,u){var d,c,h,f,p,m,y,v,b,w,k;return L(function(_){switch(_.g){case 1:if(d={},c=0,h=function(){if(e.j.g||i.l)throw new Ue(2,9,7001)},f=function(e,t){var f,p,m,y,v,b,S,w,A;return L(function(I){if(1==I.g){for(f=g(e),p=f.next(),m={};!p.done;m={kc:void 0},p=f.next())m.kc=p.value,h(),y=aE(m.kc,a),v=m.kc.i,b=m.kc.h,S=function(e){return function(t){var n,r,i,a;return L(function(o){switch(o.g){case 1:if(n=e.kc.g,r=n.Yb(!1),!n.aesKey||r){o.A(2);break}return E(o,iu(t,n.aesKey,e.kc.j),3);case 3:t=o.h;case 2:return i=iE(n),E(o,s.addSegments([{data:t}]),4);case 4:a=o.h,h(),d[i]=a[0],c+=t.byteLength,T(o)}})}}(m),w=m.kc.g,(A=w.Yb(!1))?cE(i,m.kc.groupId,A,v,b,S):i.queue(m.kc.groupId,y,v,b,S);return E(I,function(e){return L(function(t){return 1==t.g?E(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}(i),2)}return h(),!t||i.l?I.A(0):(rT(o,r,l,u),E(I,s.updateManifest(n,r),0))})},p=!1,S(_,2),!tT(o)||!p||nT(o)){_.A(4);break}return E(_,f(t.filter(function(e){return e.h}),!0),5);case 5:return h(),t=t.filter(function(e){return!e.h}),m=d,y=c,d={},c=0,E(_,eT(s,n,r,m,y,function(){return uT(e)}),6);case 6:h();case 4:if(p){_.A(7);break}return E(_,f(t,!1),8);case 8:return h(),v=d,b=c,d={},c=0,E(_,eT(s,n,r,v,b,function(){return h()}),9);case 9:h();case 7:A(_,0);break;case 2:return w=I(_),k=Object.values(d),E(_,s.removeSegments(k,function(){}),10);case 10:throw w}})}(e,O,h,P,o,s,c.bb,p,u,M),20);case 20:return uT(e),rT(p,P,u,M),E(B,c.bb.updateManifest(h,P),21);case 21:return uT(e),U=new PE("manifest",c.path.Pb,c.path.bb,h),B.return(VE(U,P));case 3:return k(B),E(B,d.destroy(),22);case 22:if(!l){B.A(23);break}return E(B,l.stop(),23);case 23:if(!u){B.A(25);break}return E(B,u.destroy(),25);case 25:_(B,0);break;case 2:if(z=I(B),null==h){B.A(27);break}return E(B,ZE(h),27);case 27:throw f||z}})}(this,e,t||{},r||[],i||[],function(){var t;return L(function(r){return 1==r.g?n?r.A(2):E(r,Id(e,a.g,s.manifest.retryParameters),3):(2!=r.g&&(n=r.h),t=Ja(e,n||null),r.return(t()))})},s,o),(t=new _i(t,function(){return dE(o)})).finally(function(){Q(a.l,o)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Q(e.i,n)})}(this,t)},r.remove=function(e){return cT(this,function(e,t){var n,r,i,a,s,o;return L(function(l){switch(l.g){case 1:if(dT(),null==(n=OE(t))||"manifest"!=n.g)throw new Ue(2,9,9004,t);return r=n,i=new SE,w(l,2),E(l,i.init(),4);case 4:return E(l,AE(i,r.Pb(),r.bb()),5);case 5:return E(l,(a=l.h).getManifests([r.key()]),6);case 6:return s=l.h,o=s[0],E(l,Promise.all([aT(e,o,i),sT(a,r,o)]),2);case 2:return k(l),E(l,i.destroy(),8);case 8:_(l,0)}})}(this,e))},r.Nk=function(){return cT(this,(e=this,L(function(c){switch(c.g){case 1:return dT(),t=e.g,n=e.h.drm,r=new SE,i=!1,w(c,2),E(c,r.init(),4);case 4:a=[],function(e,t){e.g.forEach(function(e){t(e.getEmeSessionCell())})}(r,function(e){return a.push(e)}),s=g(a),o=s.next();case 5:if(o.done){c.A(2);break}return E(c,(l=o.value).getAll(),8);case 8:return u=c.h,E(c,GE(n,t,u),9);case 9:return d=c.h,E(c,l.remove(d),10);case 10:d.length!=u.length&&(i=!0),o=s.next(),c.A(5);break;case 2:return k(c),E(c,r.destroy(),11);case 11:_(c,3);break;case 3:return c.return(!i)}})));var e,t,n,r,i,a,s,o,l,u,d},r.list=function(){return cT(this,L(function(r){switch(r.g){case 1:return dT(),e=[],t=new SE,w(r,2),E(r,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,r){t({Pb:n,bb:r},e)})})}(t,function(t,r){n=n.then(function(){return L(function(n){if(1==n.g)return E(n,r.getAllManifests(),2);n.h.forEach(function(n,r){n=VE(new PE("manifest",t.Pb,t.bb,r),n),e.push(n)}),T(n)})})}),E(r,n,2);case 2:return k(r),E(r,t.destroy(),6);case 6:_(r,3);break;case 3:return r.return(e)}}));var e,t,n},r.md=function(e,t,n,r){var i,a=this;return L(function(s){return 1==s.g?((i=new ya({tc:a.g,onError:t,vf:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),E(s,function(e,t,n){return e.oa=!0,e.C=new Map,e.R=n,ba(e,t,!1)}(i,e.variants,r),2)):3!=s.g?E(s,Ta(i),3):s.return(i)})},B("shaka.offline.Storage",QE),QE.deleteAll=function(){var e;return L(function(t){return 1==t.g?(e=new SE,w(t,2),E(t,function(e){var t,n;return L(function(r){return 1==r.g?(t=Array.from(e.g.values()),(n=t.length>0)||kE.forEach(function(e){(e=e())&&t.push(e)}),E(r,Promise.all(t.map(function(e){return e.erase()})),2)):n?r.A(0):E(r,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(k(t),E(t,e.destroy(),5)):_(t,0)})},QE.prototype.list=QE.prototype.list,QE.prototype.removeEmeSessions=QE.prototype.Nk,QE.prototype.remove=QE.prototype.remove,QE.prototype.store=QE.prototype.store,QE.prototype.getNetworkingEngine=QE.prototype.Wb,QE.prototype.getConfiguration=QE.prototype.getConfiguration,QE.prototype.configure=QE.prototype.configure,QE.prototype.destroy=QE.prototype.destroy,QE.support=JE;var fT=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function gT(){}function pT(e,t){for(e={priority:t||0,callback:e},t=0;t<vT.length;t++)if(vT[t].priority<e.priority)return void vT.splice(t,0,e);vT.push(e)}Jc("offline",JE),B("shaka.polyfill",gT),gT.register=pT,gT.installAll=function(){for(var e=g(vT),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){K("Error installing polyfill!",n)}}};var mT,yT,vT=[];function bT(){}function ET(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())TT(t.value)}function TT(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function ST(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function wT(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(K("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function AT(e){if(!e)return!1;var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function IT(e,t){return!(e&&e!=t&&("cbcs"!=e&&"cbcs-1-9"!=e||!ae().ed()))}function kT(){}function _T(){ae().Kf()&&!mT&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(mT=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=RT,navigator.emeEncryptionSchemePolyfilled=!0)}function RT(e,t){var n,r=this;return L(function(i){return 1==i.g?E(i,mT.call(r,e,t),2):AT(n=i.h)?(navigator.requestMediaKeySystemAccess=mT,i.return(n)):(navigator.requestMediaKeySystemAccess=xT,i.return(xT.call(r,e,t)))})}function xT(e,t){var n,r,i,a,s,o,l,u,d,c,h,f,p=this;return L(function(m){if(1==m.g){for(n=wT(e),r=[],i=g(t),a=i.next();!a.done;a=i.next())s=a.value,o=CT(s.videoCapabilities,n),l=CT(s.audioCapabilities,n),s.videoCapabilities&&s.videoCapabilities.length&&!o.length||s.audioCapabilities&&s.audioCapabilities.length&&!l.length||((u=Object.assign({},s)).videoCapabilities=o,u.audioCapabilities=l,r.push(u));if(!r.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(m,mT.call(p,e,r),2)}return c=m.h,f=h=null,r[0]&&(r[0].videoCapabilities&&(h=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(f=r[0].audioCapabilities[0].encryptionScheme)),m.return(new ST(c,h,f))})}function CT(e,t){return e?e.filter(function(e){return IT(e.encryptionScheme,t)}):e}function DT(){}function LT(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",MT),document.addEventListener("webkitfullscreenerror",MT),document.addEventListener("mozfullscreenchange",MT),document.addEventListener("mozfullscreenerror",MT),document.addEventListener("MSFullscreenChange",MT),document.addEventListener("MSFullscreenError",MT)}}function MT(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function NT(){}function PT(){ae().Kf()&&!yT&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(yT=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=OT,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function OT(e){var t,n,r=this;return L(function(i){switch(i.g){case 1:return E(i,yT.call(r,e),2);case 2:if(!(t=i.h).supported||!e.keySystemConfiguration)return i.return(t);if(AT(n=t.keySystemAccess))return navigator.mediaCapabilities.decodingInfo=yT,i.return(t);if(navigator.mediaCapabilities.decodingInfo=FT,n){i.A(3);break}return E(i,UT(e),4);case 4:return t.keySystemAccess=i.h,i.return(t);case 3:return i.return(FT.call(r,e))}})}function FT(e){var t,n,r,i,a,s,o,l=this;return L(function(u){switch(u.g){case 1:return n=t=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,i=r.keySystem,n=r.audio&&r.audio.encryptionScheme,t=r.video&&r.video.encryptionScheme,a=wT(i),s={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},IT(n,a)&&IT(t,a))?E(u,yT.call(l,e),2):u.return(s);case 2:if((o=u.h).keySystemAccess){o.keySystemAccess=new ST(o.keySystemAccess,t,n),u.A(3);break}if(!e.keySystemConfiguration){u.A(3);break}return E(u,UT(e),5);case 5:o.keySystemAccess=u.h;case 3:return u.return(o)}})}function UT(e){var t,n;return L(function(r){if(1==r.g){var i=e.keySystemConfiguration,a=[],s=[];return i.audio&&a.push({robustness:i.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:i.audio.encryptionScheme}),i.video&&s.push({robustness:i.video.robustness||"",contentType:e.video.contentType,encryptionScheme:i.video.encryptionScheme}),i={initDataTypes:i.initDataType?[i.initDataType]:[],distinctiveIdentifier:i.distinctiveIdentifier,persistentState:i.persistentState,sessionTypes:i.sessionTypes},a.length&&(i.audioCapabilities=a),s.length&&(i.videoCapabilities=s),t=i,E(r,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=r.h,r.return(n)})}function zT(){}function BT(){ae().cc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),zT.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=jT)}function jT(t){var n,r,i,a,s,o,l;return L(function(u){switch(u.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},ae(),r=t.video,i=t.audio,"media-source"!=t.type){if("file"!=t.type)return u.return(n);if(r&&(a=r.contentType,""==Zs().canPlayType(a))||i&&(s=i.contentType,""==Zs().canPlayType(s)))return u.return(n);u.A(2);break}if(!Wy())return u.return(n);if(!r){u.A(3);break}return E(u,function(t){var n;return L(function(r){return 1==r.g?"CAST"!==ae().Ua()?r.A(2):E(r,function(t){var n,r,i,a;return L(function(s){if(1==s.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(pt(t.contentType));switch(n=t.contentType,t.width&&t.height&&t.width>1280&&t.height>720&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&((r=Math.round(t.framerate))<24||r>30)&&(n+="; framerate="+t.framerate),t.transferFunction||""){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return s.return(!1)}return i=!1,(a=YT).has(n)?(i=a.get(n),s.A(2)):E(s,cast.__platform__.canDisplayType(n),3)}return 2!=s.g&&(i=s.h,a.set(n,i)),s.return(i)})}(t),3):2!=r.g?(n=r.h,r.return(n)):r.return(pt(t.contentType))})}(r),4);case 4:if(!u.h)return u.return(n);case 3:if(i){var d=ae().Ua(),c=i.contentType;if("CAST"===d&&i.spatialRendering&&(c+="; spatialRendering=true"),!pt(c))return u.return(n)}case 2:return t.keySystemConfiguration?(o=t.keySystemConfiguration,E(u,function(e,t,n){var r,i,a,s,o,l,u,d,c,h,f;return L(function(g){switch(g.g){case 1:if(r=[],i=[],n.audio&&(a={robustness:n.audio.robustness||"",contentType:t.contentType},ae().si()&&t.contentType.includes('codecs="ac-3"')&&(a.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(a.encryptionScheme=n.audio.encryptionScheme),r.push(a)),n.video&&(s={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(s.encryptionScheme=n.video.encryptionScheme),i.push(s)),o={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},r.length&&(o.audioCapabilities=r),i.length&&(o.videoCapabilities=i),l=e?e.contentType:"",u=t?t.contentType:"",d=or(l)+";"+sr(l),c=or(u)+";"+sr(u),h=n.keySystem,f=null,S(g,2),Si.has(d+"#"+c+"#"+h)){f=Si.get(d+"#"+c+"#"+h)||null,g.A(4);break}return E(g,navigator.requestMediaKeySystemAccess(n.keySystem,[o]),5);case 5:f=g.h,Si.set(d+"#"+c+"#"+h,f);case 4:A(g,3);break;case 2:I(g);case 3:return g.return(f)}})}(r,i,o),6)):(n.supported=!0,u.return(n));case 6:(l=u.h)&&(n.supported=!0,n.keySystemAccess=l);case 5:return u.return(n)}})}gT.Aria=bT,bT.install=ET,pT(ET),ST.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=g(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},ST.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},gT.EmeEncryptionScheme=kT,kT.install=_T,pT(_T),gT.Fullscreen=DT,DT.install=LT,pT(LT),gT.MCapEncryptionScheme=NT,NT.install=PT,pT(PT,-2),gT.MediaCapabilities=zT,zT.install=BT,zT.originalMcap=null;var qT,GT,HT,VT,KT,$T,YT=new Map;function WT(){}function XT(){var t=ae(),n="WEBKIT"===t.Ha()?t.za():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(n<=12?(QT(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):n<=15&&QT()),n=(t=g(t.Ei())).next();!n.done;n=t.next())JT(n.value);(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=ir(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=ir(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;ae().$i()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),r=n.findIndex(function(e){return e.startsWith("codecs=")});if(r<0)return e(t);var i=n[r].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=i.findIndex(function(e){return e.startsWith("vp09")});return a>=0&&(i[a]="vp9",n[r]='codecs="'+i.join(",")+'"',t=n.join("; ")),e(t)})}()}function QT(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,M.apply(0,arguments));return t.abort=function(){},t}}function JT(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return sr(e)!=t&&n(e)},e.ManagedMediaSource){var r=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return sr(e)!=t&&r(e)}}}function ZT(){}function eS(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new tS;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new Mi("change");n.dispatchEvent(e)})}())}function tS(){Oi.call(this),this.type="",this.angle=0}function nS(){}function rS(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=fS&&(void 0!==t&&t&&(qT=!0,GT=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),HT=HTMLMediaElement.prototype.setMediaKeys,VT=e.MediaKeys,KT=e.MediaKeySystemAccess,$T=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=aS,e.MediaKeys=lS,e.MediaKeySystemAccess=oS,navigator.requestMediaKeySystemAccess=iS,e.shakaMediaKeysPolyfill=fS,li.clear(),Si.clear())}function iS(e,t){try{var n=new oS(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function aS(e){var t=this.mediaKeys;return t&&t!=e&&uS(t,null),delete this.mediaKeys,(this.mediaKeys=e)?uS(e,this):Promise.resolve()}function sS(e){if(Oe(e=Ne(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ge(e=je(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Me(e),this.dispatchEvent(t)}function oS(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=g(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var r=!1,i=!1;if(n.audioCapabilities)for(var a=g(n.audioCapabilities),s=a.next();!s.done;s=a.next())(s=s.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),i=!0));if(n.videoCapabilities)for(a=(n=g(n.videoCapabilities)).next();!a.done;a=n.next())(a=a.value).contentType&&(r=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),i=!0));r||(i=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=i?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function lS(e){this.h=new WebKitMediaKeys(e),this.g=new te}function uS(e,t){if(e.g.Pa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",sS);try{return fl(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}function dS(e){Oi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new te,this.sessionId="",this.expiration=NaN,this.closed=new ki,this.keyStatuses=new hS,this.onkeystatuseschange=null}function cS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Mi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function hS(){this.size=0,this.g=void 0}pT(BT,-1),gT.MediaSource=WT,WT.install=XT,pT(XT),gT.Orientation=ZT,ZT.install=eS,h(tS,Oi),tS.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},tS.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},pT(eS),gT.PatchedMediaKeysApple=nS,nS.uninstall=function(){e.shakaMediaKeysPolyfill==fS&&qT&&(qT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",GT),HTMLMediaElement.prototype.setMediaKeys=HT,e.MediaKeys=VT,e.MediaKeySystemAccess=KT,navigator.requestMediaKeySystemAccess=$T,GT=$T=HT=KT=VT=null,e.shakaMediaKeysPolyfill="",li.clear(),Si.clear())},nS.install=rS,oS.prototype.createMediaKeys=function(){var e=new lS(this.keySystem);return Promise.resolve(e)},oS.prototype.getConfiguration=function(){return this.g},lS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new dS(this.h)},lS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},lS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},h(dS,Oi),(r=dS.prototype).generateRequest=function(e,t){var n=this;this.h=new ki;try{var r=this.l.createSession("video/mp4",Ne(t));this.i=r,this.sessionId=r.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new Mi("message",e=(new Map).set("messageType",null==n.keyStatuses.Jc()?"license-request":"license-renewal").set("message",Me(e.message))),n.dispatchEvent(e)}),this.j.D(r,"webkitkeyadded",function(){n.g&&(cS(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(r,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:cS(n,"output-not-allowed");break;default:cS(n,"internal-error")}}),cS(this,"status-pending")}catch(i){this.h.reject(i)}return this.h},r.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},r.update=function(e){this.g=new ki;try{this.i.update(Ne(e))}catch(t){this.g.reject(t)}return this.g},r.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Pa()}catch(xA){this.closed.reject(xA)}return this.closed},r.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(r=hS.prototype).Jc=function(){return this.g},r.forEach=function(e){this.g&&e(this.g,Ti.value())},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=Ti.value();return!(!this.g||!Le(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){};var fS="apple";function gS(){}function pS(){if(e.MediaKeys){var t=ae();MediaKeys.prototype.setServerCertificate&&t.re()||(MediaKeys.prototype.setServerCertificate=mS)}}function mS(){return Promise.resolve(!1)}function yS(){}function vS(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)DS="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=ES,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=TS,e.MediaKeys=wS,e.MediaKeySystemAccess=SS,e.shakaMediaKeysPolyfill=LS}}function bS(e){return DS?DS+e.charAt(0).toUpperCase()+e.slice(1):e}function ES(e,t){try{var n=new SS(e,t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}}function TS(e){var t=this.mediaKeys;return t&&t!=e&&AS(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&AS(e,this),Promise.resolve()}function SS(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var r=!1,i=document.getElementsByTagName("video");i=i.length?i[0]:document.createElement("video");for(var a=(t=g(t)).next();!a.done;a=t.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},o=!1;if(a.audioCapabilities)for(var l=g(a.audioCapabilities),u=l.next();!u.done;u=l.next())(u=u.value).contentType&&(o=!0,i.canPlayType(u.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(u),r=!0));if(a.videoCapabilities)for(u=(l=g(a.videoCapabilities)).next();!u.done;u=l.next())(u=u.value).contentType&&(o=!0,i.canPlayType(u.contentType,this.g)&&(s.videoCapabilities.push(u),r=!0));if(o||(r=i.canPlayType("video/mp4",this.g)||i.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):r=!1),r)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function wS(e){this.l=e,this.h=null,this.g=new te,this.i=[],this.j=new Map}function AS(e,t){e.h=t,e.g.Pa();var n=DS;t&&(e.g.D(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Me(t.initData),e.h.dispatchEvent(n)}),e.g.D(t,n+"keymessage",function(t){var n=IS(e,t.sessionId);n&&(t=new Mi("message",t=(new Map).set("messageType",null==n.keyStatuses.Jc()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.D(t,n+"keyadded",function(t){(t=IS(e,t.sessionId))&&t.ready()}),e.g.D(t,n+"keyerror",function(t){var n=IS(e,t.sessionId);if(n){var r=Error("EME v0.1b key error"),i=t.errorCode;i.systemCode=t.systemCode,r.errorCode=i,!t.sessionId&&n.h?(45==t.systemCode&&(r.message="Unsupported session type."),n.h.reject(r),n.h=null):t.sessionId&&n.g?(n.g.reject(r),n.g=null):(r=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?xS(n,"output-restricted"):xS(n,1==r?"expired":"internal-error"))}}))}function IS(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function kS(e,t,n){Oi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new ki,this.keyStatuses=new CS,this.onkeystatuseschange=null}function _S(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var r=Ne(Ge("LOAD_SESSION|"+n));else{var i=Ge("PERSISTENT|");r=et(i,t)}else r=Ne(t)}catch(s){return Promise.reject(s)}e.h=new ki;var a=bS("generateKeyRequest");try{e.j[a](e.i,r)}catch(s){if("InvalidStateError"!=s.name)return e.h=null,Promise.reject(s);new Tr(function(){try{e.j[a](e.i,r)}catch(t){e.h.reject(t),e.h=null}}).ia(.01)}return e.h}function RS(e,t,n){if(e.g)e.g.then(function(){return RS(e,t,n)}).catch(function(){return RS(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var r=Be(n),i=JSON.parse(r);"oct"!=i.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),r=Qe(i.keys[0].k),i=Qe(i.keys[0].kid)}else r=Ne(n),i=null;var a=bS("addKey");try{e.j[a](e.i,r,i,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function xS(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new Mi("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function CS(){this.size=0,this.g=void 0}pT(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||rS())}),gT.PatchedMediaKeysCert=gS,gS.install=pS,pT(pS),gT.PatchedMediaKeysWebkit=yS,yS.install=vS,SS.prototype.createMediaKeys=function(){var e=new wS(this.g);return Promise.resolve(e)},SS.prototype.getConfiguration=function(){return this.h},wS.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new kS(t,this.l,e),this.i.push(e),e},wS.prototype.setServerCertificate=function(){return Promise.resolve(!1)},wS.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},h(kS,Oi),(r=kS.prototype).ready=function(){xS(this,"usable"),this.g&&this.g.resolve(),this.g=null},r.generateRequest=function(e,t){return _S(this,t,null)},r.load=function(e){return"persistent-license"==this.l?_S(this,null,e):Promise.reject(Error("Not a persistent session."))},r.update=function(e){var t=new ki;return RS(this,t,e),t},r.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=bS("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},r.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(r=CS.prototype).Jc=function(){return this.g},r.forEach=function(e){this.g&&e(this.g,Ti.value())},r.get=function(e){if(this.has(e))return this.g},r.has=function(e){var t=Ti.value();return!(!this.g||!Le(e,t))},r.entries=function(){},r.keys=function(){},r.values=function(){};var DS="",LS="webkit";function MS(){}function NS(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=OS,Object.defineProperty(t,"disablePictureInPicture",{get:US,set:zS,enumerable:!0,configurable:!0}),document.exitPictureInPicture=FS,document.addEventListener("webkitpresentationmodechanged",PS,!0))}}function PS(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function OS(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function FS(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function US(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function zS(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function BS(){}function jS(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=qS))}function qS(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function GS(){}function HS(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:VS})}function VS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function KS(){}function $S(){for(var e=g([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())(t=t.value).prototype.indexOf||(t.prototype.indexOf=YS),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=WS),t.prototype.includes||(t.prototype.includes=XS)}function YS(e,t){return Array.prototype.indexOf.call(this,e,t)}function WS(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function XS(e,t){return-1!==this.indexOf(e,t)}function QS(){}function JS(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function ZS(){}function ew(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"==typeof Zs().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=tw)}}function tw(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function nw(){}function rw(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=iw;else if(6==n)t=aw;else{try{var r=!!iw(1,2,"")}catch(i){r=!1}r&&(t=iw)}t&&(e.VTTCue=function(e,n,r){return t(e,n,r)})}}function iw(t,n,r){return new e.TextTrackCue(t,n,r)}function aw(t,n,r){return new e.TextTrackCue(t+"-"+n+"-"+r,t,n,r)}function sw(e){Oi.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new te}function ow(){}pT(vS),gT.PiPWebkit=MS,MS.install=NS,pT(NS),gT.RandomUUID=BS,BS.install=jS,pT(jS),gT.Symbol=GS,GS.install=HS,pT(HS),gT.TypedArray=KS,KS.install=$S,pT($S),gT.VideoPlayPromise=QS,QS.install=JS,pT(JS),gT.VideoPlaybackQuality=ZS,ZS.install=ew,pT(ew),gT.VTTCue=nw,nw.install=rw,pT(rw),h(sw,Oi),(r=sw.prototype).destroy=function(){var e=this;return L(function(t){if(1==t.g)return E(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Oi.prototype.release.call(e),T(t)})},r.configure=function(e){this.m=e},r.getConfiguration=function(){return this.m},r.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},r.getCurrentItemIndex=function(){return this.j},r.getItems=function(){return this.h.slice()},r.insertItems=function(e){this.h.push.apply(this.h,p(e)),this.dispatchEvent(new Mi("itemsinserted"))},r.removeAllItems=function(){var e,t,n,r,i=this;return L(function(a){if(1==a.g)return i.o.Pa(),i.h.length&&i.j>=0?E(a,i.g.Bc(),2):a.A(2);if(4!=a.g){for(e=[],i.i&&(i.i.preloadManager.j||e.push(i.i.preloadManager.destroy()),i.i=null),i.l&&(i.l.preloadManager.j||e.push(i.l.preloadManager.destroy()),i.l=null),t=g(i.h),n=t.next();!n.done;n=t.next())(r=n.value).preloadManager&&!r.preloadManager.j&&e.push(r.preloadManager.destroy());return e.length?E(a,Promise.all(e),4):a.A(4)}i.h=[],i.j=-1,i.dispatchEvent(new Mi("itemsremoved")),T(a)})},r.playItem=function(e){var t,n,r,i,a,s,o,l,u,d,c,h,f,p,m,y,v,b=this;return L(function(w){switch(w.g){case 1:if(b.o.Pa(),!b.h.length||e>=b.h.length)throw new Ue(2,7,7007);if(t=b.getCurrentItem(),n=b.h[e],b.j!=e&&(b.j=e,b.dispatchEvent(new Mi("currentitemchanged"))),r=b.g.h,(i=b.m?b.m.preloadNextUrlWindow:0)>0&&(a=!1,b.o.D(r,"timeupdate",function(){var e,t,n,s;return L(function(o){switch(o.g){case 1:if(b.l||b.h.length<=1||a||b.g.W()||!r.duration)return o.return();if(e=b.g.Qa().end-r.currentTime,isNaN(e)){o.A(0);break}if(!(e<=i)){o.A(0);break}if(t=b.m&&b.m.repeatMode,n=null,b.j+1<b.h.length?n=b.h[b.j+1]:1==t&&(n=b.h[0]),!n||n.preloadManager&&!n.preloadManager.j){o.A(0);break}return a=!0,s=null,S(o,5),E(o,b.g.preload(n.manifestUri,n.startTime,n.mimeType,n.config),7);case 7:s=o.h,A(o,6);break;case 5:I(o),s=null;case 6:b.l={item:n,preloadManager:s},a=!1,T(o)}})})),b.o.D(b.g,"complete",function(){var e=b.m&&b.m.repeatMode,t=!1;if(2==e)t=!0;else{var n=b.j+1;n<b.h.length?b.playItem(n):1==e&&(1==b.h.length?t=!0:b.playItem(0))}t&&(r.paused?(r.currentTime=b.g.Qa().start,r.play()):b.o.D(r,"paused",function(){r.currentTime=b.g.Qa().start,r.play()}))}),s=n.manifestUri,n.preloadManager&&!n.preloadManager.j&&(s=n.preloadManager),o=!1,b.l&&b.l.item==n&&b.l.preloadManager?s=b.l.preloadManager:b.i&&b.i.item==n&&b.i.preloadManager&&(s=b.i.preloadManager,o=!0),!b.i){w.A(2);break}if(o||b.i.preloadManager.j){w.A(3);break}return E(w,b.i.preloadManager.destroy(),3);case 3:b.i=null;case 2:if(!(b.m&&b.m.preloadPrevItem&&t&&b.g.m===tf)){w.A(5);break}return l=null,S(w,6),E(w,b.g.dj(),8);case 8:l=w.h,A(w,7);break;case 6:I(w),l=null;case 7:b.i={item:t,preloadManager:l};case 5:return n.config&&(b.g.Ii(),b.g.configure(n.config)),E(w,b.g.load(s,n.startTime,n.mimeType),9);case 9:if(b.l=null,n.extraText)for(u=g(n.extraText),d=u.next();!d.done;d=u.next())(c=d.value).mime?b.g.Od(c.uri,c.language,c.kind,c.mime,c.codecs):b.g.Od(c.uri,c.language,c.kind);if(n.extraThumbnail)for(h=g(n.extraThumbnail),f=h.next();!f.done;f=h.next())p=f.value,b.g.Me(p);if(n.extraChapter)for(m=g(n.extraChapter),y=m.next();!y.done;y=m.next())v=y.value,b.g.Le(v.uri,v.language,v.mime);T(w)}})},B("shaka.queue.QueueManager",sw),sw.prototype.playItem=sw.prototype.playItem,sw.prototype.removeAllItems=sw.prototype.removeAllItems,sw.prototype.insertItems=sw.prototype.insertItems,sw.prototype.getItems=sw.prototype.getItems,sw.prototype.getCurrentItemIndex=sw.prototype.getCurrentItemIndex,sw.prototype.getCurrentItem=sw.prototype.getCurrentItem,sw.prototype.getConfiguration=sw.prototype.getConfiguration,sw.prototype.configure=sw.prototype.configure,sw.prototype.destroy=sw.prototype.destroy,of=function(e){return new sw(e)},ow.prototype.parseInit=function(){},ow.prototype.setSequenceMode=function(){},ow.prototype.setManifestType=function(){},ow.prototype.parseMedia=function(e,t){for(var n=null,r=[],i=(e=g(e=Be(e).split(/\r?\n/))).next();!i.done;i=e.next())if((i=i.value)&&!/^\s+$/.test(i)&&(i=lw.exec(i))){var a=uw.exec(i[1]);i=new En(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,i[2]),n&&(n.endTime=a,r.push(n)),n=i}return n&&r.push(n),r},B("shaka.text.LrcTextParser",ow),ow.prototype.parseMedia=ow.prototype.parseMedia,ow.prototype.setManifestType=ow.prototype.setManifestType,ow.prototype.setSequenceMode=ow.prototype.setSequenceMode,ow.prototype.parseInit=ow.prototype.parseInit;var lw=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,uw=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function dw(){this.g="UNKNOWN"}function cw(e,t,n,r,i,a,s,o,l,u,d,c,h,f){var p=d;if(Ht(t)){if(!c)return null;var m={tagName:"span",children:[$t(t)],attributes:{},parent:null}}else m=t;for(var y=null,v=g(zw),b=v.next();!b.done&&!(y=bw(m,"backgroundImage",i,"#",b.value)[0]);b=v.next());v=null;var E=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if((b=tn(m,zw,"backgroundImage"))&&E.test(b)){if((v=parseInt(b.split(":").pop(),10)-1)>=f.length)return null;v=f[v]}else h&&b&&!b.startsWith("#")&&(E=new pe(h),b=new pe(b),(b=E.resolve(b).toString())&&(v=b));if(("p"==t.tagName||y||v)&&(c=!0),t=c,b="default"==(m.attributes["xml:space"]||(l?"default":"preserve")),l=[],!(E=m.children.every(Ht)))for(var T=g(m.children),S=T.next();!S.done;S=T.next())(S=cw(e,S.value,n,r,i,a,s,o,b,u,m,c,h,f))&&l.push(S);if(i=null!=d,h=$t(m),h=m.children.length&&h&&/\S/.test(h),!((T=m.attributes.begin||m.attributes.end||m.attributes.dur)||h||"br"==m.tagName||0!=l.length||i&&!b))return null;for(h=(f=Tw(m,r)).start,f=f.end;p&&p.tagName&&"tt"!=p.tagName;)h=(f=Ew(p,r,h,f)).start,f=f.end,p=p.parent;if(null==h&&(h=0),h+=n.periodStart,f=null==f?1/0:f+n.periodStart,"HLS"!==e.g&&(h=Math.max(h,n.segmentStart),f=Math.min(f,n.segmentEnd)),!T&&l.length>0)for(h=1/0,f=0,r=(n=g(l)).next();!r.done;r=n.next())r=r.value,h=Math.min(h,r.startTime),f=Math.max(f,r.endTime);if("br"==m.tagName)return(e=new En(h,f,"")).lineBreak=!0,e;if(n="",E&&(n=Ke($t(m)||""),b&&(n=n.replace(/\s+/g," "))),(n=new En(h,f,n)).nestedCues=l,c||(n.isContainer=!0),u&&(n.cellResolution=u),u=bw(m,"region",s,"")[0],m.attributes.region&&u&&u.attributes["xml:id"]){var w=u.attributes["xml:id"];n.region=o.filter(function(e){return e.id==w})[0]}return o=u,d&&i&&!m.attributes.region&&!m.attributes.style&&(o=bw(d,"region",s,"")[0]),function(e,t,n,r,i,a,s,o,l){if("rtl"==pw(e,n,r,s,"direction",o=o||l)&&(t.direction="rtl"),"tb"==(l=pw(e,n,r,s,"writingMode",o))||"tblr"==l?t.writingMode="vertical-lr":"tbrl"==l?t.writingMode="vertical-rl":"rltb"==l||"rl"==l?t.direction="rtl":l&&(t.direction=Ln),(l=pw(e,n,r,s,"textAlign",!0))?(t.positionAlign=Ow.get(l),t.lineAlign=Pw.get(l),t.textAlign=xn[l.toUpperCase()]):t.textAlign=Rn,(l=pw(e,n,r,s,"displayAlign",!0))&&(t.displayAlign=Dn[l.toUpperCase()]),(l=pw(e,n,r,s,"color",o))&&(t.color=fw(l)),(l=pw(e,n,r,s,"backgroundColor",o))&&(t.backgroundColor=fw(l)),(l=pw(e,n,r,s,"border",o))&&(t.border=l),l=pw(e,n,r,s,"fontFamily",o))switch(l){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=l.split(",").filter(function(e){return"default"!=e}).join(",")}switch((l=pw(e,n,r,s,"fontWeight",o))&&"bold"==l&&(t.fontWeight=Bn),l=pw(e,n,r,s,"wrapOption",o),t.wrapLine=!l||"noWrap"!=l,(l=pw(e,n,r,s,"lineHeight",o))&&l.match(_w)&&(t.lineHeight=l),(l=pw(e,n,r,s,"fontSize",o))&&(l.match(_w)||l.match(kw))&&(t.fontSize=l),(l=pw(e,n,r,s,"fontStyle",o))&&(t.fontStyle=Gn[l.toUpperCase()]),i?(a=i.attributes.imageType||i.attributes.imagetype,l=i.attributes.encoding,i=$t(i).trim(),"PNG"==a&&"Base64"==l&&i&&(t.backgroundImage="data:image/png;base64,"+i)):a&&(t.backgroundImage=a),(i=pw(e,n,r,s,"textOutline",o))&&((i=i.split(" "))[0].match(_w)?t.textStrokeColor=t.color:(t.textStrokeColor=fw(i[0]),i.shift()),i[0]&&i[0].match(_w)?t.textStrokeWidth=i[0]:t.textStrokeColor=""),(i=pw(e,n,r,s,"letterSpacing",o))&&i.match(_w)&&(t.letterSpacing=i),(i=pw(e,n,r,s,"linePadding",o))&&i.match(_w)&&(t.linePadding=i),(i=pw(e,n,r,s,"opacity",o))&&(t.opacity=parseFloat(i)),(i=mw(e,r,s,"textDecoration"))&&gw(t,i),(i=yw(e,n,s,"textDecoration"))&&gw(t,i),(i=pw(e,n,r,s,"textCombine",o))&&(t.textCombineUpright=i),pw(e,n,r,s,"ruby",o)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}(e,n,m,o,y,v,a,t,0==l.length),n}function hw(e,t,n,r){var i=new _t,a=t.attributes["xml:id"];if(!a)return null;i.id=a,a=null,r&&(a=Iw.exec(r)||Rw.exec(r)),r=a?Number(a[1]):null,a=a?Number(a[2]):null;var s,o=mw(e,t,n,"extent");if(o){var l=(s=Iw.exec(o))||Rw.exec(o);null!=l&&(i.width=Number(l[1]),i.height=Number(l[2]),s||(null!=r&&(i.width=100*i.width/r),null!=a&&(i.height=100*i.height/a)),i.widthUnits=s||null!=r?Rt:0,i.heightUnits=s||null!=a?Rt:0)}return(e=mw(e,t,n,"origin"))&&null!=(l=(s=Iw.exec(e))||Rw.exec(e))&&(i.viewportAnchorX=Number(l[1]),i.viewportAnchorY=Number(l[2]),s?o||(i.width=100-i.viewportAnchorX,i.widthUnits=Rt,i.height=100-i.viewportAnchorY,i.heightUnits=Rt):(null!=a&&(i.viewportAnchorY=100*i.viewportAnchorY/a),null!=r&&(i.viewportAnchorX=100*i.viewportAnchorX/r)),i.viewportAnchorUnits=s||null!=r?Rt:0),i}function fw(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&4==(t=t[1].split(",")).length?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function gw(e,t){for(var n=(t=g(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(Hn)||e.textDecoration.push(Hn);break;case"noUnderline":e.textDecoration.includes(Hn)&&Q(e.textDecoration,Hn);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Q(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Q(e.textDecoration,"overline")}}function pw(e,t,n,r,i,a){return a=void 0===a||a,(t=yw(e,t,r,i))?t:a?mw(e,n,r,i):null}function mw(e,t,n,r){if(!t)return null;var i=tn(t,Uw,r);return i||vw(e,t,n,r)}function yw(e,t,n,r){var i=tn(t,Uw,r);return i||vw(e,t,n,r)}function vw(e,t,n,r){t=bw(t,"style",n,"");for(var i=null,a=0;a<t.length;a++){var s=Zt(t[a],"urn:ebu:tt:style",r);s||(s=tn(t[a],Uw,r)),s||(s=yw(e,t[a],n,r)),s&&(i=s)}return i}function bw(e,t,n,r,i){var a=[];if(!e||n.length<1)return a;var s=e;for(e=null;!e&&!(e=i?Zt(s,i,t):s.attributes[t])&&(s=s.parent););if(t=e)for(i=(t=g(t.split(" "))).next();!i.done;i=t.next())for(i=i.value,s=(e=g(n)).next();!s.done;s=e.next())if(r+(s=s.value).attributes["xml:id"]==i){a.push(s);break}return a}function Ew(e,t,n,r){return e=Tw(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==r?r=e.end:null!=e.start&&(r+=e.start),{start:n,end:r}}function Tw(e,t){var n=Sw(e.attributes.begin,t),r=Sw(e.attributes.end,t);return e=Sw(e.attributes.dur,t),null==r&&null!=e&&(r=n+e),{start:n,end:r}}function Sw(e,t){var n=null;if(xw.test(e)){e=xw.exec(e),n=Number(e[1]);var r=Number(e[2]),i=Number(e[3]),a=Number(e[4]);n=(i+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*r+3600*n}else if(Cw.test(e))n=ww(Cw,e);else if(Dw.test(e))n=ww(Dw,e);else if(Lw.test(e))e=Lw.exec(e),n=Number(e[1])/t.frameRate;else if(Mw.test(e))e=Mw.exec(e),n=Number(e[1])/t.g;else if(Nw.test(e))n=ww(Nw,e);else if(e)throw new Ue(2,2,2001,"Could not parse cue time range in TTML");return n}function ww(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Aw(e,t,n,r){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(r),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}fr("application/x-subtitle-lrc",function(){return new ow}),dw.prototype.parseInit=function(){},dw.prototype.setSequenceMode=function(){},dw.prototype.setManifestType=function(e){this.g=e},dw.prototype.parseMedia=function(e,t,n,r){var i=Be(e);if(e=[],""==i)return e;var a=qt(i,"tt",!0);if(!a)throw new Ue(2,2,2005,"Failed to parse TTML.");if(!(i=Wt(a,"body")[0]))return[];var s=tn(a,Fw,"frameRate"),o=tn(a,Fw,"subFrameRate"),l=tn(a,Fw,"frameRateMultiplier"),u=tn(a,Fw,"tickRate"),d=tn(a,Fw,"cellResolution"),c=a.attributes["xml:space"]||"default",h=tn(a,Uw,"extent");if("default"!=c&&"preserve"!=c)throw new Ue(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,s=new Aw(s,o,l,u),d=function(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}(d),o=((o=Wt(a,"metadata")[0])?o.children:[]).filter(function(e){return"\n"!=e}),l=Wt(a,"style"),u=[];for(var f=g(a=Wt(a,"region")),p=f.next();!p.done;p=f.next())(p=hw(this,p.value,l,h))&&u.push(p);if(Kt(i,"p").length)throw new Ue(2,2,2001,"<p> can only be inside <div> in TTML");for(f=(h=g(Kt(i,"div"))).next();!f.done;f=h.next())if(Kt(f.value,"span").length)throw new Ue(2,2,2001,"<span> can only be inside <p> in TTML");return(t=cw(this,i,t,s,o,l,a,u,c,d,null,!1,n,r))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},B("shaka.text.TtmlTextParser",dw),dw.prototype.parseMedia=dw.prototype.parseMedia,dw.prototype.setManifestType=dw.prototype.setManifestType,dw.prototype.setSequenceMode=dw.prototype.setSequenceMode,dw.prototype.parseInit=dw.prototype.parseInit;var Iw=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,kw=/^(\d{1,4}(?:\.\d+)?|100)%$/,_w=/^(\d+px|\d+em|\d*\.?\d+c)$/,Rw=/^(\d+)px (\d+)px$/,xw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Cw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Dw=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,Lw=/^(\d*(?:\.\d*)?)f$/,Mw=/^(\d*(?:\.\d*)?)t$/,Nw=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Pw=(new Map).set("left",Pn).set("center","center").set("right","end").set("start",Pn).set("end","end"),Ow=(new Map).set("left","line-left").set("center","center").set("right","line-right"),Fw=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Uw=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],zw=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Bw(){this.g=new dw}function jw(){this.g="UNKNOWN"}function qw(e,t,n){var r;(r=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=r[1],e.textAlign="middle"==t?Rn:xn[t.toUpperCase()]):(r=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==r[1]?"vertical-lr":"vertical-rl":(r=/^size:([\d.]+)%$/.exec(t))?e.size=Number(r[1]):(r=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(r[1]),r[2]&&(t=r[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":_n)):(r=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,r[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=On[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Nn,e.line=Number(n[1]),n[2]&&(e.lineAlign=On[n[2].toUpperCase()]))}function Gw(){this.g=null}function Hw(e,t,n){var r,i,a;return(new ia).box("payl",ua(function(e){r=Be(e)},!1)).box("iden",ua(function(e){i=Be(e)},!1)).box("sttg",ua(function(e){a=Be(e)},!1)).parse(e),r?function(e,t,n,r,i){if(wn(e=new En(r,i,e)),t&&(e.id=t),n)for(t=new Ct(n),n=Mt(t);n;)qw(e,n,[]),Dt(t),n=Mt(t);return e}(r,i,a,t,n):null}function Vw(){}function Kw(){this.g=new jw}function $w(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=g((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function Yw(){}function Ww(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Xw(n))&&(e.color=n),(n=t.BackColour)&&(n=Xw(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Bn),t.Italic&&(e.fontStyle=qn),t.Underline&&e.textDecoration.push(Hn),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Cn,e.textAlign="start";break;case 2:e.displayAlign=Cn,e.textAlign=Rn;break;case 3:e.displayAlign=Cn,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=Rn;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=Rn;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function Xw(e){return(e=parseInt(e.replace("&H",""),16))>=0?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Qw(e){return 3600*((e=tA.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}fr("application/ttml+xml",function(){return new dw}),Bw.prototype.parseInit=function(e){var t=!1;if((new ia).box("moov",aa).box("trak",aa).box("mdia",aa).box("minf",aa).box("stbl",aa).S("stsd",sa).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Ue(2,2,2007)},Bw.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},Bw.prototype.setManifestType=function(e){this.g.setManifestType(e)},Bw.prototype.parseMedia=function(e,t,n){var r=[],i=null,a=[],s=new Map,o=[];if((new ia).box("moof",aa).box("traf",aa).S("tfhd",function(e){i=es(e.reader,e.flags).Ud}).S("trun",function(e){for(var t=(e=g((e=rs(e.reader,e.version,e.flags)).hh)).next();!t.done;t=e.next())o.push(t.value.sampleSize||i||0)}).S("subs",function(e){for(var t=e.reader,n=t.U(),r=-1,i=0;i<n;i++){var a=t.U();r+=a,a=t.Ca();for(var o=[],l=0;l<a;l++)1==e.version?o.push(t.U()):o.push(t.Ca()),t.Y(),t.Y(),t.U();s.set(r,o)}}).box("mdat",ua(function(e){a.push(e)},!1)).parse(e,!1),0==a.length)throw new Ue(2,2,2007);for(var l=et.apply(Ye,p(a)),u=0,d=0;d<o.length;d++){var c=Ne(l,u,o[d]);u+=o[d];var h=s.get(d);if(h&&h.length){c=Ne(c,0,h[0]);for(var f=[],m=h[0],y=1;y<h.length;y++){var v=Ne(e,m,h[y]);v=We(v),f.push("data:image/png;base64,"+v),m+=h[y]}r=r.concat(this.g.parseMedia(c,t,n,f))}else r=r.concat(this.g.parseMedia(c,t,n,[]))}return r},B("shaka.text.Mp4TtmlParser",Bw),Bw.prototype.parseMedia=Bw.prototype.parseMedia,Bw.prototype.setManifestType=Bw.prototype.setManifestType,Bw.prototype.setSequenceMode=Bw.prototype.setSequenceMode,Bw.prototype.parseInit=Bw.prototype.parseInit,fr('application/mp4; codecs="stpp"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.im1i"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.im1t"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.im2i"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.im2t"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.etd1"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new Bw}),fr('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new Bw}),fr('application/mp4; codecs="stpp.TTML.im1t"',function(){return new Bw}),jw.prototype.parseInit=function(){},jw.prototype.setSequenceMode=function(){},jw.prototype.setManifestType=function(e){this.g=e},jw.prototype.parseMedia=function(e,t){var n=(e=(e=Be(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Ue(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var r=n[0];if(e=r.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=r.match(/MPEGTS:(\d+)/m),!e||!r)throw new Ue(2,2,2e3);if(null==(e=Pt(e[1])))throw new Ue(2,2,2e3);r=Number(r[1]);for(var i=t.segmentStart-t.periodStart;i>=95443.7176888889;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],i=(r=g(n[0].split("\n"))).next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Ct(i);var a=new _t;Mt(i),Dt(i);for(var s=Mt(i);s;){var o=a,l=s;(s=/^id=(.*)$/.exec(l))?o.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(l))?o.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(l))?(o.height=Number(s[1]),o.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.regionAnchorX=Number(s[1]),o.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(o.viewportAnchorX=Number(s[1]),o.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(l)&&(o.scroll="up"),Dt(i),s=Mt(i)}t.push(a)}for(An(r=new Map),i=[],a=(n=g(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(o=[],s=-1,l=1;l<a.length;l++)a[l].includes("::cue")&&(o.push([]),s=o.length-1),-1!=s&&(o[s].push(a[l]),a[l].includes("}")&&(s=-1));for(s=(o=g(o)).next();!s.done;s=o.next()){var u=s.value;s="global",(l=u[0].match(/\((.*)\)/))&&(s=l.pop()),l=u.slice(1,-1),u[0].includes("}")&&(u=/\{(.*?)\}/.exec(u[0]))&&(l=u[1].split(";")),(u=r.get(s))||(u=new En(0,0,""));for(var d=!1,c=0;c<l.length;c++){var h=/^\s*([^:]+):\s*(.*)/.exec(l[c]);if(h){var f=h[2].trim().replace(";","");switch(h[1].trim()){case"background-color":case"background":d=!0,u.backgroundColor=f;break;case"color":d=!0,u.color=f;break;case"font-family":d=!0,u.fontFamily=f;break;case"font-size":d=!0,u.fontSize=f;break;case"font-weight":(parseInt(f,10)>=700||"bold"==f)&&(d=!0,u.fontWeight=Bn);break;case"font-style":switch(f){case"normal":d=!0,u.fontStyle=jn;break;case"italic":d=!0,u.fontStyle=qn;break;case"oblique":d=!0,u.fontStyle="oblique"}break;case"opacity":d=!0,u.opacity=parseFloat(f);break;case"text-combine-upright":d=!0,u.textCombineUpright=f;break;case"text-shadow":d=!0,u.textShadow=f;break;case"white-space":d=!0,u.wrapLine="noWrap"!=f}}}d&&r.set(s,u)}}if(d=e,1==(u=a).length&&!u[0]||/^NOTE($|[ \t])/.test(u[0])||"STYLE"==u[0]||"REGION"==u[0])a=null;else if(a=null,u[0].includes("--\x3e")||(a=u[0],u.splice(0,1)),s=Nt(o=new Ct(u[0])),c=Lt(o,/[ \t]+--\x3e[ \t]+/g),l=Nt(o),null==s||null==c||null==l)K("Failed to parse VTT time code. Cue skipped:",a,u),a=null;else{for(s+=d,l+=d,d=u.slice(1).join("\n").trim(),r.has("global")?((u=r.get("global").clone()).startTime=s,u.endTime=l,u.payload=d):u=new En(s,l,d),Dt(o),s=Mt(o);s;)qw(u,s,t),Dt(o),s=Mt(o);wn(u,r),null!=a&&(u.id=a),a=u}a&&i.push(a)}return i},B("shaka.text.VttTextParser",jw),jw.prototype.parseMedia=jw.prototype.parseMedia,jw.prototype.setManifestType=jw.prototype.setManifestType,jw.prototype.setSequenceMode=jw.prototype.setSequenceMode,jw.prototype.parseInit=jw.prototype.parseInit,fr("text/vtt",function(){return new jw}),fr('text/vtt; codecs="vtt"',function(){return new jw}),fr('text/vtt; codecs="wvtt"',function(){return new jw}),Gw.prototype.parseInit=function(e){var t=this,n=!1;if((new ia).box("moov",aa).box("trak",aa).box("mdia",aa).S("mdhd",function(e){e=ns(e.reader,e.version),t.g=e.timescale}).box("minf",aa).box("stbl",aa).S("stsd",sa).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Ue(2,2,2008);if(!n)throw new Ue(2,2,2008)},Gw.prototype.setSequenceMode=function(){},Gw.prototype.setManifestType=function(){},Gw.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Ue(2,2,2008);var n,r=0,i=[],a=[],s=!1,o=!1,l=!1,u=null;if((new ia).box("moof",aa).box("traf",aa).S("tfdt",function(e){s=!0,r=ts(e.reader,e.version).baseMediaDecodeTime}).S("tfhd",function(e){u=es(e.reader,e.flags).Td}).S("trun",function(e){o=!0,i=rs(e.reader,e.version,e.flags).hh}).box("mdat",ua(function(e){l=!0,n=e},!1)).parse(e,!1),!l&&!s&&!o)throw new Ue(2,2,2008);e=r;for(var d=new ta(n,0),c=g(i),h=c.next();!h.done;h=c.next()){var f=(h=h.value).ih||u,p=h.Cf?r+h.Cf:e;e=p+(f||0);var m=0;do{var y=d.U();m+=y;var v=null;"vttc"==ca(d.U())?y>8&&(v=d.Tb(y-8,!1)):d.skip(y-8),f&&v&&(y=Hw(v,t.periodStart+p/this.g,t.periodStart+e/this.g),a.push(y))}while(h.sampleSize&&m<h.sampleSize)}return a.filter(Ar)},B("shaka.text.Mp4VttParser",Gw),Gw.prototype.parseMedia=Gw.prototype.parseMedia,Gw.prototype.setManifestType=Gw.prototype.setManifestType,Gw.prototype.setSequenceMode=Gw.prototype.setSequenceMode,Gw.prototype.parseInit=Gw.prototype.parseInit,fr('application/mp4; codecs="wvtt"',function(){return new Gw}),Vw.prototype.parseInit=function(){},Vw.prototype.setSequenceMode=function(){},Vw.prototype.setManifestType=function(){},Vw.prototype.parseMedia=function(e){var t=Be(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=g(t.split("\n\n"))).next();!n.done;n=t.next()){var r=new Ct((n=n.value.split("\n"))[0]),i=Nt(r),a=Lt(r,/,/g);if(r=Nt(r),null==i||null==a||null==r)throw new Ue(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new En(i,r,n.slice(1).join("\n").trim()))}return e},B("shaka.text.SbvTextParser",Vw),Vw.prototype.parseMedia=Vw.prototype.parseMedia,Vw.prototype.setManifestType=Vw.prototype.setManifestType,Vw.prototype.setSequenceMode=Vw.prototype.setSequenceMode,Vw.prototype.parseInit=Vw.prototype.parseInit,fr("text/x-subviewer",function(){return new Vw}),Kw.prototype.parseInit=function(){},Kw.prototype.setSequenceMode=function(){},Kw.prototype.setManifestType=function(){},Kw.prototype.parseMedia=function(e,t,n){return e=Ne(Ge(e=$w(e=Be(e)))),this.g.parseMedia(e,t,n,[])},B("shaka.text.SrtTextParser",Kw),Kw.srt2webvtt=$w,Kw.prototype.parseMedia=Kw.prototype.parseMedia,Kw.prototype.setManifestType=Kw.prototype.setManifestType,Kw.prototype.setSequenceMode=Kw.prototype.setSequenceMode,Kw.prototype.parseInit=Kw.prototype.parseInit,fr("text/srt",function(){return new Kw}),Yw.prototype.parseInit=function(){},Yw.prototype.setSequenceMode=function(){},Yw.prototype.setManifestType=function(){},Yw.prototype.parseMedia=function(e){var t="",n="",r=null,i=null;for(i=(e=g(i=Be(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var a=i.value;i=a,(a=Jw.exec(a))&&(r=a[1],i=a[2]),"V4 Styles"==r||"V4+ Styles"==r?(t=i,t=n?t+"\n"+i:i):"Events"==r&&(n=n?n+"\n"+i:i)}for(r=[],i=null,e=(t=g(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=Zw.exec(e)))if(e=a[1].trim(),a=a[2].trim(),"Format"==e)i=a.split(eA);else if("Style"==e){e=a.split(eA),a={};for(var s=0;s<i.length&&s<e.length;s++)a[i[s]]=e[s];r.push(a)}for(i=[],t=null,a=(n=g(n.split(/\r?\n/))).next(),e={};!a.done;e={Vi:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(s=Zw.exec(a)))if(a=s[1].trim(),s=s[2].trim(),"Format"==a)t=s.split(eA);else if("Dialogue"==a){s=s.split(eA),a={};for(var o=0;o<t.length&&o<s.length;o++)a[t[o]]=s[o];s=new En(o=Qw(a.Start),Qw(a.End),s.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Vi=a.Style,(e=r.find(function(e){return function(t){return t.Name==e.Vi}}(e)))&&Ww(s,e),i.push(s)}return i},B("shaka.text.SsaTextParser",Yw),Yw.prototype.parseMedia=Yw.prototype.parseMedia,Yw.prototype.setManifestType=Yw.prototype.setManifestType,Yw.prototype.setSequenceMode=Yw.prototype.setSequenceMode,Yw.prototype.parseInit=Yw.prototype.parseInit;var Jw=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Zw=/^\s*([^:]+):\s*(.*)/,eA=/\s*,\s*/,tA=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function nA(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)>0?{$d:n,ra:e}:null}function rA(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],r=(60&e[t+2])>>>2;if(r>n.length-1)return null;var i=((192&e[t+2])>>>6)+1,a=(1&e[t+2])<<2;return a|=(192&e[t+3])>>>6,{sampleRate:n[r],channelCount:a,codec:"mp4a.40."+i}}function iA(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var r=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(r<=n)&&((t+=r)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function aA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function sA(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(n>=3)return null;var r=63&e[t+4],i=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*r+n];if(t+i>e.length)return null;var a=e[t+6]>>5,s=0;2===a?s+=2:(1&a&&1!==a&&(s+=2),4&a&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var o=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|o>>2,(3&o)<<6|a<<3|s<<2|r>>4,r<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+s,Ga:e,ra:i}}function oA(e,t){if(11===e[t]&&119===e[t+1]){var n,r,i=0,a=5;for(t+=a;a>0;){r=e[t];var s=Math.min(a,8),o=8-s;n=(r&(n=4278190080>>>24+o<<o))>>o,i=i?i<<s|n:n,t+=1,a-=s}if(i<16)return!0}return!1}function lA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function uA(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new co(e.subarray(t+2));fo(n,2),fo(n,3);var r=go(n,11)+1<<1,i=go(n,2);if(3==i){i=[24e3,22060,16e3][i=go(n,2)];var a=3}else i=[48e3,44100,32e3][i],a=go(n,2);var s=go(n,3),o=go(n,1);return n=go(n,5),t+r>e.byteLength?null:(e=Math.floor(r*i/(16*[1,2,3,6][a])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,i<<6|n<<1,s<<1|o,0]),{sampleRate:i,channelCount:[2,1,2,3,3,4,4,5][s]+o,Ga:e,ra:r})}function dA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}fr("text/x-ssa",function(){return new Yw}),(r=aA.prototype).destroy=function(){this.g.clear()},r.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&pt(this.convertCodecs("audio",e))},r.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(lr(t)||"mp4a.40.2")+'"':t},r.getOriginalMimeType=function(){return this.j},r.transmux=function(e,t,n,r){for(var i=Ne(e),a=lo(i),s=a.length;s<i.length&&!iA(i,s);s++);if(e=1e3*n.endTime,(a=oo(a)).length&&n&&(a=a.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=a.data),!(a=rA(i,s)))return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var o=[];s<i.length;){var l=nA(i,s);if(!l)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));var u=l.$d+l.ra;s+u<=i.length&&o.push({data:i.subarray(s+l.$d,s+u),size:l.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),s+=u}return i=a.sampleRate,e=Math.floor(e*i/1e3),r=new ls([r={id:t.id,type:"audio",codecs:a.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:o},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=us(r),this.g.set(n,t)),n=this.i!==t,r=gs(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},B("shaka.transmuxer.AacTransmuxer",aA),aA.prototype.transmux=aA.prototype.transmux,aA.prototype.getOriginalMimeType=aA.prototype.getOriginalMimeType,aA.prototype.convertCodecs=aA.prototype.convertCodecs,aA.prototype.isSupported=aA.prototype.isSupported,aA.prototype.destroy=aA.prototype.destroy,$n("audio/aac",function(){return new aA("audio/aac")},Xn),(r=lA.prototype).destroy=function(){this.g.clear()},r.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&pt(this.convertCodecs("audio",e))},r.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?ae().oe()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},r.getOriginalMimeType=function(){return this.j},r.transmux=function(e,t,n,r){for(var i=lo(e=Ne(e)),a=i.length;a<e.length&&!oA(e,a);a++);var s=1e3*n.endTime;(i=oo(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var o=new Uint8Array([]),l=[];a<e.length;){var u=sA(e,a);if(!u)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,o=u.Ga,l.push({data:e.subarray(a,a+u.ra),size:u.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=u.ra}return e=Math.floor(s*i/1e3),r=new ls([r={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:o,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=us(r),this.g.set(n,t)),n=this.i!==t,r=gs(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},B("shaka.transmuxer.Ac3Transmuxer",lA),lA.prototype.transmux=lA.prototype.transmux,lA.prototype.getOriginalMimeType=lA.prototype.getOriginalMimeType,lA.prototype.convertCodecs=lA.prototype.convertCodecs,lA.prototype.isSupported=lA.prototype.isSupported,lA.prototype.destroy=lA.prototype.destroy,$n("audio/ac3",function(){return new lA("audio/ac3")},Xn),(r=dA.prototype).destroy=function(){this.g.clear()},r.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&pt(this.convertCodecs("audio",e))},r.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},r.getOriginalMimeType=function(){return this.j},r.transmux=function(e,t,n,r){for(var i=lo(e=Ne(e)),a=i.length;a<e.length&&2935!=(e[a]<<8|e[a+1]);a++);var s=1e3*n.endTime;(i=oo(i)).length&&n&&(i=i.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(s=i.data),i=0;for(var o=new Uint8Array([]),l=[];a<e.length;){var u=uA(e,a);if(!u)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=u.sampleRate,t.channelsCount=u.channelCount,i=u.sampleRate,o=u.Ga,l.push({data:e.subarray(a,a+u.ra),size:u.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=u.ra}return e=Math.floor(s*i/1e3),r=new ls([r={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:i,duration:r,Bb:[],Ga:o,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:e,zb:l},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=us(r),this.g.set(n,t)),n=this.i!==t,r=gs(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})},B("shaka.transmuxer.Ec3Transmuxer",dA),dA.prototype.transmux=dA.prototype.transmux,dA.prototype.getOriginalMimeType=dA.prototype.getOriginalMimeType,dA.prototype.convertCodecs=dA.prototype.convertCodecs,dA.prototype.isSupported=dA.prototype.isSupported,dA.prototype.destroy=dA.prototype.destroy,$n("audio/ec3",function(){return new dA("audio/ec3")},Xn);var cA=[100,110,122,244,44,83,86,118,128,138,139,134];function hA(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),r=e.find(function(e){return 34==e.type});if(!t||!n||!r)return null;var i=function(e){var t=new co(e,!0);return Eo(t),Eo(t),go(t,4),go(t,2),go(t,6),e=go(t,3),t=bo(t),{Tg:e+1,Ah:t}}(t.fullData);e=function(e){Eo(e=new co(e,!0)),Eo(e);var t=0,n=0,r=0,i=0;go(e,4);var a=go(e,3);bo(e);for(var s=go(e,2),o=go(e,1),l=go(e,5),u=Eo(e),d=Eo(e),c=Eo(e),h=Eo(e),f=Eo(e),g=Eo(e),p=Eo(e),m=Eo(e),y=Eo(e),v=Eo(e),b=Eo(e),E=[],T=[],S=0;S<a;S++)E.push(bo(e)),T.push(bo(e));if(a>0)for(S=a;S<8;S++)go(e,2);for(S=0;S<a;S++)E[S]&&go(e,88),T[S]&&Eo(e);yo(e),3==(E=yo(e))&&go(e,1),T=yo(e),S=yo(e),bo(e)&&(t+=yo(e),n+=yo(e),r+=yo(e),i+=yo(e));var w=yo(e),A=yo(e),I=yo(e);if(bo(e))for(var k=0;k<=a;k++)yo(e),yo(e),yo(e);else yo(e),yo(e),yo(e);if(yo(e),yo(e),yo(e),yo(e),yo(e),yo(e),bo(e)&&bo(e))for(k=0;k<4;k++)for(var _=0;_<(3===k?2:6);_++)if(bo(e)){var R=Math.min(64,1<<4+(k<<1));k>1&&vo(e);for(var x=0;x<R;x++)vo(e)}else yo(e);for(bo(e),bo(e),bo(e)&&(Eo(e),yo(e),yo(e),bo(e)),k=yo(e),R=_=0;R<k;R++)if(x=!1,0!==R&&(x=bo(e)),x){R===k&&yo(e),bo(e),yo(e);for(var C=x=0;C<=_;C++){var D=bo(e),L=!1;D||(L=bo(e)),(D||L)&&x++}_=x}else{for(_=(C=yo(e))+(x=yo(e)),D=0;D<C;D++)yo(e),bo(e);for(C=0;C<x;C++)yo(e),bo(e)}if(bo(e))for(k=yo(e),_=0;_<k;_++){for(R=0;R<I+4;R++)go(e,1);go(e,1)}if(k=I=1,_=!0,R=1,C=x=0,bo(e),bo(e),bo(e)){if(bo(e)){L=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];(D=Eo(e))>0&&D<=16?(I=L[D-1],k=M[D-1]):255===D&&(I=go(e,16),k=go(e,16))}if(bo(e)&&bo(e),bo(e)&&(go(e,3),bo(e),bo(e)&&(Eo(e),Eo(e),Eo(e))),bo(e)&&(yo(e),yo(e)),bo(e),bo(e),bo(e),(D=bo(e))&&(mo(e),mo(e),mo(e),mo(e)),bo(e)&&(R=go(e,32),x=go(e,32),bo(e)&&yo(e),bo(e))){M=!1,D=bo(e),L=bo(e),(D||L)&&((M=bo(e))&&(Eo(e),go(e,5),bo(e),go(e,5)),go(e,4),go(e,4),M&&go(e,4),go(e,5),go(e,5),go(e,5));for(var N=0;N<=a;N++){var P=!0,O=1;(_=bo(e))||(P=bo(e));var F=!1;if(P?yo(e):F=bo(e),F||(O=yo(e)+1),D){for(P=0;P<O;P++)yo(e),yo(e),M&&(yo(e),yo(e));bo(e)}if(L){for(P=0;P<O;P++)yo(e),yo(e),M&&(yo(e),yo(e));bo(e)}}}bo(e)&&(bo(e),bo(e),bo(e),C=yo(e),yo(e),yo(e),yo(e),yo(e))}return{yg:b,Eg:s,Fg:o,Dg:l,zg:u,Ag:d,Bg:c,Cg:h,rg:f,sg:g,ug:p,vg:m,wg:y,xg:v,pf:C,gg:E,fg:w,eg:A,width:T-(t+n)*(1===E||2===E?2:1),height:S-(r+i)*(1===E?2:1),Rk:I,Qk:k,qg:x/R,pg:_}}(n.fullData);var a=function(e){var t=new co(e,!0);Eo(t),Eo(t),yo(t),yo(t),bo(t),bo(t),go(t,3),bo(t),bo(t),yo(t),yo(t),vo(t),bo(t),bo(t),bo(t)&&yo(t),vo(t),vo(t),bo(t),bo(t),bo(t),bo(t),e=bo(t),t=bo(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{Vg:n}}(r.fullData);return t=function(e,t,n,r){var i=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(i[0]=1,i[1]=(3&r.Eg)<<6|(r.Fg?1:0)<<5|31&r.Dg,i[2]=r.zg,i[3]=r.Ag,i[4]=r.Bg,i[5]=r.Cg,i[6]=r.rg,i[7]=r.sg,i[8]=r.ug,i[9]=r.vg,i[10]=r.wg,i[11]=r.xg,i[12]=r.yg,i[13]=240|(3840&r.pf)>>8,i[14]=255&r.pf,i[15]=252|3&r.Vg,i[16]=252|3&r.gg,i[17]=248|7&r.fg,i[18]=248|7&r.eg,i[19]=0,i[20]=parseInt(r.qg,10),i[21]=(3&(r.pg?1:0))<<6|(7&r.Tg)<<3|(r.Ah?1:0)<<2|3,i[22]=3,e=[e,t,n],t=23,n=e.length-1,r=0;r<e.length;r+=1)i.set(new Uint8Array([32+r|(r===n?128:0),0,1]),t),t+=3,i.set(new Uint8Array([e[r].byteLength>>8,255&e[r].byteLength]),t),t+=2,i.set(e[r],t),t+=e[r].byteLength;return i}(t.fullData,n.fullData,r.fullData,{Tg:i.Tg,Ah:i.Ah,Eg:e.Eg,Fg:e.Fg,yg:e.yg,Dg:e.Dg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,Cg:e.Cg,rg:e.rg,sg:e.sg,ug:e.ug,vg:e.vg,wg:e.wg,xg:e.xg,pf:e.pf,gg:e.gg,fg:e.fg,eg:e.eg,Vg:a.Vg,qg:e.qg,pg:e.pg}),{height:e.height,width:e.width,Ra:t,Za:e.Rk,$a:e.Qk}}function fA(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==i&&15!==i&&3!==a){var s=e[t+3]>>6;i=1e3*mA[14*(3===n?3-r:3===r?3:4)+i-1],a=yA[3*(3===n?0:2===n?1:2)+a],n=vA[n][r];var o=bA[r],l=Math.floor(n*i/a+(e[t+2]>>1&1))*o,u=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(u=u?parseInt(u[1],10):0)&&u<=87&&2===r&&i>=224e3&&0===s&&(e[t+3]|=128),{sampleRate:a,channelCount:3===s?1:2,ra:l,Pk:8*n*o}}return null}function gA(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function pA(e,t){if(t+1<e.length&&gA(e,t)){var n=fA(e,t),r=4;return n&&n.ra&&(r=n.ra),(t+=r)===e.length||t+1<e.length&&gA(e,t)}return!1}var mA=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],yA=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],vA=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],bA=[0,1,1,4];function EA(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function TA(e){this.h=e,this.g=null}
/*
         @license
         MSS Transmuxer
         Copyright 2015 Dash Industry Forum
         SPDX-License-Identifier: BSD-3-Clause
        */
function SA(e){this.h=e,(this.g=$y.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;n<16;n++)this.usertype[n]!==AA[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function wA(e,t){for(var n=8,r=0;r<e.boxes.length&&e.boxes[r].type!==t;r++)n+=e.boxes[r].size;return n}(r=EA.prototype).destroy=function(){this.g.clear()},r.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&pt(this.convertCodecs("audio",e))},r.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},r.getOriginalMimeType=function(){return this.j},r.transmux=function(e,t,n,r){for(var i=Ne(e),a=lo(i).length;a<i.length&&!pA(i,a);a++);var s;for(e=[];a<i.length;){var o=fA(i,a);if(!o)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));s||(s=o),a+o.ra<=i.length&&e.push({data:i.subarray(a,a+o.ra),size:o.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),a+=o.ra}return s?(i=9e4*s.Pk/s.sampleRate*this.h,r=new ls([r={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:s.sampleRate,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.h,baseMediaDecodeTime:i,zb:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=us(r),this.g.set(n,t)),n=this.i!==t,r=gs(r),this.i=t,this.h++,Promise.resolve({data:r,init:n?t:null})):Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null))},B("shaka.transmuxer.Mp3Transmuxer",EA),EA.prototype.transmux=EA.prototype.transmux,EA.prototype.getOriginalMimeType=EA.prototype.getOriginalMimeType,EA.prototype.convertCodecs=EA.prototype.convertCodecs,EA.prototype.isSupported=EA.prototype.isSupported,EA.prototype.destroy=EA.prototype.destroy,$n("audio/mpeg",function(){return new EA("audio/mpeg")},Xn),(r=TA.prototype).destroy=function(){},r.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=lr(e).split(","),n=at("audio",t);return t=at("video",t),!(!n||t||"mp3"!=ar(n))&&pt(this.convertCodecs("audio",e))},r.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},r.getOriginalMimeType=function(){return this.h},r.transmux=function(e,t,n,r,i){if(this.g?this.g.clearData():this.g=new wo,this.g.Gf(n.i),e=Ne(e),"mp3"!=(e=this.g.parse(e)).Vd().audio||"audio"!=i)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),i=g(e.ub()),e=i.next();!e.done;e=i.next())if(e=e.value.data)for(t=0;t<e.length;)(r=fA(e,t))?(t+r.ra<=e.length&&(n=et(n,e.subarray(t,t+r.ra))),t+=r.ra):t++;return Promise.resolve(n)},B("shaka.transmuxer.MpegTsTransmuxer",TA),TA.prototype.transmux=TA.prototype.transmux,TA.prototype.getOriginalMimeType=TA.prototype.getOriginalMimeType,TA.prototype.convertCodecs=TA.prototype.convertCodecs,TA.prototype.isSupported=TA.prototype.isSupported,TA.prototype.destroy=TA.prototype.destroy,$n("video/mp2t",function(){return new TA("video/mp2t")},Qn),(r=SA.prototype).destroy=function(){},r.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),pt(t)||pt(e)))},r.convertCodecs=function(e,t){return t.replace("mss/","")},r.getOriginalMimeType=function(){return this.h},r.transmux=function(e,t,n){if(!n)return Promise.resolve(Ne(e));if(!t.mssPrivateData)return Promise.reject(new Ue(2,3,3020,n?n.P()[0]:null));try{var r,i=this.g.parseBuffer(e),a=i.fetch("tfhd");a.track_ID=t.id+1;var s=i.fetch("tfdt"),o=i.fetch("traf");null===s&&((s=this.g.createFullBox("tfdt",o,a)).version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var l=i.fetch("trun"),u=i.fetch("tfxd");u&&u._parent.boxes.splice(u._parent.boxes.indexOf(u),1);var d=i.fetch("tfrf");d&&d._parent.boxes.splice(d._parent.boxes.indexOf(d),1);var c=i.fetch("sepiff");if(null!==c){c.type="senc",c.usertype=void 0;var h=i.fetch("saio");if(null===h){(h=this.g.createFullBox("saio",o)).version=0,h.flags=0,h.entry_count=1,h.offset=[0];var f=this.g.createFullBox("saiz",o);if(f.version=0,f.flags=0,f.sample_count=c.sample_count,f.default_sample_info_size=0,f.sample_info_size=[],2&c.flags)for(r=0;r<c.sample_count;r+=1)f.sample_info_size[r]=10+6*c.entry[r].NumberOfEntries;else f.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,l.flags|=1;var g=i.fetch("moof");l.data_offset=g.getLength()+8;var p=i.fetch("saio");null!==p&&(p.offset[0]=wA(g,"traf")+wA(o,"senc")+16);var m=Ne(i.write());return Promise.resolve(m)}catch(y){return y instanceof Ue?Promise.reject(y):Promise.reject(new Ue(2,3,3022,n?n.P()[0]:null))}},B("shaka.transmuxer.MssTransmuxer",SA),SA.prototype.transmux=SA.prototype.transmux,SA.prototype.getOriginalMimeType=SA.prototype.getOriginalMimeType,SA.prototype.convertCodecs=SA.prototype.convertCodecs,SA.prototype.isSupported=SA.prototype.isSupported,SA.prototype.destroy=SA.prototype.destroy;var AA=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function IA(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}$n("mss/audio/mp4",function(){return new SA("mss/audio/mp4")},Xn),$n("mss/video/mp4",function(){return new SA("mss/video/mp4")},Xn),(r=IA.prototype).destroy=function(){this.j.clear(),this.i&&this.i.destroy()},r.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var r=lr(n).split(",");return n=at("audio",r),r=at("video",r),!(n&&(n=ar(n),!kA.includes(n))||r&&(n=ar(r),!_A.includes(n)))&&(t?pt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),pt(t)||pt(e)))},r.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=lr(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return Vr(e,"audio/mp4")}).map(Kr).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},r.getOriginalMimeType=function(){return this.m},r.transmux=function(e,t,n,r,i){var a=Ne(e);if("audio"==i&&!_o(a)){for(var s=lo(a),o=s.length;o<a.length;o++)if(pA(a,o))return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));for(o=s.length;o<a.length;o++)if(iA(a,o))return this.i||(this.i=new aA("audio/aac")),this.i.transmux(e,t,n,r,i);return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new wo,this.h.Gf(n.i);var l=this.h.parse(a),u=[],d=l.Vd();try{var c=null;if("video"==i){switch(d.video){case"avc":var h=[],f=null,m=l.ud(),y=function(e){function t(e){i={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(i&&i.nalus.length&&i.frame){for(var e=[],t=g(i.nalus),n=t.next();!n.done;n=t.next()){var a=(n=n.value).fullData.byteLength,s=new Uint8Array(4);s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,e.push(s),e.push(n.fullData)}i.data=et.apply(Ye,p(e)),r.push(i)}}for(var r=[],i=null,a=!1,s=0;s<e.length;s++){var o=e[s],l=o.nalus,u=!1;i&&l.length&&!a&&(n(),t(o));for(var d=(l=g(o.nalus)).next();!d.done;d=l.next()){var c=!1;switch((d=d.value).type){case 1:var h=!1;c=!0;var f=d.data;u&&f.length>4&&(2===(f=So(new co(f)))||4===f||7===f||9===f)&&(h=!0),h&&i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(o),i.frame=!0,i.isKeyframe=h;break;case 5:c=!0,i&&i.frame&&!i.isKeyframe&&(n(),i=null),i||t(o),i.frame=!0,i.isKeyframe=!0;break;case 6:case 8:case 12:c=!0;break;case 7:u=c=!0;break;case 9:a=c=!0,i&&i.frame&&(n(),i=null),i||t(o);break;default:c=!1}i&&c&&i.nalus.push(d)}}return n(),r}(m);if(!y.length)throw new Ue(2,3,3023,n?n.P()[0]:null);for(var v=0;v<y.length;v++){var b,E=y[v];null==f&&(f=E.dts),b=v+1<y.length?(y[v+1].dts||0)-(E.dts||0):y.length>1?(E.dts||0)-(y[v-1].dts||0):9e4*(n.endTime-n.startTime),h.push({data:E.data,size:E.data.byteLength,duration:b,sb:Math.round((E.pts||0)-(E.dts||0)),flags:{xb:0,mb:0,jb:0,gb:0,hb:E.isKeyframe?2:1,yb:E.isKeyframe?0:1}})}for(var T=[],S=g(m),w=S.next();!w.done;w=S.next())T.push.apply(T,p(w.value.nalus));var A=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new co(t.data),r=Eo(n);if(Eo(n),Eo(n),mo(n),cA.includes(r)&&(3===(r=yo(n))&&fo(n,1),mo(n),mo(n),fo(n,1),bo(n))){r=3!==r?8:12;for(var i=0;i<r;i++)bo(n)&&To(n,i<6?16:64)}if(mo(n),0===(r=yo(n)))yo(n);else if(1===r)for(fo(n,1),mo(n),mo(n),r=yo(n),i=0;i<r;i++)mo(n);mo(n),fo(n,1);var a=yo(n),s=yo(n),o=go(n,1);0===o&&fo(n,1),fo(n,1);var l=0,u=0,d=0,c=0;if(bo(n)&&(l=yo(n),u=yo(n),d=yo(n),c=yo(n)),i=r=1,bo(n)&&bo(n)){var h=Eo(n);h>0&&h<=16?(r=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][h-1],i=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][h-1]):255===h&&(r=go(n,16),i=go(n,16))}return n=(2-o)*(s+1)*16-2*d-2*c,a=16*(a+1)-2*l-2*u,l=[],t=t.fullData,l.push(t.byteLength>>>8&255),l.push(255&t.byteLength),l=l.concat.apply(l,p(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,p(e)),{height:n,width:a,Ra:e=new Uint8Array([1,l[3],l[4],l[5],255,225].concat(l,[1],t)),Za:r,$a:i}}(T);if(!A||null==f)throw new Ue(2,3,3018,n?n.P()[0]:null);t.height=A.height,t.width=A.width,c={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:A.Ra,Za:A.Za,$a:A.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:f,zb:h},stream:t};break;case"hvc":var I=[],k=null,_=[],R=l.ud();if(!R.length)throw new Ue(2,3,3023,n?n.P()[0]:null);for(var x=0;x<R.length;x++){var C=R[x],D=C.nalus;_.push.apply(_,p(D));for(var L=!1,M=[],N=!1,P=g(D),O=P.next();!O.done;O=P.next()){var F=O.value;switch(F.type){case 1:case 0:var U=N=!0;break;case 19:case 20:case 21:L=U=N=!0;break;case 32:case 33:case 34:case 39:case 40:U=!0;break;case 35:N=U=!0;break;default:U=!1}if(N&&U){var z=F.fullData.byteLength,B=new Uint8Array(4);B[0]=z>>24&255,B[1]=z>>16&255,B[2]=z>>8&255,B[3]=255&z,M.push(B),M.push(F.fullData)}}var j,q=M.length?{data:et.apply(Ye,p(M)),isKeyframe:L}:null;q&&(null==k&&null!=C.dts&&(k=C.dts),j=x+1<R.length?(R[x+1].dts||0)-(C.dts||0):R.length>1?(C.dts||0)-(R[x-1].dts||0):9e4*(n.endTime-n.startTime),I.push({data:q.data,size:q.data.byteLength,duration:j,sb:Math.round((C.pts||0)-(C.dts||0)),flags:{xb:0,mb:0,jb:0,gb:0,hb:q.isKeyframe?2:1,yb:q.isKeyframe?0:1}}))}var G=hA(_);if(!G||null==k)throw new Ue(2,3,3018,n?n.P()[0]:null);t.height=G.height,t.width=G.width,c={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:9e4,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:G.Ra,Za:G.Za,$a:G.$a,data:{sequenceNumber:this.g,baseMediaDecodeTime:k,zb:I},stream:t}}c&&(u.push(c),c=null)}if("audio"==i){switch(d.audio){case"aac":for(var H,V=[],K=null,$=null,Y=null,W=g(l.ub()),X=W.next();!X.done;X=W.next()){var Q=X.value,J=Q.data;if(J){var Z=0;if(-1==$&&Y)J=et(Y,Q.data),$=null;else if(null!=$&&Y){Z=Math.max(0,$);var ee=et(Y,J.subarray(0,Z));V.push({data:ee,size:ee.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),$=Y=null}if(!(H=rA(J,Z)))throw new Ue(2,3,3018,n?n.P()[0]:null);for(t.audioSamplingRate=H.sampleRate,t.channelsCount=H.channelCount,null==K&&null!==Q.pts&&(K=Q.pts);Z<J.length;){var te=nA(J,Z);if(!te){Y=J.subarray(Z,J.length),$=-1;break}var ne=te.$d+te.ra;0!=($=Math.max(0,Z+ne-J.length))?Y=J.subarray(Z+te.$d,Z+ne):Z+ne<=J.length&&V.push({data:J.subarray(Z+te.$d,Z+ne),size:te.ra,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Z+=ne}}}if(!H||null==K){K=9e4*n.startTime;var re=at("audio",t.codecs.split(","));if(!re||!t.channelsCount||!t.audioSamplingRate)throw new Ue(2,3,3018,n?n.P()[0]:null);H={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:re};var ie=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(re,t.channelsCount);if(!ie)throw new Ue(2,3,3018,n?n.P()[0]:null);for(var ae=K+9e4*(n.endTime-n.startTime),se=K;se<ae;)V.push({data:ie,size:ie.byteLength,duration:1024,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),se+=1024/H.sampleRate*9e4}var oe=H.sampleRate,le=K/9e4*oe;c={id:t.id,type:"audio",codecs:H.codec,encrypted:t.encrypted&&t.drmInfos.length>0,timescale:oe,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:le,zb:V},stream:t};break;case"ac3":for(var ue=[],de=0,ce=new Uint8Array([]),he=null,fe=g(l.ub()),ge=fe.next();!ge.done;ge=fe.next()){var pe=ge.value,me=pe.data;null==he&&null!==pe.pts&&(he=pe.pts);for(var ye=0;ye<me.length;){var ve=sA(me,ye);ve?(t.audioSamplingRate=ve.sampleRate,t.channelsCount=ve.channelCount,de=ve.sampleRate,ce=ve.Ga,ue.push({data:me.subarray(ye,ye+ve.ra),size:ve.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),ye+=ve.ra):ye++}}if(0==de||0==ce.byteLength||null==he)throw new Ue(2,3,3018,n?n.P()[0]:null);var be=he/9e4*de;c={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:de,duration:r,Bb:[],Ga:ce,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:be,zb:ue},stream:t};break;case"ec3":for(var Ee=[],Te=0,Se=new Uint8Array([]),we=null,Ae=g(l.ub()),Ie=Ae.next();!Ie.done;Ie=Ae.next()){var ke=Ie.value,_e=ke.data;null==we&&null!==ke.pts&&(we=ke.pts);for(var Re=0;Re<_e.length;){var xe=uA(_e,Re);xe?(t.audioSamplingRate=xe.sampleRate,t.channelsCount=xe.channelCount,Te=xe.sampleRate,Se=xe.Ga,Ee.push({data:_e.subarray(Re,Re+xe.ra),size:xe.ra,duration:1536,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Re+=xe.ra):Re++}}if(0==Te||0==Se.byteLength||null==we)throw new Ue(2,3,3018,n?n.P()[0]:null);var Ce=we/9e4*Te;c={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Te,duration:r,Bb:[],Ga:Se,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ce,zb:Ee},stream:t};break;case"mp3":for(var De,Le=[],Me=null,Pe=g(l.ub()),Oe=Pe.next();!Oe.done;Oe=Pe.next()){var Fe=Oe.value,ze=Fe.data;if(ze){null==Me&&null!==Fe.pts&&(Me=Fe.pts);for(var Be=0;Be<ze.length;){var je=fA(ze,Be);je?(De||(De=je),Be+je.ra<=ze.length&&Le.push({data:ze.subarray(Be,Be+je.ra),size:je.ra,duration:1152,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),Be+=je.ra):Be++}}}if(!De||null==Me)throw new Ue(2,3,3018,n?n.P()[0]:null);var qe=De.sampleRate,Ge=Me/9e4*qe;c={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:qe,duration:r,Bb:[],Ga:new Uint8Array([]),Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:Ge,zb:Le},stream:t};break;case"opus":var He=[],Ve=null,Ke=l.H;if(!Ke)throw new Ue(2,3,3018,n?n.P()[0]:null);var $e=[];switch(Ke.nj){case 1:case 2:$e=[0];break;case 0:$e=[255,1,1,0,1];break;case 128:$e=[255,2,0,0,1];break;case 3:$e=[1,2,1,0,2,1];break;case 4:$e=[1,2,2,0,1,2,3];break;case 5:$e=[1,3,2,0,4,1,2,3];break;case 6:$e=[1,4,2,0,4,1,2,3,5];break;case 7:$e=[1,4,2,0,4,1,2,3,5,6];break;case 8:$e=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:$e=[1,1,2,0,1];break;case 131:$e=[1,1,3,0,1,2];break;case 132:$e=[1,1,4,0,1,2,3];break;case 133:$e=[1,1,5,0,1,2,3,4];break;case 134:$e=[1,1,6,0,1,2,3,4,5];break;case 135:$e=[1,1,7,0,1,2,3,4,5,6];break;case 136:$e=[1,1,8,0,1,2,3,4,5,6,7]}for(var We=new Uint8Array([0,Ke.channelCount,0,0,Ke.sampleRate>>>24&255,Ke.sampleRate>>>17&255,Ke.sampleRate>>>8&255,Ke.sampleRate>>>0&255,0,0].concat(p($e))),Xe=Ke.sampleRate,Qe=g(l.ub()),Je=Qe.next();!Je.done;Je=Qe.next()){var Ze=Je.value,tt=Ze.data;null==Ve&&null!==Ze.pts&&(Ve=Ze.pts);for(var nt=0;nt<tt.length;){for(var rt=!!(16&tt[nt+1]),it=!!(8&tt[nt+1]),st=nt+2,ot=0;255===tt[st];)ot+=255,st+=1;ot+=tt[st],st+=1,st+=rt?2:0,st+=it?2:0;var lt=tt.slice(st,st+ot);He.push({data:lt,size:lt.byteLength,duration:960,sb:0,flags:{xb:0,mb:0,jb:0,gb:0,hb:2,yb:0}}),nt=st+ot}}if(0==We.byteLength||null==Ve)throw new Ue(2,3,3018,n?n.P()[0]:null);t.audioSamplingRate=Ke.sampleRate,t.channelsCount=Ke.channelCount;var ut=Ve/9e4*Xe;c={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&t.drmInfos.length>0,timescale:Xe,duration:r,Bb:[],Ga:We,Ra:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:ut,zb:He},stream:t}}c&&(u.push(c),c=null)}}catch(pt){return pt&&3023==pt.code?Promise.resolve(new Uint8Array([])):Promise.reject(pt)}if(!u.length)return Promise.reject(new Ue(2,3,3018,n?n.P()[0]:null));var dt=new ls(u),ct=t.id+"_"+n.i;if(this.j.has(ct))var ht=this.j.get(ct);else ht=us(dt),this.j.set(ct,ht);var ft=this.l!==ht,gt=gs(dt);return this.l=ht,this.g++,Promise.resolve({data:gt,init:ft?ht:null})},B("shaka.transmuxer.TsTransmuxer",IA),IA.prototype.transmux=IA.prototype.transmux,IA.prototype.getOriginalMimeType=IA.prototype.getOriginalMimeType,IA.prototype.convertCodecs=IA.prototype.convertCodecs,IA.prototype.isSupported=IA.prototype.isSupported,IA.prototype.destroy=IA.prototype.destroy;var kA=["aac","ac-3","ec-3","mp3","opus"],_A=["avc","hevc"];function RA(){}$n("video/mp2t",function(){return new IA("video/mp2t")},Jn),h(RA,Bu),B("shaka.util.FairPlayUtils",RA)}.call(n,t,t,void 0),n.shaka)ql[r]=n.shaka[r]}()),Gl));export{Nl as E,ml as H,Bl as d,t as g,Hl as s};
